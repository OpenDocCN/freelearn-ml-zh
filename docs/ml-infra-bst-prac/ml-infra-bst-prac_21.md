

# 第十七章：摘要及下一步行动

这是本书的最后一章。我们学到了很多——从理解传统软件和基于机器学习的软件之间的区别开始。我们学习了如何处理数据，如何与算法合作。我们还探讨了如何部署模型，以及如何与机器学习进行道德合作。在本章中，我们将总结最佳实践，并试图一窥机器学习与软件工程交叉领域的未来发展趋势。

在本章中，我们将涵盖以下主要主题：

+   要知道我们将走向何方，我们需要知道我们曾经在哪里

+   最佳实践

+   当前的发展

+   我对未来看法

# 要知道我们将走向何方，我们需要知道我们曾经在哪里

我的计算机之旅始于 20 世纪 90 年代初，那时我拥有 Atari 800XL。一旦我接触到这台电脑，我就被它能够执行我所指示的事情的事实所震惊。我的第一个程序当然是 BASIC 语言编写的程序：

```py
10 PRINT Hello world!
20 GOTO 10
```

这既不是一个结构良好的程序，也不是一个非常有用的程序，但那是我当时能做的所有事情。这个第一个程序塑造了我整个职业生涯，因为它激发了我对软件开发的兴趣。后来，在我的职业生涯中，我意识到专业的软件工程远不止是编写源代码和编译它。程序需要结构良好、文档齐全、设计合理、测试充分（以及其他许多事情）。这个观察结果反过来又塑造了我对软件工程作为一门学科的见解，它可以将自制的软件变成一件艺术品，如果维护得当，可以在很长时间内使用。那是在 2000 年代初。大约在 2015 年，我看到了机器学习的潜力，这也激发了我的兴趣。我参与的第一个项目是由我的一个同事完成的，他向我展示了如何使用随机森林分类器来解释编程语言代码并推断出缺陷。快进到今天，我们有变压器、扩散器、自动编码器和混合网络，它们可以用数据做惊人的事情。

然而，我们需要从人工智能开发转向人工智能工程，就像我们从软件开发转向软件工程一样。这把我们带到了这本书，我在书中展示了超过 70 个人工智能工程的最佳实践。这本书带领我们从机器学习和人工智能的基本概念（第一部分），通过处理数据（第二部分）到算法和模型（第三部分）。我们还探讨了设计、使用和部署机器学习系统的伦理和法律方面（第四部分）。

# 最佳实践

本书的第一部分包含了许多最佳实践，这是因为这些最佳实践与软件工程、设计以及关于机器学习的关键决策有关——例如，第一个最佳实践告诉我们何时使用（以及何时不使用）机器学习。

作为这本书的这一部分是关于软件工程中的*机器学习景观*，我们将讨论不同类型的模型和数据，并展示它们是如何结合在一起的。

本书第一部分的最佳实践列表在*表 17.1*中呈现：

| **ID** | **最佳实践** |
| --- | --- |
| 1 | 当你的问题关注数据而不是算法时，使用机器学习算法。 |
| 2 | 在开始开发机器学习系统之前，进行尽职调查，并确定要使用的正确算法组。 |
| 3 | 如果你的软件是安全关键的，确保你可以设计机制来防止由机器学习的概率性质引起的安全隐患。 |
| 4 | 将机器学习软件作为机器学习模型开发典型训练-验证-评估流程的补充进行测试。 |
| 5 | 在设计机器学习软件时，首先关注你的数据和要解决的问题，其次才是算法。 |
| 6 | 只有在你知道需要加强哪些数据属性时，才使用数据插补。 |
| 7 | 一旦你探索了要解决的问题并理解了可用的数据，决定你是否想使用监督学习、自监督学习、无监督学习或强化学习算法。 |
| 8 | 选择对你系统最相关的数据验证属性。 |
| 9 | 在手动探索参数搜索空间之后，使用 GridSearch 和其他算法。 |
| 10 | 总是在你的机器学习系统中包含监控机制。 |
| 11 | 根据数据的视角选择正确的数据库，而不是从系统的角度考虑。 |
| 12 | 如果可能，使用云基础设施，因为它可以节省资源并减少对专业知识的需要。 |
| 13 | 早期决定你的生产环境，并将你的流程与该环境对齐。 |
| 14 | 根据你需要解决的问题来设计整个软件系统，而不仅仅是机器学习模型。 |
| 15 | 尽可能减小图像的大小，并尽可能少地使用颜色，以减少系统的计算复杂度。 |
| 16 | 在可能的情况下，使用参考数据集进行基准测试。 |
| 17 | 在可能的情况下，使用为特定任务预训练的模型。 |
| 18 | 可视化你的原始数据，以了解你的数据中的模式。 |
| 19 | 当数据被转换为特征以进行监控时，可视化你的数据，以检查是否仍然可以观察到相同的模式。 |
| 20 | 只使用必要的输入信息作为机器学习模型的输入。过多的信息可能需要额外的处理，并对系统提出不必要的性能要求。 |
| 21 | 当任务需要检测和跟踪对象时，在数据中使用边界框。 |
| 22 | 当你需要获取图像的上下文或需要特定区域的详细信息时，请使用语义图。 |
| 23 | 使用预训练的嵌入模型，如 GPT-3 或现有的 BERT 模型，来向量化你的文本。 |
| 24 | 在设计需要提供基于事实的决策的软件时，请使用角色标签。 |
| 25 | 确定您软件中使用的数据的来源，并据此创建您的数据处理管道。 |
| 26 | 提取您所需的所有数据，并将其存储在本地以减少使用该工具进行工作的软件工程师的干扰。 |
| 27 | 当从公共存储库访问数据时，请检查许可证，并确保您承认创建了分析代码的社区的贡献。 |
| 28 | 减少噪声对机器学习分类器影响的最佳策略是移除噪声数据点。 |
| 29 | 平衡特征数量与数据点数量。特征数量多并不总是更好。 |
| 30 | 对于分类任务的数据，使用`KNNImputer`；对于回归任务的数据，使用`IterativeImputer`。 |
| 31 | 使用随机森林分类器来减少属性噪声，因为它提供了非常好的性能。 |
| 32 | 尽可能保留数据的原始分布，因为它反映了经验观察。 |
| 33 | 在大规模软件系统中，如果可能，依靠机器学习模型来处理数据中的噪声。 |

表 17.1：本书第一部分的最佳实践

本书第二部分讲述了*数据获取与管理*。我们专注于从数据的角度进行机器学习——如何在数据中找到方向，存在哪些类型的数据，以及如何处理它们。

因此，以下最佳实践与数据相关：

| **ID** | **最佳实践** |
| --- | --- |
| 34 | 当处理数值数据时，首先可视化它，从数据的汇总视图开始。 |
| 35 | 在可视化数据聚合层面时，关注值之间的关系和连接的强度。 |
| 36 | 深入分析个体分析应受当前机器学习任务的指导。 |
| 37 | 当可视化图像的元数据时，确保您可视化图像本身。 |
| 38 | 文本数据的汇总统计有助于对数据进行合理性检查。 |
| 39 | 如果数据复杂但任务简单，请使用特征工程技术——例如，创建一个分类模型。 |
| 40 | 如果数据在某种程度上是线性的并且具有相似的尺度，请使用 PCA。 |
| 41 | 如果您不知道数据的属性并且数据集很大（>1,000 个数据点），请使用 t-SNE。 |
| 42 | 当数据集非常大时（因为自动编码器复杂且需要大量数据进行训练），使用自动编码器对数值数据进行处理。 |
| 43 | 在瓶颈处开始使用少量神经元——通常是列数的三分之一。如果自动编码器没有学习，则逐步增加数量。 |
| 44 | 对于 BERT 等大型语言模型，使用标记化器；对于简单任务，使用词嵌入。 |
| 45 | 当您的任务需要预定义的单词集时，请使用 BoW 分词器与字典一起使用。 |
| 46 | 将 WordPiece 分词器作为首选。 |
| 47 | 当您处理大型语言模型和大型文本语料库时，请使用 BPE。 |
| 48 | 当空白符很重要时，请使用 sentence piece 分词器。 |
| 49 | 使用词嵌入（FastText）作为设计分类器或文本的默认模型。 |

表 17.2：本书第二部分的最佳实践

一旦我们处理了数据，我们就专注于算法，这是机器学习的另一部分。

在本书的第三部分《设计和开发机器学习系统》中，我们的重点是软件。我们首先探讨了哪些算法存在以及如何选择最佳算法。从 AutoML 开始，并与 Hugging Face 合作，为我们提供了一个良好的平台，以学习如何训练和部署机器学习系统。

这里是它的最佳实践：

| **ID** | **最佳实践** |
| --- | --- |
| 50 | 在训练经典机器学习模型时，将 AutoML 作为首选。 |
| 51 | 从 Hugging Face 或 TensorFlow Hub 开始使用预训练模型。 |
| 52 | 与预训练网络一起工作，以确定它们的局限性，然后在您的数据集上训练网络。 |
| 53 | 而不是寻找更复杂的模型，创建一个更智能的管道。 |
| 54 | 如果您想理解您的数值数据，请使用提供可解释性的模型，例如决策树或随机森林。 |
| 55 | 最佳模型是那些能够捕捉数据中经验现象的模型。 |
| 56 | 简单但可解释的模型通常可以很好地捕捉数据。 |
| 57 | 总是确保训练集和测试集中的数据点是分开的。 |
| 58 | 使用 NVidia CUDA（加速计算）来训练 BERT、GPT-3 和自编码器等高级模型。 |
| 59 | 除了监控损失之外，确保您可视化生成的实际结果。 |
| 60 | 检查生成式 AI 模型的输出，以确保它不会破坏整个系统或提供不道德的回应。 |
| 61 | 模型卡片应包含有关模型如何训练、如何使用它、它支持哪些任务以及如何引用模型的信息。 |
| 62 | 尝试不同的模型以找到最佳管道。 |
| 63 | 使用像 Pytest 这样的专业测试框架。 |
| 64 | 根据您的训练数据设置测试基础设施。 |
| 65 | 将模型视为单元，并相应地为其准备单元测试。 |
| 66 | 识别机器学习部署的关键方面，并相应地监控这些方面。 |
| 67 | 设计机器学习模型的用户界面时，请专注于用户任务。 |
| 68 | 准备您的模型以进行 Web 部署。 |
| 69 | 尝试使用内存数据库，并非常频繁地将它们转储到磁盘。 |

表 17.3：本书第三部分的最佳实践

在本书的最后部分，“数据管理和机器学习系统开发中的伦理问题”，我们从伦理和法律的角度探讨了与机器学习相关联的挑战。我们提供了一些解决方案，但它们不能取代人类的判断和智慧。在最后一章，我们回到了更技术性的部分，教您如何与生态系统合作，通过开辟新的途径——微服务和 Docker 来结束本书：

| **ID** | **最佳实践** |
| --- | --- |
| 70 | 如果您的模型/软件旨在帮助用户完成日常任务，请确保将其开发为附加组件。 |
| 71 | 如果您出于非商业目的创建自己的数据，请使用限制您责任的宽松衍生许可证之一。 |
| 72 | 仅限于研究源代码和其他工件，并且只有在主体同意的情况下才使用个人数据。 |
| 73 | 应当将任何个人数据存储在身份验证和访问控制之后，以防止恶意行为者访问。 |
| 74 | 如果数据集包含可能存在偏差的变量，请使用差异度量来快速了解数据。 |
| 75 | 结合定期的审计来补充自动化偏差管理。 |
| 76 | 在将机器学习模型部署到生产时，请使用网络服务。 |
| 77 | 为网络服务同时使用网站和 Python API。 |
| 78 | 将您的网络服务 Docker 化，以实现版本控制和可移植性。 |

表 17.4：本书第四部分的最佳实践

本书提出的最佳实践基于我在设计、开发、测试和部署机器学习系统方面的经验。这些最佳实践并不全面，根据我们的兴趣，我们可能会找到更多。

为了寻找这些最佳实践，我强烈建议您查看该领域持续出现的科研出版物。特别是，我建议关注人工智能的主要会议——即 NeurIPS 和 AAAI——以及软件工程的主要会议——即 ICSE、ASE 和 ESEC/FSE。

# 当前发展

在撰写这本书的时候，技术创新研究所([`www.tii.ae/`](https://www.tii.ae/))刚刚发布了其最大的模型——Falcon 170B。这是与 GPT-3.5 模型相似的最大全开源模型。它展示了大型语言模型研究的当前方向。

尽管存在 GPT-4 这样的模型，其规模比 GPT-3.5 大 1000 倍，但我们仍然可以使用像 GPT-3.5 这样适度大的模型来开发非常好的软件。这让我们想到了一些我们作为社区需要讨论的当前话题。其中之一是这些模型的能源可持续性。Falcon-170B 需要 400 GB 的 RAM 来执行（根据 Hugging Face 的说法）。我们不知道 GPT-4 模型需要多少硬件。它消耗的电力和使用的资源必须与从该模型中获得的价值相当。

在机器学习方面，我们也接近了传统计算能力的极限，这让我们想到了量子计算（Cerezo，Verdon 等人，2022）。然而，尽管将机器学习嵌入到量子计算形式主义中的想法非常吸引人，但它并非没有挑战。机器学习系统/模型需要重新设计以适应新的范式，而新的范式需要更容易为 AI 工程师和软件工程师所接受。

当谈到算法时，越来越受到关注的是*蜂群算法*，这主要归功于**物联网**（IoT）背后的关注（Rosenberg 2016，Rajeesh Kumar，Jaya Lakshmi 等人，2023）。在 5G 和 6G 等电信技术的支持下，这些发展显然正在上升，并将继续上升。然而，当前的一个挑战是协议和技术的碎片化，这导致与网络安全和针对关键基础设施的攻击相关的问题。

另一个目前正在增长的研究领域是*图神经网络*（Gao，Zheng 等人，2023）。由于当前的架构仅限于线性数据或可以线性化的数据，它们无法处理某些任务。编程语言模型就是这样一个领域的例子——尽管它们能够执行许多任务，但目前它们无法考虑执行图或类似元素。因此，图神经网络被视为下一个发展方向，尽管在那里需要解决的主要挑战与图神经网络训练和推理所需的计算能力有关。

同时，越来越多的研究正在解决模型及其软性方面的发展，如伦理、可解释性和它们对整个社会的影响（Meskó和 Topol 2023）。医学、大型语言模型和社会的数字化只是正在进行的密集标准化工作的几个领域。

# 我对未来观点的看法

基于我对当前机器学习领域的观察，特别是关注软件工程，我可以看到一些趋势。

语言模型将更好地完成软件工程任务，如需求、测试和文档编写。这意味着软件工程师将能够专注于他们的核心工作——工程软件——而不是枯燥、重复的任务。我们将看到能够测试软件、编写文档、解释软件，甚至可能修复软件的模型。该领域的最新进展非常有希望。

混合模型将更加流行。结合符号分析和神经网络将获得动力，并能够帮助我们找到软件中的高级漏洞，以及在它们被利用之前识别它们。这将使我们的软件随着时间的推移变得更加健壮和有弹性。

大型模型和强大的计算能力也将帮助我们检测软件操作中的异常。通过分析日志，我们将能够预测老化，并将能够指导维护工作。再次强调，我们将能够专注于软件工程，而不是分析。

最后但同样重要的是，混合模型将帮助我们进行设计任务。结合图像生成和其他类型的方法将帮助我们设计软件——其架构和详细设计，甚至预测软件的操作性能。

# 最后的评论

我希望这本书对您来说很有趣，并且您在机器学习、人工智能和工程软件方面获得了新的知识。我希望您可以将这本书作为参考，并使用相关的代码来创建新产品。如果您喜欢这本书，请告诉我，通过 LinkedIn 与我联系，并为这本书的 GitHub 仓库做出贡献。我会监控它，并整合您可能提出的所有 pull requests。

在我们分别之前，我还有一个最后的最佳实践。

最佳实践#79

永远不要停止学习。

以一位大学教授的身份来说，机器学习领域发展迅速，几乎每周都有新的模型被引入。请确保您关注该领域的科学出版物和商业发展。这将帮助您保持知识的更新，并帮助您在职业生涯中取得进步。

# 参考文献

+   *Cerezo, M., G. Verdon, H.-Y. Huang, L. Cincio 和 P. J. Coles (2022). 量子机器学习中的挑战与机遇。自然计算科学* *2(9): 567-576.*

+   *Gao, C., Y. Zheng, N. Li, Y. Li, Y. Qin, J. Piao, Y. Quan, J. Chang, D. Jin 和 X. He (2023). 推荐系统中图神经网络的研究综述：挑战、方法和方向**。ACM 推荐系统交易* *1(1): 1-51.*

+   *Meskó, B.和 E. J. Topol (2023). 在医疗保健中对大型语言模型（或生成式 AI）进行监管审查的必要性。npj 数字医学* *6(1): 120.*

+   *拉杰什·库马尔，N. V.，N.贾亚拉什米，B.马拉拉和 V.贾达夫 (2023). 基于战斗竞争蜂群优化的物联网安全信任感知多目标路由协议。* *人工智能评论*。

+   *罗森伯格，L. (2016). 人工蜂群智能：人工智能中的人机交互方法。* *AAAI 人工智能会议论文集*。
