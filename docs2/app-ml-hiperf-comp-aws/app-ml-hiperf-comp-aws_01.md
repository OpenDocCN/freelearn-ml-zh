# 1

# 高性能计算（HPC）基础

**高性能计算**（**HPC**）影响着你生活的方方面面，从你的早晨咖啡到开车去办公室，了解天气预报，接种疫苗，观看的电影，乘坐的航班，玩的游戏，以及许多其他方面。我们中的许多行为都留下了数字足迹，导致产生了大量数据。为了处理这些数据，我们需要大量的处理能力。高性能计算（HPC），也称为*加速计算*，将来自节点集群的计算能力聚合起来，并将工作分配给各种相互连接的处理器，从而实现比使用单一计算机或机器所能达到的更高的性能，如图*图 1.1*所示。这有助于解决复杂的科学和工程问题，在药物发现、飞行模拟、供应链优化、金融风险评估等关键业务应用中：

![图 1.1 – HPC](img/B18493_01_001.jpg)

图 1.1 – HPC

例如，药物发现是一个数据密集型过程，涉及大量的计算来模拟病毒蛋白与人类蛋白的结合。这是一个极其昂贵的过程，可能需要数周或数月才能完成。通过将**机器学习**（**ML**）与加速计算相结合，研究人员可以以更高的速度和精度模拟药物与蛋白的相互作用。这导致实验速度加快，显著缩短了上市时间。

在本章中，我们将学习高性能计算（HPC）的基本原理和重要性，随后介绍该领域的技术进步。我们将了解限制因素以及开发者如何从云的弹性中受益，同时优化成本以更快地创新，从而获得竞争优势。

本章将涵盖以下主题：

+   我们为什么需要高性能计算（HPC）？

+   原地高性能计算（HPC）的限制

+   在云上执行高性能计算（HPC）的好处

+   利用高性能计算（HPC）推动各行业创新

# 我们为什么需要高性能计算（HPC）？

根据 Statista 的数据，全球数据的增长速度预计将迅速增加，并在 2020 年达到 64.2 泽字节。到 2025 年，数据量预计将增长到超过 180 泽字节。由于 COVID-19 大流行，2020 年的数据增长达到了新高，因为更多的人开始在线学习并远程在家工作。随着数据的持续增加，能够分析和处理数据的需求也在增加。这就是高性能计算发挥作用的地方。它帮助组织超越现有能力，并利用先进的计算技术探索可能性。如今，曾经仅限于大型企业和学术界的高性能计算应用正在各行各业中流行。这些行业包括材料科学、制造业、产品质量改进、基因组学、数值优化、计算流体动力学等。随着云基础设施使更多组织无论规模大小都能访问高性能计算，其应用列表将继续增加，同时优化成本，帮助更快地进行创新并获得竞争优势。

在我们更深入地探讨在云上执行高性能计算之前，让我们了解在本地运行高性能计算应用的局限性，以及我们如何通过使用云提供的专业高性能计算服务来克服这些局限性。

# 本地高性能计算的局限性

高性能计算应用通常基于大量数据训练的复杂模型，这需要高性能硬件，如**图形处理单元**（**GPU**）以及在不同机器间分配工作负载的软件。一些应用可能需要并行处理，而其他应用可能需要低延迟和高吞吐量的网络。同样，游戏和视频分析等应用可能需要使用快速输入/输出子系统以及 GPU 来加速性能。在本地满足所有不同类型的高性能计算应用在成本和维护方面可能令人望而却步。

一些已知的挑战包括但不限于以下内容：

+   高额前期资本投资

+   长采购周期

+   在整个生命周期内维护基础设施

+   技术更新

+   预测年度预算和容量需求

由于上述限制，规划一个高性能计算系统可能是一个艰巨的过程，其**投资回报率**（**ROI**）可能难以证明。这可能会成为创新的障碍，导致增长缓慢、效率降低、机会丧失以及可扩展性和弹性有限。让我们详细了解这些影响。

## 创新障碍

本地基础设施的约束可能会限制系统设计，使其更多地关注硬件的可用性，而不是业务用例。如果你的一些新想法没有得到现有基础设施的支持，你可能会考虑不到这些想法，从而阻碍你的创造力和组织内的创新。

## 效率降低

一旦你完成了系统各个组件的开发，你可能不得不在优先级队列中等待很长时间来测试你的作业，这可能会花费数周时间，即使运行时间只需要几个小时。本地基础设施旨在利用昂贵的硬件，通常会导致非常复杂的作业执行优先级策略，从而降低你的生产力和创新能力。

## 错过的机会

为了充分利用最新技术，组织必须更新他们的硬件。以前，典型的三年更新周期足以保持最新状态，以满足高性能计算工作负载的需求。然而，由于技术进步迅速和创新步伐加快，组织需要更频繁地更新其基础设施，否则可能会对收入产生更大的下游业务影响。例如，人工智能（**AI**）、机器学习（ML）、数据可视化、金融市场风险分析等技术正在推动本地基础设施的极限。此外，由于云的出现，许多这些技术都是云原生，在云上运行时在大数据集上提供更高的性能，尤其是在使用临时数据的工作负载中。

## 可扩展性和弹性有限

高性能计算应用严重依赖于容器、GPU 和无服务器技术等基础设施元素，这些元素在本地环境中并不容易获得，并且通常有一个漫长的采购和预算审批流程。此外，维护这些环境，确保它们得到充分利用，甚至升级操作系统或软件包，都需要技能和专用资源。在相同的硬件上部署不同类型的高性能计算应用在可扩展性和灵活性方面非常有限，并且不能为你提供完成工作的正确工具。

既然我们已经了解了在本地进行高性能计算的限制，那么让我们看看我们如何通过在云上运行高性能计算工作负载来克服这些限制。

# 在云上运行高性能计算（HPC）的好处

在云上几乎拥有无限容量，您可以超越本地高性能计算的限制。您可以根据业务用例重新构想新的方法，更快地进行实验，并从大量数据中获得洞察，而无需进行昂贵的本地升级和漫长的采购周期。您可以在云上运行复杂的模拟和深度学习模型，并利用可扩展的计算能力、高性能存储和高吞吐量网络，快速从想法过渡到市场。总之，它使您能够推动创新，在分布式团队之间协作，提高运营效率，并优化性能和成本。让我们更深入地了解这些益处的每一个。

## 推动创新

将高性能计算（HPC）工作负载迁移到云端，有助于您打破创新的障碍，开启无限可能的大门。您可以快速失败并前进，尝试成千上万的实验，并基于数据进行商业决策。我最喜欢的益处是，一旦您解决了问题，它就会得到解决，您在系统升级或技术更新后无需重新审视。它消除了返工和硬件维护，让您专注于业务用例，并使您能够快速设计、开发和测试新产品。云提供的弹性，允许您根据需求扩展和缩减基础设施。此外，基于云的服务提供原生功能，这可以减轻负担，让您无需自己编写和管理所有实用程序库，即可采用经过测试和验证的高性能计算（HPC）应用程序。

## 使分布式团队之间能够安全协作

云上的 HPC 工作负载允许您与团队在全球范围内共享设计、数据、可视化和其他工件，而无需复制或传播敏感数据。例如，构建数字孪生（物理对象的实时数字对应物）有助于预测性维护。它可以实时获取对象的状态，并监控和诊断对象（资产）以优化其性能和利用率。要构建数字孪生，需要跨团队技能集，这些技能可能位于远程位置以从各种物联网传感器捕获数据，进行广泛的假设分析，并精心构建模拟模型以开发物理对象的准确表示。云提供了一个协作平台，不同团队可以在近乎实时的情况下与模拟模型互动，而无需移动或复制数据到不同的位置，并确保符合快速变化的行业法规。此外，您可以使用云提供的本地功能和服务的功能，例如 AWS IoT TwinMaker，它可以使用来自多个来源的现有数据，创建物理系统的虚拟副本，并将 3D 模型结合起来，更快、更轻松地为您提供运营的整体视图。云上 HPC 技术的广泛全球存在，允许您与不同地理区域的远程团队合作，而无需在安全性和成本之间做出权衡。

## 提高运营效率

**运营效率**意味着您能够支持工作负载的开发和执行，获得洞察力，并持续改进支持您应用程序的流程。设计原则和最佳实践包括自动化流程、进行频繁且可逆的更改、经常优化您的操作，以及能够预测和从故障中恢复。将您的 HPC 应用程序部署在云上，您就能做到这一点，因为您可以将基础设施作为代码进行版本控制，类似于您的应用程序代码，并将其与您的**持续集成**和**持续交付**（**CI/CD**）管道集成。此外，通过按需访问无限的计算能力，您将不再需要长时间排队等待作业运行。您可以跳过等待，专注于解决业务关键问题，为您提供适合工作的正确工具。

## 优化性能

性能优化涉及高效使用资源的能力，以及能够随着应用程序的变化或发展而维护它们。一些最佳实践包括使实施对您的团队更容易，尽可能使用无服务器架构，以及能够更快地进行实验。例如，开发机器学习模型并将其集成到您的应用程序中需要特殊的专业知识，这可以通过使用云提供商提供的现成模型来缓解，例如 AWS 的 AI 和机器学习堆栈中的服务。此外，您可以利用专门为 HPC 设计的计算、存储和网络服务，消除专用硬件的长期采购周期。您可以快速进行基准测试或负载测试，并使用这些数据来优化您的作业，而无需担心成本，因为您只需为在云端使用资源的时间付费。我们将在第五章*数据分析*和*第六章**机器学习模型的分布式训练*中更深入地了解这个概念。

## 优化成本

成本优化是一个持续的过程，涉及在整个应用程序生命周期内监控和改进资源利用率。通过采用按需付费的消费模式，并根据业务需求增加或减少使用量，您可以实现潜在的节省成本。您可以在几分钟内快速部署和取消部署 HPC 集群，而不是几天或几周。这使得您能够快速获取所需资源。您可以通过计算实现的企业价值和交付成本来衡量整体效率。有了这些数据，您不仅可以做出明智的决策，还可以了解通过增加应用程序的功能和降低成本所获得的收益。

在云端运行高性能计算（HPC）可以帮助您克服与传统的本地基础设施相关的限制：固定容量、漫长的采购周期、技术过时、高额的前期资本投资、维护硬件以及应用定期的**操作系统**（**OS**）和软件更新。云端为您提供几乎无限的 HPC 容量，使用最新的技术来促进创新，这有助于您根据业务需求而不是可用硬件来设计您的架构，最小化作业队列的需求，并在优化成本的同时提高运营和性能效率。

接下来，让我们看看不同行业如**自动驾驶汽车**（**AVs**）、制造业、媒体和娱乐、生命科学和金融服务如何通过 HPC 工作负载推动创新。

# 利用 HPC 推动跨行业创新

每个行业和类型的 HPC 应用都面临着不同类型的挑战。云供应商如 AWS 提供的 HPC 解决方案帮助所有公司，无论其规模大小，这导致了强化学习、数字孪生、供应链优化和自动驾驶汽车等新兴 HPC 应用的兴起。

让我们来看看生命科学和医疗保健、自动驾驶汽车和供应链优化中的一些用例。

## 生命科学和医疗保健

在生命科学和医疗保健领域，几乎每分钟都会捕捉到大量敏感且有意义的数据。利用 HPC 技术，我们可以利用这些数据，通过对关键疾病进行有意义的洞察来拯救生命，减少测试实验室样本、药物发现等所需的时间，以及满足核心安全和合规要求。

以下是一些在医疗保健和生命科学领域的新兴应用。

### 基因组学

您可以使用 AWS 提供的云服务来安全地存储和共享基因组数据，这有助于您构建和运行预测或实时应用程序，从而加速从基因组数据到基因组洞察的过程。这有助于显著减少数据处理时间，并对诸如癌症和阿尔茨海默病等关键疾病进行因果分析。

### 成像

通过使用计算机视觉和数据集成服务，您可以提高图像分析并促进长期数据保留。例如，通过使用机器学习分析 MRI 或 X 射线扫描，放射学公司可以提高运营效率，并为他们的患者快速生成实验室报告。AWS 为成像提供的一些技术包括 Amazon EC2 GPU 实例、AWS Batch、AWS ParallelCluster、AWS DataSync 和 Amazon SageMaker，我们将在后续章节中详细讨论。

### 计算化学和基于结构的药物设计

结合最先进的蛋白质分类深度学习模型、蛋白质结构解决方案的进步以及描述 3D 分子模型的算法，并利用高性能计算资源，您可以将上市时间大幅缩短。例如，诺华公司在 AWS 云上完成的一个项目中，他们能够在不到一周的时间内对 1000 万个化合物进行针对常见癌症目标的筛选，根据他们的内部计算，如果他们在内部进行类似的实验，那么将需要大约 4000 万美元的投资。通过在云上使用 AWS 服务和功能运行此实验，他们能够利用他们 39 年的计算化学数据和知识。此外，进行实验仅花费了 9 小时和 4232 美元，从而提高了他们的创新和实验速度。他们成功地从 1000 万个化合物中筛选出了三个。

现在我们已经了解了一些在生命科学和医疗保健领域的应用，让我们来讨论一下汽车和交通行业是如何利用高性能计算（HPC）来构建自动驾驶汽车的。

## 自动驾驶汽车

深度学习模型（如强化学习、目标检测和图像分割）的进步，以及计算技术的技术进步，以及在边缘设备上部署模型，为自动驾驶汽车铺平了道路。为了设计和构建自动驾驶汽车，系统的所有组件都必须协同工作，包括规划、感知和控制系统。这还要求收集和处理大量数据，并利用这些数据创建反馈循环，以便车辆可以根据道路上交通的实时变化调整其状态。这需要具有高 I/O 性能、网络、专门的硬件协处理器（如 GPU 或**现场可编程门阵列**（**FPGA**）），以及分析和深度学习框架。此外，在自动驾驶汽车甚至开始在真实道路上测试之前，它必须经过数百万英里的模拟，以证明其安全性能，因为环境的高维度复杂且耗时。通过使用 AWS 云的几乎无限的计算和存储能力、对高级深度学习框架的支持以及专门构建的服务，你可以加快上市时间。例如，2017 年，美国交通公司 Lyft 推出了其自动驾驶部门。为了提高其系统的性能和安全性，它使用从其自动驾驶车队收集的 PB 级数据，每年执行数百万次模拟，这涉及到大量的计算能力。为了以更低的成本运行这些模拟，他们决定利用 AWS 云上未使用的计算能力，通过使用 Amazon EC2 Spot Instances，这不仅帮助他们增加了运行此类规模模拟的能力，还帮助他们提高了容量。

接下来，让我们了解供应链优化及其流程！

## 供应链优化

供应链是全球性的制造商、分销商、供应商、物流和电子商务零售商的网络，它们共同工作，以确保产品从工厂到客户门口的运输无延误且无损。通过使这些网络中的信息流动，你可以自动化决策，无需任何人为干预。需要考虑的关键属性包括实时库存预测、端到端可见性，以及以无与伦比的效率跟踪和追溯整个生产过程的能力。你的团队将不再需要处理与供应链决策相关的琐碎细节。通过自动化和机器学习，你可以解决产品流动中的瓶颈。例如，在流行病或自然灾害发生时，你可以迅速将货物转移到替代的运输路线，而不会影响其准时交付。

这里有一些使用机器学习来改进供应链流程的例子：

+   **需求预测**：您可以将时间序列与额外的相关数据相结合，例如假日、天气和人口事件，并使用如 DeepAR 之类的深度学习模型来获得更准确的结果。这将帮助您应对多变的需求并避免过度配置。

+   **库存管理**：您可以使用机器学习模型自动化库存管理，以确定库存水平并通过防止过剩库存来降低成本。此外，您还可以在供应链过程中使用机器学习模型进行异常检测，这可以帮助您优化库存管理，并更积极地解决潜在问题，例如，通过提前使用优化的路线将库存转移到正确的位置。

+   **通过自动产品质量检查提高效率**：通过使用计算机视觉模型，您可以在早期阶段更快地识别产品缺陷，并提高一致性和准确性，从而使客户能够及时收到高质量的产品。这减少了因产品质量问题而导致的客户退货和保险索赔，从而节省了成本和时间。

上述讨论的所有供应链优化组件都需要作为工作流程的一部分协同工作，因此需要低延迟和高吞吐量，以便及时将最优质量的产品送到客户家门口。使用云服务构建工作流程为您提供了更大的弹性、可伸缩性，并在优化的成本下运行。此外，通过本地专用服务，您可以消除繁重的工作，并缩短上市时间。

# 摘要

在本章中，我们首先了解了高性能计算的基本原理及其在处理大量数据以获得有意义的见解方面的重要性。然后，我们讨论了在本地运行高性能计算工作负载的限制，因为不同类型的高性能计算应用程序将具有不同的硬件和软件要求，这在家中采购既耗时又昂贵。此外，它将阻碍创新，因为开发人员和工程师受限于资源的可用性，而不是应用程序的要求。然后，我们讨论了在云上拥有高性能计算工作负载如何帮助克服这些限制，并促进全球团队的协作，打破创新的障碍，改进架构设计，并优化性能和成本。云基础设施使得高性能计算应用程序所需的专用硬件更加易于获取，这导致了该领域在众多行业中的创新。因此，在最后一节中，我们讨论了一些高性能计算中的新兴工作负载，例如在生命科学和医疗保健、供应链优化和自动驾驶汽车中，以及一些现实世界的例子。

在下一章中，我们将深入了解数据管理和传输，这是在云上运行高性能计算工作负载的第一步。

# 进一步阅读

您可以通过以下链接获取有关本章主题的更多信息：

+   [`www.statista.com/statistics/871513/worldwide-data-created/`](https://www.statista.com/statistics/871513/worldwide-data-created/)

+   [`d1.awsstatic.com/whitepapers/Intro_to_HPC_on_AWS.pdf`](https://d1.awsstatic.com/whitepapers/Intro_to_HPC_on_AWS.pdf)

+   [`aws.amazon.com/solutions/case-studies/novartis/`](https://aws.amazon.com/solutions/case-studies/novartis/)

+   [`aws.amazon.com/solutions/case-studies/Lyft-level-5-spot/`](https://aws.amazon.com/solutions/case-studies/Lyft-level-5-spot/)

+   [`d1.awsstatic.com/psc-digital/2021/gc-700/supply-chain-ebook/Supply-Chain-eBook.pdf`](https://d1.awsstatic.com/psc-digital/2021/gc-700/supply-chain-ebook/Supply-Chain-eBook.pdf)

+   [`d1.awsstatic.com/HCLS%20Whitepaper%20.pdf`](https://d1.awsstatic.com/HCLS%20Whitepaper%20.pdf)
