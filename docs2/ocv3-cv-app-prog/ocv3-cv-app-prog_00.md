# 前言

增强现实、驾驶辅助、视频监控；越来越多的应用现在正在使用计算机视觉和图像分析技术，但我们仍然处于能够通过视觉感知理解我们世界的全新计算机化系统发展的初期。随着强大且价格合理的计算设备和视觉传感器的出现，创建复杂的成像应用从未如此简单。众多软件工具和库可以处理图像和视频，但对于任何希望开发基于智能视觉的应用的人来说，OpenCV 库是必须使用的工具。OpenCV（开源计算机视觉）是一个包含超过 500 个针对图像和视频分析优化的算法的开源库。自 1999 年推出以来，它已被计算机视觉研究者和开发者社区广泛采用作为主要开发工具。OpenCV 最初由 Gary Bradski 领导的一个团队在英特尔开发，作为推动视觉研究并促进基于视觉、CPU 密集型应用发展的一个倡议。经过一系列的测试版发布后，2006 年推出了 1.0 版本。2009 年，随着 OpenCV 2 的推出，发生了第二次重大发布，提出了重要变化，特别是新的 C++接口，这是我们在这本书中使用的。2012 年，OpenCV 重塑了自己，作为一个非营利性基金会([`opencv.org/`](http://opencv.org/))，依靠众筹来支持其未来的发展。2013 年推出了 OpenCV3；主要更改是为了提高库的可用性。其结构已被修订以删除不必要的依赖项，大型模块已被拆分为更小的模块，API 已被精炼。这本书是《OpenCV 计算机视觉应用编程食谱》的第三版，也是第一个涵盖 OpenCV 版本 3 的版本。所有前版的编程食谱都经过了审查和更新。我们还添加了新的内容和新的章节，为读者提供对库基本功能的更好覆盖。本书涵盖了库的许多功能，并解释了如何使用它们来完成特定任务。我们的目标不是提供对 OpenCV 函数和类提供的每个选项的详细覆盖，而是为您提供构建应用程序所需的基本元素。我们还在本书中探讨了图像分析的基本概念，并描述了一些计算机视觉中的重要算法。这本书是您进入图像和视频分析世界的机会。但这只是开始。好消息是 OpenCV 仍在不断发展和扩展。只需查阅 OpenCV 在线文档([`opencv.org/`](http://opencv.org/))，即可了解库能为您做什么。您还可以访问作者的网站([`www.laganiere.name/`](http://www.laganiere.name/))，获取关于这本食谱的最新信息。

# 本书涵盖内容

*第一章, 玩转图像*，介绍了 OpenCV 库，并展示了如何构建可以读取和显示图像的简单应用程序。它还介绍了基本的 OpenCV 数据结构。

*第二章, 操作像素*，解释了如何读取图像。它描述了不同的扫描图像方法，以便对每个像素执行操作。

*第三章, 处理图像的颜色*，包含了一系列面向对象的编程设计模式，这些模式可以帮助你构建更好的计算机视觉应用程序。它还讨论了图像中的颜色概念。

*第四章, 使用直方图计算像素*，展示了如何计算图像直方图以及如何使用它们来修改图像。介绍了基于直方图的不同应用，这些应用实现了图像分割、目标检测和图像检索。

*第五章, 使用形态学操作变换图像*，探讨了数学形态学的概念。它介绍了不同的算子以及如何使用它们在图像中检测边缘、角点和段。

*第六章, 过滤图像*，教授了频率分析和图像过滤的原理。它展示了如何将低通和高通滤波器应用于图像，并介绍了导数算子的概念。

*第七章, 提取线条、轮廓和组件*，专注于检测几何图像特征。它解释了如何在图像中提取轮廓、线条和连通组件。

*第八章, 检测兴趣点*，描述了图像中的各种特征点检测器。

*第九章, 描述和匹配兴趣点*，解释了如何计算兴趣点的描述符以及如何使用它们在图像之间匹配点。

*第十章, 在图像中估计投影关系*，探讨了同一场景中两个图像之间的投影关系。它还描述了如何在图像中检测特定目标。

*第十一章, 重建 3D 场景*，允许你从多张图像中重建场景的 3D 元素并恢复相机姿态。它还包括了相机校准过程的描述。

*第十二章，处理视频序列*，提供了一个读取和写入视频序列以及处理其帧的框架。它还展示了如何从摄像头前移动的前景对象中提取前景对象。

*第十三章，跟踪视觉运动*，讨论了视觉跟踪问题。它展示了如何在视频中计算视运动。它还解释了如何在图像序列中跟踪移动对象。

*第十四章，从示例中学习*，介绍了机器学习的基本概念。它展示了如何从图像样本中构建对象分类器。

# 为本书所需物品

本食谱基于 OpenCV 库的 C++ API。因此，假设您对 C++语言有一些经验。为了运行食谱中展示的示例并进行实验，您需要一个良好的 C++开发环境。Microsoft Visual Studio 和 Qt 是两个流行的选择。

# 本书面向对象

本食谱适合希望学习如何使用 OpenCV 库构建计算机视觉应用的初学者 C++程序员。它也适合希望了解计算机视觉编程概念的软件专业人士。它可以作为大学计算机视觉课程的学习伴侣书籍。它对于图像处理和计算机视觉的硕士和研究人员来说是一个极好的参考。

# 部分

在本书中，您会发现几个经常出现的标题（准备工作、如何做、它是如何工作的、还有更多、参见）。为了清楚地说明如何完成食谱，我们使用以下这些部分：

## 准备工作

本节告诉您在食谱中可以期待什么，并描述了如何设置任何软件或任何为食谱所需的初步设置。

## 如何做…

本节包含遵循食谱所需的步骤。

## 它是如何工作的…

本节通常包含对前节发生事件的详细解释。

## 还有更多…

本节包含有关食谱的附加信息，以便使读者对食谱有更多的了解。

## 参见

本节提供了对其他有用信息的链接，这些信息对食谱很有帮助。

# 习惯用法

在本书中，您将找到许多区分不同类型信息的文本样式。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：“我们可以通过使用`include`指令来包含其他上下文。”

代码块设置如下：

```py
    // Compute Laplacian using LaplacianZC class
    LaplacianZC laplacian;
    laplacian.setAperture(7); // 7x7 laplacian
    cv::Mat flap= laplacian.computeLaplacian(image);
    laplace= laplacian.getLaplacianImage();
```

当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目将以粗体显示：

```py
    // Compute Laplacian using LaplacianZC class
    LaplacianZC laplacian;
    laplacian.setAperture(7); // 7x7 laplacian
    cv::Mat flap= laplacian.computeLaplacian(image);
    laplace= laplacian.getLaplacianImage();
```

**新术语**和**重要单词**以粗体显示。屏幕上显示的单词，例如在菜单或对话框中，在文本中显示如下：“点击**下一步**按钮将您带到下一屏幕。”

# 读者反馈

我们始终欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大收益的标题。

要向我们发送一般反馈，请简单地发送电子邮件至 feedback@packtpub.com，并在邮件主题中提及书籍标题。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从 Packt Publishing 网站上的账户下载此书的示例代码文件。[`www.packtpub.com`](http://www.packtpub.com)。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**选项卡上。

1.  点击**代码下载与勘误**。

1.  在**搜索**框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击**代码下载**。

您还可以通过点击 Packt Publishing 网站上书籍网页上的**代码文件**按钮下载代码文件。您可以通过在**搜索**框中输入书籍名称来访问此页面。请注意，您需要登录您的 Packt 账户。

文件下载完成后，请确保使用最新版本的软件解压缩或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

书籍的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/OpenCV3-Computer-Vision-Application-Programming-Cookbook-Third-Edition`](https://github.com/PacktPublishing/OpenCV3-Computer-Vision-Application-Programming-Cookbook-Third-Edition)。我们还有其他来自我们丰富图书和视频目录的代码包可供选择，网址为[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。查看它们吧！

本烹饪书中的示例源代码文件也托管在作者的 GitHub 仓库中。您可以通过访问作者的仓库[`github.com/laganiere`](https://github.com/laganiere)来获取代码的最新版本。

## 下载本书的颜色图像

我们还为您提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。彩色图像将帮助您更好地理解输出的变化。您可以从 [`www.packtpub.com/sites/default/files/downloads/OpenCV3ComputerVisionApplicationProgrammingCookbookThirdEdition_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/OpenCV3ComputerVisionApplicationProgrammingCookbookThirdEdition_ColorImages.pdf) 下载此文件。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问 [`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误表，请访问 [`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在**勘误**部分下。

## 盗版

互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过 copyright@packtpub.com 联系我们，并提供疑似盗版材料的链接。

我们感谢您在保护我们的作者和我们为您提供有价值内容的能力方面的帮助。

## 询问

如果您在这本书的任何方面遇到问题，您可以通过 questions@packtpub.com 联系我们，我们将尽力解决问题。
