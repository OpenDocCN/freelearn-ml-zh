# 8

# 发现 Google Cloud ML API

**应用程序编程接口**（**API**）允许一个计算机程序使其数据和功能可供其他程序使用。换句话说，通过程序或服务的 API，用户可以向程序/服务发送请求并获取响应。ML API 是基于云的 AI 服务，通过利用**云服务提供商**（**CSP**）的 API，帮助您将机器智能构建到您的应用程序中。它们作为 REST API、客户端库 SDK 和用户界面提供。

Google Cloud ML API 提供了一种接口，用于在云中利用 Google 的机器学习服务。在本章中，我们将讨论 Google Cloud ML API 范围，包括以下云服务：

+   Google Cloud sight API，包括 Cloud Vision API 和 Cloud Video API

+   Google Cloud 语言 API，包括**自然语言处理**（**NLP**）和翻译

+   Google Cloud 对话 API，包括语音转文本、文本转语音和 Dialogflow

让我们从 Google 的 Cloud Sight API 开始。

# Google Cloud Sight API

**Google Cloud Sight API**提供了强大的 Google 预训练机器学习模型，用于视觉处理和视频处理。我们将探讨 Cloud Vision API 和 Cloud Video API 的概念。

## Cloud Vision API

**Cloud Vision API**是一个通过 Google 预训练的高级机器学习模型来解码图像的工具。它可以解释图像并将它们分类到许多类别中。它可以提取和检测文本，无论文本是在图片中还是文档照片中。

Google Cloud Vision 允许开发者轻松地将视觉检测功能集成到应用程序中，包括图像标签、地标检测、标志检测和内容检测：

+   图像标签检测可以检测、识别和标记图像中存在的对象、位置、活动、动物种类、产品等许多其他事物。

+   地标检测可以在图像中识别地标，例如著名的地标和自然或人造结构。它提供地标的名称、边界多边形的顶点以及地标的地理位置（纬度和经度）。

+   标志检测可以在图像中检测流行的产品标志，例如流行的公司标志、产品标志等。

+   内容检测可以在图像中检测显性内容，例如成人内容、暴力内容、色情内容等。它提供了这样的内容存在于图像中的可能性。

以下是一些 Google Cloud Vision API 的应用案例：

+   **文本数字化**：Cloud Vision API 可以在图像中检测文本，尤其是在扫描图像中。最好的部分是您可以自定义自己的模型，并在核心内置功能之上为特定场景进行训练。例如，您可以将特定的医生处方放入自定义模型中，并在 Google 已提供的模型之上进行训练，使其更加健壮。

+   **安全和监控**：Google Cloud Vision 提供了非常精确的面部识别、面部比较和面部追踪。

+   **使用 Logo API 进行品牌研究**：Google Cloud Vision 提供了一个独立的标志检测 API，您可以在横幅广告中查找标志以确定品牌名称。

+   **店内情感分析**：如果我们能实时检测到店内顾客的意见和情感，那么实时营销和客户支持就可以向前迈进一大步。Google Cloud Vision 通过店内用户的面部表情来捕捉顾客的情感。

+   **机器人技术**：使机器人能够理解其环境是一个巨大的挑战，需要 Google Vision API 进行精确的对象检测。

云视觉的主要领域之一是 Google 的云视觉**光学字符识别**（**OCR**），这是一种将手写文本或印刷文本转换为机器编码文本的方法。使用 OCR，Google Vision API 可以识别和从图像中提取文本，有两种标注：**文本检测**识别并从图像中提取文本，**文档文本检测**从图像中提取文本，其格式针对密集文本和文档进行了优化。文本检测的 JSON 提取响应包含提取的文本以及该文本中出现的所有单个单词，而文档文本检测的 JSON 提取响应包括页面信息、块、段落和单词，以及页面分页信息。Google Cloud Vision OCR 具有以下优势：

+   **多语言支持**：Google Cloud Vision OCR 支持许多语言。

+   `librarysur`，并且可以非常容易地使用。

+   **快速速度**：Google Cloud Storage 平台与 OCR API 服务集成。利用 GCS，OCR API 可以非常快。

+   **可扩展性**：它可以进行扩展，而 Google 的 OCR 定价策略鼓励用户增加 API 的使用量，因为使用量增加会导致平均价格降低。

使用 Google 的预训练模型，Cloud Vision API 提供了许多机器学习功能，使开发者能够将它们集成到各种应用开发中。OCR 有许多商业用途：银行使用 OCR 来比较报表，医院使用 OCR 将手写表格转换为标准文本填充表格，政府使用 OCR 进行调查反馈收集，等等。

## 云视频 API

`.MOVIE`、`.MPEG4`、`.MP4`和`.AVI`。Google Cloud Video API 提供了以下功能：

+   **标签检测**：它可以检测视频中的实体，并根据请求提供视频片段标注列表、帧标注列表或镜头标注列表。

+   **镜头变化检测**：它可以通过镜头或场景标注视频，并标注与视频场景相关的对象。

+   **文本检测**：它可以提供实际文本以及文本在视频中的位置。

+   **显式内容检测**：它可以标注显式内容并在视频中放置时间戳。

+   **对象跟踪**：它可以在视频中跟踪多个对象，并提供每个对象在各个帧中的位置。

+   **语音转录**：它可以捕获视频中的口语单词/句子，并将它们转录成文本。

通过 Google Cloud Video API，开发人员可以对存储在本地或云存储中的视频或直播视频进行标注，以整个视频、每个片段、每个镜头和每个帧的上下文信息进行标注，并开发相关智能应用。

# Google Cloud Language API

Google 的**云语言 API**包括语言翻译和自然语言处理（NLP）。云翻译 API 允许您检测一种语言并将其翻译成另一种语言，因此您只需指定目标语言，因为它会自动检测源语言。NLP 允许您揭示输入文本的结构和含义。它为开发人员或计算机程序提供了一个接口，用于发送请求并获取响应。

Google 的 NLP API 有几种方法来执行文本分析和标注：

+   `analyzeSentiment`方法。情感分析响应字段包括以下内容：

    +   `-1.0`（消极）和`1.0`（积极），基于文本的整体情感倾向和情感强度，这表示给定文本中（积极和消极）情感的整体强度，介于`0.0`和`+inf`之间。文档的情感得分表示文档的整体情绪。文档的情感强度表示文档中情感内容的存在程度。

    +   **语言**包含文档的语言，要么在初始请求中传递，要么在缺失时自动检测。

    +   **句子**包含从原始文档中提取的句子列表，以及附加到每个句子的句子级情感值，这些值包含之前描述的得分和强度值。

情感分析表明文档中积极和消极情绪之间的差异，但它不会识别具体的积极和消极情绪。例如，当检测到被认为是*愤怒*的某物或被认为是*悲伤*的文本时，分析响应仅表明情绪是消极的，而不是*悲伤*或*愤怒*。

+   **实体分析**：检查给定的文本中已知实体，例如映射到唯一实体的专有名词（特定的人、地点等）或普通名词（也称为**名词**，如餐厅、体育场等）。实体分析返回一组检测到的实体及其参数，例如实体的类型、实体与整体文本的相关性以及文本中引用同一实体的位置。实体按其显著性分数（反映其与整体文本的相关性）的顺序（从高到低）返回。

+   **实体情感分析**：结合实体分析和情感分析，试图确定文本中关于实体的情感（正面或负面）。实体情感由每个检测到的实体的数值分数和幅度值表示。然后，这些分数被汇总成一个实体的整体情感分数和幅度。

+   `analyzeSyntax` 方法。句法分析包括以下操作：

    +   句子提取将文本流分解成一系列句子。

    +   标记化将文本流分解成一系列标记，每个标记通常对应一个单词。

    +   自然语言 API 然后处理标记，并使用它们在句子中的位置，为标记添加句法信息。

+   `classifyText` 方法。对于输入文本，Google 的自然语言 API 过滤 `classifyText` 方法返回的类别，仅包括最相关的类别。

总结来说，通过情感分析、实体分析、实体情感分析、内容分类和句法分析，Google 自然语言 API 的预训练模型可以帮助开发者将自然语言理解应用于他们的应用程序并解决许多业务用例。

# Google Cloud 对话 API

**Google Cloud 对话 API** 提供了一种进行交互式自然语言 AI 对话的方式。它有三个方面：Cloud Dialogflow、Cloud Text-to-Speech 和 Cloud Speech-to-Text：

+   **Dialogflow** 提供了一个自然语言理解平台，您可以在其中设计和集成对话用户界面。

+   **文本转语音**将文本输入转换为自然人类语音的音频数据。

+   **语音转文本**将音频或语音输入转换为文本。

Google Cloud Dialogflow 允许您构建虚拟代理和聊天机器人。Dialogflow 分析文本或音频输入，并使用文本或语音进行响应。

意图是 Dialogflow 的核心。意图将最终用户的意图进行分类。当用户添加输入时，Dialogflow 通过使用训练短语——即最终用户可能实际说出的话的例子——来训练模型进行意图分类，训练结果是将短语映射到意图。使用用户意图，Dialogflow 的典型工作流程如下：

1.  最终用户将提供一个输入短语，该短语将被发送到某种类型的代理。代理执行意图分类并将输入短语映射到意图。

1.  从意图中提取相关参数并将操作链接到意图，例如检索银行账户余额。

1.  参数和操作将被发送以创建响应。

1.  响应是返回给最终用户的语音或文本。

Google Cloud 语音转文本允许将 Google 语音识别技术集成到使用 Google 先进 AI 技术的应用程序开发中。Speech-to-Text 有三种主要方法：

+   **同步识别**：当语音转文本 API 接收到语音音频数据时，它执行数据识别/处理，并在处理完所有音频数据后返回结果，然后再处理下一个请求。

+   **异步识别**：当语音转文本 API 接收到音频数据输入时，它启动一个长时间运行的操作，并定期轮询识别结果。

+   **流式识别**：实时音频识别，例如从麦克风捕获实时音频。流式识别在捕获音频的同时提供中间结果，允许结果在用户仍在说话时出现。

语音转文本可以使用几个机器学习模型来转录您的音频文件。谷歌针对特定的音频类型和来源训练了这些语音识别模型。当您向语音转文本发送音频转录请求时，您可以通过指定原始音频的来源来提高您收到的结果。这允许语音转文本 API 使用针对该特定类型来源的语音音频进行识别的机器学习模型处理您的音频文件。

谷歌云文本转语音 API 允许您使用 WaveNet 声音将文本转换为类似人类的声音，WaveNet 通过在音节、音素和单词上产生更类似人类的重音和语调来合成语音。WaveNet 产生的语音音频比其他文本转语音技术更受人们喜爱。

文本转语音使用合成声音从它呈现的文本创建音频。它创建听起来自然的人类语音，作为可播放的音频。除了普通文本外，云文本转语音 API 还可以将**语音合成标记语言**（**SSML**）转换为音频。SSML 允许您控制文本转换为语音的方式。

# 摘要

在本章中，我们介绍了谷歌云机器学习 API 服务：包含视觉和视频 API 的云视觉 API，包含翻译和自然语言处理 API 的云语言 API，以及包含 Dialogflow、语音转文本和文本转语音的云对话 API。这些谷歌预训练的 API 服务为机器学习应用开发提供了最佳的功能和接口，我们还展示了利用谷歌机器学习 API 的一些示例业务用例。

要掌握谷歌机器学习 API 服务，实验室是学习过程中的重要部分，我们在*附录 5*、“使用谷歌云机器学习 API 实践”中提供了一些机器学习 API 动手演示。请审查并理解所有实践步骤。

在下一章中，我们将讨论在谷歌云中实施机器学习的最佳实践。

# 进一步阅读

要深入了解本章的学习内容，您可以参考以下链接：

+   *视觉人工智能 | 通过机器学习提取图像洞察 | 云视觉 API*：

[`cloud.google.com/vision/`](https://cloud.google.com/vision/)

+   *视频人工智能 - 视频内容分析 | 云视频智能 API*：

[`cloud.google.com/video-intelligence/`](https://cloud.google.com/video-intelligence/)

+   *语音转文本：自动语音识别*:

[`cloud.google.com/speech-to-text`](https://cloud.google.com/speech-to-text)

+   *文本转语音：逼真的语音合成*:

[`cloud.google.com/text-to-speech`](https://cloud.google.com/text-to-speech)

+   *Dialogflow*:

[`cloud.google.com/dialogflow/`](https://cloud.google.com/dialogflow/)

+   *附录 5*, *使用 Google Cloud ML API 进行实践*
