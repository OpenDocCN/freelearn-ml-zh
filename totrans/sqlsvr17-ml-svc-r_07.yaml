- en: Operationalizing R Code
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施R代码
- en: As you learned the essentials of predictive modeling and explored advanced predictive
    algorithms available in `RevoScaleR` package in the previous chapter, now is a
    good time to learn how to operationalize it. This chapter discusses how you can
    operationalize R Prediction models in both SQL Server 2016 and SQL Server 2017.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在上一章中学习了预测建模的基础知识并探索了 `RevoScaleR` 包中可用的高级预测算法，现在是学习如何实施它的好时机。本章讨论了您如何在 SQL
    Server 2016 和 SQL Server 2017 中实施 R 预测模型。
- en: The idea of marrying SQL Server and machine learning is to keep analytics close
    to the data and eliminate costs, as well as security risks. In addition, using
    Microsoft R libraries helps to improve the scale and performance of your R solutions.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 将 SQL Server 和机器学习结合在一起的想法是将分析保持接近数据并消除成本以及安全风险。此外，使用 Microsoft R 库有助于提高您 R
    解决方案的可扩展性和性能。
- en: This chapter outlines the steps for operationalizing your R prediction models
    into a powerful workflow integrated in SQL Server. First, we'll discuss the concept
    of integrating an existing R model into SQL Server using the extensibility framework,
    native scoring (SQL Server 2017), and real-time scoring. Then, we'll talk about
    how to manage roles and permissions to run an R model in SQL Server. You will
    also learn how to use the right tools to operationalize the R model in SQL Server,
    and how to execute R model as part of workflows, PowerShell, SQL Server Agent
    jobs, and SSIS.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章概述了将您的 R 预测模型实施为一个强大工作流程的步骤，该工作流程集成在 SQL Server 中。首先，我们将讨论使用扩展性框架、本地评分（SQL
    Server 2017）和实时评分将现有 R 模型集成到 SQL Server 中的概念。然后，我们将讨论如何在 SQL Server 中运行 R 模型如何管理角色和权限。您还将学习如何使用正确的工具在
    SQL Server 中实施 R 模型，以及如何将 R 模型作为工作流程的一部分执行，包括 PowerShell、SQL Server Agent 作业和
    SSIS。
- en: Integrating an existing R model
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集成现有 R 模型
- en: 'This section takes an existing R code that generates the R model and runs against
    the SQL Server dataset into a workflow, where the model can be refreshed and evaluated
    on a regular basis, then used for predictive analysis. The following figure shows
    a typical predictive modeling workflow in an R script:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将现有的 R 代码（生成 R 模型并针对 SQL Server 数据集运行）纳入一个工作流程，其中模型可以定期刷新和评估，然后用于预测分析。以下图显示了
    R 脚本中的典型预测建模工作流程：
- en: '![](img/00108.jpeg)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00108.jpeg)'
- en: 'Figure 7.1: Typical predictive modeling workflow'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.1：典型的预测建模工作流程
- en: 'To integrate this script in SQL Server, you''ll need to organize the workflow
    into three steps:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 SQL Server 中集成此脚本，您需要将工作流程分为三个步骤：
- en: Prepare the data for training
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备训练数据
- en: Train and save the model using T-SQL
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 T-SQL 训练和保存模型
- en: Operationalize the model
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实施模型
- en: In this section, the last two steps will use `sp_execute_external_script`, which
    invokes an R process. These steps are using the SQL Server extensibility framework,
    described later on.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，最后两个步骤将使用 `sp_execute_external_script`，该命令调用一个 R 进程。这些步骤使用 SQL Server 扩展性框架，将在后面进行描述。
- en: Prerequisite – prepare the data
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前提条件 - 准备数据
- en: 'We will use the NYC Taxi sample data from the *R: In-Database Analytics for
    SQL Developers* tutorial, as referred to at [https://github.com/Microsoft/sql-server-samples/blob/master/samples/features/r-services/predictive-analytics/scripts/Lab.md](https://github.com/Microsoft/sql-server-samples/blob/master/samples/features/r-services/predictive-analytics/scripts/Lab.md).'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '我们将使用来自 *R: In-Database Analytics for SQL Developers* 教程的纽约出租车样本数据，如 [https://github.com/Microsoft/sql-server-samples/blob/master/samples/features/r-services/predictive-analytics/scripts/Lab.md](https://github.com/Microsoft/sql-server-samples/blob/master/samples/features/r-services/predictive-analytics/scripts/Lab.md)
    中所述。'
- en: 'You can also download the `nyctaxi_sample.csv` file from the Packt code file
    repository, and execute the following `bcp` command:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以从 Packt 代码文件存储库下载 `nyctaxi_sample.csv` 文件，并执行以下 `bcp` 命令：
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'where:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 其中：
- en: '`<database name>` is the name of the database'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<database name>` 是数据库名称'
- en: '`<file path>` is the location to the `nyctaxi_sample.csv` file'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<file path>` 是 `nyctaxi_sample.csv` 文件的位置'
- en: '`<server name>` is your server name.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<server name>` 是您的服务器名称。'
- en: 'As an example:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 例如：
- en: '[PRE1]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: In this scenario, the goal is to predict the likelihood of tipping. As part
    of the process, we will create a logistic regression model, along with the model's
    **Receiver Operating Characteristic** (**ROC**) curve and its **Area Under Curve**
    (**AUC**). An ROC is a plot of the true positive rate against the false positive
    rate for various threshold points of a diagnostic test. The closer the curve comes
    to the diagonal of the ROC space, the less accurate the test.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个场景中，目标是预测小费的可能性。作为这个过程的一部分，我们将创建一个逻辑回归模型，以及模型的**接收者操作特征**（ROC）曲线和其**曲线下面积**（AUC）。ROC是针对诊断测试的各种阈值点的真阳性率与假阳性率的图表。曲线越接近ROC空间的对角线，测试的准确性就越低。
- en: The closer the curve comes to the left and top borders, the more accurate it
    is. AUC provides the test of accuracy in numerical form. Luckily, both the ROC
    plot and AUC value can be easily calculated in R.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 曲线越接近左上角边界，就越准确。AUC以数值形式提供了准确性的测试。幸运的是，ROC图和AUC值都可以很容易地在R中计算。
- en: Once we are comfortable that the model is accurate enough, we can then share
    it and reuse it for predicting if a taxi driver will be tipped, based on the inputs
    provided.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们确信模型足够准确，我们就可以分享它，并基于提供的输入重新使用它来预测出租车司机是否会收到小费。
- en: 'Here''s the table definition of the NYC Taxi dataset that we will use for training:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是我们将用于训练的纽约出租车数据集的表定义：
- en: '[PRE2]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: There are a few variables that we can start using to analyze the likelihood
    of a taxi driver being tipped. As you learned in the previous chapter, you'll
    want to try out a few variables and algorithms to determine which one is more
    accurate. This can involve a few iterative processes, and that's the beauty of
    data science—you keep experimenting.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些变量我们可以开始使用来分析出租车司机收到小费的可能性。正如你在上一章中学到的，你可能需要尝试几个变量和算法来确定哪个更准确。这可能涉及几个迭代过程，这就是数据科学的魅力——你不断地进行实验。
- en: 'To start with, let''s use the following variables:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们使用以下变量：
- en: '| **Variable** | **Type** | **Column Name** |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| **变量** | **类型** | **列名** |'
- en: '| Taxi driver is tipped (yes/no) | Output | `tipped` |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 出租车司机是否收到小费（是/否） | 输出 | `tipped` |'
- en: '| Passenger count | Input | `passenger_count` |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| 乘客数量 | 输入 | `passenger_count` |'
- en: '| Trip time in seconds | Input | `trip_time_in_seconds` |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| 行程时间（秒） | 输入 | `trip_time_in_seconds` |'
- en: '| Trip distance as per the taxi meter | Input | `trip_distance` |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| 根据出租车计价器显示的行程距离 | 输入 | `trip_distance` |'
- en: '| The direct distance based on the longitudes and the latitudes between the
    two locations | Input | `pickup_longitude``pickup_latitude``dropoff_longitude``dropoff_latitude`
    |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 基于两个位置之间的经度和纬度的直接距离 | 输入 | `pickup_longitude` `pickup_latitude` `dropoff_longitude`
    `dropoff_latitude` |'
- en: 'In order to make it easier to calculate the direct distance, let''s define
    the following function:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易计算直接距离，让我们定义以下函数：
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Here's the table definition of the trained prediction model(s) that we want
    to store in the database. One of the advantages in storing the trained prediction
    model(s) in a table is that we can easily reuse it later and can version control
    our experiments.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是我们想要存储在数据库中的训练预测模型（的）的表定义。将训练好的预测模型（的）存储在表中的一个优点是，我们可以轻松地稍后重用它，并且可以版本控制我们的实验。
- en: 'Please note that there is a column called `IsRealTimeScoring`. SQL Server 2017
    adds a new capability for real-time scoring, which will be discussed in the *Integrating
    the R model for real-time scoring* section. If you are using SQL Server 2016,
    ignore this value:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，有一个名为`IsRealTimeScoring`的列。SQL Server 2017为实时评分添加了一个新功能，这将在*集成R模型进行实时评分*部分中讨论。如果你使用的是SQL
    Server 2016，请忽略此值：
- en: '[PRE4]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Step 1 – Train and save a model using T-SQL
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1步 - 使用T-SQL训练和保存模型
- en: 'In this step, you can create a predictive model (and optionally, the score),
    into a table via a stored procedure. The motive behind this is that instead of
    creating a new model every time an intelligent application needs to do prediction,
    we want to save the model for reuse:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，您可以通过存储过程将一个预测模型（以及可选的分数）创建到一个表中。这样做的原因是，我们不想每次智能应用需要做预测时都创建一个新的模型，而是希望保存模型以便重复使用：
- en: '![](img/00109.jpeg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00109.jpeg)'
- en: 'Figure 7.2: Create predictive model and store it in SQL Server'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.2：创建预测模型并将其存储在SQL Server中
- en: In *Figure 7.2* we assume that the data munging part is already done, and the
    input dataset is ready for the R computation to consume in order to train and
    score a model.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图7.2*中，我们假设数据清洗部分已经完成，输入数据集已经准备好供R计算使用，以便训练和评分模型。
- en: 'Here''s an example of a stored procedure that produces the predictive model
    based on the NYC Taxi sample dataset, and saves it in a table. The model predicts
    the likelihood of tipping. Both the model and the AUC of the model are saved in
    the `dbo.nyc_taxi_models_v2` table:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个示例存储过程，它基于纽约出租车样本数据集生成预测模型，并将其保存到表中。该模型预测小费的可能性。模型和模型的AUC都保存在`dbo.nyc_taxi_models_v2`表中：
- en: '[PRE5]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Once you have this stored procedure defined, you can then execute it to generate
    the model and the AUC. For example:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦定义了这个存储过程，你就可以执行它来生成模型和AUC。例如：
- en: '[PRE6]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Then, view the content of the `NYCTaxiModel` table by executing the following
    statement:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，通过执行以下语句查看`NYCTaxiModel`表的内容：
- en: '[PRE7]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If the stored procedure executed properly, you should see a record similar
    to the following:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如果存储过程执行正确，你应该会看到以下类似的记录：
- en: '![](img/00110.jpeg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00110.jpeg)'
- en: Step 2 – Operationalize the model
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2步 - 操作化模型
- en: 'Once the model is created and stored in a table as part of the previous step,
    we are now ready to create a stored procedure where an intelligent application
    can call it to predict tipping:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦模型创建并作为前一步骤的一部分存储在表中，我们现在就可以创建一个存储过程，智能应用程序可以调用它来进行小费预测：
- en: '![](img/00111.jpeg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00111.jpeg)'
- en: 'Figure 7.3: Get predictions in the SQL Server'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.3：在SQL Server中获取预测
- en: '*Figure 7.3* illustrates what the workflow of a stored procedure that operationalizes
    a predictive model looks like.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.3* 展示了将预测模型操作化的存储过程的流程。'
- en: 'Here''s an example of a stored procedure where we use one of the saved models,
    and the dataset that we want to predict against. We are using the latest model
    that has been created:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个示例，展示了我们如何使用一个已保存的模型以及我们想要预测的数据集。我们使用的是最新创建的模型：
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Once `[dbo].[uspPredictTipSingleMode]` is created, your application can now
    use this stored procedure to get the score (probability of tipping); for example:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦创建了`[dbo].[uspPredictTipSingleMode]`，你的应用程序现在就可以使用这个存储过程来获取评分（小费概率）；例如：
- en: '[PRE10]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The output should be similar to the following. In this case, the value 0.64
    shows the probability of getting tipped—that is, 64%:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 输出应该类似于以下内容。在这种情况下，值0.64表示得到小费的概率——即64%：
- en: '[PRE11]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Fast batch prediction
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快速批量预测
- en: As seen in the previous section, both the model training step and the prediction
    step call `sp_execute_external_script`, which invokes the R process. Real-time
    scoring and native scoring allow you to do predictions without invoking an R process.
    Therefore, these scoring methods improve the performance of prediction operations.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，模型训练步骤和预测步骤都调用`sp_execute_external_script`，该脚本调用R进程。实时评分和本地评分允许你进行预测而不调用R进程。因此，这些评分方法提高了预测操作的性能。
- en: In addition, real-time scoring and native scoring let you use a machine learning
    model without having to install R. As long as you obtain a pretrained model in
    a compatible format and save it in an SQL Server database, you can call prediction
    operations easily.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，实时评分和本地评分允许你使用机器学习模型而无需安装R。只要获得一个兼容格式的预训练模型并将其保存到SQL Server数据库中，就可以轻松调用预测操作。
- en: Prerequisites
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 先决条件
- en: There is no prerequisite when using the `PREDICT` function in SQL Server 2017\.
    More information about `PREDICT` is covered in the *Native scoring* section later.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在SQL Server 2017中使用`PREDICT`函数时没有先决条件。有关`PREDICT`的更多信息，请参阅后面的*本地评分*部分。
- en: '`sp_rxPredict` requires some additional steps, as outlined in *Enable real-time
    scoring model *at [https://docs.microsoft.com/en-us/sql/advanced-analytics/r/how-to-do-realtime-scoring#bkmk_enableRtScoring](https://docs.microsoft.com/en-us/sql/advanced-analytics/r/how-to-do-realtime-scoring#bkmk_enableRtScoring).'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sp_rxPredict`需要一些额外的步骤，具体请参阅[https://docs.microsoft.com/en-us/sql/advanced-analytics/r/how-to-do-realtime-scoring#bkmk_enableRtScoring](https://docs.microsoft.com/en-us/sql/advanced-analytics/r/how-to-do-realtime-scoring#bkmk_enableRtScoring)中的*启用实时评分模型*。'
- en: Currently, both real-time scoring and native scoring in SQL Server 2016 and
    SQL Server 2017 only support RevoScaleR and MicrosoftML compatible models. For
    the most up-to-date list of supported algorithms, see *Real-time scoring* at [https://docs.microsoft.com/en-us/sql/advanced-analytics/real-time-scoring](https://docs.microsoft.com/en-us/sql/advanced-analytics/real-time-scoring).
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目前，SQL Server 2016和SQL Server 2017中的实时评分和本地评分仅支持RevoScaleR和MicrosoftML兼容的模型。有关支持算法的最新列表，请参阅[https://docs.microsoft.com/en-us/sql/advanced-analytics/real-time-scoring](https://docs.microsoft.com/en-us/sql/advanced-analytics/real-time-scoring)中的*实时评分*。
- en: Real-time scoring
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实时评分
- en: Both SQL Server 2016 and SQL Server 2017 support real-time scoring using `sp_rxPredict`.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Server 2016和SQL Server 2017都支持使用`sp_rxPredict`进行实时评分。
- en: This stored procedure is a CLR stored procedure using an `UNSAFE` assembly,
    and requires you to set the database to `TRUSTWORTHY`.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 此存储过程是一个使用`UNSAFE`集合的CLR存储过程，需要您将数据库设置为`TRUSTWORTHY`。
- en: 'Here''s an example of calling the `PREDICT` function as part of the `SELECT`
    statement:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个将`PREDICT`函数作为`SELECT`语句一部分调用的示例：
- en: '[PRE12]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'In this case:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下：
- en: '`@model`: Consists of the real-time scoring model that was previously prepared'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@model`: 包含之前准备好的实时评分模型'
- en: '`@query`: The query definition of the data to be scored'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@query`: 要评分的数据的查询定义'
- en: Native scoring
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 原生评分
- en: SQL Server 2017 introduces a new function, `PREDICT`, allowing you to get a
    predicted value using native scoring. Instead of using `sp_execute_external_script`
    with R script to do prediction, you can call it as part of the `FROM` clause of
    a `SELECT` statement, making operationalization of prediction analytics much easier.
    In addition, using `PREDICT` means that you no longer have to invoke an additional
    R process every time you want to do prediction.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Server 2017引入了一个新函数，`PREDICT`，允许您使用原生评分获取预测值。您不再需要使用带有R脚本的`sp_execute_external_script`进行预测，而是可以在`SELECT`语句的`FROM`子句中调用它，这使得预测分析的实用化变得更加容易。此外，使用`PREDICT`意味着您不再需要在每次进行预测时调用额外的R进程。
- en: This `PREDICT` function is new to T-SQL and is not to be confused with the existing
    DMX's `PREDICT` function.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这个`PREDICT`函数是T-SQL的新功能，不要与现有的DMX的`PREDICT`函数混淆。
- en: 'Here''s an example of calling the `PREDICT` function as part of the `SELECT`
    statement:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个将`PREDICT`函数作为`SELECT`语句一部分调用的示例：
- en: '[PRE13]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'In this case:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下：
- en: '`d`: Data source, such as a table, a view, or a Common Table Expression.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`d`: 数据源，例如表、视图或公共表表达式。'
- en: '`Input1, Input2`: Columns from the data source.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Input1, Input2`: 数据源中的列。'
- en: '`@model`: Consists of the real-time scoring model that has been previously
    prepared.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@model`: 包含已之前准备好的实时评分模型。'
- en: '`Output_Pred`: The output value that is being predicted. Usually, the column
    name is constructed from the column name of the predicted value followed by a
    `_Pred` suffix; for example, `Tipped_Pred`, where `Tipped` is the name of the
    column being predicted.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Output_Pred`: 正在预测的输出值。通常，列名由预测值的列名加上一个`_Pred`后缀组成；例如，`Tipped_Pred`，其中`Tipped`是正在预测的列的名称。'
- en: Integrating the R model for fast batch prediction
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集成R模型以实现快速批量预测
- en: Before continuing to the next steps, please follow the *Prerequisite - Prepare
    the data* section.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续下一步之前，请遵循*先决条件 - 准备数据*部分。
- en: Step 1 – Train and save a real-time scoring model using T-SQL
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1步 – 使用T-SQL训练和保存实时评分模型
- en: In this step, you can create a predictive model for real-time scoring and native
    scoring, and optionally for the AUC, into a table via a stored procedure. The
    goal is to build a model that is reusable. You can skip this step if there is
    an existing compatible model that was created and stored in a table in SQL Server
    already.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，您可以通过存储过程将实时评分和原生评分的预测模型，以及可选的AUC，创建到一个表中。目标是构建一个可重用的模型。如果您已经在SQL Server表中创建并存储了一个兼容的模型，则可以跳过此步骤。
- en: 'The following stored procedure uses `rxSerializeModel`, which lets you serialize
    an R model in raw format. This then allows you to save the model in the `VARBINARY`
    format, which can be loaded into SQL Server for real-time scoring. To reverse
    the serialization for use in R, you could use `rxUnserializeModel`:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 以下存储过程使用`rxSerializeModel`，它允许您以原始格式序列化R模型。这然后允许您以`VARBINARY`格式保存模型，该格式可以加载到SQL
    Server中进行实时评分。要为在R中使用而反转序列化，您可以使用`rxUnserializeModel`：
- en: '[PRE14]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: To store a model created in R in an SQL Server table, you must serialize it
    first. In R, a serialized model must be unserialized before we can use it for
    prediction.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 要将R中创建的模型存储在SQL Server表中，您必须首先对其进行序列化。在R中，序列化的模型在使用它进行预测之前必须先反序列化。
- en: Step 2a – Operationalize the model using real-time scoring
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2步a – 使用实时评分操作化模型
- en: 'The following is a sample script where we use `sp_rxPredict` with a real-time
    scoring model to predict the likelihood of tipping:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例脚本，其中我们使用实时评分模型通过`sp_rxPredict`预测翻盘的可能性：
- en: '[PRE15]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The output should only give you the prediction value for the rows that are
    pushed through:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果应仅为您提供通过以下行推送的预测值：
- en: '[PRE16]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Step 2b – Operationalize the model using native scoring
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2步b – 使用原生评分操作化模型
- en: 'The following is a sample script where we use the `PREDICT` function with an
    R real-time scoring model to predict the likelihood of tipping. The `PREDICT`
    function in SQL Server 2017 can read the stored serialized model for predictive
    analysis from the previous step:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例脚本，其中我们使用 `PREDICT` 函数和一个 R 实时评分模型来预测小费的可能性。SQL Server 2017 中的 `PREDICT`
    函数可以从上一步读取存储的序列化模型以进行预测分析：
- en: '[PRE17]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The output should include any columns that you specify in the `SELECT` statement,
    and should look like this:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 输出应包括您在 `SELECT` 语句中指定的任何列，并且应如下所示：
- en: '[PRE18]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Managing roles and permissions for workloads
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理工作负载的角色和权限
- en: Operationalizing an R script as part of the extensibility framework workloads,
    as well as prediction operations using real-time scoring and native scoring, require
    that a few roles and permissions be set up first.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 将 R 脚本作为扩展性框架工作负载的一部分运行，以及使用实时评分和本地评分进行预测操作，需要首先设置一些角色和权限。
- en: Extensibility framework workloads
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展性框架工作负载
- en: 'This section outlines the typical security requirements for operationalizing
    R from SQL Server using `sp_execute_external_script`. An SQL Server login or Windows
    user account can be used to run R scripts directly from SQL Server using stored
    procedures. The following are the steps to set up this account, such that it has
    sufficient privileges:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 本节概述了使用 `sp_execute_external_script` 从 SQL Server 运行 R 的典型安全要求。可以使用 SQL Server
    登录或 Windows 用户账户直接从 SQL Server 使用存储过程运行 R 脚本。以下是为该账户设置足够权限的步骤：
- en: Allow permission to access the database where the R scripts will be run from.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 允许访问 R 脚本将运行的数据库的权限。
- en: Allow permission to read data from secured objects, such as tables. This includes
    (but is not limited to) the table where the model might have been stored from
    and the table/view to be used to train the model or input to the prediction.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 允许读取受保护对象（如表）的数据的权限。这包括（但不限于）可能存储模型的表以及用于训练模型或作为预测输入的表/视图。
- en: If the R script needs to write new data to a table, such as a model or a scoring
    result, allow permission to write the new data.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 R 脚本需要将新数据写入表，例如模型或评分结果，允许写入新数据的权限。
- en: If the R script needs to install R packages during runtime, allow permission
    to install new packages.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 R 脚本需要在运行时安装 R 包，允许安装新包的权限。
- en: In general, it is easier to create roles to manage sets of permissions, and
    then assign users to those roles, instead of individually setting user permissions.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，创建角色来管理权限集更容易，然后将用户分配到这些角色，而不是单独设置用户权限。
- en: 'The following is an example of how to create a role and assign it to a login
    called `JulieGuest2`, as per steps 1, 2, and 3:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例，说明如何创建一个角色并将其分配给名为 `JulieGuest2` 的登录，按照步骤 1、2 和 3 进行：
- en: '[PRE19]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Fast batch prediction workloads
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快速批量预测工作负载
- en: 'Follow the following steps only if you are using real-time scoring or native
    scoring:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在使用实时评分或本地评分时，才遵循以下步骤：
- en: For real-time scoring using `sp_rxPredict`, you will need to add the user who
    will execute this stored procedure to `rxpredict_users`
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于使用 `sp_rxPredict` 进行实时评分，您需要将执行此存储过程的用户添加到 `rxpredict_users` 中
- en: For native scoring using the new `PREDICT` syntax available in SQL Server 2017,
    you will need to grant `EXECUTE` permission on the database
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于使用 SQL Server 2017 中新提供的 `PREDICT` 语法进行本地评分，您需要在数据库上授予 `EXECUTE` 权限
- en: The preceding steps assume that the users have read access to the real-time
    scoring model and the input data set for the prediction operation.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的步骤假设用户有权读取预测操作的真实时评分模型和输入数据集。
- en: External packages
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 外部包
- en: 'From SQL Server 2017, you can also add an external library through `CREATE
    EXTERNAL LIBRARY`, as long as you have the `ALTER ANY EXTERNAL LIBRARY` permission:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 从 SQL Server 2017 开始，您也可以通过 `CREATE EXTERNAL LIBRARY` 添加外部库，只要您有 `ALTER ANY
    EXTERNAL LIBRARY` 权限：
- en: '[PRE20]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'You''ll have to download the package from the source first; for example, `ggplot2`
    from CRAN ([https://cran.r-project.org/web/packages/ggplot2/index.html](https://cran.r-project.org/web/packages/ggplot2/index.html))
    to a path SQL Server has access to:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 您必须首先从源下载包；例如，从 CRAN (`ggplot2` [https://cran.r-project.org/web/packages/ggplot2/index.html](https://cran.r-project.org/web/packages/ggplot2/index.html))
    下载到 SQL Server 可以访问的路径：
- en: '[PRE21]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: If you are using SQL Server 2016, to install a new R package, you'll need to
    have administrative access on the machine. The installation steps are outside
    of SQL Server and directly on the R that is associated to the SQL Server R Services.
    The detailed steps are outlined in [Chapter 3](part0039.html#1565U0-e3f81285367248f4bbc6431bcd4f926d),
    *Managing Machine Learning Services for SQL Server 2017 and R*.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在使用SQL Server 2016，要安装新的R包，您需要在机器上具有管理员访问权限。安装步骤在SQL Server之外，直接在关联到SQL
    Server R服务的R上执行。详细步骤在[第3章](part0039.html#1565U0-e3f81285367248f4bbc6431bcd4f926d)中概述，*管理SQL
    Server 2017和R的机器学习服务*。
- en: Tools
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工具
- en: 'There are three main options for operationalizing R code embedded in T-SQL.
    All of these tools are free:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在T-SQL中嵌入的R代码的操作化有三个主要选项。所有这些工具都是免费的：
- en: '**SQL Server Management Studio** (**SSMS**)'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SQL Server 管理工作室** (**SSMS**)'
- en: '**R Tools for Visual Studio** (**RTVS**)'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Visual Studio的R工具** (**RTVS**)'
- en: '**SQL Server Data Tools** (**SSDT**)'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SQL Server 数据工具** (**SSDT**)'
- en: This section provides an overview of how the tools can help you operationalize
    R code in SQL Server as part of workflows.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 本节概述了工具如何帮助您将R代码在SQL Server中作为工作流程的一部分进行操作化。
- en: Using SSMS as part of operationalizing R script
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将SSMS作为操作化R脚本的一部分使用
- en: 'SSMS is a powerful tool that allows you to operationalize your prediction analytics
    from the previous section. SSMS also provides the ability for you to manage various
    administrative tasks related to operationalizing R code in SQL Server and maintaining
    it, such as:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: SSMS是一个强大的工具，它允许您将上一节中的预测分析操作化。SSMS还提供了管理与在SQL Server中操作化R代码和维护相关的各种管理任务的能力，例如：
- en: Managing permissions, as described earlier in this chapter.
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理权限，如本章前面所述。
- en: Managing R packages (in SQL Server 2017), as described earlier in this chapter.
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理R包（在SQL Server 2017中），如本章前面所述。
- en: Managing stored procedures that integrate R code, as described in an earlier
    section.
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理集成R代码的存储过程，如前文所述。
- en: Managing resources for SQL Server R Services, as described in [Chapter 3](part0039.html#1565U0-e3f81285367248f4bbc6431bcd4f926d),
    *Managing Machine Learning Services for SQL Server 2017 and R.*
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理SQL Server R服务的资源，如第3章中所述，*管理SQL Server 2017和R的机器学习服务*。
- en: Monitoring SQL Server R services using built-in custom reports and via DMVs,
    as described in *Using custom reports for SQL Server R Services.*
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用内置自定义报告和DMVs监控SQL Server R服务，如*使用SQL Server R服务的自定义报告*中所述。
- en: Creating and managing jobs that execute R Scripts. See *Scheduling training
    and prediction operations* later in this chapter.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和管理执行R脚本的工作。请参阅本章后面的*安排训练和预测操作*。
- en: To get the latest version of SSMS to help you develop and manage workflows with
    SQL Server R services, go to [https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms](https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms).
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取最新版本的SSMS以帮助您使用SQL Server R服务开发和管理工作流程，请访问[https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms](https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms)。
- en: Using custom reports for SQL Server R Services
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SQL Server R服务的自定义报告
- en: 'There are custom reports for SQL Server R Services available on GitHub: [https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/r-services/ssms-custom-reports](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/r-services/ssms-custom-reports)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在GitHub上提供了针对SQL Server R服务的自定义报告：[https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/r-services/ssms-custom-reports](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/r-services/ssms-custom-reports)
- en: 'The following is a list of the custom reports and what they can help you achieve:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个自定义报告列表以及它们可以帮助您实现的内容：
- en: '| **Reports** | **Purpose** |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| **报告** | **用途** |'
- en: '| `R Services - Configuration.rdl` | View installation settings of R Services
    and properties of the R runtime.Configure R Services after installation. |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| `R 服务 - Configuration.rdl` | 查看R服务的安装设置和R运行时的属性。安装后配置R服务。|'
- en: '| `R Services - Packages.rdl` | View R packages installed on the SQL Server
    instance, as well as their properties, such as name and version. |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| `R 服务 - Packages.rdl` | 查看SQL Server实例上安装的R包及其属性，例如名称和版本。|'
- en: '| `R Services - Resource Usage.rdl` | View resource consumption of SQL Server
    and R scripts execution.View memory setting of external resource pools. |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| `R 服务 - Resource Usage.rdl` | 查看SQL Server和R脚本执行的资源消耗。查看外部资源池的内存设置。|'
- en: '| `R Services - Extended Events.rdl` | View the extended events to understand
    more about R script execution. |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| `R Services - Extended Events.rdl` | 查看扩展事件以了解R脚本执行情况。|'
- en: '| `R Services - Execution Statistics.rdl` | View the execution statistics of
    R Services, including but not limited to the number of R script executions, the
    number of parallel executions, and `RevoScaleR` functions. |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| `R Services - Execution Statistics.rdl` | 查看R服务的执行统计信息，包括但不限于R脚本执行次数、并行执行次数以及`RevoScaleR`函数。|'
- en: Adding the custom reports for the first time
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 首次添加自定义报告
- en: 'Once you have downloaded the custom reports from the preceding GitHub location,
    follow the following steps to add custom reports for the first time:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的GitHub位置下载自定义报告后，请按照以下步骤添加自定义报告：
- en: Go to SSMS | Object Explorer.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往SSMS | 对象资源管理器。
- en: Right-click on the SQL Server instance's name in Object Explorer, and choose
    Reports | Custom Reports...
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对象资源管理器中右键单击SQL Server实例的名称，然后选择报告 | 自定义报告...
- en: Add the RDL files from the download location.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下载位置添加RDL文件。
- en: 'After adding, you might be presented with the following warning dialog box:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 添加后，您可能会看到一个如下警告对话框：
- en: '![](img/00112.jpeg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00112.jpeg)'
- en: 'Figure 7.4: Run Custom Report warning from SSMS'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.4：SSMS中的自定义报告运行警告
- en: Clicking Run means that you acknowledge that you wish to run these reports.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 点击运行表示您确认希望运行这些报告。
- en: '*Figure 7.5* illustrates a successfully imported R Services - Execution Statistics
    report. It says that there are 24 R script execution errors from 38 executions,
    and the most popular `RevoScaleR` function is `rxPredict_rxLogit`:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.5*展示了成功导入的R服务 - 执行统计报告。它表示有38次执行中的24次R脚本执行错误，最受欢迎的`RevoScaleR`函数是`rxPredict_rxLogit`：'
- en: '![](img/00113.jpeg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00113.jpeg)'
- en: 'Figure 7.5: SQL Server R Services - Execution Statistics report in SSMS'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.5：SSMS中的SQL Server R服务 - 执行统计报告
- en: Viewing an R Services custom report
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 查看R服务自定义报告
- en: 'Once you''ve added an R Services custom report for the first time, you can
    revisit it again. Here are the steps:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次添加R服务自定义报告后，您可以再次访问它。以下是步骤：
- en: Go to SSMS | Object Explorer.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往SSMS | 对象资源管理器。
- en: Right-click on the SQL Server instance's name.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击SQL Server实例的名称。
- en: 'Choose Reports | Custom Reports. If you have added all the custom reports,
    you should see something like this:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择报告 | 自定义报告。如果您已添加所有自定义报告，您应该看到类似以下内容：
- en: '![](img/00114.jpeg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00114.jpeg)'
- en: 'Figure 7.6: Viewing Custom Reports in SSMS'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.6：在SSMS中查看自定义报告
- en: Managing SQL Server Machine Learning Services with DMVs
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用DMVs管理SQL Server机器学习服务
- en: There are various DMVs that are available to help you monitor the R script that
    you have operationalized. This section splits the DMVs for SQL Server Machine
    Learning Services into the following two categories, as specified.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 有各种DMVs可供帮助您监控您已部署的R脚本。本节将SQL Server机器学习服务的DMVs分为以下两个类别，具体如下。
- en: System configuration and system resources
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 系统配置和系统资源
- en: 'You may be familiar with `sys.dm_exec_sessions` and `sys.dm_os_performance_counter`
    for understanding active sessions and system performance counters, respectively.
    The following is a list of DMVs that you should get to know more to track and
    monitor performance and usage of R script executions in SQL Server:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能熟悉`sys.dm_exec_sessions`和`sys.dm_os_performance_counter`，分别用于了解活动会话和系统性能计数器。以下是一个您应该了解更多以跟踪和监控SQL
    Server中R脚本执行性能和使用的DMVs列表：
- en: '`sys.dm_exec_sessions`: View details on user sessions and system sessions,
    identified as `with session_id >= 51` and `< 51`, respectively.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.dm_exec_sessions`: 查看用户会话和系统会话的详细信息，分别标识为`with session_id >= 51`和`< 51`。'
- en: '`sys.dm_os_performance_counters`: View details on each system performance counter,
    including those that are related to R script. Here''s an example of the script
    specifically related to SQL Server R Services:'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.dm_os_performance_counters`: 查看每个系统性能计数器的详细信息，包括与R脚本相关的计数器。以下是一个与SQL Server
    R服务相关的特定脚本的示例：'
- en: '[PRE22]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '`sys.dm_external_script_requests`: View active external scripts on the current
    instance:'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.dm_external_script_requests`: 查看当前实例上的活动外部脚本：'
- en: '[PRE23]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '`sys.dm_external_script_execution_stats`: View the overall usage of the new
    external script through counters.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.dm_external_script_execution_stats`: 通过计数器查看新外部脚本的整体使用情况。'
- en: Resource governor
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 资源管理器
- en: 'In SQL Server 2016, two new DMVs have been added to help monitor external resource
    pools: `sys.resource_governor_external_resource_pools` and `sys.dm_resource_governor_external_resource_pool_affinity`.
    If you are familiar with tracking and managing resource governors in general,
    you are likely to know the other two DMVs that are listed as follows:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在SQL Server 2016中，新增了两个DMV来帮助监控外部资源池：`sys.resource_governor_external_resource_pools`
    和 `sys.dm_resource_governor_external_resource_pool_affinity`。如果你熟悉一般性的资源管理器的跟踪和管理，你可能会知道以下列出的另外两个DMV：
- en: '`sys.resource_governor_resource_pools`: View the current resource pool state,
    the current configuration of resource pools, and their statistics.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.resource_governor_resource_pools`：查看当前资源池状态、资源池的当前配置及其统计信息。'
- en: '`sys.resource_governor_workload_groups`: View the workload group statistics
    and the current configuration of the workload group. This DMV has been enhanced
    with a new column to show the ID of the external pool associated with the workload
    group.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.resource_governor_workload_groups`：查看工作负载组的统计信息和当前配置。此DMV新增了一个列来显示与工作负载组关联的外部池的ID。'
- en: '`sys.resource_governor_external_resource_pools`: View the current configuration
    values for external resource pools. At the time of writing, SQL Server 2016/2017
    Enterprise Edition allows you to configure additional resource pools, such that
    resources for R jobs running in SQL Server will be isolated from those that originate
    from a remote client.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.resource_governor_external_resource_pools`：查看外部资源池的当前配置值。在撰写本文时，SQL Server
    2016/2017企业版允许你配置额外的资源池，使得在SQL Server中运行的R作业的资源将隔离于来自远程客户端的资源。'
- en: '`sys.dm_resource_governor_external_resource_pool_affinity`: This DMV allows
    you to see the processors and resources that are affinitized to a particular resource
    pool.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys.dm_resource_governor_external_resource_pool_affinity`：此DMV允许你查看与特定资源池亲和的处理器和资源。'
- en: Operationalizing R code with Visual Studio
  id: totrans-189
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Visual Studio实现R代码的运营化
- en: Developing R script, or T-SQL that uses R script, is now made easy with **R
    Tools for Visual Studio** (**RTVS**). If you are already using SQL Server Data
    Tools as your IDE for your SQL Server database projects, you can simply add a
    new R project in the solution. This integration has improved in Visual Studio
    2017.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**R Tools for Visual Studio**（**RTVS**）开发R脚本或使用R脚本的T-SQL现在变得简单。如果你已经使用SQL
    Server Data Tools作为你的SQL Server数据库项目的IDE，你可以在解决方案中简单地添加一个新的R项目。这种集成在Visual Studio
    2017中得到了改进。
- en: If you don't have Visual Studio installed, go to [https://www.visualstudio.com/downloads/](https://www.visualstudio.com/downloads/).
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有安装Visual Studio，请访问[https://www.visualstudio.com/downloads/](https://www.visualstudio.com/downloads/)。
- en: RTVS is installed as part of the Data science and analytical applications workload.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: RTVS作为数据科学和分析应用程序工作负载的一部分进行安装。
- en: 'From the Visual Studio installer, you can add the Data science and analytics
    applications workload to your Visual Studio 2017 installation, as shown in *Figure
    7.7*:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 从Visual Studio安装程序中，你可以将数据科学和分析应用程序工作负载添加到你的Visual Studio 2017安装中，如图*图7.7*所示：
- en: '![](img/00115.jpeg)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00115.jpeg)'
- en: 'Figure 7.7: Selecting the Data science and analytical applications option in
    the Visual Studio installer for Visual Studio 2017'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.7：在Visual Studio 2017安装程序中选择数据科学和分析应用程序选项
- en: 'The following are additional tips to get started using RTVS:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些使用RTVS开始使用的额外提示：
- en: 'Create a new R project in RTVS by selecting File | New | Project. The provided
    name of the project and file path are similar to the following:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在RTVS中通过选择文件 | 新建 | 项目来创建一个新的R项目。项目名称和文件路径与以下类似：
- en: '![](img/00116.jpeg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00116.jpeg)'
- en: 'Figure 7.8: Creating a new R project'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.8：创建一个新的R项目
- en: 'In RTVS, you can choose workspaces that you can run the R script against. If
    you have already installed SQL Server with R Services as mentioned in [Chapter
    4](part0057.html#1MBG20-e3f81285367248f4bbc6431bcd4f926d), *Data Exploration and
    Data Visualization*, you''ll see something like this:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在RTVS中，你可以选择运行R脚本的工空间。如果你已经按照[第4章](part0057.html#1MBG20-e3f81285367248f4bbc6431bcd4f926d)中提到的安装了R服务的SQL
    Server，即*数据探索和数据可视化*，你会看到类似以下的内容：
- en: '![](img/00117.jpeg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00117.jpeg)'
- en: 'Figure 7.9: Displaying all workspaces available for RTVS to connect to'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.9：显示RTVS可连接的所有工空间
- en: Go to R Tools | Windows | Workspaces or press *Ctrl* + *9* to display the Workspaces
    window.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 前往R Tools | Windows | Workspaces或按*Ctrl* + *9*显示工作空间窗口。
- en: You can run R code from the R Interactive window or save R files within the
    R project. You can refer to [https://docs.microsoft.com/en-us/visualstudio/rtvs/](https://docs.microsoft.com/en-us/visualstudio/rtvs/)
    to learn more about RTVS features.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以从R交互式窗口运行R代码或在R项目中保存R文件。您可以参考[https://docs.microsoft.com/en-us/visualstudio/rtvs/](https://docs.microsoft.com/en-us/visualstudio/rtvs/)了解RTVS功能的更多信息。
- en: 'You can also use add an SQL Query file within the project by right-clicking
    on the project and choosing Add New Item, then selecting SQL Query, shown as follows:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您也可以通过在项目上右键单击并选择“添加新项”，然后选择SQL查询来在项目中添加一个SQL查询文件，如下所示：
- en: '![](img/00118.jpeg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00118.jpeg)'
- en: 'Figure 7.10: Selecting a new item/file to add to the R project'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.10：选择要添加到R项目中的新项/文件
- en: RTVS also allows you to develop the R code integration to SQL Server stored
    procedure via a template. To access this, simply click Add New Item, similar to
    the previous step, and then select SQL Stored Procedure. For more information
    about this, go to [https://docs.microsoft.com/en-us/visualstudio/rtvs/sql-server](https://docs.microsoft.com/en-us/visualstudio/rtvs/sql-server).
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: RTVS还允许您通过模板将R代码集成到SQL Server存储过程中。要访问此功能，只需像上一步一样点击“添加新项”，然后选择SQL存储过程。有关更多信息，请参阅[https://docs.microsoft.com/en-us/visualstudio/rtvs/sql-server](https://docs.microsoft.com/en-us/visualstudio/rtvs/sql-server)。
- en: Integrating R workloads and prediction operations beyond SQL Server
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在SQL Server之外集成R工作负载和预测操作
- en: In this section, you will learn how to include R workloads and prediction operations
    that you have created in the previous sections beyond SQL Server. We will discuss
    how to run the workloads and operations in PowerShell, SQL Agent Job, and **SQL
    Server Integration Services** (**SSIS**).
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将学习如何将您在上一节中创建的R工作负载和预测操作包含在SQL Server之外。我们将讨论如何在PowerShell、SQL Agent作业和**SQL
    Server Integration Services** (**SSIS**)中运行工作负载和操作。
- en: Please note that you can also execute these workloads/prediction operations
    using SQLCMD, C# within SSIS, Azure, and also Bash on Linux. This discussion is
    beyond the scope of this chapter.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，您也可以使用SQLCMD、C#在SSIS、Azure以及Linux上的Bash来执行这些工作负载/预测操作。这次讨论超出了本章的范围。
- en: Executing SQL Server prediction operations via PowerShell
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过PowerShell执行SQL Server预测操作
- en: Assuming that you have already created the stored procedure that executes R
    script from SQL Server, such as `[dbo].[uspTrainTipPredictionModel]` from the
    earlier example, you can execute this command easily as part of your PowerShell
    workflows.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已经创建了从SQL Server执行R脚本的存储过程，例如前面示例中的`[dbo].[uspTrainTipPredictionModel]`，您可以轻松地将此命令作为PowerShell工作流的一部分执行。
- en: 'Here''s a simple example of calling the stored procedure from PowerShell:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个从PowerShell调用存储过程的简单示例：
- en: '[PRE24]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Scheduling training and prediction operations
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安排训练和预测操作
- en: In SSMS, you can create a new SQL Server job that allows you to run R code as
    a one-off or with a specific schedule.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在SSMS中，您可以创建一个新的SQL Server作业，允许您一次性或按特定计划运行R代码。
- en: 'As an example, you can do a scheduled offline predictive analytics workload.
    To do this, simply create a job through SSMS:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以执行一个计划离线预测分析工作负载。为此，只需通过SSMS创建一个作业：
- en: To create a job, you'll need to be a member of one of the SQL Server Agent fixed
    database roles or the sysadmin fixed server role. Only the job owner or a member
    of the sysadmin role can update the definition of the job.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建作业，您需要是SQL Server Agent固定数据库角色或sysadmin固定服务器角色的成员。只有作业所有者或sysadmin角色的成员才能更新作业的定义。
- en: In Object Explorer of SSMS, expand the SQL Server instance where you want to
    create an SQL Server Agent job.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在SSMS的对象资源管理器中，展开您想要在其中创建SQL Server Agent作业的SQL Server实例。
- en: 'Expand SQL Server Agent and right-click on the `Jobs` folder, then select New
    Job...:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开SQL Server Agent，然后在“作业”文件夹上右键单击，然后选择“新建作业...”：
- en: '![](img/00119.jpeg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00119.jpeg)'
- en: 'Figure 7.11: Creating a new SQL Server Agent job using SSMS'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.11：使用SSMS创建新的SQL Server Agent作业
- en: 'Provide details on the General page:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“常规”页面上提供详细信息：
- en: '![](img/00120.jpeg)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00120.jpeg)'
- en: 'Figure 7.12: Adding more details in the New Job window'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.12：在新建作业窗口中添加更多详细信息
- en: Click on Steps from the left-hand menu of the New Job window, then click on
    New... on the bottom of the New Job window.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新建作业窗口的左侧菜单中点击“步骤”，然后在新建作业窗口的底部点击“新建...”。
- en: 'Provide the details in the New Job Step to execute. In this example, we want
    to update the NYC Taxi Training Model. Then click OK:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新建作业步骤中提供要执行的详细信息。在这个例子中，我们想要更新纽约出租车训练模型。然后点击“确定”：
- en: '![](img/00121.jpeg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00121.jpeg)'
- en: 'Figure 7.13: Calling an R-integrated stored procedure as a step in an SQL Server
    Agent job'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.13：在 SQL Server 代理作业中调用 R 集成存储过程作为步骤
- en: In the New Job window, select Schedules from the left-hand menu.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新建作业窗口中，从左侧菜单选择“计划”。
- en: Click on New... from the bottom of the New Job window.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从新建作业窗口的底部点击“新建...”。
- en: Provide the details of the schedule that you'd like this job to be subject to.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供你希望此作业受其约束的计划详情。
- en: Click on OK in the New Schedule window, then click on the New Job window to
    save the changes.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新建计划窗口中点击“确定”，然后点击新建作业窗口以保存更改。
- en: Operationalizing R script as part of SSIS
  id: totrans-235
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将 R 脚本作为 SSIS 的一部分进行操作
- en: 'R Script can easily be integrated as part of SSIS workflows. The two main ways
    are by running as part of Execute Process Task and running as part of Execute
    SQL Task:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: R 脚本可以轻松地作为 SSIS 工作流程的一部分进行集成。主要有两种方式：作为执行进程任务的一部分运行，以及作为执行 SQL 任务的一部分运行：
- en: 'Running R code (not as a part of SQL Server R Services) in Execute Process
    Task can be simply done by calling `Rscript.exe`. If you already have an R file
    that is ready to be executed, then simply add Execute Process Task in an SSIS
    package. You can also weave the input/output in Execute Process Task within the
    SSIS package into the R file:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在执行进程任务中运行 R 代码（不是作为 SQL Server R 服务的一部分）可以通过调用 `Rscript.exe` 来简单地完成。如果你已经有一个准备执行的可执行
    R 文件，那么只需在 SSIS 包中添加执行进程任务。你还可以将 SSIS 包中的执行进程任务的输入/输出编织到 R 文件中：
- en: '![](img/00122.jpeg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00122.jpeg)'
- en: 'Figure 7.14: Executing R script externally within SSIS Execute Process Task'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.14：在 SSIS 执行进程任务中外部执行 R 脚本
- en: 'Running prediction operations in SQL Server using Execute SQL Task in SSIS:
    if you already have a stored procedure that does prediction (or a training model),
    then simply call this stored procedure from Execute SQL Task in SSIS. It is also
    possible to weave the input/output in Execute SQL Task with the SSIS package:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 SQL Server 中使用 SSIS 中的执行 SQL 任务运行预测操作：如果你已经有一个执行预测（或训练模型）的存储过程，那么只需从 SSIS
    中的执行 SQL 任务调用此存储过程。还可能将 SSIS 包中的输入/输出编织到执行 SQL 任务中：
- en: '![](img/00123.jpeg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00123.jpeg)'
- en: 'Figure 7.15: Executing an R-integrated stored procedure as an Execute SQL Task
    step in SSIS'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.15：在 SSIS 中将 R 集成存储过程作为执行 SQL 任务步骤执行
- en: Summary
  id: totrans-243
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned the steps required to integrate an existing predictive
    analytics R code into resides outside of SQL Server R with the Extensibility Framework.
    You have also seen the simplicity and the power of the new `PREDICT` function
    in SQL Server 2017, which allows native scoring without having to install R. Managing
    the security required to run predictive analytics workloads is also important
    in prediction operations. You have learned how to add SQL queries to R projects
    using RTVS. Finally, you've discovered the different possibilities for integrating
    R code and prediction operations into your existing workflows as SQL Server stored
    procedures, SQL Server Agent jobs, PowerShell scripts, and SSIS projects.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了将现有的预测分析 R 代码集成到 SQL Server R 外部的步骤，使用了扩展性框架。你还看到了 SQL Server 2017
    中新 `PREDICT` 函数的简单性和强大功能，它允许在不安装 R 的情况下进行本地评分。在预测操作中管理运行预测分析工作负载所需的安全性也很重要。你学习了如何使用
    RTVS 将 SQL 查询添加到 R 项目中。最后，你发现了将 R 代码和预测操作集成到现有工作流程中的不同可能性，作为 SQL Server 存储过程、SQL
    Server 代理作业、PowerShell 脚本和 SSIS 项目。
- en: 'With these new skills, we are ready for the next building block in managing
    data science solutions as part of database lifecycle: management practices. In
    the next chapter, you''ll learn about managing data science solutions in **Continuous
    Integration/Continuous Delivery** (**CI/CD**) and continuous model performance
    monitoring.'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 带着这些新技能，我们准备好管理数据科学解决方案的下一个构建块，作为数据库生命周期的一部分：管理实践。在下一章中，你将学习如何在 **持续集成/持续交付**（**CI/CD**）和持续模型性能监控中管理数据科学解决方案。
