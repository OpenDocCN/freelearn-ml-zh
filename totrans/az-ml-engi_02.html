<html><head></head><body>
<div id="_idContainer074">
<h1 class="chapter-number" id="_idParaDest-34"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-35"><a id="_idTextAnchor039"/><span class="koboSpan" id="kobo.2.1">Working with Data in AMLS</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Machine Learning</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">ML</span></strong><span class="koboSpan" id="kobo.7.1">), regardless</span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.8.1"> of the use case or the algorithm we use, an important component that will always be used is data. </span><span class="koboSpan" id="kobo.8.2">Without data, you cannot build machine learning models. </span><span class="koboSpan" id="kobo.8.3">The quality of the data is very critical for building performant models. </span><span class="koboSpan" id="kobo.8.4">Complex models such as deep neural networks require a lot more data than simpler models. </span><span class="koboSpan" id="kobo.8.5">Data in an ML workflow will often come from a variety of data sources and require different methods to be leveraged for data processing, cleansing, and feature selection. </span><span class="koboSpan" id="kobo.8.6">During this process of feature engineering, your Azure Machine Learning workspace will be leveraged to empower you to collaboratively work with your data. </span><span class="koboSpan" id="kobo.8.7">This will ensure secure connectivity to a variety of data sources, as well as enable you to register your datasets for use in training, testing, </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">and validation.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">As an example of steps within this workflow, we may be required to take raw data, join with an additional dataset, cleanse data to remove duplicates, fill in missing values, and perform an initial analysis to identify outliers and skew in our data. </span><span class="koboSpan" id="kobo.10.2">This can be done even before an algorithm is selected to begin building a model to train leveraging our features and labels within </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">our dataset.</span></span></p>
<p><span class="koboSpan" id="kobo.12.1">Azure Machine Learning provides methods for connecting to a variety of data sources and registering datasets to be used to build a model, so you can use your data in a </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">business context.</span></span></p>
<p><span class="koboSpan" id="kobo.14.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.16.1">Azure Machine Learning </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">datastore overview</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Creating a Blob Storage </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">account datastore</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Creating Azure Machine Learning </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">data assets</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Using Azure Machine Learning </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">data assets</span></span></li>
</ul>
<h1 id="_idParaDest-36"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.24.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.25.1">Read </span><a href="B18003_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.26.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.27.1">, </span><em class="italic"><span class="koboSpan" id="kobo.28.1">Introducing the Azure Machine Learning Service</span></em><span class="koboSpan" id="kobo.29.1">, to get the environment workspace created </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">to use.</span></span></p>
<p><span class="koboSpan" id="kobo.31.1">These are the prerequisites for </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">the chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.33.1">Access to </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">the internet.</span></span></li>
<li><span class="koboSpan" id="kobo.35.1">A web browser, preferably Google Chrome or Microsoft </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">Edge Chromium.</span></span></li>
<li><span class="koboSpan" id="kobo.37.1">A supported </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">storage service.</span></span></li>
<li><span class="koboSpan" id="kobo.39.1">Access to </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">supported storage.</span></span></li>
<li><span class="koboSpan" id="kobo.41.1">To access the Azure machine learning service workspace, please go to </span><a href="https://ml.azure.com"><span class="koboSpan" id="kobo.42.1">https://ml.azure.com</span></a><span class="koboSpan" id="kobo.43.1">. </span><span class="koboSpan" id="kobo.43.2">Select the workspace from the drop-down list on the left in your </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">web browser.</span></span></li>
</ul>
<h1 id="_idParaDest-37"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.45.1">Azure Machine Learning datastore overview</span></h1>
<p><span class="koboSpan" id="kobo.46.1">Within an </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.47.1">Azure Machine Learning workspace, a storage service that is the source of data is registered as a datastore for reusability. </span><span class="koboSpan" id="kobo.47.2">A datastore securely holds connectivity information for accessing data within the key vault that was created with your Azure Machine Learning workspace. </span><span class="koboSpan" id="kobo.47.3">The credentials supplied to the datastore are used to access the data within a given data service. </span><span class="koboSpan" id="kobo.47.4">These datastores can be created via the Azure Machine Learning Studio through the Azure Machine Learning SDK for Python, or the Azure Machine Learning </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">command-line interface</span></strong><span class="koboSpan" id="kobo.49.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.50.1">CLI</span></strong><span class="koboSpan" id="kobo.51.1">). </span><span class="koboSpan" id="kobo.51.2">Datastores</span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.52.1"> enable data scientists to connect to data by name rather than passing connection information within scripts. </span><span class="koboSpan" id="kobo.52.2">This allows the portability of code through different environments (in different environments, a datastore may point to different services) and prevents the leaking of </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">sensitive credentials.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">Supported datastores include </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.56.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">Blob Storage</span></span></li>
<li><span class="koboSpan" id="kobo.58.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">SQL Database</span></span></li>
<li><span class="koboSpan" id="kobo.60.1">Azure Data Lake Gen </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">1 (deprecated)</span></span></li>
<li><span class="koboSpan" id="kobo.62.1">Azure Data Lake </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">Gen 2</span></span></li>
<li><span class="koboSpan" id="kobo.64.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">file share</span></span></li>
<li><span class="koboSpan" id="kobo.66.1">Azure Database </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">for PostgreSQL</span></span></li>
<li><span class="koboSpan" id="kobo.68.1">Azure Database </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">for MySQL</span></span></li>
<li><span class="koboSpan" id="kobo.70.1">Databricks </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">File System</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.72.1">Each of the </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.73.1">supported datastores will have an authentication type associated with the data service. </span><span class="koboSpan" id="kobo.73.2">When creating a datastore, the authentication type will be selected and leveraged within the Azure Machine Learning workspace. </span><span class="koboSpan" id="kobo.73.3">Note that Azure Database for MySQL is currently only supported for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">DataTransferStep</span></strong><span class="koboSpan" id="kobo.75.1"> pipeline and thus cannot be created with Azure Machine Learning Studio. </span><span class="koboSpan" id="kobo.75.2">The Databricks File System is only supported for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">DatabricksStep</span></strong><span class="koboSpan" id="kobo.77.1"> pipeline, and thus cannot be created leveraging Azure Machine </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">Learning Studio.</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">The following table provides the authentication options for the Azure Storage types available for use with your Azure Machine </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">Learning workspace:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.81.1">Storage Type</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.82.1">Authentication </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.83.1">Options Available</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.84.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">Blob Container</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.86.1">SAS token, </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">account key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.88.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">SQL Database</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.90.1">Service principal, </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">SQL authentication</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.92.1">Azure Data Lake </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">Gen 1</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.94.1">Service principal</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.95.1">Azure Data Lake </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">Gen 2</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.97.1">Service principal</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.98.1">Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">File Share</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.100.1">SAS token, </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">account key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.102.1">Azure Database </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">for PostgreSQL</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.104.1">SQL authentication</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.105.1">Azure Database </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">for MySQL</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.107.1">SQL authentication</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.108.1">Databricks </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">File System</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.110.1">No authentication</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1">Figure 2.1 – Supported authentication for Azure Storage types</span></p>
<p><span class="koboSpan" id="kobo.112.1">Now that </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.113.1">you have an understanding of the types of supported datastores, in the next section, you will learn how to connect your Azure Machine Learning workspace to datastores that you can use within your ML workflow. </span><span class="koboSpan" id="kobo.113.2">The most common and recommended datastore is an Azure blob container. </span><span class="koboSpan" id="kobo.113.3">In fact, one was created for you in </span><a href="B18003_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.114.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.115.1">, </span><em class="italic"><span class="koboSpan" id="kobo.116.1">Introducing the Azure Machine Learning Service</span></em><span class="koboSpan" id="kobo.117.1">, as part of the workspace </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">deployment process.</span></span></p>
<p><span class="koboSpan" id="kobo.119.1">Before continuing to the next section to create datastores using Azure Machine Learning Studio, the Python SDK, and the Azure Machine Learning CLI, we will briefly review the default datastore that was created </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">for you.</span></span></p>
<h2 id="_idParaDest-38"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.121.1">Default datastore review</span></h2>
<p><span class="koboSpan" id="kobo.122.1">As</span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.123.1"> noted in </span><a href="B18003_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.124.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.125.1">, </span><em class="italic"><span class="koboSpan" id="kobo.126.1">Introducing the Azure Machine Learning Service</span></em><span class="koboSpan" id="kobo.127.1">, the left navigation includes a </span><strong class="bold"><span class="koboSpan" id="kobo.128.1">Data</span></strong><span class="koboSpan" id="kobo.129.1"> section, which you can use to access the datastores, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.130.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.131.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.133.1">Tip</span></p>
<p class="callout"><span class="koboSpan" id="kobo.134.1">Clicking on the hamburger icon on the top of the left navigation within your workspace will include words with the icons in your </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">navigation bar.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">If you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.137.1">Datastore</span></strong><span class="koboSpan" id="kobo.138.1"> tab, you can see the storage accounts that have already been created for </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">your workspace:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer048">
<span class="koboSpan" id="kobo.140.1"><img alt="Figure 2.2 – Datastores" src="image/B18003_02_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.141.1">Figure 2.2 – Datastores</span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.142.1">workspaceblobstore</span></strong><span class="koboSpan" id="kobo.143.1"> is the default Azure Machine Learning workspace datastore and holds experiment logs as well as workspace artifacts. </span><span class="koboSpan" id="kobo.143.2">Data can be uploaded to this default datastore, which</span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.144.1"> will be covered in an upcoming section. </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">workspacefilestore</span></strong><span class="koboSpan" id="kobo.146.1"> is used to store your notebooks that are created within your Azure Machine </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">Learning workspace.</span></span></p>
<p><span class="koboSpan" id="kobo.148.1">In the next section, we will see how to connect to a new datastore through Azure Machine Learning Studio, through the Azure Machine Learning Python SDK, as well as through the Azure Machine Learning CLI. </span><span class="koboSpan" id="kobo.148.2">This will enable you to use data where the data lives instead of bringing it into the default datastore associated with your Azure Machine </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">Learning workspace.</span></span></p>
<h1 id="_idParaDest-39"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.150.1">Creating a blob storage account datastore</span></h1>
<p><span class="koboSpan" id="kobo.151.1">As </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.152.1">mentioned in the previous section, </span><em class="italic"><span class="koboSpan" id="kobo.153.1">Default datastore review</span></em><span class="koboSpan" id="kobo.154.1">, we can create a datastore through Azure Machine Learning Studio, through the Azure Machine Learning Python SDK, and through the Azure Machine Learning CLI. </span><span class="koboSpan" id="kobo.154.2">In the next section, we will walk through creating a datastore for a blob storage account with each of </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">these methods.</span></span></p>
<h2 id="_idParaDest-40"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.156.1">Creating a blob storage account datastore through Azure Machine Learning Studio</span></h2>
<p><span class="koboSpan" id="kobo.157.1">In order to </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.158.1">create a blob storage account datastore, first you need to create a storage account</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.159.1"> that contains a blob. </span><span class="koboSpan" id="kobo.159.2">Follow these steps to create an Azure storage account and create blob storage within that </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">storage account:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.161.1">Go to the Azure portal </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">at </span></span><a href="https://ms.portal.azure.com/#home"><span class="No-Break"><span class="koboSpan" id="kobo.163.1">https://ms.portal.azure.com/#home</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.164.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.165.1">Find </span><strong class="bold"><span class="koboSpan" id="kobo.166.1">Storage accounts</span></strong><span class="koboSpan" id="kobo.167.1"> under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.168.1">Azure Services</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.170.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.171.1">Create</span></strong><span class="koboSpan" id="kobo.172.1"> and follow the wizard for creating a storage account. </span><span class="koboSpan" id="kobo.172.2">Make sure to name the storage </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">account </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">amlv2sa</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.176.1">Once the storage account is created, you can see it under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.177.1">Storage accounts</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.179.1">Go ahead and click on the newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">storage account.</span></span></li>
<li><span class="koboSpan" id="kobo.181.1">Then from the left side navigation click on </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">Containers</span></strong><span class="koboSpan" id="kobo.183.1"> and then click </span><strong class="bold"><span class="koboSpan" id="kobo.184.1">+ Container</span></strong><span class="koboSpan" id="kobo.185.1"> to create a new container. </span><span class="koboSpan" id="kobo.185.2">Make sure to name </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">datacontainer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.189.1">Now, go back to Azure Machine Learning Studio, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.190.1">Data</span></strong><span class="koboSpan" id="kobo.191.1"> icon on the left navigation, go to the </span><strong class="bold"><span class="koboSpan" id="kobo.192.1">Datastores</span></strong><span class="koboSpan" id="kobo.193.1"> tab as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.194.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.195.1">.2</span></em><span class="koboSpan" id="kobo.196.1">, and click on </span><strong class="bold"><span class="koboSpan" id="kobo.197.1">+Create</span></strong><span class="koboSpan" id="kobo.198.1">. </span><span class="koboSpan" id="kobo.198.2">A new </span><strong class="bold"><span class="koboSpan" id="kobo.199.1">Create datastore</span></strong><span class="koboSpan" id="kobo.200.1"> pane will open, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.201.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.202.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<span class="koboSpan" id="kobo.204.1"><img alt="Figure 2.3 – Create datastore" src="image/B18003_02_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1">Figure 2.3 – Create datastore</span></p>
<p><span class="koboSpan" id="kobo.206.1">On</span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.207.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.208.1">Create datastore</span></strong><span class="koboSpan" id="kobo.209.1"> pane, configure </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.210.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">required settings:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.212.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.213.1">Datastore name</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.214.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">azureblobdatastore</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.217.1">Given that this is an Azure blob storage account, leave </span><strong class="bold"><span class="koboSpan" id="kobo.218.1">Datastore type</span></strong><span class="koboSpan" id="kobo.219.1"> as </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">Azure </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">Blob Storage</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.223.1">Select your </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Subscription ID</span></strong><span class="koboSpan" id="kobo.225.1"> – note it should default to the Azure subscription of </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">your workspace.</span></span></li>
<li><span class="koboSpan" id="kobo.227.1">Find the storage account that you just created (</span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">amlv2sa</span></strong><span class="koboSpan" id="kobo.229.1">) by clicking on the dropdown under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.230.1">Storage account</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.232.1">Find</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.233.1"> the blob container that you just created (</span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">datacontainer</span></strong><span class="koboSpan" id="kobo.235.1">) by clicking on the dropdown under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.236.1">Blob container</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.238.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.239.1">Save credentials with the datastore for data access</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.240.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.241.1">Yes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.242.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.243.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.244.1">Authentication type</span></strong><span class="koboSpan" id="kobo.245.1"> to </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.246.1">Account key</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.248.1">Set the </span><strong class="bold"><span class="koboSpan" id="kobo.249.1">Account key</span></strong><span class="koboSpan" id="kobo.250.1"> by entering the value found in the </span><strong class="bold"><span class="koboSpan" id="kobo.251.1">Access Keys</span></strong><span class="koboSpan" id="kobo.252.1"> section of your </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">storage account.</span></span></li>
<li><span class="koboSpan" id="kobo.254.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.255.1">Use workspace managed identity for data preview and profiling in Azure Machine Learning studio</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.256.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.257.1">Yes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.259.1">This will grant your Azure Machine Learning service workspace’s managed </span><strong class="bold"><span class="koboSpan" id="kobo.260.1">identity Reader</span></strong><span class="koboSpan" id="kobo.261.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Storage Blob Data </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.263.1">Reader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.264.1"> access.</span></span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.265.1">Click </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.267.1">Create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.269.1">You</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.270.1"> can verify that a datastore called </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">azureblobdatastore</span></strong><span class="koboSpan" id="kobo.272.1"> has been created for you by viewing the </span><strong class="bold"><span class="koboSpan" id="kobo.273.1">Datastores</span></strong><span class="koboSpan" id="kobo.274.1"> tab shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.275.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.276.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.278.1">Now that we have seen how to easily configure a datastore through the UI, we will continue with creating a datastore through the </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">Python SDK.</span></span></p>
<h2 id="_idParaDest-41"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.280.1">Creating a blob storage account datastore through the Python SDK</span></h2>
<p><span class="koboSpan" id="kobo.281.1">In order to use </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.282.1">the Python SDK, you </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.283.1">need to run Python scripts in a Jupyter notebook. </span><span class="koboSpan" id="kobo.283.2">To start a Jupyter notebook, please click on the </span><strong class="bold"><span class="koboSpan" id="kobo.284.1">Compute</span></strong><span class="koboSpan" id="kobo.285.1"> tab on the left navigation, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.286.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.287.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<span class="koboSpan" id="kobo.289.1"><img alt="Figure 2.4 – Opening Jupyter Server from a compute instance" src="image/B18003_02_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.290.1">Figure 2.4 – Opening Jupyter Server from a compute instance</span></p>
<p><span class="koboSpan" id="kobo.291.1">Next, from</span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.292.1"> an existing </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.293.1">compute instance click on </span><strong class="bold"><span class="koboSpan" id="kobo.294.1">Jupyter</span></strong><span class="koboSpan" id="kobo.295.1"> to open Jupyter Server. </span><span class="koboSpan" id="kobo.295.2">Under </span><strong class="bold"><span class="koboSpan" id="kobo.296.1">New</span></strong><span class="koboSpan" id="kobo.297.1">, click on </span><strong class="bold"><span class="koboSpan" id="kobo.298.1">Python 3.10 – SDKV2</span></strong><span class="koboSpan" id="kobo.299.1"> in order to create a new Jupyter notebook, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.300.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.301.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer051">
<span class="koboSpan" id="kobo.303.1"><img alt="Figure 2.5 – Creating a new Jupyter notebook" src="image/B18003_02_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.304.1">Figure 2.5 – Creating a new Jupyter notebook</span></p>
<p><span class="koboSpan" id="kobo.305.1">Using the Azure Machine Learning Python SDK, an Azure blob container can be registered to your Azure Machine Learning workspace leveraging the following code in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.306.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.307.1">.6</span></em><span class="koboSpan" id="kobo.308.1">. </span><span class="koboSpan" id="kobo.308.2">Recall from when we created a new datastore through the UI that the value of the account key can be found in the </span><strong class="bold"><span class="koboSpan" id="kobo.309.1">Access Keys</span></strong><span class="koboSpan" id="kobo.310.1"> section of your </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">storage account:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.312.1"><img alt="Figure 2.6 – Using the Python SDK to create a blob storage account datastore" src="image/B18003_02_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.313.1">Figure 2.6 – Using the Python SDK to create a blob storage account datastore</span></p>
<p><span class="koboSpan" id="kobo.314.1">You</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.315.1"> can verify that a new blob storage</span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.316.1"> datastore called </span><strong class="bold"><span class="koboSpan" id="kobo.317.1">blob_storage</span></strong><span class="koboSpan" id="kobo.318.1"> has been created if you click on </span><strong class="bold"><span class="koboSpan" id="kobo.319.1">Data</span></strong><span class="koboSpan" id="kobo.320.1"> in the left navigation and then the </span><strong class="bold"><span class="koboSpan" id="kobo.321.1">Datastores</span></strong><span class="koboSpan" id="kobo.322.1"> option, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.323.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.324.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer053">
<span class="koboSpan" id="kobo.326.1"><img alt="Figure 2.7 – List of datastores created in the workspace" src="image/B18003_02_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.327.1">Figure 2.7 – List of datastores created in the workspace</span></p>
<p><span class="koboSpan" id="kobo.328.1">Next, let’s</span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.329.1"> created </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.330.1">a blob storage account datastore with the Azure Machine </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">Learning CLI.</span></span></p>
<h2 id="_idParaDest-42"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.332.1">Creating a blob storage account datastore through the Azure Machine Learning CLI</span></h2>
<p><span class="koboSpan" id="kobo.333.1">Assuming </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.334.1">you have</span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.335.1"> followed the instructions in </span><a href="B18003_01.xhtml#_idTextAnchor020"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.336.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.337.1">, </span><em class="italic"><span class="koboSpan" id="kobo.338.1">Introducing the Azure Machine Learning Service</span></em><span class="koboSpan" id="kobo.339.1">, to install the Azure CLI and the machine learning extension in your local environment, you can run the following command to create a blob storage </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">account datastore:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer054">
<span class="koboSpan" id="kobo.341.1"><img alt="Figure 2.8 – CLI command to create a blob storage account datastore" src="image/B18003_02_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.342.1">Figure 2.8 – CLI command to create a blob storage account datastore</span></p>
<p><span class="koboSpan" id="kobo.343.1">In the</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.344.1"> preceding command, </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">blobstore.yml</span></strong><span class="koboSpan" id="kobo.346.1"> is a YAML file schema specifying the datastore</span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.347.1"> type, name, description, storage account name, and credentials for the storage account, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.348.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.349.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer055">
<span class="koboSpan" id="kobo.351.1"><img alt="Figure 2.9 – Blob datastore YAML schema file" src="image/B18003_02_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.352.1">Figure 2.9 – Blob datastore YAML schema file</span></p>
<p><span class="koboSpan" id="kobo.353.1">You can verify that a new blob storage datastore called </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">blob_storage_cli</span></strong><span class="koboSpan" id="kobo.355.1"> has been created if you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.356.1">Datastores</span></strong><span class="koboSpan" id="kobo.357.1"> tab, as shown earlier in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.358.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.359.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">Now that you have successfully created a blob storage datastore, within your Azure Machine Learning workspace, you will be able to use this datastore for multiple data assets. </span><span class="koboSpan" id="kobo.361.2">The connection information to this datastore is securely held within your Azure key vault, and you have a location to store data as it </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">is generated.</span></span></p>
<h1 id="_idParaDest-43"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.363.1">Creating Azure Machine Learning data assets</span></h1>
<p><span class="koboSpan" id="kobo.364.1">Once the </span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.365.1">previous datastore is created, the next step is to create a data asset. </span><span class="koboSpan" id="kobo.365.2">Please note that we will be using the terms “data asset” and “dataset” interchangeably throughout the chapter. </span><span class="koboSpan" id="kobo.365.3">A dataset is a logical</span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.366.1"> connection to the datastore with versioning and schema management, such as choosing which columns of the data to use, the types of the columns in the dataset, and some statistics about the data. </span><span class="koboSpan" id="kobo.366.2">Data assets abstract the code from configuring data to be read. </span><span class="koboSpan" id="kobo.366.3">Also, data assets are very useful when we run multiple models as each model can be configured to read the dataset name instead of configuring or programming how to connect to the dataset and read it. </span><span class="koboSpan" id="kobo.366.4">This makes it easier to scale the </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">model training.</span></span></p>
<p><span class="koboSpan" id="kobo.368.1">In the following sections, you will learn how to create datasets using the Azure Machine Learning Python SDK, CLI, and UI. </span><span class="koboSpan" id="kobo.368.2">Datasets allow us to create versions based on schema changes without changing the underlying datastore that holds the data. </span><span class="koboSpan" id="kobo.368.3">Specific versions can be used within code. </span><span class="koboSpan" id="kobo.368.4">We can also create profiles on the data for each dataset created and stored for further </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">data analysis.</span></span></p>
<h2 id="_idParaDest-44"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.370.1">Creating a data asset using the UI</span></h2>
<p><span class="koboSpan" id="kobo.371.1">Azure Machine Learning Studio</span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.372.1"> provides a</span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.373.1"> great interface for creating a dataset through a guided UI. </span><span class="koboSpan" id="kobo.373.2">In order to create a dataset using Azure Machine Learning Studio, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.375.1">Go </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">to </span></span><a href="https://ml.azure.com"><span class="No-Break"><span class="koboSpan" id="kobo.377.1">https://ml.azure.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.378.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.379.1">Select your </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">workspace name.</span></span></li>
<li><span class="koboSpan" id="kobo.381.1">In the workspace UI, click </span><strong class="bold"><span class="koboSpan" id="kobo.382.1">Data</span></strong><span class="koboSpan" id="kobo.383.1"> and make sure that the </span><strong class="bold"><span class="koboSpan" id="kobo.384.1">Data assets</span></strong><span class="koboSpan" id="kobo.385.1"> option </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">is selected.</span></span></li>
<li><span class="koboSpan" id="kobo.387.1">Next, click </span><strong class="bold"><span class="koboSpan" id="kobo.388.1">+ Create</span></strong><span class="koboSpan" id="kobo.389.1"> and fill out the </span><strong class="bold"><span class="koboSpan" id="kobo.390.1">Create data asset</span></strong><span class="koboSpan" id="kobo.391.1"> form, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.392.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.393.1">.10</span></em><span class="koboSpan" id="kobo.394.1">, and make sure to select </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">Tabular</span></strong><span class="koboSpan" id="kobo.396.1"> in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.397.1">Type</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.398.1"> field:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer056">
<span class="koboSpan" id="kobo.399.1"><img alt="Figure 2.10 – Create data asset" src="image/B18003_02_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.400.1">Figure 2.10 – Create data asset</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.401.1">On the next </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.402.1">screen, select </span><strong class="bold"><span class="koboSpan" id="kobo.403.1">From local files</span></strong><span class="koboSpan" id="kobo.404.1"> and click </span><strong class="bold"><span class="koboSpan" id="kobo.405.1">Next</span></strong><span class="koboSpan" id="kobo.406.1"> to see the </span><strong class="bold"><span class="koboSpan" id="kobo.407.1">Select a datastore</span></strong><span class="koboSpan" id="kobo.408.1"> screen, as shown</span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.409.1"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.410.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.411.1">.11.</span></em><span class="koboSpan" id="kobo.412.1"> Go ahead and select the </span><strong class="bold"><span class="koboSpan" id="kobo.413.1">blob_storage</span></strong><span class="koboSpan" id="kobo.414.1"> datastore that you created in the </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">last section.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer057">
<span class="koboSpan" id="kobo.416.1"><img alt="Figure 2.11 – Select a datastore" src="image/B18003_02_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.417.1">Figure 2.11 – Select a datastore</span></p>
<p><span class="koboSpan" id="kobo.418.1">Once the</span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.419.1"> datastore is selected, you are provided with the option to choose the path </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.420.1">where the file is located, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.421.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.422.1">.12</span></em><span class="koboSpan" id="kobo.423.1">. </span><span class="koboSpan" id="kobo.423.2">For this example, we will use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">titanic.csv</span></strong><span class="koboSpan" id="kobo.425.1"> file, which can be downloaded from our GitHub repository. </span><span class="koboSpan" id="kobo.425.2">Enter the path where you downloaded and saved the file and then </span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.427.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer058">
<span class="koboSpan" id="kobo.429.1"><img alt="Figure 2.12 – Upload your data file" src="image/B18003_02_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.430.1">Figure 2.12 – Upload your data file</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.431.1">Next is the </span><strong class="bold"><span class="koboSpan" id="kobo.432.1">Settings and preview</span></strong><span class="koboSpan" id="kobo.433.1"> screen. </span><span class="koboSpan" id="kobo.433.2">On this screen, the file is automatically</span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.434.1"> parsed, and options are displayed for the format detected. </span><span class="koboSpan" id="kobo.434.2">In our case, it’s a CSV file, and settings for CSV file format are shown. </span><span class="koboSpan" id="kobo.434.3">Check the preview section to validate whether the dataset shows the data in the right format like identifying columns, header, and values. </span><span class="koboSpan" id="kobo.434.4">If the format is not detected, then you can change the settings for </span><strong class="bold"><span class="koboSpan" id="kobo.435.1">File Format</span></strong><span class="koboSpan" id="kobo.436.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.437.1">Delimiter</span></strong><span class="koboSpan" id="kobo.438.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.439.1">Encoding</span></strong><span class="koboSpan" id="kobo.440.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.441.1">Column headers</span></strong><span class="koboSpan" id="kobo.442.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.443.1">Skip rows</span></strong><span class="koboSpan" id="kobo.444.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.445.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.446.1">.13</span></em><span class="koboSpan" id="kobo.447.1">. </span><span class="koboSpan" id="kobo.447.2">If the dataset contains multi-line data, then check the option for </span><strong class="bold"><span class="koboSpan" id="kobo.448.1">Dataset contains multi-line data</span></strong><span class="koboSpan" id="kobo.449.1">. </span><span class="koboSpan" id="kobo.449.2">Once the settings are configured properly for your dataset, click</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.450.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.451.1">Next</span></strong><span class="koboSpan" id="kobo.452.1"> button to go to the next section </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">regarding schema:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer059">
<span class="koboSpan" id="kobo.454.1"><img alt="Figure 2.13 – Settings and preview screen" src="image/B18003_02_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.455.1">Figure 2.13 – Settings and preview screen</span></p>
<p><span class="koboSpan" id="kobo.456.1">On this</span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.457.1"> screen, the system will identify the schema of the data and display it for review, allowing changes as needed. </span><span class="koboSpan" id="kobo.457.2">Typically, a CSV or text file may require schema changes. </span><span class="koboSpan" id="kobo.457.3">As an example, a column may have an incorrect data type, so be sure to select the correct </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">data type.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.459.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.460.1">The first 200 rows are used to detect the column type. </span><span class="koboSpan" id="kobo.460.2">If the dataset has a column type mismatch, consider cleaning your dataset before registering using a </span><span class="No-Break"><span class="koboSpan" id="kobo.461.1">Jupyter notebook.</span></span></p>
<p><span class="koboSpan" id="kobo.462.1">Here are the </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.463.1">available </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.464.1">data </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">type formats:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.466.1">String</span></strong></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.467.1">Integer</span></strong></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.468.1">Boolean</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.469.1">Decimal (</span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.470.1">dot ‘.’)</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.471.1">Decimal (</span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.472.1">comma ‘,’)</span></strong></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.473.1">Date</span></strong></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.474.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.475.1">.14</span></em><span class="koboSpan" id="kobo.476.1"> shows the schema information for your dataset. </span><span class="koboSpan" id="kobo.476.2">Check the </span><strong class="bold"><span class="koboSpan" id="kobo.477.1">Type</span></strong><span class="koboSpan" id="kobo.478.1"> header dropdown to see the available </span><span class="No-Break"><span class="koboSpan" id="kobo.479.1">data types:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer060">
<span class="koboSpan" id="kobo.480.1"><img alt="Figure 2.14 – Schema screen" src="image/B18003_02_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.481.1">Figure 2.14 – Schema screen</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.482.1">Scroll down</span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.483.1"> and review all </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.484.1">the columns. </span><span class="koboSpan" id="kobo.484.2">For your registered data asset, you can choose to include or exclude a given column. </span><span class="koboSpan" id="kobo.484.3">The option to </span><strong class="bold"><span class="koboSpan" id="kobo.485.1">Include</span></strong><span class="koboSpan" id="kobo.486.1"> is available per column, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.487.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.488.1">.14</span></em><span class="koboSpan" id="kobo.489.1">. </span><span class="koboSpan" id="kobo.489.2">This screen also includes the option to </span><strong class="bold"><span class="koboSpan" id="kobo.490.1">Search</span></strong><span class="koboSpan" id="kobo.491.1"> a column. </span><span class="koboSpan" id="kobo.491.2">Once the screen is properly configured for your data asset, </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.493.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.495.1">Next is the </span><strong class="bold"><span class="koboSpan" id="kobo.496.1">Review</span></strong><span class="koboSpan" id="kobo.497.1"> screen. </span><span class="koboSpan" id="kobo.497.2">Confirm all the settings that were selected previously are correct and then </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.499.1">Create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer061">
<span class="koboSpan" id="kobo.501.1"><img alt="Figure 2.15 – Confirm review screen" src="image/B18003_02_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.502.1">Figure 2.15 – Confirm review screen</span></p>
<p><span class="koboSpan" id="kobo.503.1">During</span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.504.1"> the review, if any changes are required, click the </span><strong class="bold"><span class="koboSpan" id="kobo.505.1">Back</span></strong><span class="koboSpan" id="kobo.506.1"> button and change </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">the settings.</span></span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.508.1">Once the</span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.509.1"> data asset creation is complete, you will see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">titanicdataset</span></strong><span class="koboSpan" id="kobo.511.1"> data asset page, which includes different options, such as </span><strong class="bold"><span class="koboSpan" id="kobo.512.1">Explore</span></strong><span class="koboSpan" id="kobo.513.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">Consume</span></strong><span class="koboSpan" id="kobo.515.1">, and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.516.1">Generate Profile</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.518.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.519.1">Consume</span></strong><span class="koboSpan" id="kobo.520.1"> option, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.521.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.522.1">.16</span></em><span class="koboSpan" id="kobo.523.1">, to review the code for retrieving your registered dataset by name and displaying a pandas dataframe from </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">your dataset:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer062">
<span class="koboSpan" id="kobo.525.1"><img alt="Figure 2.16 – Consuming the data asset using Python" src="image/B18003_02_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.526.1">Figure 2.16 – Consuming the data asset using Python</span></p>
<p><span class="koboSpan" id="kobo.527.1">The</span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.528.1"> code shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.529.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.530.1">.16</span></em><span class="koboSpan" id="kobo.531.1"> can</span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.532.1"> be copied and pasted directly into an Azure Machine Learning notebook and run on your Azure Machine Learning compute instance, as discussed later in </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">the chapter.</span></span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.534.1">Within the </span><strong class="bold"><span class="koboSpan" id="kobo.535.1">Consume</span></strong><span class="koboSpan" id="kobo.536.1"> option for the registered dataset, you can select the </span><strong class="bold"><span class="koboSpan" id="kobo.537.1">Generate profile</span></strong><span class="koboSpan" id="kobo.538.1"> option to begin a guided tour through profiling your dataset, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.539.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.540.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer063">
<span class="koboSpan" id="kobo.542.1"><img alt="Figure 2.17 – Generate profile screen" src="image/B18003_02_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.543.1">Figure 2.17 – Generate profile screen</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.544.1">If you </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.545.1">want to create a new</span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.546.1"> version of the dataset, click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.547.1">New Version</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.549.1">There is also the </span><strong class="bold"><span class="koboSpan" id="kobo.550.1">Explore</span></strong><span class="koboSpan" id="kobo.551.1"> option to view a sample of the data set. </span><span class="koboSpan" id="kobo.551.2">Only the first 50 rows </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">are shown:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer064">
<span class="koboSpan" id="kobo.553.1"><img alt="Figure 2.18 – Explore screen" src="image/B18003_02_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.554.1">Figure 2.18 – Explore screen</span></p>
<p><span class="koboSpan" id="kobo.555.1">In this section, we </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.556.1">showed you how to</span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.557.1"> create data assets using the UI. </span><span class="koboSpan" id="kobo.557.2">In the next section, we will show you how to create data assets using the </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">Python SDK.</span></span></p>
<h1 id="_idParaDest-45"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.559.1">Creating a data asset using the Python SDK</span></h1>
<p><span class="koboSpan" id="kobo.560.1">In this section, we </span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.561.1">will show </span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.562.1">you how to </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.563.1">create a data asset using the Python SDK. </span><span class="koboSpan" id="kobo.563.2">As mentioned in the previous section, you can create data from datastores, local files, and public URLs. </span><span class="koboSpan" id="kobo.563.3">The Python script to create a data asset from a local file (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">titanic.csv</span></strong><span class="koboSpan" id="kobo.565.1">) is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.566.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.567.1">.19</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.569.1">Please note that in the following code snippet, </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">type = AssetTypes.mltable</span></strong><span class="koboSpan" id="kobo.571.1"> abstracts the schema definition for the tabular data, making it easier to </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">share datasets:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<span class="koboSpan" id="kobo.573.1"><img alt="Figure 2.19 – Creating a data asset via the Python SDK" src="image/B18003_02_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.574.1">Figure 2.19 – Creating a data asset via the Python SDK</span></p>
<p><span class="koboSpan" id="kobo.575.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">my_data</span></strong><span class="koboSpan" id="kobo.577.1"> folder, there </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.578.1">are </span><a id="_idIndexMarker184"/><span class="No-Break"><span class="koboSpan" id="kobo.579.1">two files:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.580.1">The actual </span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.581.1">data file, which in this case </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">titanic.csv</span></strong></span></li>
<li><span class="koboSpan" id="kobo.584.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">mltable</span></strong><span class="koboSpan" id="kobo.586.1"> file, which is a YAML file specifying the data’s schema so that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">mltable</span></strong><span class="koboSpan" id="kobo.588.1"> engine can use it in order to materialize the data into an in-memory object such as pandas </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">or DASK</span></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.590.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.591.1">.20</span></em><span class="koboSpan" id="kobo.592.1"> shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">mltable</span></strong><span class="koboSpan" id="kobo.594.1"> YAML file for </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">this example:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer066">
<span class="koboSpan" id="kobo.596.1"><img alt="Figure 2.20 – The mltable YAML file for creating an mltable data asset" src="image/B18003_02_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.597.1">Figure 2.20 – The mltable YAML file for creating an mltable data asset</span></p>
<p><span class="koboSpan" id="kobo.598.1">If you</span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.599.1"> head back to the </span><strong class="bold"><span class="koboSpan" id="kobo.600.1">Data</span></strong><span class="koboSpan" id="kobo.601.1"> tab </span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.602.1">under </span><strong class="bold"><span class="koboSpan" id="kobo.603.1">Data assets</span></strong><span class="koboSpan" id="kobo.604.1">, you will see that a new dataset called </span><strong class="bold"><span class="koboSpan" id="kobo.605.1">titanic-mltable-sdk</span></strong><span class="koboSpan" id="kobo.606.1"> has been created with its type set to </span><strong class="bold"><span class="koboSpan" id="kobo.607.1">Table(mltable)</span></strong><span class="koboSpan" id="kobo.608.1"> and its version </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.610.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.612.1">In this section, we</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.613.1"> showed you how to create a data asset using the Python SDK. </span><span class="koboSpan" id="kobo.613.2">In the next section, you will learn how to consume a </span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">data asset.</span></span></p>
<h1 id="_idParaDest-46"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.615.1">Using Azure Machine Learning datasets</span></h1>
<p><span class="koboSpan" id="kobo.616.1">During this </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.617.1">chapter, we have covered what an </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.618.1">Azure Machine Learning datastore is and how to connect to a variety of supported data sources. </span><span class="koboSpan" id="kobo.618.2">We created connections to Azure Machine Learning datastores using Azure Machine Learning Studio, the Python SDK, and the Azure CLI. </span><span class="koboSpan" id="kobo.618.3">We have just covered Azure Machine Learning datasets, a valuable asset for your ML projects. </span><span class="koboSpan" id="kobo.618.4">We went through how to generate Azure Machine Learning datasets using Azure Machine Learning Studio and the Python SDK. </span><span class="koboSpan" id="kobo.618.5">Once an Azure Machine Learning dataset is created, it can be used throughout your Azure Machine Learning experiments, which</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.619.1"> are </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">called </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.621.1">jobs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.623.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.624.1">.21</span></em><span class="koboSpan" id="kobo.625.1"> shows a code snippet for materializing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.626.1">mltable</span></strong><span class="koboSpan" id="kobo.627.1"> artifact into a pandas dataframe. </span><span class="koboSpan" id="kobo.627.2">Please note that you need the </span><strong class="source-inline"><span class="koboSpan" id="kobo.628.1">mltable</span></strong><span class="koboSpan" id="kobo.629.1"> library installed in your environment (using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.630.1">pip install </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">mltable</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.632.1"> command).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer067">
<span class="koboSpan" id="kobo.633.1"><img alt="Figure 2.21 – Materializing the mltable artifact into a pandas dataframe" src="image/B18003_02_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.634.1">Figure 2.21 – Materializing the mltable artifact into a pandas dataframe</span></p>
<p><span class="koboSpan" id="kobo.635.1">Now let’s </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.636.1">see</span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.637.1"> how to use a data asset inside an ML job, which will be covered in the </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">next section.</span></span></p>
<h2 id="_idParaDest-47"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.639.1">Read data in a job</span></h2>
<p><span class="koboSpan" id="kobo.640.1">An Azure Machine Learning job</span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.641.1"> consists of a Python script, which could be simple data processing or a complex code for model development, a Bash command to specify tasks to be performed, the inputs and </span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.642.1">outputs of the job, the Docker environment specifying the runtime libraries required to run the job and a compute where the Docker container would run on. </span><span class="koboSpan" id="kobo.642.2">The code that is executed inside a job will probably need to use a dataset. </span><span class="koboSpan" id="kobo.642.3">The primary way to pass data to an Azure Machine Learning job is by </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">using datasets.</span></span></p>
<p><span class="koboSpan" id="kobo.644.1">Let’s walk you through the steps needed to run a job that takes a dataset </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">as input:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.646.1">Create an Azure Machine Learning environment, which is where your process to train a model or process your data takes place. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.647.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.648.1">.22</span></em><span class="koboSpan" id="kobo.649.1"> shows the code snippet to create an environment called </span><strong class="source-inline"><span class="koboSpan" id="kobo.650.1">env_docker_conda</span></strong><span class="koboSpan" id="kobo.651.1">, which will be used in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.652.1">step 4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer068">
<span class="koboSpan" id="kobo.654.1"><img alt="Figure 2.22 – Creating the Azure Machine Learning environment" src="image/B18003_02_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.655.1">Figure 2.22 – Creating the Azure Machine Learning environment</span></p>
<p><span class="koboSpan" id="kobo.656.1">In the</span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.657.1"> preceding </span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.658.1">code, </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">env-mltable.yml</span></strong><span class="koboSpan" id="kobo.660.1">, which is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.661.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.662.1">.22</span></em><span class="koboSpan" id="kobo.663.1">, is a YAML file defining the Python libraries that need to be installed in </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">the environment:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer069">
<span class="koboSpan" id="kobo.665.1"><img alt="Figure 2.23 – Environment specification YAML file" src="image/B18003_02_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.666.1">Figure 2.23 – Environment specification YAML file</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.667.1">Write a </span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.668.1">Python script to </span><a id="_idIndexMarker199"/><span class="koboSpan" id="kobo.669.1">process your data and build a model. </span><span class="koboSpan" id="kobo.669.2">For this chapter, we will show you a simple Python script that takes an input dataset, converts it to a pandas dataframe, and then prints it. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.670.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.671.1">.24</span></em><span class="koboSpan" id="kobo.672.1"> shows the script saved in a file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">read_data.py</span></strong><span class="koboSpan" id="kobo.674.1">, which will be used in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.675.1">step 4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer070">
<span class="koboSpan" id="kobo.677.1"><img alt="Figure 2.24 – Python script processing the input dataset" src="image/B18003_02_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.678.1">Figure 2.24 – Python script processing the input dataset</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.679.1">Create </span><a id="_idIndexMarker200"/><span class="koboSpan" id="kobo.680.1">an Azure Machine Learning</span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.681.1"> compute cluster where the Azure Machine Learning containerized job will be submitted. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.682.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.683.1">.25</span></em><span class="koboSpan" id="kobo.684.1"> shows the Python script to create a compute cluster called </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">cpu-cluster</span></strong><span class="koboSpan" id="kobo.686.1"> by specifying its type and the minimum and maximum number </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">of nodes:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer071">
<span class="koboSpan" id="kobo.688.1"><img alt=" Figure 2.25 – Create Azure Machine Learning compute cluster" src="image/B18003_02_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.689.1"> Figure 2.25 – Create Azure Machine Learning compute cluster</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.690.1">Now you have all the necessary pieces to construct an Azure Machine Learning job and submit it for execution. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.691.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.692.1">.26</span></em><span class="koboSpan" id="kobo.693.1"> shows the Python script for creating an Azure Machine Learning job called </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">job</span></strong><span class="koboSpan" id="kobo.695.1">. </span><span class="koboSpan" id="kobo.695.2">This job is essentially a Docker container containing your Python code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">read_data.py</span></strong><span class="koboSpan" id="kobo.697.1">, which is taking your previously created input dataset and is submitted to the compute cluster </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">you created:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer072">
<span class="koboSpan" id="kobo.699.1"><img alt="Figure 2.26 – Creating an Azure Machine Learning job" src="image/B18003_02_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.700.1">Figure 2.26 – Creating an Azure Machine Learning job</span></p>
<p><span class="koboSpan" id="kobo.701.1">The </span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.702.1">output of the Jupyter notebook cell is a link to the job in Azure Machine Learning Studio, which displays</span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.703.1"> the job’s overview, its status, the Python code, and the output of the job. </span><span class="koboSpan" id="kobo.703.2">If you navigate to this link and click on </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">Outputs + logs</span></strong><span class="koboSpan" id="kobo.705.1">, then </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">std_log.txt</span></strong><span class="koboSpan" id="kobo.707.1"> under </span><strong class="bold"><span class="koboSpan" id="kobo.708.1">user_logs</span></strong><span class="koboSpan" id="kobo.709.1">, you will see the output generated by the Python code, which is printing the input dataset to the standard log, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.710.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.711.1">.27</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.712.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer073">
<span class="koboSpan" id="kobo.713.1"><img alt="Figure 2.27 – Output of the Azure Machine Learning job after successful execution" src="image/B18003_02_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.714.1">Figure 2.27 – Output of the Azure Machine Learning job after successful execution</span></p>
<p><span class="koboSpan" id="kobo.715.1">Let’s</span><a id="_idIndexMarker204"/><span class="koboSpan" id="kobo.716.1"> summarize</span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.717.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">chapter now.</span></span></p>
<h1 id="_idParaDest-48"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.719.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.720.1">In this chapter, you have explored Azure Machine Learning datastores, which enable you to connect to datastore services. </span><span class="koboSpan" id="kobo.720.2">You have also learned about Azure Machine Learning datasets, empowering you to create a reference to a location within a datastore. </span><span class="koboSpan" id="kobo.720.3">These assets within Azure Machine Learning can be created through the UI for a low code experience, as well as through the Azure Machine Learning Python SDK or the Azure Machine Learning CLI. </span><span class="koboSpan" id="kobo.720.4">Once these references are created, datasets can be retrieved and used through the Azure Machine Learning Python SDK. </span><span class="koboSpan" id="kobo.720.5">Once the dataset has been retrieved, it can easily be converted into a pandas dataframe for use within your code. </span><span class="koboSpan" id="kobo.720.6">You have also seen how to use datasets within an Azure Machine Learning job by passing them as input to </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">the job.</span></span></p>
<p><span class="koboSpan" id="kobo.722.1">In </span><a href="B18003_03.xhtml#_idTextAnchor053"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.723.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.724.1">, </span><em class="italic"><span class="koboSpan" id="kobo.725.1">Training Machine Learning Models in AMLS</span></em><span class="koboSpan" id="kobo.726.1">, you will explore training models; experiments will become a key asset in your toolbelt, enabling traceability as you build your model </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">in AMLS.</span></span></p>
</div>
</body></html>