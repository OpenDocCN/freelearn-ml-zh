- en: Visualizing Economic Problems in the European Union
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视化欧洲联盟的经济问题
- en: Now, we will move on and look at a second problem, which is the detection of
    macroeconomic imbalances in different countries, particularly within the European
    Union, which, in my opinion, failed and increased the damage of the financial
    crisis.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将继续探讨第二个问题，即在不同国家，尤其是在欧盟内部检测宏观经济失衡的问题。在我看来，这失败了，并加剧了金融危机的损害。
- en: 'In this chapter, we will take a look at what our problem is and create clusters
    for the countries that have been identified as suffering from macroeconomic imbalances.
    We will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨我们的问题，并为那些被确定为遭受宏观经济失衡的国家创建聚类。我们将涵盖以下主题：
- en: A general overview of economic problems in the European Union
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欧洲联盟经济问题的概述
- en: Clustering countries based on macroeconomic imbalances
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据宏观经济失衡对国家进行聚类
- en: A general overview of economic problems in countries
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 各国经济问题的概述
- en: The worldwide financial crisis of 2008 started as a bank-level crisis that closed
    the flow of money and increased financial instability. During the first few months,
    the impact was felt primarily by financial institutions and intermediaries. After
    that, however, it then reached macroeconomic dimensions, threatening the stability
    of entire countries.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 2008年的全球金融危机始于银行层面的危机，关闭了资金流动并增加了金融不稳定。在前几个月，主要影响的是金融机构和中介机构。然而，之后它达到了宏观经济层面，威胁到整个国家的稳定。
- en: The European Union, the **International Monetary Fund** (**IMF**), and the **European
    Central Bank** (**ECB**) took urgent measures to avoid the insolvency of some
    countries. As a result, Greece received €110 billion in 2010 to pay its public
    debt. This loan was the start of further expenditure. Ireland received €87 billion
    euros in November 2017 with the same aim. Problems were then identified in Portugal
    in 2011 and an additional loan was received by Greece. Spain and Cyprus also received
    money in 2012 and 2013, respectively.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 欧洲联盟、**国际货币基金组织**（**IMF**）和**欧洲中央银行**（**ECB**）采取了紧急措施以避免某些国家的破产。因此，希腊在2010年获得了1100亿欧元来偿还其公共债务。这笔贷款是进一步支出的开始。爱尔兰在2017年11月获得了870亿欧元，目的相同。随后，2011年在葡萄牙发现了问题，希腊又收到了一笔额外的贷款。西班牙和塞浦路斯分别在2012年和2013年获得了资金。
- en: When a financial crisis occurs or a new problem arises, people often say that
    it was bound to happen or that everyone had predicted it. Prior to the financial
    crisis, macroeconomic imbalances had been increasing steadily, but were probably
    hidden because of the worldwide economic growth that took place from 2002\. Credit
    rating agencies also weren't able to detect these macroeconomic imbalances.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当发生金融危机或出现新问题时，人们常说这是必然会发生的事情，或者每个人都预测到了。在金融危机之前，宏观经济失衡一直在稳步增加，但可能因为从2002年开始的全球经济增长而被隐藏。信用评级机构也无法检测到这些宏观经济失衡。
- en: Understanding credit ratings
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解信用评级
- en: Credit ratings can be described as a category or grade that represents a government's
    ability and willingness to repay its debts fully and on time. An implicit probability
    of defaulting can be associated with a credit rating.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 信用评级可以描述为一个类别或等级，它代表了一个政府偿还其债务的能力和意愿，并按时全额偿还。与信用评级相关联的是一个潜在的违约概率。
- en: Credit ratings are very important for countries because they determine the cost
    of funding in capital markets and they enable access to derivative and loan contracts.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 信用评级对国家来说非常重要，因为它们决定了资本市场的融资成本，并使他们能够获得衍生品和贷款合同。
- en: 'In recent years, the number of ratings and their importance has increased considerably.
    In a more globalized and complex world, investors need standard metrics to compare
    the credit quality between issuers, even if they belong to very different countries.
    Although they are not an exact science, as the **Credit Rating Agency** (**CRA**)
    Standard & Poor''s argues, credit rating establishes a ranking of countries according
    to their solvency. They are considered an important reference for investors and
    international organizations. In the following table, the different grades and
    their meanings are described:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 近年来，评级数量及其重要性显著增加。在一个更加全球化和复杂的世界中，投资者需要标准指标来比较发行人之间的信用质量，即使他们属于非常不同的国家。尽管**信用评级机构**标准普尔认为这并不是一门精确的科学，但信用评级根据各国的偿债能力进行排名。它们被认为是投资者和国际组织的重要参考。在下表中，描述了不同的等级及其含义：
- en: '![](img/71c29554-2072-46b6-85d9-cb170671eb94.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/71c29554-2072-46b6-85d9-cb170671eb94.png)'
- en: The role of credit rating agencies
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信用评级机构的作用
- en: The reliance on credit ratings has granted a high level of influence and political
    power to CRAs. Although there is a large number of CRAs, only three of them collect
    more than 90% of the market share. These are **Moody's**, **Standard & Poor's**,
    and **Fitch**.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 依赖信用评级赋予了信用评级机构高水平的影響力和政治权力。尽管有大量的信用评级机构，但只有其中三家收集了超过90%的市场份额。这些是**穆迪**、**标准普尔**和**惠誉**。
- en: Credit rating agencies have been criticized for their performance in important
    crises such as the Asian and Russian financial crisis of the late 1990s and the
    recent global financial crisis that started in 2008\. During these events, CRAs
    exacerbated imbalances, taking too much time to react or to predict default events,
    and then they reacted excessively, with severe downgrades.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 信用评级机构因在1990年代末的亚洲和俄罗斯金融危机以及2008年爆发的近期全球金融危机等重要危机中的表现而受到批评。在这些事件中，信用评级机构加剧了不平衡，反应或预测违约事件的时间过长，然后过度反应，导致严重降级。
- en: For example, in the most recent financial crisis, European economies were downgraded
    by an average of three notches. Greece and Italy were among the most severely
    affected countries.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在最近的金融危机中，欧洲经济体的评级平均下降了三个等级。希腊和意大利是受影响最严重的国家之一。
- en: The credit rating process
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信用评级流程
- en: Many factors are considered in the rating process, including political, growth,
    external debt, the financial sector, the structure of the public and private sector,
    social development, and trade. Standard & Poor's, for example, scores five key
    factors of a country's degree of creditworthiness on a six-point scale. The different
    weights and the way in which the factors are combined, however, is unknown. Moreover,
    the importance of these factors changes over time. Qualitative judgement usually
    plays a very important role in the rating assignation process.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 评级过程中考虑了许多因素，包括政治、增长、外债、金融部门、公私部门结构、社会发展以及贸易。例如，标准普尔在六点量表上对国家的信用度进行五项关键因素的评分。然而，不同因素的权重以及这些因素的结合方式是未知的。此外，这些因素的重要性随时间变化。定性判断通常在评级分配过程中起着非常重要的作用。
- en: Concerns about the quality of ratings have acted as an incentive to researchers
    around the world over the last two decades. It is important to understand the
    determinants of ratings to reduce the dependency on CRAs and to make the assignation
    of credit ratings more objective.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 对评级质量的担忧在过去二十年里激励了世界各地的研究人员。了解评级的决定因素对于减少对信用评级机构的依赖以及使信用评级的分配更加客观至关重要。
- en: The replication of a credit rating is mainly based on different econometric
    models that try to find a set of macroeconomic variables to better explain external
    ratings. Nevertheless, credit rating studies have widely ignored qualitative and
    more subjective information. This additional information could complement the
    current quantitative macroeconomic information and improve the performance of
    credit rating models.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 信用评级的复制主要基于不同的计量经济学模型，试图找到一组宏观经济变量来更好地解释外部评级。然而，信用评级研究广泛忽视了定性和更为主观的信息。这些附加信息可以补充当前的定量宏观经济信息，并提高信用评级模型的性能。
- en: Clustering countries based on macroeconomic imbalances
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 根据宏观经济不平衡对国家进行聚类
- en: In this section, we will develop an unsupervised model to visually detect macroeconomic
    problems in countries and also understand a little more about the main drivers
    of credit ratings. We will start by creating a cluster of the countries with macroeconomic
    problems. In the next chapter, we will move on to predicting the credit ratings
    based on these clusters.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将开发一个无监督模型来直观地检测国家的宏观经济问题，并更深入地了解信用评级的主要驱动因素。我们将首先创建一个具有宏观经济问题的国家集群。在下一章中，我们将继续基于这些集群预测信用评级。
- en: Throughout this chapter, I've tried to make an effort to reiterate the code
    from the previous chapters.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我试图重复前几章中的代码。
- en: Let's get started!
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: Data collection
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据收集
- en: As in the previous model, we need to collect the largest amount of data possible.
    First, we need the macroeconomic indicators of countries to analyze the macroeconomic
    imbalances and predict the sovereign ratings.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前的模型一样，我们需要收集尽可能多的数据。首先，我们需要国家的宏观经济指标来分析宏观经济不平衡并预测主权评级。
- en: Downloading and viewing the data
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载和查看数据
- en: 'We will use the `wbstats` package, which provides structured access to all
    of the information that''s available from the World Bank API, including all annual,
    quarterly, and monthly data. In this package, the `wb_cachelist` function provides
    a snapshot of the available countries, indicators, and other relevant information,
    shown as follows:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用`wbstats`包，它提供了对从世界银行API获取的所有信息的结构化访问，包括所有年度、季度和月度数据。在这个包中，`wb_cachelist`函数提供了一个可用国家、指标和其他相关信息的快照，如下所示：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: More than 16,000 variables for more than 300 countries are available. The default
    language is English.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 超过16,000个变量适用于300多个国家。默认语言是英语。
- en: 'To search for different indicators, let''s use the `wbsearch` function. For
    example, we can search for all the indicators containing **Gross Domestic Product**
    (**GDP**), as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 要搜索不同的指标，请使用`wbsearch`函数。例如，我们可以搜索包含**国内生产总值**（**GDP**）的所有指标，如下所示：
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You can also download the data and specify the indicator, the starting date,
    and the end date, as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以下载数据并指定指标、开始日期和结束日期，如下所示：
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We have now downloaded the stock market returns for all countries. The first
    values belong to Argentina. It is also possible to obtain information just for
    specific countries. Let''s obtain the total population of the United States and
    Spain between 2015 to 2017, shown as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已下载了所有国家的股市回报率。前几个值属于阿根廷。也可以只为特定国家获取信息。让我们获取2015年至2017年美国和西班牙的总人口，如下所示：
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Variables are always obtained in rows, but this is not a very common way to
    present the information. With the `return_wide = TRUE` option, if more than one
    variable is obtained, they will be presented in columns. Let''s take a look at
    the following example:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 变量总是按行获取，但这并不是展示信息的一种常见方式。使用`return_wide = TRUE`选项，如果获取了多个变量，它们将以列的形式展示。让我们看一下以下示例：
- en: '[PRE4]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'If the latest available date of an indicator is unknown, the `mrv` parameter
    stands for the most recent value and takes an integer that corresponds to the
    number of most desired recent values. Let''s display the 10 most recent values
    of the stock market return for the United States, as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个指标的最新可用日期未知，`mrv`参数代表最新值，并取一个整数，对应于所需的最新的值的数量。让我们显示美国股市回报率的10个最新值，如下所示：
- en: '[PRE5]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The default date format is not useful for sorting or plotting. The `POSIXct`
    parameter adds the `date_ct` and `granularity` columns, making these tasks much
    easier.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 默认日期格式对排序或绘图没有用。`POSIXct`参数添加了`date_ct`和`granularity`列，使这些任务变得容易得多。
- en: 'Let''s take a look the evolution of military expenses in the United States
    over time as an example, shown as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以查看美国军事费用随时间演变的例子为例，如下所示：
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'You will get the following plot as an output:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 您将得到以下输出图：
- en: '![](img/8e81beff-d896-4c27-85ca-0ff9d4da2f12.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8e81beff-d896-4c27-85ca-0ff9d4da2f12.png)'
- en: We have seen that it is very easy to download information. To develop our model,
    however, we will not use all of the data. Now, let's define how many variables
    and countries and how much historical data we need.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到下载信息非常容易。然而，为了开发我们的模型，我们不会使用所有数据。现在，让我们定义我们需要多少变量、国家和历史数据。
- en: Streamlining data
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据简化
- en: 'Let''s see the list of countries in the World Bank database using the following
    code:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用以下代码查看世界银行数据库中的国家列表：
- en: '[PRE7]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Although the list is large, some countries belong to unions of several countries,
    such as the Arab World or the European Union. We will need to make a selection
    of countries.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管列表很长，但一些国家属于几个国家的联盟，例如阿拉伯世界或欧盟。我们需要对这些国家进行选择。
- en: 'Let''s look at a list of the available indicators, as follows:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们查看以下可用的指标列表：
- en: '[PRE8]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The list of indicators is even bigger (there are more than 16,000 entries),
    but we will select the most important ones, as shown in the following snippet.
    These are obtained using the rating methodology guidelines that are provided by
    the main credit rating agencies:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 指标列表甚至更大（有超过16,000个条目），但我们将选择其中最重要的，如下面的片段所示。这些指标是通过主要信用评级机构提供的评级方法指南获得的：
- en: '[PRE9]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The acquired list of indicators is as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的指标列表如下：
- en: '[PRE10]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Let''s download the historical data for these indicators from 2000 to 2018\.
    This will take about five minutes using the following code:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从2000年到2018年下载这些指标的历史数据。使用以下代码，这将花费大约五分钟：
- en: '[PRE11]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Let''s get the structure of our data with the following:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们如下获取我们数据的结构：
- en: '[PRE12]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The complete output is as follows:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的输出如下：
- en: '[PRE13]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'As you can see, most of the variables display missing values in the first few
    rows. Let''s acquire a list of the number of times a country appears in the preceding
    list:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，大多数变量在前面几行显示缺失值。让我们获取一个国家在前面的列表中出现的次数列表：
- en: '[PRE14]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The total number of countries this data includes can be found as follows:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据包含的国家总数如下：
- en: '[PRE15]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'We can explore our missing values as follows:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以如下探索我们的缺失值：
- en: '[PRE16]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The output that we will acquire will be as follows:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将获得以下输出：
- en: '![](img/422f125c-c85d-457f-8d60-f1439629fac8.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/422f125c-c85d-457f-8d60-f1439629fac8.png)'
- en: The graph that's obtained is not very pretty because there's a large number
    of variables. Although information is easily obtained, many of the variables display
    a high number of missing values. This is because the information is not updated
    and data for the most recent years is unavailable.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的图表不太美观，因为变量数量众多。虽然信息容易获取，但许多变量显示大量缺失值。这是因为信息未更新，且最近几年的数据不可用。
- en: 'To view the results, you should manually select the relevant variables for
    different official sources and merge them in an Excel file, which will be used
    for our model development. First, remove all of the objects in the workspace,
    as follows:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看结果，您应手动选择不同官方来源的相关变量并在Excel文件中合并它们，该文件将用于我们的模型开发。首先，按照如下操作删除工作区中的所有对象：
- en: '[PRE17]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Now, load the new data sample into R, as follows:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，将新的数据样本加载到R中，如下：
- en: '[PRE18]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The file contains the following information:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 该文件包含以下信息：
- en: '[PRE19]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'As the `str` function shows, the data sample contains `224` observations and
    the following `14` variables:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如`str`函数所示，数据样本包含`224`个观测值和以下`14`个变量：
- en: '`Year`: The reference date of the year-end'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Year`: 年末的参考日期'
- en: '`CountryISO`: The international standard country code'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CountryISO`: 国际标准国家代码'
- en: '`CountryName`: The name of the country'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CountryName`: 国家的名称'
- en: '`CARA`: The current account balance of a country'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CARA`: 一个国家的经常账户余额'
- en: '`DCPI`: The consumer prices growth rate'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DCPI`: 消费者价格增长率'
- en: '`DGDP`: The GDP growth'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DGDP`: GDP增长率'
- en: '`ILMA`: The international reserves'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ILMA`: 国际储备'
- en: '`PSBR`: The budget balance as a percentage of the GDP'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PSBR`: 预算平衡占GDP的百分比'
- en: '`PUDP`: The public debt as a percentage of the GDP'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PUDP`: 公共债务占GDP的百分比'
- en: '`TDRA`: Total imports less total exports of goods and services as a percentage
    of the GDP'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TDRA`: 总进口减去总出口的商品和服务占GDP的百分比'
- en: '`YPCA`: The GDP per head'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`YPCA`: 人均GDP'
- en: '`MEANWGI`: The mean of the six worldwide governance indicators'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MEANWGI`: 六个全球治理指标的平均值'
- en: '`YearsFromLastDefault`: The amount of time elapsed since the last time the
    country defaulted'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`YearsFromLastDefault`: 自上次国家违约以来经过的时间'
- en: '`RatingMayT1`: The credit rating of the country one year after the macroeconomic
    information'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RatingMayT1`: 宏观经济信息一年后国家的信用评级'
- en: 'You can obtain additional data from the following sources:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从以下来源获取更多数据：
- en: '[https://www.worldbank.org/](https://www.worldbank.org/)'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.worldbank.org/](https://www.worldbank.org/)'
- en: '[https://www.oecd.org/](https://www.oecd.org/)'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.oecd.org/](https://www.oecd.org/)'
- en: '[https://ec.europa.eu/eurostat](https://ec.europa.eu/eurostat)'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://ec.europa.eu/eurostat](https://ec.europa.eu/eurostat)'
- en: '[https://info.worldbank.org/governance/wgi](https://info.worldbank.org/governance/wgi)'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://info.worldbank.org/governance/wgi](https://info.worldbank.org/governance/wgi)'
- en: '[https://www.cia.gov/library/publications/the-world-factbook](https://www.cia.gov/library/publications/the-world-factbook)'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.cia.gov/library/publications/the-world-factbook](https://www.cia.gov/library/publications/the-world-factbook)'
- en: '[https://www.imf.org/](https://www.imf.org/)'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.imf.org/](https://www.imf.org/)'
- en: '[https://www.oecd.org/](https://www.oecd.org/)'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.oecd.org/](https://www.oecd.org/)'
- en: All of the considered variables have been widely used in previous studies or
    by CRAs. We are using various World Bank governance indicators in our list of
    variables, including the `MEANWGI` variable. This variable is calculated as the
    simple average of six different indicators that are provided by the World Bank.
    These measure topics such as political stability, level of violence, and control
    of corruption. The World Bank calculates these aggregate indicators based on surveys
    by different non-governmental organizations, international organizations, or private
    sector firms. The higher the value of each indicator, the highest the quality
    or the score of a country in the indicator.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 所考虑的所有变量在先前的研究或由信用评级机构（CRAs）使用中已被广泛采用。在我们的变量列表中，我们使用了世界银行的多种治理指标，包括`MEANWGI`变量。该变量是通过世界银行提供的六个不同指标计算得出的简单平均值。这些指标衡量的话题包括政治稳定性、暴力水平和对腐败的控制。世界银行根据不同非政府组织、国际组织或私营部门公司的调查来计算这些综合指标。每个指标的价值越高，一个国家在该指标中的质量或评分就越高。
- en: The dataset that will be used in the remaining part of this chapter collects
    the credit rating at the end of May for each country over several years. The macroeconomic
    information represents the economic situation of each country at the end of the
    previous year. Countries publish this information in the first or second quarter
    of the year, so the most updated macroeconomic information taken every May belongs
    to the previous year.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 本章剩余部分将使用的数据集收集了多年来每个国家在五月底的信用评级。宏观经济信息代表了每个国家上一年年末的经济状况。各国在年初的第一季度或第二季度发布这些信息，因此每年五月份获取的最新宏观经济信息属于上一年。
- en: Studying the data
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 研究数据
- en: Our first objective will be to detect clusters of countries according to their
    macroeconomic situation and to predict ratings for those countries. We will then
    assess whether the qualitative information that's included in the country reports
    issued by the European Commission are useful to predict country ratings. These
    reports are usually issued in the first months of each year, so they should be
    influential in the credit ratings around May as well.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的首要目标将是根据各国的宏观经济状况检测国家集群，并预测这些国家的评级。然后，我们将评估欧洲委员会发布的国家报告中的定性信息是否有助于预测国家评级。这些报告通常在每年的前几个月发布，因此它们应该在五月的信用评级中也有影响力。
- en: 'Again, we must start by analyzing the following dataset:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，我们必须从分析以下数据集开始：
- en: '[PRE20]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'There are no missing values in this dataset. Let''s explore our data, as follows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据集中没有缺失值。让我们按以下方式探索我们的数据：
- en: '[PRE21]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The macroeconomic information for the different countries is available from
    the years 2010 to 2017, as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 不同国家的宏观经济信息从2010年到2017年可用，如下所示：
- en: '[PRE22]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The following is the list of the 28 countries in the dataset:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是需要考虑的28个国家的列表：
- en: '[PRE23]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Acquiring the target variable
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取目标变量
- en: 'The target variable will be the credit rating of each country. Let''s see the
    different values of the target variables with the following code:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 目标变量将是每个国家的信用评级。让我们用以下代码查看目标变量的不同值：
- en: '[PRE24]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'As we can see, the scale only takes six different grades, and they are numerical,
    not alphabetical. The following code creates a table to display the assigned numbers
    for each rating category:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，该量表只包含六个不同的等级，它们是数字的，而不是字母的。以下代码创建了一个表格来显示每个评级类别的分配数字：
- en: '[PRE25]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The following mapping table will be used to reduce the number of all possible
    credit rating levels into only six categories:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 以下映射表将被用于将所有可能的信用评级水平减少到仅六个类别：
- en: '[PRE26]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Thus, a value of `6` is associated with the highest-rated grade (`AAA`), while
    `1` corresponds to the worst-rated grade. This mapping is done to reduce the number
    of different labels and to obtain a less granular target variable.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，`6`的值与最高评级等级（`AAA`）相关联，而`1`则对应最低评级等级。这种映射是为了减少不同标签的数量，并获得一个更细粒度的目标变量。
- en: 'Let''s take a look at the distribution of our target variable graphically with
    the following code:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用以下代码查看目标变量的分布情况：
- en: '[PRE27]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'You will see a plot that looks as follows:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到一个如下所示的图表：
- en: '![](img/c327657f-e36f-416e-8581-b9e93ec68272.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c327657f-e36f-416e-8581-b9e93ec68272.png)'
- en: Acquiring the credit quality
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取信用质量
- en: 'In May 2018, the credit ratings for each European country can be found as follows:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 2018年5月，每个欧洲国家的信用评级如下：
- en: '[PRE28]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The credit quality table for every country is as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 每个国家的信用质量表如下：
- en: '[PRE29]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Denmark, Germany, Luxembourg, Netherlands, and Sweden display the highest credit
    quality. On the other hand, Greece is the country with the lowest solvency in
    the European Union, according to Standard & Poor's.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 丹麦、德国、卢森堡、荷兰和瑞典显示出最高的信用质量。另一方面，根据标准普尔的数据，希腊是欧盟中偿债能力最低的国家。
- en: Displaying the credit ratings on a map
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在地图上显示信用评级
- en: 'Using the `rworldmap` package, we can create a map and display the credit ratings
    by country. Let''s focus on the last available credit rating (from May 2018),
    as follows:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`rworldmap`包，我们可以创建一个地图并按国家显示信用评级。让我们关注最后可用的信用评级（2018年5月），如下所示：
- en: '[PRE30]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'A quick summary can be displayed as follows:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 可以快速总结如下：
- en: '[PRE31]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Assign the axes limits, as follows:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 指定轴的极限，如下所示：
- en: '[PRE32]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'A very pretty output such as the following will be displayed:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 将会显示如下非常漂亮的输出：
- en: '![](img/112a3abb-7623-4214-bf75-470d273bc11d.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/112a3abb-7623-4214-bf75-470d273bc11d.png)'
- en: Carrying out a descriptive analysis of data
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行数据的描述性分析
- en: 'We should now carry out a descriptive analysis, just like we did in the previous
    chapters, using the following code:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在应该进行描述性分析，就像我们在前面的章节中所做的那样，使用以下代码：
- en: '[PRE33]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The acquired output is as follows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的输出如下：
- en: '[PRE34]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Plot these variables, as follows:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式绘制这些变量：
- en: '[PRE35]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The following graphs are shown:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图表如下所示：
- en: '![](img/8676bacb-f5b1-41d1-b78e-63ed8b070fc1.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8676bacb-f5b1-41d1-b78e-63ed8b070fc1.png)'
- en: 'Once we have studied our dataset, we can start to work with our data. Save
    a backup of your workspace. If something goes wrong, it is always possible to
    load the backups and continue with the code, as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们研究过我们的数据集，我们就可以开始处理我们的数据了。保存工作区的一个备份。如果出了问题，总是可以加载备份并继续使用代码，如下所示：
- en: '[PRE36]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: Detecting macroeconomic imbalances
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测宏观经济失衡
- en: In this section, we will use a technique called **self-organizing maps** (**SOM**)
    to perform a classification of the European countries depending on their solvency
    by using macroeconomic variables.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用称为**自组织映射**（**SOM**）的技术，根据宏观经济变量对欧洲国家进行分类。
- en: The self-organizing maps technique
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自组织映射技术
- en: 'The identification of similarities and differences between countries is crucial
    for detecting imbalances and taking corrective measures to avoid the propagation
    of financial crises. SOM is an unsupervised neural network that is very useful
    for **exploratory data analysis** (**EDA**). The unsupervised nature of SOM is
    due to the fact that the network is able to learn patterns in the data without
    using a target variable. Therefore, the different neurons contained in the network
    self-organize themselves using the input data. The following diagram is the most
    common representation of a SOM:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 识别国家之间的相似性和差异性对于检测失衡并采取纠正措施以避免金融危机的传播至关重要。SOM是一种非常适用于**探索性数据分析**（**EDA**）的无监督神经网络。SOM的无监督性质是由于网络能够学习数据中的模式，而不使用目标变量。因此，网络中包含的不同神经元通过输入数据自我组织。以下图是SOM最常见的表示形式：
- en: '![](img/c1b4f1e2-6761-4fdc-8199-d381632baf25.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c1b4f1e2-6761-4fdc-8199-d381632baf25.png)'
- en: 'As we can see in the preceding diagram, there are two main layers of neurons:
    an input layer and an output layer. The input layer is the input data we send
    to the network, which is the data to be analyzed. The output layer is a bidimensional
    map in which all our data will be placed. The data in the input layer is connected
    to all the neurons of the output layer through synaptic weights. In this way,
    the information that''s provided by each neuron of the input layer is transmitted
    to all of the neurons of the output layer.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，存在两个主要的神经元层：一个输入层和一个输出层。输入层是我们发送到网络的输入数据，即要分析的数据。输出层是一个二维地图，其中将放置所有我们的数据。输入层中的数据通过突触权重连接到输出层的所有神经元。这样，输入层每个神经元提供的信息就传递到了输出层的所有神经元。
- en: The network tries to find the neuron of the output layer with the most similar
    synaptic weights to the values of the input layer neurons. The most similar weights
    have the lowest distances between the input data and the prototype of weights
    that were created in the output layer. These weights are initially created randomly.
    Once the distances are calculated, the winning neuron is identified. This neuron
    is the one with the least difference or the shortest Euclidean distance between
    its weights and the set of inputs.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 网络试图找到输出层中与输入层神经元值最相似的突触权重神经元。最相似的权重在输入数据和输出层中创建的原型权重之间具有最低的距离。这些权重最初是随机创建的。一旦计算出距离，就会识别出获胜神经元。这个神经元是权重与输入集之间差异最小或欧几里得距离最短的神经元。
- en: Once the winning neuron is identified, its weights will be adjusted with a learning
    rule to proxy these weights to the input pattern that has made the neuron win.
    In this way, the neuron with the weights that are the closest to the input pattern
    is updated to become even closer. As a result, each neuron in the output layer
    specializes in this input pattern.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦识别出获胜神经元，其权重将使用学习规则进行调整，以将这些权重代理到使神经元获胜的输入模式。这样，权重最接近输入模式的神经元被更新，以变得更加接近。因此，输出层中的每个神经元都专门化于这个输入模式。
- en: The winning neuron is not the unique neuron that updates its weights. A neighborhood
    function is also used to update not only the weights of the winning neuron but
    the neighbor neurons to localize similar patterns. This neighborhood radio decreases
    with the number of iterations of the model that are carried out to achieve a better
    specialization of each neuron.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 获胜神经元不是唯一更新其权重的神经元。还使用邻域函数来更新获胜神经元及其邻域神经元的权重，以定位相似的模式。随着模型迭代次数的增加，这个邻域半径会减小，以实现每个神经元的更好专业化。
- en: Training the SOM
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 训练SOM
- en: It's now time to train the SOM using R. For that, we will use the `kohonen`
    package. The name of the package comes from Teuvo Kohonen, who first introduced
    this algorithm.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候使用R来训练SOM了。为此，我们将使用`kohonen`包。这个包的名字来源于Teuvo Kohonen，他首先介绍了这个算法。
- en: 'As SOM is mainly based on Euclidean distances, it is recommended to standardize
    your variables. We will use the `caret` package for this, as follows:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 由于SOM主要基于欧几里得距离，建议对变量进行标准化。我们将使用`caret`包来完成这项工作，如下所示：
- en: '[PRE37]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'This will create a data frame with the transformed variables. Then, we will
    add the country name and ratings to this transformed data frame, as follows:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这将创建一个包含转换变量的数据框。然后，我们将国家名称和评分添加到这个转换数据框中，如下所示：
- en: '[PRE38]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Now, it is time to train the map. The first layer of the network will have
    ten input patterns or ten macroeconomic variables. Our output layer will be fixed
    as a bidimensional map that is 6×5 in size. This size was obtained after several
    tests, shown as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候训练映射了。网络的第一层将有十个输入模式或十个宏观经济变量。我们的输出层将被固定为一个6×5大小的二维映射。这个大小是在多次测试后获得的，如下所示：
- en: '[PRE39]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: After 800 iterations, the training process finishes. Different plots can be
    obtained from the trained map.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 经过800次迭代后，训练过程结束。可以从训练好的映射中获取不同的图表。
- en: 'Let''s display the mean distance to the closest codebook vector during the
    training, using the following code:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用以下代码显示训练过程中到最近码本向量的平均距离：
- en: '[PRE40]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'This will plot the following graph:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 这将绘制以下图表：
- en: '![](img/558810d6-92ac-4ffd-933c-393037e47f91.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/558810d6-92ac-4ffd-933c-393037e47f91.png)'
- en: We can see that the error of the training process, measured as the mean distance
    to the closest unit, is reduced over the course of the iterations. If the number
    of iterations is high enough, the algorithm converges.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，训练过程中的误差，即测量到最近单元的平均距离，在迭代过程中是逐渐减少的。如果迭代次数足够高，算法就会收敛。
- en: 'Moreover, it is possible to visualize the map and count the number of countries
    that are classified in each neuron:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还可以可视化映射并计算每个神经元中分类的国家数量：
- en: '[PRE41]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'A graphical representation of the node counts can be seen in the following
    plot:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 节点计数的图形表示可以在以下图表中看到：
- en: '![](img/c32b62bb-8572-4465-9121-44778712c5fd.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c32b62bb-8572-4465-9121-44778712c5fd.png)'
- en: In the graph, 30 cells (6x5 in size) are marked in a different color, depending
    on the number of countries classified. Grey cells indicate that no countries have
    been classified in this cell. The larger the number of cells, the lower the number
    of countries in each neuron, obtaining a more granular map.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在图中，根据分类的国家数量，用不同颜色标记了30个单元格（大小为6x5）。灰色单元格表示在这个单元格中没有国家被分类。单元格数量越多，每个神经元中的国家数量就越少，从而获得更细粒度的地图。
- en: 'In the following plot, the average distance of the countries mapped to each
    unit in the map is shown. The smaller the distances, the better the countries
    are represented by the codebook vectors, as follows:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的图中，显示了映射到地图中每个单元的国家之间的平均距离。距离越小，表示国家由代码簿向量表示得越好，如下所示：
- en: '[PRE42]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'The node quality plot is as follows:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 节点质量图如下：
- en: '![](img/b2b328ca-f45f-40f9-aeef-300da8c71af5.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b2b328ca-f45f-40f9-aeef-300da8c71af5.png)'
- en: The weight vectors across the map can also be visualized. This is useful to
    uncover patterns in the distribution of the different countries.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 地图上的权重向量也可以被可视化。这有助于揭示不同国家分布中的模式。
- en: 'The node weight vectors, or codes, are made up of normalized values of the
    original variables that are used to generate the SOM:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 节点权重向量或代码由用于生成SOM的原变量的归一化值组成：
- en: '[PRE43]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The output of the preceding code is displayed in the following plot:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 前面代码的输出显示在以下图表中：
- en: '![](img/259a13dd-2d2f-4301-a7b8-276027289060.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](img/259a13dd-2d2f-4301-a7b8-276027289060.png)'
- en: 'From the preceding diagram, it is possible to extract the characteristics of
    countries that have been placed in each cell. It is also possible to visualize
    how individual variables are distributed on the map. For example, let''s look
    at the distribution of the `MEANWGI` variable, as follows:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的图表中，可以提取出被放置在每个单元格中的国家的特征。还可以可视化单个变量在地图上的分布情况。例如，让我们看一下`MEANWGI`变量的分布，如下所示：
- en: '[PRE44]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The trained map is plotted and the cells are colored depending on the values
    of this variable for the countries placed on them, as shown in the following diagram:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 训练好的地图被绘制出来，并且根据这些地图上国家所在位置的变量值来着色单元格，如下所示：
- en: '![](img/2ba3695b-905c-4b5d-b36f-7599317b7363.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2ba3695b-905c-4b5d-b36f-7599317b7363.png)'
- en: According to the preceding map, countries with higher values in this variable
    will be located in the top-right part of the map.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前面的地图，该变量值较高的国家将位于地图的右上角。
- en: 'Now, let''s see where the countries are located by using the macroeconomic
    information from December 2017 with the following code:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们使用以下代码，利用2017年12月的宏观经济信息来查看这些国家的位置：
- en: '[PRE45]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'A map will be displayed, where countries will be placed according to their
    economic variables, as shown in the following diagram:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 将根据经济变量将国家放置在地图上的地图将显示如下：
- en: '![](img/d1901549-bc48-42a8-99d4-6b96b4f30348.png)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d1901549-bc48-42a8-99d4-6b96b4f30348.png)'
- en: 'Closer countries display similar values in macroeconomic variables. Thus, Greece,
    Portugal, and Cyprus are very close on the map. These countries have had important
    problems in the last few years as a consequence of financial crises. Countries
    such as Germany, France, and the United Kingdom are also similar, based on the
    macroeconomic information. Finally, we can create different clusters or groups
    on this map by taking into account the codebook vectors of the trained map. Hierarchical
    clustering can be used to select the number of groups. With the following code,
    we will obtain five different groups of countries:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在宏观经济变量中值相似的国家更靠近。因此，希腊、葡萄牙和塞浦路斯在地图上非常接近。这些国家在过去几年中由于金融危机而遇到了重要问题。德国、法国和英国等国家根据宏观经济信息也相似。最后，我们可以通过考虑训练地图的代码簿向量来在这个地图上创建不同的聚类或组。可以使用层次聚类来选择组数。以下代码将获得五个不同的国家组：
- en: '[PRE46]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The recently created groups can be visualized on the map by running the following
    code:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 通过运行以下代码，可以在地图上可视化最近创建的组：
- en: '[PRE47]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'The following map is plotted:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的地图被绘制出来：
- en: '![](img/5a0e4765-bcf2-43bb-b798-4eb542fae82b.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5a0e4765-bcf2-43bb-b798-4eb542fae82b.jpg)'
- en: 'The preceding diagram gives us the following:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的图表给出了以下信息：
- en: '**Group 1**: Countries such as Portugal, Greece, and Cyprus.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组1**：葡萄牙、希腊和塞浦路斯等国家。'
- en: '**Group 2**: Countries such as Poland, Malta, Bulgaria, and Spain. In general,
    this is a cluster of countries from Western Europe and other countries with a
    weak economic situation. This group is in a better shape than the previous group.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第二组**：包括波兰、马耳他、保加利亚和西班牙等国家。总的来说，这是一个由西欧和其他经济状况较弱的国家组成的集群。这个组比之前的组状况更好。'
- en: '**Group 3**: More solvent countries in the European Union, such as the UK,
    Germany, and France.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第三组**：欧盟中更富裕的国家，如英国、德国和法国。'
- en: '**Group 4** and **Group 5**: These groups have one cell each, one of which
    contains Ireland. Ireland was in a deep economic crisis a few years back, but
    its situation is very different now. The difference is to such an extent that
    it cannot be included in any other group of countries.'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第四组**和**第五组**：这些组各有一个单元格，其中一个包含爱尔兰。爱尔兰几年前经历了严重的经济危机，但现在的情况非常不同。这种差异如此之大，以至于它不能被包含在任何其他国家的组中。'
- en: 'As usual, you can now back up your workspace using the following code:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 如往常一样，您现在可以使用以下代码备份您的 工作空间：
- en: '[PRE48]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: With this simple clustering approach, it is possible to visualize the different
    situations of each country in the European Union.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种简单的聚类方法，可以可视化欧盟每个国家的不同情况。
- en: Summary
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we introduced the economic crisis that's experienced by different
    European countries. We obtained the data and analyzed it. Then, we developed a
    visual tool to compare the countries using different variables at the same time.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了不同欧洲国家经历的经济危机。我们获得了数据并对其进行了分析。然后，我们开发了一个可视化工具，同时使用不同的变量来比较各国。
- en: In the next chapter, we will try to create a rating model. We will assign different
    scores to countries according to their economic situations. Let's see if we are
    able to predict the ratings of different countries!
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将尝试创建一个评级模型。我们将根据各国的经济状况分配不同的分数。让我们看看我们是否能够预测不同国家的评级！
