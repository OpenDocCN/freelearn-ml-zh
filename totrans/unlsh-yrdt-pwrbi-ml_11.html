<html><head></head><body>
		<div id="_idContainer191">
			<h1 id="_idParaDest-147" class="chapter-number"><a id="_idTextAnchor152"/>11</h1>
			<h1 id="_idParaDest-148"><a id="_idTextAnchor153"/>Applying Power BI ML Models</h1>
			<p>In <a href="B19500_10.xhtml#_idTextAnchor139"><span class="No-Break"><em class="italic">Chapter 10</em></span></a>, we reviewed the results of training and testing all three of your ML models. Your options for future iterations and plans for your ML models were reviewed and discussed. The Predict Damage ML and Predict Height ML models had promising testing results, while the Predict Size ML model had room for improvement. For all three of your models, the best next steps were to review the results with your stakeholders, and, if possible, meet with your data science team to determine whether more advanced tooling and techniques could improve upon your <span class="No-Break">initial work.</span></p>
			<p>For this chapter, you will apply the ML models that you built to new data from the FAA Wildlife Strike database. The data used up to this point in the book ended on October 16, 2022. The new data for this chapter will be reports that have been added to the publicly available data between that date and March 11, 2023. The purpose of this chapter will be to review the process through which you can bring in new data and automate the process to score it and make predictions with your ML models. At the end, you will review the results of your newly scored data to see whether the results are similar to the ML testing done on the ML models by <span class="No-Break">Power BI.</span></p>
			<h1 id="_idParaDest-149"><a id="_idTextAnchor154"/>Technical requirements</h1>
			<p>As always, make sure you have access to <span class="No-Break">the following:</span></p>
			<ul>
				<li>The FAA Wildlife Strike data files from either the FAA website or the Packt <span class="No-Break">GitHub site</span></li>
				<li>A Power BI <span class="No-Break">Pro license</span></li>
				<li>One of the following Power BI licensing options for access to Power <span class="No-Break">BI dataflows:</span><ul><li>Power <span class="No-Break">BI Premium</span></li><li>Power BI Premium <span class="No-Break">Per User</span></li></ul></li>
				<li>One of the following options for getting data into the Power BI <span class="No-Break">cloud service:</span><ul><li>Microsoft OneDrive (with connectivity to the Power BI <span class="No-Break">cloud service)</span></li><li>Microsoft Access + Power <span class="No-Break">BI Gateway</span></li><li>Azure Data Lake (with connectivity to the Power BI <span class="No-Break">cloud service)</span></li></ul></li>
				<li>Power BI Desktop April 2023 or later (no <span class="No-Break">licenses required)</span></li>
			</ul>
			<h1 id="_idParaDest-150"><a id="_idTextAnchor155"/>Bringing the new FAA Wildlife strike data into Power BI</h1>
			<p>Meetings <a id="_idIndexMarker542"/>with project stakeholders <a id="_idIndexMarker543"/>and data science teams will determine the best next steps for your Power BI ML models. In the meantime, you can apply these ML models to new data and then compare the predictions to real results. Taking these steps will help you learn how to add your ML models to an automated refresh process in <span class="No-Break">Power BI.</span></p>
			<h2 id="_idParaDest-151"><a id="_idTextAnchor156"/>Downloading and configuring the new FAA Wildlife Strike data</h2>
			<p>As in <a href="B19500_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>, you <a id="_idIndexMarker544"/>should begin by downloading a new <a id="_idIndexMarker545"/>copy of the FAA Wildlife Strike data. The copy you’ve been using to date for this book contained data through October 16, 2022. Now, you’ll pull in new data to score with the Power BI ML models that were trained and tested with historical data. The new file contains data through March 1, 2023. You can download a copy of the text file used for this part of the book at the Packt GitHub site <span class="No-Break">here: </span><a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11/STRIKE_REPORTS_new.txt"><span class="No-Break">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11/STRIKE_REPORTS_new.txt</span></a><span class="No-Break">.</span></p>
			<p>In a real-world data project, the most common path of action would be to either update the source file with the newer version of the file or have an automated incremental refresh process data from the source on a schedule. Since we are just using this data to test against your ML models, and since this is a simple workshop, the instructions for this book will pull in the new data as a separate query in a dataflow. As a separate query, the original source data will still exist unchanged in case source-to-target comparisons for the ML models <span class="No-Break">are needed.</span></p>
			<p>Power BI can automate data pulls from many sources, but the source of the FAA Wildlife Strike data is an Access database in a zip file that cannot easily be pulled into Power BI automatically. If you’d like to automate the process of downloading the FAA Wildlife Strike data from the web for your own future use, you’ll need to configure a nightly pull using a tool such as Azure Data Factory. Azure Data Factory and other data movement tools are outside the scope of this book, but plenty of online documentation should be able to guide you through the process of a nightly pull that serves up a file for storage in a destination such as Azure Data Lake or Azure <span class="No-Break">SQL Database.</span></p>
			<p>For the <a id="_idIndexMarker546"/>example provided in the book, an assumption <a id="_idIndexMarker547"/>will be made that the text file from the Packt GitHub site was downloaded and added to OneDrive. If you use another method, you should be able to easily adjust the source of the Power BI dataflow in the <span class="No-Break">proceeding instructions.</span></p>
			<h2 id="_idParaDest-152"><a id="_idTextAnchor157"/>Adding new FAA Wildlife Strike data to the Strike Reports dataflow</h2>
			<p>Once the new <a id="_idIndexMarker548"/>file of FAA Wildlife Strike<a id="_idIndexMarker549"/> data is in OneDrive, you can add it to the Power BI Cloud service using dataflows. First, open up the dataflow named <strong class="bold">Strike Reports</strong> and navigate to the <strong class="bold">Edit Tables</strong> screen. Follow these steps to add the new data to the <strong class="bold">Raw </strong><span class="No-Break"><strong class="bold">Data</strong></span><span class="No-Break"> group:</span></p>
			<ol>
				<li>Go to <strong class="bold">Get Data</strong> | <span class="No-Break"><strong class="bold">Text/CSV</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Browse OneDrive…</strong> | select the <span class="No-Break"><strong class="source-inline">STRIKE_REPORTS_new.txt</strong></span><span class="No-Break"> file.</span></li>
				<li>Click <strong class="bold">Select</strong> and then <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li><span class="No-Break">Click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
				<li>Move the query to the <strong class="bold">Raw </strong><span class="No-Break"><strong class="bold">Data</strong></span><span class="No-Break"> group.</span></li>
				<li>If <strong class="source-inline">Changed column type</strong> was added to <strong class="bold">Applied steps</strong>, <span class="No-Break">remove it.</span></li>
				<li>Rename the query <strong class="source-inline">Strike </strong><span class="No-Break"><strong class="source-inline">Reports New</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Now, you can add a version of the new strike reports query to the <strong class="bold">Curated Queries</strong> group, which will be prepped for use with <span class="No-Break">ML queries.</span></p>
			<ol>
				<li value="8">Right-click on <strong class="bold">Strike Reports New</strong> and <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Reference</strong></span><span class="No-Break">.</span></li>
				<li>Move the new file to the <strong class="bold">Curated Report </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>Rename the file <strong class="source-inline">Strike Reports </strong><span class="No-Break"><strong class="source-inline">Curated New</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Next, you<a id="_idIndexMarker550"/> replicate the logic of the <strong class="bold">Strike Reports Curated</strong> query and also filter the new query so that it only contains new data added to the FAA Wildlife Strike database after 10/16/2022. You can cut and paste <a id="_idIndexMarker551"/>M code to do this, or just copy and paste the code for <strong class="source-inline">02 Curated Data – Strike Reports Curated New.M</strong> from the Packt GitHub site at this <span class="No-Break">link: </span><a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11"><span class="No-Break">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11</span></a><span class="No-Break">.</span></p>
			<p>Your <strong class="bold">Strike Reports</strong> dataflow should now look <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer170" class="IMG---Figure">
					<img src="image/B19500_11_001.jpg" alt="Figure 11.1 – The Strike Reports dataflow with queries for new data added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.1 – The Strike Reports dataflow with queries for new data added</p>
			<p>Once you’ve<a id="_idIndexMarker552"/> added the new queries, go ahead and process the dataflow. Now you are ready to move on to the <strong class="bold">ML Queries</strong> dataflow, which will be used to prep the data for Power BI ML. You will apply the same<a id="_idIndexMarker553"/> filter and transformation criteria to the new data before running it through the ML models to <span class="No-Break">be scored.</span></p>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor158"/>Transforming the new data to prep it for scoring with Power BI ML queries</h2>
			<p>In order to prep <a id="_idIndexMarker554"/>the new FAA Wildlife Strike data to be scored by the three Power BI ML models, start by <a id="_idIndexMarker555"/>opening up the <strong class="bold">Edit Tables</strong> view for the <strong class="bold">ML Queries</strong> dataflow. Once it’s open, follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Select <strong class="bold">Get data</strong> | <strong class="bold">Dataflows</strong>, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li>Select <strong class="bold">Strike Reports Curated New</strong>, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
				<li>Move the new query to the <span class="No-Break"><strong class="bold">Sources</strong></span><span class="No-Break"> group.</span></li>
				<li>Right-click <strong class="bold">Strike Reports Curated New</strong> and uncheck <strong class="bold">Enable load</strong> so that you don’t store a duplicate copy of <span class="No-Break">the data.</span></li>
			</ol>
			<p>Now you are ready to create new queries that will be transformed and filtered to meet the criteria of your Power BI <span class="No-Break">ML models!</span></p>
			<p>Your next step is to recreate the logic that was created for each of the three ML models, and then apply that logic to the new FAA Wildlife Strike data. The ML models are trained for specific filter and transformation criteria applied to rows of data through 10/16/2022. You will be applying that same filter and transformation steps to the data that was added to the database after 10/16/2022 so that it can be scored by the <span class="No-Break">ML models.</span></p>
			<p>Rather than walking through the process of cutting and pasting from the existing queries, you can use the M queries from the Packt GitHub repository at this link: <a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-11</a>. Follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Create a <a id="_idIndexMarker556"/>new group<a id="_idIndexMarker557"/> in the <strong class="bold">ML Queries</strong> dataflow called <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Scoring Queries</strong></span><span class="No-Break">.</span></li>
				<li>Select <strong class="bold">Get data</strong> | <span class="No-Break"><strong class="bold">Blank query</strong></span><span class="No-Break">.</span></li>
				<li>Copy the M code from the Packt GitHub site from the query titled <strong class="source-inline">03 ML Scoring Queries - Predict Damage </strong><span class="No-Break"><strong class="source-inline">ML Score.M</strong></span><span class="No-Break">.</span></li>
				<li>Paste that code into the blank query field and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li>Rename the query <strong class="source-inline">Predict Damage ML Score</strong> and move it to the <strong class="bold">ML Scoring </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>Repeat <em class="italic">steps 2-5</em> for the query from the Packt GitHub site named <strong class="source-inline">04 ML Scoring Queries - Predict Size ML Score.M</strong> and name the query <strong class="source-inline">Predict Size </strong><span class="No-Break"><strong class="source-inline">ML Score</strong></span><span class="No-Break">.</span></li>
				<li>Repeat <em class="italic">steps 2-5</em> for the query from the Packt GitHub site named <strong class="source-inline">05 ML Scoring Queries - Predict Height ML Score.M</strong> and name the query <strong class="source-inline">Predict Height </strong><span class="No-Break"><strong class="source-inline">ML Score</strong></span><span class="No-Break">.</span></li>
				<li>Click on <strong class="bold">Save &amp; close</strong> to save and close <span class="No-Break">your dataflow.</span></li>
			</ol>
			<p>Your <strong class="bold">ML Queries</strong> dataflow<a id="_idIndexMarker558"/> should now<a id="_idIndexMarker559"/> look <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer171" class="IMG---Figure">
					<img src="image/B19500_11_002.jpg" alt="Figure 11.2 – The new group of queries added that will be used to score the new data with Power BI ML models"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.2 – The new group of queries added that will be used to score the new data with Power BI ML models</p>
			<p>Now you <a id="_idIndexMarker560"/>have the new FAA Wildlife Strike data ready to go for scoring with Power BI ML models! The <a id="_idIndexMarker561"/>new data, which was not used to train or test the original ML models, and which was added to the source database after the original data, has now been prepped for scoring so that you can evaluate the utility of your ML models when used with newly <span class="No-Break">generated data.</span></p>
			<h1 id="_idParaDest-154"><a id="_idTextAnchor159"/>Applying Power BI ML models to score new FAA Wildlife Strike data</h1>
			<p>After 11 <a id="_idIndexMarker562"/>chapters of work, you <a id="_idIndexMarker563"/>are finally ready to run new data through your Power BI ML models and evaluate the resulting predictions! You will run through the process of applying each ML model to the new data, and then browse the results of the scoring to compare predictions with the <span class="No-Break">real results.</span></p>
			<h2 id="_idParaDest-155"><a id="_idTextAnchor160"/>Applying the Predict Damage ML model in Power BI</h2>
			<p>You<a id="_idIndexMarker564"/> will now reference the <strong class="bold">Predict Damage ML Score</strong> data from the <strong class="bold">ML Queries</strong> dataflow against the <strong class="bold">Predict Damage ML </strong>model so that <a id="_idIndexMarker565"/>it can be scored. <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.3</em> is a quick summary of the data that you have used to train, test, and now <a id="_idIndexMarker566"/>apply the <strong class="bold">Predict Damage </strong><span class="No-Break"><strong class="bold">ML Model</strong></span><span class="No-Break">:</span></p>
			<table id="table001-9" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style"/>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Training</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Testing</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Apply (new)</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Rows</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">10,165</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">4,326</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">653</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Date Range</span></p>
						</td>
						<td class="No-Table-Style">
							<p>&gt;= 1/1/2014 &amp; &lt;= <span class="No-Break">10/16/2022</span></p>
						</td>
						<td class="No-Table-Style">
							<p>&gt;= 1/1/2014 &amp; &lt;= <span class="No-Break">10/16/2022</span></p>
						</td>
						<td class="No-Table-Style">
							<p>&gt; 10/16/2022 &amp; &lt;= <span class="No-Break">3/1/2023</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.3 – Details about data used for training, testing, and applying new data to Predict Damage ML</p>
			<p>Follow these steps to add the new data to the <strong class="bold">Edit Tables</strong> view of the <strong class="bold">Predict Damage </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> dataflow:</span></p>
			<ol>
				<li>Select <strong class="bold">Get data</strong> | <strong class="bold">Dataflows</strong>, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li>Select <strong class="bold">Predict Damage ML Score</strong> from the <strong class="bold">ML Queries</strong> dataflow and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
				<li>Click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">close</strong></span><span class="No-Break">.</span></li>
				<li>Refresh the <strong class="bold">Predict Damage </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> dataflow.</span></li>
			</ol>
			<p>Now you <a id="_idIndexMarker567"/>can apply <strong class="bold">Predict Damage ML </strong>model <a id="_idIndexMarker568"/>to score the new data. First, navigate<a id="_idIndexMarker569"/> to the ML model and click on the icon to apply <span class="No-Break">the model:</span></p>
			<div>
				<div id="_idContainer172" class="IMG---Figure">
					<img src="image/B19500_11_004.jpg" alt="Figure 11.4 – Icon to apply the ML model"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.4 – Icon to apply the ML model</p>
			<p>Next, select the query for the new data to be scored, and enter the threshold you’d like to use as the cutoff for predicting damage. As you recall from <a href="B19500_09.xhtml#_idTextAnchor125"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, the probability threshold with maximum profit was 0.74, but you can choose any value between <strong class="bold">0</strong> and <strong class="bold">1</strong>. The following example <span class="No-Break">shows </span><span class="No-Break"><strong class="bold">0.5</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer173" class="IMG---Figure">
					<img src="image/B19500_11_005.jpg" alt="Figure 11.5 – Choosing the input table and threshold for applying the ML model"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.5 – Choosing the input table and threshold for applying the ML model</p>
			<p>When you click <strong class="bold">Save and apply</strong>, the <strong class="bold">Predict Power BI ML </strong>model will be used to make predictions about <a id="_idIndexMarker570"/>incidents for the new data! If the <a id="_idIndexMarker571"/>new data were changing at a cadence, you<a id="_idIndexMarker572"/> could set the dataflow to refresh and it would score the new data automatically on <span class="No-Break">a schedule.</span></p>
			<p>Once the scoring of the dataflow has been completed, you will have access to two new tables in the <strong class="bold">Predict Damage ML</strong> dataflow. During the writing of this book, some queries needed to be reauthenticated. If you get an error, you may need to follow the prompts within a query that has a yellow warning icon and save your credentials again. One of these tables will contain the newly scored data, and the other will contain explanations about the features that were used to make the prediction. Connecting to these dataflow tables from Power BI Desktop, you can see that the first table named <strong class="bold">Predict Damage ML Score enriched Predict Damage ML</strong> contains the rows that were scored, the outcome of the prediction based on the probability threshold, the score used to compare with the probability threshold, an explanation about the prediction, and an index column, which is a foreign key for the <span class="No-Break">second table:</span></p>
			<div>
				<div id="_idContainer174" class="IMG---Figure">
					<img src="image/B19500_11_006.jpg" alt="Figure 11.6 – Table of scored new data with predictions and explanations added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.6 – Table of scored new data with predictions and explanations added</p>
			<p>The second<a id="_idIndexMarker573"/> table is named <strong class="bold">Predict Damage ML Score enriched Predict Damage ML explanations</strong> and contains a separate<a id="_idIndexMarker574"/> row for each feature that was <a id="_idIndexMarker575"/>used to make the prediction. During the writing process of this book, an occasional bug would show up in the Power BI Service resulting in this table showing as blank within the dataflow. If you encounter this bug, connecting to this table using Power BI Desktop will allow you to see the data. The <strong class="bold">Contribution</strong> field is added up to calculate the prediction score value for the first table, which is compared to the probability threshold. Negative scores reduce the resulting score, and positive scores increase <span class="No-Break">the score:</span></p>
			<div>
				<div id="_idContainer175" class="IMG---Figure">
					<img src="image/B19500_11_007.jpg" alt="Figure 11.7 – Table of features explaining the predictions for each scored row"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.7 – Table of features explaining the predictions for each scored row</p>
			<p>In the <strong class="bold">Power BI Desktop Model</strong> view, you <a id="_idIndexMarker576"/>can see <a id="_idIndexMarker577"/>that the tables have a <span class="No-Break">one-to-many </span><span class="No-Break"><a id="_idIndexMarker578"/></span><span class="No-Break">relationship:</span></p>
			<div>
				<div id="_idContainer176" class="IMG---Figure">
					<img src="image/B19500_11_008.jpg" alt="Figure 11.8 – Scored data and explanations have a one-to-many relationship"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.8 – Scored data and explanations have a one-to-many relationship</p>
			<p>You can <a id="_idIndexMarker579"/>create an interactive report using <a id="_idIndexMarker580"/>Power BI to explore the results of the ML<a id="_idIndexMarker581"/> model scoring new data. First, you review the explanations of the different features for a single row of scored data. To clarify, the following screenshot is for a single event, indicated by an index of <strong class="bold">7</strong>, which was given a prediction score of <strong class="bold">18.00</strong> and registers as predicting <strong class="bold">No Damage</strong> since the prediction score of 18 is less than the probability threshold of 50. You can see that the prediction score of 18 is the result of adding up all of the <strong class="bold">Contribution</strong> values in the table (bottom right) and waterfall chart (<span class="No-Break">bottom left):</span></p>
			<div>
				<div id="_idContainer177" class="IMG---Figure">
					<img src="image/B19500_11_009.jpg" alt="Figure 11.9 – Left half – Contribution of features used to predict damage for a single wildlife strike incident"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.9 – Left half – Contribution of features used to predict damage for a single wildlife strike incident</p>
			<p>This<a id="_idIndexMarker582"/> screenshot has been split into two<a id="_idIndexMarker583"/> figures to <a id="_idIndexMarker584"/>make sure you can <span class="No-Break">read it.</span></p>
			<div>
				<div id="_idContainer178" class="IMG---Figure">
					<img src="image/B19500_11_010.jpg" alt="Figure 11.10 – Right half – contribution of features used to predict damage for a single wildlife strike incident"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.10 – Right half – contribution of features used to predict damage for a single wildlife strike incident</p>
			<p>In the <a id="_idIndexMarker585"/>waterfall chart split into <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.9</em> and <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.10</em>, you can<a id="_idIndexMarker586"/> zoom in to see that <a id="_idIndexMarker587"/>the features on the left contributed to keeping the Prediction Score low while the features on the right increased <span class="No-Break">the result:</span></p>
			<div>
				<div id="_idContainer179" class="IMG---Figure">
					<img src="image/B19500_11_011.jpg" alt="Figure 11.11 – Features contributing to the Prediction Score of 18 for the incident"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.11 – Features contributing to the Prediction Score of 18 for the incident</p>
			<p>Switching to<a id="_idIndexMarker588"/> another incident given an <strong class="bold">Index</strong> value<a id="_idIndexMarker589"/> of <strong class="bold">2</strong>, you’ll see that the prediction was <a id="_idIndexMarker590"/>a false positive because it predicted damage when none was reported. The features that were weighted strongly within the prediction score of 85 can be sorted to the top of the table. This type of analysis can help you identify features or combinations of features that might contribute to inaccurate predictions or features that have little impact on the prediction. For example, looking at the explanations, you can see that having hit 2-10 large animals contributed to the high <span class="No-Break">prediction score:</span></p>
			<div>
				<div id="_idContainer180" class="IMG---Figure">
					<img src="image/B19500_11_012.jpg" alt="Figure 11.12 – Left half – the incident was predicted to have damage when it did not"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.12 – Left half – the incident was predicted to have damage when it did not</p>
			<p><span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.12</em> and <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.13</em> each <a id="_idIndexMarker591"/>show half of the<a id="_idIndexMarker592"/> screen, to make it easier <span class="No-Break">to </span><span class="No-Break"><a id="_idIndexMarker593"/></span><span class="No-Break">read.</span></p>
			<div>
				<div id="_idContainer181" class="IMG---Figure">
					<img src="image/B19500_11_013.jpg" alt="Figure 11.13 – Right half – the incident was predicted to have damage when it did not"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.13 – Right half – the incident was predicted to have damage when it did not</p>
			<p>Using these <a id="_idIndexMarker594"/>tables in Power BI, you can also aggregate<a id="_idIndexMarker595"/> the results to understand <a id="_idIndexMarker596"/>differences at scale. For example, in the following report, you can see the <strong class="bold">Precision %</strong> and <strong class="bold">Accuracy</strong> metrics broken down by <strong class="bold">Size</strong>, with an adjustable probability threshold, distribution buckets for prediction scores, and aggregate values for the <span class="No-Break">feature explanations:</span></p>
			<div>
				<div id="_idContainer182" class="IMG---Figure">
					<img src="image/B19500_11_014.jpg" alt="Figure 11.14 – Left half – aggregate scoring results for the new rows of data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.14 – Left half – aggregate scoring results for the new rows of data</p>
			<p>The <a id="_idIndexMarker597"/>other half <a id="_idIndexMarker598"/>of the screen<a id="_idIndexMarker599"/> is shown in <span class="No-Break"><em class="italic">Figure 11</em></span><span class="No-Break"><em class="italic">.15</em></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer183" class="IMG---Figure">
					<img src="image/B19500_11_015.jpg" alt="Figure 11.15 – Right half – aggregate scoring results for the new rows of data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.15 – Right half – aggregate scoring results for the new rows of data</p>
			<p>Clicking <a id="_idIndexMarker600"/>on <strong class="bold">Small</strong> under <strong class="bold">Size</strong> to filter the<a id="_idIndexMarker601"/> whole page, you can see that from an <a id="_idIndexMarker602"/>average and median perspective, <strong class="bold">Size</strong> being <strong class="bold">Small</strong> strongly contributes to lower <span class="No-Break">prediction scores:</span></p>
			<div>
				<div id="_idContainer184" class="IMG---Figure">
					<img src="image/B19500_11_016.jpg" alt="Figure 11.16 – Left half – report filtered with Size set to Small"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.16 – Left half – report filtered with Size set to Small</p>
			<p><span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.17</em> shows<a id="_idIndexMarker603"/> the <a id="_idIndexMarker604"/>other <a id="_idIndexMarker605"/>half of <span class="No-Break">the screen.</span></p>
			<div>
				<div id="_idContainer185" class="IMG---Figure">
					<img src="image/B19500_11_017.jpg" alt="Figure 11.17 – Right half – Report filtered for Size of Small"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.17 – Right half – Report filtered for Size of Small</p>
			<p>You can <a id="_idIndexMarker606"/>compare some of the metrics to the <a id="_idIndexMarker607"/>values from the Model Performance <a id="_idIndexMarker608"/>Report that was reviewed in <a href="B19500_09.xhtml#_idTextAnchor125"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>. Remember, <em class="italic">Recall</em> is the percentage of incidents with damage that are likely to be predicted as having damage, and <em class="italic">Precision</em> is the number of records predicted to have damage that actually <span class="No-Break">have damage:</span></p>
			<table id="table002-6" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style"/>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Testing</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">New </strong><span class="No-Break"><strong class="bold">data scoring</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Recall at Probability <span class="No-Break">Threshold .5</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">88%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">80%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Precision at Probability <span class="No-Break">Threshold .5</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">30%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">29%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Recall at Probability <span class="No-Break">Threshold .74</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">67%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">59%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Precision at Probability <span class="No-Break">Threshold .74</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">49%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">49%</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.18 – New data Recall and Precision compared to original testing results</p>
			<p>The <a id="_idIndexMarker609"/>results for the new data appear to be<a id="_idIndexMarker610"/> somewhat consistent with the <a id="_idIndexMarker611"/>testing, but now you can dive into the data and judge for yourself! You are now ready to move on to the <strong class="bold">Predict Size ML</strong> model to test it on <span class="No-Break">new data.</span></p>
			<h2 id="_idParaDest-156"><a id="_idTextAnchor161"/>Applying the Predict Size ML model in Power BI</h2>
			<p>Applying<a id="_idIndexMarker612"/> the new data to the <strong class="bold">Predict Size ML</strong> model <a id="_idIndexMarker613"/>will be a repetitive task compared to <a id="_idIndexMarker614"/>what was just done for <strong class="bold">Predict Damage ML</strong>. As you recall from <a href="B19500_10.xhtml#_idTextAnchor139"><span class="No-Break"><em class="italic">Chapter 10</em></span></a>, the <strong class="bold">Predict Size ML</strong> model did not get very good results during testing, with a 61% AUC. The ML model probably needs either re-evaluation by a data science team or significant work to improve the AUC. Scoring new data against the model can still be a valuable exercise to help identify areas <span class="No-Break">for improvement.</span></p>
			<p>In order to minimize repetition, here’s a summary of the steps to add new data and apply the ML model. Follow these steps to add the new data to the <strong class="bold">Edit Tables</strong> view of the <strong class="bold">Predict Size </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> dataflow:</span></p>
			<ol>
				<li>Select <strong class="bold">Get data</strong> | <strong class="bold">Dataflows</strong>, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li>Select <strong class="bold">Predict Size ML Score</strong> from the <strong class="bold">ML Queries</strong> dataflow and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
				<li>Click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">close</strong></span><span class="No-Break">.</span></li>
				<li>Refresh the <strong class="bold">Predict Size </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> dataflow.</span></li>
				<li>Navigate to the screen for <strong class="bold">Predict Size ML Model</strong>, and click <strong class="bold">Apply </strong><span class="No-Break"><strong class="bold">ML model</strong></span><span class="No-Break">.</span></li>
				<li>Choose the <strong class="bold">Predict Size ML Score</strong> input table and click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">apply</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Once the scoring <a id="_idIndexMarker615"/>is complete, you can pull tables of both <a id="_idIndexMarker616"/>the scored data and the related feature<a id="_idIndexMarker617"/> contributions into Power BI Desktop to review the results. You build a similar report for the <strong class="bold">Size</strong> predictions as you did for <span class="No-Break"><strong class="bold">Damage</strong></span><span class="No-Break"> predictions:</span></p>
			<div>
				<div id="_idContainer186" class="IMG---Figure">
					<img src="image/B19500_11_019.jpg" alt="Figure 11.19 – Left half – evaluation of the Predict Size ML scoring of new data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.19 – Left half – evaluation of the Predict Size ML scoring of new data</p>
			<p>For ease of<a id="_idIndexMarker618"/> viewing, <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.19</em> shows the left half of the<a id="_idIndexMarker619"/> screen, while <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.20</em> shows<a id="_idIndexMarker620"/> the <span class="No-Break">right side.</span></p>
			<div>
				<div id="_idContainer187" class="IMG---Figure">
					<img src="image/B19500_11_020.jpg" alt="Figure 11.20 – Right half – evaluation of the Predict Size ML scoring of new data"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.20 – Right half – evaluation of the Predict Size ML scoring of new data</p>
			<p>As with the original testing of this ML model, the results were barely better than random guessing. Only 119 rows of data met the criteria for the testing, which likely adds to the lackluster results. You can compare the results that were correctly classified to the original <span class="No-Break">testing outcomes:</span></p>
			<table id="table003-4" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Size</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Testing</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">New </strong><span class="No-Break"><strong class="bold">data scoring</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Small</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">70%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">66%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Medium</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">36%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">26%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Large</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">61%</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">63%</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.21 – Comparing original test results versus newly scored data for Predict Size ML</p>
			<p>While the <a id="_idIndexMarker621"/>new results are still not good, they do appear <a id="_idIndexMarker622"/>to be in the same range as the <a id="_idIndexMarker623"/>original test results. You can now move on to scoring new data for your final ML model, <strong class="bold">Predict </strong><span class="No-Break"><strong class="bold">Height ML</strong></span><span class="No-Break">!</span></p>
			<h2 id="_idParaDest-157"><a id="_idTextAnchor162"/>Applying the Predict Height ML model in Power BI</h2>
			<p>As you did <a id="_idIndexMarker624"/>with the <strong class="bold">Predict Size ML</strong> model scoring <a id="_idIndexMarker625"/>of new data, you can follow similar steps <a id="_idIndexMarker626"/>starting in the <strong class="bold">Edit Tables</strong> view of the <strong class="bold">Predict Height ML</strong> dataflow to score the <span class="No-Break">new data:</span></p>
			<ol>
				<li>Select <strong class="bold">Get data</strong> | <strong class="bold">Dataflows</strong>, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">.</span></li>
				<li>Select <strong class="bold">Predict Height ML Score</strong> from the <strong class="bold">ML Queries</strong> dataflow and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
				<li>Click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">close</strong></span><span class="No-Break">.</span></li>
				<li>Refresh the <strong class="bold">Predict Height </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> dataflow.</span></li>
				<li>Navigate to the screen for <strong class="bold">Predict Height ML </strong>model, and click <strong class="bold">Apply </strong><span class="No-Break"><strong class="bold">ML model</strong></span><span class="No-Break">.</span></li>
				<li>Choose the <strong class="bold">Predict Height ML Score</strong> input table and click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">apply</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>As with the previous two ML models, you can pull tables of both the scored data and the related feature contributions into Power BI Desktop to review the results. With a regression ML model, you aren’t predicting yes/no or categorical values, but rather numeric values that can be compared to the actuals. With a regression, there isn’t necessarily a right or wrong answer, but instead, you can compare how close the predicted numbers compare to reality. For example, you can predict that a plane struck a bird at 2,000 feet above the ground, but is that a good prediction if it actually happened at 2,052 feet? The answer to that question in the real world depends on the requirements of the stakeholders and <span class="No-Break">end users!</span></p>
			<p>The following<a id="_idIndexMarker627"/> figure illustrates the predicted height, actual height, and contribution information for features<a id="_idIndexMarker628"/> for the new data scored with<a id="_idIndexMarker629"/> the <strong class="bold">Predict Height </strong><span class="No-Break"><strong class="bold">ML</strong></span><span class="No-Break"> model:</span></p>
			<div>
				<div id="_idContainer188" class="IMG---Figure">
					<img src="image/B19500_11_022.jpg" alt="Figure 11.22 – Left half – comparing the predicted height to the actual height"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.22 – Left half – comparing the predicted height to the actual height</p>
			<div>
				<div id="_idContainer189" class="IMG---Figure">
					<img src="image/B19500_11_023.jpg" alt="Figure 11.23 – Right half – comparing the predicted height to the actual height"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.23 – Right half – comparing the predicted height to the actual height</p>
			<p>As mentioned<a id="_idIndexMarker630"/> previously in the book, the actual <strong class="bold">Height</strong> values tend to land on round numbers in the hundreds or thousands. For example, 8 <a id="_idIndexMarker631"/>reports in the new data illustrated here were recorded to be at 4,000 feet. Is this<a id="_idIndexMarker632"/> due to rounding by the report filer? Is it due to standard heights for aircraft that are near an airport? Are there other reasons? Without additional information, it is impossible to know the reason. On the <strong class="bold">Average of Contribution by Field</strong> chart in the bottom left of the page, you notice that at both the aggregate level and filtered level, the <strong class="bold">Distance</strong>, <strong class="bold">Speed</strong>, <strong class="bold">Airport ID</strong>, and <strong class="bold">Phase of Flight</strong> features tend to have the <span class="No-Break">greatest contribution.</span></p>
			<p>Expanding <a id="_idIndexMarker633"/>the table in <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.24</em> that lists <a id="_idIndexMarker634"/>each individual <a id="_idIndexMarker635"/>incident, you can see the <strong class="bold">Residual</strong> value of the predicted height versus the <span class="No-Break">actual height:</span></p>
			<div>
				<div id="_idContainer190" class="IMG---Figure">
					<img src="image/B19500_11_024.jpg" alt="Figure 11.24 – The individual event’s predicted height, actual height, and residual value"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.24 – The individual event’s predicted height, actual height, and residual value</p>
			<p>In <span class="No-Break"><em class="italic">Figure 11</em></span><em class="italic">.24</em>, notice<a id="_idIndexMarker636"/> that the range of accuracy for the predictions shifts considerably between incidents. There are probably many different <a id="_idIndexMarker637"/>factors contributing to the inaccuracies. Can the predictions be better? Or is there natural variability in the data due to the nature of the incidents and the process for recording data about the incidents? Conversations with the project stakeholders, people in charge of recording the data, and <a id="_idIndexMarker638"/>data science experts can help you learn more about this particular <span class="No-Break">use case.</span></p>
			<p>You’ve reached a point in your project where you have designed your ML models in Power BI, trained them, tested them, and then applied them to new data in a way that could work with an automated process in <span class="No-Break">Power BI.</span></p>
			<h1 id="_idParaDest-158"><a id="_idTextAnchor163"/>Summary</h1>
			<p>In this chapter, you brought new FAA Wildlife Strike data into Power BI and transformed the data to match the design of your original architecture. You then transformed the data to meet the filtering and transformation requirements of the data used to train and test your <strong class="bold">Predict Damage ML</strong>, <strong class="bold">Predict Size ML</strong>, and <strong class="bold">Predict Height ML</strong> models. Then, you made predictions for the new data by applying the trained Power BI ML models. Finally, you reviewed the results of the predictions and compared them to the <span class="No-Break">actual results.</span></p>
			<p><a href="B19500_12.xhtml#_idTextAnchor165"><span class="No-Break"><em class="italic">Chapter 12</em></span></a> will add a special twist to your project! For those of you out in the real world, changing scope and expectations is a frequent occurrence with data projects. When this book was being written, <strong class="bold">OpenAI</strong> and <strong class="bold">Microsoft OpenAI</strong> were fast becoming media sensations. Your stakeholders have asked you to find some use cases for OpenAI in your project. It’s a scope change to your project, but it will be an exciting adventure! <a href="B19500_12.xhtml#_idTextAnchor165"><span class="No-Break"><em class="italic">Chapter 12</em></span></a> will review the OpenAI and Microsoft OpenAI offerings, as they can be applied to this project for <span class="No-Break">added value.</span></p>
		</div>
	

		<div id="_idContainer192" class="Content">
			<h1 id="_idParaDest-159"><a id="_idTextAnchor164"/>Part 4: Integrating OpenAI with Power BI</h1>
			<p>In the final part of the book, you will see how you can make use of Open AI and Azure OpenAI to enhance your BI work. In the final chapter, you will look at some of the key ideas and lessons covered in the book, and think about how you can use them in your <span class="No-Break">own work.</span></p>
			<p>The following three chapters make up <span class="No-Break"><em class="italic">Part 4</em></span><span class="No-Break">:</span></p>
			<ul>
				<li><a href="B19500_12.xhtml#_idTextAnchor165"><em class="italic">Chapter 12</em></a>, <em class="italic">Use Cases for OpenAI</em></li>
				<li><a href="B19500_13.xhtml#_idTextAnchor173"><em class="italic">Chapter 13</em></a>, <em class="italic">Using OpenAI and Azure OpenAI in Power BI Dataflows</em></li>
				<li><a href="B19500_14.xhtml#_idTextAnchor186"><em class="italic">Chapter 14</em></a>, <em class="italic">Project Review and Looking Forward</em></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer193">
			</div>
		</div>
		<div>
			<div id="_idContainer194" class="Basic-Graphics-Frame">
			</div>
		</div>
		<div>
			<div id="_idContainer195">
			</div>
		</div>
	</body></html>