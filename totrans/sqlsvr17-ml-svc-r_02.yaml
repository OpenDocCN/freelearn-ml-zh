- en: Overview of Microsoft Machine Learning Server and SQL Server
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 微软机器学习服务器和SQL服务器概述
- en: 'In this chapter, we will look into the reasons why Microsoft decided to add
    the R language to SQL Server 2016 and what burdens this integration has overcome.
    We will cover the following topics in this chapter:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨为什么微软决定将R语言添加到SQL Server 2016，以及这次集成克服了哪些负担。本章将涵盖以下主题：
- en: Addressing analytical barriers and R limitations
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决分析障碍和R限制
- en: The Microsoft R Server platform
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微软R服务器平台
- en: The Microsoft R Services architecture
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微软R服务架构
- en: Exploring computational contexts
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索计算环境
- en: Analytical barriers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分析障碍
- en: Many companies encounter barriers when trying to analyse their data. These barriers
    are usually knowledge scarcity (not all departments have the knowledge to analyse
    the data) and data dispersity (usually data arrives from different sources).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 许多公司在尝试分析他们的数据时遇到障碍。这些障碍通常是知识匮乏（并非所有部门都有分析数据的知识）和数据分散（通常数据来自不同的来源）。
- en: Enterprises divide responsibilities according to the roles or functions of the
    employees. Such division of work has a positive effect, especially when an enterprise
    is large. Usually, small to mid-sized enterprises adopt such roles as well, but
    they are normally granulated on a higher level due to a smaller number of employees.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 企业根据员工的职责或职能划分责任。这种工作划分有积极的效果，特别是当企业规模较大时。通常，中小型企业也会采用这样的角色，但由于员工数量较少，它们通常在更高层次上细分。
- en: 'With rapid market changes, the emergence of new technologies, and the need
    for faster adaptation, many experts have noticed many of the following barriers:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 随着市场变化的快速、新技术的出现和更快适应的需求，许多专家已经注意到以下许多障碍：
- en: Data scarcity and data dispersity
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据稀缺和数据分散
- en: Complex (and many times outdated) architecture
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复杂（许多时候过时）的架构
- en: Lack of knowledge
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 知识缺乏
- en: Low productivity
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 低效率
- en: Slow adaptation to market changes (long time to market)
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 市场变化适应缓慢（市场进入时间长）
- en: Many enterprises are facing at least one (if not more) of these barriers and
    Microsoft has addressed these barriers by opening the R language to SQL Server.
    Embracing an open source language and open source technology, it broadens the
    pool of knowledge, enabling the enterprises to use community knowledge and community
    solutions, as well as opening and democratizing analytics. Rather than suffering
    and waiting on data scientists and specialists with the subject-matter academic
    knowledge, now this pool of knowledge can be easily shared and many of the data
    munging and data engineering tasks can be offloaded to other roles and people.
    This offload process also bridges the traditional gap between IT and statisticians
    that resulted in low and slow productivity in the past. This gap in knowledge
    and skills can now be overcome by mixing different roles and tasks using R in
    SQL Server (meaning that data wranglers or data stewards can have R code at their
    perusal that would help them in getting data insight, without actually needing
    to understand the complexity of the statistics). There are no surprises for understanding
    or knowing different platforms, now, as many IT people can use the R language
    provided by statisticians and data scientists. Also, data scientists can start
    learning skills and languages that one finds in IT.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 许多企业至少面临这些障碍中的一个（如果不是更多），微软通过将R语言开放给SQL Server来解决这些障碍。拥抱开源语言和开源技术，它扩大了知识库，使企业能够使用社区知识和社区解决方案，同时也开放和民主化分析。不再需要忍受和等待具有学科学术知识的数据科学家和专家，现在这个知识库可以轻松共享，许多数据整理和数据工程任务可以转交给其他角色和人。这个过程也弥合了传统上IT和统计学家之间的差距，这在过去导致了低效率和缓慢的生产力。现在，通过在SQL
    Server中使用R混合不同的角色和任务，可以克服知识和技能的差距（这意味着数据整理员或数据管理员可以查阅R代码，这有助于他们获得数据洞察，而无需真正理解统计学的复杂性）。现在，对于理解或了解不同的平台没有惊喜，因为许多IT人员可以使用统计学家和数据科学家提供的R语言。此外，数据科学家可以开始学习在IT中找到的技能和语言。
- en: Such interconnected and shared knowledge between two or more different departments
    of people will also increase productivity. When productivity is increased, statistical
    and predictive models can be deployed faster, changed, or adapted to consumer
    and market changes and enabled for data engineers, wranglers, and analysts. This
    certainly is the way for an enterprise to improve the innovation path and maximize
    the potential of open source, and broaden the sandbox of experiments using different
    methods and models.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 两个或更多不同部门之间相互关联和共享的知识也将提高生产力。当生产力提高时，统计和预测模型可以更快地部署、更改或适应消费者和市场变化，并为数据工程师、数据整理者和分析师提供支持。这无疑是企业改善创新路径、最大化开源潜力以及拓宽使用不同方法和模型进行实验的沙盒范围的方式。
- en: The last step in addressing these barriers is addressing the issues of data
    scarcity and complex infrastructure. The rule is that the bigger the enterprise,
    the higher the likelihood that the infrastructure will be complex. With complex
    infrastructure, we can understand that data resides on different layers or different
    granularity, on different platforms, on different vendors, and on different silos,
    making data analysis an additional step further from realization. With an introduction
    to R, this complexity can be overridden with simpler data connectors, an easier
    way to extract the data.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 解决这些障碍的最后一步是解决数据稀缺和复杂基础设施的问题。规则是，企业规模越大，基础设施越复杂的可能性越高。在复杂基础设施的情况下，我们可以理解数据位于不同的层级或不同的粒度，在不同的平台、不同的供应商和不同的孤岛中，使得数据分析比实现更远一步。通过引入R，这种复杂性可以通过更简单的数据连接器、更便捷的数据提取方式来克服。
- en: As the R language is becoming more and more popular and important in the field
    of analytics, it can be ready for enterprises on different scales and can be designed
    to anticipate beyond vendors, regardless of whether you have your solution on-premises
    or in the cloud. The need for data movement also decreases because of the ability
    to access and read data directly from any hybrid system and extract only what
    is needed. All barriers that are present in enterprises can now be addressed faster
    with less bureaucracy, better integration, and less effort.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 随着R语言在分析领域的日益流行和重要，它可以为不同规模的企业做好准备，并且可以设计为超越供应商，无论您的解决方案是在本地还是在云端。由于可以直接从任何混合系统中访问和读取数据，并且只提取所需的数据，因此数据移动的需求也降低了。现在，企业中存在的所有障碍都可以更快地解决，官僚主义减少，集成更好，努力更少。
- en: 'Another important aspect of embracing open source language, with which many
    big enterprises are still struggling, is the general providence of open source
    solutions. This aspect shall not be overlooked and must be taken into consideration.
    Microsoft took the R language on-board with several steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 接受开源语言的另一个重要方面，许多大型企业仍在努力实现，就是开源解决方案的普遍提供。这一方面不应被忽视，必须予以考虑。微软通过以下步骤将R语言纳入其体系：
- en: Being on board in the R Consortium, which is responsible for supporting the
    R Foundation and key organizations working tightly on developing, distributing,
    and maintaining R engine and supporting R-related infrastructure projects. One
    of the projects was the RHub project (lead by *Gabor Csardi*) that delivered a
    service for developing, testing, and validating R packages.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在R联盟中担任一员，该联盟负责支持R基金会以及紧密合作开发、分发和维护R引擎及其相关基础设施项目的关键组织。其中一项项目是RHub项目（由*加博尔·卡尔迪*领导），该项目提供了一种用于开发、测试和验证R包的服务。
- en: Creating an MRAN repository of R packages under the CC license and making CRAN
    packages to Microsoft R engine distribution available and compatible with R distributions.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在CC许可下创建R包的MRAN仓库，并使CRAN包与微软R引擎分发兼容。
- en: Making Intel **MKL** (**Math Kernel Library**) computational functions to improve
    the performance of the R statistical computation, available out of the box when
    you download the R engine from the MRAN repository. **Basic Linear Algebra Subprograms**
    (**BLAS**) and **Linear Algebra Package** (**LAPACK**) are a family of functions
    for linear algebra that is enhanced for parallel computations. Such functions
    are matrix factorization, Cholesky matrix decomposition, vector and matrix additions,
    scalar multiplications, and so on.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 Intel **MKL** （**数学内核库**）计算函数用于提高 R 统计计算的效率，当你从 MRAN 仓库下载 R 引擎时，这些函数将直接可用。**基本线性代数子程序**（**BLAS**）和**线性代数包**（**LAPACK**）是一组用于线性代数的函数，这些函数经过并行计算优化。这些函数包括矩阵分解、Cholesky
    矩阵分解、向量矩阵加法、标量乘法等等。
- en: Rewriting many R functions from Fortran to C++ language to improve the performances.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将许多 R 函数从 Fortran 重新编写为 C++ 语言以提高性能。
- en: We can quickly support the theory of the MKL computational functions, when we
    compare the R engine distribution available on the CRAN and R engine distribution
    available on MRAN. As we have already seen, BLAS and LAPACK are vector or matrix
    superseded, so we will compare (benchmark) the computations on a matrix between
    two R engine distributions.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们比较 CRAN 和 MRAN 上的 R 引擎分布时，我们可以快速支持 MKL 计算函数的理论。正如我们已经看到的，BLAS 和 LAPACK 是向量或矩阵的替代品，因此我们将比较（基准测试）两个
    R 引擎分布之间的矩阵计算。
- en: 'The comparison is made on CRAN R 3.3.0 and MRAN R Open 3.3.0, with the following
    code:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 比较是在 CRAN R 3.3.0 和 MRAN R Open 3.3.0 上进行的，以下代码：
- en: '[PRE0]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following are the results with the following time (in seconds):'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在以下时间（以秒为单位）的结果：
- en: '| **Time (seconds)** | **CRAN 3.3.2** | **MRAN 3.3.2** |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| **时间（秒）** | **CRAN 3.3.2** | **MRAN 3.3.2** |'
- en: '| MM | 26,69 | 2,75 |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| MM | 26,69 | 2,75 |'
- en: '| CP | 0,19 | 0,01 |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| CP | 0,19 | 0,01 |'
- en: 'In the following figure, you can see the difference in performance between
    CRAN and MRAN R engine:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的图中，你可以看到 CRAN 和 MRAN R 引擎之间的性能差异：
- en: '![](img/00006.gif)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00006.gif)'
- en: Figure 1
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1
- en: The graph shows a simple linear algebra that uses matrices or vectors and performs
    faster for a factor of 10 (tested on my local client-Inter I7, 4 CPU, 20 GB RAM).
    Note that, when you run this test on your local machine, you should observe the
    RAM and disk storage consumption; you will see that the MRAN operation is very
    lightweight in comparison to the CRAN operation when it comes to the RAM consumption.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图表显示了一个简单的线性代数，它使用矩阵或向量，并且比测试（在我的本地客户端-Inter I7，4 CPU，20 GB RAM 上测试）快10倍。请注意，当你在你自己的机器上运行此测试时，你应该观察
    RAM 和磁盘存储消耗；你将看到与 CRAN 操作相比，MRAN 操作在 RAM 消耗方面非常轻量。
- en: 'When you download the MRAN distribution of R Open, note that there will be
    additional information on MKL multithreaded performance functions available:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 当你下载 R Open 的 MRAN 分发版时，请注意，将会有关于 MKL 多线程性能函数的附加信息：
- en: '![](img/00007.jpeg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00007.jpeg)'
- en: 'Figure 2: Source: [https://mran.microsoft.com/download/](https://mran.microsoft.com/download/)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2：来源：[https://mran.microsoft.com/download/](https://mran.microsoft.com/download/)
- en: Many more steps were taken that would reassure consumers, developers, wranglers,
    and managers from bigger enterprises that the R language is here to stay. Microsoft
    promised that, besides this provision, there is also support for general governance
    and if the company decides, it can also receive R support on an enterprise level.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 许多额外的步骤被采取，以确保消费者、开发者、管理者和来自更大企业的管理者相信 R 语言将长期存在。微软承诺，除了这项规定之外，还有对一般治理的支持，如果公司决定，它还可以在企业层面获得
    R 支持。
- en: Furthermore, to support the idea of using open source R language, one must understand
    the general architecture of R. The R engine is written by the core group of roughly
    20 people with access to the source code of the R engine (even though only six
    are working on day-to-day R development). This group of people not only maintains
    the code, but they themselves are also contributors, bug fixers, and developers.
    So, the R engine is open source, which means that it is free software (under a
    GNU license), but the engine is not maintained that openly. On the other hand,
    R libraries (or packages) are mostly community-driven contributions, which mean
    that people in the community are free to develop and create a variety of functions
    to support statistical calculations, visualizations, working with datasets, and
    many other aspects.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，为了支持使用开源 R 语言的想法，必须了解 R 的一般架构。R 引擎由大约 20 人的核心团队编写，他们可以访问 R 引擎的源代码（尽管只有六人在日常
    R 开发中工作）。这个团队不仅维护代码，他们自己也是贡献者、错误修复者和开发者。因此，R 引擎是开源的，这意味着它是免费软件（在 GNU 许可下），但引擎的维护并不那么开放。另一方面，R
    库（或包）主要是社区驱动的贡献，这意味着社区中的成员可以自由地开发和创建各种函数来支持统计计算、可视化、处理数据集以及许多其他方面。
- en: In the months following the release of SQL Server 2016 (from summer 2016 onward),
    Microsoft also changed what is available in different editions of SQL Server.
    If you visit the SQL Server 2016 editions overview at [https://www.microsoft.com/en-us/sql-server/sql-server-2016-editions](https://www.microsoft.com/en-us/sql-server/sql-server-2016-editions),
    you can see that under advanced analytics, basic R integration is available in
    all editions of SQL Server 2016, and advanced R Integration (with full parallelism
    of ScaleR functions in `RevoScaleR` package) is available only in the Enterprise
    and Developer editions.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SQL Server 2016 发布后的几个月里（从 2016 年夏季开始），微软也改变了 SQL Server 不同版本中可用的功能。如果您访问
    [https://www.microsoft.com/en-us/sql-server/sql-server-2016-editions](https://www.microsoft.com/en-us/sql-server/sql-server-2016-editions)
    上的 SQL Server 2016 版本概述，您会发现，在高级分析方面，SQL Server 2016 所有版本都提供了基本的 R 集成，而高级 R 集成（在
    `RevoScaleR` 包中实现 ScaleR 函数的完全并行化）仅适用于企业版和开发者版。
- en: The Microsoft Machine learning R Server platform
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft Machine learning R Server 平台
- en: We have already touched on the concept of R Open and R for enterprise environment
    briefly. Microsoft Machine Learning R Server is an enterprise server that delivers
    high dimensional and large datasets that can be processed in parallel, and the
    workload can be distributed across nodes. R Server can process these parallel
    and distributed workloads on Windows, Linux servers, or HDFS systems, such as
    Hadoop, Spark, Teradata, and HD Insight. R Server can achieve parallel and distributed
    workloads using Microsoft R packages designed to do just that. The `RevoScaleR`
    package will give the ability to do highly parallel and distributed computations,
    statistical analysis, and predictive analytics, as well as machine learning and
    deep learning.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经简要地提到了 R Open 和企业环境中的 R 的概念。Microsoft Machine Learning R Server 是一个企业级服务器，可以处理高维和大数据集，这些数据集可以并行处理，并且工作负载可以跨节点分配。R
    Server 可以在 Windows、Linux 服务器或 HDFS 系统上处理这些并行和分布式工作负载，例如 Hadoop、Spark、Teradata
    和 HD Insight。R Server 可以使用专为并行和分布式工作负载设计的 Microsoft R 包来实现并行和分布式工作负载。`RevoScaleR`
    包将提供进行高度并行和分布式计算、统计分析、预测分析和机器学习以及深度学习的能力。
- en: 'With the acquisition of the company Revolution Analytics, Microsoft rebranded
    their two main products, Revolution R Open and Revolution R Enterprise, to Microsoft
    R Open and Microsoft R Server and Microsoft SQL Server R Services. In addition
    to these two flavors, they also added Microsoft R Client as an additional standalone
    product:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 通过收购公司 Revolution Analytics，微软重新命名了他们的两个主要产品，Revolution R Open 和 Revolution
    R Enterprise，为 Microsoft R Open、Microsoft R Server 和 Microsoft SQL Server R Services。除了这两种版本外，他们还增加了
    Microsoft R Client 作为另一个独立产品：
- en: '![](img/00008.jpeg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00008.jpeg)'
- en: Figure 3
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3
- en: Based on different flavors and enterprise ecosystems, companies can choose the
    type of usage they will need (community, or non-commercial, and commercial) and,
    based on their business needs and where they want their analytical server to be
    set up, they can choose what suits them the most. In the commercial version, a
    standalone machine learning R Server (or simply R server) is available, as well
    as in-database machine learning services (or SQL Server R services).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 根据不同的版本和企业生态系统，公司可以选择他们需要的使用类型（社区版、非商业版和商业版），并且根据他们的业务需求和希望在哪里设置他们的分析服务器，他们可以选择最适合他们的选项。在商业版本中，提供了一个独立的机器学习
    R Server（或简称 R 服务器），以及数据库内机器学习服务（或 SQL Server R 服务）。
- en: 'In the version of SQL Server 2017, Microsoft R Server has been changed to Machine
    Learning Server (both in-database and as a standalone; the rebranding from in-database
    R Services to Machine Learning R Services was introduced in the CTP version of
    SQL Server VNext that later changed to SQL Server 2017). In *Figure 4*, one can
    see the naming available when installing SQL Server 2016 (left-print screen) and
    the names that will be available in SQL Server 2017 (right-print screen):'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SQL Server 2017 版本中，Microsoft R Server 已更名为 Machine Learning Server（无论是数据库内还是作为独立版本；从数据库
    R 服务到机器学习 R 服务的重新命名是在 SQL Server VNext 的 CTP 版本中引入的，后来改为 SQL Server 2017）。在 *图
    4* 中，可以看到安装 SQL Server 2016（左侧截图）和 SQL Server 2017 中可用的命名（右侧截图）：
- en: '![](img/00009.jpeg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00009.jpeg)'
- en: Figure 4
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4
- en: 'The reason given for the change in the naming was the fact that Microsoft introduced
    Python in SQL Server 2017\. Python is a powerful statistical, analytical, and
    machine learning language, and therefore, the name was unified. The R-part of
    the Machine Learning Server will not change internally, but it will gain useful
    additional packages and improved functions, as follows:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 命名变更的原因是微软在 SQL Server 2017 中引入了 Python。Python 是一种强大的统计、分析和机器学习语言，因此，名称得到了统一。机器学习服务器的
    R 部分（内部）不会改变，但它将获得有用的附加包和改进的功能，如下所示：
- en: '[PRE1]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: All these functions have been rewritten either for working on large datasets
    in parallel and distributed workloads, or to support R and SQL Server work.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些功能都已被重写，要么是为了在并行和分布式工作负载中处理大型数据集，要么是为了支持 R 和 SQL Server 的工作。
- en: 'In the Microsoft R platform, the following products are available:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Microsoft R 平台上，以下产品可用：
- en: Microsoft Machine Learning R Server
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Machine Learning R Server
- en: Microsoft R Client
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft R Client
- en: Microsoft R Open
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft R Open
- en: R Tools for Visual Studio
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: R Tools for Visual Studio
- en: Product description has been summarized based on Microsoft Docs descriptions
    and based on an article published on SQLServerCentral in September of 2016 ( [http://www.sqlservercentral.com/articles/Microsoft/145393/](http://www.sqlservercentral.com/articles/Microsoft/145393/)).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 产品描述是根据 Microsoft Docs 描述以及 2016 年 9 月发表在 SQLServerCentral 上的文章（[http://www.sqlservercentral.com/articles/Microsoft/145393/](http://www.sqlservercentral.com/articles/Microsoft/145393/））进行总结的。
- en: Microsoft R Open (MRO)
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft R Open (MRO)
- en: Microsoft R Open is an open source R distribution that is 100% free and generally
    available. Microsoft has enhanced this R Open distribution with an additional
    high-performance multi-threaded feature of **Math Kernel Library** (**MKL**) that
    is optimized for vector and matrix-based mathematical and statistical computations;
    otherwise, this distribution is fully compatible with legacy R objects and R code.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft R Open 是一个开源的 R 发行版，100% 免费，通常可用。微软通过添加一个针对基于向量和矩阵的数学和统计计算进行优化的高性能多线程特性
    **Math Kernel Library**（**MKL**）来增强这个 R Open 发行版；否则，这个发行版与传统的 R 对象和 R 代码完全兼容。
- en: R Open is also compatible with the CRAN repository, GitHub packages, or any
    other repository, making MRO widely usable. On the other hand, R Open has some
    limitations. It is memory bound, which means that it can only handle the datasets
    that will fit into the memory (client) available. Proprietary ScaleR functions
    (available in the `RevoScaleR` package) will not be available under R Open and
    it will run on all SQL Server 2017 editions, except on Express or Express with
    Tools, whereas Microsoft R Client/Server will run only on the Enterprise or Developer
    editions of SQL Server 2017.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: R Open 也兼容 CRAN 仓库、GitHub 软件包或任何其他仓库，这使得 MRO 得到广泛应用。另一方面，R Open 有一些限制。它是内存受限的，这意味着它只能处理能够装入可用内存（客户端）的数据集。专有的
    ScaleR 函数（在 `RevoScaleR` 包中可用）在 R Open 下不可用，并且它将在所有 SQL Server 2017 版本上运行，除了 Express
    或带有工具的 Express，而 Microsoft R Client/Server 只会在 SQL Server 2017 的企业版或开发者版上运行。
- en: Microsoft R Client is the same R distribution as Microsoft R Open and it is
    built on top of 100% open source R version. Microsoft R Client is the first version
    from the Microsoft family of R versions that introduces the `RevoScaleR` package
    (ScaleR functions). A data wrangler, data scientist, or data engineer (or any
    other profile) who installs this version will have the ability to use the parallelization
    and multi-threaded computing, as well as the use of proprietary functions from
    ScaleR.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft R客户端与Microsoft R Open相同的R发行版，它建立在100%开源R版本之上。Microsoft R客户端是Microsoft
    R版本家族中的第一个版本，引入了`RevoScaleR`包（ScaleR函数）。安装此版本的任何数据整理员、数据科学家、数据工程师（或任何其他角色）都将能够使用并行化和多线程计算，以及使用ScaleR的专有函数。
- en: There are some limitations to the R Client version. The memory will be limited
    to a local client machine with the same limitations as Microsoft R Open—data must
    fit into the local memory in order to be computed. The ScaleR functions will be
    installed alongside this version, but the processing will be limited to only two
    threads simultaneously (regardless of the technical specifications of the client
    machine) and to the local disk and CPU speed. Otherwise, any legacy R packages
    or R code will be compatible.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: R客户端版本的局限性包括：内存将限制在具有与Microsoft R Open相同限制的本地客户端机器上——数据必须适合本地内存才能进行计算。ScaleR函数将与该版本一起安装，但处理将仅限于同时仅两个线程（无论客户端机器的技术规格如何），以及本地磁盘和CPU速度。否则，任何遗留的R包或R代码都将兼容。
- en: 'Microsoft R Client also brings the possibility to change the computational
    environment, which means that the computational load can be pushed to Microsoft
    R Server or SQL Server R Services and any HDFS system to achieve maximum performance.
    Building the ecosystem with many R Clients and one (or a few) R Servers will give
    a high-performance analytical environment without having the need for Microsoft
    R Server being installed locally. It is compatible with the following flavors
    of R Server: Microsoft R server for Linux, Microsoft R Server for Teradata DB,
    Microsoft R Server for Hadoop, Microsoft R HDInsight, and both versions of Microsoft
    R Server-Standalone and SQL Server R Services.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft R客户端还带来了改变计算环境的可能性，这意味着计算负载可以推送到Microsoft R服务器或SQL Server R服务以及任何HDFS系统，以实现最佳性能。通过构建由多个R客户端和一个（或几个）R服务器组成的生态系统，将提供一个高性能的分析环境，而无需在本地安装Microsoft
    R服务器。它与以下R服务器版本兼容：Microsoft R服务器（Linux版）、Microsoft R服务器（Teradata DB版）、Microsoft
    R服务器（Hadoop版）、Microsoft R HDInsight，以及Microsoft R服务器独立版和SQL Server R服务的两个版本。
- en: Microsoft Machine Learning R Server
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft机器学习R服务器
- en: Microsoft R Server is a standalone server version of the R engine, built on
    top of the R open source platform but modified to suit the needs of the enterprise
    environment and heavy usage of analytical purposes, from statistical analysis
    and data mining to machine learning and any big data tasks.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft R服务器是R引擎的独立服务器版本，建立在R开源平台之上，但经过修改以适应企业环境和对分析目的的大量使用，从统计分析、数据挖掘到机器学习以及任何大数据任务。
- en: It is fully compatible with CRAN/MRAN/GitHub repositories and any R legacy code.
    The ScaleR functions and algorithms available in the `RevoScaleR` package are
    capable of parallel and multi-threated data processing with no limitations known
    to R Open or R Client. Computations are prepared for large datasets—in most cases,
    datasets that easily exceed the server memory size. This can be done due to a
    special external data frame format that enables multi-threaded computations and
    enables R-based applications that can perform parallel computations and deployable
    solutions across multi-platforms with the help of ConnectR and DeployR. Disk scalability
    is also available with Microsoft R Server.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 它与CRAN/MRAN/GitHub存储库以及任何R遗留代码完全兼容。`RevoScaleR`包中可用的ScaleR函数和算法能够进行并行和多线程数据处理，不受R
    Open或R客户端的限制。计算针对大型数据集进行准备——在大多数情况下，数据集容易超过服务器内存大小。这可以通过一种特殊的外部数据框格式来实现，该格式支持多线程计算，并允许基于R的应用程序执行并行计算和可部署解决方案，这得益于ConnectR和DeployR的帮助。Microsoft
    R服务器还提供了磁盘可伸缩性。
- en: Microsoft SQL Server Machine Learning R Services
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft SQL Server机器学习R服务
- en: The in-database flavor of R Open distribution is available as Machine Learning
    R Services for Microsoft SQL Server, and covers all the ScaleR algorithms that
    are available in the `RevoScaleR` package.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: R Open分布的数据库版本作为Microsoft SQL Server的机器学习R服务提供，涵盖了`RevoScaleR`包中可用的所有ScaleR算法。
- en: The memory and disk, in this case, will be managed by your installation of SQL
    Server, and the R execution is done using the `SQL Server Trusted Launchpad` service
    that governs the communication between SQL Server and R engine.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，内存和磁盘将由您的 SQL Server 安装管理，R 执行使用的是管理 SQL Server 和 R 引擎之间通信的 `SQL Server
    Trusted Launchpad` 服务。
- en: Also, users can connect to R Services using R Client but the `DeployR` and `ConnectR`
    functions will be limited.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，用户可以使用 R 客户端连接到 R 服务，但 `DeployR` 和 `ConnectR` 函数将受到限制。
- en: Microsoft SQL Server R Services is an in-database version for SQL Server 2016
    and onwards, and this will be the main focus of this book. These in-database services
    can be installed when a new instance of SQL Server is installed. *Figure 4* shows
    that R in-database service (or machine learning services (in-database) as a part
    of SQL Server 2017) are installed as an instance feature, and when ticking this
    feature, the R service (or the Python service) will be installed. One must also
    understand that Microsoft R Server is a standalone component that is not installed
    when R Services are installed. One must explicitly put a tick next to R Server
    (Machine Learning Server) under shared services. However, R services (in-database)
    will not install R Server.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft SQL Server R Services 是 SQL Server 2016 及以后版本的数据库内版本，本书将主要关注这一点。这些数据库内服务可以在安装新的
    SQL Server 实例时安装。*图 4* 显示，R 数据库内服务（或作为 SQL Server 2017 的一部分的机器学习服务（数据库内））作为实例功能安装，当勾选此功能时，R
    服务（或 Python 服务）将被安装。还必须理解，Microsoft R Server 是一个独立组件，在安装 R 服务时不会安装。必须在共享服务下明确勾选
    R Server（机器学习服务器）。然而，R 服务（数据库内）不会安装 R Server。
- en: 'R Services (in-database) is a standalone source of R language and R programming
    with full stack and capabilities of SQL Server, including the tools and technologies
    for governance, security, reliability, and performance. In SSMS, one can invoke
    and call R functions making R analysis or predictions using transact SQL with
    an R script. This can be achieved using a system external procedure: `sp_execute_external_script`.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: R 服务（数据库内）是 R 语言和 R 编程的独立来源，具有 SQL Server 的全栈和功能，包括治理、安全、可靠性和性能的工具和技术。在 SSMS
    中，可以通过调用 R 函数并使用 R 脚本进行事务 SQL 来调用 R 分析或预测。这可以通过系统外部过程 `sp_execute_external_script`
    实现。
- en: The ScaleR libraries that are a part of the R Service (in-database) installation
    allow data scientists, developers, or database administrators to securely execute
    an R script from a SQL Server computer or on Microsoft R Server. By defining the
    computational context, a user can choose where to push the computations and load,
    either to stay in-database R runtime or use the ScaleR library to enhance connectivity
    and parallelism and push the load to Microsoft R Server.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ScaleR 库是 R 服务（数据库内）安装的一部分，允许数据科学家、开发人员或数据库管理员在 SQL Server 计算机上或 Microsoft R
    Server 上安全地执行 R 脚本。通过定义计算上下文，用户可以选择将计算和负载推送到哪里，要么留在数据库内 R 运行时，要么使用 ScaleR 库来增强连接性和并行性，并将负载推送到
    Microsoft R Server。
- en: To close the circle, with the installation of client R that comes available
    as a standalone and separate installer, you can develop your R code and deploy
    the solution to R Services or to Microsoft R Server running on Windows or Linux.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 为了闭环，通过安装作为独立和单独安装程序提供的客户端 R，您可以开发您的 R 代码并将解决方案部署到运行在 Windows 或 Linux 上的 R 服务或
    Microsoft R Server。
- en: 'Figure 5 depicts how data scientists or data analysts can push the load from
    client/workstation to a cloud-based solution, a virtual machine, an R Server,
    or R services (in-database). From a client''s perspective, one can also easily
    choose a hybrid solution, especially when the need for data integration and data
    consolidation between different systems is needed. This concept will most certainly
    give the enterprise an immediate boost and lift in performance, as well as faster
    and better solutions adaptation almost instantly:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 5* 描述了数据科学家或数据分析师如何将客户端/工作站上的负载推送到基于云的解决方案、虚拟机、R 服务器或 R 服务（数据库内）。从客户端的角度来看，也可以轻松选择混合解决方案，尤其是在需要在不同系统之间进行数据集成和数据合并时。这个概念无疑会给企业带来即时的性能提升和提升，以及几乎瞬间就能适应的更快、更好的解决方案：'
- en: '![](img/00010.jpeg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00010.jpeg)'
- en: Figure 5
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 5*'
- en: R Tools for Visual Studio (RTVS)
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: R Tools for Visual Studio (RTVS)
- en: RTVS is a Microsoft free version (distributed under a GNU license) of IDE for
    writing, validating, and running an R code within Visual Studio. RTVS is supported
    on the Community, Professional, and Enterprise editions of Visual Studio 2015
    and Visual Studio 2017.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: RTVS是Microsoft免费版（在GNU许可下分发）的IDE，用于在Visual Studio中编写、验证和运行R代码。RTVS支持Visual Studio
    2015和Visual Studio 2017的社区版、专业版和企业版。
- en: R Tools ([https://www.visualstudio.com/vs/rtvs/](https://www.visualstudio.com/vs/rtvs/))
    will help developers, analysts, and data scientists to operate and perform statistical
    computations, visualizations, and data management. R Tools bring graphical interface
    to R Engine, workspace for rich editing, interactive windows, variable and visuals
    explorer, help, IntelliSense, and much more. It also binds local and remote workspaces
    (on-premises or in the cloud), so that data analysts can switch between computational
    environments very easily.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: R工具([https://www.visualstudio.com/vs/rtvs/](https://www.visualstudio.com/vs/rtvs/))将帮助开发人员、分析师和数据科学家操作和执行统计计算、可视化以及数据管理。R工具将图形界面引入R引擎，提供丰富的编辑工作区、交互式窗口、变量和可视化探索器、帮助、IntelliSense等。它还绑定本地和远程工作区（本地或云中），以便数据分析师可以非常容易地在计算环境之间切换。
- en: 'The view of workspaces in RTVS is made simple and graphical for a user to switch
    between different R environments:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: RTVS中工作空间的视图被简化并图形化，以便用户可以在不同的R环境之间切换：
- en: '![](img/00011.jpeg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00011.jpeg)'
- en: Figure 6
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图6
- en: It resembles the famous and powerful RStudio ([www.rstudio.com](http://www.rstudio.com)),
    but still offers all the necessities that community and time brought into the
    development of RStudio, Emacs, Vim, Eclipse, or others. Microsoft has also addressed
    the community with questionnaires to ask what the users of RTVS are still missing.
    They can contribute and add their wishes at [https://www.surveymonkey.com/r/RTVS1](https://www.surveymonkey.com/r/RTVS1).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 它类似于著名的强大RStudio ([www.rstudio.com](http://www.rstudio.com))，但仍提供了社区和时间带入RStudio、Emacs、Vim、Eclipse或其他开发中的所有必需品。微软还通过问卷调查向社区询问RTVS用户仍然缺少什么。他们可以在[https://www.surveymonkey.com/r/RTVS1](https://www.surveymonkey.com/r/RTVS1)贡献并添加他们的愿望。
- en: RTVS was announced and released (as a beta version) in early 2016 but only got
    version 1 in 2017.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: RTVS于2016年初宣布并发布（作为测试版），但直到2017年才获得版本1。
- en: The Microsoft Machine Learning R Services architecture
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 微软机器学习R服务架构
- en: The architecture of R Server covers many components needed in order for the
    communication between R IDE or SQL Server and R engine to work properly.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: R服务器架构涵盖了R IDE或SQL Server与R引擎之间通信所需的所有组件。
- en: 'Several components are involved in order to properly execute Transact SQL,
    R script, and return all the results back to T-SQL:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 为了正确执行Transact SQL、R脚本并将所有结果返回到T-SQL，涉及了几个组件：
- en: '![](img/00012.jpeg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00012.jpeg)'
- en: Figure 7
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图7
- en: Launchpad is a new service in SQL Server 2016 that supports execution of external
    scripts using the external stored procedure from SQL Server. However, in SQL Server
    2017, the Python launcher has also been introduced, making Launchpad generally
    available to the second non-SQL Server language. The idea behind Launchpad is
    that since the infrastructure is already prepared, the SQL Server should, in the
    future, support other languages as well, such as JavaScript and C++, opening this
    service not only to predictive analytics and machine learning, but also to other
    standalone languages.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: Launchpad是SQL Server 2016中的一个新服务，支持使用SQL Server的外部存储过程执行外部脚本。然而，在SQL Server
    2017中，Python启动器也被引入，使得Launchpad对第二种非SQL Server语言也普遍可用。Launchpad背后的想法是，由于基础设施已经准备就绪，SQL
    Server未来应该支持其他语言，例如JavaScript和C++，这样不仅将此服务开放给预测分析和机器学习，还开放给其他独立语言。
- en: 'The Launchpad service (service name: `MSSQLLaunchpad`) is dependent on the
    SQL Server service (service name: `MSSQLSERVER`), which means that, when restarting
    or stopping a SQL Server service, the Launchpad service will be restarted or stopped
    also.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Launchpad服务（服务名称：`MSSQLLaunchpad`）依赖于SQL Server服务（服务名称：`MSSQLSERVER`），这意味着，当重启或停止SQL
    Server服务时，Launchpad服务也将被重启或停止。
- en: 'In addition, the R language has also brought two additional services: R Terminal
    service (abbreviated as RTerm) and BxlServer, which use SQL Satellite, an additional
    extension to SQL server that communicates between external runtime (correlating
    to the Launchpad service) and SQL Server; both can be found as processes.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，R语言还带来了两项额外的服务：R终端服务（简称RTerm）和BxlServer，它们使用SQL Satellite，这是SQL服务器的一个附加扩展，用于在外部运行时（与Launchpad服务相关联）和SQL
    Server之间通信；两者都可以作为进程找到。
- en: 'For easier understanding of these correlations, let''s start a simple PowerShell
    script to see all the components of `Launchpad` and `BxlServer`:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易理解这些相关性，让我们从一个简单的PowerShell脚本开始，看看`Launchpad`和`BxlServer`的所有组件：
- en: '[PRE2]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Additionally, with a simple T-SQL code, we can include the R script:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，通过简单的T-SQL代码，我们可以包含R脚本：
- en: '[PRE3]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Additionally, observe the Process Explorer and Launchpad Process:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，观察进程资源管理器和Launchpad进程：
- en: '![](img/00013.jpeg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00013.jpeg)'
- en: Figure 8
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图8
- en: It is obvious how communication creates the entire circle from SQL Server to
    R and back.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，通信如何从SQL Server到R，然后再返回。
- en: 'Furthermore, the Command Line also reveals that the Launchpad process uses
    the `RLauncher.dll` library and launches `sqlsatelitelaunch` using `sqlsatellite.dll`:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，命令行还显示Launchpad进程使用`RLauncher.dll`库，并使用`sqlsatellite.dll`启动`sqlsatelitelaunch`：
- en: '[PRE4]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Many more configurations will tell you where and how communication in this
    architecture is set up. Opening the `RLauncher.config` file will show you the
    following configuration:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 许多更多的配置会告诉你在这个架构中通信是如何设置和进行的。打开`RLauncher.config`文件将显示以下配置：
- en: '![](img/00014.gif)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00014.gif)'
- en: Figure 9
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图9
- en: 'Additionally, by changing the `TRACE_LEVEL` parameter, it can also reveal potential
    logs, showing same path and communication between the systems, as the `RevoScaleR`
    log also shows information on each worker session:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，通过更改`TRACE_LEVEL`参数，它还可以揭示潜在的日志，显示系统之间的相同路径和通信，正如`RevoScaleR`日志也显示了每个工作会话的信息：
- en: '[PRE6]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: R Limitations
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: R的限制
- en: 'Community blogs and forums, as well as package authors and contributors, are
    debating over the long list of R limitations the language has. Many are murky
    and some are based solemnly on a particular group of user experience, but the
    following limitations can be agreed upon:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 社区博客和论坛，以及包作者和贡献者，正在讨论R语言的长长限制列表。许多是模糊的，有些是基于特定用户群体的经验，但以下限制可以达成共识：
- en: Performance issues
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能问题
- en: Memory limitations
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存限制
- en: Security aspects
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全方面
- en: Language syntax
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 语言语法
- en: Performance issues
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 性能问题
- en: Over 40% of the R code is predominantly written in C, and a little bit over
    20% still in Fortran (the rest in C++, Java, and R), making some common computational
    tasks very costly. Microsoft (and, before, Revolution analytics) did rewrite some
    of the most frequently used functions from old Fortran to C/C++ in order to address
    performance issues.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 超过40%的R代码主要是用C语言编写的，还有略超过20%是用Fortran编写的（其余部分是C++、Java和R），这使得一些常见的计算任务变得非常昂贵。微软（以及之前的Revolution
    analytics）确实重新编写了一些最常用的函数，从旧的Fortran到C/C++，以解决性能问题。
- en: Many package authors did very similar things. For example, Matt Dowle—the main
    author of the `data.table` R package—did several language performance lift-ups
    to speed up most common data wrangling steps.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 许多包作者做了类似的事情。例如，`data.table`R包的主要作者Matt Dowle对语言性能进行了几次提升，以加快最常见的数据处理步骤。
- en: When comparing similar operations on the same dataset using different packages,
    such as `dplyr`, `plyr`, `data.table`, and `sqldf`, one can see the difference
    in the time performance with the same results.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用不同的包，如`dplyr`、`plyr`、`data.table`和`sqldf`，在相同的数据集上比较类似操作时，可以看到相同结果的时间性能差异。
- en: 'The following R sample shows roughly a 80 MiB big object with a simple grouping
    function of how much difference there is in the computation time. Packages `dpylr`
    and data.table stand out and have performance gain over 25x times better in comparison
    to `plyr` and `sqldf`. `data.table`, especially, is extremely efficient and this
    is mainly due to Matt''s extreme impetus to optimize the code of the `data.table`
    package in order to gain performance:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 以下R示例大致显示了一个80 MiB大的对象，以及一个简单的分组函数，说明了计算时间差异。`dpylr`和`data.table`包突出显示，与`plyr`和`sqldf`相比，性能提升了25倍以上。特别是`data.table`，它非常高效，这主要归功于Matt对`data.table`包代码进行极端优化的动力，以获得更好的性能：
- en: '[PRE7]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The Microsoft `RevoScaleR` package, on the other hand, is optimized as well
    and can supersede all of these packages in terms of performance and large datasets.
    This is just to prove how Microsoft has made R ready for large datasets to address
    the performance issues.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，微软的`RevoScaleR`包也得到了优化，在性能和大数据集方面可以超越所有这些包。这只是为了证明微软是如何使R准备好处理大数据集以解决性能问题的。
- en: Memory limitations
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内存限制
- en: R is memory bound. This literally means that the dataset must fit into the client's
    RAM. From the previous example, if someone is going to run a simple algebraic
    operation, some matrix computation, or any kind of distance-based algorithm (that
    is heavy on computation), the R system would be limited to what would fit into
    the RAM. No spill to disk or any kind of temporary object is available, unless
    the user loads a package that allows otherwise.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: R是内存受限的。这字面意思是说数据集必须适合客户端的RAM。从先前的例子中，如果有人要运行一个简单的代数运算，一些矩阵计算，或任何基于距离的算法（计算量较大），R系统将仅限于适合RAM的内容。没有溢出到磁盘或任何临时对象，除非用户加载了一个允许这样做的包。
- en: Again, Microsoft has a solution with the `RevoScaleR` package that covers this
    limitation. With the introduction of the **eXternal Data Frame** (**XDF**) format,
    the package is able to store any size of the dataset (there is no recorder upper
    limit) in this format that is persisted on the disk, with conversion from a binary,
    blob, CSV, or any other format to XDF format. This limitation is made possible
    in Microsoft Machine Learning R Server or Machine Learning R Services.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，微软通过`RevoScaleR`包提供了解决方案，覆盖了这一限制。通过引入**外部数据帧**（**XDF**）格式，该包能够以这种格式存储任何大小的数据集（没有记录的上限），这种格式是持久化在磁盘上的，并且可以从二进制、blob、CSV或任何其他格式转换为XDF格式。这种限制在微软机器学习R服务器或机器学习R服务中成为可能。
- en: Security aspects
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全方面
- en: The evolution of the R language as a GNU distribution has been evolving over
    the past couple of decades as a client-based solution and, even before the dawn
    of the internet, all datasets have been securely stored on one's machine. With
    the spread of data over the internet, cloud services, and connected systems, as
    well as more and more present hybrid solution systems, the security aspect of
    reading, writing, analyzing, and storing data has never been a question. However,
    in the past ten years, more and more systems have been emerging, enterprise needs
    have changed, people roles have changed—but the core R engine and IDE has not
    yet taken a step in this direction. From this aspect, it seems as if R wants to
    remain a university developed and driven software. With R integration into SQL
    Server, Microsoft has addressed these issues and has not only created database
    roles, but also added services that make the connection to R and all computations
    securely, diminishing the possibilities of security vulnerabilities.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: R语言的演变作为GNU发行版，在过去几十年中一直作为一个基于客户端的解决方案在发展，甚至在互联网出现之前，所有数据集都安全地存储在用户的机器上。随着数据在互联网、云服务和连接系统的传播，以及越来越多的混合解决方案系统，读取、写入、分析和存储数据的安全性方面从未成为问题。然而，在过去十年中，越来越多的系统正在出现，企业需求发生了变化，人们的角色也发生了变化——但是核心的R引擎和IDE还没有在这个方向上迈出一步。从这个角度来看，R似乎想要保持为一个由大学开发和驱动的软件。随着R集成到SQL
    Server中，微软解决了这些问题，不仅创建了数据库角色，还增加了使R和所有计算安全连接的服务，减少了安全漏洞的可能性。
- en: Language syntax
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 语言语法
- en: R language is very flexible and allows a user to change the S4 methods and S3
    objects, generic objects, and all of the user-defined objects and variables. As
    the R Language is still not an object-orientated language, it is a question of
    debate if this is true or not (because currently, R understands only three object-orientated
    systems) because both S3 and S4 objects are OO orientated structures.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: R语言非常灵活，允许用户更改S4方法和S3对象、泛型对象以及所有用户定义的对象和变量。由于R语言仍然不是一个面向对象的语言，这是一个有争议的问题，是否真的如此（因为目前R只理解三种面向对象系统），因为S3和S4对象都是面向对象的架构。
- en: 'R Syntax might be easy to learn, but it is also easy to develop some doubts.
    The following are a couple of syntax disagreements in the R community:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: R语法可能容易学习，但也容易产生一些疑问。以下是在R社区中的一些语法争议：
- en: Several different R packages give users the same functionalities (data wrangling,
    data analysis, data predictions). As previously displayed, when comparing the
    performances of these packages for data-wrangling purposes with usage, users will
    see which package performs better or which package suit their needs better. Idiosyncratic
    syntax with confusing structures is also a part of the package and can be used
    in many different ways.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 几个不同的 R 包为用户提供相同的功能（数据处理、数据分析、数据预测）。如前所述，当比较这些包在数据处理目的上的性能和用法时，用户将看到哪个包表现更好或哪个包更适合他们的需求。具有令人困惑结构的独特语法也是包的一部分，并且可以用许多不同的方式使用。
- en: There are multiple ways to do the same thing (declaring a variable, constructing
    a class, handling data, and predicting with the same algorithm).
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 做同样的事情有多种方式（声明变量、构建类、处理数据以及使用相同算法进行预测）。
- en: Missing conventions, namespaces, and package inter-dependencies.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺少约定、命名空间和包之间的依赖关系。
- en: Somewhat challenging error messages with lacking documentation/help.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有些挑战性的错误信息，缺乏文档/帮助。
- en: Case sensitivity.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区分大小写。
- en: It is cumbersome to list all of the issues, but one can quickly get an idea
    of how the language evolved, but still is embraced by the community more and more;
    R as a language is perceived as the most popular to date.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 列出所有问题很麻烦，但可以快速了解语言是如何演变的，而且越来越受到社区的欢迎；R 作为一种语言，被认为是迄今为止最受欢迎的。
- en: Summary
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter has given an overview on the ecosystem of the new R Service and
    the family of R Engine products offered by Microsoft.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 本章概述了由微软提供的新 R 服务生态系统和 R 引擎产品系列。
- en: When thinking about R and SQL Server, one must keep in mind what the needs in
    the enterprise will be and how the infrastructure will be prepared in order to
    leverage the maximum performance from powerful `RevoScaleR` packages.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当考虑 R 和 SQL Server 时，必须记住企业中的需求以及如何准备基础设施以充分利用强大的 `RevoScaleR` 包的性能。
- en: In the next chapter, we will see how to use these ScaleR computational functions
    to deliver better performance results, and how to set up your ecosystem.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将看到如何使用这些 ScaleR 计算函数来提供更好的性能结果，以及如何设置您的生态系统。
