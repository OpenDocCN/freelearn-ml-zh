- en: Unlocking Production Issues
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 解锁生产问题
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下菜谱：
- en: Handling unstructured data
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理非结构化数据
- en: Deploying machine learning models
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署机器学习模型
- en: Keeping track of changes into production
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟踪生产中的更改
- en: Tracking accuracy to optimize model scaling
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跟踪准确性以优化模型缩放
- en: Technical requirements
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To address the recipes in this chapter, you will need the following files (available
    on GitHub):'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 为了处理本章中的菜谱，你需要以下文件（可在GitHub上找到）：
- en: '`UNData.py`'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`UNData.py`'
- en: '`TextFile.txt`'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TextFile.txt`'
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: In the previous chapters, we have extensively covered the main algorithms that
    are used in machine learning. We have seen how many and which tools the Python
    programmer has at their disposal to construct algorithms that are capable of predicting
    or classifying specific information. The next step is to create software that
    can be made available for production and subsequent marketing.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们已经广泛介绍了机器学习中使用的算法。我们看到了Python程序员可以使用的许多工具，以及他们如何构建能够预测或分类特定信息的算法。下一步是创建可以用于生产和随后营销的软件。
- en: This is not a small challenge, given that making software available for marketing
    involves the resolution of considerable problems that include hardware and software
    aspects. In fact, we must first determine which types of devices will host the
    software and then select the programming platform that is most suitable for that
    type of technology.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到将软件用于营销需要解决包括硬件和软件方面的相当多的问题，这并不是一个小挑战。事实上，我们首先必须确定哪些类型的设备将托管该软件，然后选择最适合那种技术的编程平台。
- en: Handling unstructured data
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理非结构化数据
- en: So far, we have highlighted the importance of input data in the creation of
    a model based on automatic learning. In particular, we have seen how important
    it is to adequately process this data before providing it in our algorithm. Another
    challenge that we must face before starting our production work is to learn how
    to deal with unstructured data. By unstructured data, we mean data that is stored
    without any scheme. An example is files containing text that has been produced
    by one of the most popular text editing software or a multimedia file, but this
    unstructured data could also take the form of emails, PDFs, and so on. Unstructured
    data differs from databases due to the fact that they may have irregularities
    that do not allow you to catalog or store them in a particular process.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经强调了在基于自动学习的模型创建中输入数据的重要性。特别是，我们已经看到在将数据提供给我们的算法之前，适当处理这些数据是多么重要。在我们开始生产工作之前，我们必须面对的另一个挑战是学习如何处理非结构化数据。非结构化数据是指没有任何方案的存储数据。一个例子是包含由最流行的文本编辑软件或多媒体文件生成的文本的文件，但这些非结构化数据也可以是电子邮件、PDF等。非结构化数据与数据库的不同之处在于，它们可能有不规则性，这不允许你将它们编目或以特定过程存储。
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: As a source, I used a passage from the novel *The Adventures of Huckleberry
    Finn*, by Mark Twain, which can be viewed on GitHub.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 作为来源，我使用了马克·吐温的小说《哈克贝利·费恩历险记》中的一段，可以在GitHub上查看。
- en: As you can see, it is an unstructured text. We will handle this text and remove
    the unnecessary elements before saving the result in a structured form.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，这是一段非结构化文本。我们将在将结果以结构化形式保存之前处理此文本并删除不必要的元素。
- en: How to do it...
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'In this recipe, we will learn how to handle unstructured data. Follow these
    steps to begin:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将学习如何处理非结构化数据。按照以下步骤开始：
- en: 'Create a new Python file and import the following packages (the full code is
    in the `UNData.py` file already provided):'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的Python文件并导入以下包（完整的代码已在提供的`UNData.py`文件中）：
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let''s define the input filename:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们定义输入文件名：
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We need to initialize the dictionary that will contain the data:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要初始化包含数据的字典：
- en: '[PRE2]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now, we can load and print the data:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以加载并打印数据：
- en: '[PRE3]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Let''s convert the data into lowercase:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将数据转换为小写：
- en: '[PRE4]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Let''s remove any punctuation:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们删除任何标点符号：
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Let''s remove the numbers:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们删除数字：
- en: '[PRE6]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Let''s remove any extra blank spaces:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们删除任何额外的空白字符：
- en: '[PRE7]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Finally, we will print and save the results in a `.csv` file:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们将打印并将结果保存到`.csv`文件中：
- en: '[PRE8]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The following screenshot shows the input file (left) and the results that were
    obtained (right):'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了输入文件（左侧）和获得的结果（右侧）：
- en: '![](img/4e3cd6e5-5037-4101-90a9-5f4efe8c91bb.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4e3cd6e5-5037-4101-90a9-5f4efe8c91bb.png)'
- en: How it works...
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In this recipe, we learned how to handle unstructured data. To do this, a piece
    of text from Mark Twain's novel was used. After loaded the text, punctuation,
    numbers, and extra blank spaces were removed. Also, all of the text was transformed into
    lowercase. Finally, the results was stored in a `.csv` file.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们学习了如何处理非结构化数据。为此，使用了马克·吐温小说中的一段文字。在加载文本后，去除了标点符号、数字和额外的空白空间。此外，所有文本都被转换成了小写。最后，结果存储在一个`.csv`文件中。
- en: There's more…
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: In this recipe, we have addressed the problem of text analysis, which represents
    the process of converting the unstructured text into meaningful data for a subsequent
    analysis phase. Several techniques can be used for text analysis, and we dealt
    with several in [Chapter 7](fc31e304-3301-4ebf-80e4-404ac6e26606.xhtml),* Analyzing
    Text Data*.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们解决了文本分析的问题，这代表了将非结构化文本转换为后续分析阶段有意义数据的过程。可以用于文本分析的技术有很多，我们在第7章[分析文本数据](fc31e304-3301-4ebf-80e4-404ac6e26606.xhtml)，*分析文本数据*中处理了其中的一些。
- en: See also
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 相关内容
- en: Refer to [Chapter 7](fc31e304-3301-4ebf-80e4-404ac6e26606.xhtml), *Analyzing
    Text Data*
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考第7章 [分析文本数据](fc31e304-3301-4ebf-80e4-404ac6e26606.xhtml)，*分析文本数据*
- en: 'Refer to *Unstructured Data* (from Stanford University): [https://web.stanford.edu/class/cs102/lecturenotes/UnstructuredData.pdf](https://web.stanford.edu/class/cs102/lecturenotes/UnstructuredData.pdf)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考斯坦福大学提供的*非结构化数据*：[https://web.stanford.edu/class/cs102/lecturenotes/UnstructuredData.pdf](https://web.stanford.edu/class/cs102/lecturenotes/UnstructuredData.pdf)
- en: Deploying machine learning models
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署机器学习模型
- en: Bringing into production a project based on machine learning isn't easy. In
    fact, there are only a few companies that have managed to do it, at least for
    large projects. The difficulties lie in the fact that artificial intelligence
    is not something that is produced with finished software. A starting platform
    is needed to implement its own software model encountering problems that are not
    analogous to those that the developers usually encounter. The classic approach
    of software engineering leads to abstraction so that you arrive at simple code
    that can be modified and improved. Unfortunately, it is difficult to pursue abstraction
    in machine learning applications, just as it is difficult to control the complexity
    of machine learning. The best thing to do is focus on a platform that has the
    functions you need and, at the same time, allows you to withdraw from the mathematical
    foundations of machine learning. In this recipe, we will present the Amazon SageMaker
    platform.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 将基于机器学习的项目投入生产并不容易。实际上，只有少数公司设法做到了，至少对于大型项目来说是这样。困难在于人工智能不是通过成品软件生产的。需要一个起始平台来实现自己的软件模型，遇到的问题与开发者通常遇到的问题不相似。软件工程的经典方法导致抽象，从而得到可以修改和改进的简单代码。不幸的是，在机器学习应用中很难追求抽象，就像很难控制机器学习的复杂性一样。最好的办法是关注一个具有所需功能的平台，同时允许您从机器学习的数学基础中退出。在本食谱中，我们将介绍Amazon
    SageMaker平台。
- en: Getting ready
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Amazon SageMaker is a paid service, but thanks to the AWS free usage plan, you
    can start using Amazon SageMaker for free for the first two months after registration. For
    further information on the available tariff plans, check out the following link: [https://aws.amazon.com](https://aws.amazon.com).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon SageMaker是一项付费服务，但多亏了AWS免费使用计划，您可以在注册后的前两个月内免费使用Amazon SageMaker。有关可用计费计划的更多信息，请查看以下链接：[https://aws.amazon.com](https://aws.amazon.com)。
- en: How to do it...
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s see how we can make use of Amazon SageMaker:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何利用Amazon SageMaker：
- en: 'First, you need to log in to the console:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，您需要登录到控制台：
- en: '![](img/1883d625-2090-43ce-9f27-b67a21b43b85.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1883d625-2090-43ce-9f27-b67a21b43b85.png)'
- en: 'Launch a notebook instance with one of the example notebooks:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下示例笔记本之一启动笔记本实例：
- en: '![](img/2974153a-5048-4638-a883-c695d3a719ab.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2974153a-5048-4638-a883-c695d3a719ab.png)'
- en: Change that instance by connecting to custom data sources.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过连接到自定义数据源来更改该实例。
- en: 'Follow the examples to create, form, and validate the models:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照示例创建、形成和验证模型：
- en: '![](img/4c18d353-cf11-4b3b-b14b-fc8e30507c24.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4c18d353-cf11-4b3b-b14b-fc8e30507c24.png)'
- en: Finally, distribute the result in production by following the on-screen steps.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，按照屏幕上的步骤在生产环境中分发结果。
- en: How it works...
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Amazon SageMaker is a fully managed service for the creation, training, and
    distribution of models based on machine learning. Amazon SageMaker comes with
    three modules—**Build**, **Train**, and **Deploy**. The Build module allows us
    to work with data, experiment with algorithms, and view the output. The Train
    module trains the model and optimizes it on a large scale. Finally, there is the
    Deploy module, which allows us to easily test the inference of the model with
    low latency.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon SageMaker是一个用于创建、训练和分发基于机器学习模型的完全托管服务。Amazon SageMaker包含三个模块——**构建**、**训练**和**部署**。构建模块允许我们处理数据，实验算法，并查看输出。训练模块在大型规模上训练模型并优化它。最后，是部署模块，它允许我们以低延迟轻松测试模型的推理。
- en: There's more…
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多…
- en: Amazon SageMaker allows us to create machine learning models for use in intelligent
    and predictive apps. From a security standpoint, Amazon SageMaker encrypts all
    scripts based on machine learning. Requests to the API and the Amazon SageMaker
    console are forwarded via a **secure connection** (**SSL**). We can use AWS Identity
    and Access Management to automatically assign access permissions to training and
    distribution resources. We can also use Bucket S3, an Amazon SageMaker KMS key,
    to notebook training processes and endpoints to encrypt storage volumes.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon SageMaker允许我们创建用于智能和预测应用的机器学习模型。从安全角度来看，Amazon SageMaker加密了所有基于机器学习的脚本。对API和Amazon
    SageMaker控制台的请求通过**安全连接**（**SSL**）转发。我们可以使用AWS身份和访问管理自动分配训练和分发资源的访问权限。我们还可以使用Bucket
    S3、Amazon SageMaker KMS密钥来加密笔记本训练过程和端点的存储卷。
- en: See also
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参见
- en: Refer to the official documentation of Amazon SageMaker: [https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/whatis.html](https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/whatis.html)
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考Amazon SageMaker的官方文档：[https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/whatis.html](https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/whatis.html)
- en: Keeping track of changes into production
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 跟踪生产中的变更
- en: The distribution of the model is not the end—it's only the beginning. The real
    problems start from here. We have no control over the data in the real environment.
    Changes may occur and we must be ready to detect and update our model before it
    becomes obsolete. Monitoring is important to ensure the reliability, availability,
    and performance of our machine learning application. In this recipe, we will discuss
    some tools that we can use to keep track of changes that occur in the model.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 模型的分布不是终点——这只是开始。真正的问题从这里开始。我们无法控制真实环境中的数据。可能会发生变更，我们必须准备好在模型过时之前检测和更新我们的模型。监控对于确保我们的机器学习应用程序的可靠性、可用性和性能至关重要。在本食谱中，我们将讨论一些我们可以用来跟踪模型中发生变化的工具。
- en: How to do it...
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following tools are available to monitor an Amazon SageMaker application:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 以下工具可用于监控Amazon SageMaker应用程序：
- en: '**Amazon CloudWatch**: This tool, which is available in AWS, monitors the resources
    and applications that run in real time. Parameters can be collected and tracked,
    custom control panels can be created, and alerts can be set to notify or take
    action when a specified parameter reaches a specified threshold. The following
    screenshot shows an overview of Amazon CloudWatch:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Amazon CloudWatch**：这个工具在AWS中可用，监控实时运行的资源和应用。可以收集和跟踪参数，可以创建自定义控制面板，并可以设置警报，当指定的参数达到指定的阈值时通知或采取行动。以下截图显示了Amazon
    CloudWatch的概述：'
- en: '![](img/c38d2062-0e36-40ff-b71d-8bd2f17c6e0e.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c38d2062-0e36-40ff-b71d-8bd2f17c6e0e.png)'
- en: '**Amazon CloudWatch Logs**: This tool, which is available in AWS, allows you
    to monitor, store, and access log files from EC2, AWS CloudTrail instances, and
    other sources. The CloudWatch logs monitor information in the log files and allow
    us to send notifications when certain thresholds are reached.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Amazon CloudWatch Logs**：这个工具在AWS中可用，允许您监控、存储和访问来自EC2、AWS CloudTrail实例和其他来源的日志文件。CloudWatch日志监控日志文件中的信息，并在达到某些阈值时发送通知。'
- en: '**AWS CloudTrail**: This tool, which is available in AWS, retrieves API calls
    and related events that are created by our account and returns a log file to a
    specified Amazon S3 bucket. We can also retrieve useful information about the
    users and accounts that have called the services, and we can trace the IP address
    from which the calls were made and when they occurred.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AWS CloudTrail**：这个工具在AWS中可用，检索由我们的账户创建的API调用和相关事件，并将日志文件返回到指定的Amazon S3存储桶。我们还可以检索有关调用服务的用户和账户的有用信息，并可以追踪调用发生的IP地址和时间。'
- en: How it works...
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: To monitor Amazon SageMaker, we can use Amazon CloudWatch, which collects raw
    data and transforms it into readable parameters in real time. These statistics
    are kept for a period of 15 months so that you can access historical information
    and offer a better perspective on the performance of the service or web application.
    However, the Amazon CloudWatch console limits the search to the parameters that
    have been updated in the last two weeks. This limitation allows you to view the
    most up-to-date processes in the namespace. It is also possible to set alarms
    that control certain thresholds and send notifications or take action when these
    thresholds are reached.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要监控Amazon SageMaker，我们可以使用Amazon CloudWatch，它实时收集原始数据并将其转换为可读的参数。这些统计数据保留15个月，以便您可以访问历史信息，并从更好的角度了解服务或Web应用程序的性能。然而，Amazon
    CloudWatch控制台将搜索限制在最近两周内已更新的参数。这种限制允许您查看命名空间中最新的过程。还可以设置警报，控制某些阈值，并在达到这些阈值时发送通知或采取行动。
- en: There's more…
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: A machine learning model is based on a set of input training data with various
    attributes. Therefore, it is important to check whether the input data that the
    model was trained on still applies to the actual data in the real environment.
    The data change could be sudden, or it could change gradually over time. Therefore,
    it is essential to identify patterns of change and correct the model in advance. Once
    the model has been distributed in a production environment, it is necessary to
    follow the steps mentioned in the next recipe to keep our models healthy and useful
    for their end users.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习模型基于一组具有各种属性的输入训练数据。因此，检查模型训练所用的输入数据是否仍然适用于实际环境中的数据非常重要。数据变化可能是突然的，也可能是随着时间的推移逐渐变化。因此，识别变化模式并在事先纠正模型是至关重要的。一旦模型在生产环境中分发，就需要遵循下一道菜谱中提到的步骤，以保持我们的模型健康，并使其对最终用户有用。
- en: See also
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参见
- en: Refer to the official documentation of Amazon CloudWatch: [https://docs.aws.amazon.com/cloudwatch/index.html](https://docs.aws.amazon.com/cloudwatch/index.html)
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考Amazon CloudWatch的官方文档：[https://docs.aws.amazon.com/cloudwatch/index.html](https://docs.aws.amazon.com/cloudwatch/index.html)
- en: Refer to the official documentation of Amazon CloudWatch Logs: [https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html](https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html)
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考Amazon CloudWatch Logs的官方文档：[https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html](https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html)
- en: Refer to the official documentation of Amazon CloudTrail: [https://docs.aws.amazon.com/cloudtrail/index.html](https://docs.aws.amazon.com/cloudtrail/index.html)
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考Amazon CloudTrail的官方文档：[https://docs.aws.amazon.com/cloudtrail/index.html](https://docs.aws.amazon.com/cloudtrail/index.html)
- en: Tracking accuracy to optimize model scaling
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 跟踪准确性以优化模型扩展
- en: As we saw in [Chapter 15](8bc48ed3-a991-49e8-8c04-148505fac009.xhtml), *Automated
    Machine Learning and Transfer Learning*, most machine learning algorithms employ
    a series of parameters that control the functionality of the underlying algorithm.
    These parameters are generally called hyperparameters; their values influence
    the quality of trained models. Automatic model optimization is the process of
    finding a set of hyperparameters of an algorithm that offer an optimal model. In
    this recipe, we will learn how to use the Amazon SageMaker tools to optimize our
    model automatically.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[第15章](8bc48ed3-a991-49e8-8c04-148505fac009.xhtml)，“自动化机器学习和迁移学习”中看到的，大多数机器学习算法使用一系列参数来控制底层算法的功能。这些参数通常被称为超参数；它们的值影响训练模型的质量。自动模型优化是寻找算法一组超参数的过程，这些超参数提供最优模型。在本菜谱中，我们将学习如何使用Amazon
    SageMaker工具自动优化我们的模型。
- en: How to do it...
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To perform an automatic optimization of our model, follow these steps:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 要自动优化我们的模型，请按照以下步骤操作：
- en: Open the Amazon SageMaker console.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Amazon SageMaker控制台。
- en: Select the Endpoint item in the navigation pane at the bottom-left.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左下角的导航面板中选择“端点”项目。
- en: '![](img/1e6a5090-7a69-438a-9a22-c183352cbd6e.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1e6a5090-7a69-438a-9a22-c183352cbd6e.png)'
- en: Select the endpoint you want to configure from those available.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从可用的端点中选择您想要配置的端点。
- en: Select the variant you want to configure and configure automatic scaling. Do
    this for the Endpoint runtime settings.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您想要配置的变体并配置自动扩展。对于端点运行时设置，也要这样做。
- en: Enter the average number of invocations per instance, per minute for the variant.
    Do this for the target value.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入每个实例每分钟的调用平均次数。为此，针对目标值进行操作。
- en: Enter the number of seconds for each cooling period.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入每个冷却周期的秒数。
- en: To prevent the scaling policy from deleting variant instances, select the Disable
    scale option.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了防止缩放策略删除变体实例，请选择禁用缩放选项。
- en: Click Save.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 保存。
- en: How it works...
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The hyperparameter optimization procedure represents a special case of regression.
    The problem can be framed as follows: a set of input features is available, and
    then this procedure optimizes a model for the adopted parameters. The choice of
    parameters is free as long as it is defined by the algorithm we are using. In
    the Amazon hyperparameter optimization procedure, SageMaker tries to find out
    what hyperparameter combinations are more likely to produce the best results,
    and tries to execute the training processes to test these attempts. To do this, the
    first set of values for those hyperparameters is tested, and then the procedure
    uses regression to choose the next set of values to be tested.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 超参数优化过程代表了回归的一个特殊情况。这个问题可以这样表述：有一组输入特征可用，然后这个过程优化一个针对采用参数的模型。只要它是由我们使用的算法定义的，参数的选择就是自由的。在亚马逊超参数优化过程中，SageMaker试图找出哪些超参数组合更有可能产生最佳结果，并尝试执行训练过程来测试这些尝试。为此，首先测试这些超参数的第一组值，然后该过程使用回归来选择下一组要测试的值。
- en: There's more…
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: When you choose the best hyperparameters for the next training process, hyperparameter
    optimization takes into consideration everything you know about the problem, up
    to the present time. In some cases, the hyperparameter optimization procedure
    can choose a point that produces an incremental improvement in the best result
    that's been found so far. In this way, the procedure uses already known results.
    In other cases, you can choose a set of hyperparameters far from those you have
    already tested. In this way, the procedure explores the space and searches for
    new areas that haven't been fully analyzed yet. The compromise between exploration
    and exploitation is common in many machine learning problems.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当你选择下一次训练过程的最佳超参数时，超参数优化会考虑你到目前为止对该问题的所有了解。在某些情况下，超参数优化过程可以选择一个点，该点可以产生迄今为止找到的最佳结果的增量改进。这样，该过程使用已知的结果。在其他情况下，你可以选择一组远离你已经测试过的超参数。这样，该过程探索空间并寻找尚未完全分析的新区域。在许多机器学习问题中，探索和利用之间的权衡是常见的。
- en: See also
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参见
- en: Refer to *Automatically Scale Amazon SageMaker Models*: [https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/endpoint-auto-scaling.html](https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/endpoint-auto-scaling.html)
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考文档：*自动缩放Amazon SageMaker模型*：[https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/endpoint-auto-scaling.html](https://docs.aws.amazon.com/en_us/sagemaker/latest/dg/endpoint-auto-scaling.html)
