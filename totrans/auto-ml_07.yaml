- en: '*Chapter 5*: Automated Machine Learning with Microsoft Azure'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"By far, the greatest danger of artificial intelligence is that people conclude
    too early that they understand it."'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: – Eliezer Yudkowsky
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The Microsoft Azure platform and its associated toolset are diverse and part
    of a larger enterprise ecosystem that is a force to be reckoned with. It enables
    businesses to focus on what they do best by accelerating growth via improved communication,
    resource management, and facilitating advance actionable analytics. In the previous
    chapter, you were introduced to the Azure Machine Learning platform and its services.
    You learned how to get started with Azure machine learning, and you took a glimpse
    at the end-to-end machine learning life cycle using the power of the Microsoft
    Azure platform and its services. That was quite literally (in the non-literal
    sense of the word) the tip of the iceberg.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will get started by looking at **Automated Machine Learning**
    (**AutoML**) in Microsoft Azure. You will build a classification model and perform
    time series prediction using Azure's AutoML capabilities. This chapter will equip
    you with the skills you'll need to build and deploy AutoML solutions.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: AutoML in Microsoft Azure
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time series prediction using Azure AutoML and JupyterLab
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let's get started!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: AutoML in Microsoft Azure
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: AutoML is treated as a first-class citizen in the Azure platform. The fundamental
    ideas behind feature engineering, network architecture search, and hyperparameter
    tuning are the same as what we discussed in [*Chapter 2*](B16890_02_Final_VK_ePub.xhtml#_idTextAnchor049),
    *Automated Machine Learning, Algorithms, and Techniques*, and [*Chapter 3*](B16890_03_Final_VK_ePub.xhtml#_idTextAnchor058),
    *Automated Machine Learning with Open Source Tools and Libraries*. However, the
    layer of abstraction that's used to democratize these skills makes them much more
    appealing to non-machine learning experts.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: 'The key principles of AutoML in the Azure platform are shown in the following
    diagram. User input such as datasets target metrics, and constraints (how long
    to run the job, what the allocated budget is for compute, and so on) drive the
    AutoML "engine", which completes iterations to find the best model and rank it
    according to the score of **Training Success**:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.1 – Azure AutoML workflow – how AutoML works'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_5.1_B16890.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.1 – Azure AutoML workflow – how AutoML works
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we''ll provide a step-by-step walkthrough of the AutoML approach.
    In [*Chapter 4*](B16890_04_Final_VK_ePub.xhtml#_idTextAnchor076), *Getting Started
    with Azure Machine Learning*, you saw the main page for Azure machine learning.
    There, we created a classification model and tested it using a notebook:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.2 – Azure Machine Learning portal'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_5.2_B16890.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: Figure 5.2 – Azure Machine Learning portal
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let''s explore how AutoML-based model development works when it comes
    to training and tuning a model:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们探索基于 AutoML 的模型开发在训练和调整模型时的运作方式：
- en: From the Azure portal, click on **Automated ML** | **Start now**. You will be
    taken to the following screen, where you can create a new Automated ML run:![Figure
    5.3 – Azure Machine Learning – Creating an Automated ML run
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Azure 门户，点击 **自动机器学习** | **立即开始**。您将被带到以下屏幕，在那里您可以创建一个新的自动机器学习运行：![图 5.3 –
    Azure 机器学习 – 创建自动机器学习运行
- en: '](img/Figure_5.3_B16890.jpg)'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.3_B16890.jpg)'
- en: Figure 5.3 – Azure Machine Learning – Creating an Automated ML run
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.3 – Azure 机器学习 – 创建自动机器学习运行
- en: The first step of creating an automated ML run is selecting a dataset to work
    with. Here, you can either create your own dataset or – better yet – select an
    existing one from the repository of public datasets that Azure provides:![Figure
    5.4 – AutoML dataset selection page
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建自动机器学习运行的第一步是选择要工作的数据集。在这里，您可以选择创建自己的数据集，或者——更好的是——从 Azure 提供的公共数据集存储库中选择现有的一个：![图
    5.4 – AutoML 数据集选择页面
- en: '](img/Figure_5.4_B16890.jpg)'
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.4_B16890.jpg)'
- en: Figure 5.4 – AutoML dataset selection page
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.4 – AutoML 数据集选择页面
- en: 'A dataset can be created from open datasets. In this case, we will use our
    tried and tested MNIST dataset to create the AutoML run, as shown in the following
    screenshot:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以从开放数据集中创建数据集。在这种情况下，我们将使用我们经过测试的 MNIST 数据集来创建 AutoML 运行，如下面的截图所示：
- en: MNIST dataset
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: MNIST 数据集
- en: Yann LeCun (Courant Institute, NYU) and Corinna Cortes (Google Labs, New York)
    hold the copyright for MNIST dataset, which is a derivative work from the original
    NIST datasets. The MNIST dataset has been made available under the terms of the
    Creative Commons Attribution-Share Alike 3.0 license.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Yann LeCun（纽约大学柯朗研究所）和 Corinna Cortes（纽约谷歌实验室）拥有 MNIST 数据集的版权，该数据集是原始 NIST 数据集的派生作品。MNIST
    数据集已在 Creative Commons Attribution-Share Alike 3.0 许可证下提供。
- en: '![Figure 5.5 – The Create dataset from Open Datasets page'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.5 – 从开放数据集创建数据集页面'
- en: '](img/Figure_5.5_B16890.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.5_B16890.jpg)'
- en: Figure 5.5 – The Create dataset from Open Datasets page
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.5 – 从开放数据集创建数据集页面
- en: 'Once you have selected the dataset, it will appear as part of your run, and
    you can also preview it. Apart from specifying the dataset''s version, you can
    also specify if you would like to use the entire dataset, or whether it should
    be registered as a tabular data source or a file type data source:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您选择了数据集，它将作为您运行的一部分出现，您还可以预览它。除了指定数据集的版本外，您还可以指定您是否希望使用整个数据集，或者它应该注册为表格数据源或文件类型数据源：
- en: '![Figure 5.6 – Dataset from the Azure Machine Learning dataset repository of
    curated datasets'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.6 – 来自 Azure 机器学习数据集存储库的精选数据集'
- en: '](img/Figure_5.6_B16890.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.6_B16890.jpg)'
- en: Figure 5.6 – Dataset from the Azure Machine Learning dataset repository of curated
    datasets
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.6 – 来自 Azure 机器学习数据集存储库的精选数据集
- en: 'Upon selecting **Create**, you will see the following screen as the dataset
    becomes part of your run:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 选择 **创建** 后，您将看到以下屏幕，因为数据集已成为您运行的一部分：
- en: '![Figure 5.7 – Dataset from the Azure Machine Learning dataset repository of
    curated datasets'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.7 – 来自 Azure 机器学习数据集存储库的精选数据集'
- en: '](img/Figure_5.7_B16890.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.7_B16890.jpg)'
- en: Figure 5.7 – Dataset from the Azure Machine Learning dataset repository of curated
    datasets
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.7 – 来自 Azure 机器学习数据集存储库的精选数据集
- en: 'The MNIST dataset can also be seen as part of the data preview if you click
    on the dataset''s name, as shown in the following screenshot:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您点击数据集的名称，MNIST 数据集也可以作为数据预览的一部分查看，如下面的截图所示：
- en: '![Figure 5.8 – Preview of the dataset from the Azure Machine Learning dataset
    repository of curated datasets'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.8 – 来自 Azure 机器学习数据集存储库的精选数据集的预览'
- en: '](img/Figure_5.8_B16890.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.8_B16890.jpg)'
- en: Figure 5.8 – Preview of the dataset from the Azure Machine Learning dataset
    repository of curated datasets
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.8 – 来自 Azure 机器学习数据集存储库的精选数据集的预览
- en: Let's face it – this preview of the MNIST pixel dataset isn't that exciting,
    but if you had some more representative data (healthcare, retail, or financial
    data, and so on), the preview would help us understand that the ingestion process
    went well and that we are not running the risk of a delimiter fiasco.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们面对现实——这个 MNIST 像素数据集的预览并不那么令人兴奋，但如果您有一些更具代表性的数据（如医疗保健、零售或金融数据等），预览将帮助我们了解数据导入过程进行得很好，我们没有运行分隔符灾难的风险。
- en: 'Similarly, the data statistics are shown in the following screenshot. If you
    are pandas-inclined, think of it as the `describe()` feature. Due to its image-based
    nature, this isn''t quite as relevant, but when it comes to some of the other
    datasets we will use later in this chapter, it comes in quite handy:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，数据统计在以下屏幕截图中显示。如果你熟悉 pandas，可以将其视为 `describe()` 功能。由于其基于图像的特性，这并不完全相关，但当我们在本章后面使用一些其他数据集时，它却非常有用：
- en: '![Figure 5.9 – Preview of the data statistics in Azure AutoML'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.9 – Azure AutoML 中数据统计的预览'
- en: '](img/Figure_5.9_B16890.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.9_B16890.jpg)'
- en: Figure 5.9 – Preview of the data statistics in Azure AutoML
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.9 – Azure AutoML 中数据统计的预览
- en: Now that we have selected the dataset, we can configure the run by providing
    the experiment's name, target column (the labeled feature to train on and classify),
    and the compute cluster, as shown in the following screenshot:![Figure 5.10 –
    Configuring an AutoML run
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经选择了数据集，我们可以通过提供实验名称、目标列（用于训练和分类的标记特征）和计算集群来配置运行，如下面的屏幕截图所示：![图 5.10 –
    配置 AutoML 运行
- en: '](img/Figure_5.10_B16890.jpg)'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.10_B16890.jpg)'
- en: Figure 5.10 – Configuring an AutoML run
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.10 – 配置 AutoML 运行
- en: The third and final step is to select the task type – classification, regression,
    or time series forecasting. In this case, we are classifying digits based on their
    associated labels. You will learn how to use the other task types in future examples:![Figure
    5.11 – Selecting the task type for the AutoML run
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第三步和最后一步是选择任务类型 – 分类、回归或时间序列预测。在这种情况下，我们根据关联的标签对数字进行分类。你将在未来的示例中学习如何使用其他任务类型：![图
    5.11 – 选择 AutoML 运行的任务类型
- en: '](img/Figure_5.11_B16890.jpg)'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.11_B16890.jpg)'
- en: Figure 5.11 – Selecting the task type for the AutoML run
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.11 – 选择 AutoML 运行的任务类型
- en: It is important to consider the additional configurations. Here, you can select
    a primary metric, its explainability, any allowed algorithms (by default, all
    of them are allowed), the exit criteria, and any validation split information,
    as shown in the following screenshot:![Figure 5.12 – Additional configuration
    for the task type of the AutoML run
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 考虑额外的配置是很重要的。在这里，你可以选择主要指标、其可解释性、任何允许的算法（默认情况下，所有算法都允许）、退出标准和任何验证分割信息，如下面的屏幕截图所示：![图
    5.12 – AutoML 运行的任务类型额外配置
- en: '](img/Figure_5.12_B16890.jpg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.12_B16890.jpg)'
- en: Figure 5.12 – Additional configuration for the task type of the AutoML run
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.12 – AutoML 运行的任务类型额外配置
- en: 'Additional configuration varies based on the task''s type. The following screenshot
    shows the regression configuration elements:'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 额外的配置根据任务类型而有所不同。以下屏幕截图显示了回归配置元素：
- en: '![Figure 5.13 – Additional configuration for the task type of the AutoML run'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.13 – AutoML 运行的任务类型额外配置'
- en: '](img/Figure_5.13_B16890.jpg)'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.13_B16890.jpg)'
- en: Figure 5.13 – Additional configuration for the task type of the AutoML run
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.13 – AutoML 运行的任务类型额外配置
- en: '**Featurization** – that is, selecting and transforming features – is an important
    factor to keep in mind as you move forward with the dataset. When you click on
    the **View Featurization Settings** link, Azure machine learning provides you
    with the following screen. From here, you can select the feature''s type, assign
    a specific data type, and specify what you wish to impute the feature with:'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**特征化** – 即选择和转换特征 – 是你在处理数据集时需要考虑的重要因素。当你点击 **查看特征化设置** 链接时，Azure 机器学习会为你提供以下屏幕。从这里，你可以选择特征的类型，分配特定的数据类型，并指定你希望用哪些数据来填充特征：'
- en: '![Figure 5.14 – Featurization of the AutoML run'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.14 – AutoML 运行的特征化'
- en: '](img/Figure_5.14_B16890.jpg)'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.14_B16890.jpg)'
- en: Figure 5.14 – Featurization of the AutoML run
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.14 – AutoML 运行的特征化
- en: '**Automatic featurization** – that is, turning different data types into numerical
    vectors – is a typical part of any data science workflow. The following diagram
    shows the techniques that are applied automatically to the datasets when featurization
    is turned on (see the blue toggle at the top of the preceding screenshot). The
    following diagram shows some of the key steps that are taken during auto-featurization.
    You can find out more about enumerated featurization techniques at [https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features):'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**自动特征化** – 即将不同的数据类型转换为数值向量 – 是任何数据科学工作流程的典型部分。以下图表显示了在特征化开启时自动应用于数据集的技术（参见前一个截图顶部的蓝色切换按钮）。以下图表显示了自动特征化过程中采取的一些关键步骤。您可以在[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features)了解更多关于枚举的特征化技术。'
- en: '![Figure 5.15 – Featurization approaches for the AutoML run'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.15 – AutoML 运行的特征化方法'
- en: '](img/Figure_5.15_B16890.jpg)'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.15_B16890.jpg)'
- en: Figure 5.15 – Featurization approaches for the AutoML run
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.15 – AutoML 运行的特征化方法
- en: '**Scaling** and **normalization** (also sometimes referred to as **regularization**
    and **standaridization**) are two important ways of featurization that deal with
    transforming data into a common range of values. The scaling and normalization
    techniques that are used in the automatic featurization algorithms can be seen
    in the following diagram. You can find out more about various enumerated scaling
    and featurization techniques at [https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features):'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**缩放**和**归一化**（有时也称为**正则化**和**标准化**）是处理将数据转换为共同值范围的两种重要特征化方法。以下图表显示了自动特征化算法中使用的缩放和归一化技术。您可以在[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features)了解更多关于各种枚举的缩放和特征化技术。'
- en: '![Figure 5.16 – Azure AutoML – scaling and featurization'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.16 – Azure AutoML – 缩放和特征化'
- en: '](img/Figure_5.16_B16890.jpg)'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.16_B16890.jpg)'
- en: Figure 5.16 – Azure AutoML – scaling and featurization
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.16 – Azure AutoML – 缩放和特征化
- en: 'The topic of featurization is not complete without the mention of guardrails.
    Data guardrails are part of the AutoML engine which helps identify and address
    issues with the dataset such as missing feature values, handling high cardinality
    features (lots of unique values), class imbalance (minority classes and outliers)
    and so on. The following figure outlines these guardrails you should make yourself
    familiar with. You can read further details about these guardrails here in the
    Azure documentation ([https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features)):'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在不提及护栏的情况下，特征化的话题就不完整。数据护栏是 AutoML 引擎的一部分，有助于识别和解决数据集的问题，如缺失特征值、处理高基数特征（许多唯一值）、类别不平衡（少数类和异常值）等。以下图表概述了您应该熟悉的这些护栏。您可以在
    Azure 文档中进一步了解这些护栏的详细信息（[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-features)）：
- en: '![Figure 5.17 – Data guardrails for the AutoML run'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.17 – AutoML 运行的数据护栏'
- en: '](img/Figure_5.17_B16890.jpg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.17_B16890.jpg)'
- en: Figure 5.17 – Data guardrails for the AutoML run
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.17 – AutoML 运行的数据护栏
- en: Now, when you click the **Finish** button, as shown in *Figure 5.10*, after
    setting up the given parameters for the task type and any additional configuration
    items, you will see the following screen, which validates the run:![Figure 5.18
    – Data guardrails for the AutoML run
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，当您点击**完成**按钮，如图 5.10 所示，在设置任务类型和任何附加配置项的给定参数后，您将看到以下屏幕，该屏幕验证运行：![图 5.18 –
    AutoML 运行的数据护栏
- en: '](img/Figure_5.18_B16890.jpg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.18_B16890.jpg)'
- en: Figure 5.18 – Data guardrails for the AutoML run
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.18 – AutoML 运行的数据护栏
- en: 'One important point to keep in mind is that you need to have good compute resources
    to run an experiment; otherwise, it will fail. For example, in this experiment,
    I have set the training time to 0.25 hours; that is, 15 minutes. This is not enough
    time for the given compute, which means the run is bound to fail, as shown in
    the following screenshot:'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 需要记住的一个重要观点是，您需要有良好的计算资源来运行实验；否则，它将失败。例如，在这个实验中，我将训练时间设置为 0.25 小时；即 15 分钟。这对于给定的计算资源来说时间不够，这意味着运行注定要失败，如下面的截图所示：
- en: '![Figure 5.19 – AutoML experiment run settings'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![Figure 5.19 – AutoML experiment run settings'
- en: '](img/Figure_5.19_B16890.jpg)'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/Figure_5.19_B16890.jpg]'
- en: Figure 5.19 – AutoML experiment run settings
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.19 – AutoML 实验运行设置
- en: 'The following screenshot shows that since we didn''t allocate the right computing
    resources to run the AutoML experiment, it failed:'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下截图显示，由于我们没有为运行 AutoML 实验分配正确的计算资源，它失败了：
- en: '![Figure 5.20 – AutoML experiment run failure message'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![Figure 5.20 – AutoML experiment run failure message'
- en: '](img/Figure_5.20_B16890.jpg)'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/Figure_5.20_B16890.jpg]'
- en: Figure 5.20 – AutoML experiment run failure message
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.20 – AutoML 实验运行失败信息
- en: 'The following error message explains the user error in detail, along with potential
    solutions, such as adding compute resources, applying an experiment timeout, and
    making dataset sampling changes:'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下错误信息详细说明了用户错误，以及可能的解决方案，例如增加计算资源、应用实验超时以及进行数据集采样更改：
- en: '![Figure 5.21 – AutoML experiment run failure message'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![Figure 5.21 – AutoML experiment run failure message'
- en: '](img/Figure_5.21_B16890.jpg)'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/Figure_5.21_B16890.jpg]'
- en: Figure 5.21 – AutoML experiment run failure message
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.21 – AutoML 实验运行失败信息
- en: Increasing the time limit to 5 hours will help, as you will see in the following
    steps. Azure AutoML has now had enough time and enough resources to execute multiple
    experiments. This has taught you that cheapening out on time and/or resources
    isn't a good AutoML strategy.
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将时间限制增加到 5 小时会有所帮助，正如您将在以下步骤中看到的那样。Azure AutoML 现在已经拥有了足够的时间和资源来执行多个实验。这教会了您，在时间和/或资源上节省成本并不是一个好的
    AutoML 策略。
- en: The following screen in the AutoML child run shows individual iterations. It
    clearly demonstrates how different data preprocessing methods, such as `StandardScalerWrapper`,
    `RobustScaler`, and `MaxAbsScaler`/`MinMaxScaler`, and forecasting algorithms,
    such as `RandomForest`, `LightGB`, `ElasticNet`, `DecisionTree`, and `LassoLars`,
    were used. Runs `54` and `53` in the following screenshot show how ensemble algorithms
    and their weights can be viewed by clicking on their associated tags:![Figure
    5.22 – AutoML experiment run details
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 AutoML 子运行的下个屏幕中显示了单个迭代。它清楚地展示了如何使用不同的数据预处理方法，如 `StandardScalerWrapper`、`RobustScaler`
    和 `MaxAbsScaler`/`MinMaxScaler`，以及预测算法，如 `RandomForest`、`LightGB`、`ElasticNet`、`DecisionTree`
    和 `LassoLars`。以下截图中的运行 `54` 和 `53` 展示了如何通过点击相关的标签查看集成算法及其权重：![Figure 5.22 – AutoML
    experiment run details
- en: '](img/Figure_5.22_B16890.jpg)'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/Figure_5.22_B16890.jpg]'
- en: Figure 5.22 – AutoML experiment run details
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.22 – AutoML 实验运行详情
- en: 'Click on the **Models** tab to see which model provided what degree of accuracy
    and what run it is associated with, as shown in the following screenshot:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **模型** 标签，可以看到哪个模型提供了什么程度的准确度以及它关联的运行，如下面的截图所示：
- en: '![Figure 5.23 – AutoML experiment run details'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 5.23 – AutoML experiment run details'
- en: '](img/Figure_5.23_B16890.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_5.23_B16890.jpg]'
- en: Figure 5.23 – AutoML experiment run details
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.23 – AutoML 实验运行详情
- en: 'The run metrics are also a great way to get more detailed information about
    the associated run. For example, you can see the algorithm''s name, the associated
    accuracy, AUC scores, precision, F1 score, and so on:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 运行指标也是获取有关相关运行更详细信息的绝佳方式。例如，您可以看到算法的名称、相关的准确度、AUC 分数、精确度、F1 分数等：
- en: '![Figure 5.24 – AutoML experiment run details'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 5.24 – AutoML experiment run details'
- en: '](img/Figure_5.24_B16890.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_5.24_B16890.jpg]'
- en: Figure 5.24 – AutoML experiment run details
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.24 – AutoML 实验运行详情
- en: 'The data guardrail measures that are taken to protect the quality of the data
    can be seen by clicking on the corresponding tab, as shown in the following screenshot.
    This page shows what guardrail techniques have been used to ensure that the input
    data used to train the model was high quality:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击相应的标签，可以看到为保护数据质量所采取的数据边界措施，如下面的截图所示。此页面显示了为确保用于训练模型的输入数据质量高，使用了哪些边界技术：
- en: '![Figure 5.25 – AutoML experiment data guardrails'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 5.25 – AutoML experiment data guardrails'
- en: '](img/Figure_5.25_B16890.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_5.25_B16890.jpg]'
- en: Figure 5.25 – AutoML experiment data guardrails
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.25 – AutoML 实验数据边界
- en: 'From the main run summary page, you can view the best model and its summarized
    outcome. In this case, the soft voting-based `VotingEnsemble()` method was the
    clear winner. It is among two of the ensemble methods currently supported in Azure
    AutoML. The other one is `StackEnsemble`, which creates collections from previously
    run iterations. Ensemble methods are techniques that are used to combine multiple
    models to get the best results; voting, stacking, bagging, and boosting are some
    of the categories available for ensemble methods:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 从主运行摘要页面，您可以查看最佳模型及其总结的结果。在这种情况下，基于软投票的`VotingEnsemble()`方法是明显的赢家。它是Azure AutoML当前支持的两种集成方法之一。另一种是`StackEnsemble`，它从先前运行的迭代中创建集合。集成方法是用于结合多个模型以获得最佳结果的技巧；投票、堆叠、袋装和提升是集成方法的一些可用类别：
- en: '![Figure 5.26 – AutoML experiment summary page'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.26 – AutoML实验摘要页面'
- en: '](img/Figure_5.26_B16890.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.26_B16890.jpg)'
- en: Figure 5.26 – AutoML experiment summary page
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.26 – AutoML实验摘要页面
- en: 'Assuming you have followed these experiments so far and tried these steps by
    yourself, it should be evident that each run has several child runs – that is,
    individual iterations that each model has. So, when we look at the **Metrics**
    tab of the **Run** summary page, we not only see the different metrices, but also
    a precision recall plot:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已经跟随了这些实验，并亲自尝试了这些步骤，那么应该很明显，每次运行都有几个子运行——也就是说，每个模型都有单独的迭代。因此，当我们查看**运行**摘要页面的**指标**选项卡时，我们不仅看到不同的指标，还有一个精确度召回率图：
- en: '![Figure 5.27 – AutoML experiment accuracy metrics and PR curve'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.27 – AutoML实验准确度指标和PR曲线'
- en: '](img/Figure_5.27_B16890.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.27_B16890.jpg)'
- en: Figure 5.27 – AutoML experiment accuracy metrics and PR curve
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.27 – AutoML实验准确度指标和PR曲线
- en: 'Now, let''s look at the explanations for the models. The explainability of
    machine learning models is super important, especially for AutoML. This is because
    you would like to know, as a subject matter expert, which features played a critical
    role in the result. In the following screenshot, you can see a tabular explanation
    of feature importance for the top *k* features, along with a breakdown of how
    they are used to predict digits from 0-9:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看模型解释。机器学习模型的可解释性非常重要，尤其是在AutoML中。这是因为您作为领域专家，希望了解哪些特征在结果中发挥了关键作用。在下面的屏幕截图中，您可以看到一个表格形式的特征重要性解释，对于前*k*个特征，以及它们如何用于预测0-9的数字：
- en: '![Figure 5.28 – AutoML experiment explanation of features'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.28 – AutoML实验特征解释'
- en: '](img/Figure_5.28_B16890.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.28_B16890.jpg)'
- en: Figure 5.28 – AutoML experiment explanation of features
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.28 – AutoML实验特征解释
- en: The preceding screenshot shows which feature played what part in predicting
    the digits. Feature 377 was significant in predicting digit 7, features 379 and
    434 were significant in predicting 9, and so on and so forth. This MNIST dataset
    might not appear to be relevant to you, but let's imagine you are looking at an
    HR hiring dataset and gender, race, or age become an important feature. This would
    raise an alarm since this would go against your corporate policies of sexual bias,
    racism, or age-related discrimination. It would also likely be against the law
    and you could get in serious trouble in terms of compliance and reputational damage
    for having a bigot in the machine. Not to mention, it's unethical (and honestly
    nonsensical) to discriminate based on attributes that have nothing to do with
    an employee's capability to get the job done.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图显示了哪些特征在预测数字中扮演了什么角色。特征377在预测数字7时很重要，特征379和434在预测9时很重要，等等。这个MNIST数据集可能看起来与您无关，但让我们想象您正在查看一个HR招聘数据集，性别、种族或年龄成为重要的特征。这将引发警报，因为这会违反您的公司关于性别偏见、种族主义或年龄相关歧视的政策。这也可能违反法律，并且您可能会因为机器中的偏见而在合规性和声誉方面陷入严重麻烦。更不用说，基于与员工完成工作能力无关的属性进行歧视是不道德的（而且说实话是荒谬的）。
- en: 'This explainability also provides summary importance for features where you
    can visualize the importance of individual k-features for both global and local
    features. The swarm chart, shown in the following screenshot, visualizes the same
    data at a very granular level. It shows a one-to-one mapping between the number
    of elements in the MNIST dataset and the features they correspond to, similar
    to what''s shown in the tabular representation in the preceding screenshot:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 这种可解释性还提供了特征的摘要重要性，您可以可视化全局和局部特征中单个k特征的相对重要性。以下截图所示的蜂群图在非常细粒度级别上可视化相同的数据。它显示了MNIST数据集中元素的数量与它们对应的特征之间的一对一映射，类似于前一个截图中的表格表示：
- en: '![Figure 5.29 – Azure Machine Learning top k features summary importance chart'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.29 – Azure机器学习top k特征摘要重要性图'
- en: '](img/Figure_5.29_B16890.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.29_B16890.jpg)'
- en: Figure 5.29 – Azure Machine Learning top k features summary importance chart
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.29 – Azure机器学习top k特征摘要重要性图
- en: With this overview of automated ML for classification, let's move on and apply
    the same techniques to time series forecasting.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在对自动机器学习分类的概述之后，让我们继续前进，并将相同的技巧应用于时间序列预测。
- en: Time series prediction using AutoML
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用AutoML进行时间序列预测
- en: Forecasting energy demand is a real problem in the industry where energy providers
    like to predict the consumer's expected needs in advance. In this example, we
    will use the New York City energy demand dataset, which is available in the public
    domain. We will use historic time series data and apply AutoML for forecasting;
    that is, predicting energy demand for the next 48 hours.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 预测能源需求是工业界的一个实际问题，能源供应商喜欢提前预测消费者的预期需求。在这个例子中，我们将使用纽约市能源需求数据集，该数据集可在公共领域获得。我们将使用历史时间序列数据并应用AutoML进行预测；即预测未来48小时的能源需求。
- en: 'The machine learning notebook is part of the Azure model repository, which
    can be accessed on GitHub at [https://github.com/Azure/MachineLearningNotebooks/](https://github.com/Azure/MachineLearningNotebooks/).
    Let''s get started:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习笔记本是Azure模型仓库的一部分，可以在GitHub上访问，网址为[https://github.com/Azure/MachineLearningNotebooks/](https://github.com/Azure/MachineLearningNotebooks/)。让我们开始吧：
- en: Clone the aforementioned GitHub repository on your local disk and navigate to
    the `forecasting-energy-demand` folder:![Figure 5.30 – Azure Machine Learning
    notebooks GitHub repository
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的本地磁盘上克隆上述GitHub仓库并导航到`forecasting-energy-demand`文件夹：![图5.30 – Azure机器学习笔记本GitHub仓库
- en: '](img/Figure_5.30_B16890.jpg)'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.30_B16890.jpg)'
- en: Figure 5.30 – Azure Machine Learning notebooks GitHub repository
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.30 – Azure机器学习笔记本GitHub仓库
- en: Click on the `forecasting-energy-demand` folder to the Azure notebook repository,
    as shown in the following screenshot:![Figure 5.31 – Uploading a folder in the
    Azure Machine Learning notebook workspace
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击以下截图所示的Azure笔记本仓库中的`forecasting-energy-demand`文件夹：![图5.31 – 在Azure机器学习笔记本工作区上传文件夹
- en: '](img/Figure_5.31_B16890.jpg)'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.31_B16890.jpg)'
- en: Figure 5.31 – Uploading a folder in the Azure Machine Learning notebook workspace
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.31 – 在Azure机器学习笔记本工作区上传文件夹
- en: Once the folder has been uploaded (see the files in left-hand pane of the following
    screenshot), double-click on the, `ipynb` (notebook) file and open it. You will
    see the following screen:![Figure 5.32 – Uploading files in the AutoML notebook
    workspace
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦文件夹上传完成（参见以下截图左侧的文件），双击`ipynb`（笔记本）文件并打开它。您将看到以下屏幕：![图5.32 – 在AutoML笔记本工作区上传文件
- en: '](img/Figure_5.32_B16890.jpg)'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.32_B16890.jpg)'
- en: Figure 5.32 – Uploading files in the AutoML notebook workspace
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.32 – 在AutoML笔记本工作区上传文件
- en: Now, open this in JupyterLab by clicking on the respective dropdown, as shown
    in the following screenshot. It is important to remember that even though you
    are running the files in JupyterLab, an automated ML experiment is being run in
    the Azure Machine Learning workspace, and you can always track and view every
    experiment there. This shows the power of seamless integration with third-party
    tools:![Figure 5.33 – Uploading files in the AutoML notebook workspace and opening
    them in JupyterLab
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，通过点击相应的下拉菜单，如图以下截图所示，在JupyterLab中打开它。重要的是要记住，尽管您在JupyterLab中运行文件，但自动机器学习实验是在Azure机器学习工作区中运行的，您始终可以跟踪并查看那里的每个实验。这展示了与第三方工具无缝集成的强大功能：![图5.33
    – 在AutoML笔记本工作区上传文件并在JupyterLab中打开
- en: '](img/Figure_5.33_B16890.jpg)'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.33_B16890.jpg)'
- en: Figure 5.33 – Uploading files in the AutoML notebook workspace and opening them
    in JupyterLab
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.33 – 在AutoML笔记本工作区上传文件并在JupyterLab中打开
- en: 'Now, the file is running in a very familiar environment, with the kernel being
    Python 3.6 – the Azure Machine Learning runtime. This seamless integration with
    notebooks is a powerful feature of Azure Machine Learning:'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，文件正在一个非常熟悉的环境中运行，内核是 Python 3.6 – Azure 机器学习运行时。这种与笔记本的无缝集成是 Azure 机器学习的一个强大功能：
- en: '![Figure 5.34 – Uploading files in the AutoML notebook workspace and opening
    them in JupyterLab'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.34 – 在 AutoML 笔记本工作区上传文件并在 JupyterLab 中打开'
- en: '](img/Figure_5.34_B16890.jpg)'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.34_B16890.jpg)'
- en: Figure 5.34 – Uploading files in the AutoML notebook workspace and opening them
    in JupyterLab
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.34 – 在 AutoML 笔记本工作区上传文件并在 JupyterLab 中打开
- en: 'Since we are working with time series data, it is useful to note that Azure
    AutoML offers a variety of native time series as well as deep learning models
    to support time series-related analytical workloads. The following screenshot
    shows a list of these algorithms:'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于我们正在处理时间序列数据，值得注意的是 Azure AutoML 提供了各种原生时间序列以及深度学习模型来支持与时间序列相关的分析工作负载。以下截图显示了这些算法的列表：
- en: '![Figure 5.35 – Azure AutoML time series capabilities'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.35 – Azure AutoML 时间序列功能'
- en: '](img/Figure_5.35_B16890.jpg)'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.35_B16890.jpg)'
- en: Figure 5.35 – Azure AutoML time series capabilities
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.35 – Azure AutoML 时间序列功能
- en: 'Azure automated ML comes with a variety of regression, classification, and
    time series forecasting algorithms and scoring mechanisms, and you can always
    add custom metrics. The following screenshot shows a list of Azure AutoML classification,
    regression, and time series forecasting algorithms and measures:'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Azure 自动化机器学习提供了各种回归、分类和时间序列预测算法以及评分机制，并且您可以始终添加自定义指标。以下截图显示了 Azure AutoML 分类、回归和时间序列预测算法和措施的列表：
- en: '![ Figure 5.36 – Azure AutoML classification, regression, and time series forecasting
    algorithms'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.36 – Azure AutoML 分类、回归和时间序列预测算法'
- en: '](img/Figure_5.36_B16890.jpg)'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.36_B16890.jpg)'
- en: Figure 5.36 – Azure AutoML classification, regression, and time series forecasting
    algorithms
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.36 – Azure AutoML 分类、回归和时间序列预测算法
- en: 'The following is a list of metrics that are used to measure the accuracy of
    the aforementioned methods:'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下是一系列用于衡量上述方法准确性的指标：
- en: '![Figure 5.37 – Azure AutoML measures for classification, regression, and time
    series forecasting'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.37 – Azure AutoML 的分类、回归和时间序列预测度量'
- en: '](img/Figure_5.37_B16890.jpg)'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.37_B16890.jpg)'
- en: Figure 5.37 – Azure AutoML measures for classification, regression, and time
    series forecasting
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.37 – Azure AutoML 的分类、回归和时间序列预测度量
- en: Skimming over the boilerplate setup code, we can set up the experiment by setting
    the target column to demand and the time column's name to be the timestamp. Once
    we've done this, the data is downloaded and made part of the pandas DataFrame,
    as shown in the following screenshot:![Figure 5.38 – Azure AutoML data loading
    for the NYC power supply in the notebook
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 快速浏览一下样板设置代码，我们可以通过设置目标列为目标和将时间列的名称设置为时间戳来设置实验。完成这些操作后，数据将被下载并成为 pandas DataFrame
    的一部分，如下面的截图所示：![图 5.38 – 在笔记本中为纽约市电力供应加载数据
- en: '](img/Figure_5.38_B16890.jpg)'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.38_B16890.jpg)'
- en: Figure 5.38 – Azure AutoML data loading for the NYC power supply in the notebook
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.38 – 在笔记本中为纽约市电力供应加载数据
- en: Now, let's split up the data into training and testing sets:![Figure 5.39 –
    Data split for the NYC power supply in the notebook
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们将数据拆分为训练集和测试集：![图 5.39 – 在笔记本中为纽约市电力供应进行数据拆分
- en: '](img/Figure_5.39_B16890.jpg)'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.39_B16890.jpg)'
- en: Figure 5.39 – Data split for the NYC power supply in the notebook
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.39 – 在笔记本中为纽约市电力供应进行数据拆分
- en: One of the key parameters you will have to set as part of this exercise is the
    forecast horizon; that is, how far in the future you would like to predict for.
    The automated ML algorithm is smart enough to know what unit to use (hour, days,
    or months) based on the time series frequency of your dataset. Based on our business
    problem, we will set the forecast horizon to `48` (hours) and submit the job,
    as shown in the following screenshot:![Figure 5.40 – Creating the AutoML configuration
    for the forecasting job
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个练习中，您将必须设置的一个关键参数是预测范围；也就是说，您希望预测多远未来的数据。自动化机器学习算法足够智能，可以根据数据集的时间序列频率知道使用什么单位（小时、天数或月份）。根据我们的业务问题，我们将预测范围设置为
    `48`（小时）并提交作业，如下面的截图所示：![图 5.40 – 为预测作业创建 AutoML 配置
- en: '](img/Figure_5.40_B16890.jpg)'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.40_B16890.jpg)'
- en: Figure 5.40 – Creating the AutoML configuration for the forecasting job
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.40 – 为预测作业创建 AutoML 配置
- en: Now that we have created the configuration, let's submit the experiment, as
    shown in the following screenshot:![Figure 5.41 – Submitting the AutoML experiment
    to the remote server for execution
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经创建了配置，让我们提交实验，如下所示屏幕截图所示：![图 5.41 – 将 AutoML 实验提交到远程服务器执行
- en: '](img/Figure_5.41_B16890.jpg)'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.41_B16890.jpg)'
- en: Figure 5.41 – Submitting the AutoML experiment to the remote server for execution
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.41 – 将 AutoML 实验提交到远程服务器执行
- en: To demonstrate the integration of Jupyterlab with the Azure Machine Learning
    service, click on the **Experiments** tab in the ML service portal, as shown in
    the following screenshot. Here, you can see that the experiment has been submitted
    and is now prepared to run with the associated config for the AutoML parameters:![Figure
    5.42 – The experiment pane views for the AutoML experiment on the remote server
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要演示 Jupyterlab 与 Azure Machine Learning 服务的集成，请点击 ML 服务门户中的 **实验** 选项卡，如下所示屏幕截图。在这里，您可以看到实验已被提交，现在正准备使用关联的配置运行
    AutoML 参数：![图 5.42 – 在远程服务器上进行的 AutoML 实验的实验面板视图
- en: '](img/Figure_5.42_B16890.jpg)'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.42_B16890.jpg)'
- en: Figure 5.42 – The experiment pane views for the AutoML experiment on the remote
    server
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.42 – 在远程服务器上进行的 AutoML 实验的实验面板视图
- en: 'The AutoML config elements can also be observed as part of the notebook as
    you wait for the job to complete:'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当您等待作业完成时，AutoML 配置元素也可以作为笔记本的一部分观察到：
- en: '![Figure 5.43 – The notebook running the wait_for_completion() method after
    submitting the job'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.43 – 提交作业后运行 wait_for_completion() 方法的笔记本'
- en: '](img/Figure_5.43_B16890.jpg)'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.43_B16890.jpg)'
- en: Figure 5.43 – The notebook running the wait_for_completion() method after submitting
    the job
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.43 – 提交作业后运行 wait_for_completion() 方法的笔记本
- en: This inherent integration between the notebook and the corresponding experiment
    can also be seen in the following screenshot. Here, we can see how the **Experiment**
    notebook is reflected in the experiment console:![Figure 5.44 – The experiment
    from the notebook shown in the Experiments pane  in Azure Machine Learning](img/Figure_5.44_B16890.jpg)
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 笔记本与相应实验之间的这种内在集成也可以在以下屏幕截图中看到。在这里，我们可以看到 **实验** 笔记本如何在实验控制台中反映：![图 5.44 – 在
    Azure Machine Learning 的实验面板中显示的笔记本中的实验](img/Figure_5.44_B16890.jpg)
- en: Figure 5.44 – The experiment from the notebook shown in the Experiments pane
    in Azure Machine Learning
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.44 – 在 Azure Machine Learning 的实验面板中显示的笔记本中的实验
- en: 'The algorithm''s name and error details are outlined for each run and shows
    a consistent reduction in the error rate. Normalized RMSE and accuracy metrics
    for MNIST classification are shown int he following screenshot:'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每次运行都会概述算法的名称和错误详情，并显示出错误率的持续降低。以下屏幕截图显示了 MNIST 分类中归一化 RMSE 和准确度指标：
- en: '![Figure 5.45 – The experiment from the notebook shown in the Experiments pane
    in Azure Machine Learning'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.45 – 在 Azure Machine Learning 的实验面板中显示的笔记本中的实验'
- en: '](img/Figure_5.45_B16890.jpg)'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.45_B16890.jpg)'
- en: Figure 5.45 – The experiment from the notebook shown in the Experiments pane
    in Azure Machine Learning
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.45 – 在 Azure Machine Learning 的实验面板中显示的笔记本中的实验
- en: 'The data guardrails types are also notable. In the following screenshot, you
    can see that they are different from the guardrails we had in the classification
    exercise. In this case, the data is validated against frequency detection and
    missing feature value imputation. The AutoML engine is smart enough to learn what
    types of guardrails need to be applied for different types of experiments and
    datasets:'
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 数据护栏类型也值得关注。在以下屏幕截图中，您可以看到它们与我们之前在分类练习中使用的护栏不同。在这种情况下，数据通过频率检测和缺失特征值插补进行验证。AutoML
    引擎足够智能，能够学习针对不同类型实验和数据集需要应用哪些类型的护栏：
- en: '![Figure 5.46 – The guardrails for the Experiments pane in Azure Machine Learning'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.46 – Azure Machine Learning 实验面板的护栏'
- en: '](img/Figure_5.46_B16890.jpg)'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_5.46_B16890.jpg)'
- en: Figure 5.46 – The guardrails for the Experiments pane in Azure Machine Learning
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.46 – Azure Machine Learning 实验面板的护栏
- en: Now that the experiment is complete, we can retrieve the best model in the notebook,
    as shown in the following screenshot (or in the machine learning service console,
    if you are visually inclined):![Figure 5.47 – Model retrieval in the notebook
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在实验已完成，我们可以在笔记本中检索最佳模型，如下所示屏幕截图（或如果您更倾向于视觉方式，在机器学习服务控制台中）：![图 5.47 – 笔记本中的模型检索
- en: '](img/Figure_5.47_B16890.jpg)'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.47_B16890.jpg)'
- en: Figure 5.47 – Model retrieval in the notebook
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.47 – 笔记本中的模型检索
- en: You might recall deep feature search or automated feature engineering being
    introduced in the previous chapters. You can access and retrieve the engineered
    features from the notebook with the help of the following steps by calling the
    `get_engineered_feature_names()` method on the model:![Figure 5.48 – Retrieving
    engineered features via get_engineered_feature_names
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可能还记得在前几章中介绍了深度特征搜索或自动化特征工程。你可以通过在模型上调用`get_engineered_feature_names()`方法，并按照以下步骤从笔记本中访问和检索工程化特征：![图5.48
    – 通过get_engineered_feature_names检索工程化特征
- en: '](img/Figure_5.48_B16890.jpg)'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.48_B16890.jpg)'
- en: Figure 5.48 – Retrieving engineered features via get_engineered_feature_names
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.48 – 通过get_engineered_feature_names检索工程化特征
- en: 'Viewing the featurization summary for these features, both engineered and organic,
    provides you with the rationale that was used to build these features, as shown
    in the following screenshot:'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 查看这些特征的工程化摘要，包括有机特征，为你提供了构建这些特征的推理依据，如下面的截图所示：
- en: '![Figure 5.49 – Viewing the engineered features summary via get_featurization_summary()'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图5.49 – 通过get_featurization_summary()查看工程化特征摘要'
- en: '](img/Figure_5.49_B16890.jpg)'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_5.49_B16890.jpg)'
- en: Figure 5.49 – Viewing the engineered features summary via get_featurization_summary()
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.49 – 通过get_featurization_summary()查看工程化特征摘要
- en: 'Using the scoring method, we can create the test scores and plot the predicted
    points on a chart, as shown in the following screenshot:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用评分方法，我们可以在图表上创建测试得分并绘制预测点，如下面的截图所示：
- en: '![Figure 5.50 – Building a scatter plot for test data scores'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.50 – 为测试数据得分构建散点图'
- en: '](img/Figure_5.50_B16890.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.50_B16890.jpg)'
- en: Figure 5.50 – Building a scatter plot for test data scores
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.50 – 为测试数据得分构建散点图
- en: 'The predicted data test scores are in blue, while the actual score is in green:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 预测数据测试得分用蓝色表示，实际得分用绿色表示：
- en: Note
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This image may be black and white to you. You will understand the color reference
    better when practically working on the example.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图片对你来说可能是黑白相间的。当你实际在示例上工作时，你会更好地理解颜色参考。
- en: '![Figure 5.51 – The test data scores and the associated plot'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.51 – 测试数据得分及其相关图表'
- en: '](img/Figure_5.51_B16890.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.51_B16890.jpg)'
- en: Figure 5.51 – The test data scores and the associated plot
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.51 – 测试数据得分及其相关图表
- en: '`X_trans` captures the featurization, including the automatic feature engineering
    changes in the dataset, as shown in the following screenshot:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '`X_trans` 捕获了工程化，包括数据集中自动特征工程的变化，如下面的截图所示：'
- en: '![Figure 5.52 – X_trans showing the time series features for energy forecasting'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.52 – X_trans显示能源预测的时间序列特征'
- en: '](img/Figure_5.52_B16890.jpg)'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.52_B16890.jpg)'
- en: Figure 5.52 – X_trans showing the time series features for energy forecasting
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.52 – X_trans显示能源预测的时间序列特征
- en: 'Even though the explainability of the MNIST dataset wasn''t quite as intuitive,
    in terms of exploring the energy demand dataset, you can visualize different models
    and see which features have the most impact on the predicted usage. It is quite
    intuitive that temperature would have a positive correlation with the global importance
    of power usage. A higher temperature leads to a heavier usage of air conditioning,
    and hence higher power usage. The time of day and day of the week are also deemed
    important by the model, as shown in the following chart:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管MNIST数据集的可解释性并不那么直观，但在探索能源需求数据集时，你可以可视化不同的模型并看到哪些特征对预测使用影响最大。很明显，温度与全球电力使用的全局重要性呈正相关。更高的温度会导致空调使用量增加，从而增加电力使用。模型还认为一天中的时间和一周中的某一天也很重要，如下面的图表所示：
- en: '![Figure 5.53 – Global importance explainability graph'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.53 – 全局重要性解释图'
- en: '](img/Figure_5.53_B16890.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.53_B16890.jpg)'
- en: Figure 5.53 – Global importance explainability graph
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.53 – 全局重要性解释图
- en: 'In the following screenshot, different explanation models (engineered features
    versus raw) map the result against the different predicted values of Y. Model
    explanation views help us understand which features directly impact the model:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的截图中，不同的解释模型（工程化特征与原始特征）将结果与Y的不同预测值进行映射。模型解释视图帮助我们理解哪些特征直接影响了模型：
- en: '![Figure 5.54 – Global importance explainability graph'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.54 – 全局重要性解释图'
- en: '](img/Figure_5.54_B16890.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5.54_B16890.jpg)'
- en: Figure 5.54 – Global importance explainability graph
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.54 – 全局重要性解释图
- en: This concludes our demonstration of time series prediction using AutoML in Azure.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们使用 Azure 中的 AutoML 进行时间序列预测演示的结束。
- en: Summary
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned how to apply AutoML in Azure to a classification
    problem and a time series prediction problem. You were able to build a model within
    the Azure Machine Learning environment with an Azure notebook and via JupyterLab.
    You then understood how the entire workspace relates to the experiments and runs.
    You also see the visualization during these automated runs; this is where feature
    importance, the global and local impact of features, and explanations based on
    raw and engineered features provide an intuitive understanding. Besides your affinity
    with a tool, it is also important that the platform aligns with your enterprise
    roadmap. Azure is an overall great platform with a comprehensive set of tools,
    and we hope you enjoyed exploring its automated ML capabilities.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何在 Azure 中应用 AutoML 来解决分类问题和时间序列预测问题。你能够在 Azure 机器学习环境中使用 Azure 笔记本和
    JupyterLab 构建模型。然后你了解了整个工作空间如何与实验和运行相关联。你还看到了这些自动化运行期间的可视化；这正是特征重要性、特征的全球和局部影响以及基于原始和工程特征的解释提供直观理解的地方。除了你对工具的亲和力之外，平台与你的企业路线图相一致也很重要。Azure
    是一个整体上很棒的平台，拥有全面的工具集，我们希望你喜欢探索其自动化 ML 功能。
- en: Further reading
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'For more information on the topics that were covered in this chapter, please
    take a look at the following links:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 关于本章所涉及主题的更多信息，请查看以下链接：
- en: 'Azure AutoML:'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Azure AutoML:'
- en: '[https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml](https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml)'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml](https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml)'
- en: 'Practical AutoML on Azure:'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 上的实用 AutoML：
- en: '[https://github.com/PracticalAutomatedMachineLearning/Azure](https://github.com/PracticalAutomatedMachineLearning/Azure)'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://github.com/PracticalAutomatedMachineLearning/Azure](https://github.com/PracticalAutomatedMachineLearning/Azure)'
