- en: '*Chapter 3*: Data Analysis on Streaming Data'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第三章*：流式数据上的数据分析'
- en: 'Now that you have seen an introduction to streaming data and streaming use
    cases, as well as an introduction to streaming architecture, it is time to enter
    into the core of this book: analytics and machine learning.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了流式数据的介绍以及流式用例，还了解了流式架构的介绍，现在是时候进入这本书的核心内容了：分析和机器学习。
- en: As you probably know, descriptive statistics and data analysis are the entry
    points into machine learning, but they are also often used as a standalone use
    case. In this chapter, you will first discover descriptive statistics from a traditional
    statistics viewpoint. Some parts of traditional statistics focus on making correct
    estimations of descriptive statistics when only part of the data is available.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所知，描述性统计和数据分析是机器学习的入门点，但它们也经常被用作独立用例。在本章中，你将首先从传统统计学的角度发现描述性统计。传统统计学的某些部分专注于在只有部分数据可用时对描述性统计进行正确估计。
- en: In streaming, you will encounter such problems in an even more impacting manner
    than in batch data. Through a continuous data collection process, your descriptive
    statistics will continue changing on every new data point. This chapter will propose
    some solutions for dealing with this.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在流式处理中，你将比在批量数据中更强烈地遇到这些问题。通过持续的数据收集过程，你的描述性统计将在每个新的数据点上持续变化。本章将提出一些解决方案来处理这个问题。
- en: You will also build a data visualization based on those descriptive statistics.
    After all, the human brain is wired in such a way that visual presentations are
    much easier to read than data matrices. Data visualization is an important tool
    to master and comes with some additional reflections to take into account when
    working on streaming data.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 你还将基于这些描述性统计数据构建数据可视化。毕竟，人类的大脑是以这样的方式连接的，视觉呈现比数据矩阵更容易阅读。数据可视化是一个重要的工具，当处理流式数据时，需要考虑一些额外的反思。
- en: The chapter will conclude with a short introduction to statistical process control.
    This subdomain of statistics focuses on analyzing a continuous stream of measurements.
    Although streaming analytics was not yet a thing when process control was invented,
    it became a new, important use case for those analytical methods.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将以对统计过程控制的简要介绍结束。这个统计学的子领域专注于分析连续的测量流。尽管在过程控制发明时流式分析还不是一件事情，但它成为了这些分析方法的一个新的、重要的用例。
- en: 'This chapter covers the following topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖了以下主题：
- en: Descriptive statistics on streaming data
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 流式数据描述性统计
- en: Introduction to sampling theory
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本理论简介
- en: Overview of the main descriptive statistics
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要描述性统计概述
- en: Real-time visualizations
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实时可视化
- en: Basic alerting systems
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本警报系统
- en: Technical requirements
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'You can find all the code for this book on GitHub at the following link: [https://github.com/PacktPublishing/Machine-Learning-for-Streaming-Data-with-Python](https://github.com/PacktPublishing/Machine-Learning-for-Streaming-Data-with-Python).
    If you are not yet familiar with Git and GitHub, the easiest way to download the
    notebooks and code samples is the following:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在以下链接的GitHub上找到这本书的所有代码：[https://github.com/PacktPublishing/Machine-Learning-for-Streaming-Data-with-Python](https://github.com/PacktPublishing/Machine-Learning-for-Streaming-Data-with-Python)。如果你还不熟悉Git和GitHub，下载笔记本和代码样本的最简单方法是以下：
- en: Go to the link of the repository.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往仓库的链接。
- en: Click the green **Code** button.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击绿色的**代码**按钮。
- en: Select **Download ZIP**.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**下载ZIP**。
- en: When you download the ZIP file, unzip it in your local environment and you will
    be able to access the code through your preferred Python editor.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 当你下载ZIP文件时，在你的本地环境中解压缩它，你将通过你偏好的Python编辑器访问代码。
- en: Python environment
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Python环境
- en: To follow along with this book, you can download the code in the repository
    and execute it using your preferred Python editor.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要跟随这本书，你可以下载仓库中的代码，并使用你偏好的Python编辑器执行它。
- en: If you are not yet familiar with Python environments, I would advise you to
    check out Anaconda ([https://www.anaconda.com/products/individual](https://www.anaconda.com/products/individual)),
    which comes with Jupyter Notebook and JupyterLab, which are both great for executing
    notebooks. It also comes with Spyder and VSCode for editing scripts and programs.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还不熟悉Python环境，我建议你检查一下Anaconda（[https://www.anaconda.com/products/individual](https://www.anaconda.com/products/individual)），它包含了Jupyter
    Notebook和JupyterLab，这两个都是执行笔记本的绝佳选择。它还包含了Spyder和VSCode，用于编辑脚本和程序。
- en: If you have difficulty installing Python or the associated programs on your
    machine, you can check out Google Colab ([https://colab.research.google.com/](https://colab.research.google.com/))
    or Kaggle Notebooks ([https://www.kaggle.com/code](https://www.kaggle.com/code)),
    which both allow you to run Python code in online notebooks for free, without
    any setup to do.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你安装Python或相关程序有困难，你可以查看Google Colab（[https://colab.research.google.com/](https://colab.research.google.com/)）或Kaggle
    Notebooks（[https://www.kaggle.com/code](https://www.kaggle.com/code)），这两个平台都允许你免费在线笔记本中运行Python代码，无需任何设置。
- en: Note
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The code in the book will generally use Colab and Kaggle Notebooks with Python
    version 3.7.13 and you can set up your own environment to mimic this.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 书中的代码通常使用Colab和Kaggle Notebooks，Python版本为3.7.13，你可以设置自己的环境来模拟这种情况。
- en: Descriptive statistics on streaming data
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 流数据描述性统计
- en: Computing descriptive statistics is generally one of the first things covered
    in statistics and data analytics courses. Descriptive statistics are measurements
    that data practitioners are very familiar with, as they allow you to summarize
    a dataset in a small set of indicators.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 计算描述性统计通常是统计学和数据分析课程中最早涉及的内容之一。描述性统计是数据从业者非常熟悉的一种度量，因为它们允许你用一组小的指标来总结数据集。
- en: Why are descriptive statistics different on streaming data?
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么流数据上的描述性统计不同？
- en: On regular datasets, you can use almost any statistical software to easily obtain
    descriptive statistics using well-known formulas. On streaming datasets, unfortunately,
    this is much less obvious.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在常规数据集上，你可以使用几乎任何统计软件，通过已知的公式轻松地获得描述性统计。不幸的是，在流数据集上，这要明显复杂得多。
- en: The problem with applying descriptive statistics on streaming data is that the
    formulas are made for finding fixed measurements. In streaming data, you continue
    to receive new data, which unfortunately may alter your values. When you do not
    have all the data of a variable, you cannot be certain about its value. In the
    following section, you will get an introduction to sampling theory, the domain
    that deals with estimating parameters from data samples.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在流数据上应用描述性统计的问题在于，这些公式是为寻找固定测量值而设计的。在流数据中，你持续接收新的数据，不幸的是，这些数据可能会改变你的值。当你没有变量的全部数据时，你不能确定其值。在下一节中，你将了解样本理论，即处理从数据样本中估计参数的领域。
- en: Introduction to sampling theory
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 样本理论简介
- en: Before diving into descriptive statistics in streaming data, it is important
    to understand the basics of descriptive statistics in regular data. The domain
    that deals with the estimation of descriptive statistics using samples of the
    data is called **sampling theory**.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入研究流数据的描述性统计之前，了解常规数据的描述性统计基础知识非常重要。处理使用数据样本估计描述性统计的领域被称为**样本理论**。
- en: Comparing population and sample
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较总体和样本
- en: 'In regular statistics, the concept of population and sample is very important.
    Let''s have a look at the definitions before diving into it further:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在常规统计学中，总体和样本的概念非常重要。在进一步探讨之前，让我们先看看这些定义：
- en: '**Individual**: Individuals are the individual objects or people that are included
    in a study. If your study looks at products on a production line and you measure
    the characteristics of a product, then the individual is the product. If you are
    doing a study on website sales and you track data on each website visitor, then
    your individual is the website visitor.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**个体**：个体是研究中包含的单独对象或人。如果你的研究是观察生产线上的产品并测量产品的特征，那么个体就是产品。如果你正在进行关于网站销售的调查研究，并跟踪每个网站访问者的数据，那么你的个体就是网站访问者。'
- en: '**Population**: A statistical population is generally defined as the pool of
    individuals from which a sample is drawn. The population contains any individual
    that would theoretically qualify to participate in a study. In the production
    line example, the population would be all the products. In the website example,
    the population would be all the website visitors.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**总体**：统计学中的总体通常定义为从中抽取样本的个体集合。总体包含任何理论上符合参与研究的个体。在生产线的例子中，总体是所有产品。在网站例子中，总体是所有网站访问者。'
- en: '**Sample**: A sample is defined as a subset of the population on which you
    are going to execute your study. In most statistical studies, you work with a
    sample; you do not have data on all possible individuals in the world, but rather,
    you have a subset, which you hope is large enough. There are numerous statistical
    tools that help you to decide whether this is the case.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**样本**：样本被定义为你要在其上执行研究的总体子集。在大多数统计研究中，你使用样本；你并没有世界上所有可能个体的数据，而是一个子集，你希望它足够大。有许多统计工具可以帮助你决定这是否是情况。'
- en: Population parameters and sample statistics
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总体参数和样本统计量
- en: When computing descriptive statistics on a sample, they are called **sample
    statistics**. Sample statistics are based on a sample, and although they are generally
    reliable estimates of the population, they are not perfect about the population.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 当在样本上计算描述性统计时，它们被称为**样本统计量**。样本统计量基于样本，尽管它们通常是总体可靠估计，但它们并不是对总体的完美估计。
- en: For the population, the term used is **population parameters**. They are accurate,
    and there is no measurement error here. However, they are, in most cases, impossible
    to measure, as you'll never have enough time and money to measure every individual
    in the population.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 对于总体，使用的术语是**总体参数**。它们是准确的，这里没有测量误差。然而，在大多数情况下，它们是无法测量的，因为你永远不会有足够的时间和金钱来测量总体中的每一个个体。
- en: Sample statistics allow you to estimate population parameters.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 样本统计量允许你估计总体参数。
- en: Sampling distribution
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 抽样分布
- en: The sampling distribution is the distribution of the statistics. Imagine that
    a population of website customers spends, on average, 300 seconds (5 minutes)
    on your website. If you were drawing 100 random samples of your website visitors,
    and you computed the mean of each of those samples, you'd probably end up with
    100 different estimates.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 抽样分布是统计量的分布。想象一下，一个网站顾客群体平均在你的网站上花费300秒（5分钟）。如果你抽取100个随机样本的网站访客，并计算每个样本的均值，你可能会得到100个不同的估计值。
- en: The distribution of those estimates is called the **sampling distribution**.
    It will follow a normal distribution in which the mean should be relatively close
    to the population mean. The standard deviation of the sampling distribution is
    called the **standard error**. The standard error is used to estimate the stability
    or representativeness of your samples.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这些估计值的分布被称为**抽样分布**。它将遵循一个正态分布，其中均值应该相对接近总体均值。抽样分布的标准差被称为**标准误差**。标准误差用于估计样本的稳定性和代表性。
- en: Sample size calculations and confidence level
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 样本量计算和置信水平
- en: In traditional statistics, sample size calculations can be used to define the
    number of elements that you need to have in a sample for the sample to be reliable.
    You need to define a confidence level and a sample size calculation formula for
    your specific statistic. Together, they will allow you to identify the sample
    size needed for reliably estimating your population parameters using sample statistics.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统统计学中，样本量计算可以用来定义样本中需要有多少个元素，以便样本是可靠的。你需要为你的特定统计量定义一个置信水平和样本量计算公式。它们共同将允许你确定使用样本统计量可靠估计总体参数所需的样本量。
- en: Rolling descriptive statistics from streaming
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从流中滚动描述性统计
- en: In streaming analytics, you will have more and more data as time goes on. It
    would be possible to recompute the overall statistics at the reception of a new
    data point. At some point, new data points will have very little impact compared
    to a large number of data points in the past. If a change occurs in the stream,
    it will take time for this change to be reflected in the descriptive statistic,
    and this is, therefore, not generally the best approach.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在流式分析中，随着时间的推移，你将拥有越来越多的数据。在接收到新的数据点时，可以重新计算整体统计量。在某个时候，新的数据点与过去的大量数据点相比，影响将非常小。如果流中发生改变，这种改变需要时间才能反映在描述性统计中，因此这通常不是最佳方法。
- en: The general approach for descriptive statistics on streaming data is to use
    a rolling window for computing and recomputing the descriptive statistics. Once
    you have decided on a definition of your window, you compute the statistics for
    all observations that are in your window.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 流式数据描述性统计的一般方法是使用滚动窗口来计算和重新计算描述性统计。一旦你决定了窗口的定义，你就计算窗口中所有观察值的统计量。
- en: An example can be to choose a window of the last 25 products. This way, every
    time a new product measurement comes into your analytical application, you compute
    the average of this product together with the 24 preceding products.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，可以选择最后25个产品的窗口。这样，每次新的产品测量数据进入你的分析应用时，你将计算这个产品以及前24个产品的平均值。
- en: The more observations you have in your window, the less impact your last observation
    has. This can be great if you want to avoid false alarms, but it can be dangerous
    if you need every single product to be perfect. Choosing small numbers of individuals
    in your window will make your descriptive statistics vary heavily if a variation
    is present in your descriptive statistics.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的窗口中，观察到的数据越多，最后一个观察数据的影响就越小。如果你想要避免误报，这可能是很好的，但如果你需要每个产品都完美无缺，这可能会很危险。在窗口中选择少量个体会使你的描述性统计在存在变化时波动很大。
- en: Tuning the window period is a good exercise to do when trying to fine-tune your
    descriptive statistics. By trying out different approaches, you can find the method
    that works best for your use case.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 调整窗口期是在尝试微调你的描述性统计时一个好的练习。通过尝试不同的方法，你可以找到最适合你用例的方法。
- en: Exponential weight
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 指数权重
- en: Another tool that you can use for fine-tuning your descriptive statistics on
    streaming data is exponential weighting. Exponential weighting puts exponentially
    more weight on recent observations and less on past observations. This allows
    you to take in more historical observations without affecting the importance of
    recent observations.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以使用指数加权作为调整流数据描述性统计的工具。指数加权会给最近观察到的数据赋予指数级的重要性，而对过去观察到的数据赋予较少的重要性。这允许你接受更多的历史观察数据，同时不会影响最近观察数据的重要性。
- en: Tracking convergence as an additional KPI
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 跟踪收敛性作为额外的关键绩效指标
- en: When tracking descriptive statistics on a stream of data, it is a possibility
    to report multiple time windows of your measurements. For example, you could build
    a dashboard that informs your clients of the averages of the day, but at the same
    time, you can report the averages of the last hour and the averages of the last
    15 minutes.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在跟踪数据流的描述性统计时，报告多个测量时间窗口是一个可能的选择。例如，你可以构建一个仪表板，通知你的客户日平均数，同时你也可以报告最后1小时和最后15分钟的均值。
- en: By doing this, you may, for example, give your client the information that the
    day and hour went well in general (day and hour averages are according to specification),
    but in the last 15 minutes, your product starts to present problems, and the last
    15 minutes' average is not according to specification. With this information,
    the operators can intervene quickly and stop or change the process according to
    their needs, without having to worry about the production earlier on in the day.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样做，例如，你可以给你的客户提供信息，说这一天和这一小时总体上表现良好（日和时平均符合规范），但在最后15分钟，你的产品开始出现问题，最后15分钟的均值不符合规范。有了这些信息，操作员可以迅速介入，根据他们的需求停止或改变流程，而无需担心当天早些时候的生产。
- en: Overview of the main descriptive statistics
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主要描述性统计概述
- en: Let's now have a look at the most used descriptive statistics and see how you
    can adapt them to use a rolling window on any data stream. Of course, as you have
    seen in the previous chapter, streaming analytics can be executed on a multitude
    of tools. The important takeaway is to understand which descriptive analytics
    to use and to have a basis that can be adapted to different streaming input tools.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看最常用的描述性统计，看看你如何将它们适应到任何数据流的滚动窗口中。当然，正如你在上一章中看到的，流分析可以在多种工具上执行。重要的是要理解使用哪些描述性分析，并有一个可以适应不同流输入工具的基础。
- en: The mean
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 平均值
- en: The first descriptive statistic that will be covered is the mean. The mean is
    the most commonly used measure of centrality.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 将要介绍的第一种描述性统计量是平均值。平均值是最常用的中心度量。
- en: Interpretation and use
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: Together with other measures of centrality, such as the median and the mode,
    its goal is to describe the center of the distribution of a variable. If the distribution
    is perfectly symmetrical, the mean, median, and mode will be equal. If there is
    a skewed distribution, the mean will be affected by the outliers and move in the
    direction of the skew or the outliers.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 与中位数和众数等其他中心度量一起，它的目标是描述变量的分布中心。如果分布是完全对称的，平均值、中位数和众数将是相等的。如果分布是偏斜的，平均值将受到异常值的影响，并朝向偏斜或异常值的方向移动。
- en: Formula
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The formula for the sample mean is the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 样本均值的公式如下：
- en: '![](img/Formula_03_001.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![公式](img/Formula_03_001.jpg)'
- en: In this formula, *n* is the sample size and *x* is the value of the variable
    in the sample.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个公式中，*n*是样本大小，*x*是样本中变量的值。
- en: Code
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'There are many Python functions that you can use for the mean. One of those
    is the `numpy` function called `mean`. You can see an example of it used here:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用许多Python函数来计算平均值。其中之一是名为`mean`的`numpy`函数。您可以在以下示例中看到它的用法：
- en: Code block 3-1
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-1
- en: '[PRE0]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You should obtain a result of `9.8181`.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该得到一个结果为`9.8181`。
- en: The median
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 中位数
- en: The median is the second measure of the centrality of a variable or a distribution.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数是变量或分布中心性的第二个度量。
- en: Interpretation and use
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: Like the mean, the median is used to indicate the center. However, a difference
    from the mean is that the median is not sensitive to outliers and is much less
    sensitive to skewed distributions.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 与平均值一样，中位数用于表示中心。然而，与平均值的不同之处在于，中位数对异常值不敏感，并且对偏斜分布的敏感性要小得多。
- en: An example where this is important is when studying the salaries of a country's
    population. Salaries are known to follow a strongly skewed distribution. Most
    people make between a minimum wage and an average wage. Few people make very high
    amounts of money. When computing the mean, it will be too high to represent the
    overall population, as it gets boosted upward by the high earners. Using the median
    is more sensible as it will more closely represent a lot of people.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重要的例子是在研究一个国家人口的工资时。众所周知，工资遵循一个强烈偏斜的分布。大多数人工资在最低工资和平均工资之间。很少人有非常高的收入。当计算平均值时，由于高收入者的推动，它将过高，无法代表整体人口。使用中位数更合理，因为它将更接近地代表很多人。
- en: The median represents the point where 50% of the people will earn less than
    this amount and 50% will earn more than this amount.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数表示50%的人将赚取低于这个数额，而50%的人将赚取高于这个数额。
- en: Formula
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The formula for the median is relatively complex to read, as it does not work
    with the actual values, but rather, it takes the middle value after ordering all
    the values from low to high. If there is an even number of values, there is no
    middle, so it will take the average of the two middle values:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数的公式相对复杂，因为它不使用实际值，而是对所有的值从低到高排序后取中间值。如果值的数量是偶数，则没有中间值，所以它将取两个中间值的平均值：
- en: '![](img/Formula_03_002.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![公式](img/Formula_03_002.jpg)'
- en: Here, *x* is an ordered list and the brackets indicate indexing on this list.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*x*是一个有序列表，括号表示在这个列表上的索引。
- en: Code
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can compute the median as follows:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以这样计算中位数：
- en: Code block 3-2
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-2
- en: '[PRE3]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The result of this computation should be `10`.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这个计算的输出应该是`10`。
- en: The mode
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 众数
- en: The mode is the third commonly used measure of centrality in descriptive statistics.
    This section will explain its use and implementation in Python.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 众数是描述性统计中常用的第三个中心度量。本节将解释其在Python中的使用和实现。
- en: Interpretation and use
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: The mode represents the value that was present the most often in the data. If
    you have a continuous (numeric) variable, then you generally create bins to regroup
    your data before computing the mode. This way, you can make sure that it is representative.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 众数表示在数据中出现次数最多的值。如果您有一个连续（数值）变量，那么在计算众数之前，您通常创建一些区间来重新分组您的数据。这样，您可以确保它是代表性的。
- en: Formula
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: The easiest way to find the mode is to count the number of occurrences per group
    or per value and take the value with the highest occurrences as the mode. This
    will work for categorical as well as numerical variables.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 找到众数的最简单方法是计算每个组或每个值的出现次数，并取出现次数最高的值作为众数。这适用于分类变量以及数值变量。
- en: Code
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can use the following code to find the mode in Python:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下代码在Python中找到众数：
- en: Code block 3-3
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-3
- en: '[PRE6]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The obtained result should be `10`.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的结果应该是`10`。
- en: Standard deviation
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标准差
- en: You will now see a number of descriptive statistics for variability, starting
    with the standard deviation.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在将看到一系列用于描述变异性的描述性统计量，从标准差开始。
- en: Interpretation and use
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: The standard deviation is a commonly used measure for variability. Measures
    for variability show the spread around the center that is present in your data.
    For example, where the mean can indicate the average salary of your population,
    it does not tell you whether everyone is close to this value or whether everyone
    is very far away. Measures of variability allow you to obtain this information.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 标准差是常用的变异性度量。变异性度量显示了数据中心周围的分布。例如，均值可以表示你的人口平均工资，但它不能告诉你是否每个人都接近这个值，或者是否每个人都非常远离这个值。变异性度量允许你获得这些信息。
- en: Formula
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The sample standard deviation can be computed as follows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 样本标准差可以按以下方式计算：
- en: '![](img/Formula_03_003.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_003.jpg)'
- en: Code
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can compute the sample standard deviation as follows:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以按以下方式计算样本标准差：
- en: Code block 3-4
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-4
- en: '[PRE9]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You should obtain a result of `1.66`.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该得到一个结果为`1.66`。
- en: Variance
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 方差
- en: The variance is another measure of variability, and it is closely related to
    the standard deviation. Let's see how it works.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 方差是另一个变异性度量，它与标准差密切相关。让我们看看它是如何工作的。
- en: Interpretation and use
  id: totrans-119
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: The variance is simply the square of the standard deviation. It is sometimes
    easier to work with the formula of variance, as it does not involve taking the
    square root. It is, therefore, easier to handle in some mathematical operations.
    The standard deviation is generally easier to use for interpretation.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 方差是标准差的平方。有时使用方差的公式更容易，因为它不涉及取平方根。因此，在某些数学运算中更容易处理。标准差通常更容易用于解释。
- en: Formula
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The formula for variance is the following:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 方差的公式如下：
- en: '![](img/Formula_03_004.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_004.jpg)'
- en: Code
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can use the following code for computing the sample variance:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下代码来计算样本方差：
- en: Code block 3-5
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-5
- en: '[PRE12]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The obtained result should be `2.76`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的结果应该是`2.76`。
- en: Quartiles and interquartile range
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 四分位数和四分位距
- en: The third measure of variability that will be covered is the **interquartile
    range** (**IQR**). This will conclude the statistics for describing variability.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 将要介绍的第三个变异性度量是**四分位距**（**IQR**）。这将结束描述变异性的统计。
- en: Interpretation and use
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: The IQR is a measure that is related to the median in some way. If you remember,
    the median is the point where 50% of the values are lower than it and 50% of the
    values are higher; it is really a middle point.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: IQR是一个与中位数有关联的度量。如果你还记得，中位数是50%的值低于它，50%的值高于它的点；它实际上是一个中间点。
- en: The same can be done with a 25/75% split instead of a 50/50% split. In that
    case, they are called quartiles. By computing the first quartile (25% is lower
    and 75% is higher) and the third quartile (75% is lower and 25% is higher), you
    can get an idea of the variability of your data as well. The difference between
    the third quartile and the first quartile is called the IQR.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，可以使用25/75%的分割而不是50/50%的分割。在这种情况下，它们被称为四分位数。通过计算第一个四分位数（25%以下，75%以上）和第三个四分位数（75%以下，25%以上），你可以了解你的数据的变异性。第三个四分位数和第一个四分位数之间的差异称为IQR。
- en: Formula
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The formula for the IQR is simply the difference between the third and first
    quartiles, as follows:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: IQR的公式简单来说就是第三四分位数和第一四分位数的差，如下所示：
- en: '![](img/Formula_03_005.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_005.jpg)'
- en: Code
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can use the following Python code to compute the IQR:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下Python代码来计算IQR：
- en: Code block 3-6
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-6
- en: '[PRE15]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: You should find an IQR of `2.5`.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该找到一个IQR为`2.5`。
- en: Correlations
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关性
- en: Correlation is a descriptive statistic for describing relations hips between
    multiple variables. Let's see how it works.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 相关性是描述多个变量之间关系的描述性统计量。让我们看看它是如何工作的。
- en: Interpretation and use
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解释和使用
- en: 'Now that you have seen multiple measures of centrality and variability, you
    will now discover a descriptive statistic that allows you to study relations hips
    between two variables. The main descriptive statistic for this is **correlation**.
    There are multiple formulas and definitions of correlation, but here, you will
    see the most common one: Pearson correlation.'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经看到了多个中心性和变异性的度量，你现在将发现一个描述性统计量，它允许你研究两个变量之间的关系。这个描述性统计量的主要形式是**相关性**。相关性有多种公式和定义，但在这里，你将看到最常见的一种：皮尔逊相关性。
- en: The correlation coefficient will be `-1` for strong negative correlation, `1`
    for strong positive correlation, `0` for no correlation, or somewhere in between.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 对于强负相关，相关系数将是`-1`，对于强正相关，相关系数是`1`，对于无相关，相关系数是`0`，或者介于两者之间。
- en: Formula
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 公式
- en: 'The formula for Pearson''s correlation coefficient is shown here:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这里展示了皮尔逊相关系数的公式：
- en: '![](img/Formula_03_006.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_006.jpg)'
- en: Code
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 代码
- en: 'You can compute it easily in Python using the following code:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下代码在Python中轻松计算它：
- en: Code block 3-7
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块3-7
- en: '[PRE18]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: You should obtain a correlation matrix in which you can read that the correlation
    coefficient is `0.77`. This indicates a positive correlation between the two variables.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该获得一个相关矩阵，你可以从中读取相关系数是`0.77`。这表明两个变量之间存在正相关。
- en: Now that you have seen some numerical ways to describe data, it will be useful
    to discover some methods for visualizing this data in a more user-friendly way.
    The following section goes deeper into this.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经看到了一些描述数据的数值方法，将会有助于发现一些以更用户友好的方式可视化这些数据的方法。下一节将深入探讨这一点。
- en: Real-time visualizations
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实时可视化
- en: In this part, you will see how to set up a simple real-time visualization using
    Plotly's Dash. This tool is a great dashboarding tool for data scientists, as
    it is easy to learn and does not require much except for a Python environment.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 在这部分，你将了解如何使用Plotly的Dash设置一个简单的实时可视化。这个工具是数据科学家的一个很好的仪表板工具，因为它易于学习，除了Python环境之外不需要其他东西。
- en: The code is a little bit too long to show in the book, but you can find the
    Python file (called `ch3-realtimeviz.py`) in the GitHub repository.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 代码有点长，不适合在书中展示，但你可以在GitHub仓库中找到Python文件（名为`ch3-realtimeviz.py`）。
- en: In the code, you can see how a simple real-time graph is built. The general
    setup of the code is to have an app. You define the layout in the app using HTML-like
    building blocks. In this case, the layout contains one div (one block of content)
    in which there is a graph.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在代码中，你可以看到如何构建一个简单的实时图形。代码的一般设置是有一个应用程序。你使用HTML类似的构建块在应用程序中定义布局。在这种情况下，布局包含一个div（一个内容块），其中有一个图形。
- en: The main component is the use of the `Interval` function in this layout. Using
    this will make the dashboard update automatically at a given frequency. It is
    fast enough to consider these as real-time updates.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 该布局的主要组件是使用`Interval`函数。使用这个函数将使仪表板以给定的频率自动更新。这足够快，可以将其视为实时更新。
- en: The callback decorates the function that is written just below it (`update_graph`).
    By decorating it this way, the app knows that it has to call this function every
    time an update is done (triggered by `Interval` in the layout). The `update_graph`
    function returns an updated graph.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 回调装饰了其下方编写的函数（`update_graph`）。通过这种方式装饰，应用程序知道每次更新时（由布局中的`Interval`触发）都必须调用此函数。`update_graph`函数返回一个更新后的图形。
- en: Opening the dashboard
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 打开仪表板
- en: 'Once you run the code on your local machine, you will see the following information:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你在本地机器上运行代码，你将看到以下信息：
- en: '![Figure 3.1 – Output of Dash'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.1 – Dash的输出]'
- en: '](img/B18335_03_1.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B18335_03_1.jpg]'
- en: Figure 3.1 – Output of Dash
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.1 – Dash的输出
- en: 'This link will give you access to the dashboard that is being updated in real
    time. It looks something like this:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 此链接将为您提供访问正在实时更新的仪表板的方式。它看起来像这样：
- en: '![Figure 3.2 – The Plotly dashboard'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.2 – Plotly仪表板]'
- en: '](img/B18335_03_2.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B18335_03_2.jpg]'
- en: Figure 3.2 – The Plotly dashboard
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.2 – Plotly仪表板
- en: Comparing Plotly's Dash and other real-time visualization tools
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较Plotly的Dash和其他实时可视化工具
- en: There are many other data visualization tools out there. Popular examples are
    Power BI, QlikView, and Tableau. The great thing about Plotly's Dash is that it
    is super easy to get started with if you are already in a Python environment.
    It is free and does not require installation.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有许多其他的数据可视化工具。流行的例子包括Power BI、QlikView和Tableau。Plotly的Dash的好处是，如果你已经在Python环境中，它非常容易上手。它是免费的，不需要安装。
- en: If you want to be a pro in **business intelligence** (**BI**), it is worth checking
    out other tools. Many of them have capacities for real-time updates, and the specific
    documentation of each tool will guide you to it.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要成为**商业智能**（**BI**）的专家，值得检查其他工具。其中许多都有实时更新的能力，每个工具的具体文档将指导你如何使用它。
- en: When building dashboarding or data visualization systems, it is also important
    to consider your overall architecture. As discussed in the previous chapter, in
    many cases, you will have a data-generating system and an architecture that is
    able to manage this in real time. Just like any other analytics building block,
    you will need to make sure that your dashboard can be plugged into your data generating
    process, or you may need to build an in-between data store or data communication
    layer.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建仪表板或数据可视化系统时，考虑您的整体架构也很重要。正如前一章所讨论的，在许多情况下，您将有一个数据生成系统和能够实时管理该系统的架构。就像任何其他分析构建块一样，您需要确保您的仪表板可以连接到您的数据生成过程，或者您可能需要构建一个中间数据存储或数据通信层。
- en: 'We will now move on to the next use case of descriptive statistics: building
    basic alerting systems.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将进入描述性统计学的下一个用例：构建基本的警报系统。
- en: Building basic alerting systems
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建基本警报系统
- en: In the previous parts of this chapter, you have seen an introduction to descriptive
    statistics and visualization.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的前几部分，您已经看到了描述性统计和可视化的介绍。
- en: 'Basic alerting systems will be covered as the last data analysis use case.
    In this part, you will see how you can use basic alerting systems on streaming
    data. For this, you will see how you can leverage descriptive statistics together
    with business rules to automatically generate alerts in real time. Example methods
    for alerting systems are as follows:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 基本警报系统将在最后一个数据分析用例中介绍。在本部分中，您将了解如何使用基本警报系统对流数据进行操作。为此，您将了解如何利用描述性统计与业务规则相结合，在实时自动生成警报。警报系统的示例方法如下：
- en: Alerting systems on extreme values
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 极端值警报系统
- en: Alerting systems on process stability
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过程稳定性警报系统
- en: Alerting systems on constant variability
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 恒定变异性警报系统
- en: Statistical process control and Lean Six Sigma control charts
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统计过程控制和精益六西格玛控制图
- en: Alerting systems on extreme values
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 极端值警报系统
- en: 'The first example for alerting and monitoring systems on streaming data is
    the use case that you have seen in earlier chapters: coding a business rule that
    sends an alert once observed values are outside of hardcoded boundaries.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 流数据警报和监控系统中的第一个例子是您在早期章节中看到的用例：编写一个业务规则，一旦观察到的值超出硬编码的边界，就会发送警报。
- en: 'This example was coded in previous chapters as follows:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子在之前的章节中如下编码：
- en: Code block 3-9
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块 3-9
- en: '[PRE22]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'You will see the following data being printed:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到以下数据被打印出来：
- en: '![Figure 3.3 – The data batch'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.3 – 数据批次'
- en: '](img/B18335_03_3.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B18335_03_3.jpg)'
- en: Figure 3.3 – The data batch
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.3 – 数据批次
- en: 'Let''s now write the function and loop through the data to execute the function
    on each data point:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来编写函数并遍历数据，以便在每个数据点上执行该函数：
- en: Code block 3-10
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块 3-10
- en: '[PRE28]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[PRE30]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[PRE31]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[PRE32]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '[PRE34]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'The resulting print output shows that a number of alerts have been launched:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 结果打印输出显示已启动多个警报：
- en: '![Figure 3.4 – The printed results of your alerting system'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.4 – 您警报系统的打印结果'
- en: '](img/B18335_03_4.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B18335_03_4.jpg)'
- en: Figure 3.4 – The printed results of your alerting system
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4 – 您警报系统的打印结果
- en: 'This example is a great first step into alerting and monitoring systems: a
    common use case for streaming data. Let''s see how you can build on this example
    to add more and more complex static logic to this.'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子是进入警报和监控系统的一个很好的第一步：流数据的一个常见用例。让我们看看您如何在此基础上添加更多和更复杂的静态逻辑。
- en: Alerting systems on process stability (mean and median)
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 过程稳定性警报系统（均值和中位数）
- en: Rather than applying business logic to individual values, it may be better in
    some cases to add logic for averages. In many cases, it will not be necessary
    to send alerts if just one observation is out of specification. However, when
    the average of several products gets out of specification, you are likely to have
    a structural problem that needs to be solved.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 与将业务逻辑应用于单个值相比，在某些情况下，添加平均值的逻辑可能更好。在许多情况下，如果只有一个观察值不符合规范，可能不需要发送警报。然而，当多个产品的平均值超出规范时，您可能有一个需要解决的问题的结构性问题。
- en: 'You could think of coding such an example as follows:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以这样考虑编写这样的例子：
- en: Code block 3-11
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块 3-11
- en: '[PRE37]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[PRE41]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '[PRE42]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[PRE44]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '[PRE45]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '[PRE46]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[PRE47]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '[PRE48]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '[PRE49]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '[PRE52]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[PRE53]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '[PRE55]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'In this example, you see that there is a windowed average computed on the last
    10 observations. This allows you to alert as soon as the average of the last three
    observations reaches a hardcoded alerting threshold. You should observe the following
    output:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，你可以看到对最后 10 个观测值进行了窗口平均计算。这允许你在最后三个观测值的平均值达到硬编码的警报阈值时立即发出警报。你应该观察到以下输出：
- en: '![Figure 3.5 – Improved print output'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.5 – 改进的打印输出'
- en: '](img/B18335_03_5.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B18335_03_5.jpg](img/B18335_03_5.jpg)'
- en: Figure 3.5 – Improved print output
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.5 – 改进的打印输出
- en: You can observe that the fact of using the average of three observations makes
    it much less likely to receive an alert. If you were to use even more observations
    in your window, this would be reduced even more. Fine-tuning should depend on
    the business case.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以观察到，使用三个观测值的平均值的事实使得收到警报的可能性大大降低。如果你在窗口中使用更多的观测值，这会进一步降低。微调应取决于业务案例。
- en: Alerting systems on constant variability (std and variance)
  id: totrans-248
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 恒定可变性的警报系统（标准差和方差）
- en: You can do the same with variability. As discussed in the section on descriptive
    statistics, a process is often described by centrality and variability. Even if
    your average is within specifications, there may be a large variability; if variability
    is large, this may be a problem for you as well.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以用同样的方法处理可变性。正如在描述性统计章节中讨论的那样，一个过程通常由中心性和可变性来描述。即使你的平均值在规范范围内，也可能存在很大的可变性；如果可变性很大，这也可能成为你的一个问题。
- en: You can do alerting systems on variability using windowed computations of the
    mean. This can be used for a dashboard, but also for alerting systems and more.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用窗口计算的平均值来执行可变性的警报系统。这可以用于仪表板，也可以用于警报系统等。
- en: 'You can code this as follows:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以这样编写代码：
- en: Code block 3-12
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块 3-12
- en: '[PRE56]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '[PRE57]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '[PRE59]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: '[PRE60]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '[PRE61]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '[PRE62]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '[PRE63]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[PRE64]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[PRE65]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '[PRE67]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '[PRE69]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '[PRE70]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '[PRE71]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[PRE72]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '[PRE73]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[PRE74]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Note that the alerts are now not based on the average value, but on variability.
    You will receive the following output for this example:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，现在的警报不是基于平均值，而是基于可变性。对于这个例子，你会收到以下输出：
- en: '![Figure 3.6 – Even further improved print output'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.6 – 进一步改进的打印输出'
- en: '](img/B18335_03_6.jpg)'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B18335_03_6.jpg](img/B18335_03_6.jpg)'
- en: Figure 3.6 – Even further improved print output
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.6 – 进一步改进的打印输出
- en: Basic alerting systems using statistical process control
  id: totrans-276
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基本警报系统使用统计过程控制
- en: If you want to go a step further with this type of alert system, you can use
    methods from statistical process control. This domain of statistics focuses on
    controlling a process or a production method. The main tool that stems from this
    domain is called **control charts**.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想将此类警报系统进一步发展，可以使用统计过程控制的方法。这个统计领域专注于控制一个过程或生产方法。从这个领域衍生出的主要工具被称为**控制图**。
- en: In control charts, you plot a statistic over time, but you add control limits.
    A standard control chart is the one in which you plot the sample average over
    time, and you add control limits based on standard deviation. You then count and
    observe a number of extreme values and when a certain number of repetitive events
    occur, you launch an alert.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在控制图中，你随时间绘制一个统计量，但你会添加控制限。一个标准的控制图是在其中你绘制样本平均随时间的变化，并基于标准差添加控制限。然后你计数并观察极端值，当发生一定数量的重复事件时，你会触发警报。
- en: You will find a link in the *Further reading* section for more details on control
    charts and statistical process control.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在“进一步阅读”部分找到一个链接，了解更多关于控制图和统计过程控制的信息。
- en: Summary
  id: totrans-280
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you have learned the basics of doing data analysis on streaming
    data. You have seen that doing descriptive statistics on data streams does not
    work the same as when doing descriptive statistics on batch data. Estimation theory
    from batch data can be used, but you have to window over data to get a larger
    or smaller window of historical data.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了在流数据上进行数据分析的基础知识。你看到，对数据流进行描述性统计与对批量数据进行描述性统计的工作方式不同。可以从批量数据中使用的估计理论，但你需要对数据进行窗口处理以获取更大或更小的历史数据窗口。
- en: Windowing settings can have a strong impact on your results. Larger windows
    will take into account more data and will be taking into account data further
    back in time. They will, however, be much less sensitive to the new data point.
    After all, the larger the window, the lesser impact one new data point has.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 窗口设置可以对你的结果产生强烈影响。较大的窗口将考虑更多的数据，并将考虑更早时间的数据。然而，它们对新的数据点将变得不那么敏感。毕竟，窗口越大，一个新数据点的影响就越小。
- en: You have also learned how to build data visualizations using Plotly's Dash.
    This tool is great, as it is quite powerful and can still be used from a Python
    environment. Many other visualization tools exist, but the most important thing
    is to master at least one of them. This chapter has shown you the functional requirements
    for visualizing streaming data, and you'll be able to reproduce this on other
    data visualization tools if needed.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 你还学会了如何使用 Plotly 的 Dash 构建数据可视化。这个工具很棒，因为它非常强大，并且仍然可以从 Python 环境中使用。存在许多其他可视化工具，但最重要的是掌握至少其中之一。本章向您展示了可视化流数据的函数需求，如果需要，您将能够在其他数据可视化工具上重现这一点。
- en: The last part of the chapter introduced statistical process control. Until now,
    you have been working with static rules or descriptive statistics for building
    simple alerting systems. Statistical process control is an interesting domain
    for building more advanced alerting systems that are still relatively easy to
    comprehend and implement.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的最后部分介绍了统计过程控制。到目前为止，你一直在使用静态规则或描述性统计来构建简单的警报系统。统计过程控制是构建更高级警报系统的一个有趣领域，这些系统相对容易理解且易于实现。
- en: In the next chapter, you will start discovering online machine learning. Once
    you get familiarized with online machine learning in general, you'll see, in later
    chapters, how you can replace static decision rules for alerting systems with
    machine learning-based anomaly detection models. The data analysis methods that
    you have seen in this chapter are an important first step in that direction.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将开始探索在线机器学习。一旦你对在线机器学习有了基本的了解，你将在后面的章节中看到，你可以用基于机器学习的异常检测模型来替换静态的警报系统决策规则。本章中你看到的数据分析方法是朝着这个方向的重要第一步。
- en: Further reading
  id: totrans-286
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '*Estimation theory*: [https://en.wikipedia.org/wiki/Estimation_theory](https://en.wikipedia.org/wiki/Estimation_theory)'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*估计理论*：[https://en.wikipedia.org/wiki/Estimation_theory](https://en.wikipedia.org/wiki/Estimation_theory)'
- en: '*Sampling*: [https://en.wikipedia.org/wiki/Sampling_(statistics)](https://en.wikipedia.org/wiki/Sampling_(statistics))'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*抽样*：[https://en.wikipedia.org/wiki/Sampling_(statistics)](https://en.wikipedia.org/wiki/Sampling_(statistics))'
- en: '*Windowing*: [https://softwaremill.com/windowing-in-big-data-streams-spark-flink-kafka-akka/](https://softwaremill.com/windowing-in-big-data-streams-spark-flink-kafka-akka/)'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*窗口化*：[https://softwaremill.com/windowing-in-big-data-streams-spark-flink-kafka-akka/](https://softwaremill.com/windowing-in-big-data-streams-spark-flink-kafka-akka/)'
- en: '*Plot live graphs using Python Dash and Plotly*: [https://www.geeksforgeeks.org/plot-live-graphs-using-python-dash-and-plotly/](https://www.geeksforgeeks.org/plot-live-graphs-using-python-dash-and-plotly/)'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Python Dash 和 Plotly 绘制实时图表*：[https://www.geeksforgeeks.org/plot-live-graphs-using-python-dash-and-plotly/](https://www.geeksforgeeks.org/plot-live-graphs-using-python-dash-and-plotly/)'
- en: 'Plotly Dash documentation: [https://plotly.com/](https://plotly.com/)'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Plotly Dash 文档：[https://plotly.com/](https://plotly.com/)
- en: 'Control charts: [https://en.wikipedia.org/wiki/Control_chart](https://en.wikipedia.org/wiki/Control_chart)'
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 控制图：[https://en.wikipedia.org/wiki/Control_chart](https://en.wikipedia.org/wiki/Control_chart)
- en: '*Engineering Statistics Handbook, Chapter 6.3 Univariate and Multivariate Control
    Charts*: [https://www.itl.nist.gov/div898/handbook/pmc/section3/pmc3.htm](https://www.itl.nist.gov/div898/handbook/pmc/section3/pmc3.htm)'
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*《工程统计学手册，第6.3章：单变量和多变量控制图》*：[https://www.itl.nist.gov/div898/handbook/pmc/section3/pmc3.htm](https://www.itl.nist.gov/div898/handbook/pmc/section3/pmc3.htm)'
