- en: <st c="0">6</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="2">Extracting Features from Date and Time Variables</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="50">Date and time variables contain information about dates, times, or
    both, and in programming, we refer to them collectively as</st> `<st c="177">datetime</st>`
    <st c="185">features.</st> <st c="196">Date of birth, the time of an event, and
    the date and time of the last payment are examples of</st> `<st c="291">datetime</st>`
    <st c="299">variables.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="310">Because of their nature,</st> `<st c="336">datetime</st>` <st c="344">features
    typically exhibit high cardinality.</st> <st c="390">This means that they contain
    a huge number of unique values, each corresponding to a specific date and/or time
    combination.</st> <st c="514">We don’t normally use</st> `<st c="536">datetime</st>`
    <st c="544">variables for machine learning models in their raw format.</st> <st
    c="604">Instead, we enrich the dataset by extracting multiple features from these
    variables.</st> <st c="689">These new features will typically have reduced cardinality,
    and allow us to capture meaningful information, such as trends, seasonality, and
    important events</st> <st c="847">and tendencies.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="862">In this chapter, we will explore how to extract features from dates
    and time by utilizing the</st> `<st c="957">pandas</st>` `<st c="963">dt</st>`
    <st c="966">module, and then automate this procedure</st> <st c="1008">with</st>
    `<st c="1013">feature-engine</st>`<st c="1027">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1028">This chapter will cover the</st> <st c="1057">following recipes:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1075">Extracting features from dates</st> <st c="1107">with</st> `<st
    c="1112">pandas</st>`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1118">Extracting features from time</st> <st c="1149">with</st> `<st
    c="1154">pandas</st>`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1160">Capturing elapsed time between</st> `<st c="1192">datetime</st>`
    <st c="1200">variables</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1210">Working with time in different</st> <st c="1242">time zones</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1252">Automating</st> `<st c="1264">datetime</st>` <st c="1272">feature
    extraction</st> <st c="1292">with</st> `<st c="1297">feature-engine</st>`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1311">Technical requirements</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="1334">In this chapter, we will use the</st> `<st c="1368">pandas</st>`<st
    c="1374">,</st> `<st c="1376">numpy</st>`<st c="1381">, and</st> `<st c="1387">feature-engine</st>`
    <st c="1401">Python libraries.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1419">Extracting features from dates with pandas</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="1462">The</st> <st c="1467">values of</st> `<st c="1477">datetime</st>`
    <st c="1485">variables can be dates, time, or</st> <st c="1519">both.</st> <st
    c="1525">We’ll begin by focusing on those variables that</st> <st c="1572">contain
    dates.</st> <st c="1588">We rarely use raw dat</st><st c="1609">es with machine
    learning algorithms.</st> <st c="1647">Instead, we extract simpler features, such
    as the year, month, or day of the week, that allow us to capture insights such
    as seasonality, periodicity,</st> <st c="1798">and trends.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1809">The</st> `<st c="1814">pandas</st>` <st c="1820">Python library
    is great for working with date and time.</st> <st c="1877">Utilizing the</st>
    `<st c="1891">pandas</st>` `<st c="1897">dt</st>` <st c="1900">module, we can
    access the</st> `<st c="1927">datetime</st>` <st c="1935">properties of a</st>
    `<st c="1952">pandas</st>` <st c="1958">Series to extract many features.</st>
    <st c="1992">However, to leverage this functionality, the variables need to be
    cast into a data type that supports these operations, such as</st> `<st c="2120">datetime</st>`
    <st c="2128">or</st> `<st c="2132">timedelta</st>`<st c="2141">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2142">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2147">The</st> `<st c="2152">datetime</st>` <st c="2160">variables can
    be cast as objects, particularly when we load the data from a CSV file.</st> <st
    c="2247">To extract the date and time features that we will discuss throughout
    this chapter, it is necessary to recast the variables</st> <st c="2371">as</st>
    `<st c="2374">datetime</st>`<st c="2382">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2383">In this recipe, we will learn how to extract features from dates
    by</st> <st c="2452">utilizing</st> `<st c="2462">panda</st><st c="2467">s</st>`<st
    c="2469">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2470">Getting ready</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="2484">The following are some of the features that we can extract from
    the</st> `<st c="2553">date</st>` <st c="2557">part of the</st> `<st c="2570">datetime</st>`
    <st c="2578">variable off the shelf</st> <st c="2602">using</st> `<st c="2608">pandas</st>`<st
    c="2614">:</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="2616">pandas.Series.dt.year</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2637">pandas.Series.dt.quarter</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2662">pandas.Series.dt.month</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2685">pandas.Series.dt.isocalendar().week</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2721">pandas.Series.dt.day</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2742">pandas.Series.dt.day_of_week</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2771">pandas.Series.dt.weekday</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2796">pandas.Series.dt.dayofyear</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="2823">pandas.Series.dt.day_of_year</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="2852">We can</st> <st c="2860">use the features we’ve obtained with</st>
    `<st c="2897">pandas</st>` <st c="2903">to</st> <st c="2906">create even more
    features, such as the semester or</st> <st c="2958">whether it is a weekend.</st>
    <st c="2983">We will learn how to do this in the</st> <st c="3019">next sec</st><st
    c="3027">tion.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3033">How to do it...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="3049">To pr</st><st c="3055">oceed with the recipe, let’s i</st><st c="3086">mport</st>
    `<st c="3093">pandas</st>` <st c="3099">and</st> `<st c="3104">numpy</st>`<st
    c="3109">, and create a</st> <st c="3124">sample DataFrame:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3141">Let’s import</st> <st c="3155">the libraries:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="3208">We’ll start by creating 20</st> `<st c="3236">datetime</st>` <st
    c="3244">values beginning from</st> `<st c="3267">2024-05-17</st>` <st c="3277">at
    midnight and followed by increments of 1 day.</st> <st c="3327">Then, we’ll capture
    those values in a</st> `<st c="3365">DataFrame</st>` <st c="3374">instance and
    display the top</st> <st c="3404">five rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="3520">In the following output, we see the variable containing dates that
    we created in</st> *<st c="3602">Ste</st><st c="3605">p 2</st>*<st c="3609">:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.1 – Top rows of a DataFrame with a datetime variable containing
    only dates](img/B22396_06_1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="3680">Figure 6.1 – Top rows of a DataFrame with a datetime variable containing
    only dates</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3763">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3768">We can check the data format of the variable by executing</st>
    `<st c="3827">data["date"].dtypes</st>`<st c="3846">. If the variable is cast
    as an object, we can convert it into</st> `<st c="3909">datetime</st>` <st c="3917">format
    by executing</st> `<st c="3938">data["date_dt"] =</st>` `<st c="3956">pd.to_datetime(data["date"])</st>`<st
    c="3984">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3985">L</st><st c="3987">et’s</st> <st c="3991">extract the year pa</st><st
    c="4011">rt of the date in a</st> <st c="4032">new column and display the top
    five rows of</st> <st c="4075">the</st> <st c="4080">resulting DataFrame:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="4148">We see the new</st> `<st c="4164">year</st>` <st c="4168">variable
    in the</st> <st c="4185">following o</st><st c="4196">utput:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.2 – First five rows of the DataFrame with the year variable extracted
    from the date](img/B22396_06_2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="4303">Figure 6.2 – First five rows of the DataFrame with the year variable
    extracted from the date</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="4395">Let’s extract the quarter of the year out of the date into a new
    column and display the top</st> <st c="4488">five rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="4573">We see the new</st> `<st c="4589">quarter</st>` <st c="4596">variable
    in the</st> <st c="4613">following ou</st><st c="4625">tput:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.3 – The first five rows of a DataFrame with the quarter variable
    extracted from the date](img/B22396_06_3.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="4722">Figure 6.3 – The first five rows of a DataFrame with the quarter
    variable extracted from the date</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="4819">With</st> `<st c="4825">quarte</st><st c="4831">r</st>`<st c="4833">,
    we</st> <st c="4838">c</st><st c="4839">an</st> <st c="4841">now</st> <st c="4846">create
    the</st> `<st c="4857">semester</st>` <st c="4865">feature:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="4929">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="4934">You can explore the distinct values of the new variables utilizing</st>
    `<st c="5002">pandas</st>`<st c="5008">’</st> `<st c="5011">unique()</st>`<st
    c="5019">, for example, by executing</st> `<st c="5047">df["quarter"].unique()</st>`
    <st c="5069">or</st> `<st c="5073">df["semester"].unique()</st>`<st c="5096">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="5097">Let’s extract the</st> `<st c="5116">month</st>` <st c="5121">part
    of the date in a new column and display the top five rows of</st> <st c="5188">the
    DataFrame:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="5271">We</st> <st c="5275">see the</st> <st c="5282">new</st> `<st c="5287">month</st>`
    <st c="5292">variable</st> <st c="5301">in the</st> <st c="5309">followi</st><st
    c="5316">ng output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: "![Figure 6.4 – The first five rows of a DataFrame with the new month vari\uFEFF\
    able](img/B22396_06_4.jpg)"
  prefs: []
  type: TYPE_IMG
- en: <st c="5411">Figure 6.4 – The first five rows of a DataFrame with the new month
    vari</st><st c="5482">able</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="5487">Let’s extract the week number (a year has 52 weeks) from</st> <st
    c="5545">the date:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="5634">We see the</st> `<st c="5646">week</st>` <st c="5650">variable
    in the</st> <st c="5667">followin</st><st c="5675">g output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.5 – The first five rows of a DataFrame with the new week variable](img/B22396_06_5.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="5773">Figure 6.5 – The first five rows of a DataFrame with the new week
    variable</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="5847">Let’s extract the day of the month, which can take values between</st>
    `<st c="5914">1</st>` <st c="5915">and</st> `<st c="5920">31</st>`<st c="5922">,
    into a</st> <st c="5931">new column:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="6011">We</st> <st c="6015">see the</st> `<st c="6023">day_mo</st>` <st
    c="6029">variable</st> <st c="6038">in the</st> <st c="6046">follow</st><st c="6052">ing
    output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: "![Figure 6.6 – The top rows of a DataFrame with the new variable capturing\
    \ the day of the \uFEFFmonth](img/B22396_06_6.jpg)"
  prefs: []
  type: TYPE_IMG
- en: <st c="6154">Figure 6.6 – The top rows of a DataFrame with the new variable
    capturing the day of the</st> <st c="6242">month</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="6247">Let’s extract the day of the</st> <st c="6276">week, with values
    between</st> `<st c="6303">0</st>` <st c="6304">and</st> `<st c="6309">6</st>`
    <st c="6310">(from Monday to Sunday), in a new column, then display the</st> <st
    c="6370">top rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="6468">We see the</st> `<st c="6480">day_week</st>` <st c="6488">variable
    in the</st> <st c="6505">followi</st><st c="6512">ng output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.7 – The top rows of a DataFrame with a new variable representing
    days of a week](img/B22396_06_7.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="6633">Figure 6.7 – The top rows of a DataFrame with a new variable representing
    days of a week</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="6721">With the variable from</st> *<st c="6745">Step 9</st>*<st c="6751">,
    we can create a binary variable that indicates whether it was</st> <st c="6815">a
    weekend:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="6939">We</st> <st c="6943">see</st> <st c="6946">the new</st> `<st c="6955">is_weekend</st>`
    <st c="6965">variable</st> <st c="6975">in the</st> <st c="6982">follo</st><st
    c="6987">wing output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.8 – The first five rows of a DataFrame with the new is_weekend variable](img/B22396_06_8.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="7101">Figure 6.8 – The first five rows of a DataFrame with the new is_weekend
    variable</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="7181">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="7186">We can automate the extraction of all these features by using</st>
    `<st c="7249">feature-engine</st>`<st c="7263">. Check out the</st> *<st c="7279">Automating
    datetime feature extraction with feature-engine</st>* <st c="7337">recipe in this
    chapter for</st> <st c="7365">more details.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="7378">With t</st><st c="7385">hat, we have extracted many</st> <st c="7414">new
    features from the date part of a</st> `<st c="7451">datetime</st>` <st c="7459">variable
    using</st> `<st c="7475">pandas</st>`<st c="7481">. These features are useful
    for data analysis, visualization, and</st> <st c="7547">predictiv</st><st c="7556">e
    modelling.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="7569">How it works...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="7585">In this recipe, we</st> <st c="7604">extracted many date-related
    features from a</st> `<st c="7649">datetime</st>` <st c="7657">variable</st> <st
    c="7666">by using the</st> `<st c="7680">dt</st>` <st c="7682">module from</st>
    `<st c="7695">pandas</st>`<st c="7701">. First, we</st> <st c="7713">created a
    sample DataFrame with a variable that contained dates.</st> <st c="7778">We used</st>
    `<st c="7786">pandas</st>`<st c="7792">’</st> `<st c="7795">date_range()</st>`
    <st c="7807">to create a range of values starting from an arbitrary date and increasing
    the time by intervals of</st> `<st c="7908">1</st>` <st c="7909">day.</st> <st
    c="7915">With the</st> `<st c="7924">periods</st>` <st c="7931">argument, we indicated
    the number of values to create in the range – that is, the number of dates.</st>
    <st c="8031">With the</st> `<st c="8040">freq</st>` <st c="8044">argument, we
    indicated the size of the steps between the dates.</st> <st c="8109">We used</st>
    `<st c="8117">D</st>` <st c="8118">for days in our example.</st> <st c="8144">Finally,
    we transformed the date range into a DataFrame with</st> `<st c="8205">pandas</st>`
    `<st c="8211">DataFrame()</st>`<st c="8223">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="8224">To extract the different parts of a date, we used</st> `<st c="8275">pandas</st>`<st
    c="8281">’</st> `<st c="8284">dt</st>` <st c="8286">to access the</st> `<st c="8301">datetime</st>`
    <st c="8309">properties of a</st> `<st c="8326">pandas</st>` <st c="8332">Series
    and then utilized the different properties.</st> <st c="8384">We used</st> `<st
    c="8392">year</st>`<st c="8396">,</st> `<st c="8398">month</st>`<st c="8403">,
    and</st> `<st c="8409">quarter</st>` <st c="8416">to capture the year, month,
    and quarter into new columns of the DataFrame.</st> <st c="8492">To find the semester,
    we created a Boolean using NumPy’s</st> `<st c="8549">where()</st>` <st c="8556">in
    combination with the newly created</st> `<st c="8595">quarter</st>` <st c="8602">variable.</st>
    <st c="8613">NumPy’s</st> `<st c="8621">where()</st>` <st c="8628">scanned the
    values of the</st> `<st c="8655">quarter</st>` <st c="8662">variable; if they
    were smaller than</st> `<st c="8699">3</st>`<st c="8700">, it returned the value
    of</st> `<st c="8727">1</st>` <st c="8728">for the first semester; otherwise,
    it returned the value of</st> `<st c="8789">2</st>`<st c="8790">, corresponding
    to the</st> <st c="8813">second semes</st><st c="8825">ter.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="8830">To extract</st> <st c="8841">the different</st> <st c="8855">representations
    of days and weeks, we</st> <st c="8893">used the</st> `<st c="8903">isocalender().week</st>`<st
    c="8921">,</st> `<st c="8923">day</st>`<st c="8926">, and</st> `<st c="8932">dayofweek</st>`
    <st c="8941">properties.</st> <st c="8954">With the day of the week, we went ahead</st>
    <st c="8994">and created a binary variable to indicate whether it was a weekend.</st>
    <st c="9062">We used</st> `<st c="9070">where()</st>` <st c="9077">to scan the
    day of the week, and if the value was greater than</st> `<st c="9141">4</st>`<st
    c="9142">, which corresponds to Saturday and Sunday, the function returned</st>
    `<st c="9208">True</st>` <st c="9212">and otherwise</st> `<st c="9227">False</st>`<st
    c="9232">. Finally, we cast this Boolean vector as an integer to have a binary
    variable with 1s and 0s.</st> <st c="9327">With that, we created multiple features
    from dates that we can use for data analysis and</st> <st c="9416">pre</st><st
    c="9419">dictive modelling.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="9438">There’s more…</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="9452">Using</st> `<st c="9459">pandas</st>`<st c="9465">’</st> `<st c="9468">dt</st>`
    <st c="9470">module, we can</st> <st c="9485">extract many more features from
    dates out of the</st> <st c="9534">box.</st> <st c="9540">For example, we can
    extract the beginning and end of a month, quarter, or year, whether it is a leap
    year, and the number of days in a month.</st> <st c="9682">These are the functions
    that allow you to</st> <st c="9724">do so:</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="9730">pandas.Series.dt.is_month_start</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9762">pandas.Series.dt.is_month_end</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9792">pandas.Series.dt.is_quarter_start</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9826">pandas.Series.dt.is_quarter_end</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9858">pandas.Series.dt.is_year_start</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9889">pandas.Series.dt.is_year_end</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9918">pandas.Series.dt.is_leap_year</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="9948">pandas.Series.dt.days_in_month</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="9979">We can also return the number of days in a specific month with</st>
    `<st c="10043">pd.dt.days_in_month</st>` <st c="10062">and the day in a year (from</st>
    `<st c="10091">1</st>` <st c="10092">to</st> `<st c="10096">365</st>`<st c="10099">)</st>
    <st c="10102">with</st> `<st c="10107">pd.dt</st><st c="10112">.dayofyear</st>`<st
    c="10122">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="10123">For</st> <st c="10128">more details, visit the</st> `<st c="10152">pandas</st>`<st
    c="10158">’</st> `<st c="10161">datetime</st>` <st c="10169">documentation:</st>
    [<st c="10185">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components</st>](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components)<st
    c="10277">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="10278">See also</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="10287">To learn how to create</st> <st c="10310">different</st> `<st
    c="10321">datetime</st>` <st c="10329">ranges with</st> `<st c="10342">pandas</st>`<st
    c="10348">’</st> `<st c="10351">date_ranges()</st>`<st c="10364">,</st> <st c="10366">visit</st>
    [<st c="10372">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases</st>](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases)<st
    c="10458">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="10459">To learn more</st> <st c="10473">about</st> `<st c="10480">pandas</st>`<st
    c="10486">’</st> `<st c="10489">dt</st>`<st c="10491">,</st> <st c="10493">visit</st>
    [<st c="10499">https://pandas.pydata.org/pandas-docs/stable/reference/series.html#datetime-properties</st>](https://pandas.pydata.org/pandas-docs/stable/reference/series.html#datetime-properties)<st
    c="10585">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="10586">Extracting features from time</st> <st c="10617">with pandas</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="10628">Some</st> <st c="10634">events occ</st><st c="10644">ur more often
    at certain times of the day – for</st> <st c="10692">example, fraudulent activity
    is more likely to occur</st> <st c="10745">during the night or early morning.</st>
    <st c="10781">Air pollutant concentration also changes with the time of the day,
    with peaks at rush hour when there are more vehicles on the streets.</st> <st
    c="10917">Therefore, deriving time features is extremely useful for data analysis
    and predictive modelling.</st> <st c="11015">In this recipe, we will extract different
    time parts of a</st> `<st c="11073">datetime</st>` <st c="11081">variable by u</st><st
    c="11095">tilizing</st> `<st c="11105">pandas</st>` <st c="11111">and NumPy.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="11122">Getting ready</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="11136">We can extract hours, minutes, and seconds using the following</st>
    `<st c="11200">pandas</st>`<st c="11206">’</st> `<st c="11209">datetime</st>`
    <st c="11217">properties:</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="11229">pandas.Series.dt.hour</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="11251">pandas.Series.dt.minu</st><st c="11273">te</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="11276">pandas.Series.dt.second</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="11300">How to do it...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="11316">In this</st> <st c="11325">recipe, we’ll</st> <st c="11339">extract
    the</st> `<st c="11351">hour</st>`<st c="11355">,</st> `<st c="11357">minute</st>`<st
    c="11363">, and</st> `<st c="11369">second</st>` <st c="11375">part of a</st>
    `<st c="11386">time</st>` <st c="11390">variable.</st> <st c="11401">Let’s begin
    by importing the</st> <st c="11429">libraries and creating a</st> <st c="11455">sample
    dataset:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="11470">Let’s import</st> `<st c="11484">pandas</st>` <st c="11490">and</st>
    `<st c="11495">numpy</st>`<st c="11500">:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="11541">Let’s begin by creating 20</st> `<st c="11569">datetime</st>`
    <st c="11577">observations, start</st><st c="11597">ing on</st> `<st c="11605">2024-05-17</st>`
    <st c="11615">at midnight and followed by increments of 1 hour, 15 minutes, and
    10 seconds.</st> <st c="11694">Next,</st> <st c="11699">we’ll capture the time
    range in a DataFrame and display the top</st> <st c="11764">five rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="11885">In the following output, we see the variable from</st> *<st c="11936">Step
    2</st>*<st c="11942">, with a</st> `<st c="11951">date</st>` <st c="11955">part
    and a</st> `<st c="11967">time</st>` <st c="11971">part, and the values increasing
    by intervals of 1 hour,</st> <st c="12027">15 minutes, and</st> <st c="12044">10
    seconds:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.9 – The first five rows of a sample DataFrame with a datetime variable](img/B22396_06_9.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="12169">Figure 6.9 – The first five rows of a sample DataFrame with a
    datetime variable</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="12248">Let’s</st> <st c="12255">extract the</st> `<st c="12267">hour</st>`<st
    c="12271">,</st> `<st c="12273">minute</st>`<st c="12279">, and</st> `<st c="12285">second</st>`
    <st c="12291">part</st> <st c="12296">and capture them into three new columns,
    then</st> <st c="12343">display the DataFrame’s top</st> <st c="12371">five rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="12489">In the following output, we see the three</st> `<st c="12532">time</st>`
    <st c="12536">feature</st><st c="12544">s that we extracted in</st> *<st c="12568">Step
    3</st>*<st c="12574">:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.10 – The first five rows of a DataFrame with three variables derived
    from time](img/B22396_06_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="12738">Figure 6.10 – The first five rows of a DataFrame with three variables
    derived from time</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="12825">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="12830">Remember that</st> `<st c="12845">pandas</st>`<st c="12851">’</st>
    `<st c="12854">dt</st>` <st c="12856">needs a</st> `<st c="12865">datetime</st>`
    <st c="12873">object to work.</st> <st c="12890">You can change the data type
    of an object variable into</st> `<st c="12946">datetime</st>` <st c="12954">by
    using</st> `<st c="12964">pandas</st>` `<st c="12970">to_datetime()</st>`<st c="12984">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="12985">Let’s perform the same operations that we did in</st> *<st c="13035">Step
    3</st>* <st c="13041">but now in one line</st> <st c="13062">of code:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="13169">We see the newly created varia</st><st c="13200">bles in the</st>
    <st c="13213">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.11 – The first five rows of a DataFrame with the variables derived
    from time](img/B22396_06_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="13440">Figure 6.11 – The first five rows of a DataFrame with the variables
    derived from time</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="13525">No</st><st c="13528">te</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="13531">You can inspect the unique values of the new variables with</st>
    `<st c="13592">pandas</st>`<st c="13598">’</st> `<st c="13601">unique()</st>`<st
    c="13609">, for example, by</st> <st c="13627">executing</st> `<st c="13637">df['hour'].unique()</st>`<st
    c="13656">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="13657">Finally, let’s</st> <st c="13672">create a binary variable that</st>
    <st c="13703">flags events that occurred in the morning, between</st> <st c="13753">6
    A.M.</st> <st c="13761">and</st> <st c="13765">12 P.M.:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="13857">We see the</st> `<st c="13869">is_morning</st>` <st c="13879">va</st><st
    c="13882">riable in the</st> <st c="13897">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.12 – The top rows of a DataFrame with the new variables derived
    from time](img/B22396_06_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="14145">Figure 6.12 – The top rows of a DataFrame with the new variables
    derived from time</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="14227">With that, we extracted multiple features from the time part of
    a</st> `<st c="14294">datetime</st>` <st c="14302">variable.</st> <st c="14313">These
    features can be used for data ana</st><st c="14352">lysis and</st> <st c="14363">predictive
    modelling.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="14384">How it works...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="14400">In this recipe, we created features that capture representations
    of time.</st> <st c="14475">First, we created a sample DataFrame with a</st> `<st
    c="14519">datetime</st>` <st c="14527">variable.</st> <st c="14538">We used</st>
    `<st c="14546">pandas</st>` `<st c="14552">date_range()</st>`<st c="14565">to
    create a range of 20 values</st> <st c="14597">starting from an a</st><st c="14615">rbitrary
    date and increasing by intervals of 1 hour, 15 minutes, and 10 seconds.</st> <st
    c="14697">We used the</st> `<st c="14709">1h15min10s</st>` <st c="14719">string
    as the frequency term for the</st> `<st c="14757">freq</st>` <st c="14761">argument
    to indicate the desired increments.</st> <st c="14807">Next, we transformed the
    date range into a DataFrame with</st> `<st c="14865">pandas</st>`<st c="14871">’</st>
    `<st c="14874">DataFrame()</st>`<st c="14885">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="14886">To extract the</st> <st c="14902">different time parts, we used</st>
    `<st c="14932">pandas</st>`<st c="14938">’</st> `<st c="14941">dt</st>` <st c="14943">to</st>
    <st c="14947">access the</st> `<st c="14958">hour</st>`<st c="14962">,</st> `<st
    c="14964">minute</st>`<st c="14970">, and</st> `<st c="14976">second</st>` `<st
    c="14982">time</st>` <st c="14987">properties.</st> <st c="15000">After</st> <st
    c="15006">extracting</st> `<st c="15017">hour</st>` <st c="15021">from</st> `<st
    c="15027">time</st>`<st c="15031">, we used it to create a new feature that indicated
    whether it was morning by using NumPy’s</st> `<st c="15123">where()</st>`<st c="15130">.
    NumPy’s</st> `<st c="15140">where()</st>` <st c="15147">scanned the</st> `<st
    c="15160">hour</st>` <st c="15164">variable; if its values were smaller than 12
    and greater than 6, it assigned a value of</st> `<st c="15253">1</st>`<st c="15254">;
    otherwise, it assigned a value of</st> `<st c="15290">0</st>`<st c="15291">. With
    these operations, we added several features to the DataFrame that can be used
    for data analysis and</st> <st c="15397">to train machine</st> <st c="15415">learning
    models.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="15431">There’s more…</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="15445">We can also extract microseconds and nanoseconds with the following</st>
    `<st c="15514">pandas</st>` <st c="15520">properties:</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="15532">pandas.Series.dt.microsecond</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`<st c="15561">pandas.Series.dt.nanosecond</st>`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="15589">For more</st> <st c="15599">details,</st> <st c="15608">visit</st>
    [<st c="15614">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components</st>](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components)<st
    c="15706">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="15707">Capturing the elapsed time between datetime variables</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="15761">We can extract</st> <st c="15777">powerful features from</st>
    <st c="15800">each</st> `<st c="15805">datetime</st>` <st c="15813">variable individually,
    as we did in the previous two recipes.</st> <st c="15876">We can create additional
    features by combining multiple</st> `<st c="15932">datetime</st>` <st c="15940">variables.</st>
    <st c="15952">A common example consists of extracting the</st> **<st c="15996">age</st>**
    <st c="15999">at the time of an event by comparing the</st> **<st c="16041">date
    of birth</st>** <st c="16054">with the</st> **<st c="16064">date of</st>** **<st
    c="16072">the event</st>**<st c="16081">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="16082">In this recipe, we will learn how to capture the time between
    two</st> `<st c="16149">datetime</st>` <st c="16157">variables by</st> <st c="16170">utilizing</st>
    `<st c="16181">pandas</st>` <st c="16187">and</st> `<st c="16192">feature-engine</st>`<st
    c="16206">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="16207">How to do it...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="16223">To proceed with this recipe, we’ll create a DataFrame containing
    two</st> `<st c="16293">datatime</st>` <st c="16301">variables:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="16312">Let’s begin by importing</st> `<st c="16338">pandas</st>`<st c="16344">,</st>
    `<st c="16346">numpy</st>`<st c="16351">,</st> <st c="16353">and</st> `<st c="16357">datetime</st>`<st
    c="16365">:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="16422">We’ll start by creating two</st> `<st c="16451">datetime</st>`
    <st c="16459">variables with 20 values each; the values start from</st> `<st c="16513">2024-05-17</st>`
    <st c="16523">and increase in intervals of</st> `<st c="16553">1</st>` <st c="16554">hour
    for the first variable, and</st> `<st c="16588">1</st>` <st c="16589">month for
    the second.</st> <st c="16612">Then, we‘ll capture the variables in a DataFrame,
    add column names, and display the</st> <st c="16696">top rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="16899">We see the</st> <st c="16910">first five rows of the</st> <st
    c="16934">DataFram</st><st c="16942">e from</st> *<st c="16950">Step 2</st>* <st
    c="16956">in the</st> <st c="16964">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: "![Figure 6.13 – The first five rows of a DataFrame wit\uFEFFh two datetime\
    \ variables](img/B22396_06_13.jpg)"
  prefs: []
  type: TYPE_IMG
- en: <st c="17157">Figure 6.13 – The first five rows of a DataFrame wit</st><st c="17209">h
    two datetime variables</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="17234">Let’s capture the difference in days between the two variables
    in a new feature, and then display the DataFrame’s</st> <st c="17349">top rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="17426">We see the differ</st><st c="17444">ence in days in the</st> <st
    c="17465">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.14 – Top rows of a DataFrame with a new variable capturing the time
    difference between the two datetime features](img/B22396_06_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="17687">Figure 6.14 – Top rows of a DataFrame with a new variable capturing
    the time difference between the two datetime features</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="17808">Let’s capture</st> <st c="17822">the difference in</st> <st c="17841">weeks
    between the two</st> `<st c="17863">datetime</st>` <st c="17871">variables and
    then display the DataFrame’s</st> <st c="17915">top rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="18011">We see the difference in weeks between the</st> <st c="18055">variables
    in the</st> <st c="18072">following screenshot:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: "![Figure 6.15 – A DataFrame with the time difference between the datetime variables\
    \ expressed in number \uFEFFof days and number of weeks](img/B22396_06_15.jpg)"
  prefs: []
  type: TYPE_IMG
- en: <st c="18361">Figure 6.15 – A DataFrame with the time difference between the
    datetime variables expressed in number</st> <st c="18463">of days and number of
    weeks</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="18490">Now, let’s calculate the time in between the variables in minutes
    and seconds and then display the DataFrame’s</st> <st c="18602">top rows:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="18767">We see the</st> <st c="18779">new variables in the</st> <st c="18800">following
    output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.16 – A DataFrame with the time difference between the two datetime
    variables expressed in different time units](img/B22396_06_16.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="19205">Figure 6.16 – A DataFrame with the time difference between the
    two datetime variables expressed in different time units</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="19324">Finally, let’s calculate the difference between one variable and
    the current day, expressed in number of days, and then display the first five
    rows of</st> <st c="19476">the DataFrame:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="19560">We can find the new variable in the final column of</st> <st c="19613">the
    DataFrame in the</st> <st c="19634">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.17 – A DataFrame with the new variable containing the difference
    between date1 and the day this code was executed](img/B22396_06_17.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="20059">Figure 6.17 – A DataFrame with the new variable containing the
    difference between date1 and the day this code was executed</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20181">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20186">The</st> `<st c="20191">to_today</st>` <st c="20199">variable
    on your computer will be different from the one in this book, due to the difference
    between the current date (at the time of writing) and when</st> <st c="20352">you
    execute</st> <st c="20364">the code.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20373">That’s it!</st> <st c="20385">We’ve now enriched our dataset with
    new features that were create</st><st c="20450">d by comparing two</st> `<st c="20470">datetime</st>`
    <st c="20478">variables.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20489">How it works...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="20505">In this recipe, we</st> <st c="20525">captured different representations</st>
    <st c="20559">of the time between two</st> `<st c="20584">datetime</st>` <st c="20592">variables.</st>
    <st c="20604">To proceed with this recipe, we created a sample DataFrame with
    two variables, each with 20 dates starting at an arbitrary date.</st> <st c="20733">The
    first variable increased in intervals of</st> `<st c="20778">1</st>` <st c="20779">hour,
    while the second variable increased in intervals of</st> `<st c="20838">1</st>`
    <st c="20839">month.</st> <st c="20847">We created the variables with</st> `<st
    c="20877">pandas</st>`<st c="20883">’</st> `<st c="20886">date_range()</st>`<st
    c="20898">, which we discussed in the previous two recipes in</st> <st c="20950">this
    chapter.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20963">To determine the difference between the variables – that is, to
    determine the time between them – we directly subtracted one</st> `<st c="21089">datetime</st>`
    <st c="21097">variable from the other – that is, one</st> `<st c="21137">pandas</st>`
    <st c="21143">Series from the other.</st> <st c="21167">The difference between
    the two</st> `<st c="21198">pandas</st>` <st c="21204">Series returned a new</st>
    `<st c="21227">pandas</st>` <st c="21233">Series.</st> <st c="21242">To capture
    the difference in days, we used</st> `<st c="21285">pandas</st>`<st c="21291">’</st>
    `<st c="21294">dt</st>`<st c="21296">, followed by</st> `<st c="21310">days</st>`<st
    c="21314">. To convert the time difference into months, we used</st> `<st c="21368">timedelta()</st>`
    <st c="21379">from NumPy, indicating that we wanted the difference in weeks by
    passing</st> `<st c="21453">W</st>` <st c="21454">in the second argument of the
    method.</st> <st c="21493">To capture the difference in seconds and minutes, we
    passed the</st> `<st c="21557">s</st>` <st c="21558">and</st> `<st c="21563">m</st>`
    <st c="21564">strings to</st> `<st c="21576">timedelta()</st>`<st c="21587">,
    respectively.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="21602">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="21607">The arguments for NumPy’s</st> `<st c="21634">timedelta</st>`
    <st c="21643">are a number,</st> `<st c="21658">– 1</st>`<st c="21661">, in our
    example, to represent the number of units, and a</st> `<st c="21719">datetime</st>`
    <st c="21727">unit, such as day (</st>`<st c="21747">D</st>`<st c="21749">), week
    (</st>`<st c="21758">W</st>`<st c="21760">), hours (</st>`<st c="21770">h</st>`<st
    c="21772">), minutes (</st>`<st c="21784">m</st>`<st c="21786">), or</st> <st
    c="21792">seconds (</st>`<st c="21801">s</st>`<st c="21803">).</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="21805">Finally, we</st> <st c="21818">captured the difference from</st>
    <st c="21846">one</st> `<st c="21851">date</st><st c="21855">time</st>` <st c="21860">variable
    to today’s date.</st> <st c="21887">We obtained the date and time of today (at
    the time of writing) by using</st> `<st c="21960">today()</st>` <st c="21967">from
    the built-in</st> `<st c="21986">datetime</st>` <st c="21994">Python library.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22010">There's more...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="22026">We can automate the creation of</st> <st c="22059">features that
    capture the time between variables by using the</st> `<st c="22121">feature-engine</st>`<st
    c="22135">‘s</st> <st c="22139">transformer</st> `<st c="22151">DatetimeSubstraction()</st>`<st
    c="22173">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22174">Let’s import</st> `<st c="22188">pandas</st>` <st c="22194">and</st>
    `<st c="22199">feature-engine</st>`<st c="22213">’s transformer:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="22309">Let’s re-create the sample dataset that we described in</st> *<st
    c="22366">Step 2</st>* <st c="22372">of the</st> *<st c="22380">How to do</st>*
    *<st c="22390">it…</st>* <st c="22393">section:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="22586">Let’s set up</st> `<st c="22600">DatetimeSubstraction()</st>`<st
    c="22622">to return the time difference between the second date and the first
    date expressed</st> <st c="22706">in days:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="22797">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22802">We can obtain the difference between more than two variables by
    passing variable lists in the</st> `<st c="22897">variables</st>` <st c="22906">and</st>
    `<st c="22911">reference</st>` <st c="22920">parameters.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22932">Let’s create</st> <st c="22945">and then display the</st> <st
    c="22967">new feature:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="23017">In the following output, we see the variable that captures the
    time difference between the two</st> `<st c="23113">datetime</st>` <st c="23121">variables</st>
    <st c="23132">in days:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.18 – A DataFrame with the new variable containing the difference
    between the two datetime variables](img/B22396_06_18.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="23386">Figure 6.18 – A DataFrame with the new variable containing the
    difference between the two datetime variables</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="23494">For more details, check</st> <st c="23519">out</st> [<st c="23523">https://feature-engine.trainindata.com/en/latest/api_doc/datetime/DatetimeSubtraction.html</st>](https://feature-engine.trainindata.com/en/latest/api_doc/datetime/DatetimeSubtraction.html)<st
    c="23613">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="23614">See also</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="23623">To learn more</st> <st c="23638">about NumPy’s</st> `<st c="23652">timedelta</st>`<st
    c="23661">,</st> <st c="23663">visit</st> [<st c="23669">https://numpy.org/devdocs/reference/arrays.datetime.html#datetime-and-timedelta-arithmetic</st>](https://numpy.org/devdocs/reference/arrays.datetime.html#datetime-and-timedelta-arithmetic)<st
    c="23759">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="23760">Working with time in different time zones</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="23802">Some</st> <st c="23807">organizations operate internationally;
    therefo</st><st c="23854">re, the information they collect about events may be
    recorded alongside the time zone of the area where the event took place.</st>
    <st c="23981">To be able to compare events that occurred across different time
    zones, we typically have to set all of the variables within the same zone.</st>
    <st c="24121">In this recipe, we will learn how to unify the time zones of a</st>
    `<st c="24184">datetime</st>` <st c="24192">variable and how to reassign a va</st><st
    c="24226">riable to a different time</st> <st c="24254">zone</st> <st c="24259">using</st>
    `<st c="24265">pandas</st>`<st c="24271">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24272">How to do it...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="24288">To proceed with this recipe, we’ll create a sample DataFrame containing
    two variables in different</st> <st c="24388">time zones:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24399">Let’s</st> <st c="24406">import</st> `<st c="24413">pandas</st>`<st
    c="24419">:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="24441">Let’s create a DataFrame containing one variable with values in
    different</st> <st c="24516">time zones:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="24770">Let’s add</st> <st c="24781">another</st> `<st c="24789">datetime</st>`
    <st c="24797">variable to the DataFrame, which also contains values in different</st>
    <st c="24865">time zones:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="25100">If we now execute</st> `<st c="25119">df</st>`<st c="25121">,
    we’ll see the DataFrame with the variables in the diffe</st><st c="25178">rent
    time zones like in the</st> <st c="25207">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 6.19 – A DataFrame with two datetime variables in different time zones](img/B22396_06_19.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="25549">Figure 6.19 – A DataFrame with two datetime variables in different
    time zones</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="25626">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="25631">The time zone is indicated with the</st> `<st c="25668">+02</st>`
    <st c="25671">and</st> `<st c="25676">-05</st>` <st c="25679">values, respectively,
    which indicates the time difference to</st> <st c="25740">the</st> **<st c="25745">Coordinated
    Universal</st>** **<st c="25767">Time</st>** <st c="25771">(</st>**<st c="25773">UTC</st>**<st
    c="25776">).</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="25779">To work</st> <st c="25788">with different time zones, we typically
    set the variables in the same time zone, in this case, we chose</st> <st c="25892">the
    UTC:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="26014">If we now execute</st> `<st c="26033">df</st>`<st c="26035">,
    we’ll see the new variables, which have</st> <st c="26076">a difference of</st>
    `<st c="26093">00</st>` <st c="26095">hours with respect</st> <st c="26115">to
    UTC:</st>
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 6.20 – A DataFrame\uFEFF containing the new variables in the UTC](img/B22396_06_20.jpg)"
  prefs: []
  type: TYPE_IMG
- en: <st c="26779">Figure 6.20 – A DataFrame</st> <st c="26804">containing the new
    variables in the UTC</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="26844">Let’s calculate the</st> <st c="26865">difference in days between
    the variables and then display the first five rows of</st> <st c="26946">the DataFrame:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="27053">We see the time difference between the variables in the</st> <st
    c="27110">following output:</st>
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: df['time1_london'] = df[
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ‹time1_utc›].dt.tz_convert('Europe/London')
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: df['time2_berlin'] = df[
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ‹time1_utc›].dt.tz_convert('Europe/Berlin')
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: df[['time1_london', 'time2_berlin']]
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '![Figure 6.21 – Variables reformatted into different time zones](img/B22396_06_21.jpg)'
  prefs: []
  type: TYPE_IMG
- en: <st c="27919">Figure 6.21 – Variables reformatted into different time zones</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="27980">When changing</st> <st c="27994">time zones, not only do the values
    of the zone change – that is, the</st> `<st c="28064">+01</st>` <st c="28067">and</st>
    `<st c="28072">+02</st>` <st c="28075">values in the previous ima</st><st c="28102">ge
    – but the value of the hour changes</st> <st c="28142">as well.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="28150">How it works...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="28166">In this recipe, we changed time z</st><st c="28200">ones and performed
    operations between variables in different time zones.</st> <st c="28274">To begin,
    we created a DataFrame with two variables, the values of which started at an arbitrary
    date and increased hourly; these were set in different time zones.</st> <st c="28438">To
    combine the different time zone variables in one DataFrame column, we concatenated
    the series returned by</st> `<st c="28547">pandas</st>`<st c="28553">’</st> `<st
    c="28556">date_range()</st>` <st c="28568">by utilizing</st> `<st c="28582">pandas</st>`<st
    c="28588">’</st> `<st c="28591">concat()</st>`<st c="28599">. We set the</st>
    `<st c="28612">axis</st>` <st c="28616">argument to</st> `<st c="28629">0</st>`
    <st c="28630">to indicate we wanted to concatenate the series vertically in one
    column.</st> <st c="28705">We covered the arguments of</st> `<st c="28733">pandas</st>`<st
    c="28739">’</st> `<st c="28742">date_range()</st>` <st c="28754">extensively in
    former recipes in this chapter; see the</st> *<st c="28810">Extracting features
    from dates with pandas</st>* <st c="28852">and</st> *<st c="28857">Extracting
    features from time with pandas</st>* <st c="28898">recipes for</st> <st c="28911">more
    details.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="28924">To reset the time zone of the variables to the central zone, we
    used</st> `<st c="28994">pandas</st>`<st c="29000">’</st> `<st c="29003">to_datetime()</st>`<st
    c="29016">, passing</st> `<st c="29026">utc=True</st>`<st c="29034">. Finally,
    we determined the time difference between the</st> <st c="29091">variables by
    subtracting one series from the other and capturing the difference in days.</st>
    <st c="29180">To reassign a different time zone, we used</st> `<st c="29223">pandas</st>`<st
    c="29229">’</st> `<st c="29232">tz_convert</st><st c="29242">()</st>`<st c="29245">,
    indicating the</st> <st c="29261">new time zone as</st> <st c="29279">an argument.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29291">See also</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="29300">To</st> <st c="29303">learn more about</st> `<st c="29321">pandas</st>`<st
    c="29327">’</st> `<st c="29330">to_datetime()</st>`<st c="29343">,</st> <st c="29345">visit</st>
    [<st c="29351">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html</st>](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.to_datetime.html)<st
    c="29433">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29434">To learn</st> <st c="29444">more about</st> `<st c="29455">pandas</st>`<st
    c="29461">’</st> `<st c="29464">tz_convert()</st>`<st c="29476">,</st> <st c="29478">visit</st>
    [<st c="29484">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.tz_convert.html</st>](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.tz_convert.html)<st
    c="29575">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29576">Automating the datetime fea</st><st c="29604">ture extraction
    with</st> <st c="29625">Feature-engine</st>
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '`<st c="29640">feature-engine</st>` <st c="29655">is a</st> <st c="29661">Python
    library for feature engineering and selection that is well suited to working with</st>
    `<st c="29750">pandas</st>` <st c="29756">DataFrames.</st> <st c="29769">The</st>
    `<st c="29773">DatetimeFeatures()</st>` <st c="29791">class can extract features
    from date and time automatically by using</st> `<st c="29861">pandas</st>`<st
    c="29867">’</st> `<st c="29870">dt</st>` <st c="29872">under the hood.</st> `<st
    c="29889">DatetimeFeatures()</st>` <st c="29907">allows you to</st> <st c="29922">extract
    the</st> <st c="29934">following</st> <st c="29943">features:</st>'
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29953">Month</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="29959">Quarter</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="29967">Semester</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="29976">Year</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="29981">Week</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="29986">Day of</st> <st c="29994">the week</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30002">Day of</st> <st c="30010">the month</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30019">Day of</st> <st c="30027">the year</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30035">Weekend</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30043">Month start</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30055">Month end</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30065">Quarter start</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30079">Quarter end</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30091">Year start</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30102">Year end</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30111">Leap year</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30121">Days in</st> <st c="30130">a month</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30137">Hour</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30142">Minute</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30149">Second</st>
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="30156">In this recipe, we will automatically create fea</st><st c="30205">tures
    from date and time by</st> <st c="30234">utilizing</st> `<st c="30244">feature-engine</st>`<st
    c="30258">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="30259">How to do it...</st>
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="30275">To</st> <st c="30279">showcase</st> `<st c="30288">feature-engine</st>`<st
    c="30302">’s functionality, we’ll</st> <st c="30327">create a sample DataFrame
    with a</st> `<st c="30360">datetime</st>` <st c="30368">variable:</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="30378">Let’s begin by importing</st> `<st c="30404">pandas</st>` <st
    c="30410">and</st> `<st c="30415">DatetimeFeatures()</st>`<st c="30433">:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="30508">Let’s create a</st> `<st c="30524">datetime</st>` <st c="30532">variable
    with 20 values, beginning from</st> `<st c="30573">2024-05-17</st>` <st c="30583">at
    midnight and followed by increments of</st> `<st c="30626">1</st>` <st c="30627">day.</st>
    <st c="30633">Then, we store this variable in</st> <st c="30665">a DataFrame:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="30771">We’ll</st> <st c="30777">start by setting</st> <st c="30795">up
    the transformer to extract all supported</st> `<st c="30839">datetime</st>` <st
    c="30847">features:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="30928">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="30933">DatetimeFeatures()</st>` <st c="30952">automatically finds the
    variables of the</st> `<st c="30994">datetime</st>` <st c="31002">type, or that
    could be parsed as</st> `<st c="31036">datetime</st>` <st c="31044">when the</st>
    `<st c="31054">variables</st>` <st c="31063">parameter is set to</st> `<st c="31084">None</st>`<st
    c="31088">. Alternatively, you can pass a list with the names of the variables
    from which you want to extract</st> `<st c="31188">date</st>` <st c="31192">and</st>
    `<st c="31197">time</st>` <st c="31201">features.</st>'
  prefs: []
  type: TYPE_NORMAL
- en: <st c="31211">Let’s add the</st> `<st c="31226">date</st>` <st c="31230">and</st>
    `<st c="31235">time</st>` <st c="31239">features to</st> <st c="31252">the data:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="31292">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="31297">By default,</st> `<st c="31310">DatetimeFeatures()</st>` <st c="31328">extracts
    the following features from each</st> `<st c="31371">datetime</st>` <st c="31379">variable:</st>
    `<st c="31390">month</st>`<st c="31395">,</st> `<st c="31397">year</st>`<st c="31401">,</st>
    `<st c="31403">day_of_week</st>`<st c="31414">,</st> `<st c="31416">day_of_month</st>`<st
    c="31428">,</st> `<st c="31430">hour</st>`<st c="31434">,</st> `<st c="31436">minute</st>`<st
    c="31442">, and</st> `<st c="31448">second</st>`<st c="31454">. We can modify
    this behavior through the</st> `<st c="31495">features_to_extra</st><st c="31513">ct</st>`
    <st c="31516">parameter as we did in</st> *<st c="31540">Step 3</st>*<st c="31546">.</st>
  prefs: []
  type: TYPE_NORMAL
- en: <st c="31547">Let’s</st> <st c="31554">capture the names</st> <st c="31571">of
    the new variables in</st> <st c="31596">a list:</st>
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: <st c="31651">Note</st>
  prefs: []
  type: TYPE_NORMAL
- en: '`<st c="31656">DatetimeFeatures()</st>` <st c="31675">names the new variables
    with the original variable name (in this case,</st> `<st c="31747">date</st>`<st
    c="31751">) followed by an underscore and then the type of feature created, for
    example,</st> `<st c="31831">date_day_of_week</st>` <st c="31847">contains the
    day of the week extracted from the</st> `<st c="31896">date</st>` <st c="31900">variable.</st>'
  prefs: []
  type: TYPE_NORMAL
- en: <st c="31910">If we execute</st> `<st c="31925">vars_</st>`<st c="31930">, we’ll
    see the names of the features that</st> <st c="31973">were created:</st>
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs: []
  type: TYPE_PRE
- en: df = pd.DataFrame()
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: df["time"] = pd.concat(
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '['
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: pd.Series(
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: pd.date_range(
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: start="2024-08-01 09:00",
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: freq="h",
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: periods=3,
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: tz="Europe/Berlin"
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: ),
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: pd.Series(
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: pd.date_range(
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: start="2024-08-01 09:00",
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: freq="h",
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: periods=3, tz="US/Central"
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: ),
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '],'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: axis=0,
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: dfts = DatetimeFeatures(
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: features_to_extract=
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '["day_of_week", "hour","minute"],'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: drop_original=False,
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: utc=True,
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: )
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: dft = dfts.fit_transform(df)
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
