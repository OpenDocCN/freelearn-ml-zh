- en: Chapter 10. Regression based learning
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章。基于回归的学习
- en: 'Regression analysis allows us to mathematically model the relationship between
    two variables using simple algebra. In this chapter, we will focus on covering
    another supervised learning technique: regression analysis or regression-based
    learning. In the previous chapter, we covered the basics of statistics that will
    be of use in this chapter. We will start with understanding how multiple variables
    can influence the outcome, and how statistical adjustment techniques can be used
    to arbitrate this influence, understand correlation and regression analysis using
    real world examples, and take a deep dive into concepts such as confounding and
    effect modification.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 回归分析使我们能够使用简单的代数数学模型来描述两个变量之间的关系。在本章中，我们将专注于介绍另一种监督学习技术：回归分析或基于回归的学习。在前一章中，我们介绍了本章将用到的统计学基础。我们将从理解多个变量如何影响结果开始，以及如何使用统计调整技术来权衡这种影响，通过实际案例了解相关性和回归分析，并深入探讨如混杂和效应修饰等概念。
- en: You will learn the basic and advanced concepts of this technique and get hands-on
    implementation guidance in simple, multiple linear regression, polynomial regression
    and logistic regression using Apache Mahout, R, Julia, Apache Spark, and Python.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 您将学习该技术的初级和高级概念，并获得使用Apache Mahout、R、Julia、Apache Spark和Python进行简单、多元线性回归、多项式回归和逻辑回归的实践指导。
- en: At the end of this chapter, readers will have understood the uses and limitations
    of regression models, learned how to fit linear and logistic regression models
    to data, statistically inferencing the results and finally, assessing and diagnosing
    the performance of the models.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结束时，读者将理解回归模型的使用和局限性，学习如何将线性回归和逻辑回归模型拟合到数据中，进行统计推断，并最终评估和诊断模型的性能。
- en: 'The following diagram depicts different learning models covered in this book,
    and the techniques highlighted in orange will be dealt in detail in this chapter:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表展示了本书涵盖的不同学习模型，本章将详细讨论橙色高亮的技术：
- en: '![Regression based learning](img/B03980_10_01.jpg)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![基于回归的学习](img/B03980_10_01.jpg)'
- en: 'The topics listed here are covered in depth in this chapter:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将深入探讨以下主题：
- en: Introduction to correlation and regression analysis; revision of additional
    statistical concepts such as covariance and correlation coefficients. We will
    cover the properties of expectation, variance, and covariance in the context of
    regression models and ANOVA model and diagnostics
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍相关性和回归分析；复习额外的统计概念，如协方差和相关系数。我们将涵盖回归模型和方差分析模型中期望、方差和协方差的性质。
- en: 'You will learn simple, linear and multiple linear regressions: linear relationships,
    linear models, basic assumptions (normality, homoscedasticity, linearity, and
    independence), and least squares estimation. Overall, you will learn model diagnostics
    and selection.'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您将学习简单线性回归、多元线性回归：线性关系、线性模型、基本假设（正态性、同方差性、线性性和独立性）以及最小二乘估计。总体而言，您将学习模型诊断和选择。
- en: You will be presented with an overview of generalized linear models (GLMs) and
    a listing of the regression algorithms under GLM. Also, the phenomena of confounding
    and effect modification will be presented, and hence realization and adjustments
    for the same.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您将了解广义线性模型（GLMs）的概述以及GLM下的回归算法列表。此外，还将介绍混杂和效应修饰的现象，以及相应的实现和调整。
- en: An introduction to logistic regression, understanding odds and risk ratios,
    model building logistic regression models, and assessing the same will be covered.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逻辑回归简介，理解赔率和风险比，构建逻辑回归模型，以及评估模型的内容将得到涵盖。
- en: Sample implementation using Apache Mahout, R, Apache Spark, Julia, and Python
    (scikit-learn) libraries and modules will also be covered.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将涵盖使用Apache Mahout、R、Apache Spark、Julia和Python（scikit-learn）库和模块的示例实现。
- en: Regression analysis
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回归分析
- en: Under supervised learning techniques, the learning models that are categorized
    under statistical methods are instance-based learning methods, Bayesian learning
    methods, and regression analysis. In this chapter, we will focus on regression
    analysis and other related regression models. Regression analysis is known to
    be one of the most important statistical techniques. As mentioned, it is a statistical
    methodology that is used to measure the relationship and check the validity and
    strength of the relationship between two or more variables.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在监督学习技术中，归类于统计方法的模型包括基于实例的学习方法、贝叶斯学习方法和回归分析。在本章中，我们将重点关注回归分析和相关的回归模型。回归分析被认为是最重要的统计技术之一。正如所提到的，它是一种统计方法，用于衡量两个或更多变量之间的关系，并检查关系的有效性和强度。
- en: Traditionally, researchers, analysts, and traders have been using regression
    analysis to build trading strategies to understand the risk contained in a portfolio.
    Regression methods are used to address both classification and prediction problems.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，研究人员、分析师和交易员一直使用回归分析来构建交易策略，以了解投资组合中包含的风险。回归方法用于解决分类和预测问题。
- en: We have covered some key statistical concepts in the earlier chapter; in this
    chapter, we will cover some more concepts that are quite relevant in the context
    of regression analysis. To name a few concepts, we have the measurement of variability,
    linearity, covariance, coefficients, standard errors, and more.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在前面章节中介绍了一些关键的统计概念；在本章中，我们将介绍一些与回归分析相关的更多概念。举几个例子，我们有变异性的度量、线性、协方差、系数、标准误差等。
- en: '![Regression analysis](img/B03980_10_02.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![回归分析](img/B03980_10_02.jpg)'
- en: Revisiting statistics
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 回顾统计学
- en: In the earlier chapter, where we learned the Bayesian learning methods, we covered
    some core statistical measures such as mean, median, mode, and standard deviation.
    Let's now extend this to some more measures such as variance, covariance, correlation,
    and the first and second moments of the distribution of a random variable.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们学习了贝叶斯学习方法，我们覆盖了一些核心的统计量，例如均值、中位数、众数和标准差。现在让我们扩展到更多的度量，例如方差、协方差、相关性和随机变量分布的第一和第二矩。
- en: '![Revisiting statistics](img/B03980_10_03.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![回顾统计学](img/B03980_10_03.jpg)'
- en: '**Variance** is the square of standard deviation. If you recollect what standard
    deviation is, it is an average measure of how much each measurement in the sample
    deviates from the mean. It is also called the standard deviation of the mean.
    We can theoretically compute standard deviations for mode and median.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**方差**是标准差的平方。如果你还记得标准差是什么，它是一个平均度量，表示样本中每个测量值与均值偏离的程度。它也被称为均值的方差。我们可以从理论上计算众数和中位数的标准差。'
- en: '**The range** is defined as a span of values over which the dataset is spread.
    Range usually is represented as minimum and maximum values.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '**范围**定义为数据集分布的值域。范围通常表示为最小值和最大值。'
- en: Quartiles, deciles, and percentiles subdivide a distribution of measurements
    that are similar to the median. The median is known to divide the distribution
    into half while quartile, decile, and percentile divide the distribution into
    1/25, 1/10 and 1/100 respectively.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 四分位数、十分位数和百分位数将测量值分布细分，类似于中位数。众所周知，中位数将分布分为一半，而四分位数、十分位数和百分位数分别将分布分为 1/25、1/10
    和 1/100。
- en: '**First quartile** (designated Q1) OR lower quartile is the 25th percentile.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**第一四分位数**（标记为 Q1）或下四分位数是第 25 个百分位数。'
- en: '**Third quartile** (designated Q3) OR upper quartile is the 75th percentile.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**第三四分位数**（标记为 Q3）或上四分位数是第 75 个百分位数。'
- en: interquartile range = third quartile – first quartile
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 四分位距 = 第三四分位数 - 第一四分位数
- en: '**Symmetric** and **skewed data**: Median, mean and mode for symmetric, positively,
    and negatively skewed data is represented here:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**对称**和**偏斜数据**：对称、正偏斜和负偏斜数据的均值、中位数和众数如下所示：'
- en: '![Revisiting statistics](img/B03980_10_04.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![回顾统计学](img/B03980_10_04.jpg)'
- en: Note
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Symmetric distribution has equal mean and median values. For a positively skewed
    distribution, the median is greater than the mean and for a negatively skewed
    distribution, the mean value is greater than the median's value.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 对称分布具有相等的均值和中位数值。对于正偏斜分布，中位数大于均值，而对于负偏斜分布，均值值大于中位数值。
- en: The outlier is an observation that is separated from the main cluster of the
    data. It can impact measures such as mean in a very significant way. Let's take
    an example to understand this better. We want to understand the average wealth
    of a group of five people. Say, the individual assets are valued at USD 1M, USD
    1.2M, USD 0.9M, USD 1.1M, and USD 12M.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值是远离数据主要集群的观察值。它可能会以非常显著的方式影响如均值等度量。让我们通过一个例子来更好地理解这一点。我们想要了解五个人群的平均财富。比如说，个人资产估值分别为
    100 万美元、120 万美元、90 万美元、110 万美元和 1200 万美元。
- en: 1+1.2+0.9+1.1+12=16.2
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 1+1.2+0.9+1.1+12=16.2
- en: 16.2/5=3.24
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 16.2/5=3.24
- en: 'The last observation had an unrealistic impact on the measurement. Let''s now
    see how the median is impacted. Let''s sort the assets in ascending order: 0.9M,
    1.0M, 1.1M, 1.2M, and 12M. The median is 1.1M. There are two important concepts
    we must understand. Outliers influence mean more significantly than the median.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个观察值对测量产生了不切实际的影响。现在让我们看看中位数是如何受到影响的。让我们按升序排列资产：900 万美元、1000 万美元、1100 万美元、1200
    万美元和 1200 万美元。中位数是 1100 万美元。有两个重要概念我们必须理解。异常值对均值的影响比中位数大。
- en: So, you should check the data carefully before choosing the correct statistical
    quantity.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在选择正确的统计量之前，你应该仔细检查数据。
- en: Mean represents the average value of the variable and median represents the
    value of the average variable.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 均值代表变量的平均值，中位数代表平均变量的值。
- en: '**Covariance** is when there are two or more variables of interest (such as
    stocks of companies, physical properties of materials, etc.); it becomes important
    to understand whether there is any relation between them. Precisely, what we want
    to understand is if one of them is varying how does the other variable vary.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**协方差**是指有两个或更多感兴趣变量（如公司股票、材料的物理性质等）的情况；了解它们之间是否存在任何关系变得很重要。精确地说，我们想要了解的是，如果一个变量在变化，另一个变量会如何变化。'
- en: 'In statistics, two terms explain this behavior:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在统计学中，有两个术语解释了这种行为：
- en: 'The first one is known as covariance. For a data set comprising *n* points
    of two variables *x* and *y*, the following equation depicts the computation of
    covariance:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个被称为协方差。对于一个包含两个变量 *x* 和 *y* 的 *n* 个数据点的数据集，以下方程描述了协方差的计算：
- en: '![Revisiting statistics](img/B03980_10_05.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![重访统计学](img/B03980_10_05.jpg)'
- en: However, covariance can be a very large number. It is best to express it as
    a normalized number between -1 and 1 to understand the relation between the quantities.
    This is achieved by normalizing covariance with standard deviations of both the
    variables (*sx* and *sy*).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，协方差可能是一个非常大的数字。最好将其表示为介于 -1 和 1 之间的归一化数字，以了解这些量之间的关系。这是通过将协方差与两个变量的标准差（*sx*
    和 *sy*）进行归一化来实现的。
- en: This is called **correlation coefficient** between *x* and *y*.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这被称为 *x* 和 *y* 之间的**相关系数**。
- en: '![Revisiting statistics](img/B03980_10_06.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![重访统计学](img/B03980_10_06.jpg)'
- en: '**Correlation** measures the strength of linear dependence between *X* and
    *Y* and lies between -1 and 1\. The following graph gives you a visual understanding
    of how the correlation impacts the linear dependence:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关系数**衡量 *X* 和 *Y* 之间线性依赖的强度，介于 -1 和 1 之间。以下图表展示了相关系数如何影响线性依赖的视觉理解：'
- en: '![Revisiting statistics](img/B03980_10_07.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![重访统计学](img/B03980_10_07.jpg)'
- en: Before we get into the specifics of various regression models, let's first look
    at the steps for implementing a regression model and analyzing the results.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们深入研究各种回归模型的具体细节之前，让我们首先看看实现回归模型和分析结果的基本步骤。
- en: 'The mean and variances are the *first and second moments* of the probability
    distribution functions of random variables. They are computed as follows:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 均值和方差是随机变量概率分布函数的**第一和第二矩**。它们如下计算：
- en: '![Revisiting statistics](img/B03980_10_08.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![重访统计学](img/B03980_10_08.jpg)'
- en: After computing the probability distribution for a given random variable, we
    will compute the mean variance through simple integration.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算给定随机变量的概率分布之后，我们将通过简单的积分计算均值方差。
- en: Let's compute all these measures using a real-world example.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用一个现实世界的例子来计算所有这些度量。
- en: 'Following is the data of the stock prices of three companies (company A, company
    B, and company C) during a period of 14 days. First, compute the returns using
    the next formula:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在 14 天期间三个公司（公司 A、公司 B 和公司 C）的股价数据。首先，使用以下公式计算回报率：
- en: Returns = (current day's price-yesterday's price)/yesterday's price
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 回报率 = (当天价格-前一天价格)/前一天价格
- en: From this return, compute mean, median, and pairwise correlation. Do not use
    the built-in libraries. Use the base formulae even if you use Excel.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个回报中，计算平均值、中位数和成对相关系数。不要使用内置库。即使使用Excel，也要使用基本公式。
- en: '![Revisiting statistics](img/B03980_10_09.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![重新审视统计学](img/B03980_10_09.jpg)'
- en: First, let's compute the returns using the formula given previously.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们使用之前给出的公式计算回报。
- en: '![Revisiting statistics](img/B03980_10_10.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![重新审视统计学](img/B03980_10_10.jpg)'
- en: 'If we had to compute the mean, the values would be as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们必须计算平均值，数值如下：
- en: '![Revisiting statistics](img/B03980_10_11.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![重新审视统计学](img/B03980_10_11.jpg)'
- en: To find the median, we will first sort the return values in ascending order
    and then mark the mid value.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 要找到中位数，我们首先将回报值按升序排序，然后标记中间值。
- en: '![Revisiting statistics](img/B03980_10_12.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![重新审视统计学](img/B03980_10_12.jpg)'
- en: Finally, let's compute the covariance and then correlations using the formulae
    given in the previous covariance section.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们使用之前协方差部分给出的公式计算协方差和相关性。
- en: '![Revisiting statistics](img/B03980_10_13.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![重新审视统计学](img/B03980_10_13.jpg)'
- en: Properties of expectation, variance, and covariance
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 期望、方差和协方差的性质
- en: Let's combine the understanding of the previous and current chapters and conclude
    them.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们结合前几章和本章的理解，得出结论。
- en: This distribution of a variable is the probability of taking a particular value.
    The expectation is the population mean (which is the probability of the weighted
    average).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 一个变量的这种分布是取特定值的概率。期望是总体均值（这是加权平均的概率）。
- en: We can define a variance and standard deviation of the mean.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以定义均值的方差和标准差。
- en: 'Finally, if we are looking at two different variables, we can define covariance
    and correlations. Now, let''s understand how the expectations and variance of
    two groups can be computed. This becomes particularly useful in the next sections
    where we will analyze two variables together for linear regression is given here:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，如果我们观察两个不同的变量，我们可以定义协方差和相关性。现在，让我们了解如何计算两组的期望和方差。这在下一节中特别有用，我们将一起分析两个变量进行线性回归，如下所示：
- en: '*E(x+y) = E(x) + E(y)*'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(x+y) = E(x) + E(y)*'
- en: '*E(x+a) = E(x) + E(a) = a + E(x)*'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(x+a) = E(x) + E(a) = a + E(x)*'
- en: '*E(kx) = kE(x)*'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(kx) = kE(x)*'
- en: 'Here is a very interesting rule:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个非常有趣的规则：
- en: '![Properties of expectation, variance, and covariance](img/B03980_10_49.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![期望、方差和协方差的性质](img/B03980_10_49.jpg)'
- en: 'Essentially, this rule says that if we have a portfolio of properties in a
    given fraction, then the total expectation is the weighted sum of the individual
    expectations. This is a crucial concept in the portfolio of analytics. If there
    is a portfolio of 30% company A, 50%, company B, and 20% company C stocks, the
    expected return of our portfolio is:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这个规则表示，如果我们有一个给定比例的财产组合，那么总期望值是单个期望值的加权总和。这是分析组合中的一个关键概念。如果有一个30%的公司A、50%的公司B和20%的公司C股票的组合，我们组合的预期回报是：
- en: E (Portfolio) = 0.3 E(Company A) + 0.5 E(Company A) + 0.2 E (Company A)
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: E (组合) = 0.3 E(公司A) + 0.5 E(公司B) + 0.2 E (公司C)
- en: Properties of variance
  id: totrans-74
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 方差的性质
- en: 'Given *X*, a random variable:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 给定*X*，一个随机变量：
- en: '*Var(X+Y) = Var(X)+Var(Y)+2Cov(X,Y)*'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '*Var(X+Y) = Var(X)+Var(Y)+2Cov(X,Y)*'
- en: '*V(x+a) = V(x)* (the variance does not change when a constant is added)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '*V(x+a) = V(x)*（方差在加上常数时不会改变）'
- en: '*V(ax) = a2 V(x)*'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '*V(ax) = a² V(x)*'
- en: 'Let''s prove this as it is not obvious:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们证明这一点，因为它并不明显：
- en: Say, *Y= aX*
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，*Y= aX*
- en: '*E(Y) = an E(X)* (from the previous set of relations)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(Y) = an E(X)*（从之前的关系中得出）'
- en: '*Y-E(Y) = a(X-E(X))*'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y-E(Y) = a(X-E(X))* '
- en: 'Squaring both sides and taking expectations:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 对两边平方并取期望：
- en: '*E(Y-E(Y))² = a² E(X-E(x))²*'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(Y-E(Y))² = a² E(X-E(x))²*'
- en: 'However, the left-hand side is the variance of *Y,* and the right-hand side
    is the variance of *X*:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，左边是*Y*的方差，右边是*X*的方差：
- en: '*Var (Y) = a²Var(X)*'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '*Var (Y) = a²Var(X)*'
- en: Another couple of interesting properties of variance can be derived from the
    above. It follows directly that
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 可以从上述内容推导出方差的一些有趣性质。直接得出以下结论：
- en: '*Var (-y) = Var (y)*'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*Var (-y) = Var (y)*'
- en: 'Let''s now look at the variance of the portfolio:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在看看投资组合的方差：
- en: '![Properties of variance](img/B03980_10_50.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![方差的性质](img/B03980_10_50.jpg)'
- en: 'So, if you have a portfolio of three stocks, the variance of your portfolio
    (or the standard deviation that is its square root) varies as shown previously.
    The standard deviation is often called the risk of the portfolio. Ideally, it
    needs to be as low as possible. From the previous formula, this can be done in
    two ways:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果你有一个包含三只股票的投资组合，你的投资组合的方差（或其平方根，即标准差）会像之前展示的那样变化。标准差通常被称为投资组合的风险。理想情况下，它需要尽可能低。从前一个公式中，可以通过两种方式实现：
- en: By selecting the elements whose variance is very low
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择方差非常低的元素
- en: By selecting the elements whose covariance is very negative
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择相关性非常负的元素
- en: This is a crucial approach to a successful investment.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这是成功投资的关键方法。
- en: Properties of covariance
  id: totrans-95
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 协方差性质
- en: 'Following are the properties of covariance:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是对协方差的性质：
- en: '*cov(X, Y) = E[XY] − E[X]E[Y]*'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(X, Y) = E[XY] − E[X]E[Y]*'
- en: '*cov(x, a) = 0*'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(x, a) = 0*'
- en: '*cov(x, x) = var(x)*'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(x, x) = var(x)*'
- en: '*cov(y, x) = cov(x, y)*'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(y, x) = cov(x, y)*'
- en: '*cov(ax, by) =abcov(x, y)*'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(ax, by) =abcov(x, y)*'
- en: '*cov(X+a, Y+b) = cov (X, Y)*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(X+a, Y+b) = cov (X, Y)*'
- en: '*cov(aX+bY, cW+dV) = accov(X,W) + adcov(X,V) + bccov(Y,W) + bdcov(Y,V)*'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '*cov(aX+bY, cW+dV) = accov(X,W) + adcov(X,V) + bccov(Y,W) + bdcov(Y,V)*'
- en: '*Cor(X,Y) = E[XY]/σXσY*'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '*Cor(X,Y) = E[XY]/σXσY*'
- en: Let's now see this using a real-world example.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们用一个现实世界的例子来展示这一点。
- en: Example
  id: totrans-106
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 示例
- en: 'Two of your best friends, Ana and Daniel, are planning to invest in stock markets.
    As you are the most experienced investor in your friends circle, they approached
    you for advice. You know Daniel can handle a 10% risk whereas Ana wants the least
    possible risk. You obviously want to maximize the returns for both. They both
    want to invest in three items: gold bonds, a top IT company, and a top bank.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 你的两位最好的朋友，安娜和丹尼尔，正在计划投资股票市场。作为你朋友圈中最有经验的投资者，他们向你寻求建议。你知道丹尼尔可以承受10%的风险，而安娜希望风险尽可能低。显然，你希望最大化他们的回报。他们都希望投资于三项：黄金债券、顶级IT公司和顶级银行。
- en: '![Example](img/B03980_10_14.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/B03980_10_14.jpg)'
- en: SD—Standard Deviation
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: SD—标准差
- en: 'Correlations can be computed as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数可以按照以下方式计算：
- en: '![Example](img/B03980_10_15.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/B03980_10_15.jpg)'
- en: Now, let's derive the advice systematically.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们系统地推导出建议。
- en: 'Let''s first create a list of all the possible weights (assuming you need to
    compute up to a single decimal point) for three assets. There can be approximately
    66 values possible. This means that our friends must pick from one of these choices
    to invest. Now, calculate the returns for each possible portfolio (a unique combination
    of weights) using the following formula (again use any language you like):'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先创建一个所有可能权重的列表（假设你需要计算到小数点后一位），对于三种资产。大约有66个可能的值。这意味着我们的朋友必须从这些选择中挑选一个进行投资。现在，使用以下公式（再次使用你喜欢的任何语言）计算每个可能的投资组合（权重独特组合）的回报：
- en: '*Return from portfolio = W*[g] *X R*[g] *+ W*[i] *X R*[i] *+ w*[b] *X R*[b]*W*[g]'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '*投资组合回报 = W*[g] *X R*[g] *+ W*[i] *X R*[i] *+ w*[b] *X R*[b]*W*[g]'
- en: '*W*[i]*, W*[b] *= weights* and'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '*W*[i]*, W*[b] *= 权重* 和'
- en: '*R*[i]*, R*[g]*, R*[b] *= returns*'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '*R*[i]*, R*[g]*, R*[b] *= 回报*'
- en: This is because the expectation of a portfolio is the summation of the expectations
    of individual portfolio multiplied by individual weights.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为投资组合的期望是单个投资组合期望的总和，乘以各自的权重。
- en: 'The values for the first five portfolios are:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 前五个投资组合的值如下：
- en: '![Example](img/B03980_10_16.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/B03980_10_16.jpg)'
- en: Compute all the other values.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 计算所有其他值。
- en: 'Calculate the risk of each portfolio using the following formula:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下公式计算每个投资组合的风险：
- en: Return = Sqrt ((wg*sdg)² + (Wi*sdi)² + (Wb*sdb)2 + (2*Wg*sdg*Wi*sdi*rgi)+ (2*Wi*sdi*Wb*sdb*rib)
    + (2*Wb*sdb*wg*sdg*rbg))
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 回报 = Sqrt ((wg*sdg)² + (Wi*sdi)² + (Wb*sdb)² + (2*Wg*sdg*Wi*sdi*rgi)+ (2*Wi*sdi*Wb*sdb*rib)
    + (2*Wb*sdb*wg*sdg*rbg))
- en: '*sdg, sdb, sdi = Risks and rij = correlations of i and j*'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*sdg, sdb, sdi = 风险和 rij = i 和 j 的相关性*'
- en: This is exactly the same formula for the variance of a portfolio as given in
    one of the previous sections.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是与之前章节中给出的投资组合方差的公式完全相同的公式。
- en: '![Example](img/B03980_10_17.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![示例](img/B03980_10_17.jpg)'
- en: Now lets compute all the other values.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们计算所有其他值。
- en: Now, all that is needed is to recommend the balanced portfolios for both Ana
    and Daniel as their risk appetites are known to you. As Ana prefers zero risk,
    we will pick the point that corresponds to 17.2% returns and 0.87 risks. You can
    look up in the table and confirm that this is obtained with the portfolio of 0.7,
    0.2, and 0.1 (Gold, IT, and Bank). As Daniel can take 10% risk, we will see the
    portfolio that corresponds to 10% risk, which has the highest return.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，所需做的就是为Ana和Daniel推荐平衡的投资组合，因为他们的风险偏好您是知道的。由于Ana偏好零风险，我们将选择对应于17.2%回报和0.87风险的点。您可以在表中查找并确认这是通过0.7、0.2和0.1（黄金、IT和银行）的投资组合获得的。由于Daniel可以承担10%的风险，我们将看到对应于10%风险的投资组合，该组合回报最高。
- en: Again, this can be read as 0.2, 0.7, and 0.1.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，这可以读作0.2、0.7和0.1。
- en: ANOVA and F Statistics
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ANOVA和F统计量
- en: In cases like bivariate and multivariate distributions, a good quantity to understand
    is the way the variance is distributed within the populations or groups and between
    the populations or groups. This is the process of grouping data into multiple
    subsets. As you can clearly see, in such situations it really helps to know how
    variance is distributed among them. Such an analysis is called the **ANOVA** (**Analysis
    of Variance**). The calculations involved are fairly straightforward.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在双变量和多变量分布的情况下，一个很好的理解量是方差在总体或组内以及组间是如何分布的。这是将数据分组到多个子集的过程。正如您所清楚看到的，在这种情况下，了解方差如何在它们之间分布是非常有帮助的。这种分析称为**方差分析（ANOVA）**。涉及的计算相当直接。
- en: 'Let''s take three samples that have their own mean and distribution as depicted
    here:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们取三个样本，它们有自己的均值和分布，如图所示：
- en: '![ANOVA and F Statistics](img/B03980_10_18.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![ANOVA和F统计量](img/B03980_10_18.jpg)'
- en: 'And in terms of an example, see the following:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 以一个例子来说明，请看以下内容：
- en: '*Sample 1= {3, 2, 1}*'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本1= {3, 2, 1}*'
- en: '*Sample 2= {5, 3, 4}*'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本2= {5, 3, 4}*'
- en: '*Sample 3= {5, 6, 7}*'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本3= {5, 6, 7}*'
- en: '*Mean for Sample 1 = 2*'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本1的均值 = 2*'
- en: '*Mean for Sample 2 = 4*'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本2的均值 = 4*'
- en: '*Mean for Sample 3 = 6*'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '*样本3的均值 = 6*'
- en: '*Overall grand mean = (3+2+1+5+3+4+5+6+7) / 9 = 4*'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '*总体大均值 = (3+2+1+5+3+4+5+6+7) / 9 = 4*'
- en: The grand mean (which will be the population mean if the groups cover the entire
    population) is equal to the mean of means.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 总均值（如果组覆盖整个总体，将是总体均值）等于均值均值。
- en: Is it possible that the three means come from the same population? If one mean
    value is very different or far from the others, would that mean they are not from
    the same population? Or are they equally far apart?
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 三组均值是否来自同一总体？如果其中一个均值值与其它非常不同或远离其它，这意味着它们不是来自同一总体吗？或者，它们是否距离相等？
- en: All the previous samples are about relative distance measures from the grand
    mean.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 所有的前述样本都是关于相对于总体均值的相对距离度量。
- en: '![ANOVA and F Statistics](img/B03980_10_19.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![ANOVA和F统计量](img/B03980_10_19.jpg)'
- en: 'Let''s now compute the sum of the squares of the entire sample set:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们计算整个样本集的平方和：
- en: '*(3 − 4)² + (2 − 4)² + … = 30*'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '*(3 − 4)² + (2 − 4)² + … = 30*'
- en: 'We could have calculated the variance by dividing the previously mentioned
    quantity with the degrees of freedom *(n*m-1)*:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过将之前提到的量除以自由度 *(n*m-1)* 来计算方差：
- en: '*n*—number of elements in each sample'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '*n*—每个样本中的元素数量'
- en: '*m*—number of samples'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '*m*—样本数量'
- en: 'The property that we are trying to establish does not change. Hence, let''s
    just stick with the sum of squares instead of the variance. Now, let''s compute
    two quantities: the sum of squares of the group and between the groups.'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们试图建立的性质不会改变。因此，我们只需坚持使用平方和而不是方差。现在，让我们计算两个量：组的平方和以及组间的平方和。
- en: '**The sum of squares of the group**: Let''s take the first group (3, 2, and
    1) where the mean is 2\. The variation (we are not calling it variance. But, it
    is definitely a measure of variance) within the group is equal to *(3-2)2+…=2*.
    Similarly, variation within group 2 and group 3 are equal to *2* and *2*. So,
    the total variation contributed within the groups is 6\. The total number of the
    degrees of freedom within each group is *n-1*. The total degrees of freedom is
    *(n-1)*m*. This is 6 in this case.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组的平方和**：让我们以第一个组（3, 2, 和 1）为例，其中均值为2。组内的变异（我们称之为方差。但，它肯定是一个方差的度量）等于 *(3-2)²+…=2*。同样，组2和组3内的变异也等于
    *2* 和 *2*。因此，组内贡献的总变异是6。每个组内的自由度总数是 *n-1*。总的自由度是 *(n-1)*m*。在这种情况下是6。'
- en: '**The sum of squares between the groups**: This is measured as the distances
    between the mean of the group, and the grand mean, which is multiplied by the
    number of elements in the group mean of group 1 is 2, and grand mean is 4\. So,
    the variation of this group from the grand mean is *(2-4)2 * 3 = 12*. The variation
    for the second group is 0 and for the third is 12\. So, the variation between
    the groups is 24\. The degree of freedom, in this case, is *m-1 = 2*.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组间平方和**：这是通过组均值与总体均值之间的距离来衡量的，这个距离乘以组内元素的数量。组1的组内均值为2，总体均值为4。因此，该组与总体均值之间的变异性为*(2-4)²
    * 3 = 12*。第二组的变异性为0，第三组为12。因此，组间变异性为24。在这种情况下，自由度为*m-1 = 2*。'
- en: 'So, let''s document this:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，让我们记录下来：
- en: '![ANOVA and F Statistics](img/B03980_10_20.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![方差分析和F统计量](img/B03980_10_20.jpg)'
- en: So, we see that of the total variation of 30, 6 is contributed by variation
    within and 24 is contributed by variation between the groups. So most likely,
    it makes sense to group them separately. Now, let's do some kind of inferential
    statistics here. Let's assume that the previous values are the ranks obtained
    by three coaching centers. We want to know whether putting people in a coaching
    center actually has an impact on their final rank.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们看到在总变差30中，6是由组内变差贡献的，而24是由组间变差贡献的。所以，很可能将它们分开是有意义的。现在，让我们在这里做一些推断统计。假设这些值是三个辅导中心获得的排名。我们想知道将人们放入辅导中心是否真的会影响他们的最终排名。
- en: Let's start with a hypothetical argument.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从假设论证开始。
- en: '**Null Hypothesis** is that coaching centers do not have an impact on the rank.
    Alternative coaching centers do have an impact on the rank.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '**零假设**是辅导中心对排名没有影响。备择假设是辅导中心对排名有影响。'
- en: '![ANOVA and F Statistics](img/B03980_10_21.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![方差分析和F统计量](img/B03980_10_21.jpg)'
- en: If we observe, this measure is not about the values being equal, but it would
    be a check if the samples come from the same larger population. This measure is
    called the variability among or between the sample means.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们观察，这个指标并不是关于值是否相等，而是检查样本是否来自同一更大的总体。这个指标被称为样本均值之间的变异性。
- en: 'So in short, ANOVA is a variability ratio represented as follows:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，方差分析（ANOVA）是一个变异性比率，表示如下：
- en: ANOVA = Variance Between / Variance Within = Distance between the overall mean
    / internal spread
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: ANOVA = 组间变差 / 组内变差 = 总均值之间的距离 / 内部扩散
- en: Total Variance = Variance Between + Variance Within
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 总变差 = 组间变差 + 组内变差
- en: 'This process of separating total variance into two components is called partitioning:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 将总变差分为两个组成部分的过程称为分解：
- en: If the variance between the means is > variance within the means, it will mean
    that the variability ratio is > 1\. Hence, we can conclude that the samples do
    not belong to the same population.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果均值之间的变差大于均值内的变差，这意味着变异性比率大于1。因此，我们可以得出结论，样本不属于同一总体。
- en: If the variance between the means and within the means is similar, then the
    ratio almost becomes 1, and this would indicate an overlap.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果均值之间的变差和均值内的变差相似，那么比率几乎变为1，这表明有重叠。
- en: If the variance between the means < the variance with the means, it will mean
    that the samples are close to the overall mean or the distributions *melt* together.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果均值之间的变差小于均值内的变差，这意味着样本接近总体均值或分布*melt*在一起。
- en: So, as we can see while dealing with multiple variables that there can be many
    factors that influence the outcome. Each of these variables will need to be assessed
    for the independent effect on the relationship between variables. In the next
    section, two concepts, **confounding** and **effect modification**, will explain
    the different types of influence factors on the outcome.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，当我们处理多个变量时，可能会有许多因素影响结果。每个变量都需要评估其对变量之间关系的独立影响。在下一节中，将解释**混杂**和**效应修饰**这两个概念，说明不同类型的影响因素对结果的影响。
- en: Confounding
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 混杂
- en: We will start understanding what confounding is using an example. Let's assume
    we are doing a study where we want to determine if the risk of developing heart
    disease has anything to do with smoking. When a study was done on sample data
    that had a mix of smokers and non-smokers and those who were detected to have
    a heart disease over a period of time, a measure of association such as a *risk
    ratio* was done, and it was found to be 2.0\. This can be interpreted as the risk
    of a smoker developing a heart disease being twice as much as that of a non-smoker.
    Now, when we look closely at the data, let's assume that we find the age distribution
    among the smokers and non-smokers is not the same, and it turns out that the age
    of smokers in the sample is much higher than the age of non-smokers. If we had
    to correlate this piece of information, is the outcome of developing heart disease
    to do with the old age, smoking or both?
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将通过一个例子开始理解什么是混淆。假设我们正在进行一项研究，我们想确定发展心脏病的风险是否与吸烟有关。当对混合吸烟者和非吸烟者以及那些在一段时间内被检测出患有心脏病的人的样本数据进行研究时，进行了一个关联性测量的指标，如*风险比*，结果为2.0。这可以解释为吸烟者发展心脏病的风险是非吸烟者的两倍。现在，当我们仔细观察数据时，假设我们发现吸烟者和非吸烟者的年龄分布不同，并且样本中吸烟者的年龄远高于非吸烟者的年龄。如果我们必须将这条信息联系起来，发展心脏病的结局与老年、吸烟还是两者都有关？
- en: An ideal way of measuring the quantitative effect of smoking on developing heart
    disease is to take a sample of people, observe them smoke over a period of time,
    collect the data on heart disease development, use the same set of people, and
    go back in time to run the same assessment when they are not smoking. This would
    help measure the counterfactual outcomes. The same group of people represents
    both smokers and non-smokers. Since this is not a possibility, we need to assume
    there is *exchangeability*. Non-smokers describe smokers if they ever smoke and
    vice-versa. This, in other words, means the two groups are comparable in all respects/aspects.
    In the cases where the data samples are not comparable, the condition is termed
    as confounding, and the property that is responsible for it (in this case, age)
    is called the **confounder**. If we have to explain this with an example, the
    fact that all non-smokers are younger, the non-smokers will under-estimate the
    outcome of older smokers had they not smoked.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 测量吸烟对发展心脏病定量效应的理想方式是取一组人，观察他们在一段时间内吸烟，收集心脏病发展的数据，使用同一组人，并在他们不吸烟时回到过去进行相同的评估。这将有助于测量反事实结果。同一组人代表吸烟者和非吸烟者。由于这不可能实现，我们需要假设存在*可交换性*。非吸烟者描述吸烟者如果他们曾经吸烟，反之亦然。换句话说，这意味着两组在所有方面都是可比的。在数据样本不可比的情况下，这种情况被称为混淆，导致这种情况的属性（在这种情况下，年龄）被称为**混杂因素**。如果我们必须用例子来解释这一点，那么所有非吸烟者都较年轻的事实，如果他们不吸烟，非吸烟者将低估老年吸烟者的结果。
- en: 'This condition can be represented as shown here:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况可以表示如下：
- en: '![Confounding](img/B03980_10_22.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![混淆](img/B03980_10_22.jpg)'
- en: What we observe is that there is a backdoor pathway (through the age property).
    Confounding can thus be defined in a much simpler term, that is, *the existence
    of a backdoor pathway*.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我们观察到存在一个后门路径（通过年龄属性）。因此，混淆可以定义得更加简单，即*存在一个后门路径*。
- en: Note
  id: totrans-174
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Confounding is a situation in which the effect or association between exposure
    and outcome is distorted by the presence of another variable.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 混淆是指暴露和结果之间的效应或关联因另一个变量的存在而被扭曲的情况。
- en: Effect modification
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 效应修饰
- en: Effect modification is the condition when exposures have different values for
    different groups. This can be observed when the measures of association estimation,
    like odds ratio, rate ratio, and risk ratio values, are very close to a weighted
    average of group-specific estimates from the association.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 效应修饰是指暴露在不同组别中有不同值的情况。当关联性测量的指标，如比值比、率比和风险比值非常接近特定组别估计的加权平均值时，可以观察到这种情况。
- en: The effect modifier is the variable that differentially (this can mean positively
    or negatively) modifies the observed effect on the outcome.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 效应修饰变量是那个不同地（这可能意味着正面或负面）修改观察到的结果效应的变量。
- en: Let's look at an example. Breast cancer can occur both in men and women; the
    ratio occurs in both men and women, but the rate at which it occurs in women is
    800 times more than men, and the gender factor is a differentiating one for obvious
    reasons.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一个例子。乳腺癌可以发生在男性和女性身上；在男性和女性中的比率是相同的，但女性发生乳腺癌的比率是男性的800倍，性别因素是一个明显的区分因素。
- en: If the effect modifier is not properly identified, this could result in an incorrect
    crude estimate, and this results in missing the opportunity to understand the
    relationship between the risk factor and the outcome.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 如果效应修饰因子没有被正确识别，这可能会导致错误的粗略估计，从而错失了解风险因素与结果之间关系的机会。
- en: 'The following steps need to be followed to study the effect modification for
    analyzing the data:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 研究数据效应修饰以分析数据需要遵循以下步骤：
- en: Gather information on potential effect modifiers.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 收集有关潜在效应修饰因子的信息。
- en: Study the effect of the effect modifier, measure the difference, and hold on
    from matching the values.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 研究效应修饰因子的效应，测量差异，并保持对匹配值的控制。
- en: Stratify the data by potential effect modifiers and calculate estimates of the
    effect of the risk on the outcome. Determine if effect modification is present.
    If so, the estimates can be presented/used.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据潜在效应修饰因子对数据进行分层，并计算风险对结果效应的估计。确定是否存在效应修饰。如果存在，可以展示/使用这些估计。
- en: To review, confounders mask a true effect and effect modifiers mean that there
    is a different effect for different groups.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾一下，混杂因素会掩盖真实效应，而效应修饰因子意味着不同群体有不同的效应。
- en: Regression methods
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回归分析方法
- en: As we learned, regression allows us to model the relationship between two or
    more variables, especially when a continuous dependent variable is predicted,
    based on several independent variables. The independent variables used in regression
    can be either continuous or dichotomous. In cases where the dependent variable
    is dichotomous, logistic regression is applied. In cases where the split between
    the two levels of dependent variables is equal, then both linear and logistic
    regression would fetch the same results.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所学的，回归分析使我们能够根据多个自变量来建模两个或更多变量之间的关系，尤其是在预测连续因变量时。回归分析中使用的自变量可以是连续的或二分的。在因变量为二分的情况下，应用逻辑回归。在因变量两个水平之间的分割相等时，则线性回归和逻辑回归都会得到相同的结果。
- en: '![Regression methods](img/B03980_10_23.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![回归方法](img/B03980_10_23.jpg)'
- en: Assumptions of regression (most apply to linear regression model family)
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 回归分析的假设（大多数适用于线性回归模型家族）
- en: '**Sample cases size**: In order to apply regression models, the cases-to-**Independent
    Variables** (**IVs**) ratio should ideally be 20:1 (for every IV in the model,
    there need to be 20 cases), the least being 5:1(5 cases for every IV in the model).'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**样本案例大小**：为了应用回归模型，案例与自变量（**IVs**）的比例理想情况下应该是20:1（对于模型中的每个自变量，需要有20个案例），至少应该是5:1（模型中的每个自变量有5个案例）。'
- en: '**Data accuracy**: Regression assumes the basic validity of data, and it is
    expected to run basic data validations before running regression methods. For
    example, if a variable can have values between 1-5, any value not in the range
    will need to be corrected.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据准确性**：回归分析假设数据的基本有效性，并在运行回归方法之前进行基本数据验证。例如，如果一个变量可以具有1-5之间的值，那么任何不在该范围内的值都需要进行修正。'
- en: '**Outliers**: As we learned, outliers are those data points that usually have
    extreme values and don''t naturally appear to be a part of the population. Regression
    assumes that the outlier values are handled.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**异常值**：正如我们所学的，异常值通常是具有极端值的数据点，它们看起来并不自然地属于总体的一部分。回归分析假设异常值已经得到处理。'
- en: '**Missing data**: It is important to look for missing data and address the
    same. If a specific variable has many missing values, it might be good to eliminate
    the variable unless there are too many variables with many missing values. Once
    the regression process is run, the variable that has no values can be a candidate
    for exclusion. And to avoid the risk of losing data through elimination, missing
    value techniques will need to be applied'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缺失数据**：寻找缺失数据并解决这些问题很重要。如果一个特定变量有很多缺失值，可能最好删除该变量，除非有太多变量具有许多缺失值。一旦运行了回归过程，没有值的变量可以成为排除的候选者。为了避免通过排除丢失数据的风险，需要应用缺失值技术。'
- en: '**Normal distribution**: It is necessary for the data to be checked to ensure
    that your data is normally distributed. Plotting data on a histogram is a way
    to check if the data is normally distributed. The following histogram is an example
    of normal distribution:![Regression methods](img/B03980_10_24.jpg)'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**正态分布**：检查数据以确保数据是正态分布的。在直方图上绘制数据是检查数据是否正态分布的一种方法。以下直方图是正态分布的一个例子：![回归方法](img/B03980_10_24.jpg)'
- en: '**Linear behavior**: Linear behavior is, in simple terms, seeing a straight
    line relationship between the dependent and independent variables. Any non-linear
    relationship between the IV and DV is ignored. A bivariate scatterplot is used
    to test for linearity.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线性行为**：简单来说，线性行为是指因变量和自变量之间存在直线关系。任何非线性关系都会被忽略。使用双变量散点图来检验线性关系。'
- en: '**Homoscedasticity**: Homoscedasticity refers to the constant changes to an
    independent variable for a change in the dependent variable. The following scatter
    plot is an example of data being homoscedastic, and we can see the concentration
    of plottings in the center:![Regression methods](img/B03980_10_25.jpg)'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**同方差性**：同方差性是指因变量变化时自变量的恒定变化。以下散点图是同方差数据的例子，我们可以看到绘图集中在中心：![回归方法](img/B03980_10_25.jpg)'
- en: Similar to the assumption of linearity, violation of the assumption of homoscedasticity
    does not invalidate regression but weakens it.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 与线性假设类似，违反同方差性假设不会使回归无效，但会削弱它。
- en: '**Multicollinearity and singularity**: Multicollinearity is a case where independent
    variables are highly correlated. In the case of singularity, the independent variables
    are perfectly correlated and, usually, one IV is a combination of one or more
    other IVs. Both multicollinearity and singularity can be easily identified using
    the correlation between IVs.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**多重共线性与奇异性**：多重共线性是指自变量高度相关的情况。在奇异性情况下，自变量完全相关，通常一个自变量是其他一个或多个自变量的组合。多重共线性与奇异性都可以通过自变量之间的相关性轻松识别。'
- en: 'From the following section onwards, we will cover each of the regression methods
    in depth as listed in the concept map here:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 从以下部分开始，我们将深入探讨概念图中列出的每个回归方法：
- en: '![Regression methods](img/B03980_10_26.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![回归方法](img/B03980_10_26.jpg)'
- en: Simple regression or simple linear regression
  id: totrans-201
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 简单回归或简单线性回归
- en: In this case, we will be working with just two variables; one dependent variable
    and another independent variable. Simple linear regression is all about comparing
    two models; one where there is no independent variable and the best fit line is
    formed using the dependent variable, and the other that uses the best-fit regression
    line. Now let's look at an example to understand the best fit line and regression
    line definitions.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将只处理两个变量；一个因变量和一个自变量。简单线性回归就是比较两个模型；一个是没有自变量，最佳拟合线是通过因变量形成的，另一个是使用最佳拟合回归线。现在让我们通过一个例子来了解最佳拟合线和回归线的定义。
- en: 'We will start with a real-world example. Let''s assume there is a real-estate
    dealer and for every real-estate transaction that he does, he gets a commission.
    Very obviously, the commission amount dependents on the value of the transaction;
    the higher the value of the transaction, the higher the commission. So in this
    case, the commission becomes a dependent variable, and the transaction amount
    becomes an independent variable. In order to predict what could possibly be the
    next commission amount, let''s consider the sample data of the last six transactions
    as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从现实世界的例子开始。假设有一个房地产经纪人，每次他完成一笔房地产交易，他都会得到一笔佣金。很明显，佣金金额取决于交易的价值；交易价值越高，佣金就越高。因此，在这种情况下，佣金成为因变量，交易金额成为自变量。为了预测可能的下一笔佣金金额，让我们考虑以下最后六次交易的样本数据：
- en: '![Simple regression or simple linear regression](img/B03980_10_27.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_27.jpg)'
- en: 'Let''s assume that we do not have data for the overall transaction amount.
    If we were to predict the next commission given in the previous data, we start
    by plotting it on a graph as shown here:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们没有整体交易金额的数据。如果我们想要预测之前数据中给出的下一笔佣金，我们首先将其绘制在图中，如图所示：
- en: '![Simple regression or simple linear regression](img/B03980_10_28.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_28.jpg)'
- en: One of the options we have to identify the next commission amount that is given
    in the data is to compute the mean, which is the best prediction for the sample.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 我们用来识别数据中下一个佣金金额的选项之一是计算平均值，这是样本的最佳预测。
- en: '![Simple regression or simple linear regression](img/B03980_10_29.jpg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_29.jpg)'
- en: 'Let''s plot this point on the graph and this would become the *best* fit. Plotting
    the mean value on the previous graph:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在图上绘制这个点，这将成为*最佳*拟合。在之前的图上绘制平均值：
- en: '![Simple regression or simple linear regression](img/B03980_10_30.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_30.jpg)'
- en: Computing the distance for each point from the mean gives the values that are
    shown in the next graph. This distance measure is called error or residual. The
    sum of the error for all the points is always found to be zero, and this is the
    measure of the goodness of the fit.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 计算每个点到平均值的距离给出了下一图中显示的值。这种距离度量称为误差或残差。所有点的误差总和始终为零，这是拟合优度的度量。
- en: '![Simple regression or simple linear regression](img/B03980_10_31.jpg)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_31.jpg)'
- en: Plotting the distance on the graph.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在图上绘制距离。
- en: '![Simple regression or simple linear regression](img/B03980_10_32.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_32.jpg)'
- en: 'We have learned in our earlier chapters about the **SSE** (**Sum Squared Error**)
    value. The error is squared because it makes the value positive and also emphasizes
    larger deviations. The following table shows the SSE values computed for the sample
    data:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在前面章节中学习了关于**SSE**（**平方和误差**）值的内容。误差被平方是因为它使值变为正值，并强调更大的偏差。以下表格显示了为样本数据计算出的SSE值：
- en: '![Simple regression or simple linear regression](img/B03980_10_33.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_33.jpg)'
- en: The overall goal of a simple linear regression is to build a model that minimizes
    SSE to a maximum extent. Until now, we have seen the best fit using a single variable,
    which is the dependent variable. Now, let's assume we get the data for another
    independent variable in our example. This, in fact, gets us a new regression line
    that is different from the best fit line that we arrived at previously. It is
    expected that the new independent variable should significantly reduce the SSE
    value. In other words, this new regression line should be a better fit for the
    given data.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 简单线性回归的整体目标是构建一个模型，最大限度地减少SSE值。到目前为止，我们已经看到了使用单个变量（即因变量）的最佳拟合。现在，让我们假设我们得到了我们例子中的另一个自变量的数据。实际上，这给我们带来了一条新的回归线，这条线与我们之前得到的最佳拟合线不同。预期新的自变量将显著减少SSE值。换句话说，这条新的回归线应该是对给定数据的更好拟合。
- en: If there is no difference in the earlier best-fit line and the regression line,
    this would mean that the identified independent variable has no influence on the
    outcome. Overall, simple linear regression is designed to find the best fitting
    line using the data that would have the least amount of SSE value.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 如果早期最佳拟合线和回归线之间没有差异，这意味着所确定的独立变量对结果没有影响。总的来说，简单线性回归旨在使用具有最小SSE值的数据找到最佳拟合线。
- en: 'Let''s now add the independent variable data into our analysis—the real-estate
    transaction value, as shown in the table here:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将独立变量数据添加到我们的分析中——正如表格中所示的不动产交易价值：
- en: '![Simple regression or simple linear regression](img/B03980_10_34.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_34.jpg)'
- en: We will plot a scatter plot between the dependent and the independent variable.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在因变量和自变量之间绘制散点图。
- en: '![Simple regression or simple linear regression](img/B03980_10_35.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_35.jpg)'
- en: 'There could be multiple lines/equations possible in this context as shown in
    the next graph. In case the data seems to be falling in line, we can proceed.
    If the data points are scattered all over the place, this is an indication that
    there is no linearity in data, and we could choose to stop deriving the regression
    line. We could choose to compute the correlation coefficient here as follows:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下可能有多个线/方程，如下一图所示。如果数据似乎呈线性分布，我们可以继续。如果数据点散布在各个地方，这表明数据中没有线性关系，我们可以选择停止推导回归线。我们可以选择在这里计算相关系数，如下所示：
- en: r = 0.866
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: r = 0.866
- en: This indicates that the relationship between the two variables is strong, and
    we can proceed to build the regression model.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明两个变量之间的关系很强，我们可以继续构建回归模型。
- en: '![Simple regression or simple linear regression](img/B03980_10_36.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_36.jpg)'
- en: 'Let''s now compute the mean for the *x* and *y*-axis; here are the values:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 现在计算*x*轴和*y*轴的平均值；以下是这些值：
- en: '![Simple regression or simple linear regression](img/B03980_10_37.jpg)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_37.jpg)'
- en: 'These mean values are to then be plotted as a centroid onto the scattered plot,
    as shown here:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将这些平均值绘制为质心到散点图上，如图所示：
- en: '![Simple regression or simple linear regression](img/B03980_10_38.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_38.jpg)'
- en: 'The best-fit regression line has to go through the centroid that comprises
    the mean of the *x* and *y* variables. The calculations are as follows:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳拟合回归线必须通过包含*x*和*y*变量平均值的质心。计算如下：
- en: '![Simple regression or simple linear regression](img/B03980_10_51.jpg)![Simple
    regression or simple linear regression](img/B03980_10_52.jpg)![Simple regression
    or simple linear regression](img/B03980_10_53.jpg)![Simple regression or simple
    linear regression](img/B03980_10_39.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_51.jpg)![简单回归或简单线性回归](img/B03980_10_52.jpg)![简单回归或简单线性回归](img/B03980_10_53.jpg)![简单回归或简单线性回归](img/B03980_10_39.jpg)'
- en: 'The final regression line equation looks like this:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 最终的回归线方程看起来是这样的：
- en: '![Simple regression or simple linear regression](img/B03980_10_40.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_40.jpg)'
- en: 'Plotting the previous equation on the scatter plot looks like this:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在散点图上绘制前一个方程看起来是这样的：
- en: '![Simple regression or simple linear regression](img/B03980_10_41.jpg)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![简单回归或简单线性回归](img/B03980_10_41.jpg)'
- en: Multiple regression
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多元回归
- en: Multiple regression is an extension of simple linear regression with one important
    difference, that there can be two or more independent variables used for predicting
    or explaining the variance in one dependent variable. Adding more independent
    variables does not necessarily make the regression better. There could potentially
    be two problems that could arise, one of which is over-fitting. We have covered
    this in the earlier chapters. Too many independent variables can add to the variance
    but in reality, they add nothing to the model thus causing over-fitting. Also,
    adding more independent variables adds more relationships. It is not only that
    the independent variables are potentially related to the dependent variables,
    but also there could be a dependency between the independent variables themselves.
    This condition is called multicollinearity. The ideal expectation is that the
    independent variables are correlated with the dependent variables, but not with
    each other.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 多元回归是简单线性回归的扩展，有一个重要的区别，即可以使用两个或更多独立变量来预测或解释一个因变量的方差。增加更多的独立变量并不一定使回归更好。可能存在两个潜在问题，其中一个就是过拟合。我们已经在前面的章节中讨论过这个问题。过多的独立变量可能会增加方差，但在现实中，它们对模型没有任何贡献，从而造成过拟合。此外，增加更多的独立变量会增加更多的关系。不仅独立变量可能相关于因变量，而且独立变量之间也可能存在依赖关系。这种情况被称为多重共线性。理想的期望是独立变量与因变量相关，但彼此之间不相关。
- en: As a result of over-fitting and multicollinearity issues, there is a need for
    preparatory work before a multiple regression analysis work is to be started.
    The preparatory work can include computing correlations, mapping scatter plots,
    and running simple linear regression among others.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 由于过拟合和多重共线性问题，在开始进行多元回归分析之前需要进行准备工作。准备工作可能包括计算相关性、绘制散点图映射和运行简单线性回归等。
- en: Let's say, we have one dependent variable and four independent variables, and
    there is a multicollinearity risk. This means there are four relationships between
    the four independent variables and one dependent variable, and among the independent
    variables, there could be six more. So, there are 10 relationships to consider
    as shown here. DV stands for dependent variable and IV stands for independent
    variable.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有一个因变量和四个自变量，存在多重共线性风险。这意味着四个自变量与一个因变量之间存在四个关系，而在自变量之间，还可能有六个关系。所以，共有10个关系需要考虑，如图所示。DV代表因变量，IV代表自变量。
- en: '![Multiple regression](img/B03980_10_42.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![多元回归](img/B03980_10_42.jpg)'
- en: Some independent variables are better than others for predicting the dependent
    variable, and some might not contribute anything to the prediction. There is a
    need to decide which one of the dependent variables to consider.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
- en: In multiple regression, each coefficient is interpreted as the estimated change
    in *y* corresponding to a one-unit change in the variable, while the rest of the
    variables are assumed constant.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
- en: The following are the multiple regression equations.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
- en: '![Multiple regression](img/B03980_10_43.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
- en: Let's say we want to fit an independent variable as a function of a lot of variables
    (*x*, *y*, and *x*²). We can follow a simple procedure to get the coefficients
    of all the variables. This is applicable for linear, quadratic, and cubic functions.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the step-by-step process:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: Order all the points of each variable in a separate column.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Combine all the columns of the independent variables to be represented as a
    matrix.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add a column to the 1's at the beginning of the matrix.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name this matrix as *X* Matrix.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Make a separate column matrix of all independent variables and call it *Y* Matrix.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Compute the coefficients using the formula here (this is the least square regression):'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*B = (X*^T*X)*^(-1)*X*^T*Y*'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: This is a matrix operation, and the resulting vector is the coefficient.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
- en: In multiple regression, a lot of preparatory work needs to be done before running
    the regression model. It is necessary to step back and perform some analysis on
    the variables in consideration. Some basic scatter plots can be plotted to check
    for any correlations and to analyze the relationships between the dependent variables.
    Techniques like scatter plots, correlation analysis, and individual or group regressions
    can be used. In case there are any qualitative or categorical variables, we will
    need to use dummy variables to build the regression model.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
- en: Polynomial (non-linear) regression
  id: totrans-257
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: While the linear regression model *y = Xβ + ε* is a general model that will
    fit any linear relationship in the unknown parameter *β*, polynomial models are
    applicable in cases where the analyst knows that curvilinear effects are present
    in the true response function. Polynomial models are also used as approximating
    functions to the unknown and possibly very complex nonlinear relationship. The
    polynomial model is the Taylor series expansion of the unknown function.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
- en: 'If the two variables are linearly related, the scatterplot looks like the following:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
- en: '![Polynomial (non-linear) regression](img/B03980_10_44.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
- en: 'From the previous bivariate scatterplot, it is clear that there is a linear
    relationship between friends and happiness. The graph says *more friends, more
    happiness*. What if we talk about a curvilinear relationship between the variables,
    the number of friends and happiness? This means as the number of friends grows,
    the happiness grows but only to a certain point. The following graph shows this
    behavior in data:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
- en: '![Polynomial (non-linear) regression](img/B03980_10_45.jpg)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
- en: If the data is not linear, then the process is to make it linear by transforming
    IVs or the DV so that there is a linear relationship between them. This transformation
    will not always work as there might be a genuine non-linearity in data and behavior.
    In this case, we will need to include the square of the independent variables
    in the regression. This is also known as a polynomial/quadratic regression. The
    **least squares** method is used to fit a polynomial regression model as it minimizes
    the variance in the estimation of the coefficients.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
- en: Generalized Linear Models (GLM)
  id: totrans-264
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let's look at the reasons why a linear regression model does not work.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
- en: Simple linear regression is a quantitative variable predicting another, multiple
    regression. It is an extended simple linear regression, but with more independent
    variables and finally, a nonlinear or polynomial regression is the case where
    there are two quantitative variables, but the data is curvilinear.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: Now, running a typical linear regression, in the same way, has some problems.
    Binary data does not have a normal distribution. This is where the need for other
    regression models comes in. Secondly, the predicted values of the dependent variable
    can be beyond 0 and 1, which is against the concept of probability. Finally, probabilities
    are often non-linear and can take majorly low or high values at the extremes.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
- en: GLM is a generalization of linear regression that supports cases where the independent
    variables can have distribution error models other than normal distribution. GLM
    generalizes linear regression as it allows the linear model to be related to the
    independent variable through a link function, and it also allows the degree of
    the variance of each measure is a function of its predicted value.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
- en: In short, GLM generalizes linear, logistic, and Poisson regression models.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
- en: Logistic regression (logit link)
  id: totrans-270
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Logistic regression is an extension of linear regression where the dependent
    variable is a categorical variable that is responsible for the classification
    of the observations.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
- en: For example, if *Y* denotes whether a particular customer is likely to purchase
    a product (1) or unlikely to purchase (0), we have a categorical variable with
    two categories or classes (0 and 1). Logistic regression can solve a classification
    problem where the class is unknown. This is done using the predictor values classifying
    a new observation, where the class is unknown, into one of the classes, based
    on the variable.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
- en: 'The examples are as follows:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
- en: Classifying customers as returning (1) or non-returning (0)
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Predicting if a loan would be approved or rejected, given the credit score
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One of the important uses can be to find similarities between predictor values.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
- en: Before we start taking a deep dive into logistic regression, let's revisit the
    concept of probability and the odds that were covered in the earlier chapter.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
- en: Probability = outcomes of interest / all possible outcomes.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
- en: For example, when a fair coin is tossed, *P(heads) = ½ = 0.5*. When a dice is
    rolled, *P(1 or 2) = 2/6 = 1/3 = 0.33*. In a deck of cards, *P(diamond card) =
    13/52 = ¼ = 0.25*.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
- en: Odds = P(something happening)/P(something not happening) = p/1-p
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
- en: For example, when a coin is tossed, *odds(heads = 0.5/0.5= 1)*. When a dice
    is rolled, *odds(1 or 2) = 0.333/0.666 = ½ = 0.5*. In a deck of cards, *odds(diamond
    card) = 0.25/0.75 = 1/3 = 0.333*.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
- en: The odds ratio is the ratio of two odds.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, when a coin is tossed, in case of a fair flip:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
- en: '*P(heads) = ½= 0.5* and *odds(heads) = 0.5/0.5 = 1 = 1:1*'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
- en: 'In case of a loaded coin flip:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
- en: '*P(heads) = 0.7 and odds(heads) = 0.7/0.3 = 2.333*'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: '*Odds ratio= odds1/odds0 = 2.333/1 = 2.333*'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
- en: This means the odds of getting a heads when a loaded coin is flipped is 2.333
    times greater than a fair coin.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
- en: 'Overall, logistic regression seeks to:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: '**Model** the probability of the event occurring depending on the values of
    the independent variables, which can be categorical or numerical'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Estimate** the probability of an event occurring versus not occurring'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Predict** the effect of a set of variables on a binary response variable'
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Classify** the observations to belong to a particular category based on the
    probability estimation'
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Odds ratio in logistic regression
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The odds ratio for a variable in logistic regression denotes how the odds for
    one variable changes with the increase of a unit in that variable, keeping the
    rest of the variables constant.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
- en: Let's take an example to understand this—whether the body weight is dependent
    on sleep apnea or not. Let's assume that the body weight variable has an odds
    ratio of 1.07\. This means one pound increased in weight could potentially increase
    the odds of having slept apnea by 1.07 times. This might not be significant. In
    the case of a 10-pound increase in weight, the odds increase to 1.98, which doubles
    the odds of the person having slept apnea. It is important that we separate the
    probability and the odds measures. For example, though the increase in weight
    by 20 pounds increases the odds of the person having slept by 4 times, the probability
    that the person's weight has increased by 20 pounds could potentially be very
    low.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
- en: 'In logistic regression, there are two important steps:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
- en: Finding the probability of belonging to a particular class. So, if *Y = 0* or
    *1*, the probability of belonging to *class 1* is *P(Y=1)*.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We will need to use the cut-off values of the probabilities to ensure that each
    case gets into one of the classes. In case of binary cut-off, a *P(Y=1) > 0.5*
    will be categorized as *1* and *P(Y=0) < 0.5* will be categorized as *0*.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Model
  id: totrans-300
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '*y*[i] is normally distributed and takes the value of either 0 or 1 for *i
    = 0,1,…,n*.'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
- en: '*y*[i] is equal to {0, 1} where *P(y*[i] *= 1) = p* and *P(y*[i] *= 0) = 1-p*'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
- en: '*Y = a + bx for P(y*[i]*= 1)*'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
- en: '*p*[i] *= a + bx*[i]'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
- en: 'Note that *p*[i] will not take values between (0, 1). This is fixed by using
    a non-linear function of predictors such as:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
- en: '![Model](img/B03980_10_46.jpg)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
- en: 'Clearly, this takes a value between 0 and 1 as *x* varies from -∞ to ∞. From
    this, *a+bx*[i] can be obtained as follows:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
- en: '![Model](img/B03980_10_47.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
- en: 'The following curve shows how the function varies:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
- en: '![Model](img/B03980_10_48.jpg)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
- en: Poisson regression
  id: totrans-311
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Poisson regression, in the context of GLM, is a count of data with the independent
    variable having Poisson distribution and the link function applied is a logarithm
    of the response that can be modeled using a linear combination of unknown parameters.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
- en: Implementing linear and logistic regression
  id: totrans-313
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Refer to the source code provided for this chapter for implementing linear regression.
    (source code path `.../chapter10/...` under each of the folders for the technology)
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
- en: Using Mahout
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Refer to the folder `.../mahout/chapter10/linearregressionexample/`.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
- en: Refer to the folder `.../mahout/chapter10/logisticregressionexample/`.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
- en: Using R
  id: totrans-318
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Refer to the folder `.../r/chapter10/linearregressionexample/`.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
- en: Refer to the folder `.../r/chapter10/logisticregressionexample/`.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
- en: Using Spark
  id: totrans-321
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Refer to the folder `.../spark/chapter10/linearregressionexample/`.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
- en: Refer to the folder `.../spark/chapter10/logisticregressionexample/`.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
- en: Using scikit-learn
  id: totrans-324
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Refer to the folder `.../python-scikit-learn/chapter10/linearregressionexample/`
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
- en: Refer to the folder `.../python-scikit-learn/chapter10/logisticregressionexample/`
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
- en: Using Julia
  id: totrans-327
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Refer to the folder `.../julia/chapter10/linearregressionexample/`.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
- en: Refer to the folder `.../julia/chapter10/logisticregressionexample/`.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-330
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you learned regression analysis-based machine learning and,
    in particular, how to implement linear and logistic regression models using Mahout,
    R, Python, Julia, and Spark. Additionally, we covered other related concepts of
    statistics such as variance, covariance, and ANOVA among others. We covered regression
    models in depth with examples to understand how to apply them to real-world problems.
    In the next chapter, we will cover deep learning methods.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
