- en: Affinity Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 亲和度分析
- en: Affinity analysis is the heart of **Market Basket Analysis** (**MBA**). It can
    discover co-occurring relationships among activities performed by specific users
    or groups. In retail, affinity analysis can help you understand the purchasing
    behavior of customers. These insights can drive revenue through smart cross-selling
    and upselling strategies and can assist you in developing loyalty programs, sales
    promotions, and discount plans.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 亲和度分析是**市场篮分析**（**MBA**）的核心。它可以发现特定用户或群体执行的活动之间的共现关系。在零售领域，亲和度分析可以帮助你了解顾客的购买行为。这些见解可以通过智能交叉销售和升级销售策略来推动收入，并帮助你开发忠诚度计划、销售促销和折扣计划。
- en: 'In this chapter, we will look into the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨以下主题：
- en: MBA
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MBA
- en: Association rule learning
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关联规则学习
- en: Other applications in various domains
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在各个领域的其他应用
- en: First, we will revise the core association rule-learning concepts and algorithms,
    such as support and lift Apriori algorithms and the FP-Growth algorithm. Next,
    we will use Weka to perform our first affinity analysis on a supermarket dataset
    and study how to interpret the resulting rules. We will conclude this chapter
    by analyzing how association rule learning can be applied in other domains, such
    as IT operations analytics, and medicine.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将复习核心的关联规则学习概念和算法，例如支持度和提升度的 Apriori 算法和 FP-Growth 算法。接下来，我们将使用 Weka 对超市数据集进行首次亲和度分析，并研究如何解释生成的规则。我们将通过分析关联规则学习在其他领域中的应用来结束本章，例如
    IT 运营分析和医学。
- en: Market basket analysis
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 购物篮分析
- en: Since the introduction of electronic points of sale, retailers have been collecting
    an incredible amount of data. To leverage this data in to produce business value,
    they first developed a way to consolidate and aggregate the data to understand
    the basics of the business.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 自电子销售点引入以来，零售商一直在收集大量数据。为了利用这些数据产生商业价值，他们首先开发了一种方法来整合和汇总数据，以了解业务的基本情况。
- en: 'Recently, the focus shifted to the lowest level of granularity—the market basket
    transaction. At this level of detail, the retailers have direct visibility into
    the market basket of each customer who shopped at their store, understanding not
    only the quantity of the purchased items in that particular basket, but also how
    these items were bought in conjunction with one another. This can be used to drive
    decisions about how to differentiate store assortment and merchandise, as well
    as to effectively combine offers of multiple products, within and across categories,
    to drive higher sales and profits. These decisions can be implemented across an
    entire retail chain, by channel, at the local store level, and even for a specific
    customer, with so-called personalized marketing, where a unique product offering
    is made for each customer:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，焦点转向了粒度最低的市场篮交易。在这个细节级别，零售商可以直接看到在其商店购物的每个顾客的市场篮子，不仅了解该特定篮子中购买物品的数量，还了解这些物品是如何一起购买的。这可以用来做出如何区分商店商品组合和商品以及如何有效组合多个产品（在类别内和跨类别）的决策，以推动更高的销售额和利润。这些决策可以在整个零售链、通过渠道、在本地商店层面甚至针对特定顾客（通过所谓的个性化营销）实施，为每个顾客提供独特的产品：
- en: '![](img/edb61ab2-da9d-439b-ae53-4148bb02191a.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/edb61ab2-da9d-439b-ae53-4148bb02191a.png)'
- en: 'MBA covers a wide variety of analysis:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: MBA 涵盖了广泛的分析：
- en: '**Item affinity**: This defines the likelihood of two (or more) items being
    purchased together.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**物品亲和度**：这定义了两个（或更多）物品一起购买的可能性。'
- en: '**Identification of driver items**: This enables the identification of the
    items that drive people to the store and always need to be in stock.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**驱动项识别**：这使能够识别推动人们到商店并始终需要保持库存的物品。'
- en: '**Trip classification**: This analyzes the content of the basket and classifies
    the shopping trip into a category: weekly grocery trip, special occasion, and
    so on.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**行程分类**：这分析篮子内容，并将购物行程分类到某一类别：每周杂货之旅、特殊场合等。'
- en: '**Store-to-store comparison**: Understanding the number of baskets allows any
    metric to be divided by the total number of baskets, effectively creating a convenient
    and easy way to compare the stores to different characteristics (units sold per
    customer, revenue per transaction, number of items per basket, and so on).'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**店铺间比较**：了解篮子数量可以使任何指标除以总篮子数，从而有效地创建一种方便且易于比较店铺不同特征（每客户的销售单位数、每笔交易的收入、每篮物品数量等）的方法。'
- en: '**Revenue optimization**: This helps in determining the magic price points
    for this store, increasing the size and the value of the market basket.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**收入优化**：这有助于确定该商店的神奇价格点，增加购物篮的大小和价值。'
- en: '**Marketing**: This helps in identifying more profitable advertising and promotions,
    targeting offers more precisely to improve ROI, generating better loyalty card
    promotions with longitudinal analysis and attracting more traffic to the store.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**营销**：这有助于识别更有利可图的广告和促销活动，更精确地定位优惠以提高投资回报率，通过纵向分析生成更好的忠诚度卡促销活动，并吸引更多客流到商店。'
- en: '**Operations optimization**: This helps in matching the inventory to the requirement
    by customizing the store and assortment to trade area demographics, and optimizing
    store layout.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**运营优化**：这有助于通过定制商店和商品组合以适应贸易区域人口统计，并优化商店布局，来匹配库存与需求。'
- en: Predictive models help retailers to direct the right offer to the right customer
    segments or profiles, as well as to gain an understanding of what is valid for
    which customer, predict the probability score of customers responding to this
    offer, and understand the customer value gain from the offer acceptance.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 预测模型帮助零售商将正确的优惠提供给正确的客户群体或个人资料，以及了解哪些优惠适用于哪些客户，预测客户对这一优惠的响应概率得分，并理解客户从接受优惠中获得的增值。
- en: Affinity analysis
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关联分析
- en: '**Affinity analysis** is used to determine the likelihood that a set of items
    will be bought together. In retail, there are natural product affinities; for
    example, it is very typical for people who buy hamburger patties to buy hamburger
    rolls, along with ketchup, mustard, tomatoes, and other items that make up the
    burger experience.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '**关联分析**用于确定一组商品同时被购买的可能性。在零售业中，存在自然的产品关联；例如，对于购买汉堡饼的人来说，购买汉堡包、番茄酱、芥末、番茄和其他构成汉堡体验的物品是非常典型的。'
- en: While there are some product affinities that might seem trivial, there are some
    affinities that are not very obvious. A classic example is toothpaste and tuna.
    It seems that people who eat tuna are more prone to brushing their teeth right
    after finishing their meal. So, why it is important for retailers to get a good
    grasp of product affinities? This information is critical to appropriately plan
    promotions, as reducing the price for some items may cause a spike on related
    high-affinity items without the need to further promote these related items.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然有些产品关联可能看似微不足道，但也有一些关联并不十分明显。一个经典的例子是牙膏和金枪鱼。似乎吃金枪鱼的人更有可能在用餐后立即刷牙。那么，为什么零售商需要很好地掌握产品关联呢？这些信息对于适当规划促销活动至关重要，因为降低某些商品的价格可能会在不进一步推广这些相关商品的情况下，导致相关高关联商品的需求激增。
- en: 'In the following section, we''ll look into the algorithms for association rule
    learning: Apriori and FP-Growth.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将探讨关联规则学习的算法：Apriori和FP-Growth。
- en: Association rule learning
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关联规则学习
- en: '**Association rule learning** has been a popular approach to discover interesting
    relationships among items in large databases. It is most commonly applied in retail
    to reveal regularities between products.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**关联规则学习**是发现大型数据库中项目之间有趣关系的一种流行方法。它最常应用于零售业，以揭示产品之间的规律性。'
- en: 'Association rule learning approaches find patterns as interesting strong rules
    in the database using different measures of interestingness. For example, the
    following rule would indicate, that if a customer buys onions and potatoes together,
    they are likely to also buy hamburger meat: {onions, potatoes} -> {burger}.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 关联规则学习方法通过使用不同的有趣性度量标准，在数据库中寻找有趣且强大的规则模式。例如，以下规则表明，如果一个顾客同时购买洋葱和土豆，他们很可能也会购买汉堡肉：{洋葱，土豆}
    -> {汉堡}。
- en: 'Another classic story probably told in every machine-learning class is the
    beer and diaper story. An analysis of supermarket shoppers'' behavior showed that
    customers, presumably young men, who buy diapers also tend to buy beer. It immediately
    became a popular example of how an unexpected association rule might be found
    from everyday data; however, there are varying opinions as to how much of the
    story is true. In *DSS News 2002,* Daniel Power*s* says this:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可能在每个机器学习课程中都会讲述的经典故事可能是啤酒和尿布的故事。对超市购物者行为的分析显示，购买尿布的客户，可能是年轻男性，也倾向于购买啤酒。这立即成为了一个流行的例子，说明了如何从日常数据中发现意外的关联规则；然而，关于这个故事的真实性存在不同的观点。在《DSS新闻2002》中，Daniel
    Power说：
- en: '"In 1992, Thomas Blischok, manager of a retail consulting group at Teradata,
    and his staff prepared an analysis of 1.2 million market baskets from about 25
    Osco Drug stores. Database queries were developed to identify affinities. The
    analysis did discover that between 5:00 and 7:00 pm, consumers bought beer and
    diapers. Osco managers did not exploit the beer and diapers relationship by moving
    the products closer together on the shelves."'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '"在1992年，托马斯·布利斯克，特达数据零售咨询集团的管理员及其团队，对大约25家奥斯科药店的120万份购物篮进行了分析。开发了数据库查询以识别亲和力。分析确实发现，在下午5:00到7:00之间，消费者购买啤酒和尿布。奥斯科的管理者没有通过将产品在货架上放得更近来利用啤酒和尿布之间的关系。"'
- en: In addition to the preceding example from MBA, association rules are today employed
    in many application areas, including web usage mining, intrusion detection, continuous
    production, and bioinformatics. We'll take a closer look at these areas later
    in this chapter.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 除了前面MBA的例子之外，关联规则今天被应用于许多应用领域，包括网络使用挖掘、入侵检测、连续生产和生物信息学。我们将在本章后面更详细地探讨这些领域。
- en: Basic concepts
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基本概念
- en: Before we dive into algorithms, let's first review the basic concepts.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们深入算法之前，让我们首先回顾基本概念。
- en: Database of transactions
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 交易数据库
- en: In association rule mining, the dataset is structured a bit differently than
    the approach presented in the first chapter. First, there is no class value, as
    this is not required for learning association rules. Next, the dataset is presented
    as a transactional table, where each supermarket item corresponds to a binary
    attribute. Hence, the feature vector could be extremely large.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在关联规则挖掘中，数据集的结构与第一章中介绍的方法略有不同。首先，没有类值，因为学习关联规则不需要类值。接下来，数据集以事务表的形式呈现，其中每个超市商品对应一个二元属性。因此，特征向量可能非常大。
- en: 'Consider the following example. Suppose we have four receipts, as shown next.
    Each receipt corresponds to a purchasing transaction:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下示例。假设我们拥有以下四个收据，如后文所示。每个收据对应一笔购买交易：
- en: '![](img/ac76a6f0-2347-4519-9838-bc68759379dc.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ac76a6f0-2347-4519-9838-bc68759379dc.png)'
- en: 'To write these receipts in the form of a transactional database, we first identify
    all of the possible items that appear in the receipts. These items are **onions**,
    **potatoes**, **burger**, **beer**, and **dippers**. Each purchase, that is, transaction,
    is presented in a row, and there is *1* if an item was purchased within the transaction
    and *0* otherwise, as shown in the following table:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将这些收据以事务数据库的形式编写，我们首先确定收据中出现的所有可能的项目。这些项目是**洋葱**、**土豆**、**汉堡**、**啤酒**和**薯条**。每一笔购买，即交易，都在一行中呈现，如果交易中购买了项目，则为*1*，否则为*0*，如下表所示：
- en: '| **Transaction ID** | **Onions** | **Potatoes** | **Burger** | **Beer** |
    **Dippers** |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| **交易ID** | **洋葱** | **土豆** | **汉堡** | **啤酒** | **薯条** |'
- en: '| 1 | 0 | 1 | 1 | 0 | 0 |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 0 | 1 | 1 | 0 | 0 |'
- en: '| 2 | 1 | 1 | 1 | 1 | 0 |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 1 | 1 | 1 | 1 | 0 |'
- en: '| 3 | 0 | 0 | 0 | 1 | 1 |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 0 | 0 | 0 | 1 | 1 |'
- en: '| 4 | 1 | 0 | 1 | 1 | 0 |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 1 | 0 | 1 | 1 | 0 |'
- en: This example is really small. In practical applications, the dataset often contains
    thousands or millions of transactions, which allow the learning algorithm the
    discovery of statistically significant patterns.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子实际上很小。在实际应用中，数据集通常包含成千上万甚至数百万笔交易，这允许学习算法发现具有统计意义的模式。
- en: Itemset and rule
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 项集和规则
- en: '**Itemset** is simply a set of items, for example, {onions, potatoes, burger}.
    A rule consists of two itemsets, X and Y, in the following format:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**项集**简单地说是一组项目，例如，{洋葱，土豆，汉堡}。一个规则由两个项集X和Y组成，以下格式：'
- en: X -> Y
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: X -> Y
- en: This indicates a pattern that when the X itemset is observed, Y is also observed.
    To select interesting rules, various measures of significance can be used.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 这表示一个模式，即当观察到X项集时，也会观察到Y。为了选择有趣的规则，可以使用各种显著性度量。
- en: Support
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持度
- en: 'Support, for an itemset, is defined as the proportion of transactions that
    contain the itemset. The `{potatoes, burger}` itemset in the previous table has
    the following support, as it occurs in 50% of transactions (two out of four transactions):
    supp({potatoes, burger}) = 2/4 = 0.5.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 对于项集的支持度定义为包含该项集的交易比例。在先前的表中，`{土豆，汉堡}`项集具有以下支持度，因为它出现在50%的交易中（四笔交易中的两笔）：supp({土豆，汉堡})
    = 2/4 = 0.5。
- en: Intuitively, it indicates the share of transactions that support the pattern.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 直观上看，它表示支持该模式的交易份额。
- en: Lift
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 提升度
- en: 'Lift is a measure of the performance of a targeting model (association rule)
    at predicting or classifying cases as having an enhanced response (with respect
    to the population as a whole), measured against a random choice targeting model.
    It is defined using the following formula:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 升值是一个衡量目标模型（关联规则）在预测或分类案例为具有增强响应（相对于整体人口）时的性能的指标，与随机选择的目标模型相比。它使用以下公式定义：
- en: '![](img/6fcd6f36-1c1a-47f6-b4f8-a0e8de3f4b7b.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6fcd6f36-1c1a-47f6-b4f8-a0e8de3f4b7b.png)'
- en: Confidence
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 置信度
- en: 'The confidence of a rule indicates its accuracy. It is defined using the following
    formula:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 规则的置信度表示其准确性。它使用以下公式定义：
- en: '[![](img/5eaba711-2c9e-4443-bb45-987eb9c7aa41.png)]'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/5eaba711-2c9e-4443-bb45-987eb9c7aa41.png)'
- en: For example, the {onions, burger} -> {beer} rule has the confidence *0.5/0.5
    = 1.0* in the previous table, which means that 100% of the time when onions and
    burger are bought together, beer is bought as well.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，{onions, burger} -> {beer}规则在先前的表中具有置信度*0.5/0.5 = 1.0*，这意味着当洋葱和汉堡一起购买时，100%的时间也会购买啤酒。
- en: Apriori algorithm
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Apriori算法
- en: The **Apriori algorithm** is a classic algorithm used for frequent pattern mining
    and association rule learning over transactional. By identifying the frequent
    individual items in a database and extending them to larger itemsets, Apriori
    can determine the association rules, which highlight general trends about a database.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**Apriori算法**是一种经典算法，用于在事务上进行频繁模式挖掘和关联规则学习。通过识别数据库中的频繁单个项目并将它们扩展到更大的项目集，Apriori可以确定关联规则，这些规则突出了数据库的一般趋势。'
- en: The Apriori algorithm constructs a set of itemsets, for example, itemset1= {Item
    A, Item B}, and calculates support, which counts the number of occurrences in
    the database. Apriori then uses a bottom up approach, where frequent itemsets
    are extended, one item at a time, and it works by eliminating the largest sets
    as candidates by first looking at the smaller sets and recognizing that a large
    set cannot be frequent unless all of its subsets are. The algorithm terminates
    when no further successful extensions are found.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Apriori算法构建一组项目集，例如，itemset1= {Item A, Item B}，并计算支持，即数据库中出现的次数。然后Apriori使用自下而上的方法，其中频繁项目集逐个扩展，它通过首先查看较小的集合并认识到一个大的集合不能是频繁的，除非它的所有子集都是频繁的，来消除最大的集合作为候选者。当找不到进一步的扩展时，算法终止。
- en: Although the Apriori algorithm is an important milestone in machine learning,
    it suffers from a number of inefficiencies and tradeoffs. In the following section,
    we'll look into a more recent FP-Growth technique.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管Apriori算法是机器学习中的一个重要里程碑，但它存在许多低效性和权衡。在下一节中，我们将探讨更近期的FP-Growth技术。
- en: FP-Growth algorithm
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FP-Growth算法
- en: '**FP-Growth** (where FP is frequent patterns) represents the transaction database
    as a suffix tree. First, the algorithm counts the occurrence of items in the dataset.
    In the second pass, it builds a suffix tree, an ordered tree data structure commonly
    used to store a string. An example of a suffix tree based on the previous example
    is shown in the following diagram:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**FP-Growth**（其中FP是频繁模式）将事务数据库表示为后缀树。首先，算法统计数据集中项目的出现次数。在第二次遍历中，它构建一个后缀树，这是一种有序的树形数据结构，通常用于存储字符串。以下是根据前一个示例的后缀树示例图：'
- en: '![](img/6dc05f73-8ffc-4870-81a2-bb5ee883ec77.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6dc05f73-8ffc-4870-81a2-bb5ee883ec77.png)'
- en: If many transactions share the most frequent items, the suffix tree provides
    high compression close to the tree root. Large itemsets are grown directly, instead
    of generating candidate items and testing them against the entire database. Growth
    starts at the bottom of the tree, by finding all of the itemsets matching minimal
    support and confidence. Once the recursive process has completed, all large itemsets
    with minimum coverage have been found and association rule creation begins.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果许多事务共享最频繁的项目，后缀树在树根附近提供接近高压缩。直接生长大项目集，而不是生成候选项目并对其与整个数据库进行测试。生长从树的底部开始，通过找到所有匹配最小支持和置信度的项目集。一旦递归过程完成，所有具有最小覆盖范围的大项目集都已找到，并开始创建关联规则。
- en: An FP-Growth algorithm has several advantages. First, it constructs an FP-tree,
    which encodes the original dataset in a substantially compact presentation. Second,
    it efficiently builds frequent itemsets, leveraging the FP-tree structure and
    the divide-and-conquer strategy.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: FP-Growth算法具有几个优点。首先，它构建了一个FP树，以大量紧凑的表示编码原始数据集。其次，它利用FP树结构和分而治之策略有效地构建频繁项目集。
- en: The supermarket dataset
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 超市数据集
- en: 'The supermarket dataset, located in `data/supermarket.arff`, describes the
    shopping habits of supermarket customers. Most of the attributes stand for a particular
    item group, for example, diary foods, beef, and potatoes; or they stand for a
    department, for example, department 79, department 81, and so on. The following
    table shows an excerpt of the database, where the value is *t* if the customer
    had bought an item and missing otherwise. There is one instance per customer.
    The dataset contains no class attribute, as this is not required to learn association
    rules. A sample of data is shown in the following table:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 位于`data/supermarket.arff`的超市数据集描述了超市顾客的购物习惯。大多数属性代表特定的商品组，例如，乳制品、牛肉和土豆；或者代表一个部门，例如，部门79、部门81等。以下表格显示了数据库的摘录，其中值为`t`表示顾客购买了该商品，否则为空。每个顾客有一个实例。该数据集不包含类属性，因为学习关联规则不需要它。以下表格显示了数据的一个样本：
- en: '![](img/795041e5-78aa-46a5-88c4-7ee1e2b0d6c7.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/795041e5-78aa-46a5-88c4-7ee1e2b0d6c7.png)'
- en: Discover patterns
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发现模式
- en: 'To discover shopping patterns, we will use the two algorithms that we have
    looked into before: Apriori and FP-Growth.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 为了发现购物模式，我们将使用之前已经研究过的两种算法：Apriori和FP-Growth。
- en: Apriori
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Apriori
- en: 'We will use the `Apriori` algorithm as implemented in Weka. It iteratively
    reduces the minimum support until it finds the required number of rules with the
    given minimum confidence. We''ll implement the algorithm using the following steps:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用Weka中实现的`Apriori`算法。该算法迭代地减少最小支持度，直到找到给定最小置信度的所需规则数量。我们将使用以下步骤实现该算法：
- en: 'We''ll import the required libraries using the following lines of code:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用以下代码行导入所需的库：
- en: '[PRE0]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'First, we''ll load the `supermarket.arff` dataset:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将加载`supermarket.arff`数据集：
- en: '[PRE1]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We''ll initialize an `Apriori` instance and call the `buildAssociations(Instances)`
    function to start frequent pattern mining, as follows:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将初始化一个`Apriori`实例，并调用`buildAssociations(Instances)`函数来开始频繁模式挖掘，如下所示：
- en: '[PRE2]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can output the discovered itemsets and rules, as shown in the following
    code:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以输出发现的项集和规则，如下所示：
- en: '[PRE3]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The output is as follows:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE4]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The algorithm outputs the ten best rules according to confidence. Let''s look
    at the first rule and interpret the output, as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 该算法根据置信度输出了十个最佳规则。让我们看看第一条规则并解释输出，如下所示：
- en: '[PRE5]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: It says that when `biscuits`, `frozen foods`, and `fruits` are bought together
    and the total purchase price is high, it is also very likely that `bread` and
    `cake` are purchased as well. The `{biscuits, frozen foods, fruit, total high}`
    itemset appears in `788` transactions, while the `{bread, cake}` itemset appears
    in `723` transactions. The confidence of this rule is `0.92`, meaning that the
    rule holds true in 92% of transactions where the `{biscuits, frozen foods, fruit,
    total high}` itemset is present.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 它表示，当`饼干`、`冷冻食品`和`水果`一起购买且总购买价格较高时，也很可能还会购买`面包`和`蛋糕`。 `{饼干, 冷冻食品, 水果, 总价高}`项集出现在`788`笔交易中，而`{面包,
    蛋糕}`项集出现在`723`笔交易中。该规则的置信度为`0.92`，意味着在存在`{饼干, 冷冻食品, 水果, 总价高}`项集的92%的交易中，该规则是成立的。
- en: The output also reports additional measures such as lift, leverage, and conviction,
    which estimate the accuracy against our initial assumptions; for example, the
    `3.35` conviction value indicates that the rule would be incorrect `3.35` times
    as often if the association was purely a random chance. Lift measures the number
    of times X and Y occur together than expected if they were statistically independent
    `(lift=1)`. The `2.16` lift in the X -> Y rule means that the probability of X
    is `2.16` times greater than the probability of Y.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 输出还报告了额外的度量，如提升度、杠杆和确信度，这些度量估计了与我们的初始假设的准确性；例如，`3.35`确信度值表示，如果关联纯粹是随机机会，该规则将错误`3.35`次。提升度衡量X和Y在一起出现的次数与它们如果统计独立时预期的次数之比（提升度=1）。X
    -> Y规则中的`2.16`提升度表示X的概率是Y概率的`2.16`倍。
- en: FP-Growth
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: FP-Growth
- en: Now, let's try to get the same results with the more efficient FP-Growth algorithm.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们尝试使用更高效的FP-Growth算法来获得相同的结果。
- en: 'FP-Growth is also implemented in the `weka.associations` package:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: FP-Growth也实现于`weka.associations`包中：
- en: '[PRE6]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The FP-Growth algorithm is initialized similarly, as we did earlier:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: FP-Growth算法的初始化方式与之前我们所做的一样：
- en: '[PRE7]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The output reveals that FP-Growth discovered `16 rules`:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 输出揭示FP-Growth发现了`16条规则`：
- en: '[PRE8]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: We can observe that FP-Growth found the same set of rules as Apriori; however,
    the time required to process larger datasets can be significantly shorter.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以观察到，FP-Growth找到了与Apriori相同的规则集；然而，处理大型数据集所需的时间可以显著缩短。
- en: Other applications in various areas
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他领域的应用
- en: We looked into affinity analysis to demystify shopping behavior patterns in
    supermarkets. Although the roots of association rule learning are in analyzing
    point-of-sale transactions, they can be applied outside the retail industry to
    find relationships among other types of baskets. The notion of a basket can easily
    be extended to services and products, for example, to analyze items purchased
    using a credit card, such as rental cars and hotel rooms, and to analyze information
    on value-added services purchased by telecom customers (call waiting, call forwarding,
    DSL, speed call, and so on), which can help the operators determine the ways to
    improve their bundling of service packages.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们研究了亲和力分析，以揭示超市中的购物行为模式。尽管关联规则学习的根源在于分析销售点交易，但它们可以应用于零售业以外的领域，以找到其他类型篮子之间的关系。篮子的概念可以很容易地扩展到服务和产品，例如，分析使用信用卡购买的项目，如租车和酒店房间，以及分析电信客户购买的价值增加服务的信息（呼叫等待、呼叫转接、DSL、快速呼叫等），这可以帮助运营商确定改进服务套餐捆绑的方式。
- en: 'Additionally, we will look into the following examples of potential cross industry
    applications:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们还将探讨以下潜在的跨行业应用示例：
- en: Medical diagnosis
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 医疗诊断
- en: Protein sequences
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蛋白质序列
- en: Census data
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人口普查数据
- en: Customer relationship management
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户关系管理
- en: IT operations analytics
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IT 运营分析
- en: Medical diagnosis
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 医疗诊断
- en: Applying association rules in medical diagnosis can be used to assist physicians
    while curing patients. The general problem of the induction of reliable diagnostic
    rules is hard as, theoretically, no induction process can guarantee the correctness
    of induced hypotheses by itself. Practically, diagnosis is not an easy process,
    as it involves unreliable diagnosis tests and the presence of noise in training
    examples.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在医疗诊断中应用关联规则可以帮助医生在治疗患者时。可靠诊断规则归纳的一般问题很困难，因为理论上，没有任何归纳过程可以保证自身归纳出的假设的正确性。实际上，诊断不是一个容易的过程，因为它涉及到不可靠的诊断测试和训练示例中的噪声。
- en: Nevertheless, association rules can be used to identify likely symptoms appearing
    together. A transaction, in this case, corresponds to a medical case, while symptoms
    correspond to items. When a patient is treated, a list of symptoms is recorded
    as one transaction.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，关联规则可以用来识别可能同时出现的症状。在这种情况下，事务对应于一个医疗案例，而症状对应于项目。当患者接受治疗时，记录的症状列表作为一个事务。
- en: Protein sequences
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 蛋白质序列
- en: A lot of research has gone into understanding the composition and nature of
    proteins; yet, many things remain to be understood satisfactorily. It is now generally
    believed that amino acid sequences of proteins are not random.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在理解蛋白质的组成和性质方面已经进行了大量的研究；然而，还有很多事情需要充分理解。现在普遍认为，蛋白质的氨基酸序列不是随机的。
- en: With association rules, it is possible to identify associations between different
    amino acids that are present in a protein. A protein is a sequence made up of
    20 types of amino acids. Each protein has a unique three-dimensional structure,
    which depends on the amino-acid sequence; a slight change in the sequence may
    change the functioning of protein. To apply association rules, a protein corresponds
    to a transaction, while amino acids and their structure correspond to the items.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 通过关联规则，可以识别蛋白质中存在的不同氨基酸之间的关联。蛋白质是由20种氨基酸组成的序列。每种蛋白质都有其独特的三维结构，这取决于氨基酸序列；序列的微小变化可能会改变蛋白质的功能。要应用关联规则，蛋白质对应于一个事务，而氨基酸及其结构对应于项目。
- en: Such association rules are desirable for enhancing our understanding of protein
    composition and hold the potential to give clues regarding the global interactions
    among some particular sets of amino acids occurring in the proteins. Knowledge
    of these association rules or constraints is highly desirable for the synthesis
    of artificial proteins.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这类关联规则对于增强我们对蛋白质组成的理解是有益的，并且有可能为蛋白质中某些特定氨基酸集合的全球相互作用提供线索。了解这些关联规则或约束对于人工蛋白质的合成是非常有价值的。
- en: Census data
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 人口普查数据
- en: Censuses make a huge variety of general statistical information about a society
    available to both researchers and general public. The information related to population
    and economic censuses can be forecasted in planning public services (education,
    health, transport, and funds) as well as in business (for setting up new factories,
    shopping malls, or banks and even marketing particular products).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 人口普查为研究人员和公众提供了关于社会的各种统计信息。与人口和经济普查相关的信息可以用于规划公共服务（教育、卫生、交通和资金）以及商业（建立新工厂、购物中心或银行，甚至营销特定产品）的预测。
- en: To discover frequent patterns, each statistical area (for example, municipality,
    city, and neighborhood) corresponds to a transaction, and the collected indicators
    correspond to the items.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 为了发现频繁模式，每个统计区域（例如，市镇、城市和社区）对应一个事务，收集的指标对应于项目。
- en: Customer relationship management
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 客户关系管理
- en: The **Customer Relationship Management** (**CRM**), as we briefly discussed
    in the previous chapters, is a rich source of data through which companies hope
    to identify the preference of different customer groups, products, and services
    in order to enhance the cohesion among their products and services and their customers.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '**客户关系管理**（CRM），正如我们在前几章中简要讨论的，是数据丰富的来源，通过这些数据，公司希望识别不同客户群体、产品和服务的偏好，以便增强其产品和服务与客户之间的凝聚力。'
- en: Association rules can reinforce the knowledge management process and allow the
    marketing personnel to know their customers well to provide better quality services.
    For example, association rules can be applied to detect a change of customer behavior
    at different time snapshots from customer profiles and sales data. The basic idea
    is to discover changes from two datasets and generate rules from each dataset
    to carry out rule matching.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 关联规则可以加强知识管理过程，并使市场营销人员更好地了解客户，以提供更优质的服务。例如，关联规则可以应用于检测从客户档案和销售数据中不同时间快照的客户行为变化。基本思想是从两个数据集中发现变化，并从每个数据集中生成规则以执行规则匹配。
- en: IT operations analytics
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IT运营分析
- en: Based on records of a large number of transactions, association rule learning
    is well-suited to be applied to the data that is routinely collected in day-to-day
    IT operations, enabling IT operations analytics tools to detect frequent patterns
    and identify critical changes. IT specialists need to see the big picture and
    understand, for example, how a problem on a database could impact an application
    server.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 基于大量交易记录，关联规则学习非常适合应用于日常IT运营中常规收集的数据，使IT运营分析工具能够检测频繁模式并识别关键变化。IT专家需要看到大局，例如，了解数据库上的问题如何影响应用服务器。
- en: For a specific day, IT operations may take in a variety of alerts, presenting
    them in a transactional database. Using an association rule-learning algorithm,
    IT operations analytics tools can correlate and detect the frequent patterns of
    alerts appearing together. This can lead to a better understanding about how one
    component impacts another.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 对于特定的一天，IT运营可能会接收各种警报，并在事务数据库中展示它们。使用关联规则学习算法，IT运营分析工具可以关联并检测同时出现的警报的频繁模式。这可以更好地理解一个组件如何影响另一个组件。
- en: With identified alert patterns, it is possible to apply predictive analytics.
    For example, a particular database server hosts a web application and suddenly
    an alert about a database is triggered. By looking into frequent patterns identified
    by an association rule-learning algorithm, this means that the IT staff need to
    take action before the web application is impacted.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 通过识别出的警报模式，可以应用预测分析。例如，一个特定的数据库服务器托管一个网络应用程序，突然触发了关于数据库的警报。通过分析关联规则学习算法识别出的频繁模式，这意味着IT人员需要在网络应用程序受到影响之前采取行动。
- en: Association rule learning can also discover alert events originating from the
    same IT event. For example, every time a new user is added, six changes in the
    Windows operating system are detected. Next, in **Application Portfolio Management**
    (**APM**), IT may face multiple alerts, showing that the transactional time in
    a database as high. If all of these issues originate from the same source (such
    as getting hundreds of alerts about changes that are all due to a Windows update),
    this frequent pattern mining can help to quickly cut through a number of alerts,
    allowing the IT operators to focus on truly critical changes.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 关联规则学习还可以发现源自同一IT事件的警报事件。例如，每次添加新用户时，都会检测到Windows操作系统的六个变化。接下来，在**应用组合管理**（**APM**）中，IT可能会面临多个警报，显示数据库中的事务时间过高。如果所有这些问题都源自同一来源（例如，收到数百个关于更改的警报，所有这些更改都归因于Windows更新），这种频繁模式挖掘可以帮助快速筛选出多个警报，使IT操作员能够专注于真正关键的变化。
- en: Summary
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned how to leverage association rule learning on transactional
    datasets to gain insight about frequent patterns. We performed an affinity analysis
    in Weka and learned that the hard work lies in the analysis of results—careful
    attention is required when interpreting rules, as association (that is, correlation)
    is not the same as causation.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何利用关联规则学习在事务数据集中获取关于频繁模式的洞察。我们在Weka中进行了亲和力分析，并了解到努力的工作在于结果分析——在解释规则时需要仔细注意，因为关联（即相关性）并不等同于因果关系。
- en: In the next chapter, we'll look at how to take the problem of item recommendation
    to the next level using a scalable machine-learning library, Apache Mahout, which
    is able to handle big data.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨如何使用可扩展的机器学习库Apache Mahout将商品推荐问题提升到下一个层次，它能够处理大数据。
