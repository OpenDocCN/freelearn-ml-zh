- en: Transforming Your Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 转换您的数据
- en: 'Real-world datasets are very varied: variables can be textual, numerical, or
    categorical, and observations can be missing, false, or wrong (outliers). To perform
    a proper data analysis, we will understand how to correctly parse data, clean
    it, and create an output matrix optimally built for machine learning analysis.
    To extract knowledge, it is essential that the reader is able to create an observation
    matrix using different techniques of data analysis and cleaning.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 实际世界的数据集非常多样：变量可以是文本的、数值的或分类的，观察值可以是缺失的、错误的或错误的（异常值）。为了进行适当的数据分析，我们将了解如何正确解析数据、清理数据并创建一个针对机器学习分析优化构建的输出矩阵。为了提取知识，读者能够使用不同的数据分析和技术创建一个观察矩阵是至关重要的。
- en: In this chapter, we'll present Cloud Dataprep, a service useful to preprocess
    the data, extract features, and clean up the records. We'll also cover Cloud Dataflow,
    a service to implement streaming and batch processing. We'll go into some practical
    details with real-life examples. We'll start from discovering different ways to
    transform data and the degree of cleaning data. We will analyze the techniques
    available for preparing the most suitable data for analysis and modeling, which
    includes imputation of missing data, detecting and eliminating outliers, and adding
    derived variables. Then we will learn how to normalize the data, in which data
    units are eliminated, allowing us to easily compare data from different locations.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍Cloud Dataprep，这是一种用于预处理数据、提取特征和清理记录的有用服务。我们还将介绍Cloud Dataflow，这是一种实现流式和批量处理的服务。我们将通过一些实际案例研究深入探讨一些细节。我们将从发现转换数据的不同方法和数据清理的程度开始。我们将分析可用于准备最适合分析和建模的数据的技术，这包括缺失数据的插补、异常值的检测和消除以及派生变量的添加。然后我们将学习如何归一化数据，其中数据单位被消除，使我们能够轻松比较来自不同位置的数据。
- en: 'In this chapter, we will be covering the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Different ways to transform data
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转换数据的不同方法
- en: How to organize data
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何组织数据
- en: Dealing with missing data
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理缺失数据
- en: Detecting outliers
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测异常值
- en: Data normalization
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据归一化
- en: At the end of the chapter, we will be able to perform data preparation so that
    its information content is best exposed to the regression tools. We'll learn how
    to apply transforming methods to our own data and how these techniques work. We'll
    discover how to clean the data, identify missing data, and work with outliers
    and missing entries. We'll also learn how to use normalization techniques to compare
    data from different locations.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，我们将能够进行数据准备，以便其信息内容能够最好地暴露给回归工具。我们将学习如何将转换方法应用于我们的数据，以及这些技术是如何工作的。我们将发现如何清理数据，识别缺失数据，以及处理异常值和缺失条目。我们还将学习如何使用归一化技术来比较来自不同位置的数据。
- en: How to clean and prepare the data
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何清理和准备数据
- en: A novice may think that once we complete collecting data and it is imported
    into Google Cloud, it is finally time to start the analysis process. Conversely,
    we must first proceed with the preparation of data (data wrangling).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 初学者可能会认为，一旦我们完成数据的收集并将其导入Google Cloud，就终于可以开始分析过程了。相反，我们必须首先进行数据的准备工作（数据整理）。
- en: Data wrangling is the process of the transformation and mapping of data, turning
    raw data into formatted data, with the intent of making it more appropriate for
    subsequent analysis operations.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 数据整理是将数据转换和映射的过程，将原始数据转换为格式化数据，目的是使其更适合后续的分析操作。
- en: This process can take a long time and it is very cumbersome, in some cases taking
    up about 80 percent of the entire data analysis process.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程可能需要很长时间，而且非常繁琐，在某些情况下，可能占整个数据分析过程的约80%。
- en: However, it is a fundamental prerequisite for the rest of the data analysis
    workflow; so it is essential to acquire the best practices in such techniques.
    Before submitting our data to any machine learning algorithm, we must be able
    to evaluate the quality and accuracy of our observations. If we do not know how
    to switch from raw data to something that can be analyzed, we cannot go ahead.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这是数据分析工作流程中的基本先决条件；因此，掌握这些技术的最佳实践至关重要。在将我们的数据提交给任何机器学习算法之前，我们必须能够评估我们观察的质量和准确性。如果我们不知道如何从原始数据转换成可分析的数据，我们就无法继续前进。
- en: Google Cloud Dataprep
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Dataprep
- en: 'For proper preparation of our data, it is necessary to perform a series of
    operations involving the use of different algorithms. As we have anticipated,
    this work can take a long time and uses many resources. Google, within the Cloud
    service, offers the ability to do this job in a simple and immediate way: Google
    Cloud Dataprep.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了正确准备我们的数据，有必要执行一系列涉及使用不同算法的操作。正如我们预料的，这项工作可能需要很长时间，并且会使用很多资源。在云服务中，Google
    提供了一种简单直接的方式来完成这项工作：Google Cloud Dataprep。
- en: It is an intelligent data service that allows you to visually explore, clean
    up, and prepare for structured and unstructured data analysis. Google Cloud Dataprep
    is serverless and works on any scale. It is not necessary to distribute or manage
    any infrastructure.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 它是一种智能数据服务，允许您直观地探索、清理和准备结构化和非结构化数据分析。Google Cloud Dataprep 是无服务器的，并且可以在任何规模上工作。不需要分发或管理任何基础设施。
- en: Google Cloud Dataprep helps to quickly prepare data for immediate analysis or
    for training machine learning models. Normally, the data has to be manually cleaned
    up; however, Google Cloud Dataprep makes the process extremely simple by automatically
    detecting schemas, types, joins, and anomalies such as missing values. With regard
    to machine learning, different ways of data cleaning are suggested that can make
    the process of data preparation quicker and less prone to errors.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataprep 有助于快速准备数据以进行即时分析或用于训练机器学习模型。通常，数据需要手动清理；然而，Google Cloud
    Dataprep 通过自动检测模式、类型、连接和异常（如缺失值）使这个过程变得极为简单。至于机器学习，建议了不同的数据清理方式，可以使数据准备过程更快且更少出错。
- en: In Google Cloud Dataprep, it is possible to define data preparation rules by
    interacting with a sample of the data. Use of the application is free. Once a
    data preparation flow has been defined, you can export the sample for free or
    run the stream as a Cloud Dataprep job, which will be subject to additional costs.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Google Cloud Dataprep 中，您可以通过与数据样本的交互来定义数据准备规则。应用程序的使用是免费的。一旦定义了数据准备流程，您可以免费导出样本或将其作为
    Cloud Dataprep 作业运行，这将产生额外的费用。
- en: 'With the use of Google Cloud Dataprep, you can perform the following operations:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Google Cloud Dataprep，您可以执行以下操作：
- en: Import data from different sources
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从不同来源导入数据
- en: Identify and remove or modify missing data
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别并删除或修改缺失数据
- en: Identify anomalous values (outliers)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别异常值（离群值）
- en: Perform searches from a dataset
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在数据集中执行搜索
- en: Normalize the values in the fields in the dataset
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准化数据集中字段中的值
- en: Merge datasets with joins
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过连接合并数据集
- en: Add one dataset to another through merge operations
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过合并操作将一个数据集添加到另一个数据集中
- en: These operations can be performed without the need for technological infrastructure
    in a very short time.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 这些操作可以在非常短的时间内无需技术基础设施的情况下执行。
- en: Exploring Dataprep console
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索 Dataprep 控制台
- en: 'The first time you log into the Google Cloud Dataprep console, you will be
    asked to accept the terms of service, log into your Google account, and choose
    a cloud storage bucket to use with Cloud Dataprep. You will also be asked to allow
    Trifacta, the third-party application host, to access project data. After completing
    these steps, you will be offered the Cloud Dataprep home page with the Flows screen
    opened, as shown in the following screenshot:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次登录 Google Cloud Dataprep 控制台时，您将被要求接受服务条款、登录您的 Google 账户并选择一个用于 Cloud Dataprep
    的云存储桶。您还将被要求允许第三方应用程序托管商 Trifacta 访问项目数据。完成这些步骤后，您将获得一个包含打开的 Flows 屏幕的 Cloud Dataprep
    主页，如下面的截图所示：
- en: '![](img/a0b5e5c5-28d7-46ec-b26e-7194ffabb172.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a0b5e5c5-28d7-46ec-b26e-7194ffabb172.png)'
- en: 'For now, the console appears empty because we have not yet performed any operation;
    it will later be populated by our operations. At the top of the Google Cloud Dataprep
    console, you can find three links that open the following pages:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，控制台看起来是空的，因为我们还没有执行任何操作；它将在以后被我们的操作填充。在 Google Cloud Dataprep 控制台顶部，您可以找到三个链接，它们可以打开以下页面：
- en: '**FLOWS**: This page shows the flows you have access to and allows you to create,
    review, and manage them. A flow is an object that allows us to gather and organize
    datasets to generate results.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**FLOWS**：此页面显示了您可访问的流程，并允许您创建、审查和管理它们。流程是一个对象，允许我们收集和组织数据集以生成结果。'
- en: '**DATASETS**: In this page, we can review the import and reference datasets
    to which we have access.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DATASETS**：在此页面上，我们可以审查我们可访问的导入和参考数据集。'
- en: '**JOBS**: In this page, we can track the status of all of our running, complete,
    or failed jobs.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**作业**：在这个页面上，我们可以跟踪所有正在运行、完成或失败的作业的状态。'
- en: 'By default, a Flows page is open. To create a new flow, click on the Create
    Flow button. The following window opens, where we can set a name and description
    for the new flow:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Flows页面是打开的。要创建一个新的流程，请点击创建流程按钮。以下窗口将打开，我们可以为新流程设置名称和描述：
- en: '![](img/aee494ae-1dfc-4270-8ef9-33f2643efdae.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/aee494ae-1dfc-4270-8ef9-33f2643efdae.png)'
- en: 'After we have done this, on the flows page, the new flow just created appears
    with suggestions of datasets that can be added to this flow to start wrangling.
    To analyze how a Google Cloud Dataprep example works, we will use a specially
    designed file that contains the data for a small sample of observation; it lists
    the results of a test. We''ll grab `CleaningData.csv`, a spreadsheet that contains
    some of the issues we just listed. After correctly identifying this file on our
    computer and having it uploaded, the following window will be displayed (transformer
    page):'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们完成这些后，在flows页面上，刚刚创建的新流程将显示，并建议可以添加到此流程的数据集以开始整理。为了分析Google Cloud Dataprep示例的工作方式，我们将使用一个专门设计的文件，该文件包含一小部分观测数据的数据；它列出了测试的结果。我们将获取`CleaningData.csv`，这是一个包含我们刚刚列出的一些问题的电子表格。在正确识别此文件并上传到我们的计算机后，将显示以下窗口（Transformer页面）：
- en: '![](img/90edebe7-dcf3-4f1e-978e-152ac39693ee.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/90edebe7-dcf3-4f1e-978e-152ac39693ee.png)'
- en: In this page, we can easily identify the data we have imported. At this point,
    we can program the transformations that we want to apply to this data. Once we
    have established what we want to do, we can immediately preview the results before
    making changes to the entire final dataset.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个页面上，我们可以轻松地识别我们已导入的数据。在这个时候，我们可以编写我们想要应用到此数据的转换。一旦我们确定了我们要做什么，我们就可以立即预览结果，然后再对整个最终数据集进行更改。
- en: 'In the Transformer page, two panels are available: Grid and Columns. By default,
    the Transformer page displays the grid panel, in which the previews of the columns
    in a columnar grid are displayed. In the columns panel, additional statistical
    information on individual columns is returned. This panel is particularly useful
    for managing anomalous values, to review average, minimum, and maximum values.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在Transformer页面上，有两个面板可用：网格和列。默认情况下，Transformer页面显示网格面板，其中以列网格的形式显示列的预览。在列面板中，返回有关单个列的附加统计信息。此面板特别适用于管理异常值，以审查平均值、最小值和最大值。
- en: From a first glance at the transformer page, you can get an idea of the data
    we have imported. In fact, we can view all fields and all observations.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 从对Transformer页面的第一眼观察中，我们可以了解我们已导入的数据。实际上，我们可以查看所有字段和所有观测值。
- en: Here, we have uploaded a file with just a few fields and observations. More
    generally, in the lower left part, we are given a summary of the number of rows,
    columns, and data types.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们上传了一个只有几个字段和观测值的文件。更普遍地说，在左下角，我们得到了行数、列数和数据类型的总结。
- en: 'From the analysis of the returned window, we can extract useful information.
    Start from the name of each column, to the left of which appears a symbol that
    identifies the type of data automatically attributed to it. In this way we can
    verify that Dataprep has cataloged the variables as follows:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 从返回窗口的分析中，我们可以提取有用的信息。从每个列的名称开始，其左侧出现一个符号，用于标识自动分配给它的数据类型。这样我们就可以验证Dataprep已将变量编目如下：
- en: '`name`: Name (String)'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`: 名称（字符串）'
- en: '`gender`: Sex (Gender)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gender`: 性别（性别）'
- en: '`age`: Age (Integer)'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`age`: 年龄（整数）'
- en: '`right1`: Percentage of right answers (Integer)'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`right1`: 正确答案的百分比（整数）'
- en: '`wrong`: Percentage of wrong answers (Integer)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`wrong`: 错误答案的百分比（整数）'
- en: 'It seems that the attribution of the data type is correct. This information
    is returned to us using the cursor. In fact, as you move the cursor around the
    page, the cursor changes when it is over a selected data element. Immediately
    down the column header, there are useful summary graphs. In the column''s data
    quality bar, the categories of values are shown. The following three types of
    values are available:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 数据类型的分配似乎正确。这些信息是通过光标返回给我们的。实际上，当你将光标在页面上的选定数据元素上移动时，光标会改变。在列标题下方立即有有用的摘要图表。在列的数据质量条上，显示了值的类别。以下三种类型的值可用：
- en: Valid
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有效
- en: Mismatched
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不匹配
- en: Missing
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缺失
- en: Then, histograms are shown to provide us with statistics about the data contained
    in each column. Further information is returned to us by passing the cursor over
    it.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，显示直方图，为我们提供有关每个列中包含的数据的统计信息。进一步的信息通过将光标移过它返回给我们。
- en: Since the values are few, we can also have a preview of all the data. Let's
    take a look to visually identify anomalies. Already, we can see that the age variable
    has one missing value. Missing values of any type of variable are indicated by
    the NA code, which means not available. The **Not a Number** (**NaN**) code, on
    the other hand, indicates invalid numeric values, such as a numeric value divided
    by zero. If a variable contains missing values, GCP cannot apply some functions
    to it. For this reason, it is necessary to process the missing values in advance.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 由于值很少，我们还可以预览所有数据。让我们看一下，以视觉上识别异常。已经可以看到，年龄变量有一个缺失值。任何类型的变量的缺失值都由 NA 代码表示，这意味着不可用。另一方面，**非数字**（**NaN**）代码表示无效的数值，例如零除以数值。如果一个变量包含缺失值，GCP
    无法对其应用某些函数。因此，有必要提前处理缺失值。
- en: On the transformation page, you can see that when you hover your mouse over
    the areas and related panels, a light bulb icon appears next to the cursor to
    indicate that suggestions are available.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在转换页面上，你可以看到当你将鼠标悬停在区域和相关面板上时，光标旁边会出现一个灯泡图标，以指示有建议可用。
- en: 'On the left of each column header, you can see a drop-down column menu. With
    the help of this menu, we can perform several actions on the column data such
    as changing its data type, depending on the column data type. The following actions
    are available:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个列标题的左侧，你可以看到一个下拉列菜单。借助此菜单，我们可以对列数据进行多项操作，例如根据列数据类型更改其数据类型。以下操作可用：
- en: 'Rename: Rename the column'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重命名：重命名列
- en: 'Change type: Change the data type of the column'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改类型：更改列的数据类型
- en: 'Move: Move the column to the beginning or end, or to a specified location in
    the dataset'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动：将列移动到开始或结束位置，或移动到数据集中的指定位置
- en: 'Edit column: Perform a series of edits to the column'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑列：对列执行一系列编辑
- en: 'Column Details: Explore the interactive profile of the column details'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列详情：探索列详情的交互式配置文件
- en: 'Show related steps: Highlight steps in the Recipe panel where the selected
    column is referenced'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示相关步骤：在配方面板中突出显示引用所选列的步骤
- en: 'Find: Find and replace specific values or extract patterned values from the
    column'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找：查找并替换特定值或从列中提取模式值
- en: 'Filter: Filter the rows of the dataset based on literal or computed values
    from the column'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过滤：根据列的文本书面值或计算值过滤数据集的行
- en: 'Clean: Clean the mismatched or missing values in the column, replacing values
    with fixed or computed values or removing the rows altogether'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清理：清理列中的不匹配或缺失值，用固定或计算值替换值或删除整个行
- en: 'Formula: Generate a new column containing the values computed from the source
    column based on the selected function'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公式：根据所选函数从源列生成包含计算值的新的列
- en: 'Aggregate: Generate a summary table based on computations aggregated across
    groups, or add summary data as a new column in the current table'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聚合：根据跨组的计算生成汇总表，或将汇总数据作为新列添加到当前表中
- en: 'Restructure: Change the structure of the dataset based on the values of the
    column'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新结构化：根据列的值更改数据集的结构
- en: 'Lookup: Perform a lookup of the column values against a set of values in another
    column of another dataset'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找：在另一个数据集的另一列的值集中查找列值
- en: 'Delete: Remove the column from the dataset'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除：从数据集中删除列
- en: 'The following screenshot shows the Column menu for the gender column:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了性别列的列菜单：
- en: '![](img/d9022727-6992-42c2-904b-d939955357d5.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d9022727-6992-42c2-904b-d939955357d5.png)'
- en: When selecting a column, a new suggestion panel opens to the right of the Transformer
    page. This panel shows a series of suggestions relevant to the type of data contained
    in the specific column. Suggestions vary depending on the selected data. By hovering
    over any of the suggestions, you can preview the results in the data grid to ensure
    that the proposed transformation works for the dataset. In the next section, we
    will be able to expand the use of the suggestion panel.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 当选择一列时，Transformer 页面右侧会打开一个新的建议面板。此面板显示一系列与特定列中包含的数据类型相关的建议。建议根据所选数据而变化。通过悬停在任何一个建议上，你可以在数据网格中预览结果，以确保所提出的转换适用于数据集。在下一节中，我们将能够扩展建议面板的使用。
- en: Removing empty cells
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除空单元格
- en: From a visual analysis of the imported data, we detect an empty cell at the
    third row and second column; this indicates the presence of a missing value. It
    is necessary to eliminate this anomaly before you can analyze the dataset.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 从导入数据的视觉分析中，我们检测到第三行第二列有一个空单元格；这表明存在缺失值。在分析数据集之前，有必要消除这个异常。
- en: In this case, identifying the empty cell was particularly easy given the small
    amount of data; in the case of large datasets, visual analysis does not work.
    Therefore, to identify missing values, ​​we can analyze the data quality bar.
    Here, the missing values ​​are identified in black.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，由于数据量小，识别空单元格特别容易；在大型数据集的情况下，视觉分析不起作用。因此，为了识别缺失值，我们可以分析数据质量条。在这里，缺失值用黑色标识。
- en: 'To get a preview on the number of missing data, we can move our cursor over
    the black part of the data quality bar; the number of missing data is returned,
    as shown in the following screenshot:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 要预览缺失数据的数量，我们可以将鼠标移到数据质量条的黑色部分；会返回缺失数据的数量，如下面的截图所示：
- en: '![](img/e3566a19-5274-47b8-91e0-437ef7d89e47.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/e3566a19-5274-47b8-91e0-437ef7d89e47.png)'
- en: 'We have confirmed the presence of a missing value in the gender field. Recall
    that a missing value is a value that contains no content or is non-existent. These
    missing values may be due to a series of occurrences:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经确认性别字段存在缺失值。回想一下，缺失值是指不包含内容或不存在的内容的值。这些缺失值可能是由一系列事件引起的：
- en: Errors in the creation of the dataset; the values have been entered incorrectly,
    leaving empty cells
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集创建中的错误；值输入错误，留下了空单元格
- en: The dataset contains fields created automatically with cells that do not contain
    values
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集包含自动创建的字段，其中单元格不包含值
- en: The result of an impossible calculation
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不可能计算的后果
- en: 'Now, if we select the gender column, a new suggestion panel opens to the right
    of the Transformer page. As stated in the previous section, this panel shows a
    series of suggestions relevant to the type of data contained in the specific column.
    Several suggestions are proposed:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们选择性别列，一个新建议面板会在转换器页面右侧打开。如前所述，此面板显示一系列与特定列中包含的数据类型相关的建议。提出了几个建议：
- en: Delete columns
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除列
- en: Rename
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重命名
- en: Aggregate and group data
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聚合和分组数据
- en: Create a new column
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建新列
- en: Set
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置
- en: Values to columns
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将值添加到列中
- en: 'When we hover over different suggestions, a mini-preview appears to the left
    of each suggestion, as shown in the following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们悬停在不同的建议上时，每个建议的左侧都会出现一个迷你预览，如下面的截图所示：
- en: '![](img/93e688d2-4b81-48f0-b484-1858ebb93b14.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/93e688d2-4b81-48f0-b484-1858ebb93b14.png)'
- en: 'In the suggestion panel, a specific text called missing value to appears, meaning
    that the missing values identified in the column can be replaced with something
    else. By clicking on the Set item, two buttons appear: Edit and Add. By clicking
    on the Edit button a new box is opened; a new formula is proposed in this box
    as follows:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在建议面板中，出现一个特定的文本“缺失值”，这意味着在列中识别出的缺失值可以被其他内容替换。通过点击“设置”项，会出现两个按钮：编辑和添加。点击编辑按钮会打开一个新框；在这个框中提出了以下新公式：
- en: '[PRE0]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The missing function writes out a specified value if the source value is a
    null or missing value. Upon inserting the `NA` string between the quotation marks,
    every time a missing value is identified in the column, it will be replaced by
    the `NA` value. After having modified the formula, we will be able to see a preview
    of the column in real time as modified by the formula applied; this is shown in
    the following screenshot:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 缺失函数会在源值是空或缺失值时写入指定的值。在引号之间插入“NA”字符串后，每次在列中识别到缺失值时，它将被替换为“NA”值。修改公式后，我们将能够实时预览列，这是由应用公式修改的；如下面的截图所示：
- en: '![](img/b58b06cc-b3c5-46a6-8633-ba7a710510b3.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/b58b06cc-b3c5-46a6-8633-ba7a710510b3.png)'
- en: Now, to apply this suggestion, just click on the Add button in the suggestions
    panel. In this way, a new step will be added to the Recipe panel.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，要应用这个建议，只需在建议面板中点击“添加”按钮。这样，就会在配方面板中添加一个新的步骤。
- en: Note that the Recipe panel allows us to review and modify the steps of the recipe
    we have created so far, but, at the same time, it allows us to add new ones. If
    the panel is not displayed, to make it appear, just click on the icon (Recipe)
    at the top left of the Run Job button.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，配方面板允许我们回顾和修改迄今为止创建的配方步骤，同时，它还允许我们添加新的步骤。如果面板没有显示，要使其出现，只需点击运行作业按钮左上角的图标（配方）。
- en: To generate a new set of suggestions on different columns, click on Cancel.
    Then, select a different set of columns or values within a column; in this way,
    a new suggestions panel will be opened.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 要为不同的列生成一组新的建议，请点击取消。然后，选择列中的一组不同的列或值；这样，就会打开一个新的建议面板。
- en: Replacing incorrect values
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 替换不正确的值
- en: 'The next step will allow us to replace the incorrect value indicators. If we
    take a look at the data again, we will see that in the age column, the value `-19`
    is displayed. That''s obviously an incorrect value since for that variable, permissible
    values are greater than zero (this is an age):'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步将允许我们替换不正确的值指示符。如果我们再次查看数据，我们会看到在年龄列中显示的值是`-19`。这显然是一个不正确的值，因为对于这个变量，允许的值大于零（这是一个年龄）：
- en: '[PRE1]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We can replace this value with the missing value indicator, `NA`. To do this,
    we will write the following formula in the set suggestions:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以用缺失值指示符`NA`替换这个值。为此，我们将在设置建议中写下以下公式：
- en: '[PRE2]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: A new step will be added to the Recipe panel immediately after the one created
    in the previous section. At the same time, we can see a preview of the changes
    made on the dataset. The incorrect value is no longer present; in its place, there
    is a further `NA` value.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节创建的步骤之后，将立即在配方面板中添加一个新步骤。同时，我们可以看到对数据集所做的更改预览。不正确的值不再存在；取而代之的是进一步的`NA`值。
- en: 'The same result can be obtained by operating directly in the Recipe panel:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过直接在配方面板中操作来获得相同的结果：
- en: Remember that to open the Recipe panel, you can just click on the icon (Recipe)
    at the top left of the Run Job button
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 记住，要打开配方面板，只需点击运行作业按钮左上角的图标（配方）。
- en: Click on the New Step button; the Transform Builder is opened
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击新建步骤按钮；转换构建器被打开
- en: In the Transformation drop-down menu, select Apply formula in the list of available
    transforms
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在转换下拉菜单中，从可用的转换中选择应用公式
- en: Specify the Columns (age)
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定列（年龄）
- en: Edit the formula required in the Formula box
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在公式框中编辑所需的公式
- en: Click on the Add button
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加按钮
- en: A new step is added to the Recipe panel
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在配方面板中添加新步骤
- en: 'In the following screenshot, we can see the Transform Builder:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的截图中，我们可以看到转换构建器：
- en: '![](img/ad88eb70-7ee6-4c82-882c-fefef615521c.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ad88eb70-7ee6-4c82-882c-fefef615521c.png)'
- en: The result obtained is identical to the result we obtained by writing the formula
    in the set suggestions; even in this case, a negative value will no longer be
    present in the age column.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 获得的结果与我们通过在设置建议中编写公式获得的结果相同；在这种情况下，年龄列中也不再存在负值。
- en: Mismatched values
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 不匹配的值
- en: A mismatched value is any value that seems to be of a different data type than
    the type specified for the column. In the database we are analyzing at this point,
    there are several values that seem to deviate from the type attributed to the
    column. For example, in the right column is a cell that contains a dot; it is
    clear that this is an error in the phase of populating the database. It is equally
    clear that such a value can cause many problems during the analysis phase, which
    is why it must be appropriately dealt with.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 任何看起来与列指定的数据类型不同的值都被视为不匹配的值。在我们目前分析的这个数据库中，有几个值似乎偏离了分配给列的类型。例如，在右侧列中有一个包含点的单元格；很明显，这是在填充数据库阶段的一个错误。同样明显的是，这样的值在分析阶段可能会引起很多问题，因此必须适当地处理。
- en: 'As seen for missing values, mismatched values are also represented in the data
    quality bar at the top of each column. In the data quality bar, mismatched values
    are identified in red, as shown in the following screenshot:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 如同处理缺失值一样，不匹配的值也显示在每列顶部的数据质量条上。在数据质量条中，不匹配的值用红色标识，如下面的截图所示：
- en: '![](img/18b327ab-a0fd-4219-951c-716eca582790.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/18b327ab-a0fd-4219-951c-716eca582790.png)'
- en: 'To fix mismatched data, there are several options available:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要修复不匹配的数据，有几种选项可用：
- en: Change the data type
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改数据类型
- en: Replace the values with constant values
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用常数值替换值
- en: Set the values with other columns' values
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用其他列的值设置值
- en: Transform the data with functions
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用函数转换数据
- en: Delete rows
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除行
- en: Hide the column for now
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 暂时隐藏该列
- en: Drop the column
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除列
- en: In this case, since two of the selected lines contain mismatched data in other
    columns too, we will eliminate all three columns. To do this, simply click on
    the Add button in the Delete rows area of the suggestions panel.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，由于选中的两行在其他列中也存在不匹配的数据，我们将删除所有三列。为此，只需在建议面板的删除行区域点击添加按钮。
- en: Analyzing the dataset, we can see that mismatched data is still present. In
    fact, the data quality bar in the age column has an area in red. We try to fix
    this problem too. This time it is not appropriate to delete the entire row. In
    fact, by analyzing the first column, we can see that the `NA` value refers to
    a line whose name is clearly referring to a female (Olivia). So the most appropriate
    solution is to replace this value with a known value, in this case with `'F'`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 分析数据集，我们可以看到不匹配的数据仍然存在。实际上，年龄列中的数据质量条在红色区域。我们试图解决这个问题。这次不适宜删除整行。实际上，通过分析第一列，我们可以看到`NA`值指的是一个名字明显指代女性的行（Olivia）。所以最合适的解决方案是将这个值替换为已知值，在这种情况下是`'F'`。
- en: 'To do this, we will write the following formula in the set item of the suggestions
    panel:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点，我们将在建议面板的集合项中写下以下公式：
- en: '[PRE3]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: A new step will be added to the Recipe panel. Once again, we can see a preview
    of the changes made to the dataset. In fact, we can see that the wrong value is
    no longer present; in its place, there is an `'F'`.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 将在配方面板中添加一个新步骤。再次，我们可以看到对数据集所做的更改的预览。实际上，我们可以看到错误值不再存在；取而代之的是`'F'`。
- en: 'We have so far adjusted several things, but at first glance, there is still
    something to be done. If we pay attention to the right1 column, which represents
    the percentage of correct answers provided, we notice that the range of values
    is as follows: -19 to 98\. But -19 is obviously an incorrect value since for that
    variable, the permissible values are between 0 and 100 (this is a percentage).
    We can assume that a minus sign was added by mistake when creating the dataset.
    We can then modify this value, leaving only the value 19.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经调整了几个方面，但乍一看，还有一些事情要做。如果我们注意右1列，它代表提供的正确答案的百分比，我们会注意到值的范围如下：-19到98。但-19显然是一个错误值，因为这个变量的允许值在0到100之间（这是一个百分比）。我们可以假设在创建数据集时错误地添加了负号。然后我们可以修改这个值，只留下值19。
- en: 'To do this, we perform the following steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点，我们执行以下步骤：
- en: Open the Recipe panel. Just click on the icon (Recipe) at the top left of the
    Run Job button.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开配方面板。只需点击运行作业按钮左上角的图标（配方）。
- en: Click on the New Step button. The Transform Builder is opened.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“新建步骤”按钮。打开转换构建器。
- en: In the Transformation drop-down menu, select Apply formula in the list of available
    transforms.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在转换下拉菜单中，从可用转换列表中选择应用公式。
- en: Specify the Columns (right).
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定列（右侧）。
- en: 'Edit the following formula in the formula box:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在公式框中编辑以下公式：
- en: '`IF($col==-19,19,$col)`'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`IF($col==-19,19,$col)`'
- en: Click on the Add button.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加”按钮。
- en: A new step is added to the Recipe panel.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在配方面板中添加了一个新步骤。
- en: 'The operations we have added to the Recipe panel are five, as shown in this
    screenshot:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们添加到配方面板中的操作有五个，如本截图所示：
- en: '![](img/7c39eaff-8aa3-476d-b292-b8d4016d7185.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7c39eaff-8aa3-476d-b292-b8d4016d7185.png)'
- en: By analyzing the Recipe panel, we then have a summary of the actions we have
    planned on the dataset. Moreover, a visual analysis of the dataset preview with
    the changes made does not show any anomalies to be fixed. In the data quality
    bar at the top of each column, no red/black zones are highlighted, although it's
    too early to party yet! The data preparation work is far from done.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析配方面板，我们随后对数据集上计划采取的行动有一个总结。此外，对数据集预览所做的更改的视觉分析没有显示任何需要修复的异常。在每列顶部的数据质量条上，没有红色/黑色区域被突出显示，尽管现在还为时尚早！数据准备的工作还远未完成。
- en: Finding outliers in the data
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在数据中寻找异常值
- en: Outliers are the values that, compared to others, are particularly extreme (a
    value clearly distant from the other available observations). The presence of
    outliers causes a hindrance because they tend to distort the results of data analysis,
    in particular in descriptive statistics and correlations. It is ideal to identify
    these outliers in the data cleaning phase itself; however, they can also be dealt
    with in the next step of the data analysis. Outliers can be univariate when they
    have an extreme value for a single variable, or multivariate when they have an
    unusual combination of values for a number of variables.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值是与其他值相比特别极端的值（一个明显远离其他可用观察值的值）。异常值的存在造成阻碍，因为它们往往会扭曲数据分析的结果，特别是在描述性统计和相关性中。在数据清洗阶段本身识别这些异常值是理想的；然而，它们也可以在数据分析的下一步中处理。异常值可以是单变量的，当它们对于单个变量具有极端值时，或者多变量的，当它们对于多个变量具有不寻常的值组合时。
- en: Outliers are the extreme values of a distribution that are characterized by
    being extremely high or extremely low compared to the rest of the distribution,
    thus representing isolated cases in respect to the rest of the distribution.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 异常值是分布的极端值，与分布中的其他值相比，其极端高或极端低，因此相对于其他分布而言是孤立案例。
- en: There are different methods to detect outliers. Google Cloud Dataprep uses Tukey's
    method, which uses the **interquartile range** (**IQR**) approach. This method
    is not dependent on the distribution of the data and ignores the mean and the
    standard deviation, which are influenced by outliers.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 检测异常值有不同的方法。Google Cloud Dataprep 使用 Tukey 的方法，该方法采用 **四分位距**（**IQR**）方法。这种方法不依赖于数据的分布，并忽略了受异常值影响的平均值和标准差。
- en: As said before, to determine the outlier values, refer to the IQR given by the
    difference between the 25th percentile and the 75th percentile, that is, the amplitude
    of the range within which it falls. These 50 percent of observations occupy the
    central positions in the ordered series of data. An outlier is a value with positive
    deviation from the 75th percentile greater than two times the IQR or, symmetrically,
    a value with a negative deviation from the 25th percentile (in absolute value)
    greater than two times the IQR.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，为了确定异常值，参考由第 25 百分位数和第 75 百分位数之间的差异给出的 IQR，即它所在的范围的幅度。这 50% 的观测值占据了有序数据系列中的中心位置。异常值是相对于其他分布而言，偏离第
    75 百分位数（正值）大于两倍 IQR 的值，或者对称地，是偏离第 25 百分位数（绝对值）大于两倍 IQR 的值。
- en: 'Practically, an outlier value is either of these two:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，异常值可以是以下两种情况之一：
- en: '[PRE4]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: To identify outliers in individual columns, Google Cloud Dataprep has visual
    functionality and statistical information.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 要在单个列中识别异常值，Google Cloud Dataprep 提供了视觉功能和统计信息。
- en: Visual functionality
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视觉功能
- en: Previously, we have talked about the histogram at the top of each column. This
    graph displays the count of each value detected in the column (for string data)
    or the count of values ​​within a numeric range (for numerical data).
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 此前，我们已讨论过每列顶部的直方图。此图显示了列中检测到的每个值的计数（对于字符串数据）或数值范围内的值的计数（对于数值数据）。
- en: The visual functionality offered by Google Cloud Dataprep refers precisely to
    the use of these histograms to identify unusual values ​​or outliers, which should
    be removed or corrected before performing any analysis on the entire dataset.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataprep 提供的视觉功能正是使用这些直方图来识别异常值或异常值，这些值在执行整个数据集上的任何分析之前应被移除或修正。
- en: The type of histogram returned depends on the type of data contained in the
    column. In fact, for numeric data, each bar refers to a range of values ​​and
    the bars are sorted in numerical order. For categorical types, each vertical bar
    covers a single value, ordered by the values ​​that occur most frequently.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 返回的直方图类型取决于列中包含的数据类型。实际上，对于数值数据，每个条形图代表一个值范围，条形图按数值顺序排序。对于分类类型，每个垂直条形图覆盖单个值，按出现频率最高的值排序。
- en: By moving the mouse over a bar of the histogram, a series of information is
    returned. In this way, we can highlight specific values, obtaining the count of
    a value and the percentage that that value represents in the total count of values
    ​​in the column. We can also select a specific bar; in this case, the rows containing
    them are highlighted and the suggestion panel is displayed for the management
    of these values.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 将鼠标移至直方图的条形图上，会返回一系列信息。这样，我们可以突出显示特定值，获取该值的计数以及该值在列中所有值总计数中的百分比。我们还可以选择特定的条形图；在这种情况下，包含它们的行会被突出显示，并显示建议面板以管理这些值。
- en: 'To select different bars at the same time:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 要同时选择不同的条形图：
- en: Use *Ctrl* + click to select multiple bars
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 *Ctrl* + 点击来选择多个条形图
- en: Click and drag over a range of bars
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击并拖动选择一系列条形图
- en: 'To better understand the usefulness of this visual functionality, let us refer
    to an example. In particular, we will analyze the dataset already used in the
    previous sections, which we have already had the opportunity to modify. Let''s
    take a look at the age column, as it is currently presented in the preview offer
    with the changes already made effective. We can see that the histogram has four
    bars grouped on the left and only one bar isolated on the right. This particular
    form of the histogram is identifying the presence of an outlier, as shown in the
    following screenshot:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解这种视觉功能的有用性，让我们参考一个例子。特别是，我们将分析在前面章节中已经使用过的数据集，我们已经有机会对其进行修改。让我们看一下年龄列，因为它目前在预览报价中呈现，并且已经生效了更改。我们可以看到直方图有四个条形在左侧分组，只有一个条形在右侧孤立。这种直方图形式表明存在异常值，如下面的截图所示：
- en: '![](img/5a952016-9736-401b-8b8d-57f5a358f8c9.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5a952016-9736-401b-8b8d-57f5a358f8c9.png)'
- en: In this case, the presence of the anomalous value is evident; more generally,
    the presence of bars isolated at the ends of the graph must alert us.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，异常值的出现是明显的；更普遍地说，图表两端孤立条形的存在必须引起我们的注意。
- en: If a dataset contains multiple instances of outliers, it is necessary to further
    investigate. Generally, if the dataset contains a large number of outliers, it
    is necessary to review these values and their data in other columns before performing
    operations to modify or remove these rows, since the removal of these values can
    become statistically significant.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果数据集包含多个异常值实例，则有必要进一步调查。通常，如果数据集包含大量异常值，则在执行修改或删除这些行的操作之前，有必要审查这些值及其在其他列中的数据，因为删除这些值可能变得具有统计学意义。
- en: Statistical information
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 统计信息
- en: 'The visual analysis we have done so far does not allow us to easily identify
    the presence of outliers in some cases. To obtain more information, we can examine
    detailed statistics of the values in the currently selected column, including
    data on outliers, available in the Column Details panel. To open the Column Details
    panel, just select Column Details from the drop-down menu of a column; the following
    panel is opened:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 我们到目前为止所进行的视觉分析在某些情况下并不允许我们轻松地识别异常值的存在。为了获得更多信息，我们可以检查当前选定列的详细统计数据，包括在列详细信息面板中可用的异常值数据。要打开列详细信息面板，只需从列的下拉菜单中选择列详细信息；以下面板将被打开：
- en: '![](img/a724a0ff-cc64-4690-890d-80a5c9779b4c.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a724a0ff-cc64-4690-890d-80a5c9779b4c.png)'
- en: 'In this panel, a lot of information is available, some of which is as follows:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个面板中，有很多信息可用，以下是一些信息：
- en: Summary stats the count of valid (unique and outliers), mismatched, and missing
    values
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概述统计：有效（唯一和异常）值的计数、不匹配值和缺失值
- en: Statistics means you get many options such as, min, max, average, lowest and
    highest quartiles, median, and standard deviation
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统计意味着你可以获得许多选项，如最小值、最大值、平均值、最低和最高四分位数、中位数和标准差
- en: Value histogram
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值直方图
- en: Top values
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最高值
- en: Outliers
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常值
- en: In this case, any outliers are clearly identified and indicated. Furthermore,
    the histogram is now much more precise, clearly indicating the arrangement of
    the bars.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，任何异常值都被清楚地识别并标记出来。此外，直方图现在更加精确，清楚地指示条形的排列。
- en: Removing outliers
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除异常值
- en: So far we have seen different techniques for identifying possible outliers.
    What should we do after identifying them? After identifying the values ​​that
    are outliers in the column, you need to determine whether these values ​​are valid
    or invalid for the dataset.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经看到了识别可能异常值的不同技术。在识别它们之后我们应该做什么？在确定列中的值是异常值之后，需要确定这些值对于数据集是否有效或无效。
- en: If these are invalid values ​​due to an error in the population phase of the
    dataset, then we must correct them. This operation may involve the replacement
    of this value with a presumably valid one or the removal of the entire row. In
    this latter case, we must pay attention to the weight that this action can have
    on the whole dataset.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些值无效是由于数据集人口统计阶段的错误导致的，那么我们必须纠正它们。这个操作可能涉及用可能有效的值替换这个值，或者删除整行。在后一种情况下，我们必须注意这个操作对整个数据集可能产生的影响。
- en: 'To replace the value `100`, which seems to us an invalid value in all respects
    (maybe it was `10` and an extra zero was added), we can insert the following formula:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 为了替换看起来在所有方面都无效的值`100`（可能原本是`10`，多加了一个零），我们可以插入以下公式：
- en: '[PRE5]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Instead, if the removal of this record does not assume statistically significant
    importance, we can adopt a simple erasing instruction, as shown here:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，如果删除此记录在统计上没有显著的重要性，我们可以采用简单的擦除指令，如下所示：
- en: '[PRE6]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'If the data seems valid (in reality, a 100-year age is possible for human beings),
    we can leave it as it is. Or we can convert it into a value that seems to us to
    be statistically more significant. For example, we can decide to replace this
    value with the average value of the entire column so as to preserve at least the
    information of this observation derived from the other columns. To replace 100
    with the average value of the column, use the following formula:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 如果数据看起来有效（实际上，人类可能有一百年的寿命），我们可以保持原样。或者我们可以将其转换为对我们来说在统计上更有意义的值。例如，我们可以决定用整个列的平均值替换这个值，以保留至少从其他列中得到的这个观察结果的信息。要用列的平均值替换100，请使用以下公式：
- en: '[PRE7]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Ultimately we choose the first option, so `100` will be replaced with `10`
    in the age column. To do this, we insert (as always) the formula just proposed
    in a new step, as shown in the following screenshot:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 最终我们选择了第一个选项，所以年龄列中的`100`将被替换为`10`。为此，我们（像往常一样）在新的步骤中插入刚刚提出的公式，如下面的屏幕截图所示：
- en: '![](img/af8b0974-b7d0-4420-9d07-e9a64ada601d.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/af8b0974-b7d0-4420-9d07-e9a64ada601d.png)'
- en: 'To view a preview of the change made, click on the Add button and a new step
    will be added to our Recipe panel. In the screenshot, we can also verify that
    now the range of values has been significantly reduced: 10 to 32 instead of 15
    to 100\. Not only that, but also the histogram no longer has bars isolated at
    the end.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看更改的预览，请点击“添加”按钮，新的步骤将被添加到我们的配方面板中。在屏幕截图中，我们还可以验证现在值的范围已经显著减少：从10到32，而不是从15到100。不仅如此，直方图也不再在末端有孤立的长条。
- en: Run Job
  id: totrans-189
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行作业
- en: 'We have planned several operations on our database: it is time to make these
    changes. To do this, just click on Run Job on the Transformer page. In this way,
    the Run Job page will be open, where we can specify transformation and profiling
    jobs for the currently loaded dataset. Available options include output formats
    and output destinations.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经在数据库上计划了几个操作：现在是时候做出这些改变了。为此，只需在Transformer页面上点击“运行作业”。这样，就会打开“运行作业”页面，在那里我们可以为当前加载的数据集指定转换和概要分析作业。可用的选项包括输出格式和输出目的地。
- en: The Profile Results option allows us to generate a visual result profile. The
    visual profile is very useful for examining the problems of our recipe and iterating,
    even if it is a process that requires a lot of resources. If the dataset we are
    processing is large, disabling the profiling of the results can improve the overall
    execution speed of the job.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: “概要结果”选项允许我们生成可视化的结果概要。可视化概要对于检查我们的配方问题并进行迭代非常有用，即使这是一个需要大量资源的流程。如果我们正在处理的数据集很大，禁用结果概要可以提高作业的整体执行速度。
- en: After setting the available options correctly, we can queue the specified job
    for execution by simply clicking Run Job. Once this is done, the job is queued
    for processing. At the end of the process, you can view the results of successful
    runs using the Dataset Details page.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 在正确设置可用选项后，我们可以通过简单地点击“运行作业”来排队指定的作业以供执行。一旦完成，作业就会排队等待处理。在处理结束时，您可以使用数据集详细信息页面查看成功运行的作业结果。
- en: 'Flow processing times depend on the availability of the server and the size
    of the dataset. In our case, the dataset is really small, so we just have to wait
    for the service to become available. Click on View Results to open the job on
    the Job Results page, as shown in the following screenshot:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 流处理时间取决于服务器可用性和数据集的大小。在我们的案例中，数据集确实很小，所以我们只需等待服务可用。点击“查看结果”以在作业结果页面上打开作业，如下面的屏幕截图所示：
- en: '![](img/ccfb166f-33cb-472e-9e6f-5ac822879874.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ccfb166f-33cb-472e-9e6f-5ac822879874.png)'
- en: In the previous screenshot (Job Results page), it is possible to review the
    effects of the transformation recipe on the entire dataset. Statistics and data
    histograms are available that provide general visibility on the quality of our
    transformation recipe.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的屏幕截图（作业结果页面）中，可以查看转换配方对整个数据集的影响。提供了统计信息和数据直方图，这些信息可以提供对我们转换配方质量的总体可见性。
- en: At the top of the screenshot on the left, you can find a series of summary information
    on the data contained in the generated dataset. In particular, the counts of valid
    values, non-corresponding values, and missing values are shown. These values are
    shown in full for the entire dataset.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在截图左上角，你可以找到关于生成数据集中包含的数据的一系列总结信息。特别是，显示了有效值的计数、不匹配值和缺失值的数量。这些值在整个数据集中以完整形式显示。
- en: A series of summary information on the work performed always appears in the
    upper part of the screenshot, but this time you can find it on the right.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在截图的上部，总是会出现一系列关于所执行工作的总结信息，但这次你可以在右侧找到它。
- en: In the lower part of the screenshot, we can visualize the details of the transformations
    made on the single columns. Depending on the data type of the column, the information
    about the variables is displayed.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在截图的下部，我们可以可视化对单个列进行的变换细节。根据列的数据类型，会显示变量的信息。
- en: 'Finally, in the upper part of the screenshot, on the right, there are two buttons:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在截图右上角的上部，有两个按钮：
- en: '**View Dependencies**: To see the recipes and datasets on which the job depends'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查看依赖项**：要查看作业所依赖的配方和数据集'
- en: '**Export Results**: To export the results'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导出结果**：要导出结果'
- en: Scale of features
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 特征缩放
- en: Data scaling is a preprocessing technique usually employed before feature selection
    and classification. Many artificial intelligence-based systems use features that
    are generated by many different feature extraction algorithms, with different
    kinds of sources. These features may have different dynamic ranges. Popular distance
    measures, such as Euclidean distance, implicitly assign more weighting to features
    with large ranges than those with small ranges. Feature scaling is thus required
    to approximately equalize ranges of the features and make them have approximately
    the same effect in the computation of similarity.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 数据缩放是一种通常在特征选择和分类之前使用的预处理技术。许多基于人工智能的系统使用由许多不同的特征提取算法生成的特征，这些算法来自不同的来源。这些特征可能具有不同的动态范围。流行的距离度量，如欧几里得距离，隐含地给范围较大的特征比范围较小的特征更多的权重。因此，特征缩放是必要的，以大致相等化特征的范围，并使它们在相似度计算中具有大约相同的影响。
- en: In addition, in several data mining applications with huge numbers of features
    with large dynamic ranges, feature scaling may improve the performance of the
    fitting model. However, the appropriate choice of these techniques is an important
    issue. This is because applying scaling on the input could change the structure
    of data and thereby affect the outcome of multivariate analysis used in data mining.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在具有大量特征和较大动态范围的数据挖掘应用中，特征缩放可能会提高拟合模型的性能。然而，选择这些技术是重要的问题。这是因为对输入进行缩放可能会改变数据的结构，从而影响数据挖掘中使用的多元分析的结果。
- en: So far, we have worked on the data to correct any errors or omissions. We can
    say that at this point all variables contained in the dataset are complete with
    consistent data. What about different variables characterized by different ranges
    and units? There can be variables in a data frame where values for one feature
    could range from 1 to 10 and values for another feature could range from 1 to
    1,000.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经对数据进行处理，纠正了任何错误或遗漏。我们可以这样说，在这个阶段，数据集中包含的所有变量都是完整的，并且数据是一致的。那么，具有不同范围和单位的变量呢？在数据框中可能存在变量，其中一个特征的值可能从1到10，而另一个特征的值可能从1到1,000。
- en: 'In data frames such as these, owing to mere greater numeric range, the impact
    on response variables by the feature having greater numeric range could be more
    than the one having less numeric range, and this could, in turn, impact prediction
    accuracy. Our goal is to improve predictive accuracy and not allow a particular
    feature to impact the prediction due to a large numeric value range. Thus, we
    may need to scale values under different features such that they fall under a
    common range. Through this statistical procedure, it is possible to compare identical
    variables belonging to different distributions, but also different variables,
    or variables expressed in different units. Two methods are usually well known
    for rescaling data: normalization and standardization.'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 'In data frames such as these, owing to mere greater numeric range, the impact
    on response variables by the feature having greater numeric range could be more
    than the one having less numeric range, and this could, in turn, impact prediction
    accuracy. Our goal is to improve predictive accuracy and not allow a particular
    feature to impact the prediction due to a large numeric value range. Thus, we
    may need to scale values under different features such that they fall under a
    common range. Through this statistical procedure, it is possible to compare identical
    variables belonging to different distributions, but also different variables,
    or variables expressed in different units. Two methods are usually well known
    for rescaling data: normalization and standardization.'
- en: Remember, it is good practice to rescale the data before training a machine
    learning algorithm. With rescaling, data units are eliminated, allowing you to
    easily compare data from different locations.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: Remember, it is good practice to rescale the data before training a machine
    learning algorithm. With rescaling, data units are eliminated, allowing you to
    easily compare data from different locations.
- en: Min–max normalization
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Min–max normalization
- en: 'Min-max normalization (usually called **feature scaling**) performs a linear
    transformation on the original data. This technique gets all the scaled data in
    the range (0, 1). The formula to achieve this is the following:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 'Min-max normalization (usually called **feature scaling**) performs a linear
    transformation on the original data. This technique gets all the scaled data in
    the range (0, 1). The formula to achieve this is the following:'
- en: '![](img/545d977f-9de2-4280-b08a-0436149980c5.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/545d977f-9de2-4280-b08a-0436149980c5.png)'
- en: Min-max normalization preserves the relationships among the original data values.
    The cost of having this bounded range is that we will end up with smaller standard
    deviations, which can suppress the effect of outliers.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: Min-max normalization preserves the relationships among the original data values.
    The cost of having this bounded range is that we will end up with smaller standard
    deviations, which can suppress the effect of outliers.
- en: To better understand how to perform a min-max normalization, just analyze an
    example. We will use a dataset contained in the `Airquality.csv` file.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: To better understand how to perform a min-max normalization, just analyze an
    example. We will use a dataset contained in the `Airquality.csv` file.
- en: 'This dataset is available at the UCI machine learning repository, a large collection
    of data, at the following link: [https://archive.ics.uci.edu/ml/index.php](https://archive.ics.uci.edu/ml/index.php).'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 'This dataset is available at the UCI machine learning repository, a large collection
    of data, at the following link: [https://archive.ics.uci.edu/ml/index.php](https://archive.ics.uci.edu/ml/index.php).'
- en: 'S. De Vito, E. Massera, M. Piga, L. Martinotto, G. Di Francia, *On field calibration
    of an electronic nose for benzene estimation in an urban pollution monitoring
    scenario*, Sensors and Actuators B: Chemical, Volume 129, Issue 2, 22 February
    2008, Pages 750-757, ISSN 0925-4005 at: [https://www.sciencedirect.com/science/article/pii/S0925400507007691](https://www.sciencedirect.com/science/article/pii/S0925400507007691).'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 'S. De Vito, E. Massera, M. Piga, L. Martinotto, G. Di Francia, *On field calibration
    of an electronic nose for benzene estimation in an urban pollution monitoring
    scenario*, Sensors and Actuators B: Chemical, Volume 129, Issue 2, 22 February
    2008, Pages 750-757, ISSN 0925-4005 at: [https://www.sciencedirect.com/science/article/pii/S0925400507007691](https://www.sciencedirect.com/science/article/pii/S0925400507007691).'
- en: 'These are the daily readings of the following air quality values for May 1,
    1973 (a Tuesday) to September 30, 1973:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 'These are the daily readings of the following air quality values for May 1,
    1973 (a Tuesday) to September 30, 1973:'
- en: '**Ozone**: Mean ozone in parts per billion from 1300 to 1500 hours at Roosevelt
    island'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**臭氧**：罗斯福岛1300至1500小时的平均臭氧浓度，每十亿分之一'
- en: '**Solar.R**: Solar radiation in Langleys in the frequency band 4000–7700 Angstroms
    from 0800 to 1200 hours at central park'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**太阳辐射**：中央公园0800至1200小时在4000–7700埃频率范围内的太阳辐射，单位为朗格利'
- en: '**Wind**: Average wind speed in miles per hour at 0700 and 1000 hours at LaGuardia
    airport'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**风速**：拉瓜迪亚机场0700和1000小时的平均风速，单位为每小时英里'
- en: '**Temp**: Maximum daily temperature in degrees Fahrenheit at LaGuardia airport'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**温度**：拉瓜迪亚机场每日最高温度，单位为华氏度'
- en: The data was obtained from the New York State Department of Conservation (ozone
    data) and the **National Weather Service** or **NWS** (meteorological data).
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: The data was obtained from the New York State Department of Conservation (ozone
    data) and the **National Weather Service** or **NWS** (meteorological data).
- en: 'A data frame consists of 154 observations on 6 variables:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 'A data frame consists of 154 observations on 6 variables:'
- en: '| **Name** | **Type** | **Units** |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **单位** |'
- en: '| Ozone | numeric | ppb |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '| 臭氧 | 数值 | ppb |'
- en: '| Solar | numeric | lang |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '| 太阳 | 数值 | lang |'
- en: '| Wind | numeric | mph |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '| 风速 | 数值 | mph |'
- en: '| Temp | numeric | degrees F |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '| 温度 | 数值 | 华氏度 |'
- en: '| Month | numeric | 1 to 12 |'
  id: totrans-227
  prefs: []
  type: TYPE_TB
  zh: '| 月份 | 数值 | 1 到 12 |'
- en: '| Day | numeric | 1 to 31 |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| 天 | 数值 | 1 到 31 |'
- en: 'As can be seen, the six variables are characterized by different units of measurement.
    As we did in the previous sections, even in this case, we start preparing the
    data by creating a new flow from the flows screen, and then we import the `.csv`
    file into Google Cloud Dataprep. The following window opens:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 如所示，六个变量具有不同的度量单位。正如我们在前面的章节中所做的那样，即使在这种情况下，我们也从创建新的流程开始准备数据，然后我们将`.csv`文件导入Google
    Cloud Dataprep。以下窗口将打开：
- en: '![](img/777479ea-23cf-46f0-b15b-b625bcf8053b.png)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](img/777479ea-23cf-46f0-b15b-b625bcf8053b.png)'
- en: 'As we have anticipated, the four variables have different units of measure
    this implies that the ranges of values are very different. In fact, by analyzing
    the upper part of each column in the previous screenshot, we can obtain the following
    ranges:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所预期的，四个变量有不同的度量单位，这意味着值范围差异很大。实际上，通过分析前一个截图中的每一列的上部，我们可以获得以下范围：
- en: '**Ozone**: 1 to 168'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**臭氧**：1 到 168'
- en: '**Solar.R**: 7 to 334'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**太阳辐射强度**：7 到 334'
- en: '**Wind**: 2 to 21'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**风速**：2 到 21'
- en: '**Temp**: 56 to 97'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**温度**：56 到 97'
- en: 'Before proceeding with standardization, we eliminate some problems highlighted
    in the data quality bar. Mismatched values have been identified. To be precise:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行标准化之前，我们消除数据质量栏中突出显示的一些问题。已识别不匹配的值。为了更精确：
- en: '**Ozone**: 37 mismatched values'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**臭氧**：37个不匹配的值'
- en: '**Solar.R**: 7 mismatched values'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**太阳辐射强度**：7个不匹配的值'
- en: First of all, we will try to fix these problems as we have learned to do in
    the previous section.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将尝试修复这些问题，就像我们在上一节中学到的那样。
- en: 'We start with the Ozone column; we proceed to click on the red area of the
    data quality bar. In this way, all 37 mismatched values are highlighted. At the
    same time, the suggestions panel is opened on the right of the window. In particular,
    the first suggestion advises us to delete the lines with mismatched values in
    Ozone. We simply click on the Add button. The following line will be added to
    the Recipe panel:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从臭氧列开始；我们点击数据质量栏的红色区域。这样，所有37个不匹配的值都会被突出显示。同时，窗口右侧打开建议面板。特别是，第一个建议建议我们删除臭氧中不匹配值的行。我们只需点击添加按钮。以下行将被添加到“配方”面板中：
- en: '[PRE8]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We perform the same operation for the `Solar_R` column; the following line
    will be added to the Recipe panel:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对“Solar_R”列执行相同的操作；以下行将被添加到“配方”面板中：
- en: '[PRE9]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'In both cases, the preview window shows us that no mismatched value is now
    present in the data. At this point, we can take care of the normalization. As
    we have specified earlier, the variables ranges are very varied. We want to eliminate
    this feature through min-max normalization. As stated earlier, to apply this procedure
    we have to calculate the minimum and maximum for each variable. To do this, we
    can apply two functions available in Google Cloud Dataprep: `MIN` and `MAX`.'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，预览窗口显示我们数据中现在没有不匹配的值。此时，我们可以处理归一化。正如我们之前指定的，变量的范围非常广泛。我们希望通过最小-最大归一化消除这一特征。正如之前所述，要应用此程序，我们必须计算每个变量的最小值和最大值。为此，我们可以应用Google
    Cloud Dataprep中可用的两个函数：“MIN”和“MAX”。
- en: Google Cloud Dataprep support functions typically found in most desktop spreadsheet
    packages. Functions can be used to create formulas that manipulate data in the
    columns.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataprep支持在大多数桌面电子表格软件中常见的支持函数。可以使用这些函数创建公式来操作列中的数据。
- en: 'Previously, we have proposed the formula for normalization; to apply it to
    a column, we perform the following steps:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，我们提出了归一化的公式；要将它应用于一列，我们执行以下步骤：
- en: In the Recipe panel, click on the NEW STEP button. Remember? To open the Recipe
    panel, just click on the icon (Recipe) at the top left of the Run Job button.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“配方”面板中，点击“新建步骤”按钮。还记得吗？要打开“配方”面板，只需点击运行作业按钮左上角的图标（配方）。
- en: From the Transformation drop-down menu, select Apply formula item (this item
    sets the values of one or more columns to the result of a formula).
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“转换”下拉菜单中选择“应用公式”项（此项目将一列或多列的值设置为公式的结果）。
- en: From the column box, select the Ozone column, for example (the same procedure
    can be applied to all the dataset variables).
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列框中选择臭氧列，例如（相同的步骤可以应用于数据集的所有变量）。
- en: 'In the Formula box, edit the following formula: `(Ozone-MIN(Ozone))/(MAX(Ozone)-MIN(Ozone))`'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“公式”框中，编辑以下公式：`(Ozone-MIN(Ozone))/(MAX(Ozone)-MIN(Ozone))`
- en: Just click on the Add button.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 只需点击“添加”按钮。
- en: 'The following statement is added to the Recipe panel:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 在“配方”面板中添加以下语句：
- en: '[PRE10]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'We follow the same procedure for the other three variables: `Solar_R`, `Wind`,
    and `Temp`. At the end, we will have added the following lines to the Recipe panel:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对其他三个变量（`Solar_R`、`Wind`和`Temp`）遵循相同的程序。最后，我们将添加以下行到“配方”面板中：
- en: '[PRE11]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The Transformer page has been changed as follows:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 变换页面已更改如下：
- en: '![](img/e6c98f0f-7342-4faa-b258-62bc105960d0.png)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e6c98f0f-7342-4faa-b258-62bc105960d0.png)'
- en: It is apparent that now the data is all between zero and one; this happens for
    each column of the dataset and then for each variable. The scale differences due
    to the different units of measurement have therefore been removed.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，现在数据都在零和一之间；这是针对数据集的每一列以及每个变量发生的。因此，由于不同测量单位的差异导致的缩放差异已被消除。
- en: z score standardization
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: z分数标准化
- en: 'This technique consists of subtracting the mean of the column from each value
    in a column, and then dividing the result by the standard deviation of the column.
    The formula to achieve this is the following:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术包括从列的每个值中减去列的平均值，然后将结果除以列的标准差。实现这一目标的公式如下：
- en: '![](img/7a9d8cb9-10f7-43b5-b52f-865fbbb0b69e.png)'
  id: totrans-261
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7a9d8cb9-10f7-43b5-b52f-865fbbb0b69e.png)'
- en: 'The result of standardization is that the features will be rescaled so that
    they’ll have the properties of a standard normal distribution, as follows:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 标准化的结果是，特征将被重新缩放，以便它们具有标准正态分布的性质，如下所示：
- en: '*μ=0*'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*μ=0*'
- en: '*σ=1*'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*σ=1*'
- en: μ is the mean and *σ* is the standard deviation from the mean.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: μ是平均值，*σ*是平均值的标准差。
- en: In summary, the z score (also called the **standard score**) represents the
    number of standard deviations with which the value of an observation point or
    data differ than the mean value of what is observed or measured. Values more than
    the mean have positive z scores, while values less than the mean have negative
    z scores. The z score is a quantity without dimension, obtained by subtracting
    the population mean from a single rough score and then dividing the difference
    for the standard deviation of the population.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，z分数（也称为**标准分数**）表示观测点或数据值与观测或测量的平均值相比的标准差数。高于平均值的值具有正的z分数，而低于平均值的值具有负的z分数。z分数是一个无量纲的量，通过从单个粗略分数中减去总体平均值，然后除以总体标准差得到。
- en: 'Once again, to standardize the data, we will use the same procedure used to
    min-max normalization. This time the two functions are changed as follows:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，为了标准化数据，我们将使用与min-max归一化相同的程序。这次，两个函数更改如下：
- en: '`AVERAGE`: Calculates the average for each column'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`平均数`：计算每列的平均值'
- en: '`STDEV`: Calculates the standard deviation for each column'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`标准差`：计算每列的标准差'
- en: To perform a z score standardization, just analyze the same dataset used for
    min-max normalization. I refer to dataset called Airquality.csv, which contains
    daily readings of the following air quality values for May 1, 1973 (a Tuesday)
    to September 30, 1973.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行z分数标准化，只需分析用于min-max归一化的相同数据集。我指的是名为Airquality.csv的数据集，它包含了1973年5月1日（星期二）至1973年9月30日的每日空气质量值。
- en: 'To apply z score standardization to a dataset column, perform the following
    steps:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 要将z分数标准化应用于数据集列，请执行以下步骤：
- en: In the Recipe panel, click on the NEW STEP button. Again, to open the Recipe
    panel, just click on the icon (Recipe) at the top left of the Run Job button.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“配方”面板中，点击“新建步骤”按钮。再次，要打开“配方”面板，只需点击运行作业按钮左上角的图标（配方）。
- en: From the Transformation drop-down menu, select Apply formula (this item sets
    the values of one or more columns to the result of a formula).
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“转换”下拉菜单中选择“应用公式”（此选项将一个或多个列的值设置为公式的结果）。
- en: From the column box, select the Ozone column (the same procedure can be applied
    to all the dataset variables).
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“列”框中选择Ozone列（相同的步骤可以应用于所有数据集变量）。
- en: 'In the Formula box, edit the following formula:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“公式”框中，编辑以下公式：
- en: '`(Ozone- AVERAGE(Ozone))/STDEV(Ozone)`'
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`(Ozone- AVERAGE(Ozone))/STDEV(Ozone)`'
- en: Just click on the ADD button.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 只需点击“添加”按钮。
- en: 'The following statement is added to the Recipe panel:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在“配方”面板中添加以下语句：
- en: '[PRE12]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'We follow the same procedure for the other three variables: `Solar_R`, `Wind`,
    and `Temp`. At the end, we will have added the following lines to the Recipe panel:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对其他三个变量 `Solar_R`、`Wind` 和 `Temp` 也遵循相同的程序。最后，我们将以下行添加到配方面板中：
- en: '[PRE13]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The transformer page has been changed, as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 变压器页面已经发生了如下变化：
- en: '![](img/47b95f55-7b8c-43b2-be42-b1d71a872987.png)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![](img/47b95f55-7b8c-43b2-be42-b1d71a872987.png)'
- en: 'The modification made by the z score standardization is evident: the data ranges
    are quite similar. This happens for each column of the dataset, and then for each
    variable. The differences in scale due to the different units of measurement have
    therefore been removed.'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: z 分数标准化所做的修改是明显的：数据范围相当相似。这发生在数据集的每一列中，然后是每个变量。因此，由于不同的测量单位导致的规模差异已被消除。
- en: 'According to the assumptions, all variables must have `average= 0` and `stdev
    =1`. Let''s verify that. To do so, just use the statistical information available
    in the Column Details panel, already used in the previous sections. To open the
    Column Details panel, select Column Details from the drop-down menu of a column;
    the following panel is opened:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 根据假设，所有变量都必须满足 `平均= 0` 和 `标准差 =1`。让我们来验证这一点。为此，只需使用之前章节中已经使用过的列详细信息面板中的统计信息。要打开列详细信息面板，从列的下拉菜单中选择列详细信息；以下面板将被打开：
- en: '![](img/3695a5e9-314b-41b8-9b9b-7034543dda15.png)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3695a5e9-314b-41b8-9b9b-7034543dda15.png)'
- en: So, we have verified that the Ozone variable has an average of zero and a standard
    deviation of one. The same check can be executed for the other variables.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们已经验证了臭氧变量具有零平均值和一的标准差。可以对其他变量执行相同的检查。
- en: Google Cloud Dataflow
  id: totrans-288
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Dataflow
- en: Google Cloud Dataflow is a fully managed service for creating data pipelines
    that transform, enrich, and analyze data in batch and streaming modes. Google
    Cloud Dataflow extracts useful information from data, reducing operating costs
    without the hassle of implementing, maintaining, or resizing the data infrastructure.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataflow 是一个全托管服务，用于创建在批量模式和流式模式下转换、丰富和分析数据的数据管道。Google Cloud Dataflow
    从数据中提取有用信息，降低运营成本，无需实施、维护或调整数据基础设施，无需麻烦。
- en: A pipeline is a set of data processing elements connected in series, in which
    the output of one element is the input of the next. The data pipeline is implemented
    to increase throughput, which is the number of instructions executed in a given
    amount of time, parallelizing the processing flows of multiple instructions.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 管道是一组按顺序连接的数据处理元素，其中前一个元素的输出是下一个元素的输入。数据管道被实现以提高吞吐量，即给定时间内执行的指令数量，并行化多个指令的处理流程。
- en: By appropriately defining a process management flow, significant resources can
    be saved in extracting knowledge from the data. Thanks to a serverless approach
    to provisioning and managing resources, Dataflow offers virtually unlimited capacity
    to solve the most serious data processing problems, but you only pay for what
    you use.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 通过适当地定义进程管理流程，可以从数据中提取知识时节省大量资源。由于采用无服务器方法来提供和管理资源，Dataflow 为解决最严重的数据处理问题提供了几乎无限的容量，但您只需为使用的部分付费。
- en: Google Cloud Dataflow automates the provisioning and management of processing
    resources to reduce latency times and optimize utilization. It is no longer necessary
    to activate the instances manually or to reserve them. Automatic and optimized
    partitioning allows the pending job to be dynamically redistributed. You do not
    need to go for keyboard shortcuts or preprocess your input data. Cloud Dataflow
    supports rapid and simplified pipeline development using expressive Java and Python
    APIs in the Apache Beam SDK.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataflow 自动提供和管理处理资源，以减少延迟时间并优化利用率。不再需要手动激活实例或预留它们。自动和优化的分区允许待处理的作业动态重新分配。您无需使用键盘快捷键或预处理您的输入数据。Cloud
    Dataflow 支持使用 Apache Beam SDK 中的表达性 Java 和 Python API 快速和简化管道开发。
- en: Cloud Dataflow jobs are billed per minute, based on the actual use of workers
    in batch mode or streaming of Cloud Dataflow. Jobs that use other GCP resources,
    such as Cloud Storage or Cloud Pub/Sub, are billed based on the price of the corresponding
    service.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Dataflow 作业按分钟计费，基于批量模式或 Cloud Dataflow 流式传输中实际使用的工人的数量。使用其他 GCP
    资源（如 Cloud Storage 或 Cloud Pub/Sub）的作业将根据相应服务的价格计费。
- en: Summary
  id: totrans-294
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we explored Google Cloud Dataprep, a service useful to preprocess
    the data, extract features, and clean up records. We got into practical details
    with real-life examples. We started by taking a look at the Cloud application
    interface to discover some preliminary information needed to access the platform.
    We then analyzed the techniques available for the preparation of the most suitable
    data for analysis and modeling, which includes the imputation of missing data,
    detecting and eliminating outliers, and mismatched values treatment. We discovered
    different ways to transform data and the degree of cleaning data. Then we learned
    how to normalize our data, in which data units are eliminated, allowing us to
    easily compare data from different locations.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了Google Cloud Dataprep，这是一种用于数据预处理、提取特征和清理记录的有用服务。我们通过实际案例的例子深入了解了实践细节。我们首先查看云应用程序界面，以获取访问平台所需的一些初步信息。然后，我们分析了为准备最适合分析和建模的数据所提供的各种技术，这包括缺失数据的插补、检测和消除异常值以及处理不匹配值。我们发现了不同的数据转换方法以及数据清理的程度。接着，我们学习了如何规范化我们的数据，其中数据单位被消除，使我们能够轻松比较来自不同位置的数据。
