- en: '1'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Introduction to Amazon Redshift Serverless
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*“Hey, what’s a data warehouse?”* John Doe, CEO and co-founder of Red.wines,
    a fictional specialty wine e-commerce company, asked Tathya Vishleshak*, the company’s
    CTO. John, who owned a boutique winery, had teamed up with Tathya for the project.
    The company’s success surged during the pandemic, driven by social media and the
    stay-at-home trend. John wanted detailed data analysis to align inventory and
    customer outreach. However, there was a problem – producing this analysis was
    slowing down their **online transaction processing** (**OLTP**) database.'
  prefs: []
  type: TYPE_NORMAL
- en: '*“A data warehouse is like a big database where we store different data for
    a long time to find insights and make decisions,”* Tathya explained.'
  prefs: []
  type: TYPE_NORMAL
- en: John had a concern, *“Sounds expensive; we’re already paying for unused warehouse
    space. Can we* *afford it?”*
  prefs: []
  type: TYPE_NORMAL
- en: Tathya reassured him, *“You’re right, but there are cloud data warehouses such
    as Amazon Redshift Serverless that let you pay as* *you use.”*
  prefs: []
  type: TYPE_NORMAL
- en: Expanding on this, this chapter introduces data warehousing and Amazon Redshift.
    We’ll cover Amazon Redshift Serverless basics, such as namespaces and workgroups,
    and guide you in creating a data warehouse. Amazon Redshift can gather data from
    various sources, mainly Amazon **Simple Storage** **Service** (**S3**).
  prefs: []
  type: TYPE_NORMAL
- en: As we go through this chapter, you’ll learn about a crucial aspect of this,
    the AWS **Identity and Access Management** (**IAM**) role, needed for loading
    data from S3\. This role connects to your Serverless namespace for smooth data
    transfer. You’ll also learn how to load sample data and run queries using Amazon
    Redshift query editor. Our goal is to make it simple and actionable, so you’re
    confident in navigating this journey.
  prefs: []
  type: TYPE_NORMAL
- en: Tathya Vishleshak
  prefs: []
  type: TYPE_NORMAL
- en: The phrase 'Tathya Vishleshak' can be loosely interpreted to reflect the concept
    of a data analyst in Sanskrit/Hindi. However, it's important to note that this
    is not a precise or established translation, but rather an attempt to convey a
    similar meaning based on the individual meanings of the words 'Tathya' and 'Vishleshak'
    in Sanskrit.
  prefs: []
  type: TYPE_NORMAL
- en: Additionally, Amazon Redshift is used to analyze structured and unstructured
    data in data warehouses, operational databases, and data lakes. It’s employed
    for traditional data warehousing, business intelligence, real-time analytics,
    and machine learning/predictive analytics. Data analysts and developers use Redshift
    data with **machine learning** (**ML**) models for tasks such as predicting customer
    behavior. Amazon Redshift ML streamlines this process using familiar SQL commands.
  prefs: []
  type: TYPE_NORMAL
- en: The book delves into ML, explaining supervised and unsupervised training. You’ll
    learn about problem-solving with binary classification, multi-class classification,
    and regression using real-world examples. You’ll also discover how to create deep
    learning models and custom models with XGBoost, as well as use time series forecasting.
    The book also covers in-database and remote inferences using existing models,
    applying ML for predictive analytics, and operationalizing machine learning models.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following topics will be covered in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: What is Amazon Redshift?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Getting started with Amazon Redshift Serverless
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Connecting to your data warehouse
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This chapter requires a web browser and access to an AWS account.
  prefs: []
  type: TYPE_NORMAL
- en: What is Amazon Redshift?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Organizations churn out vast troves of customer data along with insights into
    these customers’ interactions with the business. This data gets funneled into
    various applications and stashed away in disconnected systems. A conundrum arises
    when attempting to decipher these data silos – a formidable challenge that hampers
    the derivation of meaningful insights essential for organizational clarity. Adding
    to this complexity, security and performance considerations typically muzzle business
    analysts from accessing data within OLTP systems.
  prefs: []
  type: TYPE_NORMAL
- en: The hiccup is that intricate analytical queries weigh down OLTP databases, casting
    a shadow over their core operations. Here, the solution is the **data warehouse**,
    which is a central hub of curated data, used by business analysts and data scientists
    to make informed decisions by employing the business intelligence and machine
    learning tools at their disposal. These users make use of **Structured Query Language**
    (**SQL**) to derive insights from this data trove. From operational systems, application
    logs, and social media streams to the influx of IoT device-generated data, customers
    channel structured and semi-structured data into organizations’ data warehouses,
    as depicted in *Figure 1**.1*, showcasing the classic architecture of a conventional
    data warehouse.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.1 – Data warehouse](img/B19071_01_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.1 – Data warehouse
  prefs: []
  type: TYPE_NORMAL
- en: Here’s where Amazon Redshift Serverless comes in. It’s a key option within Amazon
    Redshift, a well-managed cloud data warehouse offered by **Amazon Web Services**
    (**AWS**). With cloud-based ease, Amazon Redshift Serverless lets you set up your
    data storage without infrastructure hassles or cost worries. You pay based on
    what you use for compute and storage.
  prefs: []
  type: TYPE_NORMAL
- en: 'Amazon Redshift Serverless goes beyond convenience, propelling modern data
    applications that seamlessly connect to the data lake. Enter the data lake – a
    structure that gathers all data strands under one roof, providing limitless space
    to store data at any scale, cost-effectively. Alongside other data repositories
    such as data warehouses, data lakes redefine how organizations handle data. And
    this is where it all comes together – the following diagram shows how Amazon Redshift
    Serverless injects SQL-powered queries into the data lake, driving a dynamic data
    flow:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.2 – Data lake and data warehouse](img/B19071_01_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.2 – Data lake and data warehouse
  prefs: []
  type: TYPE_NORMAL
- en: So, let’s get started on creating our first data warehouse in the cloud!
  prefs: []
  type: TYPE_NORMAL
- en: Getting started with Amazon Redshift Serverless
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You can create your data warehouse with Amazon Redshift Serverless using the
    `Redshift` in the top bar, as shown in *Figure 1**.3*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.3 – AWS console page showing services filtered by our search for
    Redshift](img/B19701_01_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.3 – AWS console page showing services filtered by our search for Redshift
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **Amazon Redshift**, which will take you to the home page for the
    Amazon Redshift console, as shown in *Figure 1**.4*. To help get you started,
    Amazon provides free credit for first-time Redshift Serverless customers. So,
    let’s start creating your trial data warehouse by clicking on **Try Amazon Redshift
    Serverless**. If you or your organization has tried Amazon Redshift Serverless
    before, you will have to pay for the service based on your usage:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.4 – Amazon Redshift service page in the AWS console](img/B19701_01_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.4 – Amazon Redshift service page in the AWS console
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have free credit available, it will be indicated at the top of your
    screen, as in *Figure 1**.5*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.5 – AWS console showing the Redshift Serverless Get started page](img/B19701_01_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.5 – AWS console showing the Redshift Serverless Get started page
  prefs: []
  type: TYPE_NORMAL
- en: You can either choose the defaults or use the customized settings to create
    your data warehouse. The customized settings give you more control, allowing you
    to specify many additional parameters for your compute configuration including
    the workgroup, data-related settings such as the namespace, and advanced security
    settings. We will use the customized settings, which will help us customize the
    namespace settings for our Serverless data warehouse. A namespace combined with
    a workgroup is what makes a data warehouse with Redshift Serverless, as we will
    now see in more detail.
  prefs: []
  type: TYPE_NORMAL
- en: What is a namespace?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Amazon Redshift Serverless provides a separation of storage and compute for
    a data warehouse. A **namespace** is a collection of all your data stored in the
    database such as your tables, views, database users, and their privileges. You
    are separately charged for storage based on the size of the data stored in your
    data warehouse. For compute, you are charged for the capacity used over a given
    duration in **Redshift processing hours** (**RPU**) on a per second-basis. The
    storage capacity is billed as **Redshift managed storage** (**RMS**) and is billed
    by GB/month. You can view [https://aws.amazon.com/redshift/pricing/](https://aws.amazon.com/redshift/pricing/)
    for detailed pricing for your AWS Region.
  prefs: []
  type: TYPE_NORMAL
- en: 'As a data warehouse admin, you can change the name of your data warehouse namespace
    while creating the namespace. You can also change your encryption settings, audit
    logging, and AWS IAM permissions, as shown in *Figure 1**.6*. The primary reason
    we are going to use customized settings is to associate an IAM role with the namespace:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.6 – Namespace configuration](img/B19701_01_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.6 – Namespace configuration
  prefs: []
  type: TYPE_NORMAL
- en: AWS IAM allows you to specify which users or services can access other services
    and resources in AWS. We will use that role for loading data from **S3** and training
    a machine learning model with Redshift ML that accesses **Amazon SageMaker**.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have already created an IAM role earlier, you can associate with that
    IAM role. If you have not created an IAM role, do so now by selecting the **Manage
    IAM roles** option, as shown in *Figure 1**.7*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.7 – Creating an IAM role and associating it via the AWS console](img/B19701_01_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.7 – Creating an IAM role and associating it via the AWS console
  prefs: []
  type: TYPE_NORMAL
- en: 'Then, select the **Create IAM role** option, as shown in *Figure 1**.8*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.8 – Selecting the “Create IAM role” option](img/B19701_01_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.8 – Selecting the “Create IAM role” option
  prefs: []
  type: TYPE_NORMAL
- en: 'You can then create a default IAM role and provide appropriate permissions
    to the IAM role to allow it to access S3 buckets, as shown in *Figure 1**.9*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.9 – Granting S3 permissions to the IAM role](img/B19701_01_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.9 – Granting S3 permissions to the IAM role
  prefs: []
  type: TYPE_NORMAL
- en: As shown in the preceding figure, select **Any S3 bucket** to enable Redshift
    to read data from and write data to all S3 buckets you have created. Then, select
    **Create IAM role as default** to create the role and set it as the default IAM
    role.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.10 – An IAM role was created but is not yet applied](img/B19701_01_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.10 – An IAM role was created but is not yet applied
  prefs: []
  type: TYPE_NORMAL
- en: As shown in *Figure 1**.10*, we created the IAM role and associated it with
    the namespace as a default role. Let’s next proceed to create a workgroup, wherein
    we will set up the compute configuration for the data warehouse.
  prefs: []
  type: TYPE_NORMAL
- en: What is a workgroup?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As we discussed earlier, a namespace combined with a workgroup is what makes
    a Redshift Serverless data warehouse. A **workgroup** provides the compute resources
    required to process your data. It also provides the endpoint for you to connect
    to the warehouse. As an admin, you need to configure the compute settings such
    as the network and security configuration for the workgroup.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will not do any customization at this time and simply select the default
    settings instead, including the VPC and associated subnets for the workgroup,
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.11 – Default settings and associated subnets for the workgroup](img/B19701_01_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.11 – Default settings and associated subnets for the workgroup
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the **Save configuration** button to create your Redshift Serverless
    instance, and your first data warehouse will be ready in a few minutes:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.12 – Redshift Serverless creation progress](img/B19701_01_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.12 – Redshift Serverless creation progress
  prefs: []
  type: TYPE_NORMAL
- en: 'Once your data warehouse is ready, you will be redirected to your Serverless
    dashboard, as shown in *Figure 1**.13*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.13 – Serverless dashboard showing your namespace and workgroup](img/B19701_01_13.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.13 – Serverless dashboard showing your namespace and workgroup
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have created our data warehouse, we will connect to the data warehouse,
    load some sample data, and run some queries.
  prefs: []
  type: TYPE_NORMAL
- en: Connecting to your data warehouse
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Your data warehouse with Redshift Serverless is now ready. You can connect to
    your data warehouse using third-party tools via JDBC/ODBC/Python drivers. Other
    options include the **Data API** or the embedded **Redshift query** **editor v2**.
  prefs: []
  type: TYPE_NORMAL
- en: Using Amazon Redshift query editor v2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now that your data warehouse is ready; let’s navigate to the query editor to
    load some sample data and run some queries. Select the **Query data** option from
    your dashboard, as shown in *Figure 1**.13,* and you will be navigated to the
    query editor, as shown in *Figure 1**.14*.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.14 – Query editor](img/B19701_01_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.14 – Query editor
  prefs: []
  type: TYPE_NORMAL
- en: In the Redshift query editor v2 console, on the left pane, you will see the
    data warehouses, such as the **Serverless:default** workgroup, that you have access
    to. Click on the workgroup (**Serverless:default**) to connect to the data warehouse.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.15 – Creating a connection to your workgroup](img/B19701_01_15.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.15 – Creating a connection to your workgroup
  prefs: []
  type: TYPE_NORMAL
- en: 'As shown in the preceding screenshot, select **Federated user** if you did
    not specify any database credentials while creating the namespace, and then click
    **Create connection**. You can leave the database name as **dev**. You will be
    prompted to create a connection only when connecting to the data warehouse for
    the first time. If you have created the connection, you will be connected automatically
    when you click on the workgroup. Once you are connected, you will see the databases
    in the navigator, as shown in *Figure 1**.16*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.16 – List of databases](img/B19701_01_16.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.16 – List of databases
  prefs: []
  type: TYPE_NORMAL
- en: Since we just created our data warehouse for the first time, there is no data
    present in it, so let’s load some sample data into the data warehouse now.
  prefs: []
  type: TYPE_NORMAL
- en: Loading sample data
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'On the left pane, click on the **sample_data_dev** database to expand the available
    database:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.17 – The Redshift query editor v2 navigator that shows the sample
    data available](img/B19701_01_17.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.17 – The Redshift query editor v2 navigator that shows the sample data
    available
  prefs: []
  type: TYPE_NORMAL
- en: 'As you can see from the preceding screenshot, three sample datasets are available
    for you to load into your data warehouse. Click on the icon showing the folder
    with an arrow located to the right of your chosen sample data notebook to load
    and open it, as shown in *Figure 1**.18*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.18 – List of sample databases](img/B19701_01_18.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.18 – List of sample databases
  prefs: []
  type: TYPE_NORMAL
- en: 'You will be prompted to create your sample database. Click on **Create** to
    get started, as shown in *Figure 1**.19*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.19 – Creating a sample database](img/B19701_01_19.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.19 – Creating a sample database
  prefs: []
  type: TYPE_NORMAL
- en: 'The sample data will be loaded in a few seconds and presented in a notebook
    with SQL queries for the dataset that you can explore, as shown in *Figure 1**.20*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.20 – Notebook with sample queries for the tickit database](img/B19701_01_20.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.20 – Notebook with sample queries for the tickit database
  prefs: []
  type: TYPE_NORMAL
- en: You can expand the navigation tree on the left side of the query editor to view
    schemas and database objects, such as tables and views in your schema, as shown
    in *Figure 1**.21*.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.21 – Expanding the navigation tree to view schemas and database
    objects](img/B19701_01_21.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.21 – Expanding the navigation tree to view schemas and database objects
  prefs: []
  type: TYPE_NORMAL
- en: 'You can click on a table to view the table definitions, as shown in *Figure
    1**.22*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.22 – Table definitions](img/B19701_01_22.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.22 – Table definitions
  prefs: []
  type: TYPE_NORMAL
- en: 'Right-clicking on a table provides additional **Select table**, **Show table
    definition**, and **Delete** options, as shown in *Figure 1**.23*:'
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 1.23 – Right-click\uFEFFing on a table to view more options](img/B19701_01_23.jpg)"
  prefs: []
  type: TYPE_IMG
- en: Figure 1.23 – Right-clicking on a table to view more options
  prefs: []
  type: TYPE_NORMAL
- en: You can click **Run all,** as shown in *Figure 1**.24,* to run all the queries
    in the sample notebook. The query editor provides a notebook interface to add
    annotation, and SQL cells organize your queries in a single document. You can
    use annotations for documentation purposes.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.24 – The “Run all” option](img/B19701_01_24.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.24 – The “Run all” option
  prefs: []
  type: TYPE_NORMAL
- en: 'You will see the results of your queries for each cell. You can download the
    results as JSON or CSV files to your desktop, as shown in *Figure 1**.25*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.25 – Options to download query results](img/B19701_01_25.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.25 – Options to download query results
  prefs: []
  type: TYPE_NORMAL
- en: Let’s author our first query.
  prefs: []
  type: TYPE_NORMAL
- en: Running your first query
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We want to find out the top 10 events by sales in the `tickit` database. We
    will run the following SQL statement in the data warehouse:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'In the query editor, add a new query by clicking on the **+** sign and selecting
    **Editor** from the menu that appears. If you wanted to create a new notebook,
    you could click on **Notebook** instead, as shown in *Figure 1**.26*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.26 – Creating a new query](img/B19701_01_26.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.26 – Creating a new query
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, type the preceding SQL query in the editor and then click on **Run**.
    You will get the results as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.27 – Query with results](img/B19701_01_27.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.27 – Query with results
  prefs: []
  type: TYPE_NORMAL
- en: 'As the saying goes, *“A picture is worth a thousand words,”* and query editor
    allows you to visualize the results to gain faster insight. You can create a chart
    easily by clicking on the **Chart** option and then selecting the chart you want.
    Let’s select a scatter plot, as shown in *Figure 1**.28*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.28 – Using charts in Redshift query editor v2](img/B19701_01_28.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.28 – Using charts in Redshift query editor v2
  prefs: []
  type: TYPE_NORMAL
- en: 'You can add a chart name and notations for the *X* and *Y* axes and export
    the chart as PNG or JPG to put in your presentation or to share with your business
    partners:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.29 – Charting options in query editor v2](img/B19701_01_29.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.29 – Charting options in query editor v2
  prefs: []
  type: TYPE_NORMAL
- en: As you have now seen, you can use Redshift query editor v2 to create your own
    database, create tables, load data, and run and author queries and notebooks.
    You can share your queries and notebooks with your team members.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you learned about cloud data warehouses and Amazon Redshift
    Serverless. You created your first data warehouse powered by Redshift Serverless
    and loaded some sample data using the query editor. You also learned how to use
    the query editor to run queries and visualize data to produce insights.
  prefs: []
  type: TYPE_NORMAL
- en: In [*Chapter 2*](B19071_02.xhtml#_idTextAnchor027), you will learn the best
    techniques for loading data and performing analytics in your Amazon Redshift Serverless
    data warehouse.
  prefs: []
  type: TYPE_NORMAL
