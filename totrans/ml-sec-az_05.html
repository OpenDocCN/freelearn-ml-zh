<html><head></head><body>
<div id="_idContainer116">
<h1 class="chapter-number" id="_idParaDest-113"><a id="_idTextAnchor115"/><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 id="_idParaDest-114"><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.2.1">Data Privacy and Responsible AI Best Practices</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we talked about how to build a data governance program for our organization and how to identify types of sensitive data. </span><span class="koboSpan" id="kobo.3.2">Our work does not stop there. </span><span class="koboSpan" id="kobo.3.3">Although in some cases we can safely exclude sensitive information, other times we cannot. </span><span class="koboSpan" id="kobo.3.4">So, our </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">machine learning</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">ML</span></strong><span class="koboSpan" id="kobo.7.1">) models that solve problems might need to contain personal data. </span><span class="koboSpan" id="kobo.7.2">Sometimes that data can be relevant and useful, or it can create unintended correlations that make the model biased. </span><span class="koboSpan" id="kobo.7.3">This is the issue that we will tackle in </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">We will talk about how to recognize sensitive information and how to mitigate it if it is not relevant to the model training process by using techniques such as differential privacy. </span><span class="koboSpan" id="kobo.9.2">We will explore how to protect individual information even from aggregated data or the model results. </span><span class="koboSpan" id="kobo.9.3">To help us with that, we will see how we can use the SmartNoise </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">software development </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.11.1">kit</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.12.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.13.1">SDK</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">We will also discuss fairness and how you can recognize bias in your model’s predictions. </span><span class="koboSpan" id="kobo.15.2">Here, we will apply the responsible AI principles we have learned together with the Fairlearn library and the Responsible AI dashboard. </span><span class="koboSpan" id="kobo.15.3">Together with bias comes model interpretability. </span><span class="koboSpan" id="kobo.15.4">We will analyze together how to calculate which features affect the prediction of your model for global or individual predictions by generating feature-importance values with </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">model explainers.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">Finally, we will wrap up by explaining </span><strong class="bold"><span class="koboSpan" id="kobo.18.1">federated learning</span></strong><span class="koboSpan" id="kobo.19.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.20.1">FL</span></strong><span class="koboSpan" id="kobo.21.1">) and secure multi-party computation to protect sensitive data in cross-organizational </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">ML scenarios.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">main topics:</span></span></p>
<ul>
<li><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.25.1">Discovering and protecting </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">sensitive data</span></span></li>
<li><a id="_idTextAnchor118"/><a id="_idTextAnchor119"/><span class="koboSpan" id="kobo.27.1">Introducing </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">differential privacy</span></span></li>
<li><a id="_idTextAnchor120"/><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Mitigating fairness</span></span></li>
<li><a id="_idTextAnchor121"/><span class="koboSpan" id="kobo.30.1">Working with </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">model interpretability</span></span></li>
<li><a id="_idTextAnchor122"/><span class="koboSpan" id="kobo.32.1">Exploring FL and secure </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">multi-party computation</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.34.1">By the end of this chapter, you will be able to protect your data against bias and privacy without compromising the quality of </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">your predictions.</span></span></p>
<h1 id="_idParaDest-115"><a id="_idTextAnchor123"/><span class="koboSpan" id="kobo.36.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.37.1">The code for this chapter is available in this repository under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">ch5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.39.1"> folder:</span></span></p>
<p><a href="https://github.com/PacktPublishing/Machine-Learning-Model-Security-in-Azure/"><span class="No-Break"><span class="koboSpan" id="kobo.40.1">https://github.com/PacktPublishing/Machine-Learning-Model-Security-in-Azure/</span></span></a></p>
<h2 id="_idParaDest-116"><a id="_idTextAnchor124"/><span class="koboSpan" id="kobo.41.1">Working with Python</span></h2>
<p><span class="koboSpan" id="kobo.42.1">To use the </span><a id="_idIndexMarker420"/><span class="koboSpan" id="kobo.43.1">libraries, you need to be familiar with Python. </span><span class="koboSpan" id="kobo.43.2">In this book, we will use notebooks from the Azure Machine Learning environment to run the examples, but if you prefer to use your own development environment and tools, that </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">is fine.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.45.1">Getting started with Python</span></p>
<p class="callout"><span class="koboSpan" id="kobo.46.1">New to Python and ML? </span><span class="koboSpan" id="kobo.46.2">Take a look at this learning path to learn the basics of </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">Python: </span></span><a href="https://learn.microsoft.com/en-us/training/paths/beginner-python/"><span class="No-Break"><span class="koboSpan" id="kobo.48.1">https://learn.microsoft.com/en-us/training/paths/beginner-python/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.49.1">.</span></span></p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.50.1">Running a notebook in Azure Machine Learning</span></h2>
<p><span class="koboSpan" id="kobo.51.1">The </span><a id="_idIndexMarker421"/><span class="koboSpan" id="kobo.52.1">process of running a notebook in Azure Machine Learning is very straightforward. </span><span class="koboSpan" id="kobo.52.2">All you need to do is import or create a workbook </span><a id="_idIndexMarker422"/><span class="koboSpan" id="kobo.53.1">in the interface, attach a compute target, and then run the cells. </span><span class="koboSpan" id="kobo.53.2">Let us see the </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">steps together:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.55.1">Go to the </span><strong class="bold"><span class="koboSpan" id="kobo.56.1">Notebooks</span></strong><span class="koboSpan" id="kobo.57.1"> section and upload or create </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">your file:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer103">
<span class="koboSpan" id="kobo.59.1"><img alt="Figure 5.1 – Azure Machine Learning notebooks" src="image/B21076_05_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.60.1">Figure 5.1 – Azure Machine Learning notebooks</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.61.1">Open </span><a id="_idIndexMarker423"/><span class="koboSpan" id="kobo.62.1">the notebook file and attach a</span><a id="_idIndexMarker424"/><span class="koboSpan" id="kobo.63.1"> running compute target from the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.64.1">Compute</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.65.1"> dropdown:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer104">
<span class="koboSpan" id="kobo.66.1"><img alt="Figure 5.2 – Attaching a compute target to a notebook" src="image/B21076_05_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.67.1">Figure 5.2 – Attaching a compute target to a notebook</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.68.1">Run the cells in the notebook </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">as usual.</span></span></li>
</ol>
<h2 id="_idParaDest-118"><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.70.1">Installing the SmartNoise SDK</span></h2>
<p><span class="koboSpan" id="kobo.71.1">The</span><a id="_idIndexMarker425"/><span class="koboSpan" id="kobo.72.1"> SmartNoise SDK (</span><a href="https://smartnoise.org/"><span class="koboSpan" id="kobo.73.1">https://smartnoise.org/</span></a><span class="koboSpan" id="kobo.74.1">) is a differential privacy toolkit that you can use in ML or analytics. </span><span class="koboSpan" id="kobo.74.2">Here, we’ll see how we can install the library in order to use it later in </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.76.1">To install </span><a id="_idIndexMarker426"/><span class="koboSpan" id="kobo.77.1">SmartNoise SQL, run the </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.79.1">
pip install smartnoise-sql</span></pre> <p><span class="koboSpan" id="kobo.80.1">To install SmartNoise Synthesizers, run </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">this command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.82.1">
pip install smartnoise-synth</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.83.1">SmartNoise documentation</span></p>
<p class="callout"><span class="koboSpan" id="kobo.84.1">Find the complete documentation </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">here: </span></span><a href="https://docs.smartnoise.org/"><span class="No-Break"><span class="koboSpan" id="kobo.86.1">https://docs.smartnoise.org/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.87.1">.</span></span></p>
<h2 id="_idParaDest-119"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.88.1">Installing Fairlearn</span></h2>
<p><span class="koboSpan" id="kobo.89.1">Fairlearn </span><a id="_idIndexMarker427"/><span class="koboSpan" id="kobo.90.1">can be installed with </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">pip</span></strong><span class="koboSpan" id="kobo.92.1"> from PyPI using the </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.94.1">
pip install fairlearn</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.95.1">Fairlearn documentation</span></p>
<p class="callout"><span class="koboSpan" id="kobo.96.1">Find the complete </span><a id="_idIndexMarker428"/><span class="koboSpan" id="kobo.97.1">documentation </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">here: </span></span><a href="https://fairlearn.org/"><span class="No-Break"><span class="koboSpan" id="kobo.99.1">https://fairlearn.org/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.100.1">.</span></span></p>
<h1 id="_idParaDest-120"><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.101.1">Discovering and protecting sensitive data</span></h1>
<p><span class="koboSpan" id="kobo.102.1">Although having good </span><a id="_idIndexMarker429"/><span class="koboSpan" id="kobo.103.1">governance and working with multiple tools that work with data can help us with sensitive data discovery classification and profiling, more often than not, the data used in our ML experiments comes from outside sources, or maybe we are simply not developing for our own organization. </span><span class="koboSpan" id="kobo.103.2">In that case, we need to train ourselves on what sensitive data is and how to do a quick cleanup if we need to use Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">Machine Learning.</span></span></p>
<h2 id="_idParaDest-121"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.105.1">Identifying sensitive data</span></h2>
<p><span class="koboSpan" id="kobo.106.1">Sensitive data </span><a id="_idIndexMarker430"/><span class="koboSpan" id="kobo.107.1">refers to any information that, if exposed, could cause harm, privacy breaches, or lead to identity theft, monetary loss, or other adverse consequences for individuals or organizations. </span><span class="koboSpan" id="kobo.107.2">This data requires special protection due to its nature and the potential risks associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">its disclosure.</span></span></p>
<p><span class="koboSpan" id="kobo.109.1">There are many categories</span><a id="_idIndexMarker431"/><span class="koboSpan" id="kobo.110.1"> of sensitive data, many of which are outlined ahead, together </span><a id="_idIndexMarker432"/><span class="koboSpan" id="kobo.111.1">with examples that we need to be </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">aware of:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.113.1">Personally identifiable information</span></strong><span class="koboSpan" id="kobo.114.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.115.1">PII</span></strong><span class="koboSpan" id="kobo.116.1">): Information that can be used to identify an individual, such as full name, date of birth, social security number, driver’s license number, passport number, and </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">so on</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.118.1">Financial information</span></strong><span class="koboSpan" id="kobo.119.1">: Credit card numbers, bank account details, financial transaction records, and </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">so on</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.121.1">Health information</span></strong><span class="koboSpan" id="kobo.122.1">: Medical records, health insurance information, mental health records, and other </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">health-related data</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.124.1">Passwords and authentication data</span></strong><span class="koboSpan" id="kobo.125.1">: Usernames, passwords, security questions, or any other credentials used to access systems </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">or accounts</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.127.1">Biometric data</span></strong><span class="koboSpan" id="kobo.128.1">: Fingerprints, retinal scans, facial recognition data, and other </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">biometric identifiers</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.130.1">Confidential business information</span></strong><span class="koboSpan" id="kobo.131.1">: Trade secrets, </span><strong class="bold"><span class="koboSpan" id="kobo.132.1">intellectual property</span></strong><span class="koboSpan" id="kobo.133.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.134.1">IP</span></strong><span class="koboSpan" id="kobo.135.1">), financial reports, customer lists, proprietary algorithms, and </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">so on</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.137.1">Government classified information</span></strong><span class="koboSpan" id="kobo.138.1">: Information classified by governments for national </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">security reasons</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.140.1">Personal communications</span></strong><span class="koboSpan" id="kobo.141.1">: Private messages, emails, and other communications that individuals expect to </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">be confidential</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.143.1">Social and demographic information</span></strong><span class="koboSpan" id="kobo.144.1">: Race, ethnicity, religion, sexual orientation, and other sensitive </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">demographic data</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.146.1">Geolocation data</span></strong><span class="koboSpan" id="kobo.147.1">: Precise location data of individuals </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">or assets</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.149.1">Some of that data we can exclude from our ML process. </span><span class="koboSpan" id="kobo.149.2">For example, if we are training a model to predict diabetes, we don’t need the patient data but the symptom data. </span><span class="koboSpan" id="kobo.149.3">In this case, we can safely exclude</span><a id="_idIndexMarker433"/><span class="koboSpan" id="kobo.150.1"> that information from our dataset by using the techniques we will explore in the next section. </span><span class="koboSpan" id="kobo.150.2">But if we are training a model to recognize faces, we need the actual </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">biometric data.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">Let us see some techniques that help us clean up sensitive data so that it is not known to the </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">ML model.</span></span></p>
<h2 id="_idParaDest-122"><a id="_idTextAnchor130"/><span class="koboSpan" id="kobo.154.1">Exploring data anonymization</span></h2>
<p><span class="koboSpan" id="kobo.155.1">Data anonymization </span><a id="_idIndexMarker434"/><span class="koboSpan" id="kobo.156.1">is a process of removing or obfuscating PII from a dataset to protect the privacy of individuals while still maintaining the data’s overall usefulness for analysis and research purposes. </span><span class="koboSpan" id="kobo.156.2">The goal is to ensure that the data cannot be linked back to </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">specific individuals.</span></span></p>
<p><span class="koboSpan" id="kobo.158.1">Here are some </span><a id="_idIndexMarker435"/><span class="koboSpan" id="kobo.159.1">common techniques used in </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">data anonymization:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.161.1">Removing direct identifiers</span></strong><span class="koboSpan" id="kobo.162.1">: The most straightforward method is to remove direct identifiers </span><a id="_idIndexMarker436"/><span class="koboSpan" id="kobo.163.1">such as names, social security numbers, phone numbers, email addresses, and so on from the dataset. </span><span class="koboSpan" id="kobo.163.2">We can use a unique identification number that identifies each record to maintain uniqueness or correlation, but anything that can identify a person is </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">removed completely.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.165.1">Pseudonymization</span></strong><span class="koboSpan" id="kobo.166.1">: The </span><a id="_idIndexMarker437"/><span class="koboSpan" id="kobo.167.1">process of replacing sensitive data with pseudonyms or randomly generated identifiers is called pseudonymization. </span><span class="koboSpan" id="kobo.167.2">The objective is to obscure the original identity of individuals or entities in a dataset while allowing data processing and analysis to continue using the pseudonymized data. </span><span class="koboSpan" id="kobo.167.3">Unlike full anonymization, pseudonymization retains the structure and format of the original data, making it useful for certain purposes while still protecting privacy. </span><span class="koboSpan" id="kobo.167.4">This way, the original data is still present in the dataset, but the linkage to specific individuals </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">is broken.</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.169.1">Best practice – combining pseudonymization with other techniques</span></p>
<p class="callout"><span class="koboSpan" id="kobo.170.1">Pseudonymization is a very good privacy-enhancing technique, but it’s not guaranteed. </span><span class="koboSpan" id="kobo.170.2">If additional information or external datasets can be combined with the pseudonymized data, identification of the individual may still be possible. </span><span class="koboSpan" id="kobo.170.3">Therefore, it’s good to combine pseudonymization with other security measures to effectively protect </span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">sensitive data.</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.172.1">Data masking or tokenization</span></strong><span class="koboSpan" id="kobo.173.1">: This </span><a id="_idIndexMarker438"/><span class="koboSpan" id="kobo.174.1">technique is very similar to pseudonymization, but</span><a id="_idIndexMarker439"/><span class="koboSpan" id="kobo.175.1"> instead of encrypting or</span><a id="_idIndexMarker440"/><span class="koboSpan" id="kobo.176.1"> replacing sensitive data, data masking or tokenization replaces the values with randomly generated tokens or symbols. </span><span class="koboSpan" id="kobo.176.2">For example, if there is a credit card number present, all digits except the last four will be replaced by a star symbol. </span><span class="koboSpan" id="kobo.176.3">Data masking or tokenization might result in data that is not useful to the ML process. </span><span class="koboSpan" id="kobo.176.4">Therefore, you might want to remove the </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">data altogether.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.178.1">Generalization or aggregation</span></strong><span class="koboSpan" id="kobo.179.1">: This</span><a id="_idIndexMarker441"/><span class="koboSpan" id="kobo.180.1"> involves grouping data into broader categories to reduce the level of detail while still preserving overall patterns and trends. </span><span class="koboSpan" id="kobo.180.2">This technique is often used in data anonymization to protect individual privacy. </span><span class="koboSpan" id="kobo.180.3">The </span><a id="_idIndexMarker442"/><span class="koboSpan" id="kobo.181.1">goal of generalization or aggregation is to strike a balance between data utility and privacy. </span><span class="koboSpan" id="kobo.181.2">While it reduces the risk of directly identifying individuals, it still provides valuable insights for analysis and research. </span><span class="koboSpan" id="kobo.181.3">However, it’s important to carefully consider the level of generalization to avoid potential re-identification risks, especially when combined with other available information. </span><span class="koboSpan" id="kobo.181.4">Here are some examples of generalization </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">or </span></span><span class="No-Break"><a id="_idIndexMarker443"/></span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">aggregation:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.184.1">Age ranges</span></strong><span class="koboSpan" id="kobo.185.1">: Instead of using exact ages, data can be generalized into age ranges such as </span><em class="italic"><span class="koboSpan" id="kobo.186.1">18-24</span></em><span class="koboSpan" id="kobo.187.1">, </span><em class="italic"><span class="koboSpan" id="kobo.188.1">25-34</span></em><span class="koboSpan" id="kobo.189.1">, </span><em class="italic"><span class="koboSpan" id="kobo.190.1">35-44</span></em><span class="koboSpan" id="kobo.191.1">, and so on. </span><span class="koboSpan" id="kobo.191.2">This maintains the information about age groups without revealing </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">precise ages.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.193.1">Geographical aggregation</span></strong><span class="koboSpan" id="kobo.194.1">: Instead of using precise addresses, data can be aggregated at the city, state, or country level. </span><span class="koboSpan" id="kobo.194.2">For instance, </span><em class="italic"><span class="koboSpan" id="kobo.195.1">New York</span></em><span class="koboSpan" id="kobo.196.1"> could represent data from various neighborhoods within </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">the city.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.198.1">Income brackets</span></strong><span class="koboSpan" id="kobo.199.1">: Instead of exact income values, data can be grouped into income brackets such as </span><em class="italic"><span class="koboSpan" id="kobo.200.1">Low Income</span></em><span class="koboSpan" id="kobo.201.1">, </span><em class="italic"><span class="koboSpan" id="kobo.202.1">Middle Income</span></em><span class="koboSpan" id="kobo.203.1">, and </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.204.1">High Income</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.206.1">Time intervals</span></strong><span class="koboSpan" id="kobo.207.1">: Temporal data</span><a id="_idIndexMarker444"/><span class="koboSpan" id="kobo.208.1"> can be aggregated into time intervals, such as days, weeks, or months, rather than using exact timestamps. </span><span class="koboSpan" id="kobo.208.2">For example, </span><em class="italic"><span class="koboSpan" id="kobo.209.1">Q1 2023</span></em><span class="koboSpan" id="kobo.210.1"> could represent data from </span><em class="italic"><span class="koboSpan" id="kobo.211.1">January</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.212.1">to </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.213.1">March</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.215.1">Education levels</span></strong><span class="koboSpan" id="kobo.216.1">: Instead of specific degrees, data can be grouped by education-level categories such as </span><em class="italic"><span class="koboSpan" id="kobo.217.1">high school diploma</span></em><span class="koboSpan" id="kobo.218.1">, </span><em class="italic"><span class="koboSpan" id="kobo.219.1">bachelor’s degree</span></em><span class="koboSpan" id="kobo.220.1">, </span><em class="italic"><span class="koboSpan" id="kobo.221.1">master’s degree</span></em><span class="koboSpan" id="kobo.222.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">so on.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.224.1">Product categories</span></strong><span class="koboSpan" id="kobo.225.1">: Sales </span><a id="_idIndexMarker445"/><span class="koboSpan" id="kobo.226.1">data can be aggregated at the product category level rather than listing individual products; for example, </span><em class="italic"><span class="koboSpan" id="kobo.227.1">electronics</span></em><span class="koboSpan" id="kobo.228.1">, </span><em class="italic"><span class="koboSpan" id="kobo.229.1">clothing</span></em><span class="koboSpan" id="kobo.230.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">and </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.232.1">furniture</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.234.1">Customer segments</span></strong><span class="koboSpan" id="kobo.235.1">: Data can be grouped into segments based on customer behavior or characteristics, such as </span><em class="italic"><span class="koboSpan" id="kobo.236.1">frequent shoppers</span></em><span class="koboSpan" id="kobo.237.1">, </span><em class="italic"><span class="koboSpan" id="kobo.238.1">new customers</span></em><span class="koboSpan" id="kobo.239.1">, or </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.240.1">high-spending customers</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.242.1">Transaction amount ranges</span></strong><span class="koboSpan" id="kobo.243.1">: Instead of exact transaction amounts, financial data can be grouped into ranges such as </span><em class="italic"><span class="koboSpan" id="kobo.244.1">$0-$50</span></em><span class="koboSpan" id="kobo.245.1">, </span><em class="italic"><span class="koboSpan" id="kobo.246.1">$50-$100</span></em><span class="koboSpan" id="kobo.247.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">so on.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.249.1">Health conditions</span></strong><span class="koboSpan" id="kobo.250.1">: Medical data can be aggregated into broader health condition categories instead of specifying individual diagnoses; for example, </span><em class="italic"><span class="koboSpan" id="kobo.251.1">cardiovascular</span></em><span class="koboSpan" id="kobo.252.1">, </span><em class="italic"><span class="koboSpan" id="kobo.253.1">respiratory</span></em><span class="koboSpan" id="kobo.254.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">and </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.256.1">neurological</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.258.1">Web browsing patterns</span></strong><span class="koboSpan" id="kobo.259.1">: Internet browsing data can be aggregated based on website categories (for example, news, entertainment, shopping) rather than recording every </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">visited website.</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.261.1">Removing, combining, or masking sensitive information is not the only option. </span><span class="koboSpan" id="kobo.261.2">When we need to use sensitive data to train models, there are other techniques to either protect the data or manipulate the data in a way that still protects any sensitive information without limiting our </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">model’s potential.</span></span></p>
<p><span class="koboSpan" id="kobo.263.1">Let us explore how to protect the privacy of individual data without removing it from </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">the dataset.</span></span></p>
<h1 id="_idParaDest-123"><a id="_idTextAnchor131"/><span class="koboSpan" id="kobo.265.1">Introducing differential privacy</span></h1>
<p><span class="koboSpan" id="kobo.266.1">Differential privacy is </span><a id="_idIndexMarker446"/><span class="koboSpan" id="kobo.267.1">a concept that has the purpose of protecting the privacy of individual data contributors while still allowing useful statistical analysis. </span><span class="koboSpan" id="kobo.267.2">The basic idea behind differential privacy is to add noise or random perturbations to the data in such a way that the statistical properties of the dataset stay the same, but it is much more difficult to identify individual information within </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">the dataset.</span></span></p>
<p><span class="koboSpan" id="kobo.269.1">The level of privacy protection in differential privacy is controlled by a parameter called epsilon (ε). </span><span class="koboSpan" id="kobo.269.2">A smaller value of epsilon indicates a higher level of privacy, but it might also lead to a decrease in data utility (usefulness of the data for analysis). </span><span class="koboSpan" id="kobo.269.3">Striking a balance between privacy and utility is a key challenge in implementing </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">differential privacy:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer105">
<span class="koboSpan" id="kobo.271.1"><img alt="Figure 5.3 – Epsilon (﻿Ɛ) value relationship with privacy and accuracy" src="image/B21076_05_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.272.1">Figure 5.3 – Epsilon (Ɛ) value relationship with privacy and accuracy</span></p>
<p><span class="koboSpan" id="kobo.273.1">A library that we can use to add noise to the </span><a id="_idIndexMarker447"/><span class="koboSpan" id="kobo.274.1">data is the SmartNoise SDK. </span><span class="koboSpan" id="kobo.274.2">SmartNoise is an</span><a id="_idIndexMarker448"/><span class="koboSpan" id="kobo.275.1"> open source SDK designed to implement differential privacy in various data analysis and ML workflows. </span><span class="koboSpan" id="kobo.275.2">It is developed by OpenDP and aims to make it easier for data analysts, researchers, and data scientists to apply differential privacy techniques to their data without extensive knowledge of the underlying </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">mathematical complexities.</span></span></p>
<p><span class="koboSpan" id="kobo.277.1">The SmartNoise SDK provides a set of tools and utilities that can be integrated into existing data analysis and ML pipelines to ensure privacy-preserving computations. </span><span class="koboSpan" id="kobo.277.2">It offers an abstraction layer for adding differential privacy to computations, allowing data analysts to easily specify privacy parameters (such as epsilon) and apply privacy-preserving mechanisms without dealing directly with the intricacies of differential </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">privacy algorithms.</span></span></p>
<p><span class="koboSpan" id="kobo.279.1">There are different components you can use, and these are the official recommendations from </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">the documentation:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.281.1">Use </span><strong class="bold"><span class="koboSpan" id="kobo.282.1">OpenDP</span></strong><span class="koboSpan" id="kobo.283.1"> directly</span><a id="_idIndexMarker449"/><span class="koboSpan" id="kobo.284.1"> when working with Jupyter notebooks and reproducible research or if you require fine-grained control over processing </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">and privacy</span></span></li>
<li><span class="koboSpan" id="kobo.286.1">Use </span><strong class="bold"><span class="koboSpan" id="kobo.287.1">SmartNoise SQL</span></strong><span class="koboSpan" id="kobo.288.1"> if you</span><a id="_idIndexMarker450"/><span class="koboSpan" id="kobo.289.1"> are working with large datasets or data cubes over tabular data stored in SQL databases </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">or Spark</span></span></li>
<li><span class="koboSpan" id="kobo.291.1">Use </span><strong class="bold"><span class="koboSpan" id="kobo.292.1">SmartNoise Synthesizers</span></strong><span class="koboSpan" id="kobo.293.1"> if </span><a id="_idIndexMarker451"/><span class="koboSpan" id="kobo.294.1">you are still in the research process and you want to see what the result will look like with </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">other collaborators</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.296.1">Here, we will see an example</span><a id="_idIndexMarker452"/><span class="koboSpan" id="kobo.297.1"> by using </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">SmartNoise SQL:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.299.1">First, you need to install SmartNoise SQL by running </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">this command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.301.1">pip install smartnoise-sql</span></strong></pre></li> <li><span class="koboSpan" id="kobo.302.1">We will then load some mock data and analyze the results. </span><span class="koboSpan" id="kobo.302.2">Our mock dataset contains 1,000 records of random data that includes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">diabetic</span></strong><span class="koboSpan" id="kobo.304.1"> column that declares if the person is diabetic or not and an </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">age</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.306.1"> column:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.307.1">
import pandas as pd
data_path = 'mockdata.csv'
mockdata = pd.read_csv(data_path)
actualdata = mockdata[['age','diabetic']].groupby(\
    ['diabetic']).mean().to_markdown()
print(actualdata)</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.308.1">By running this cell, we get the true average age for diabetics </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">and non-diabetics.</span></span></p></li> <li><span class="koboSpan" id="kobo.310.1">Let us see what happens when we add noise to the data. </span><span class="koboSpan" id="kobo.310.2">First, we need to declare the epsilon variable. </span><span class="koboSpan" id="kobo.310.3">We will execute this code multiple times, first with a low epsilon value for greater privacy (</span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1">0.05</span></strong><span class="koboSpan" id="kobo.312.1">) and second with a high epsilon value for accuracy (</span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">0.90</span></strong><span class="koboSpan" id="kobo.314.1">), and compare </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">the results:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.316.1">
import snsql
from snsql import Privacy
import pandas as pd
privacy = Privacy(epsilon=0.05, delta=0.01)
csv_path = 'mockdata.csv'
meta_path = 'mockdata.yaml'
mockdata = pd.read_csv(csv_path)
reader = snsql.from_df(mockdata, privacy=privacy, \
    metadata=meta_path)
result = reader.execute('SELECT diabetic, AVG(age) \
    AS age FROM mockdata.table GROUP BY diabetic')
print(result)</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.317.1">We can see in </span><a id="_idIndexMarker453"/><span class="koboSpan" id="kobo.318.1">the following table a comparison of multiple executions of the preceding code side by side, and the average age for non-diabetic and diabetic patients is almost the same (around 47 years old), but when we use the SmartNoise SDK library with different epsilon values, the results start to vary from 1% to 15% depending on the epsilon value used. </span><span class="koboSpan" id="kobo.318.2">This percentage might seem high; however, it is up to us to determine the balance between privacy and accuracy. </span><span class="koboSpan" id="kobo.318.3">The only thing the library guarantees is to maintain </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">statistical uniformity:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.320.1">Actual average </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.321.1">age</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.322.1">Execution 1</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.323.1">Average age</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.324.1">Execution 2</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.325.1">Average age</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.326.1">Execution 3</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.327.1">Average age</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.328.1">Execution 4</span></strong></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.329.1">Average age</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.330.1">Epsilon </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">value</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.332.1">N/A</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.333.1">0.05</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.334.1">0.05</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.335.1">0.90</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.336.1">0.80</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.337.1">Non- </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">diabetic</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.339.1">47.4101</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.340.1">54.2823275862069</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.341.1">53.209829867674856</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.342.1">47.72727272727273</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.343.1">47.38953488372093</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.344.1">Diabetic</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.345.1">47.4741</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.346.1">42.19132149901381</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.347.1">44.00204081632653</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.348.1">47.36438923395445</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.349.1">47.616977225672876</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.350.1">Table 5.1 – Dataset results</span></p>
<p><span class="koboSpan" id="kobo.351.1">You can see</span><a id="_idIndexMarker454"/><span class="koboSpan" id="kobo.352.1"> how to run this notebook in the book repository mentioned previously in the </span><em class="italic"><span class="koboSpan" id="kobo.353.1">Technical requirements</span></em><span class="koboSpan" id="kobo.354.1"> section. </span><span class="koboSpan" id="kobo.354.2">This way, we can protect the privacy of the data without compromising the results of our model. </span><span class="koboSpan" id="kobo.354.3">What happens, though, when the data we are trying to protect actually affects the predictions, resulting in a </span><span class="No-Break"><span class="koboSpan" id="kobo.355.1">negative impact?</span></span></p>
<p><span class="koboSpan" id="kobo.356.1">Let’s see how we can ensure our data is private and the model also provides fair results for different </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">sensitive groups.</span></span></p>
<h1 id="_idParaDest-124"><a id="_idTextAnchor132"/><span class="koboSpan" id="kobo.358.1">Mitigating fairness</span></h1>
<p><span class="koboSpan" id="kobo.359.1">Mitigating</span><a id="_idIndexMarker455"/><span class="koboSpan" id="kobo.360.1"> fairness in ML models is an essential step to ensure that the model does not exhibit bias or discrimination against certain groups of individuals. </span><span class="koboSpan" id="kobo.360.2">Even though we can remove PII from our datasets, predictions might favor different groups based on characteristics such as race, gender, age, or religion. </span><span class="koboSpan" id="kobo.360.3">If the training data is not diverse and representative of the population you aim to serve, bias can creep into the model if the data does not adequately represent </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">all groups.</span></span></p>
<p><span class="koboSpan" id="kobo.362.1">Firstly, we need to learn to identify bias in our models. </span><span class="koboSpan" id="kobo.362.2">This is easy by conducting an analysis of the metrics of the model. </span><span class="koboSpan" id="kobo.362.3">Suppose you suspect that your load approval model favors people above a certain age to get their loan application approved. </span><span class="koboSpan" id="kobo.362.4">You can start by looking at the metrics for the complete dataset </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">as follows:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.364.1">Selection Rate</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.365.1">Accuracy</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.366.1">Recall</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.367.1">Precision</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.368.1">Complete dataset</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.369.1">0.337</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.370.1">0.8895</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.371.1">0.8385650224215246</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.372.1">0.8323442136498517</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.373.1">Table 5.2 – Dataset metrics</span></p>
<p><span class="koboSpan" id="kobo.374.1">Now, calculate the same metrics by age group. </span><span class="koboSpan" id="kobo.374.2">We can do this by using a library such as Fairlearn. </span><span class="koboSpan" id="kobo.374.3">The</span><a id="_idIndexMarker456"/><span class="koboSpan" id="kobo.375.1"> result from the split looks </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">like this:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style"/>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.377.1">Selection Rate</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.378.1">Accuracy</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.379.1">Recall</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.380.1">Precision</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.381.1">Age 30 </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">or younger</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.383.1">0.299282</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.384.1">0.890668</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.385.1">0.818519</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.386.1">0.815498</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.387.1">Age </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">over 30</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.389.1">0.698413</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.390.1">0.878307</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.391.1">0.922481</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.392.1">0.901515</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.393.1">Table 5.3 – Metrics per age group</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.394.1">Metrics explained</span></p>
<p class="callout"><span class="koboSpan" id="kobo.395.1">Metrics are specific to the type of model. </span><span class="koboSpan" id="kobo.395.2">The preceding metrics are for classification models. </span><span class="koboSpan" id="kobo.395.3">You can find a list of metrics for different models and charts with an explanation </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">here: </span></span><a href="https://learn.microsoft.com/en-us/azure/machine-learning/how-to-understand-automated-ml?view=azureml-api-2"><span class="No-Break"><span class="koboSpan" id="kobo.397.1">https://learn.microsoft.com/en-us/azure/machine-learning/how-to-understand-automated-ml?view=azureml-api-2</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.398.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.399.1">From these metrics, you should be able to discern that a larger proportion of older individuals are predicted to be approved for the loan. </span><span class="koboSpan" id="kobo.399.2">Accuracy should be more or less equal for the two groups, but a closer inspection of precision and recall indicates some disparity in how well the model predicts for each </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">age group.</span></span></p>
<p><span class="koboSpan" id="kobo.401.1">In this scenario, consider </span><strong class="bold"><span class="koboSpan" id="kobo.402.1">Recall</span></strong><span class="koboSpan" id="kobo.403.1">. </span><span class="koboSpan" id="kobo.403.2">This</span><a id="_idIndexMarker457"/><span class="koboSpan" id="kobo.404.1"> metric indicates the proportion of positive cases that were correctly identified by the model. </span><span class="koboSpan" id="kobo.404.2">In other words, of all the individuals who should get approval for their loan application and they actually do, how many did the model find? </span><span class="koboSpan" id="kobo.404.3">The model seems to do a better job in the older </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">age group.</span></span></p>
<p><span class="koboSpan" id="kobo.406.1">So, what do we do now? </span><span class="koboSpan" id="kobo.406.2">Do we try to correct the data and model to predict equally between the two groups? </span><span class="koboSpan" id="kobo.406.3">The short answer is </span><em class="italic"><span class="koboSpan" id="kobo.407.1">not yet</span></em><span class="koboSpan" id="kobo.408.1">. </span><span class="koboSpan" id="kobo.408.2">We need to consider the context first and evaluate why the model exhibits this behavior, and whether this is justified. </span><span class="koboSpan" id="kobo.408.3">Remember that metrics are just metrics, and it is up to us to interpret them. </span><span class="koboSpan" id="kobo.408.4">Maybe our model favors the older age group because they are more financially stable. </span><span class="koboSpan" id="kobo.408.5">We need to investigate more before we reach a decision because this identified bias might be reasonable. </span><span class="koboSpan" id="kobo.408.6">Suppose we had a face recognition application that favored light-skinned people over dark-skinned people; this would be a clear bias and would need to be corrected. </span><span class="koboSpan" id="kobo.408.7">The context and the model’s purpose will define our </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">next steps.</span></span></p>
<h2 id="_idParaDest-125"><a id="_idTextAnchor133"/><span class="koboSpan" id="kobo.410.1">Fairlearn</span></h2>
<p><span class="koboSpan" id="kobo.411.1">Fairlearn is </span><a id="_idIndexMarker458"/><span class="koboSpan" id="kobo.412.1">an open source project to help ML engineers and data scientists improve the fairness of AI systems. </span><span class="koboSpan" id="kobo.412.2">It can assist by providing fairness-related metrics that can be compared between groups and for the overall population. </span><span class="koboSpan" id="kobo.412.3">To calculate those metrics and conduct an investigation, the Fairlearn SDK is immensely helpful. </span><span class="koboSpan" id="kobo.412.4">It breaks down the metrics from each sensitive group, and then you can use the fairness dashboard to complete your assessment, as looking at the data visually </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">always helps.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.414.1">Fairlearn SDK and Azure Machine Learning</span></p>
<p class="callout"><span class="koboSpan" id="kobo.415.1">This feature is in Preview at the time of writing, so you can see limitations and applications in the Azure Machine Learning environment here: </span><a href="https://learn.microsoft.com/en-us/azure/machine-learning/how-to-machine-learning-fairness-aml?view=azureml-api-1"><span class="koboSpan" id="kobo.416.1">https://learn.microsoft.com/en-us/azure/machine-learning/how-to-machine-learning-fairness-aml?view=azureml-api-1</span></a><span class="koboSpan" id="kobo.417.1">. </span><span class="koboSpan" id="kobo.417.2">The Fairlearn project documentation can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">here: </span></span><a href="https://fairlearn.org/"><span class="No-Break"><span class="koboSpan" id="kobo.419.1">https://fairlearn.org/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.420.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.421.1">Here, you can see an </span><a id="_idIndexMarker459"/><span class="koboSpan" id="kobo.422.1">example process of working with the visual dashboard. </span><span class="koboSpan" id="kobo.422.2">You can generate the UI in your notebooks, and it looks </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">like this:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer106">
<span class="koboSpan" id="kobo.424.1"><img alt="Figure 5.4 – Fairness dashboard main page" src="image/B21076_05_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.425.1">Figure 5.4 – Fairness dashboard main page</span></p>
<p><span class="koboSpan" id="kobo.426.1">You can also register the model and upload the dashboard data to your</span><a id="_idIndexMarker460"/><span class="koboSpan" id="kobo.427.1"> workspace to conduct your assessment, as seen in the following screenshot. </span><span class="koboSpan" id="kobo.427.2">The process is much easier with the help of </span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">the wizard:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.429.1">The first step is to choose sensitive features; for example, the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.430.1">Age</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.431.1"> column:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer107">
<span class="koboSpan" id="kobo.432.1"><img alt="Figure 5.5 – Step 1: Choosing your sensitive features" src="image/B21076_05_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.433.1">Figure 5.5 – Step 1: Choosing your sensitive features</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.434.1">The second step is to choose a metric to evaluate against in order to examine any possible bias. </span><span class="koboSpan" id="kobo.434.2">Depending on the model algorithm, you might get different metrics here to </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">choose from:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer108">
<span class="koboSpan" id="kobo.436.1"><img alt="Figure 5.6 – Step 2: Choosing a primary metric to measure performance" src="image/B21076_05_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.437.1">Figure 5.6 – Step 2: Choosing a primary metric to measure performance</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.438.1">In the</span><a id="_idIndexMarker461"/><span class="koboSpan" id="kobo.439.1"> third and final step, you set the parity constraints against which you want to measure fairness; for example, demographic parity or </span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">selection rate:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer109">
<span class="koboSpan" id="kobo.441.1"><img alt="Figure 5.7 – Step 3: Choose how you want to measure fairness" src="image/B21076_05_7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.442.1">Figure 5.7 – Step 3: Choose how you want to measure fairness</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.443.1">The service runs an analysis based on the parameters and returns results that we can </span><a id="_idIndexMarker462"/><span class="koboSpan" id="kobo.444.1">use to determine if the model favors one or more groups based on </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">sensitive features:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer110">
<span class="koboSpan" id="kobo.446.1"><img alt="Figure 5.8 – Reviewing the results" src="image/B21076_05_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.447.1">Figure 5.8 – Reviewing the results</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.448.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.449.1">The integration with the Fairlearn open source package is supported at the time of writing only on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.450.1">azureml v1</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.451.1">Python SDK.</span></span></p>
<p><span class="koboSpan" id="kobo.452.1">Always remember that complete fairness may not always be achievable, and trade-offs may exist between different fairness goals. </span><span class="koboSpan" id="kobo.452.2">We need to ensure that the model performs adequately for all sensitive groups in our datasets. </span><span class="koboSpan" id="kobo.452.3">The key is to make informed decisions about fairness trade-offs and continuously strive to improve the </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">model’s fairness.</span></span></p>
<p><span class="koboSpan" id="kobo.454.1">Another part of responsible AI is the ability to explain how a model makes predictions. </span><span class="koboSpan" id="kobo.454.2">Let us see some techniques in the </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">following section.</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor134"/><span class="koboSpan" id="kobo.456.1">Working with model interpretability</span></h1>
<p><span class="koboSpan" id="kobo.457.1">Model interpretability</span><a id="_idIndexMarker463"/><span class="koboSpan" id="kobo.458.1"> in ML refers to the ability to understand and explain how a particular model makes predictions or decisions. </span><span class="koboSpan" id="kobo.458.2">Interpretable models provide clear insights into the features or variables that are most influential in the model’s decision-making process. </span><span class="koboSpan" id="kobo.458.3">This is particularly important in domains where the decision-making process needs to be transparent and understandable, such as healthcare, finance, and </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">legal systems.</span></span></p>
<p><span class="koboSpan" id="kobo.460.1">Although you can never explain 100% why a model makes a prediction, you can use explainers to understand which features affect the results. </span><span class="koboSpan" id="kobo.460.2">Explainers can help us provide global explanations; for example, which features affect the overall behavior of the model or local explanations that provide us with information on what influenced an </span><span class="No-Break"><span class="koboSpan" id="kobo.461.1">individual prediction.</span></span></p>
<p><span class="koboSpan" id="kobo.462.1">Let us explore some methods we can use</span><a id="_idIndexMarker464"/><span class="koboSpan" id="kobo.463.1"> to achieve </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">model interpretability:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.465.1">Feature importance</span></strong><span class="koboSpan" id="kobo.466.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.467.1">FI</span></strong><span class="koboSpan" id="kobo.468.1">) determines </span><a id="_idIndexMarker465"/><span class="koboSpan" id="kobo.469.1">the influence of each feature in influencing the model’s predictions. </span><span class="koboSpan" id="kobo.469.2">Techniques such as the following can </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">be used:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.471.1">Permutation FI</span></strong><span class="koboSpan" id="kobo.472.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.473.1">PFI</span></strong><span class="koboSpan" id="kobo.474.1">): This </span><a id="_idIndexMarker466"/><span class="koboSpan" id="kobo.475.1">method involves randomly shuffling the values of each feature and measuring the impact on the model’s performance. </span><span class="koboSpan" id="kobo.475.2">Features with the highest drop in performance after shuffling are considered </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">more important.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.477.1">SHapley Additive exPlanations (SHAP) values</span></strong><span class="koboSpan" id="kobo.478.1">: SHAP values provide a unified</span><a id="_idIndexMarker467"/><span class="koboSpan" id="kobo.479.1"> measure of FI based on cooperative game theory. </span><span class="koboSpan" id="kobo.479.2">They assign contributions to each feature in a prediction, considering all possible </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">feature combinations.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.481.1">Local Interpretable Model-agnostic Explanations</span></strong><span class="koboSpan" id="kobo.482.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.483.1">LIME</span></strong><span class="koboSpan" id="kobo.484.1">): LIME creates </span><a id="_idIndexMarker468"/><span class="koboSpan" id="kobo.485.1">local interpretable models around a specific prediction by perturbing the data and observing the impact on the prediction. </span><span class="koboSpan" id="kobo.485.2">It helps explain individual predictions for </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">any model.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.487.1">Partial dependence plots</span></strong><span class="koboSpan" id="kobo.488.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.489.1">PDP</span></strong><span class="koboSpan" id="kobo.490.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.491.1">individual conditional expectation</span></strong><span class="koboSpan" id="kobo.492.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.493.1">ICE</span></strong><span class="koboSpan" id="kobo.494.1">) test </span><a id="_idIndexMarker469"/><span class="koboSpan" id="kobo.495.1">the feature influence on the model by </span><a id="_idIndexMarker470"/><span class="koboSpan" id="kobo.496.1">using </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">different techniques:</span></span><ul><li><span class="koboSpan" id="kobo.498.1">PDP </span><a id="_idIndexMarker471"/><span class="koboSpan" id="kobo.499.1">plots the average effect of a single feature on the model’s predictions while keeping other </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">features constant.</span></span></li><li><span class="koboSpan" id="kobo.501.1">ICE plots multiple individual PDPs, one for each instance, providing a more granular view of how the feature affects </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">different instances.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.503.1">Rule-based models</span></strong><span class="koboSpan" id="kobo.504.1">: Decision</span><a id="_idIndexMarker472"/><span class="koboSpan" id="kobo.505.1"> trees and linear models are inherently interpretable as their structure can be easily visualized </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">and understood.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.507.1">Proxy models</span></strong><span class="koboSpan" id="kobo.508.1">: Train</span><a id="_idIndexMarker473"/><span class="koboSpan" id="kobo.509.1"> a simpler, interpretable model to approximate the behavior of a more complex model. </span><span class="koboSpan" id="kobo.509.2">This allows for better understanding without sacrificing too </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">much accuracy.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.511.1">Visualizations</span></strong><span class="koboSpan" id="kobo.512.1">: Visualizations</span><a id="_idIndexMarker474"/><span class="koboSpan" id="kobo.513.1"> such as heatmaps, saliency maps, and activation maps can help understand how the model processes and weighs different </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">input features.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.515.1">Layer-wise Relevance Propagation</span></strong><span class="koboSpan" id="kobo.516.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.517.1">LRP</span></strong><span class="koboSpan" id="kobo.518.1">): LRP is </span><a id="_idIndexMarker475"/><span class="koboSpan" id="kobo.519.1">a technique used </span><a id="_idIndexMarker476"/><span class="koboSpan" id="kobo.520.1">in </span><strong class="bold"><span class="koboSpan" id="kobo.521.1">neural networks</span></strong><span class="koboSpan" id="kobo.522.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.523.1">NNs</span></strong><span class="koboSpan" id="kobo.524.1">) to understand which input features contribute most to a </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">specific output.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.526.1">The method we choose depends on our model and the flavor used to create it. </span><span class="koboSpan" id="kobo.526.2">Let us see the options we have for model interpretability in Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">Machine Learning.</span></span></p>
<h2 id="_idParaDest-127"><a id="_idTextAnchor135"/><span class="koboSpan" id="kobo.528.1">Exploring the Responsible AI dashboard</span></h2>
<p><span class="koboSpan" id="kobo.529.1">To work with</span><a id="_idIndexMarker477"/><span class="koboSpan" id="kobo.530.1"> interpretability in Azure Machine Learning, you can use the Interpret-Community package for the v1 SDK, or it is recommended to use the newer version, which is part of the new Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">AI dashboard.</span></span></p>
<p><span class="koboSpan" id="kobo.532.1">Let us explore the </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">capabilities available:</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.534.1">Model interpretability in Azure Machine Learning</span></p>
<p class="callout"><span class="koboSpan" id="kobo.535.1">Learn more about the Interpret-Community package in Azure Machine Learning and how common explainers work in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">documentation: </span></span><a href="https://learn.microsoft.com/en-us/azure/machine-learning/how-to-machine-learning-interpretability?view=azureml-api-2#supported-model-interpretability-techniques"><span class="No-Break"><span class="koboSpan" id="kobo.537.1">https://learn.microsoft.com/en-us/azure/machine-learning/how-to-machine-learning-interpretability?view=azureml-api-2#supported-model-interpretability-techniques</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.538.1">.</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.539.1">You can generate a dashboard in any model in the MLflow format generated with the scikit-learn by going to your registered model under the </span><strong class="bold"><span class="koboSpan" id="kobo.540.1">Models</span></strong><span class="koboSpan" id="kobo.541.1"> menu, choosing the </span><strong class="bold"><span class="koboSpan" id="kobo.542.1">Responsible AI</span></strong><span class="koboSpan" id="kobo.543.1"> tab, and clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.544.1">Create dashboard</span></strong><span class="koboSpan" id="kobo.545.1"> button, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer111">
<span class="koboSpan" id="kobo.547.1"><img alt="Figure 5.9 – Creating a Responsible AI dashboard" src="image/B21076_05_9.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.548.1">Figure 5.9 – Creating a Responsible AI dashboard</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.549.1">MLflow models</span></p>
<p class="callout"><span class="koboSpan" id="kobo.550.1">MLflow is an open source platform designed to manage the end-to-end ML life cycle by providing a consistent and easy-to-use framework, making collaboration and reproducibility more accessible for data science and ML teams. </span><span class="koboSpan" id="kobo.550.2">Find out more </span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">here: </span></span><a href="https://mlflow.org/"><span class="No-Break"><span class="koboSpan" id="kobo.552.1">https://mlflow.org/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.553.1">.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.554.1">As soon </span><a id="_idIndexMarker478"/><span class="koboSpan" id="kobo.555.1">as the dashboard is generated, you can click on it on the list to view </span><span class="No-Break"><span class="koboSpan" id="kobo.556.1">more details:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer112">
<span class="koboSpan" id="kobo.557.1"><img alt="Figure 5.10 – Opening the dashboard" src="image/B21076_05_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.558.1">Figure 5.10 – Opening the dashboard</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.559.1">The dashboard has a lot of information to help not only with explainability but also metrics about fairness, data distribution, and individual predictions. </span><span class="koboSpan" id="kobo.559.2">Along with the data, there are numerous visualizations you can take advantage of to analyze your model, as seen in the following screenshot. </span><span class="koboSpan" id="kobo.559.3">Make sure you adhere to responsible AI </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">development principles:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer113">
<span class="koboSpan" id="kobo.561.1"><img alt="Figure 5.11 – Reviewing the metrics" src="image/B21076_05_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.562.1">Figure 5.11 – Reviewing the metrics</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.563.1">When it </span><a id="_idIndexMarker479"/><span class="koboSpan" id="kobo.564.1">comes to model interpretability, you can see FIs for the complete dataset and for individual predictions. </span><span class="koboSpan" id="kobo.564.2">You can tweak the class importance weights and the chart to suit your needs and understand the </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">model better.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.566.1">In the next screenshot, we can see global FIs for a sample </span><span class="No-Break"><span class="koboSpan" id="kobo.567.1">diabetes dataset:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer114">
<span class="koboSpan" id="kobo.568.1"><img alt="Figure 5.12 – Reviewing FIs" src="image/B21076_05_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.569.1">Figure 5.12 – Reviewing FIs</span></p>
<p><span class="koboSpan" id="kobo.570.1">Model interpretability</span><a id="_idIndexMarker480"/><span class="koboSpan" id="kobo.571.1"> is a balance between simplicity and accuracy. </span><span class="koboSpan" id="kobo.571.2">Highly interpretable models might sacrifice some predictive performance, while very complex models might be difficult to explain comprehensively. </span><span class="koboSpan" id="kobo.571.3">The choice of interpretability method depends on the specific use case, audience, and the trade-off between model complexity </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">and transparency.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.573.1">Generating an AI dashboard using the SDK</span></p>
<p class="callout"><span class="koboSpan" id="kobo.574.1">For further resources to build the AI dashboard using the SDK using YAML and Python, see </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">here: </span></span><a href="https://learn.microsoft.com/en-us/azure/machine-learning/how-to-responsible-ai-insights-sdk-cli?view=azureml-api-2&amp;tabs=yaml"><span class="No-Break"><span class="koboSpan" id="kobo.576.1">https://learn.microsoft.com/en-us/azure/machine-learning/how-to-responsible-ai-insights-sdk-cli?view=azureml-api-2&amp;tabs=yaml</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.577.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.578.1">All the techniques we have seen so far focus on having one dataset that is trained on one compute resource to generate the resulting model. </span><span class="koboSpan" id="kobo.578.2">In the next section, we will see some techniques that focus on splitting model training and datasets between different </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">compute sources.</span></span></p>
<h1 id="_idParaDest-128"><a id="_idTextAnchor136"/><span class="koboSpan" id="kobo.580.1">Exploring FL and secure multi-party computation</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.581.1">FL</span></strong><span class="koboSpan" id="kobo.582.1"> is an ML </span><a id="_idIndexMarker481"/><span class="koboSpan" id="kobo.583.1">approach that enables the training of models across multiple devices or servers without centrally aggregating the raw data. </span><span class="koboSpan" id="kobo.583.2">In traditional ML, data is usually collected and sent to a central compute server for training, which raises privacy and security concerns, especially when dealing with sensitive or </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">personal information.</span></span></p>
<p><span class="koboSpan" id="kobo.585.1">In FL, the training process</span><a id="_idIndexMarker482"/><span class="koboSpan" id="kobo.586.1"> happens locally on the devices or nodes (for example smartphones, edge devices, or compute instances) that generate or</span><a id="_idIndexMarker483"/><span class="koboSpan" id="kobo.587.1"> store the data. </span><span class="koboSpan" id="kobo.587.2">These nodes collaborate by sharing only model updates (gradients) rather than the raw data itself. </span><span class="koboSpan" id="kobo.587.3">The central compute server aggregates these updates to create an improved global model. </span><span class="koboSpan" id="kobo.587.4">This process is repeated iteratively, with each node contributing to the model’s improvement while keeping its </span><span class="No-Break"><span class="koboSpan" id="kobo.588.1">data private.</span></span></p>
<p><span class="koboSpan" id="kobo.589.1">The main advantages </span><a id="_idIndexMarker484"/><span class="koboSpan" id="kobo.590.1">of FL are </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.592.1">Privacy</span></strong><span class="koboSpan" id="kobo.593.1">: As the raw data remains on the local nodes, there is no need to share sensitive information with a central server, reducing the risk of data leaks </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">and breaches</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.595.1">Reduced data transmission</span></strong><span class="koboSpan" id="kobo.596.1">: FL decreases the amount of data that needs to be sent over the network, which can be beneficial when dealing with large datasets or </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">bandwidth constraints</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.598.1">Decentralization</span></strong><span class="koboSpan" id="kobo.599.1">: The model training process can be distributed across a large number of nodes, enabling scalability and robustness in a </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">distributed environment</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.601.1">Local adaptation</span></strong><span class="koboSpan" id="kobo.602.1">: Nodes can update the global model while taking into account their local data distribution, leading to models that are more relevant and tailored to specific </span><span class="No-Break"><span class="koboSpan" id="kobo.603.1">local characteristics</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.604.1">FL is especially useful in scenarios where data privacy and security are crucial, such as healthcare and financial services, and processing</span><a id="_idIndexMarker485"/><span class="koboSpan" id="kobo.605.1"> can be distributed as in </span><strong class="bold"><span class="koboSpan" id="kobo.606.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.607.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.608.1">IoT</span></strong><span class="koboSpan" id="kobo.609.1">) applications. </span><span class="koboSpan" id="kobo.609.2">It gives us the opportunity to leverage the collective knowledge from distributed data sources without compromising the privacy of </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">individual users.</span></span></p>
<p><span class="koboSpan" id="kobo.611.1">Let us see a quick introduction to FL and its applications with Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.612.1">Machine Learning.</span></span></p>
<h2 id="_idParaDest-129"><a id="_idTextAnchor137"/><span class="koboSpan" id="kobo.613.1">FL with Azure Machine Learning</span></h2>
<p><span class="koboSpan" id="kobo.614.1">When working</span><a id="_idIndexMarker486"/><span class="koboSpan" id="kobo.615.1"> in the cloud, FL can be easier than you might think. </span><span class="koboSpan" id="kobo.615.2">With on-demand compute and processing power come a lot of benefits. </span><span class="koboSpan" id="kobo.615.3">Especially with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.616.1">azureml</span></strong><span class="koboSpan" id="kobo.617.1"> SDK v2, FL features are </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">built in.</span></span></p>
<p><span class="koboSpan" id="kobo.619.1">The easiest way to integrate is by using designer pipelines. </span><span class="koboSpan" id="kobo.619.2">The designer has a drag-and-drop interface. </span><span class="koboSpan" id="kobo.619.3">With the new version of the SDK come several exciting features. </span><span class="koboSpan" id="kobo.619.4">We can create our own component very easily, and each component that you drag and drop in the pipeline can be run on a different </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">compute target.</span></span></p>
<p><span class="koboSpan" id="kobo.621.1">In the following screenshot, we can see a pipeline created in the designer from the pre-built samples. </span><span class="koboSpan" id="kobo.621.2">By clicking on a component, we can easily change the compute target from the </span><strong class="bold"><span class="koboSpan" id="kobo.622.1">Pipeline interface</span></strong><span class="koboSpan" id="kobo.623.1"> button by going to the </span><strong class="bold"><span class="koboSpan" id="kobo.624.1">Run settings</span></strong><span class="koboSpan" id="kobo.625.1"> option and choosing </span><strong class="bold"><span class="koboSpan" id="kobo.626.1">Use other </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.627.1">compute target</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer115">
<span class="koboSpan" id="kobo.629.1"><img alt="Figure 5.13 – Changing the compute target in Azure Machine Learning" src="image/B21076_05_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.630.1">Figure 5.13 – Changing the compute target in Azure Machine Learning</span></p>
<p><span class="koboSpan" id="kobo.631.1">If we extend the functionality and train multiple models at the same time using different datasets, we have an FL implementation and multi-party computation. </span><span class="koboSpan" id="kobo.631.2">For compute, we can also leverage Azure confidential computing to make the implementation even more secure, but we will talk about securing Azure compute in Azure Machine Learning later in the book. </span><span class="koboSpan" id="kobo.631.3">This can also be extended to using multiple workspaces connected to the same or different </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">data stores.</span></span></p>
<p><span class="koboSpan" id="kobo.633.1">The great</span><a id="_idIndexMarker487"/><span class="koboSpan" id="kobo.634.1"> thing about using FL with Azure Machine Learning is that you can still combine and apply all the metrics and techniques we have outlined in this chapter since we are still working within </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">the workspace.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.636.1">FL recipes and examples</span></p>
<p class="callout"><span class="koboSpan" id="kobo.637.1">Find out more on how to implement Azure Machine Learning </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">here: </span></span><a href="https://github.com/Azure-Samples/azure-ml-federated-learning"><span class="No-Break"><span class="koboSpan" id="kobo.639.1">https://github.com/Azure-Samples/azure-ml-federated-learning</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.640.1">.</span></span></p>
<h1 id="_idParaDest-130"><a id="_idTextAnchor138"/><span class="koboSpan" id="kobo.641.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.642.1">Protecting sensitive data is a multi-faceted problem. </span><span class="koboSpan" id="kobo.642.2">There are ways and techniques to mitigate fairness and protect privacy work ethically and responsibly with AI, but the balance between prediction accuracy and data protection is very sensitive. </span><span class="koboSpan" id="kobo.642.3">If you add the complexity of choosing the right combination of techniques based on your data and algorithms, it can </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">seem daunting.</span></span></p>
<p><span class="koboSpan" id="kobo.644.1">In this chapter, we learned to identify different types of sensitive data and common techniques to remove or mask them. </span><span class="koboSpan" id="kobo.644.2">However, it is not always possible to completely eliminate them as they are useful for the model training process. </span><span class="koboSpan" id="kobo.644.3">In this case, there are several libraries available to help. </span><span class="koboSpan" id="kobo.644.4">We can use the SmartNoise SDK to introduce noise to our data and protect privacy, work with the Fairlearn SDK to mitigate fairness, and use the Responsible AI dashboard together with explainers to interpret our models. </span><span class="koboSpan" id="kobo.644.5">We ended this chapter by introducing the concept of FL and how to apply it using Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">Machine Learning.</span></span></p>
<p><span class="koboSpan" id="kobo.646.1">We can talk about data until the end of the book, but the truth is, there is only so much you can do in data processing. </span><span class="koboSpan" id="kobo.646.2">In the next chapter, we will focus on working with access to the data, the workspace, and the roles required for </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">each part.</span></span></p>
<h1 id="_idParaDest-131"><a id="_idTextAnchor139"/><span class="koboSpan" id="kobo.648.1">Further reading</span></h1>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.649.1">Run a Federated Learning Demo in 5 </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.650.1">mins</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">: </span></span><a href="https://github.com/Azure-Samples/azure-ml-federated-learning/blob/main/docs/quickstart.md"><span class="No-Break"><span class="koboSpan" id="kobo.652.1">https://github.com/Azure-Samples/azure-ml-federated-learning/blob/main/docs/quickstart.md</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.653.1">Federated Learning with Azure Machine Learning, NVIDIA FLARE and MONAI</span></em><span class="koboSpan" id="kobo.654.1"> – Build </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">session: </span></span><a href="https://build.microsoft.com/en-US/sessions/5bd5120f-5239-450d-8a57-373efb43c0cf?source=sessions"><span class="No-Break"><span class="koboSpan" id="kobo.656.1">https://build.microsoft.com/en-US/sessions/5bd5120f-5239-450d-8a57-373efb43c0cf?source=sessions</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.657.1">Medical Imaging with Azure Machine Learning </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.658.1">Demos</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">: </span></span><a href="https://github.com/Azure/medical-imaging"><span class="No-Break"><span class="koboSpan" id="kobo.660.1">https://github.com/Azure/medical-imaging</span></span></a></li>
</ul>
</div>


<div class="Content" id="_idContainer117">
<h1 id="_idParaDest-132" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor140"/><span class="koboSpan" id="kobo.1.1">Part 3: Securing and Monitoring Your AI Environment</span></h1>
<p><span class="koboSpan" id="kobo.2.1">When it comes to the cloud, there is more to security than data. </span><span class="koboSpan" id="kobo.2.2">In this part, you will learn how to secure identity and access and all the cloud infrastructure around your Azure Machine Learning resources. </span><span class="koboSpan" id="kobo.2.3">Then, you will learn how to automate those processes using MLOps practices and how to set up system monitoring to detect and resolve any </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">security issues.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B21076_06.xhtml#_idTextAnchor141"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 6</span></em></a><em class="italic"><span class="koboSpan" id="kobo.7.1">, Managing and Securing Access</span></em></li>
<li><a href="B21076_07.xhtml#_idTextAnchor160"><em class="italic"><span class="koboSpan" id="kobo.8.1">Chapter 7</span></em></a><em class="italic"><span class="koboSpan" id="kobo.9.1">, Managing and Securing your Azure Machine Learning Workspace</span></em></li>
<li><a href="B21076_08.xhtml#_idTextAnchor176"><em class="italic"><span class="koboSpan" id="kobo.10.1">Chapter 8</span></em></a><em class="italic"><span class="koboSpan" id="kobo.11.1">, Managing and Securing the MLOps Life Cycle</span></em></li>
<li><a href="B21076_09.xhtml#_idTextAnchor189"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 9</span></em></a><em class="italic"><span class="koboSpan" id="kobo.13.1">, Logging, Monitoring, and Threat Detection</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer118">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer119">
</div>
</div>
</body></html>