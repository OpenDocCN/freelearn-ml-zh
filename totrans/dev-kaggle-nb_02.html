<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer028">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 class="chapterTitle" id="_idParaDest-24"><span class="koboSpan" id="kobo.2.1">Getting Ready for Your Kaggle Environment</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to create your Kaggle account, and what is most important to know about Competitions, Datasets, Code (Notebooks), Discussions, and Kaggle Learn and Models. </span><span class="koboSpan" id="kobo.3.2">In this chapter, we will explore the Kaggle Notebooks functionality. </span><span class="koboSpan" id="kobo.3.3">Kernels and Code are used as alternative names sometimes to refer to Notebooks, Kernels being the old name and Code being the new menu name for Notebooks. </span><span class="koboSpan" id="kobo.3.4">Both terms, the old one and the new one, illustrate something important about a notebook on Kaggle.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">We will start by introducing what a Kaggle Notebook is and explaining the difference between Kaggle Scripts and Kaggle Notebooks. </span><span class="koboSpan" id="kobo.4.2">We will then show how we can create a notebook, either from scratch or derived from an existing one. </span><span class="koboSpan" id="kobo.4.3">After you start to edit a notebook, you have multiple options, and we will review each of them in this chapter, starting with the most common (editing data sources and models, changing computing resources, etc.) and then following with the remaining ones (setting a notebook as script, adding utility scripts to the notebook, adding and using secrets, etc.).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.5.1">In a nutshell, the following main topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">What is a Kaggle Notebook?</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">How to create notebooks</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Exploring Notebook capabilities</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.9.1">Using the Kaggle API</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-25"><span class="koboSpan" id="kobo.10.1">What is a Kaggle Notebook?</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.11.1">Kaggle Notebooks</span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.12.1"> are integrated development environments that allow you to write code, version it, run it (using Kaggle platform computational resources), and produce the results in various forms. </span><span class="koboSpan" id="kobo.12.2">When you initiate work on a notebook, you start a coding editor. </span><span class="koboSpan" id="kobo.12.3">This, in turn, starts a Docker container, provisioned with the most used Python packages for data analysis and machine learning, running in a virtual machine allocated in Google Cloud. </span><span class="koboSpan" id="kobo.12.4">The code itself is linked to a code repository.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.13.1">You can write code in one of two languages: Python or R. </span><span class="koboSpan" id="kobo.13.2">Currently, Python is used by most of the users on Kaggle, and all examples in this book will only be in Python.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.14.1">The term </span><strong class="keyWord"><span class="koboSpan" id="kobo.15.1">Notebooks</span></strong><span class="koboSpan" id="kobo.16.1"> is used generically, but there are two types of Kaggle Notebooks: Scripts and Notebooks.</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.17.1">Kaggle Scripts</span></strong><span class="koboSpan" id="kobo.18.1">: Scripts</span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.19.1"> are files that will execute all code sequentially. </span><span class="koboSpan" id="kobo.19.2">The output of the scripts’ execution will be printed in the console. </span><span class="koboSpan" id="kobo.19.3">If you want, you can also execute a part of the script only, by selecting a few lines and pressing the </span><strong class="screenText"><span class="koboSpan" id="kobo.20.1">Run</span></strong><span class="koboSpan" id="kobo.21.1"> button. </span><span class="koboSpan" id="kobo.21.2">If you are using the R language for development, you can use a special type of script, RMarkdown script. </span><span class="koboSpan" id="kobo.21.3">The environment to develop it is similar to the one for Python or R scripts, but you can use the syntax for RMarkdown, and the output will be a combination of the R code execution results and the RMarkdown syntax for text and graphical effects.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.22.1">Kaggle Notebooks</span></strong><span class="koboSpan" id="kobo.23.1">: Notebooks have a similar look and feel as Jupyter Notebooks. </span><span class="koboSpan" id="kobo.23.2">They are similar</span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.24.1"> but not identical. </span><span class="koboSpan" id="kobo.24.2">Kaggle Notebooks have multiple additional options to support integration with a Kaggle environment and a better user experience. </span><span class="koboSpan" id="kobo.24.3">Notebooks are composed of a succession of cells with either code or Markdown content, and each cell can be executed independently. </span><span class="koboSpan" id="kobo.24.4">You can code using either R or Python while using Notebooks. </span><span class="koboSpan" id="kobo.24.5">When running a cell, the output generated is displayed right under the cell in the case of code cells.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.25.1">With a brief overview of Kaggle Notebooks and their essential components, let’s see now how you can create a notebook.</span></p>
<h1 class="heading-1" id="_idParaDest-26"><span class="koboSpan" id="kobo.26.1">How to create notebooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.27.1">There are</span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.28.1"> several ways to start a notebook. </span><span class="koboSpan" id="kobo.28.2">You can start it from the main menu </span><strong class="screenText"><span class="koboSpan" id="kobo.29.1">Code</span></strong><span class="koboSpan" id="kobo.30.1"> (</span><em class="italic"><span class="koboSpan" id="kobo.31.1">Figure 2.1</span></em><span class="koboSpan" id="kobo.32.1">), from the context of a dataset (</span><em class="italic"><span class="koboSpan" id="kobo.33.1">Figure 2.2</span></em><span class="koboSpan" id="kobo.34.1">), a Competition (</span><em class="italic"><span class="koboSpan" id="kobo.35.1">Figure 2.3</span></em><span class="koboSpan" id="kobo.36.1">), or by forking (copying and editing) an existing notebook.</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.37.1"><img alt="" role="presentation" src="../Images/B20963_02_01.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.38.1">Figure 2.1: Create a new notebook from the Code menu</span></p>
<p class="normal"><span class="koboSpan" id="kobo.39.1">When you create a new notebook from the </span><strong class="screenText"><span class="koboSpan" id="kobo.40.1">Code</span></strong><span class="koboSpan" id="kobo.41.1"> menu, this new notebook will appear in your list of notebooks but will not be added to any Dataset or Competition context.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.42.1">If you choose to start it from a Kaggle Dataset, the dataset will be already added to the list of data associated with the notebook, and you will see it in the right-side panel (refer to </span><em class="italic"><span class="koboSpan" id="kobo.43.1">Figure 2.5</span></em><span class="koboSpan" id="kobo.44.1">) when you edit the notebook.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.45.1"><img alt="" role="presentation" src="../Images/B20963_02_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.46.1">Figure 2.2: Create a new notebook in the context of a Dataset</span></p>
<p class="normal"><span class="koboSpan" id="kobo.47.1">The same is</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.48.1"> true in the case of a Competition. </span><span class="koboSpan" id="kobo.48.2">The Dataset associated with it will be already present in the list of datasets when you initialize the notebook.</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.49.1"><img alt="" role="presentation" src="../Images/B20963_02_03.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.50.1">Figure 2.3: Create a new notebook in the context of a Competition</span></p>
<p class="normal"><span class="koboSpan" id="kobo.51.1">To fork (copy and edit) an existing notebook, press the three vertical dots next to the </span><strong class="screenText"><span class="koboSpan" id="kobo.52.1">Edit</span></strong><span class="koboSpan" id="kobo.53.1"> button of that notebook, and then select the </span><strong class="screenText"><span class="koboSpan" id="kobo.54.1">Copy &amp; edit notebook</span></strong><span class="koboSpan" id="kobo.55.1"> menu item from the drop-down list.</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.56.1"><img alt="" role="presentation" src="../Images/B20963_02_04.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.57.1">Figure 2.4: Fork a notebook from an existing one</span></p>
<p class="normal"><span class="koboSpan" id="kobo.58.1">Once created, the </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.59.1">notebook will be open for editing, as you can see in the following screenshot. </span><span class="koboSpan" id="kobo.59.2">On the upper-left side, there is a regular menu (</span><strong class="screenText"><span class="koboSpan" id="kobo.60.1">File</span></strong><span class="koboSpan" id="kobo.61.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.62.1">Edit</span></strong><span class="koboSpan" id="kobo.63.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.64.1">View</span></strong><span class="koboSpan" id="kobo.65.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.66.1">Run</span></strong><span class="koboSpan" id="kobo.67.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.68.1">Add-ons</span></strong><span class="koboSpan" id="kobo.69.1">, and </span><strong class="screenText"><span class="koboSpan" id="kobo.70.1">Help</span></strong><span class="koboSpan" id="kobo.71.1">), with quick-action icons for editing and running under it. </span><span class="koboSpan" id="kobo.71.2">On the right-hand side, there is a retractable panel with more quick actions.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.72.1"><img alt="A screenshot of a computer  Description automatically generated" src="../Images/B20963_02_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.73.1">Figure 2.5: Main edit window for Kaggle Notebooks with the right-side panel with quick menus</span></p>
<p class="normal"><span class="koboSpan" id="kobo.74.1">The </span><strong class="screenText"><span class="koboSpan" id="kobo.75.1">File</span></strong><span class="koboSpan" id="kobo.76.1"> menu is complex and offers options for input and output, as well as various settings for interactions with other resources on the platform (Models, Utility Scripts, and Notebooks). </span><span class="koboSpan" id="kobo.76.2">It has menu items to import an external notebook or export your current notebook, and to even add data or models to the notebook. </span><span class="koboSpan" id="kobo.76.3">You can also either save the current notebook as a utility script or add a utility script to the notebook. </span><span class="koboSpan" id="kobo.76.4">You can choose to set the language (to R or Python; by default, is set to Python). </span><span class="koboSpan" id="kobo.76.5">There is an option to set the current notebook as a script or a notebook (notebook is the default).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.77.1">Additional </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.78.1">options are for publishing and sharing the notebook on GitHub. </span><span class="koboSpan" id="kobo.78.2">To publish the notebook on GitHub, you will have to link your Kaggle account with the GitHub account by authorizing Kaggle to access your GitHub account. </span><span class="koboSpan" id="kobo.78.3">Once you perform this operation, updates of the notebook will be mirrored on GitHub as well. </span><span class="koboSpan" id="kobo.78.4">Using the </span><strong class="screenText"><span class="koboSpan" id="kobo.79.1">Share menu</span></strong><span class="koboSpan" id="kobo.80.1"> item, you can set who can view or edit the notebook. </span><span class="koboSpan" id="kobo.80.2">Initially, you will be the only user with read and write access, but once you add contributors, they can also be assigned with both read or write access, or only with read (view) access. </span><span class="koboSpan" id="kobo.80.3">If you publish your notebook, then everyone will have access to read it, be able to fork (copy and edit) it, and then edit the work.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.81.1">The </span><strong class="screenText"><span class="koboSpan" id="kobo.82.1">Edit</span></strong><span class="koboSpan" id="kobo.83.1"> menu allows you to move cells around (up and down) or delete a selected cell. </span><span class="koboSpan" id="kobo.83.2">In </span><strong class="screenText"><span class="koboSpan" id="kobo.84.1">View</span></strong><span class="koboSpan" id="kobo.85.1">, you have options to adjust the look and feel of the editor (adding or removing themes, line numbers, and setting the editor layout) and the resulting output HTML content (see or hide input or output for selected cells, or collapse or extend cells).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.86.1">The </span><strong class="screenText"><span class="koboSpan" id="kobo.87.1">Run</span></strong><span class="koboSpan" id="kobo.88.1"> menu item provides controls to run one cell, all cells, all cells before or after, and to start/stop a session. </span><span class="koboSpan" id="kobo.88.2">At the restart of the session, the Kernel (i.e., the Docker container in which the notebook is running) is restarted, and all context data initialized when we run some of the cells is reset. </span><span class="koboSpan" id="kobo.88.3">This is a very useful option when, while editing, you want to reset the environment with all the variables. </span><span class="koboSpan" id="kobo.88.4">Add-ons menu groups, secret management, Google Cloud services, and the Google Cloud SDK — each of those extends the functionality of notebooks and will be presented under the </span><em class="italic"><span class="koboSpan" id="kobo.89.1">Advanced capabilities</span></em><span class="koboSpan" id="kobo.90.1"> section</span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.91.1"> later in this chapter.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.92.1">Now that we’ve learned how to create, edit, and run notebooks, let’s continue by exploring more notebook features.</span></p>
<h1 class="heading-1" id="_idParaDest-27"><span class="koboSpan" id="kobo.93.1">Exploring notebook capabilities</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.94.1">Notebooks serve as </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.95.1">powerful tools for data exploration, model training, and running inferences. </span><span class="koboSpan" id="kobo.95.2">In this section, we will examine the various capabilities that Kaggle Notebooks have to offer.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.96.1">We will start off with the most frequently used features of notebooks. </span><span class="koboSpan" id="kobo.96.2">We will go through the options to add various resources to a notebook (data and models) and to modify the execution environment. </span><span class="koboSpan" id="kobo.96.3">Then, we continue with more advanced features, which will include setting up utility scripts, adding or using secrets, using Google Cloud services, or upgrading a notebook to a Google Cloud AI Notebook. </span><span class="koboSpan" id="kobo.96.4">Let’s get started!</span></p>
<h2 class="heading-2" id="_idParaDest-28"><span class="koboSpan" id="kobo.97.1">Basic capabilities</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.98.1">On the right-side </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.99.1">panel, we have quick menu actions for access to frequently used features of notebooks. </span><span class="koboSpan" id="kobo.99.2">In the following screenshot, we take a more detailed look at these quick menu actions.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.100.1"><img alt="" role="presentation" src="../Images/B20963_02_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.101.1">Figure 2.6: Zoomed-in view of the right-side panel with quick menus</span></p>
<p class="normal"><span class="koboSpan" id="kobo.102.1">As </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.103.1">you can see, the first quick menu actions are grouped under the </span><strong class="screenText"><span class="koboSpan" id="kobo.104.1">Data</span></strong><span class="koboSpan" id="kobo.105.1"> section. </span><span class="koboSpan" id="kobo.105.2">Here, you have buttons to add or remove datasets from the notebook. </span><span class="koboSpan" id="kobo.105.3">By clicking on the </span><strong class="screenText"><span class="koboSpan" id="kobo.106.1">Add Data</span></strong><span class="koboSpan" id="kobo.107.1"> button, you can add one existing dataset. </span><span class="koboSpan" id="kobo.107.2">You have the search text box and quick buttons to select from your datasets, competition datasets, and notebooks. </span><span class="koboSpan" id="kobo.107.3">When you select your notebooks, you can include the output of notebooks as data sources for the current notebook. </span><span class="koboSpan" id="kobo.107.4">You also have an upload button next to the </span><strong class="screenText"><span class="koboSpan" id="kobo.108.1">Add Data</span></strong><span class="koboSpan" id="kobo.109.1"> button, and you can use it to upload a new dataset before adding it to the notebook. </span><span class="koboSpan" id="kobo.109.2">In the same </span><strong class="screenText"><span class="koboSpan" id="kobo.110.1">Data</span></strong><span class="koboSpan" id="kobo.111.1"> section on the panel, you have the input and output folder browser, and buttons next to each item so that you can copy the path to either folders or files.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.112.1">Right under the </span><strong class="screenText"><span class="koboSpan" id="kobo.113.1">Data</span></strong><span class="koboSpan" id="kobo.114.1"> section, we have the </span><strong class="screenText"><span class="koboSpan" id="kobo.115.1">Models</span></strong><span class="koboSpan" id="kobo.116.1"> section (see </span><em class="italic"><span class="koboSpan" id="kobo.117.1">Figure 2.6</span></em><span class="koboSpan" id="kobo.118.1">). </span><span class="koboSpan" id="kobo.118.2">Here, we can add models to the notebook. </span><strong class="screenText"><span class="koboSpan" id="kobo.119.1">Models</span></strong><span class="koboSpan" id="kobo.120.1"> is a new feature on the platform, and it allows you to use powerful pretrained models in your notebook.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.121.1">In the </span><strong class="screenText"><span class="koboSpan" id="kobo.122.1">Notebook options</span></strong><span class="koboSpan" id="kobo.123.1"> section, we can configure the accelerator, the language, the persistence option, the environment, and internet access as per our preferences (see </span><em class="italic"><span class="koboSpan" id="kobo.124.1">Figure 2.6</span></em><span class="koboSpan" id="kobo.125.1">). </span><span class="koboSpan" id="kobo.125.2">By default, the notebook will use </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.126.1">a </span><strong class="keyWord"><span class="koboSpan" id="kobo.127.1">Central Processing Unit</span></strong><span class="koboSpan" id="kobo.128.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.129.1">CPU</span></strong><span class="koboSpan" id="kobo.130.1">) only. </span><span class="koboSpan" id="kobo.130.2">See the following screenshot for the expanded view of </span><strong class="screenText"><span class="koboSpan" id="kobo.131.1">Add Data</span></strong><span class="koboSpan" id="kobo.132.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.133.1">Add Models</span></strong><span class="koboSpan" id="kobo.134.1">, and </span><strong class="screenText"><span class="koboSpan" id="kobo.135.1">Notebook options</span></strong><span class="koboSpan" id="kobo.136.1"> in the right-hand side panel:</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.137.1"><img alt="" role="presentation" src="../Images/B20963_02_07.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.138.1">Figure 2.7: Right-side panel menus to add data and models and for Notebook options</span></p>
<p class="normal"><span class="koboSpan" id="kobo.139.1">You can</span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.140.1"> search datasets by their name or path, and you have speed filters to search in competitions or the output of your notebooks. </span><span class="koboSpan" id="kobo.140.2">For </span><strong class="screenText"><span class="koboSpan" id="kobo.141.1">Models</span></strong><span class="koboSpan" id="kobo.142.1"> as well, you can search by name and filter by type (text, image, computer vision, or video). </span><strong class="screenText"><span class="koboSpan" id="kobo.143.1">Notebook options</span></strong><span class="koboSpan" id="kobo.144.1"> allows the selection of an accelerator type (</span><strong class="screenText"><span class="koboSpan" id="kobo.145.1">None</span></strong><span class="koboSpan" id="kobo.146.1"> means CPU-only), the programming language, the persistence type, and the option for the environment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.147.1">By choosing the </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.148.1">accelerator, you can switch to using one of the two hardware accelerator options for </span><strong class="keyWord"><span class="koboSpan" id="kobo.149.1">Graphical Processing Unit</span></strong><span class="koboSpan" id="kobo.150.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.151.1">GPU</span></strong><span class="koboSpan" id="kobo.152.1">) or </span><strong class="keyWord"><span class="koboSpan" id="kobo.153.1">Tensor Processing Unit</span></strong><span class="koboSpan" id="kobo.154.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.155.1">TPU</span></strong><span class="koboSpan" id="kobo.156.1">). </span><span class="koboSpan" id="kobo.156.2">The </span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.157.1">technical specifications for CPU configuration and accelerator configurations, at the time of writing, are given in </span><em class="italic"><span class="koboSpan" id="kobo.158.1">Table 2.1</span></em><span class="koboSpan" id="kobo.159.1">. </span><span class="koboSpan" id="kobo.159.2">For all these specifications, either with CPU or GPU, you have a maximum of 12 hours of continuous execution time. </span><span class="koboSpan" id="kobo.159.3">In the case of TPUs, the execution time is limited to 9 hours. </span><span class="koboSpan" id="kobo.159.4">The input data size, however, is not limited. </span><span class="koboSpan" id="kobo.159.5">The output is limited to 20 GB. </span><span class="koboSpan" id="kobo.159.6">An additional 20 GB can be used only temporarily, during runtime, but it will not be saved after the run.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.160.1">By default, your notebook is set to not use any persistence. </span><span class="koboSpan" id="kobo.160.2">You can opt to ensure persistence for files and variables, files only, or variables only.</span></p>
<table class="table-container" id="table001-1">
<tbody>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.161.1">Configuration</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.162.1">Cores</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.163.1">RAM</span></strong></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.164.1">CPU</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.165.1">4 CPU cores</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.166.1">30 GB</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.167.1">P100 GPU</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.168.1">1 Nvidia Tesla P100 GPU 2 CPU cores</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.169.1">13 GB</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.170.1">T4 x 2 GPU</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.171.1">2 Nvidia Tesla T4 GPUs 2 CPU cores</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.172.1">13 GB</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.173.1">TPU</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.174.1">1 TPU 4 CPU cores</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.175.1">16 GB</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.176.1">TPU 1VM</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.177.1">96 CPU cores</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.178.1">330 GB</span></p>
</td>
</tr>
</tbody>
</table>
<p class="packt_figref"><span class="koboSpan" id="kobo.179.1">Table 2.1: Technical specification for CPU or accelerator specs</span></p>
<p class="normal"><span class="koboSpan" id="kobo.180.1">You can set your notebook to always use the original environment or to pin to the latest environment. </span><span class="koboSpan" id="kobo.180.2">Depending on what libraries you use and what data processing you perform, it might be useful to choose to work with the original environment or use the latest available environment. </span><span class="koboSpan" id="kobo.180.3">When you select the original environment, the settings of the original environment will be kept every time you run new versions of the notebook. </span><span class="koboSpan" id="kobo.180.4">With the alternative option to use the latest available environment, the environment (with predefined library versions) will be updated to the latest version.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.181.1">The internet access is preset to “On,” but in some cases, you would like to set it “Off.” </span><span class="koboSpan" id="kobo.181.2">For certain code competitions, internet access is not allowed. </span><span class="koboSpan" id="kobo.181.3">In such cases, you will be able to download dynamic resources from the internet in your training notebook, but you will have to make sure that every needed resource is either internal to the notebook or in one of the attached models, utility scripts, or datasets, when running the inference</span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.182.1"> notebook for that code competition.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.183.1">We saw what the basic features of notebooks are and how to add data, models, and configure the running environment. </span><span class="koboSpan" id="kobo.183.2">Let’s see now what the more advanced features are.</span></p>
<h2 class="heading-2" id="_idParaDest-29"><span class="koboSpan" id="kobo.184.1">Advanced capabilities</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.185.1">Basic </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.186.1">notebook functionality allows us to perform quick experiments, test ideas, and prototype solutions. </span><span class="koboSpan" id="kobo.186.2">If we want to build more complex functionalities, however, we will need to write reusable code, separate configurations (including secrets, like API keys) from code, and even integrate our code with external systems or components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.187.1">The Kaggle environment offers generous computational resources, but these are limited. </span><span class="koboSpan" id="kobo.187.2">We might want to combine Kaggle Notebooks with external resources, or we might want to integrate components from Kaggle (notebooks, datasets) with other components, Google Cloud, or our local environment. </span><span class="koboSpan" id="kobo.187.3">In the upcoming sections, we will learn how to achieve all these.</span></p>
<h3 class="heading-3" id="_idParaDest-30"><span class="koboSpan" id="kobo.188.1">Setting a notebook as a utility script or adding utility scripts</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.189.1">In most cases, you will </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.190.1">write all the code for your notebook in</span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.191.1"> successive cells in the same file. </span><span class="koboSpan" id="kobo.191.2">For more complex code, and especially when you would like to reuse some of the code, without copying code between notebooks, you can choose to develop utility modules. </span><span class="koboSpan" id="kobo.191.3">Kaggle Notebooks offers a useful feature for this purpose, namely </span><strong class="screenText"><span class="koboSpan" id="kobo.192.1">Utility scripts</span></strong><span class="koboSpan" id="kobo.193.1">.</span></p>
<p class="normal"><strong class="screenText"><span class="koboSpan" id="kobo.194.1">Utility scripts</span></strong><span class="koboSpan" id="kobo.195.1"> are</span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.196.1"> created in the same way notebooks are. </span><span class="koboSpan" id="kobo.196.2">You will have to start a notebook and then choose the </span><strong class="screenText"><span class="koboSpan" id="kobo.197.1">Set as Utility Script</span></strong><span class="koboSpan" id="kobo.198.1"> menu item from the </span><strong class="screenText"><span class="koboSpan" id="kobo.199.1">File</span></strong><span class="koboSpan" id="kobo.200.1"> menu. </span><span class="koboSpan" id="kobo.200.2">If you want to use a utility script in your current notebook, you need to select the </span><strong class="screenText"><span class="koboSpan" id="kobo.201.1">Add utility script</span></strong><span class="koboSpan" id="kobo.202.1"> menu item from the </span><strong class="screenText"><span class="koboSpan" id="kobo.203.1">File</span></strong><span class="koboSpan" id="kobo.204.1"> menu. </span><span class="koboSpan" id="kobo.204.2">This will open a selector window for utility scripts on the right-side panel, and here, you can choose from your existing utility scripts and add one or more to your notebook. </span><span class="koboSpan" id="kobo.204.3">As you can see in the following screenshot, added utility scripts appear with the </span><strong class="screenText"><span class="koboSpan" id="kobo.205.1">+</span></strong><span class="koboSpan" id="kobo.206.1"> button next to them (seen on the left panel) and are added to the notebook under a separate group, </span><strong class="screenText"><span class="koboSpan" id="kobo.207.1">usr/lib (Utility Scripts)</span></strong><span class="koboSpan" id="kobo.208.1">, just under the </span><strong class="screenText"><span class="koboSpan" id="kobo.209.1">Input</span></strong><span class="koboSpan" id="kobo.210.1"> data section and before the </span><strong class="screenText"><span class="koboSpan" id="kobo.211.1">Output</span></strong><span class="koboSpan" id="kobo.212.1"> data section (seen on the right panel):</span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.213.1"><img alt="" role="presentation" src="../Images/B20963_02_08.png"/></span></p>
<p class="packt_figref"><span class="koboSpan" id="kobo.214.1">Figure 2.8: Selecting a utility script</span></p>
<p class="normal"><span class="koboSpan" id="kobo.215.1">To use the </span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.216.1">utility script within your code, you will have to import the </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.217.1">module in the same way you import Python packages. </span><span class="koboSpan" id="kobo.217.2">In the following code snippet, we import the modules or functions included in one utility script:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.218.1">from</span></span><span class="koboSpan" id="kobo.219.1"> data_quality_stats </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.220.1">import</span></span><span class="koboSpan" id="kobo.221.1"> missing_data
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.222.1">As you can see, the function </span><code class="inlineCode"><span class="koboSpan" id="kobo.223.1">missing_data</span></code><span class="koboSpan" id="kobo.224.1"> is defined in the utility script </span><code class="inlineCode"><span class="koboSpan" id="kobo.225.1">data_quality_stats</span></code><span class="koboSpan" id="kobo.226.1">.</span></p>
<h3 class="heading-3" id="_idParaDest-31"><span class="koboSpan" id="kobo.227.1">Adding and using secrets</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.228.1">Sometimes, you might need to add </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.229.1">environment variables in your notebook, and you would want to keep them secret, especially if you make the notebook public. </span><span class="koboSpan" id="kobo.229.2">Examples of such variables could be your connection token for an experiment tracking service, like Neptune.ai or Weights &amp; Biases, or various API secret keys or tokens. </span><span class="koboSpan" id="kobo.229.3">In this case, you would most probably like to use one of the add-ons, </span><strong class="screenText"><span class="koboSpan" id="kobo.230.1">Kaggle Secrets</span></strong><span class="koboSpan" id="kobo.231.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.232.1">Upon selection of the </span><strong class="screenText"><span class="koboSpan" id="kobo.233.1">Kaggle Secrets</span></strong><span class="koboSpan" id="kobo.234.1"> menu item, a window like the one in the following screenshot will appear. </span><span class="koboSpan" id="kobo.234.2">In this pop-up window, you can add new secrets by pressing the button </span><strong class="screenText"><span class="koboSpan" id="kobo.235.1">Add a new secret</span></strong><span class="koboSpan" id="kobo.236.1">. </span><span class="koboSpan" id="kobo.236.2">To include the secrets with the current notebook, just check the checkboxes near the secrets you want to include.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.237.1"><img alt="" role="presentation" src="../Images/B20963_02_09.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.238.1">Figure 2.9: Add and select secrets</span></p>
<p class="normal"><span class="koboSpan" id="kobo.239.1">In the preceding screenshot, three secrets (two for a Twitter API connection and one for Weights &amp; Biases experiment tracking) are selected. </span><span class="koboSpan" id="kobo.239.2">For each selected secret, there is an additional generated line like in the </span><strong class="screenText"><span class="koboSpan" id="kobo.240.1">Code Snippet</span></strong><span class="koboSpan" id="kobo.241.1"> on the lower side of the window. </span><span class="koboSpan" id="kobo.241.2">You can copy all the generated lines to a clipboard to include in your notebook code. </span><span class="koboSpan" id="kobo.241.3">After you press </span><strong class="screenText"><span class="koboSpan" id="kobo.242.1">Done</span></strong><span class="koboSpan" id="kobo.243.1">, you will be able to paste the code into your notebook.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.244.1">Once defined, the</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.245.1"> secret will be available to be included in any of your notebooks. </span><span class="koboSpan" id="kobo.245.2">You can modify the text of one secret using the </span><strong class="screenText"><span class="koboSpan" id="kobo.246.1">Edit</span></strong><span class="koboSpan" id="kobo.247.1"> button next to its name. </span><span class="koboSpan" id="kobo.247.2">Note that when you fork one notebook that has secrets added, the secrets won’t be associated anymore with the new notebook. </span><span class="koboSpan" id="kobo.247.3">To make available the secrets to a new or forked notebook, it is enough to enter the </span><strong class="screenText"><span class="koboSpan" id="kobo.248.1">Secrets</span></strong><span class="koboSpan" id="kobo.249.1"> windows and press </span><strong class="screenText"><span class="koboSpan" id="kobo.250.1">Done</span></strong><span class="koboSpan" id="kobo.251.1">, in the context of editing that notebook. </span><span class="koboSpan" id="kobo.251.2">Of course, if someone else is copying your notebook, that Kaggler (Kaggle user) will have to set their own secrets. </span><span class="koboSpan" id="kobo.251.3">And if that Kaggler chooses to use different names for the variables associated with the secrets, they will also need to operate the change in the code. </span><span class="koboSpan" id="kobo.251.4">This feature allows you to not only manage useful environment variables but also easily configure your notebooks.</span></p>
<h3 class="heading-3" id="_idParaDest-32"><span class="koboSpan" id="kobo.252.1">Using Google Cloud services in Kaggle Notebooks</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.253.1">To take </span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.254.1">advantage of Google Cloud services in</span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.255.1"> your notebook, from the </span><strong class="screenText"><span class="koboSpan" id="kobo.256.1">Add-ons</span></strong><span class="koboSpan" id="kobo.257.1"> menu, select </span><strong class="screenText"><span class="koboSpan" id="kobo.258.1">Google Cloud Services</span></strong><span class="koboSpan" id="kobo.259.1">. </span><span class="koboSpan" id="kobo.259.2">In the dialog window that opens, you can sync your Google account with your notebook by clicking on </span><strong class="screenText"><span class="koboSpan" id="kobo.260.1">Attach to Notebook</span></strong><span class="koboSpan" id="kobo.261.1">. </span><span class="koboSpan" id="kobo.261.2">You can also select which Google Cloud services you want to integrate with your Kaggle environment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.262.1">Currently, Kaggle offers integration with Google Cloud Storage, BigQuery, and AutoML. </span><span class="koboSpan" id="kobo.262.2">When using these services through Kaggle Notebooks, you need to know that this will incur charges, according to the plan you have. </span><span class="koboSpan" id="kobo.262.3">If you choose to use only public data with BigQuery, you will not incur any charges.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.263.1">In the following figure, we show how you can select these services:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.264.1"><img alt="" role="presentation" src="../Images/B20963_02_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.265.1">Figure 2.10: Kaggle integration options</span></p>
<p class="normal"><span class="koboSpan" id="kobo.266.1">Select what </span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.267.1">Google Cloud services to use in Kaggle</span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.268.1"> Notebooks. </span><span class="koboSpan" id="kobo.268.2">As mentioned, you will need to link your Google Cloud account to Kaggle. </span><span class="koboSpan" id="kobo.268.3">In the selection screen, you can choose from </span><strong class="screenText"><span class="koboSpan" id="kobo.269.1">BigQuery</span></strong><span class="koboSpan" id="kobo.270.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.271.1">Cloud Storage</span></strong><span class="koboSpan" id="kobo.272.1">, and </span><strong class="screenText"><span class="koboSpan" id="kobo.273.1">Google Cloud AI Platform</span></strong><span class="koboSpan" id="kobo.274.1"> (Vertex AI Workbench). </span><span class="koboSpan" id="kobo.274.2">In our example, two out of the three available services were selected.</span></p>
<h3 class="heading-3" id="_idParaDest-33"><span class="koboSpan" id="kobo.275.1">Upgrading your Kaggle Notebook to Google Cloud AI Notebooks</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.276.1">If you reach the</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.277.1"> limit of resources</span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.278.1"> available for Kaggle Notebooks (RAM, the number of cores, or execution time), you can choose to promote your notebook to Google Cloud AI Notebooks by exporting your notebook to Google Cloud. </span><span class="koboSpan" id="kobo.278.2">Google Cloud AI Notebooks is a paid service from Google Cloud, and it gives you access to computing resources in Google Cloud for machine</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.279.1"> learning, using a notebook as an </span><strong class="keyWord"><span class="koboSpan" id="kobo.280.1">integrated development environment</span></strong><span class="koboSpan" id="kobo.281.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.282.1">IDE</span></strong><span class="koboSpan" id="kobo.283.1">). </span><span class="koboSpan" id="kobo.283.2">For this action, select </span><strong class="screenText"><span class="koboSpan" id="kobo.284.1">File</span></strong><span class="koboSpan" id="kobo.285.1"> | </span><strong class="screenText"><span class="koboSpan" id="kobo.286.1">Upgrade to Google AI Notebooks</span></strong><span class="koboSpan" id="kobo.287.1">, and you will be directed to the following window:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.288.1"><img alt="" role="presentation" src="../Images/B20963_02_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.289.1">Figure 2.11: Upgrade to Goole Cloud AI Platform Notebooks</span></p>
<p class="normal"><span class="koboSpan" id="kobo.290.1">Follow this</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.291.1"> three-step </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.292.1">process: set up a billing-enabled Google Cloud project, set up your network instance, and run your code. </span><span class="koboSpan" id="kobo.292.2">Your code can run without the resource limits now.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.293.1">Let’s see now how we can use a notebook to automatize the update of a dataset.</span></p>
<h3 class="heading-3" id="_idParaDest-34"><span class="koboSpan" id="kobo.294.1">Using a Notebook to automatically update a Dataset</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.295.1">You can </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.296.1">automatize the generation of a Dataset using Kaggle Notebooks by combining two features: a scheduled rerun of notebooks and an update of a Dataset upon a Notebook run.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.297.1">First, create the Notebook that will collect the data. </span><span class="koboSpan" id="kobo.297.2">It can be, for example, a Notebook that crawls pages of a certain site to retrieve RSS News feeds or connect to the Twitter API (as in the previous example) to download tweets. </span><span class="koboSpan" id="kobo.297.3">Set as the Notebook output the collected data. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.298.1">After the notebook runs for the first time, initialize a Dataset with the output of the notebook by selecting </span><strong class="screenText"><span class="koboSpan" id="kobo.299.1">Output</span></strong><span class="koboSpan" id="kobo.300.1"> | </span><strong class="screenText"><span class="koboSpan" id="kobo.301.1">Create Dataset</span></strong><span class="koboSpan" id="kobo.302.1">, and set the option for the Dataset to be updated every time the notebook is running. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.303.1">Then, edit the </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.304.1">notebook again, and schedule it to run with the frequency that you want your data to be refreshed, as you can see in the following screenshot. </span><span class="koboSpan" id="kobo.304.2">Once you set it like that, you will have the notebook running automatically, and because the Dataset has the setting to be updated when running the notebook, the update of the Dataset will happen automatically going forward.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.305.1"><img alt="" role="presentation" src="../Images/B20963_02_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.306.1">Figure 2.12: Scheduling a Notebook to run daily, starting from August 7, 2023</span></p>
<p class="normal"><span class="koboSpan" id="kobo.307.1">The mechanism </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.308.1">described here allows you to perform the entire automatization process, using only Kaggle tools available from the user interface. </span><span class="koboSpan" id="kobo.308.2">For more complex processes, you can always use the Kaggle API to define and automatically perform your tasks. </span><span class="koboSpan" id="kobo.308.3">In the next subsection, we will describe the basic functionality available with the Kaggle API, with a focus on manipulating notebooks.</span></p>
<h1 class="heading-1" id="_idParaDest-35"><span class="koboSpan" id="kobo.309.1">Using the Kaggle API to create, update, download, and monitor your notebooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.310.1">The Kaggle API</span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.311.1"> is a powerful tool that extends the functionality available in the Kaggle user interface. </span><span class="koboSpan" id="kobo.311.2">You can use it for various tasks: define, update, and download datasets, submit to competitions, define new notebooks, push or pull versions of notebooks, or verify a run status.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.312.1">There are just two simple </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.313.1">steps for you to start using the Kaggle API. </span><span class="koboSpan" id="kobo.313.2">Let’s get started:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.314.1">First, you will need to create an authentication token. </span><span class="koboSpan" id="kobo.314.2">Navigate to your account, and from the right-side icon, select the menu item </span><strong class="screenText"><span class="koboSpan" id="kobo.315.1">Account</span></strong><span class="koboSpan" id="kobo.316.1">. </span><span class="koboSpan" id="kobo.316.2">Then go to the </span><strong class="screenText"><span class="koboSpan" id="kobo.317.1">API</span></strong><span class="koboSpan" id="kobo.318.1"> section. </span><span class="koboSpan" id="kobo.318.2">Here, click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.319.1">Create new API token</span></strong><span class="koboSpan" id="kobo.320.1"> button to download your authentication token (it is a file named </span><code class="inlineCode"><span class="koboSpan" id="kobo.321.1">kaggle.json</span></code><span class="koboSpan" id="kobo.322.1">). </span><span class="koboSpan" id="kobo.322.2">If you will be using the Kaggle API from a Windows machine, its location is </span><code class="inlineCode"><span class="koboSpan" id="kobo.323.1">C:\Users\&lt;your_name&gt;\.kaggle\kaggle.json</span></code><span class="koboSpan" id="kobo.324.1">. </span><span class="koboSpan" id="kobo.324.2">On a Mac or Linux machine, the path to the file should be </span><code class="inlineCode"><span class="koboSpan" id="kobo.325.1">~/.kaggle/kaggle.json</span></code><span class="koboSpan" id="kobo.326.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.327.1">Next, you will have to install the Kaggle API Python module. </span><span class="koboSpan" id="kobo.327.2">Run the following in your selected Python or conda environment:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.328.1">!pip install kaggle
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.329.1">With these two steps, you are ready to start using the Kaggle API.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.330.1">The API also provides multiple options to list notebooks in your account, check notebook status, download a copy, create the first version of a notebook, run it, and more. </span><span class="koboSpan" id="kobo.330.2">Let’s look at each of these options:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.331.1">To list all notebooks based on a certain name pattern, run the following command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.332.1">Kaggle kernels list -s &lt;name-pattern&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.333.1">The command will return a table with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.334.1">{username}/{kernel-slug}</span></code><span class="koboSpan" id="kobo.335.1">, which matches the name pattern, the last runtime, the number of votes, the notebook title, and the author-readable name.</span></p>
</li>
</ul>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.336.1">To verify the status of a certain notebook in your environment, run the following command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.337.1">kaggle kernels status {username}/{kernel-slug}.
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.338.1">Here, </span><code class="inlineCode"><span class="koboSpan" id="kobo.339.1">{username}/{kernel-slug}</span></code><span class="koboSpan" id="kobo.340.1"> is not the entire path to the notebook on Kaggle but the part of the path that will follow the platform path </span><code class="inlineCode"><span class="koboSpan" id="kobo.341.1">https://www.kaggle.com</span></code><span class="koboSpan" id="kobo.342.1">.</span></p>
</li>
</ul>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.343.1">The preceding command will return the kernel status. </span><span class="koboSpan" id="kobo.343.2">For example, if the kernel execution was complete, it will return:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.344.1">{username}/{kernel-slug} has status "complete"
</span></code></pre>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.345.1">You can download a notebook by running the following command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.346.1">kaggle kernels pull {username}/{kernel-slug} /path/to/download
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.347.1">In this case, a Jupyter Notebook with the name </span><code class="inlineCode"><span class="koboSpan" id="kobo.348.1">{kernel-slug}.ipynb</span></code><span class="koboSpan" id="kobo.349.1"> will be downloaded in the folder specified by </span><code class="inlineCode"><span class="koboSpan" id="kobo.350.1">/path/to/download</span></code><span class="koboSpan" id="kobo.351.1">.</span></p>
</li>
</ul>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.352.1">To create the first version of a notebook and run it, first define a Kaggle metadata file with the command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.353.1">kaggle kernels init -p /path/to/kernel
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.354.1">Your</span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.355.1"> generated Kaggle metadata file will look like this:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-punctuation"><span class="koboSpan" id="kobo.356.1">{</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.357.1">"id"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.358.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.359.1">"{username}/INSERT_KERNEL_SLUG_HERE"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.360.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.361.1">"title"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.362.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.363.1">"INSERT_TITLE_HERE"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.364.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.365.1">"code_file"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.366.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.367.1">"INSERT_CODE_FILE_PATH_HERE"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.368.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.369.1">"language"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.370.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.371.1">"Pick one of: {python,r,rmarkdown}"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.372.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.373.1">"kernel_type"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.374.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.375.1">"Pick one of: {script,notebook}"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.376.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.377.1">"is_private"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.378.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.379.1">"true"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.380.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.381.1">"enable_gpu"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.382.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.383.1">"false"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.384.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.385.1">"enable_internet"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.386.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.387.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.388.1">true"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.389.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.390.1">"dataset_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.391.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.392.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.393.1">"competition_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.394.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.395.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.396.1">"kernel_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.397.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.398.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.399.1">"model_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.400.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.401.1">[]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.402.1">}</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.403.1">For the purpose of this demonstration, I edited the metadata file to generate a notebook called </span><code class="inlineCode"><span class="koboSpan" id="kobo.404.1">Test Kaggle API</span></code><span class="koboSpan" id="kobo.405.1">, which uses Python. </span><span class="koboSpan" id="kobo.405.2">For your convenience, I replaced my own username with </span><code class="inlineCode"><span class="koboSpan" id="kobo.406.1">{username}</span></code><span class="koboSpan" id="kobo.407.1">. </span><span class="koboSpan" id="kobo.407.2">You need to take care to correlate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.408.1">{kernel-slug}</span></code><span class="koboSpan" id="kobo.409.1"> with the real title, since normally the </span><code class="inlineCode"><span class="koboSpan" id="kobo.410.1">{kernel-slug}</span></code><span class="koboSpan" id="kobo.411.1"> is generated as the lowercase version, without special characters and replacing spaces with dashes. </span><span class="koboSpan" id="kobo.411.2">Here is the result:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-punctuation"><span class="koboSpan" id="kobo.412.1">{</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.413.1">"id"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.414.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.415.1">"{username}/test-kaggle-api"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.416.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.417.1">"title"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.418.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.419.1">"Test Kaggle API"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.420.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.421.1">"code_file"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.422.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.423.1">"test_kaggle_api.ipynb"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.424.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.425.1">"language"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.426.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.427.1">"python"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.428.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.429.1">"</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.430.1">kernel_type"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.431.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.432.1">"notebook"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.433.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.434.1">"is_private"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.435.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.436.1">"true"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.437.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.438.1">"enable_gpu"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.439.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.440.1">"false"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.441.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.442.1">"enable_internet"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.443.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.444.1">"true"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.445.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.446.1">"dataset_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.447.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.448.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.449.1">"competition_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.450.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.451.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.452.1">"kernel_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.453.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.454.1">[],</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.455.1">"model_sources"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.456.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.457.1">[]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.458.1">}</span></span>
</code></pre>
</li>
</ul>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.459.1">After you edit the metadata file, you can initiate the notebook with the following command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.460.1">Kaggle kernels push -p /path/to/kernel
</span></code></pre>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.461.1">If you also</span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.462.1"> created the prototype of your notebook in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.463.1">/path/to/kernel</span></code><span class="koboSpan" id="kobo.464.1"> folder and it is named </span><code class="inlineCode"><span class="koboSpan" id="kobo.465.1">test_kaggle_api.ipynb</span></code><span class="koboSpan" id="kobo.466.1">, you will receive the following answer to your command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.467.1">Kernel version 1 successfully pushed. </span><span class="koboSpan" id="kobo.467.2">Please check progress at https://www.kaggle.com/code/{username} /test-kaggle-api
</span></code></pre>
</li>
<li class="bulletList"><span class="koboSpan" id="kobo.468.1">You can also use the API to download the output of an existing notebook. </span><span class="koboSpan" id="kobo.468.2">For this, use the following code:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.469.1">Kaggle kernels output {username}/{kernel-slug}
</span></code></pre>
</li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.470.1">This will download a file called </span><code class="inlineCode"><span class="koboSpan" id="kobo.471.1">{kernel-slug}.log</span></code><span class="koboSpan" id="kobo.472.1"> in the current folder. </span><span class="koboSpan" id="kobo.472.2">Alternatively, you can specify the path to the following destination:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.473.1">Kaggle kernels output {username}/{kernel-slug} – p /path/to/dest
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.474.1">The file contains the execution logs of the kernel’s last run.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.475.1">We have learned how to create an authentication token and install the Kaggle API. </span><span class="koboSpan" id="kobo.475.2">Then, we saw how to use the Kaggle API to create a notebook, update it, and download it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.476.1">More details about how to use the Kaggle API to boost your platform usage can be found in the Kaggle documentation </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.477.1">section about the API at </span><a href="https://www.kaggle.com/docs/api"><span class="url"><span class="koboSpan" id="kobo.478.1">https://www.kaggle.com/docs/api</span></span></a><span class="koboSpan" id="kobo.479.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-36"><span class="koboSpan" id="kobo.480.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.481.1">In this chapter, we learned what Kaggle Notebooks are, what types we can use, and with what programming languages. </span><span class="koboSpan" id="kobo.481.2">We also learned how to create, run, and update notebooks. </span><span class="koboSpan" id="kobo.481.3">We then visited some of the basic features for using notebooks, which will allow you to start using notebooks in an effective way, to ingest and analyze data from datasets or competitions, to start training models, and to prepare submissions for competitions. </span><span class="koboSpan" id="kobo.481.4">Additionally, we also reviewed some of the advanced features and even introduced the use of the Kaggle API to further extend your usage of notebooks, allowing you to build external data and ML pipelines that integrate with your Kaggle environment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.482.1">The more advanced features give you more flexibility in using Kaggle Notebooks. </span><span class="koboSpan" id="kobo.482.2">With Utility scripts, you can create modular code, with specialized Python modules for ingesting data, performing statistical analysis on it, preparing visualizations, generating features, and building models. </span><span class="koboSpan" id="kobo.482.3">You can reuse these modules between notebooks, without the need to copy code from one notebook to another. </span><span class="koboSpan" id="kobo.482.4">With secrets, on the other hand, you can make public your notebooks that use API keys to access external services, without exposing your personal keys; it is the Kaggle equivalent of a password vault.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.483.1">With the integration with Google Cloud, you can expand your compute or storage resources, and surpass the limitations for such resources on the Kaggle platform. </span><span class="koboSpan" id="kobo.483.2">We also learned the basics of the Kaggle API. </span><span class="koboSpan" id="kobo.483.3">You know now how to use the Kaggle API to search for an existing notebook, create a new notebook, or download the output of an existing notebook. </span><span class="koboSpan" id="kobo.483.4">This gives you the flexibility to define hybrid pipelines that integrate Kaggle, Google Cloud, and local resources. </span><span class="koboSpan" id="kobo.483.5">You can also control your Kaggle Notebooks from external scripts.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.484.1">In the next chapter, we will start our journey around the data world with a first stop: a classical exploration of the </span><strong class="bold-italic" style="font-style: italic;"><span class="koboSpan" id="kobo.485.1">Titanic</span></strong><span class="koboSpan" id="kobo.486.1"> competition dataset.</span></p>
<h1 class="heading-1"><span class="koboSpan" id="kobo.487.1">Join our book’s Discord space</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.488.1">Join our Discord community to meet like-minded people and learn alongside more than 5000 members at:</span></p>
<p class="normal"><a href="https://packt.link/kaggle"><span class="url"><span class="koboSpan" id="kobo.489.1">https://packt.link/kaggle</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.490.1"><img alt="" role="presentation" src="../Images/QR_Code9220780366773140.png"/></span></p>
</div>
</body></html>