<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer135">&#13;
			<h1 id="_idParaDest-108" class="chapter-number"><a id="_idTextAnchor109"/>6</h1>&#13;
			<h1 id="_idParaDest-109"><a id="_idTextAnchor110"/>Effective Reporting with R Markdown</h1>&#13;
			<p>The previous<a id="_idIndexMarker531"/> chapter covered the different types of graphing techniques, all of which are static. In this chapter, we will take this one step further and discuss how to generate graphs and tables using <strong class="bold">R </strong><span class="No-Break"><strong class="bold">Markdown</strong></span><span class="No-Break"> consistently.</span></p>&#13;
			<p>By the end of this chapter, you will have learned the fundamentals of R Markdown reports, including how to add, fine-tune, and customize figures and tables to make interactive and effective reports. You will also know how to generate effective R Markdown reports that can add some flying colors to <span class="No-Break">your presentations.</span></p>&#13;
			<p>In this chapter, we will cover the <span class="No-Break">following topics:</span></p>&#13;
			<ul>&#13;
				<li>Fundamentals of <span class="No-Break">R Markdown</span></li>&#13;
				<li>Generating a financial <span class="No-Break">analysis report</span></li>&#13;
				<li>Customizing R <span class="No-Break">Markdown reports</span></li>&#13;
			</ul>&#13;
			<h1 id="_idParaDest-110"><a id="_idTextAnchor111"/>Technical requirements</h1>&#13;
			<p>To complete the exercises in this chapter, you will need to have the latest versions of the <span class="No-Break">following packages:</span></p>&#13;
			<ul>&#13;
				<li><strong class="source-inline">rmarkdown</strong>, <span class="No-Break">version 2.17</span></li>&#13;
				<li><strong class="source-inline">quantmod</strong>, <span class="No-Break">version 0.4.20</span></li>&#13;
				<li><strong class="source-inline">lubridate</strong>, <span class="No-Break">version 1.8.0</span></li>&#13;
			</ul>&#13;
			<p>Please note that the versions of the packages mentioned in the preceding list are the latest ones while I am writing this book. All the code and data for this chapter is available <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/The-Statistics-and-Machine-Learning-with-R-Workshop/tree/main/Chapter_6"><span class="No-Break">https://github.com/PacktPublishing/The-Statistics-and-Machine-Learning-with-R-Workshop/tree/main/Chapter_6</span></a><span class="No-Break">.</span></p>&#13;
			<h1 id="_idParaDest-111"><a id="_idTextAnchor112"/>Fundamentals of R Markdown</h1>&#13;
			<p>R Markdown <a id="_idIndexMarker532"/>is a formatting language that can help you effectively and dynamically reveal insights from the data and generate reports in the form of a PDF, an HTML file, or a web application. It allows you to tidy up your analyses via various forms of graphs and tables covered earlier in this book, and present them in a consistent, neat, and transparent manner that facilitates easy reproduction by another analyst. Either in academia or industry, demonstrating reproducibility in your analysis is an essential quality of your work. When others can easily reproduce and understand what you did in your analysis, it makes communication much easier and your work more trustworthy. Since all outputs are code-based, the ability to easily reproduce your work also makes it convenient to fine-tune the analysis when you present your initial work and come back with further modifications to be done, a common iterative process in real-life <span class="No-Break">data analysis.</span></p>&#13;
			<p>Using R Markdown, you can present your code along with the output (including graphs and tables) and add surrounding text as context. It is similar to Jupyter Notebook using Python, yet it has advantages backed by the <span class="No-Break">tidyverse ecosystem.</span></p>&#13;
			<p>R Markdown is based on the Markdown syntax, which is a simple-to-follow markup language that allows the user to create web page-like files from plain text files. Let’s start by downloading the R Markdown package and creating a simple <span class="No-Break">starter file.</span></p>&#13;
			<h2 id="_idParaDest-112"><a id="_idTextAnchor113"/>Getting started with R Markdown</h2>&#13;
			<p>R Markdown <a id="_idIndexMarker533"/>allows us to create efficient reports to summarize our analyses and communicate the results to end users. The first thing we need to get R Markdown up and running in RStudio is to download the <strong class="source-inline">rmarkdown</strong> package and load it into the console, which can be done via the <span class="No-Break">following commands:</span></p>&#13;
			<pre class="console">&#13;
&gt;&gt;&gt; install.packages("rmarkdown")&#13;
&gt;&gt;&gt; library(rmarkdown)</pre>			<p>R Markdown<a id="_idIndexMarker534"/> has a dedicated type of file that ends with <strong class="source-inline">.Rmd</strong>. To create an R Markdown file, we can select <strong class="bold">File</strong> | <strong class="bold">New File</strong> | <strong class="bold">R Markdown</strong> in RStudio; this will make the window shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.1</em> appear. The left panel contains the different formats we can choose from, where <strong class="bold">Document</strong> is a collection of common file types such as HTML, PDF, and Word, <strong class="bold">Presentation</strong> renders the R Markdown file in a presentation mode similar to PowerPoint, <strong class="bold">Shiny</strong> adds an interactive <strong class="bold">Shiny</strong> component (interactive widgets) in the R Markdown file, and <strong class="bold">From Template</strong> provides a list of starter templates to accelerate <span class="No-Break">report generation:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer099" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_001.jpg" alt="Figure 6.1 – Creating an R Markdown file" width="1230" height="979"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.1 – Creating an R Markdown file</p>&#13;
			<p>Let’s start with the <strong class="bold">Document</strong> format and choose <strong class="bold">HTML</strong> as it can be easily converted into other file types later. After inputting the title (in this case, <strong class="source-inline">my first rmarkdown</strong>) and clicking <strong class="bold">OK</strong>, a <strong class="source-inline">.Rmd</strong> file with a basic set of instructions will be created. Not all of this information will be used, so feel free to delete unnecessary code in the script after you gain familiarity with the <span class="No-Break">common components.</span></p>&#13;
			<p>An R <a id="_idIndexMarker535"/>Markdown document consists of three components: the metadata for the file, the text for the report, and the code for the analysis. We’ll look at each of these components in the <span class="No-Break">following sections.</span></p>&#13;
			<h2 id="_idParaDest-113"><a id="_idTextAnchor114"/>Getting to know the YAML header</h2>&#13;
			<p>The top of the <a id="_idIndexMarker536"/>R Markdown script, as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.2</em>, is a set of metadata header information wrapped by two sets of three hyphens, <strong class="source-inline">---</strong>, and contained in the YAML header. YAML, a human-readable data serialization language, is a syntax for hierarchical data structures commonly used for configuration files. In this case, the default information includes the title, output format, and date, represented as key-value pairs. The information contained in the header impacts the whole document. For example, to generate a PDF file, we could simply switch from <strong class="source-inline">html_document</strong> to <strong class="source-inline">pdf_document</strong> in the output configuration. This is the minimal set of information needed in a header, although you are encouraged to add the author information (via the same initial window in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.2</em>) to show the authorship of <span class="No-Break">your work:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer100" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_002.jpg" alt="Figure 6.2 – YAML header of the default R Markdown script" width="558" height="211"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.2 – YAML header of the default R Markdown script</p>&#13;
			<p>With the header information in place, and assuming all the additional code is deleted, we can compile the R Markdown file into an HTML file by clicking on the <strong class="bold">Knit</strong> button in the taskbar, as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.3</em>. Knitting a file allows us to generate an output report from the R Markdown file. It combines the text and code in the R Markdown document into an HTML file based on the configuration in the YAML header. Note that we save the R Markdown file <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">test.Rmd</strong></span><span class="No-Break">:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer101" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_003.jpg" alt="Figure 6.3 – Converting the R Markdown file into an HTML file using the Knit button" width="563" height="288"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.3 – Converting the R Markdown file into an HTML file using the Knit button</p>&#13;
			<p>Knitting the<a id="_idIndexMarker537"/> R Markdown file will generate an HTML file that opens in a separate preview window. It will also save an HTML file named <strong class="source-inline">test.html</strong> in the same folder as the R <span class="No-Break">Markdown file.</span></p>&#13;
			<p>Next, we will learn more about the structure and syntax of the main body of an R Markdown file, including text formatting and handling <span class="No-Break">code chunks.</span></p>&#13;
			<h2 id="_idParaDest-114"><a id="_idTextAnchor115"/>Formatting textual information</h2>&#13;
			<p>Textual information <a id="_idIndexMarker538"/>is of equal, if not higher, importance than the code you write for analysis and modeling. Good code is often well documented, and this is even more critical when your end user is non-technical. Putting proper background information, assumption, context, and decision-making processes in place is an essential companion to your technical analysis, besides transparency and consistency of the analysis. In this section, we will review the common commands we can use to <span class="No-Break">format text.</span></p>&#13;
			<h3>Exercise 6.1 – formatting text in R Markdown</h3>&#13;
			<p>In <a id="_idIndexMarker539"/>this exercise, we will <a id="_idIndexMarker540"/>generate the text shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.4</em> using <span class="No-Break">R Markdown:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer102" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_004.jpg" alt="Figure 6.4 – Sample text generated as an HTML file using R Markdown" width="509" height="250"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.4 – Sample text generated as an HTML file using R Markdown</p>&#13;
			<p>The<a id="_idIndexMarker541"/> text includes a header, some words in italics or bold, a <a id="_idIndexMarker542"/>mathematical expression, and four unordered list items. Let’s look at how to generate <span class="No-Break">this text:</span></p>&#13;
			<ol>&#13;
				<li>Write a level-one header using the <strong class="source-inline">#</strong> <span class="No-Break">symbol:</span><pre class="source-code">&#13;
# Introduction to statistical model</pre><p class="list-inset">Note that the more hashes we use, the smaller the header will be. Remember to place the hash at the start of the line and add a single space after the hash and before <span class="No-Break">the text.</span></p></li>				<li>Write the middle sentence by wrapping the text in <strong class="source-inline">* *</strong> for italics and <strong class="source-inline">$$</strong> for <span class="No-Break">mathematical expressions:</span><pre class="source-code">&#13;
A *statistical model* takes the form $y=f(x)+\epsilon$, where</pre></li>				<li>Generate the unordered list by starting each item with <strong class="source-inline">*</strong> and wrapping the text in <strong class="source-inline">** **</strong> <span class="No-Break">for bold:</span><pre class="source-code">&#13;
* $x$ is the **input**&#13;
* $f$ is the **model**&#13;
* $\epsilon$ is the **random noise**&#13;
* $y$ is the **output**</pre><p class="list-inset">Note<a id="_idIndexMarker543"/> that we can easily switch the output file<a id="_idIndexMarker544"/> from HTML to PDF, simply by changing <strong class="source-inline">output: html_document</strong> to <strong class="source-inline">output: pdf_document</strong>. The resulting output is shown in <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.5</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer103" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_005.jpg" alt="Figure 6.5 – Sample text generated as a PDF file using R Markdown" width="1035" height="626"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.5 – Sample text generated as a PDF file using R Markdown</p>&#13;
			<p>Knitting the R Markdown file into a PDF document may require you to install additional packages, such as LaTeX. When an error pops up complaining that the package is unavailable, simply go to the console and install this package before knitting again. We can also use the drop-down menu from the <strong class="bold">Knit</strong> button to choose the desired <span class="No-Break">output format.</span></p>&#13;
			<p>In addition, the value for the date key in the YAML header is a string. If you would like to display it as the current date automatically, you can replace the string with <strong class="source-inline">"`</strong><span class="No-Break"><strong class="source-inline">r Sys.Date()`"</strong></span><span class="No-Break">.</span></p>&#13;
			<p>These are some of <a id="_idIndexMarker545"/>the common commands that we can use in a <strong class="source-inline">.Rmd</strong> file to<a id="_idIndexMarker546"/> format the texts in the resulting HTML file. Next, we will look at how to write R code in <span class="No-Break">R Markdown.</span></p>&#13;
			<h2 id="_idParaDest-115"><a id="_idTextAnchor116"/>Writing R code</h2>&#13;
			<p>In R Markdown, the<a id="_idIndexMarker547"/> R code is contained inside code chunks enclosed by three backticks, <strong class="source-inline">```</strong>, which separate code from text in the R Markdown file. A code chunk is also accompanied by the corresponding rules and specifications on the language used and other configurations inside curly braces, <strong class="source-inline">{}</strong>. Code chunks allow us to render code-based outputs or display the code in <span class="No-Break">the report.</span></p>&#13;
			<p>An example code chunk is shown in the following code snippet, where we indicate the type of language as R and perform an <span class="No-Break">assignment operation:</span></p>&#13;
			<pre class="source-code">&#13;
```{r}&#13;
a = 1&#13;
```</pre>			<p>Besides typing in the commands for a code chunk, we can also click on the code icon (starting with the letter <strong class="source-inline">c</strong>) in the toolbar and choose the option for the R language, as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.6</em>. Note that you can also use other languages such as Python, thus making R Markdown a versatile tool that allows us to use different programming languages in one <span class="No-Break">working file:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer104" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_006.jpg" alt="Figure 6.6 – Inserting an R code chunk" width="654" height="287"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.6 – Inserting an R code chunk</p>&#13;
			<p>Each chunk of code can be executed by clicking on the green arrow at the right-hand side of each chunk, with the result shown just below the code chunk. For example, <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.7</em> shows the output after performing the assignment and printing <span class="No-Break">the variable:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer105" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_007.jpg" alt="Figure 6.7 – Executing a code chunk" width="412" height="243"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.7 – Executing a code chunk</p>&#13;
			<p>We can also specify <a id="_idIndexMarker548"/>other options in the curly braces of a code chunk. For example, we may not want to include a particular code chunk in the output of the resulting HTML file. To hide the code itself and only show the output of the code, we can add <strong class="source-inline">echo=FALSE</strong> to the accompanying configuration of the code chunk, as shown in the following <span class="No-Break">code block:</span></p>&#13;
			<pre class="console">&#13;
```{r echo=FALSE}&#13;
a = 1&#13;
a&#13;
```</pre>			<p><span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.8</em> shows the two different types of output in the resulting <span class="No-Break">HTML file:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer106" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_008.jpg" alt="Figure 6.8 – Showing and hiding the source code in the HTML file" width="603" height="447"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.8 – Showing and hiding the source code in the HTML file</p>&#13;
			<p>In addition, when <a id="_idIndexMarker549"/>we load a package in the current session, we may get a warning message in the console. In R Markdown, such a warning message will also appear in the resulting HTML. To hide the warning message, we can add <strong class="source-inline">warning=FALSE</strong> to the configuration. For example, in the following code snippet, we are hiding the warning message while loading the <span class="No-Break"><strong class="source-inline">dplyr</strong></span><span class="No-Break"> package:</span></p>&#13;
			<pre class="console">&#13;
```{r warning=FALSE}&#13;
library(dplyr)&#13;
```</pre>			<p><span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.9</em> compares the two scenarios when loading a package with or without showing the <span class="No-Break">warning message:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer107" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_009.jpg" alt="Figure 6.9 – Hiding the warning message while loading a package" width="929" height="782"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.9 – Hiding the warning message while loading a package</p>&#13;
			<p>With these building <a id="_idIndexMarker550"/>blocks covered, we will conduct a case study on generating a financial analysis report using Google stock price data in the <span class="No-Break">following section.</span></p>&#13;
			<h1 id="_idParaDest-116"><a id="_idTextAnchor117"/>Generating a financial analysis report</h1>&#13;
			<p>In this section, we will analyze<a id="_idIndexMarker551"/> Google’s stock data from Yahoo! Finance. To facilitate data download and analysis, we will use the <strong class="source-inline">quantmod</strong> package, which is designed to assist quantitative traders in developing, testing, and deploying statistically based trading models. Let’s install the package and load it into <span class="No-Break">the console:</span></p>&#13;
			<pre class="console">&#13;
&gt;&gt;&gt; install.packages("quantmod")&#13;
&gt;&gt;&gt; library(quantmod)</pre>			<p>Next, we will generate an HTML report using R Markdown and cover the basics of data querying <span class="No-Break">and analysis.</span></p>&#13;
			<h2 id="_idParaDest-117"><a id="_idTextAnchor118"/>Getting and displaying the data</h2>&#13;
			<p>Let’s go through <a id="_idIndexMarker552"/>an exercise to generate an initial report that automatically queries stock data from Yahoo! Finance and displays the basic information in <span class="No-Break">the dataset.</span></p>&#13;
			<h3>Exercise 6.2 – generating the base report</h3>&#13;
			<p>In this exercise, we will set up an R Markdown file, download Google’s stock price data, and display general information about <span class="No-Break">the dataset:</span></p>&#13;
			<ol>&#13;
				<li>Create an empty R Markdown file named <strong class="source-inline">Financial analysis</strong> and set the corresponding <strong class="source-inline">output</strong>, <strong class="source-inline">date</strong>, and <strong class="source-inline">author</strong> in the <span class="No-Break">YAML file:</span><pre class="source-code">&#13;
---&#13;
title: "Financial analysis"&#13;
output: html_document&#13;
date: "2022-10-12"&#13;
author: "Liu Peng"&#13;
---</pre></li>				<li>Create a code chunk to load the <strong class="source-inline">quantmod</strong> package and query Google’s stock price data using the <strong class="source-inline">getSymbols()</strong> function. Store the resulting data in <strong class="source-inline">df</strong>. Also, hide all messages in the resulting HTML file and add the necessary text <span class="No-Break">for illustration:</span><pre class="source-code">&#13;
# Analyzing Google's stock data since 2007&#13;
Getting Google's stock data&#13;
```{r warning=FALSE, message=FALSE}&#13;
library(quantmod)&#13;
df = getSymbols("GOOG", auto.assign=FALSE)&#13;
```</pre><p class="list-inset">Here, we specify <strong class="source-inline">warning=FALSE</strong> to hide the warning message when loading the package and <strong class="source-inline">message=FALSE</strong> to hide the messages that are generated when calling the <strong class="source-inline">getSymbols()</strong> function. We also specify <strong class="source-inline">auto.assign=FALSE</strong> to assign the resulting DataFrame to the <strong class="source-inline">df</strong> variable. Also, note that we can add text as comments inside the code chunks, which will be treated as typical comments that start with a hash sign, <strong class="source-inline">#</strong>, <span class="No-Break">are.</span></p></li>				<li>Count the <a id="_idIndexMarker553"/>total number of rows and display the first and last two rows of the DataFrame via three separate code chunks. Add corresponding text to serve as documentation for <span class="No-Break">the code:</span><pre class="source-code">&#13;
Total number of observations of `df`&#13;
```{r}&#13;
nrow(df)&#13;
```&#13;
Displaying the first two rows of `df`&#13;
```{r}&#13;
head(df, 2)&#13;
```&#13;
Displaying the last two rows of `df`&#13;
```{r}&#13;
tail(df, 2)&#13;
```</pre><p class="list-inset">Note that we use <strong class="source-inline">` `</strong> to indicate inline code within <span class="No-Break">the text.</span></p><p class="list-inset">At this point, we can knit the R Markdown file to observe the resulting HTML file, as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.10</em>. It is a good practice to check the output frequently so that any potential unexpected error can be corrected <span class="No-Break">in time:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer108" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_010.jpg" alt="Figure 6.10 – Displaying the HTML output" width="962" height="1098"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.10 – Displaying the HTML output</p>&#13;
			<ol>&#13;
				<li value="4">Plot the time <a id="_idIndexMarker554"/>series of the daily closing price using the <span class="No-Break"><strong class="source-inline">chart_Series()</strong></span><span class="No-Break"> function:</span><pre class="source-code">&#13;
Plotting the stock price data&#13;
```{r}&#13;
chart_Series(df$GOOG.Close,name="Google Stock Price")&#13;
```</pre><p class="list-inset">Adding this code chunk to the R Markdown document and knitting it generates the same output file with an additional graph, as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.11</em>. The <strong class="source-inline">chart_Series()</strong> function is a utility function for plotting that’s provided by <strong class="source-inline">quantmod</strong>. We can also plot it based on the <strong class="source-inline">ggplot</strong> package, as discussed in the <span class="No-Break">previous chapter:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer109" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_011.jpg" alt="Figure 6.11 – Daily stock price of Google since 2017" width="1292" height="922"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.11 – Daily stock price of Google since 2017</p>&#13;
			<p>In addition to generating<a id="_idIndexMarker555"/> figures from code, we can include links and images to the output. This image can be loaded either from a local drive or from the web. In the following code snippet, we are adding a line of text with a hyperlink to an example image and showing the image in the next line by directly reading it <span class="No-Break">from GitHub:</span></p>&#13;
			<pre class="source-code">&#13;
The following image can be accessed [here](https://github.com/PacktPublishing/The-Statistics-and-Machine-Learning-with-R-Workshop/blob/main/Chapter_6/Image.png).&#13;
![](https://raw.githubusercontent.com/PacktPublishing/The-Statistics-and-Machine-Learning-with-R-Workshop/main/Chapter_6/Image.png)</pre>			<p>Note that we added a hyperlink to the word <strong class="source-inline">here</strong> by wrapping it inside square brackets, followed by the hyperlink in parentheses. To add an image, we can add an exclamation mark in front of the square brackets. We can also specify the size of the image by adding <strong class="source-inline">{width=250px}</strong> after the <span class="No-Break">image link.</span></p>&#13;
			<p>Knitting the previous code in R Markdown generates <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.12</em></span><span class="No-Break">:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer110" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_012.jpg" alt="Figure 6.12 – Visualizing an image from GitHub" width="558" height="410"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.12 – Visualizing an image from GitHub</p>&#13;
			<p>Next, we will perform data analysis and display the result <span class="No-Break">as text.</span></p>&#13;
			<h2 id="_idParaDest-118"><a id="_idTextAnchor119"/>Performing data analysis</h2>&#13;
			<p>With the<a id="_idIndexMarker556"/> dataset loaded, we can perform data analysis and present insights in the resulting output document, all generated automatically and consistently. For example, we can present high-level statistics about the stock price for a particular period of interest, such as the average, maximum, and minimum prices. These statistics can be embedded into text, making the presentation style more natural <span class="No-Break">and self-contained.</span></p>&#13;
			<h3>Exercise 6.3 – performing simple data analysis</h3>&#13;
			<p>In this exercise, we will extract the year-to-date highest, average, and lowest stock prices of Google. To achieve this, we will first transform the dataset from its original <strong class="source-inline">xts</strong> format into a <strong class="source-inline">tibble</strong> object, then summarize these statistics using <strong class="source-inline">dplyr</strong>. Finally, we will display this information within the text of the <span class="No-Break">HTML document:</span></p>&#13;
			<ol>&#13;
				<li>Load the <strong class="source-inline">dplyr</strong> and <strong class="source-inline">tibble</strong> packages and convert <strong class="source-inline">df</strong> from <strong class="source-inline">xts</strong> into <strong class="source-inline">tibble</strong> format. Store the resulting <strong class="source-inline">tibble</strong> object <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">df_tbl</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
library(dplyr)&#13;
library(tibble)&#13;
df_tbl = df %&gt;%&#13;
  as_tibble() %&gt;%&#13;
  add_column(date = index(df), .before = 1)</pre><p class="list-inset">Here, we will use the <strong class="source-inline">as_tibble()</strong> function to convert the <strong class="source-inline">xts</strong> object into <strong class="source-inline">tibble</strong> format, followed by the <strong class="source-inline">add_column()</strong> function to insert a date column at the beginning of the DataFrame. The date information is available as an index in the <a id="_idIndexMarker557"/>original <span class="No-Break"><strong class="source-inline">xts</strong></span><span class="No-Break"> object.</span></p></li>				<li>Extract the year-to-date highest, average, and lowest closing prices since 2022. Store the results in <strong class="source-inline">max_ytd</strong>, <strong class="source-inline">avg_ytd</strong>, and <span class="No-Break"><strong class="source-inline">min_ytd</strong></span><span class="No-Break">, respectively:</span><pre class="source-code">&#13;
max_ytd = df_tbl %&gt;%&#13;
  filter(date &gt;= as.Date("2022-01-01")) %&gt;%&#13;
  summarise(price = max(GOOG.Close)) %&gt;%&#13;
  .$price&#13;
avg_ytd = df_tbl %&gt;%&#13;
  filter(date &gt;= as.Date("2022-01-01")) %&gt;%&#13;
  summarise(price = mean(GOOG.Close)) %&gt;%&#13;
  .$price&#13;
min_ytd = df_tbl %&gt;%&#13;
  filter(date &gt;= as.Date("2022-01-01")) %&gt;%&#13;
  summarise(price = min(GOOG.Close)) %&gt;%&#13;
  .$price</pre><p class="list-inset">For each statistic, we first filter by date, followed by extracting the relevant statistic based on the <strong class="source-inline">GOOG.Close</strong> column. Finally, we return the result as a single scalar value instead of <span class="No-Break">a DataFrame.</span></p></li>				<li>Display these <a id="_idIndexMarker558"/>statistics <span class="No-Break">in text:</span><pre class="source-code">&#13;
Google's **highest** year-to-date stock price is `r max_ytd`.&#13;
Google's **average** year-to-date stock price is `r avg_ytd`.&#13;
Google's **lowest** year-to-date stock price is `r min_ytd`.</pre><p class="list-inset">As shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.13</em>, knitting the document outputs the statistics in the HTML file, which allows us to reference the code results in the <span class="No-Break">HTML report:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer111" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_013.jpg" alt="Figure 6.13 – Extracting simple statistics and displaying them in HTML form" width="1050" height="1097"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.13 – Extracting simple statistics and displaying them in HTML form</p>&#13;
			<p>In the next section, we will look at adding plots to the <span class="No-Break">HTML report.</span></p>&#13;
			<h2 id="_idParaDest-119"><a id="_idTextAnchor120"/>Adding plots to the report</h2>&#13;
			<p>Adding <a id="_idIndexMarker559"/>plots to the HTML report works the same way as in the RStudio console. We could simply write the plotting code in a chunk, and the graph will appear in the resulting report after we’ve knitted the R Markdown file. Let’s go through an exercise to visualize the stock price using the <strong class="source-inline">ggplot2</strong> package we covered in the <span class="No-Break">pr<a id="_idTextAnchor121"/>evious chapter.</span></p>&#13;
			<h3>Exercise 6.4 – adding plots using ggplot2</h3>&#13;
			<p>In this exercise, we will visualize the average monthly closing price for the past three years as line plots. We will also explore different configuration options for the figure in <span class="No-Break">the report:</span></p>&#13;
			<ol>&#13;
				<li>Create a<a id="_idIndexMarker560"/> dataset that contains the average monthly closing price between 2019 <span class="No-Break">and 2021:</span><pre class="source-code">&#13;
library(ggplot2)&#13;
library(lubridate)&#13;
df_tbl = df_tbl %&gt;%&#13;
  mutate(Month = factor(month(date), levels = as.character(1:12)),&#13;
         Year = as.character(year(date)))&#13;
tmp_df = df_tbl %&gt;%&#13;
  filter(Year %in% c(2019, 2020, 2021)) %&gt;%&#13;
  group_by(Year, Month) %&gt;%&#13;
  summarise(avg_close_price = mean(GOOG.Close)) %&gt;%&#13;
  ungroup()</pre><p class="list-inset">Here, we first create two additional columns called <strong class="source-inline">Month</strong> and <strong class="source-inline">Year</strong> that are derived based on the date column using the <strong class="source-inline">month()</strong> and <strong class="source-inline">year()</strong> functions from the <strong class="source-inline">lubridate</strong> package. We also convert <strong class="source-inline">Month</strong> into a factor-typed column with levels between 1 and 12 so that this column can follow a particular sequence when we plot the monthly price later. Similarly, we set <strong class="source-inline">Year</strong> as a character-typed column to ensure that it will not be interpreted by <strong class="source-inline">ggplot2</strong> as a <span class="No-Break">numeric variable.</span></p><p class="list-inset">Next, we filter the <strong class="source-inline">df_tbl</strong> variable by <strong class="source-inline">Year</strong>, group by <strong class="source-inline">Year</strong> and <strong class="source-inline">Month</strong>, and calculate the average <strong class="source-inline">GOOG.Close</strong> value, followed by using the <strong class="source-inline">ungroup()</strong> function to remove the group structure in the resulting DataFrame saved <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">tmp_df</strong></span><span class="No-Break">.</span></p></li>				<li>Plot the monthly average closing price each year as a separate line in a line chart. Change the corresponding figure label and <span class="No-Break">text size:</span><pre class="source-code">&#13;
p = ggplot(tmp_df,&#13;
       aes(x = Month, y = avg_close_price,&#13;
           group = Year,&#13;
           color = Year)) +&#13;
  geom_line() +&#13;
  theme(axis.text=element_text(size=16),&#13;
        axis.title=element_text(size=16,face="bold"),&#13;
        legend.text=element_text(size=20)) +&#13;
  labs(titel = "Monthly average closing price between 2019 and 2021",&#13;
      x = "Month of the year",&#13;
      y = "Average closing price")&#13;
p</pre><p class="list-inset">Running the <a id="_idIndexMarker561"/>previous commands in a code chunk will generate the output shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.14</em>. Note that we have also added a header and some text to point out the purpose and context of the code. The code and the output are shown automatically after knitting the R Markdown file, thus making R Markdown a great option for producing transparent, engaging, and reproducible <span class="No-Break">technical reports:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer112" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_014.jpg" alt="Figure 6.14 – Adding a plot to show the monthly average closing price for the past three years" width="1013" height="1400"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.14 – Adding a plot to show the monthly average closing price for the past three years</p>&#13;
			<p class="list-inset">We can also<a id="_idIndexMarker562"/> configure the size and position of <span class="No-Break">the figure.</span></p>&#13;
			<ol>&#13;
				<li value="3">Shrink the size of the figure by setting <strong class="source-inline">fig.width=5</strong> and <strong class="source-inline">fig.height=3</strong> in the configuration section of the code chunk and show the <span class="No-Break">output graph:</span><pre class="source-code">&#13;
Control the figure size via the `fig.width` and `fig.height` parameters.&#13;
```{r fig.width=5, fig.height=3}&#13;
p&#13;
```</pre><p class="list-inset">Knitting the<a id="_idIndexMarker563"/> document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.15</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer113" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_015.jpg" alt="Figure 6.15 – Changing the size of the figure" width="1492" height="666"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.15 – Changing the size of the figure</p>&#13;
			<ol>&#13;
				<li value="4">Align the position of the figure so that it’s at the center of <span class="No-Break">the document:</span><pre class="source-code">&#13;
Align the figure using the `fig.align` parameter.&#13;
```{r fig.width=5, fig.height=3, fig.align='center'}&#13;
p&#13;
```</pre><p class="list-inset">Knitting the document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.16</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer114" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_016.jpg" alt="Figure 6.16 – Changing the position of the figure" width="1649" height="667"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.16 – Changing the position of the figure</p>&#13;
			<ol>&#13;
				<li value="5">Add a<a id="_idIndexMarker564"/> caption to <span class="No-Break">the plot:</span><pre class="source-code">&#13;
Add figure caption via the `fig.cap` parameter.&#13;
```{r fig.width=5, fig.height=3, fig.align='center', fig.cap=' Figure 1.1 Monthly average closing price between 2019 and 2021'}&#13;
p&#13;
```</pre><p class="list-inset">Knitting the document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.17</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer115" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_017.jpg" alt="Figure 6.17 – Adding a caption to the figure" width="1650" height="707"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.17 – Adding a caption to the figure</p>&#13;
			<p>Besides graphs, tables<a id="_idIndexMarker565"/> are also commonly used to present and summarize information in a report. We’ll look at how to generate tables in the <span class="No-Break">next section.</span></p>&#13;
			<h2 id="_idParaDest-120"><a id="_idTextAnchor122"/>Adding tables to the report</h2>&#13;
			<p>Representing<a id="_idIndexMarker566"/> information in a table is a good complement to its graph counterpart when the report user is interested in delving further into the details or even using it for further analysis. For end users, being able to access and use the data in the report plays a pivotal role as this gives them more control over the already preprocessed information in the report. In other words, an R Markdown-based HTML report not only summarizes information as graphs for easy digestion but also provides detailed information on specific data sources as tables to facilitate ad <span class="No-Break">hoc analysis.</span></p>&#13;
			<p>We can add tables using the <strong class="source-inline">kable()</strong> function from the <strong class="source-inline">knitr</strong> package, the backbone engine that supports executing code in each code chunk, and then perform dynamic report generation upon knitting the R Markdown document. Note that it is a good practice to preprocess and clean the data before presenting it as a table via <strong class="source-inline">kable()</strong>; the task should only be visualizing a clean and <span class="No-Break">organized table.</span></p>&#13;
			<p>Let’s go through an exercise to look at how to add clean tables to <span class="No-Break">the report.</span></p>&#13;
			<h3>Exercise 6.5 – adding tables using kable()</h3>&#13;
			<p>In this exercise, we will show the top five rows of the <strong class="source-inline">tmp_df</strong> variable in a table, then demonstrate different configuration options for displaying <span class="No-Break">the table:</span></p>&#13;
			<ol>&#13;
				<li>Show the top five rows of <strong class="source-inline">tmp_df</strong> using the <strong class="source-inline">kable()</strong> function from the <span class="No-Break"><strong class="source-inline">knitr</strong></span><span class="No-Break"> package:</span><pre class="source-code">&#13;
# Adding tables&#13;
Printing `tmp_df` as a static summary table via the `kable()` function.&#13;
```{r}&#13;
library(knitr)&#13;
kable(tmp_df[1:5,])&#13;
```</pre><p class="list-inset">Knitting the<a id="_idIndexMarker567"/> document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.18</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer116" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_018.jpg" alt="Figure 6.18 – Adding a table to the report" width="1381" height="699"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.18 – Adding a table to the report</p>&#13;
			<ol>&#13;
				<li value="2">Change the column names of the table using the <span class="No-Break"><strong class="source-inline">col.names</strong></span><span class="No-Break"> argument:</span><pre class="source-code">&#13;
Changing column names via the `col.names` parameter.&#13;
```{r}&#13;
kable(tmp_df[1:5,], col.names=c("Year", "Month", "Average closing price"))&#13;
```</pre><p class="list-inset">Knitting the document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.19</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer117" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_019.jpg" alt="Figure 6.19 – Changing column names in the table" width="1385" height="538"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.19 – Changing column names in the table</p>&#13;
			<p class="list-inset">We can also <a id="_idIndexMarker568"/>modify the column alignment within the table using the <strong class="source-inline">align</strong> argument. The default column alignment is on the right for the numeric column and the left for all other types of columns. As shown in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.19</em>, the <strong class="source-inline">Year</strong> (character typed) and <strong class="source-inline">Month</strong> (factor typed) columns are aligned on the left, and <strong class="source-inline">Average closing price</strong> (numeric) is aligned on the right. The alignment is specified column-wise using a single letter, with <strong class="source-inline">"l"</strong> denoting aligning to the left, <strong class="source-inline">"c"</strong> to the center, and <strong class="source-inline">"r"</strong> to <span class="No-Break">the right.</span></p>&#13;
			<ol>&#13;
				<li value="3">Align all columns to the center using the <span class="No-Break"><strong class="source-inline">align</strong></span><span class="No-Break"> argument:</span><pre class="source-code">&#13;
Align the table via the `align` argument.&#13;
```{r}&#13;
kable(tmp_df[1:5,], col.names=c("Year", "Month", "Average closing price"), align="ccc")&#13;
```</pre><p class="list-inset">Here, we specify <strong class="source-inline">align="ccc"</strong> to align all columns<a id="_idIndexMarker569"/> to the center. Knitting the document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.20</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer118" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_020.jpg" alt="Figure 6.20 – Centering all the columns in the table" width="1540" height="539"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.20 – Centering all the columns in the table</p>&#13;
			<p class="list-inset">Lastly, we can also add a caption to <span class="No-Break">the table.</span></p>&#13;
			<ol>&#13;
				<li value="4">Add a caption to the table using the <span class="No-Break"><strong class="source-inline">caption</strong></span><span class="No-Break"> argument:</span><pre class="source-code">&#13;
Add table caption via the `caption` parameter.&#13;
```{r}&#13;
kable(tmp_df[1:5,], col.names=c("Year", "Month", "Average closing price"), align="ccc", caption="Table 1.1 Average monthly closing price")</pre><p class="list-inset">Knitting the<a id="_idIndexMarker570"/> document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.21</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer119" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_021.jpg" alt="Figure 6.21 – Adding a caption to the table" width="1650" height="575"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.21 – Adding a caption to the table</p>&#13;
			<p>In the next section, we will discuss some common options we can use to modify the code chunk outputs after knitting the R <span class="No-Break">Markdown document.</span></p>&#13;
			<h2 id="_idParaDest-121"><a id="_idTextAnchor123"/>Configuring code chunks</h2>&#13;
			<p>We <a id="_idIndexMarker571"/>have seen several options from previous exercises that we can use to control the output style of a code chunk. For example, by setting <strong class="source-inline">warning=FALSE</strong> and <strong class="source-inline">message=FALSE</strong>, we could hide potential warnings and messages in the resulting <span class="No-Break">output document.</span></p>&#13;
			<p>There are other commonly used options. For example, we can use the <strong class="source-inline">include</strong> option to decide whether the code and results appear in the output report or not. In other words, setting <strong class="source-inline">include=FALSE</strong> will hide the code and results of the specific code chunk in the report, although the code will still be executed upon knitting the R Markdown document. By default, we have <strong class="source-inline">include=TRUE</strong> and all the code and execution results will appear in <span class="No-Break">the report.</span></p>&#13;
			<p>Another related option is <strong class="source-inline">echo</strong>, where setting <strong class="source-inline">echo=FALSE</strong> hides the code and only shows the execution outputs in the report. We can consider this option when we’re generating plots in the report since most users are more interested in the graphical analysis compared to the process that generates the graph. Again, by default, we have <strong class="source-inline">echo=TRUE</strong>, which displays the code in the report before <span class="No-Break">the plots.</span></p>&#13;
			<p>Besides this, we may only be interested in showing some code instead of executing all of it. In this case, we can set <strong class="source-inline">eval=FALSE</strong> to make sure that the code in the code chunk does not impact the overall execution and result of the report. This is in contrast to setting <strong class="source-inline">include=FALSE</strong>, which hides the code but still executes it in the backend, thus bearing an effect on the subsequent code. By default, we have <strong class="source-inline">eval=FALSE</strong>, which evaluates all the code in the code chunk. <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.22</em> summarizes these <span class="No-Break">three options:</span></p>&#13;
			<table id="table001-1" class="No-Table-Style _idGenTablePara-1">&#13;
				<colgroup>&#13;
					<col/>&#13;
					<col/>&#13;
					<col/>&#13;
					<col/>&#13;
				</colgroup>&#13;
				<tbody>&#13;
					<tr class="No-Table-Style">&#13;
						<td class="No-Table-Style"/>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="bold">Code execution</strong></span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="bold">Code appearance</strong></span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="bold">Result appearance</strong></span></p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="No-Table-Style">&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="source-inline">include=FALSE</strong></span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">Yes</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">No</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">No</span></p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="No-Table-Style">&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="source-inline">echo=FALSE</strong></span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">Yes</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">No</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">Yes</span></p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="No-Table-Style">&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break"><strong class="source-inline">eval=FALSE</strong></span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">No</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">Yes</span></p>&#13;
						</td>&#13;
						<td class="No-Table-Style">&#13;
							<p><span class="No-Break">No</span></p>&#13;
						</td>&#13;
					</tr>&#13;
				</tbody>&#13;
			</table>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.22 – Common options for configuring code chunks</p>&#13;
			<p>Next, we will go over an exercise to practice <span class="No-Break">different options.</span></p>&#13;
			<h3><a id="_idTextAnchor124"/>Exercise 6.6 – configuring code chunks</h3>&#13;
			<p>In this <a id="_idIndexMarker572"/>exercise, we will go through a few ways to configure the code chunks we <span class="No-Break">covered previously:</span></p>&#13;
			<ol>&#13;
				<li>Display the maximum closing price for the past five years in a table. Show both the code and the result in <span class="No-Break">the report:</span><pre class="source-code">&#13;
# Code chunk options&#13;
Display both code and result be default.&#13;
```{r}&#13;
tmp_df = df_tbl %&gt;%&#13;
  mutate(Year = as.integer(Year)) %&gt;%&#13;
  filter(Year &gt;= max(Year)-5,&#13;
         Year &lt; max(Year)) %&gt;%&#13;
  group_by(Year) %&gt;%&#13;
  summarise(max_closing = max(GOOG.Close))&#13;
kable(tmp_df)&#13;
```</pre><p class="list-inset">Here, we first convert <strong class="source-inline">Year</strong> into an integer-typed variable, then subset the DataFrame to keep only the last five years of data, followed by extracting the maximum closing price for each year. The result is then shown via the <span class="No-Break"><strong class="source-inline">kable()</strong></span><span class="No-Break"> function.</span></p><p class="list-inset">Knitting the document with these added commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.23</em>. The result shows that Google has been making new highs over <span class="No-Break">the years:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer120" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_023.jpg" alt="Figure 6.23 – Displaying the maximum closing price for the past five years" width="1538" height="759"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.23 – Displaying the maximum closing price for the past five years</p>&#13;
			<ol>&#13;
				<li value="2">Obtain the<a id="_idIndexMarker573"/> highest closing price in a code chunk with the code and result hidden in the report by setting <strong class="source-inline">include=FALSE</strong>. Display the result in a new <span class="No-Break">code chunk:</span><pre class="source-code">&#13;
Execute the code chunk but hide both code and result in the output by setting `include=FALSE`.&#13;
```{r include=FALSE}&#13;
total_max_price = max(df_tbl$GOOG.Close)&#13;
```&#13;
Display the code and result.&#13;
```{r}&#13;
total_max_price&#13;
```</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.24</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer121" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_024.jpg" alt="Figure 6.24 – Hiding the code and result in one code chunk and displaying the result separately" width="1615" height="399"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.24 – Hiding the code and result in one code chunk and displaying the result separately</p>&#13;
			<ol>&#13;
				<li value="3">For the running table, hide the code chunk and only display the result in the report by <span class="No-Break">setting </span><span class="No-Break"><strong class="source-inline">echo=FALSE</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
Execute the code chunk and only display the result in the output by setting `echo=FALSE`.&#13;
```{r echo=FALSE}&#13;
kable(tmp_df)&#13;
```</pre><p class="list-inset">Knitting the <a id="_idIndexMarker574"/>document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.25</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer122" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_025.jpg" alt="Figure 6.25 – Hiding the code chunk and displaying the result in the report" width="1448" height="394"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.25 – Hiding the code chunk and displaying the result in the report</p>&#13;
			<ol>&#13;
				<li value="4">Only display the code on table generation in the code chunk and do not execute it in the report by <span class="No-Break">setting </span><span class="No-Break"><strong class="source-inline">eval=FALSE</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
Do not execute the code chunk and only display the code in the output by setting `eval=FALSE`.&#13;
```{r eval=FALSE}&#13;
kable(tmp_df)&#13;
```</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.26</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer123" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_026.jpg" alt="Figure 6.26 – Displaying the code chunk without executing it in the report" width="1518" height="144"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.26 – Displaying the code chunk without executing it in the report</p>&#13;
			<ol>&#13;
				<li value="5">Print a test <a id="_idIndexMarker575"/>message and a warning message in separate blocks. Then, put the same contents in a single block by <span class="No-Break">setting </span><span class="No-Break"><strong class="source-inline">collapse=TRUE</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
All results are in separate blocks by default.&#13;
```{r}&#13;
print("This is a test message")&#13;
warning("This is a test message")&#13;
```&#13;
Collapsing all results in one block by setting `collapse=TRUE`.&#13;
```{r collapse=TRUE}&#13;
print("This is a test message")&#13;
warning("This is a test message")&#13;
```</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.27</em>, which shows that both the printed and warning messages are shown in a single block together with <span class="No-Break">the code:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer124" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_027.jpg" alt="Figure 6.27 – Displaying the code and results in one block" width="634" height="360"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.27 – Displaying the code and results in one block</p>&#13;
			<p class="list-inset">In addition, we can hide the warning by configuring the <strong class="source-inline">warning</strong> attribute in the <span class="No-Break">code chunk.</span></p>&#13;
			<ol>&#13;
				<li value="6">Hide the <a id="_idIndexMarker576"/>warning by <span class="No-Break">setting </span><span class="No-Break"><strong class="source-inline">warning=FALSE</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
Hide warning by setting `warning=FALSE`.&#13;
```{r collapse=TRUE, warning=FALSE}&#13;
print("This is a test message")&#13;
warning("This is a test message")&#13;
```</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.28</em>, where the warning has now been removed from <span class="No-Break">the report:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer125" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_028.jpg" alt="Figure 6.28 – Hiding the warning in the report" width="957" height="222"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.28 – Hiding the warning in the report</p>&#13;
			<p>Setting the display parameters for each code chunk becomes troublesome when we need to repeat the same operation for many chunks. Instead, we can make a global configuration that applies to all chunks in the R Markdown document by using the <strong class="source-inline">knitr::opts_chunk()</strong> function at the beginning of the document. For example, the following code snippet <a id="_idIndexMarker577"/>hides the warnings for all following <span class="No-Break">code chunks:</span></p>&#13;
			<pre class="source-code">&#13;
Set global options.&#13;
```{r include=FALSE}&#13;
knitr::opts_chunk$set(warning=FALSE)&#13;
```</pre>			<p>In the next section, we will look at how to customize R Markdown reports, such as by adding a table of contents and changing the <span class="No-Break">report style.</span></p>&#13;
			<h1 id="_idParaDest-122"><a id="_idTextAnchor125"/>Customizing R Markdown reports</h1>&#13;
			<p>In this section, we <a id="_idIndexMarker578"/>will look at adding metadata such as a table of contents to the report, followed by introducing more options for changing the <span class="No-Break">report style.</span></p>&#13;
			<h2 id="_idParaDest-123"><a id="_idTextAnchor126"/>Adding a table of contents</h2>&#13;
			<p>When <a id="_idIndexMarker579"/>reading a report for the first time, a table of contents provides an overview of the report and thus helps readers quickly navigate the different sections of <span class="No-Break">the report.</span></p>&#13;
			<p>To add a table of contents, we can append a colon to the <strong class="source-inline">html_document</strong> field in the YAML header and set <strong class="source-inline">toc: true</strong> as a separate line with one more indentation than the <strong class="source-inline">html_document</strong> field. This is shown in the following <span class="No-Break">code snippet:</span></p>&#13;
			<pre class="console">&#13;
---&#13;
title: "Financial analysis"&#13;
output:&#13;
    html_document:&#13;
        toc: true&#13;
date: "2022-10-12"&#13;
author: "Liu Peng"&#13;
---</pre>			<p>Knitting<a id="_idIndexMarker580"/> the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.29</em>, where a table of contents is now displayed at the top of the report. Note that when you click on a header in the table of contents, the report will directly jump to that section, which is a nice and <span class="No-Break">user-friendly feature:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer126" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_029.jpg" alt="Figure 6.29 – Adding a table of contents to the report" width="655" height="428"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.29 – Adding a table of contents to the report</p>&#13;
			<p>We can also set <strong class="source-inline">toc_float=true</strong> to make the table of contents float. With this property specified, the table of contents will remain visible as the user scrolls through the report. The following code snippet includes this property in the <span class="No-Break">YAML header:</span></p>&#13;
			<pre class="source-code">&#13;
---&#13;
title: "Financial analysis"&#13;
output:&#13;
    html_document:&#13;
        toc: true&#13;
        toc_float: true&#13;
date: "2022-10-12"&#13;
author: "Liu Peng"&#13;
---</pre>			<p>Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.30</em>, where the table of contents appears on the left-hand side and remains visible as the user<a id="_idIndexMarker581"/> navigates <span class="No-Break">different sections:</span></p>&#13;
			<div>&#13;
				<div id="_idContainer127" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_030.jpg" alt="Figure 6.30 – Setting up a floating table of contents in the report" width="1623" height="460"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.30 – Setting up a floating table of contents in the report</p>&#13;
			<p>Next, we will look at creating a report with parameters in the <span class="No-Break">YAML header.</span></p>&#13;
			<h2 id="_idParaDest-124"><a id="_idTextAnchor127"/>Creating a report with parameters</h2>&#13;
			<p>Recall that our<a id="_idIndexMarker582"/> running dataset contains the daily stock prices of Google since 2007. Imagine that we need to create a separate annual report for each year; we may need to manually edit the <strong class="source-inline">year</strong> parameter for each report, which would be a repetitive process. Instead, we can set an input parameter in the YAML header as a global variable that’s accessible to all code chunks. When generating other similar reports, we could simply change this parameter and rerun the same R <span class="No-Break">Markdown file.</span></p>&#13;
			<p>We can set a parameter input by adding the <strong class="source-inline">params</strong> field, followed by a colon in the YAML header. Then, we must add another line, indent it, and add the key and value of the parameter setting, which are separated by a colon. Note that the value of the parameter is not wrapped <span class="No-Break">in quotations.</span></p>&#13;
			<p>Let’s go through an exercise to <span class="No-Break">illustrate this.</span></p>&#13;
			<h3>Exercise 6.7 – generating reports using parameters</h3>&#13;
			<p>In this exercise, we will configure parameters to generate reports that are similar and only differ in the <span class="No-Break">parameter setting:</span></p>&#13;
			<ol>&#13;
				<li>Add a <strong class="source-inline">year</strong> parameter to the YAML header and set its value <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">2020</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
---&#13;
title: "Financial analysis"&#13;
output:&#13;
    html_document:&#13;
        toc: true&#13;
        toc_float: true&#13;
date: "2022-10-12"&#13;
author: "Liu Peng"&#13;
params:&#13;
    year: 2020&#13;
---</pre><p class="list-inset">Here, we<a id="_idIndexMarker583"/> use the <strong class="source-inline">params</strong> field to initiate the parameter setting and add <strong class="source-inline">year: 2020</strong> as a <span class="No-Break">key-value pair.</span></p></li>				<li>Extract the summary of the closing price using the <strong class="source-inline">summary()</strong> function <span class="No-Break">for 2020:</span><pre class="source-code">&#13;
# Generating report using parameters&#13;
Summary statistics of year `r params$year`&#13;
```{r}&#13;
df_tbl %&gt;%&#13;
  filter(Year == params$year) %&gt;%&#13;
  select(GOOG.Close) %&gt;%&#13;
  summary()&#13;
```</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.31</em>, where we use <strong class="source-inline">Year</strong> <strong class="source-inline">== params$year</strong> as a filtering condition in the <span class="No-Break"><strong class="source-inline">filter()</strong></span><span class="No-Break"> function:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer128" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_031.jpg" alt="Figure 6.31 – Generating summary statistics of the closing price for 2020 using parameters" width="1621" height="631"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.31 – Generating summary statistics of the closing price for 2020 using parameters</p>&#13;
			<ol>&#13;
				<li value="3">Change the <a id="_idIndexMarker584"/>parameter setting and generate the same statistics <span class="No-Break">for 2021:</span><pre class="source-code">&#13;
---&#13;
title: "Financial analysis"&#13;
output:&#13;
    html_document:&#13;
        toc: true&#13;
        toc_float: true&#13;
date: "2022-10-12"&#13;
author: "Liu Peng"&#13;
params:&#13;
    year: 2021&#13;
---</pre><p class="list-inset">Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.32</em>. With a simple change of value in the parameters, we can generate a report for a different year without editing the contents following the <span class="No-Break">YAML header:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer129" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_032.jpg" alt="Figure 6.32 – Generating summary statistics of the closing price for 2021 using parameters" width="1643" height="579"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.32 – Generating summary statistics of the closing price for 2021 using parameters</p>&#13;
			<p class="list-inset">We can also<a id="_idIndexMarker585"/> create a report based on multiple parameters, which can be appended as key-value pairs in the <span class="No-Break">YAML header.</span></p>&#13;
			<ol>&#13;
				<li value="4">Generate the same statistics for the closing price for <span class="No-Break">Q1 2021:</span><pre class="source-code">&#13;
Summary statistics of year `r params$year` and quarter `r params$quarter`&#13;
```{r}&#13;
df_tbl %&gt;%&#13;
  mutate(Qter = quarters(date)) %&gt;%&#13;
  filter(Year == params$year,&#13;
         Qter == params$quarter) %&gt;%&#13;
  select(GOOG.Close) %&gt;%&#13;
  summary()&#13;
```</pre><p class="list-inset">Here, we create a new column to represent the quarter using the <strong class="source-inline">quarters()</strong> function based on the date, followed by filtering using the <strong class="source-inline">year</strong> and <strong class="source-inline">the</strong> <strong class="source-inline">quarter</strong> parameters set in the YAML header. Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.33</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer130" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_033.jpg" alt="Figure 6.33 – Generating summary statistics of the closing price for 2021 Q1 using multiple parameters" width="1429" height="640"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.33 – Generating summary statistics of the closing price for 2021 Q1 using multiple parameters</p>&#13;
			<p>In the following section, we will look at the style of the report using <strong class="bold">Cascading Style Sheets</strong> (<strong class="bold">CSS</strong>), a commonly <a id="_idIndexMarker586"/>used web programming language to adjust the style of <span class="No-Break">web pages.</span></p>&#13;
			<h2 id="_idParaDest-125"><a id="_idTextAnchor128"/>Customizing the report style</h2>&#13;
			<p>The <a id="_idIndexMarker587"/>report style includes details such as the color and font of text in the report. Like any web programming framework, R Markdown offers controls that allow attentive users to make granular adjustments to the report’s details. The adjustable components include most HTML elements in the report, such as the title, body text, code, and more. Let’s go through an exercise to learn about different types of <span class="No-Break">style control.</span></p>&#13;
			<h3>Exercise 6.8 – customizing the report style</h3>&#13;
			<p>In this exercise, we will customize the report style by adding relevant configurations within the <strong class="source-inline">&lt;style&gt;</strong> and <strong class="source-inline">&lt;/style&gt;</strong> flags. The specification starts by choosing the element(s) to be configured, such as the main body (using the <strong class="source-inline">body</strong> identifier) or code chunk (using the <strong class="source-inline">pre</strong> identifier). Each property should start with a new line, have the same level of indentation, and have one more level of indentation than the preceding <span class="No-Break">HTML element.</span></p>&#13;
			<p>In addition, all contents to be specified are key-value pairs that end with a semicolon and are wrapped within curly braces, <strong class="source-inline">{}</strong>. The style configuration can also exist anywhere after the YAML header. Let’s look at a few examples of specifying the <span class="No-Break">report style:</span></p>&#13;
			<ol>&#13;
				<li>Change the color<a id="_idIndexMarker588"/> of the text in the main body to red and the background color to <strong class="source-inline">#F5F5F5</strong>, the hex code that corresponds <span class="No-Break">to gray:</span><pre class="source-code">&#13;
# Customizing report style&#13;
&lt;style&gt;&#13;
body {&#13;
  color: blue;&#13;
  background-color: #F5F5F5;&#13;
}&#13;
&lt;/style&gt;</pre><p class="list-inset">Here, we directly use the word <strong class="source-inline">blue</strong> to set the color attribute of the text in the body and the hex code to set its background color; these two approaches are equivalent. Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.34</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer131" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_034.jpg" alt="Figure 6.34 – Changing the color of the text in the body of the report" width="1653" height="697"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.34 – Changing the color of the text in the body of the report</p>&#13;
			<ol>&#13;
				<li value="2">Change the color of the code in the code chunks to red by specifying <strong class="source-inline">color: red</strong> in the <span class="No-Break"><strong class="source-inline">pre</strong></span><span class="No-Break"> attribute:</span><pre class="source-code">&#13;
# Customizing report style&#13;
&lt;style&gt;&#13;
body {&#13;
  color: blue;&#13;
  background-color: #F5F5F5;&#13;
}&#13;
pre {&#13;
  color: red;&#13;
}&#13;
&lt;/style&gt;</pre><p class="list-inset">Knitting the <a id="_idIndexMarker589"/>document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.35</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer132" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_035.jpg" alt="Figure 6.35 – Changing the color of the code in the report" width="1656" height="682"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.35 – Changing the color of the code in the report</p>&#13;
			<ol>&#13;
				<li value="3">For the table of contents, change the color of the text and border to <strong class="source-inline">green</strong>, and set the font size <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">16px</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
# Customizing report style&#13;
&lt;style&gt;&#13;
body {&#13;
  color: blue;&#13;
  background-color: #F5F5F5;&#13;
}&#13;
pre {&#13;
  color: red;&#13;
}&#13;
#TOC {&#13;
  color: green;&#13;
  font-size: 16px;&#13;
  border-color: green;&#13;
}&#13;
&lt;/style&gt;</pre><p class="list-inset">Note that the<a id="_idIndexMarker590"/> style for the table of contents is specified using <strong class="source-inline">#TOC</strong> without any space in between. Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.36</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer133" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_036.jpg" alt="Figure 6.36 – Changing the color and font size of the table of contents in the report" width="1598" height="652"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.36 – Changing the color and font size of the table of contents in the report</p>&#13;
			<ol>&#13;
				<li value="4">For the header, change <a id="_idIndexMarker591"/>the color to <strong class="source-inline">orange</strong>, the opacity to <strong class="source-inline">0.9</strong>, and the font size <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">20px</strong></span><span class="No-Break">:</span><pre class="source-code">&#13;
# Customizing report style&#13;
&lt;style&gt;&#13;
body {&#13;
  color: blue;&#13;
  background-color: #F5F5F5;&#13;
}&#13;
pre {&#13;
  color: red;&#13;
}&#13;
#TOC {&#13;
  color: green;&#13;
  font-size: 16px;&#13;
  border-color: green;&#13;
}&#13;
#header {&#13;
  color: orange;&#13;
  opacity: 0.8;&#13;
  font-size: 20px;&#13;
}&#13;
&lt;/style&gt;</pre><p class="list-inset">Note that the style for the header is specified using <strong class="source-inline">#header</strong> without <a id="_idIndexMarker592"/>any space in between. Knitting the document with these commands produces <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.37</em></span><span class="No-Break">:</span></p></li>			</ol>&#13;
			<div>&#13;
				<div id="_idContainer134" class="IMG---Figure">&#13;
					<img src="Images/B18680_06_037.jpg" alt="Figure 6.37 – Changing the color, font size, and opacity of the header in the report" width="957" height="390"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.37 – Changing the color, font size, and opacity of the header in the report</p>&#13;
			<p>That concludes this exercise. Now, let’s wrap up <span class="No-Break">this chapter.</span></p>&#13;
			<h1 id="_idParaDest-126"><a id="_idTextAnchor129"/>Summary</h1>&#13;
			<p>In this chapter, we introduced R Markdown, a flexible, transparent, and consistent report-generation tool. We started by going over the fundamentals of R Markdown, including the basic building blocks such as YAML headers and code chunks, followed by text <span class="No-Break">formatting techniques.</span></p>&#13;
			<p>Next, we covered a case study using Google’s stock data. After downloading the stock data from the web, we generated a report to summarize the statistics of the daily closing price, added plots and tables to the report, performed data processing, and displayed the results with different styling options. We also explored a few different ways to configure a <span class="No-Break">code chunk.</span></p>&#13;
			<p>Lastly, we discussed how to customize the R Markdown reports. The topics we covered included adding a table of contents to the report, creating repetitive reports using parameters in the YAML header, and changing the visual style of the report by editing the visual properties of different components <span class="No-Break">using CSS.</span></p>&#13;
			<p>With the next chapter, we will begin <em class="italic">Part 2</em> of this book and introduce the fundamentals of linear algebra and calculus <span class="No-Break">using R.</span></p>&#13;
		</div>&#13;
	</div></body></html>