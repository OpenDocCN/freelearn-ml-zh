<html><head></head><body><div class="chapter" title="Chapter&#xA0;12.&#xA0;Case Study - Exploring World Bank Data"><div class="titlepage"><div><div><h1 class="title"><a id="ch12"/>Chapter 12. Case Study - Exploring World Bank Data</h1></div></div></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch12lvl1sec54"/>Introduction</h1></div></div></div><p>
<span class="strong"><strong>World Bank Indicators</strong></span> (<span class="strong"><strong>WDI</strong></span>) is the World Bank's compilation of internationally comparable and measurable statistics about the growth of global development and its impact on the quality of people's lives measuring the state of development in countries, regions and income groups by looking into data collected from over 200 economies and more than 50 partner organizations to present more than 1400 indicators. On September 25, 2015, the United Nations General Assembly formally adopted the 2030 agenda for sustainable development, to guide global action over the next 15 years. The five main focus themes of SDG's are people, planet, prosperity, peace, and partnership. Countries have resolved to end poverty and hunger and ensure that all people can fulfill their potential in dignity and equality and in a healthy environment; to protect the planet from degradation and take urgent action on climate change; to ensure that all people can enjoy prosperous and fulfilling lives and that progress takes place in harmony with nature; to foster peaceful, just, and inclusive societies free from fear and violence; and to mobilize the means to implement agenda 2030, focused on the poorest and most vulnerable, through strong global partnership. A World Bank group perspective, for each of the 17 goals, experts from the World Bank's Development Data Group, global practices and cross-cutting solution areas have selected indicators to identify and analyze important trends and challenges, and to elicit discussion on measurement issues. World Development Indicators is the result of a collaboration of numerous international agencies, over 200 national statistical offices and many others.</p></div></div>
<div class="section" title="Exploring World Bank data"><div class="titlepage"><div><div><h1 class="title"><a id="ch12lvl1sec55"/>Exploring World Bank data</h1></div></div></div><p>In 2012, 13 percent of the world's population lived below the international poverty line of $1.90 a day, down from 37 percent in 1990. Declines in all regions contributed to the early success of meeting the Millennium Development Goal target of halving extreme poverty globally. The aim is to eliminate poverty in all forms by 2030 and to achieve social protection for poor, increase access to basic services, and to support people harmed by conflict and climate-related disaster.</p><p>More than half the deaths recorded in low income countries is due to communicable diseases or maternal, prenatal, or nutrition conditions. While, in the middle and high-income countries more than two-thirds of the recorded deaths are due to non communicable diseases. Energy use increased about 54 percent between 1990 and 2013 worldwide. Access to energy is fundamental to development, but as economies evolve, rising incomes and growing populations demand more energy. Energy, especially electricity, is crucial to improving the standard of living for people in low and middle income countries.</p><div class="section" title="Getting ready..."><div class="titlepage"><div><div><h2 class="title"><a id="ch12lvl2sec68"/>Getting ready...</h2></div></div></div><p>In order to carry out the pricing of reinsurance contracts we shall be using a dataset collected from the Hurricane dataset.</p><p>In order to carry out the data pattern analysis of the World Bank we shall be using a dataset collected from the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Total world population (1960-2015)</li><li class="listitem" style="list-style-type: disc">Life expectancy at birth for all the countries and regions (1960-2014)</li><li class="listitem" style="list-style-type: disc">Fertility rate (births per woman) for all the countries and regions (1960-2014)</li><li class="listitem" style="list-style-type: disc">GDP as measured in US$ for all the countries and regions (1960-2015)</li><li class="listitem" style="list-style-type: disc">Poverty head count ratio for all the countries and regions (1960-2016)</li><li class="listitem" style="list-style-type: disc">Access to sanitation for all the countries and regions (1960-2016)</li><li class="listitem" style="list-style-type: disc">Percentage of population with access to electricity for all countries and regions (1960-2016)</li><li class="listitem" style="list-style-type: disc">CO<sub>2</sub> emissions for all countries and regions (1960-2016)</li></ul></div><div class="section" title="Step 1 - collecting and describing data"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl3sec165"/>Step 1 - collecting and describing data</h3></div></div></div><p>The World Bank's dataset for the analysis is available from the World Bank data bank and can be downloaded freely.</p></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch12lvl2sec69"/>How to do it...</h2></div></div></div><p>Let's get into the details.</p><div class="section" title="Step 2 - downloading the data"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl3sec166"/>Step 2 - downloading the data</h3></div></div></div><p>Load the following packages:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; install.packages("wbstats")</strong></span>
<span class="strong"><strong>    &gt; install.packages("data.table")</strong></span>
<span class="strong"><strong>    &gt; install.packages("googleVis")</strong></span>
</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note30"/>Note</h3><p>Version info: Code for this page was tested in R version 3.3.0 (2016-05-03)</p></div></div><p>Each of the following libraries needs to be installed:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; library(wbstats)</strong></span>
<span class="strong"><strong>    &gt; library(data.table)</strong></span>
<span class="strong"><strong>    &gt; library(googleVis)</strong></span>
</pre><p>Let's download the data and understand the relationships among the variables. We will begin by downloading data from the World Bank website. <code class="literal">data.table()</code> as a function allows fast aggregation of large datasets, ordering joins, adding/modifying/deleting of columns by group using no copies, listing of columns, a friendly file reader, and a parallel file writer. The <code class="literal">wb()</code> function uses the World Bank API to download the requested information. indicator represents the character vector of indicator codes.</p><p>The indicator codes are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">SP.POP.TOTL</code>: Total world population (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">SP.DYN.LE00.IN</code>: Life expectancy at birth for all the countries and regions (1960-2014)</li><li class="listitem" style="list-style-type: disc"><code class="literal">SP.DYN.TFRT.IN</code>: Fertility rate (births per woman) for all the countries and regions (1960-2014)</li></ul></div><p>The result is stored in the <code class="literal">Pop_LifeExp_FertRt</code> data frame. Use the following command:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_LifeExp_FertRt &lt;- data.table(wb(indicator = c("SP.POP.TOTL", "SP.DYN.LE00.IN", "SP.DYN.TFRT.IN"), startdate = 1960, enddate = 2016))</strong></span>
</pre><p>The indicator codes are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">SP.POP.TOTL</code>: Total world population (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">NY.GDP.MKTP.CD-GDP</code>: GDP as measured in US$ for all the countries and regions (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">SI.POV.2DAY</code>: Poverty head count ratio for all the countries and regions (1960-2016)</li></ul></div><p>The result is stored in the <code class="literal">Pop_GDPUSD_HeadCnt</code> data frame. Use the following command:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_GDPUSD_HeadCnt &lt;- data.table(wb(indicator = c("SP.POP.TOTL", "NY.GDP.MKTP.CD", "SI.POV.2DAY"), startdate = 1960, enddate = 2016))</strong></span>
</pre><p>The indicator codes are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">SP.POP.TOTL</code>: Total world population (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">NY.GDP.MKTP.CD</code>: GDP as measured in US$ for all the countries and regions (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">SH.STA.ACSN</code>: Access to sanitation for all the countries and regions (1960-2016)</li></ul></div><p>The result is stored in the <code class="literal">Pop_GDPUSD_Sanitation</code> data frame. Use the following command:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_GDPUSD_Sanitation &lt;- data.table(wb(indicator = c("SP.POP.TOTL", "NY.GDP.MKTP.CD", "SH.STA.ACSN"), startdate = 1960, enddate = 2016))</strong></span>
</pre><p>The indicator codes are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">NY.GDP.MKTP.CD</code>: GDP as measured in US$ for all the countries and regions (1960-2015)</li><li class="listitem" style="list-style-type: disc"><code class="literal">EG.ELC.ACCS.ZS</code>: Percentage of population with access to electricity for all countries and regions (1960-2016)</li><li class="listitem" style="list-style-type: disc"><code class="literal">EN.ATM.CO2E.KT</code>: Electricity consumption KWh per capita for all countries and regions (1960-2016)</li></ul></div><p>The result is stored in the <code class="literal">GDPUSD_Electricity_CO2</code> data frame. Use the following command:</p><pre class="programlisting">
<span class="strong"><strong>&gt; GDPUSD_Electricity_CO2 &lt;- data.table(wb(indicator = c("NY.GDP.MKTP.CD", "EG.ELC.ACCS.ZS", "EN.ATM.CO2E.KT"), startdate = 1960, enddate = 2016))</strong></span>
</pre></div><div class="section" title="Step 3 - exploring data"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl3sec167"/>Step 3 - exploring data</h3></div></div></div><p>Exploring the dimension of the <code class="literal">Pop_LifeExp_FertRt</code> data frame: The <code class="literal">dim()</code> function returns the dimension of the <code class="literal">Pop_LifeExp_FertRt</code> data frame. The <code class="literal">Pop_LifeExp_FertRt</code> data frame is passed as an input parameter. The result clearly states that there are 41150 rows of data and six columns:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(Pop_LifeExp_FertRt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_001.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">Pop_LifeExp_FertRt</code> data frame: The result clearly states that there are 27023 rows of data and six columns:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(Pop_GDPUSD_HeadCnt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_002.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">Pop_GDPUSD_Sanitation</code> data frame: The result clearly states that there are 31884 rows of data and six columns:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(Pop_GDPUSD_Sanitation)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_003.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">GDPUSD_Electricity_CO2</code> data frame: The result clearly states that there are 23994 rows of data and six columns:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(GDPUSD_Electricity_CO2)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_004.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the internal structure of the <code class="literal">Pop_LifeExp_FertRt</code> data frame: The <code class="literal">str()</code> function displays the internal structure of the data frame. The <code class="literal">Pop_LifeExp_FertRt</code> is passed as an R object to the <code class="literal">str()</code> function:</p><pre class="programlisting">
<span class="strong"><strong>&gt; str(Pop_LifeExp_FertRt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_005.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the internal structure of the <code class="literal">Pop_GDPUSD_HeadCnt</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; str(Pop_GDPUSD_HeadCnt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_006.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Explore the internal structure of the <code class="literal">Pop_GDPUSD_Sanitation</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; str(Pop_GDPUSD_Sanitation)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_007.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the internal structure of the <code class="literal">GDPUSD_Electricity_CO2</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; str(GDPUSD_Electricity_CO2)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_008.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the internal structure of the <code class="literal">GDPUSD_Electricity_CO2</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; str(GDPUSD_Electricity_CO2)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_009.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Printing the <code class="literal">Pop_LifeExp_FertRt</code> data frame: The <code class="literal">head()</code> function returns the first part of the <code class="literal">Pop_LifeExp_FertRt</code> data frame. The <code class="literal">Pop_LifeExp_FertRt</code> data frame is passed as an input parameter:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(Pop_LifeExp_FertRt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_010.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Printing the <code class="literal">Pop_GDPUSD_HeadCnt</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(Pop_GDPUSD_HeadCnt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_011.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Printing the <code class="literal">Pop_GDPUSD_Sanitation</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(Pop_GDPUSD_Sanitation)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_012.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Printing the <code class="literal">GDPUSD_Electricity_CO2</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(GDPUSD_Electricity_CO2)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_013.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">SP.POP.TOTL</code> data frame: The <code class="literal">dim()</code> function returns the dimension of the <code class="literal">SP.POP.TOTL</code> data frame. The <code class="literal">SP.POP.TOTL</code> data frame is passed as an input parameter. The result clearly states that there are 14623 rows of data and six columns:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = "SP.POP.TOTL"))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_014.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">SP.DYN.LE00.IN</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = "SP.DYN.LE00.IN"))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_015.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">SP.DYN.TFRT.IN</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = " SP.DYN.TFRT.IN "))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_016.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">NY.GDP.MKTP.CD</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = " NY.GDP.MKTP.CD"))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_017.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">SI.POV.2DAY</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = " SI.POV.2DAY "))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_018.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">SH.STA.ACSN</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = " SH.STA.ACSN "))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_019.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">EG.ELC.ACCS.ZS</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = "EG.ELC.ACCS.ZS"))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_020.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Exploring the dimension of the <code class="literal">EN.ATM.CO2E.KT</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; dim(wb(indicator = "EN.ATM.CO2E.KT"))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_021.jpg" alt="Step 3 - exploring data"/></div><p>
</p><p>Downloading the updated country and region information from the World Bank API using <code class="literal">wbcountries()</code> as a function:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Countries &lt;- data.table(wbcountries())</strong></span>
</pre><p>Printing the <code class="literal">Countries</code> data frame: The <code class="literal">head()</code> function returns the first part of the <code class="literal">Countries</code> data frame:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(Countries)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_022.jpg" alt="Step 3 - exploring data"/></div><p>
</p></div><div class="section" title="Step 4 - building the models"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl3sec168"/>Step 4 - building the models</h3></div></div></div><p>Sorting the <code class="literal">Pop_LifeExp_FertRt</code> data table: The <code class="literal">setkey()</code> function sorts a <code class="literal">Pop_LifeExp_FertRt</code> data table and marks it as sorted. The sorted columns are the key. The key is in column <code class="literal">iso2c</code>; the column <code class="literal">iso2c</code> is always sorted in ascending order. The table is changed by reference and is therefore very memory efficient:</p><pre class="programlisting">
<span class="strong"><strong>&gt; setkey(Pop_LifeExp_FertRt, iso2c)</strong></span>
</pre><p>Sorting the <code class="literal">Pop_GDPUSD_HeadCnt</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; setkey(Pop_GDPUSD_HeadCnt, iso2c)</strong></span>
</pre><p>Sorting the <code class="literal">Pop_GDPUSD_Sanitation</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; setkey(Pop_GDPUSD_Sanitation, iso2c)</strong></span>
</pre><p>Sorting the <code class="literal">GDPUSD_Electricity_CO2</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; setkey(GDPUSD_Electricity_CO2, iso2c)</strong></span>
</pre><p>Sorting the <code class="literal">Countries</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; setkey(Countries, iso2c)</strong></span>
</pre><p>Printing the <code class="literal">Countries</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(setkey(Countries, iso2c))</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_023.jpg" alt="Step 4 - building the models"/></div><p>
</p><p>Removing aggregates from the <code class="literal">Pop_LifeExp_FertRt</code> dataset while adding regions to the dataset:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_LifeExp_FertRt &lt;- Countries[Pop_LifeExp_FertRt][ ! region %in% "Aggregates"]</strong></span>
</pre><p>Printing the <code class="literal">Pop_LifeExp_FertRt</code> data table:</p><pre class="programlisting">
<span class="strong"><strong>&gt; head(Pop_LifeExp_FertRt)</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_024.jpg" alt="Step 4 - building the models"/></div><p>
</p><p>Removing aggregates from the <code class="literal">Pop_GDPUSD_HeadCnt</code> dataset while adding regions to the dataset:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_GDPUSD_HeadCnt &lt;- Countries[Pop_GDPUSD_HeadCnt][ ! region %in% "Aggregates"]</strong></span>
</pre><p>Removing aggregates from the <code class="literal">Pop_GDPUSD_Sanitation</code> dataset while adding regions to the dataset:</p><pre class="programlisting">
<span class="strong"><strong>&gt; Pop_GDPUSD_Sanitation &lt;- Countries[Pop_GDPUSD_Sanitation][ ! region %in% "Aggregates"]</strong></span>
</pre><p>Removing aggregates from the <code class="literal">GDPUSD_Electricity_CO2</code> dataset while adding regions to the dataset:</p><pre class="programlisting">
<span class="strong"><strong>&gt; GDPUSD_Electricity_CO2 &lt;- Countries[GDPUSD_Electricity_CO2][ ! region %in% "Aggregates"]</strong></span>
</pre><pre class="programlisting">
<span class="strong"><strong>    &gt; wPop_LifeExp_FertRt &lt;- reshape(Pop_LifeExp_FertRt[, list(country, region, date, value, indicator)], v.names = "value", idvar=c("date", "country", "region"), timevar="indicator", direction = "wide")</strong></span>
<span class="strong"><strong>    &gt; wPop_GDPUSD_HeadCnt &lt;- reshape(Pop_GDPUSD_HeadCnt[, list(country, region, date, value, indicator)], v.names = "value", idvar=c("date", "country", "region"), timevar="indicator", direction = "wide")</strong></span>
<span class="strong"><strong>    &gt; wPop_GDPUSD_Sanitation &lt;- reshape(Pop_GDPUSD_Sanitation[, list(country, region, date, value, indicator)], v.names = "value", idvar=c("date", "country", "region"), timevar="indicator", direction = "wide")</strong></span>
<span class="strong"><strong>    &gt; wGDPUSD_Electricity_CO2 &lt;- reshape(GDPUSD_Electricity_CO2[, list(country, region, date, value, indicator)], v.names = "value", idvar=c("date", "country", "region"), timevar="indicator", direction = "wide")</strong></span>
</pre><p>Printing the contents of the data frame <code class="literal">wPop_LifeExp_FertRt</code>:</p><pre class="programlisting">
<span class="strong"><strong>&gt; wPop_LifeExp_FertRt</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_025.jpg" alt="Step 4 - building the models"/></div><p>
</p><p>Printing the contents of the data frame <code class="literal">wGDPUSD_Electricity_CO2</code>:</p><pre class="programlisting">
<span class="strong"><strong>&gt; wGDPUSD_Electricity_CO2</strong></span>
</pre><p>The result is as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_026.jpg" alt="Step 4 - building the models"/></div><p>
</p><p>Converting the <code class="literal">wPop_LifeExp_FertRt</code>, <code class="literal">wPop_GDPUSD_HeadCnt</code>, <code class="literal">wPop_GDPUSD_Sanitation</code>, and <code class="literal">wGDPUSD_Electricity_CO2</code> datasets from character format to integer format:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; wPop_LifeExp_FertRt[, date := as.integer(date)]</strong></span>
<span class="strong"><strong>    &gt; wPop_GDPUSD_HeadCnt[, date := as.integer(date)]</strong></span>
<span class="strong"><strong>    &gt; wPop_GDPUSD_Sanitation[, date := as.integer(date)]</strong></span>
<span class="strong"><strong>    &gt; wGDPUSD_Electricity_CO2[, date := as.integer(date)]</strong></span>
</pre><p>Setting names: The <code class="literal">setnames()</code> function sets the names of the <code class="literal">wPop_LifeExp_FertRt</code>, <code class="literal">wPop_GDPUSD_HeadCnt</code>, <code class="literal">wPop_GDPUSD_Sanitation</code>, and <code class="literal">wGDPUSD_Electricity_CO2</code> objects:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; setnames(wPop_LifeExp_FertRt, names(wPop_LifeExp_FertRt), c("Country", "Region", "Year", "Population", "Fertility", "LifeExpectancy"))</strong></span>
<span class="strong"><strong>    &gt; setnames(wPop_GDPUSD_HeadCnt, names(wPop_GDPUSD_HeadCnt), c("Country", "Region", "Year", "Population", "GDPUSD", "PovertyHead"))</strong></span>
<span class="strong"><strong>    &gt; setnames(wPop_GDPUSD_Sanitation, names(wPop_GDPUSD_Sanitation), c("Country", "Region", "Year", "Population", "GDPUSD", "SanitationAccess"))</strong></span>
<span class="strong"><strong>    &gt; setnames(wGDPUSD_Electricity_CO2, names(wGDPUSD_Electricity_CO2), c("Country", "Region", "Year", "GDPUSD", "ElectricityConsumption", "CO2Emissions"))</strong></span>
</pre></div><div class="section" title="Step 5 - plotting the models"><div class="titlepage"><div><div><h3 class="title"><a id="ch12lvl3sec169"/>Step 5 - plotting the models</h3></div></div></div><p>Plotting the <code class="literal">wPop_LifeExp_FertRt</code> data frame models  with the following steps. The <code class="literal">gvisMotionChart()</code> function reads the <code class="literal">wPop_LifeExp_FertRt</code> data frame. It uses the Google Visualization API to create text output which is included in a web page. The chart is rendered by the web browser in Flash. A motion chart which is dynamic in nature explores indicators. <code class="literal">wPop_LifeExp_FertRt</code> is the data frame. <code class="literal">idvar = "Country"</code> represents the column name of data which is to be analyzed. <code class="literal">timevar = "Year"</code> is the column name of data which represents the time dimension. <code class="literal">xvar = "LifeExpectancy"</code> is the numerical vector of the data to be plotted on the <span class="emphasis"><em>x</em></span> axis. <code class="literal">yvar = "Fertility"</code> is the numerical vector of the data to be plotted on the y axis. <code class="literal">sizevar = "Population"</code> represents the values of the column which are to be mapped to actual pixel values. <code class="literal">colorvar = "Region"</code> identifies the bubbles. Use the following commands:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; pltPop_LifeExp_FertRt &lt;- gvisMotionChart(wPop_LifeExp_FertRt, idvar = "Country", timevar = "Year", xvar = "LifeExpectancy", yvar = "Fertility", sizevar = "Population", colorvar = "Region")</strong></span>
<span class="strong"><strong>    &gt; plot(pltPop_LifeExp_FertRt)</strong></span>
</pre><p>Plotting the <code class="literal">wPop_GDPUSD_HeadCnt</code> data frame models:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; pltPop_GDPUSD_HeadCnt &lt;- gvisMotionChart(wPop_GDPUSD_HeadCnt, idvar = "Country", timevar = "Year", xvar = "GDPUSD", yvar = "PovertyHead", sizevar = "Population", colorvar = "Region")</strong></span>
<span class="strong"><strong>    &gt; plot(pltPop_GDPUSD_HeadCnt)</strong></span>
</pre><p>Plotting the <code class="literal">wPop_GDPUSD_Sanitation</code> data frame models:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; pltPop_GDPUSD_Sanitation &lt;- gvisMotionChart(wPop_GDPUSD_Sanitation, idvar = "Country", timevar = "Year", xvar = "GDPUSD", yvar = "SanitationAccess", sizevar = "Population", colorvar = "Region")</strong></span>
<span class="strong"><strong>    &gt; plot(pltPop_GDPUSD_Sanitation)</strong></span>
</pre><p>Plotting the <code class="literal">pltGDPUSD_Electricity_CO2</code> data frame models:</p><pre class="programlisting">
<span class="strong"><strong>    &gt; pltGDPUSD_Electricity_CO2 &lt;- gvisMotionChart(wGDPUSD_Electricity_CO2, idvar = "Country", timevar = "Year", xvar = "GDPUSD", yvar = "ElectricityAccess", sizevar = "CO2Emissions", colorvar = "Region")</strong></span>
<span class="strong"><strong>    &gt; plot(pltGDPUSD_Electricity_CO2)</strong></span>
</pre><p>The results are as follows, Fertility vs life expectancy:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_027.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Population growth:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_028.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Growth of GDP as measured in US$:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_029.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Poverty head count ratio vs population growth:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_030.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Growth in access of population to sanitation:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_031.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Sanitation access:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_032.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Improvement in sanitation access vs population growth:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_033.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>Population with access to electricity for all countries and regions:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_034.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>CO<sub>2</sub> emissions (log scale):</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_035.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>CO<sub>2</sub> emission vs electricity consumption:</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_036.jpg" alt="Step 5 - plotting the models"/></div><p>
</p><p>
</p><div class="mediaobject"><img src="graphics/image_12_037.jpg" alt="Step 5 - plotting the models"/></div><p>
</p></div></div></div></body></html>