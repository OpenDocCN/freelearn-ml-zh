<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">ReflectInsight â€“ Real-Time Monitoring</h1>
                </header>
            
            <article>
                
<p>Every developer needs to have a good logging tool. Unfortunately, what I see happening a lot is developers keeping up with the latest and greatest of everything, but not logging. In a way this is good, the best logging framework is the one you don't even know is working. However, if you have not used <strong>ReflectInsight</strong> from <strong>ReflectSoftware</strong> before, you are going to love this chapter. It is so incredibly important to have the right logging tool, especially in machine learning, and nothing comes close to the rich, robust logging provided by this tool!</p>
<p> You absolutely need to know what's going on inside your algorithm, and ReflectSoftware has the richest logging capabilities around. Especially when it comes to machine learning algorithms, there is nothing that remotely comes close. And when you move into deep learning, you are going to be very happy you can see what is going on under the covers.</p>
<p>With an algorithm running for possibly days, the insights you receive from the right kind of logging are invaluable:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/cc573a49-f429-4cdd-9a25-af4843fb4fd8.png"/></div>
<p>ReflectInsight is comprised of a <strong>Software Development Kit</strong> (<strong>SDK</strong>), a router, a Log Viewer, and a Live Viewer. We'll take up each one separately and discuss them in detail.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Router</li>
<li>Log Viewer</li>
<li>Live Viewer
<ul>
<li>Message navigation</li>
<li>Searching through your messages</li>
<li>Time zone formatting</li>
<li>Auto Save/Purge</li>
<li>SDK</li>
<li>Configuration editor</li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Router</h1>
                </header>
            
            <article>
                
<p>The router is the central part of the logging system. All log messages are sent to the router, which can distribute the messages from there to listeners, such as viewers, text files, binary files, event logs, databases, and more. You would typically have the router installed on a separate machine from the rest of your logging system, but you do not have to. Once installed and configured (the configuration out of the box is usually suitable for most situations), the router runs as a Windows service and has no user interface, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/540171a8-236d-4940-af41-c4c4c65bd7b4.png" style=""/></div>
<div>Next we'll talk about the Log and Live Viewers.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Log Viewer</h1>
                </header>
            
            <article>
                
<p>The Log Viewer is designed to view historical log files that have been saved either manually or from the router/viewer configuration. If you are streaming a high number of messages through the system, you will no doubt collect a lot of log files; they may need to be viewed. I wrote an enterprise-grade microservice system for a client that used ReflectInsight at the center of its system and streamed messages to and through a <strong>RabbitMQ</strong> system.</p>
<p>On average, we streamed roughly 1 million messages a day (it is still used in production); when problems arose, the Log Viewer's historical logging capabilities were invaluable.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Live Viewer</h1>
                </header>
            
            <article>
                
<p>The Live Viewer is what you will use most of the time to view your real-time logging. The capabilities of the Live Viewer are extensive to say the least. Briefly, the high-performance logging allows us to monitor instrumented applications in real time by displaying log messages in the Live Viewer. We can log incredibly rich details, such as exceptions, objects, datasets, images, process and thread information, and well-formatted XML. We can also quickly and easily navigate and trace through our applications to find the information we need. The <span class="packt_screen">Message</span> <span class="packt_screen">Details</span> panel displays the extended details of the selected message. The details could be as simple as the message itself, or complex data such as an object, dataset, binary blob, image, process and thread information, and the contents of a collection. Syntax highlighting is available for select message types such as SQL, XML, and HTML-related messages, as well as full Unicode support, which aids in the viewing of these types of messages.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Message navigation</h1>
                </header>
            
            <article>
                
<p>ReflectInsight supports many ways of navigating through your logged messages.</p>
<p>You can navigate using one of the following methods:</p>
<ul>
<li>Find a matching <span class="packt_screen">Enter</span>/<span class="packt_screen">Exit</span> method block</li>
<li>Jump to a parent <span class="packt_screen">Enter</span>/<span class="packt_screen">Exit</span> method block</li>
<li>Jump from any message in a <span class="packt_screen">User Defined</span> view to the <span class="packt_screen">All Messages</span> view</li>
<li>Go to a message by <span class="packt_screen">Line Number</span></li>
<li><span class="packt_screen">Advanced Search</span></li>
<li><span class="packt_screen">Quick Search</span> (active view only)</li>
<li><span class="packt_screen">Message Type</span> browse navigator</li>
<li><span class="packt_screen">Bookmarks</span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Message properties</h1>
                </header>
            
            <article>
                
<p>This panel allows us to further inspect a selected message. We can view various <span class="packt_screen">Date Time</span> values, the <span class="packt_screen">Time Zone</span>, <span class="packt_screen">Process Id</span>, <span class="packt_screen">Thread Id</span>, <span class="packt_screen">Request Id</span>, <span class="packt_screen">Category</span>, <span class="packt_screen">Machine Name</span>, and so on. We can also extend the message <span class="packt_screen">Properties</span> panel by attaching user-defined properties to single or multiple messages during logging:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c168ac48-4218-435f-99f8-f78695f18066.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Watches</h1>
                </header>
            
            <article>
                
<p>Available only in the Live Viewer, the <span class="packt_screen">Watches</span> panel allows us to display non-persistent information for quick and dirty data change. We can write directly to the <span class="packt_screen">Watches</span> or, if using the ReflectInsight <strong>PostSharp AOP</strong> extension, we can easily decorate an object property with a predefined custom attribute.</p>
<p>This attribute forces ReflectInsight to display the value of the property whenever its value changes:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c0d9f98e-e9e4-43d6-8e2f-5dae14b77d0b.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Bookmarks</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Bookmarks</span> panel allows us to view bookmarks for the current logging session:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fad43f8c-6956-436c-ae0e-c1c095f19158.png" style=""/></div>
<p class="mce-root CDPAlignLeft CDPAlign"><span>It can be persisted with our log file for later retrieval. We can filter bookmarks for the active view or a given view, or see all bookmarks across</span> <span class="packt_screen">All Views</span><span>. We can also navigate to any bookmark and immediately activate the view to select where the bookmarked message is located:</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Call Stack</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Call Stack</span> panel displays the <span class="packt_screen">Call Stack</span> level of the current selected message. <span class="packt_screen">Call Stack</span> entries are generated using the <span class="packt_screen">Enter</span>/<span class="packt_screen">Exit</span> methods, or if the message was contained within the <kbd>TraceMethod</kbd> using block.</p>
<p>We can easily navigate the <span class="packt_screen">Call Stack</span> by double-clicking on a <span class="packt_screen">Call Stack</span> entry, taking us to the top of the <span class="packt_screen">Enter</span>/<span class="packt_screen">Exit</span> message block within the active message log panel:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5eae42c7-0b4e-44c7-9c8a-bc53c5a8f513.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Searching through your messages</h1>
                </header>
            
            <article>
                
<p>The Live Viewer provides two ways to search messages by criteria, as shown in the following screenshot. They are <span class="packt_screen">Quick Search</span> and <span class="packt_screen">Advanced Search</span>:</p>
<div class="packt_infobox"><strong>Quick Search</strong> <span>is m</span>ainly used for simple, quick, text-based searching.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Advanced Search</h1>
                </header>
            
            <article>
                
<p>This is primarily used to search messages where a more complex search criterion is needed. The search criteria can include a combination of the following:</p>
<ul>
<li><span class="packt_screen">Message Content</span></li>
<li><span class="packt_screen">Message Type</span></li>
<li><span class="packt_screen">Content AND <span>Message </span>Type</span></li>
<li><span class="packt_screen">Content OR <span>Message </span>Type</span></li>
<li>In addition to a <span class="packt_screen">Regular Expression</span></li>
</ul>
<p>The <span class="packt_screen">Advanced Search</span> view provides the ability to either navigate to the search result or bookmark it:</p>
<div class="CDPAlignCenter CDPAlign"><img class="" src="assets/9b7324e9-24bf-44fd-9b6b-e47b992b3786.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Time zone formatting</h1>
                </header>
            
            <article>
                
<p>We can display our time details in either <span class="packt_screen">Standard</span> or <span class="packt_screen">Military</span> time formats. Select the <span class="packt_screen">Time Zone Type</span> that best suits your location, such as <span class="packt_screen">Source</span>, <span class="packt_screen">Local</span>, <span class="packt_screen">UTC</span>, or <span class="packt_screen">Custom</span> (choosing from one of the available system time zones).</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/be6933e7-e724-41b2-9d65-a5258373805a.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Auto Save/Purge</h1>
                </header>
            
            <article>
                
<p>Apart from the library's ability to <span class="packt_screen">Auto Save</span> rolling log files, the Live Viewer has similar capabilities in addition to <span class="packt_screen">Auto Purge</span> the top portion of a rolling log file. You can configure the Live Viewer to either <span class="packt_screen">Auto Save</span> or <span class="packt_screen">Auto Purge</span> by applying one of the following methods:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/dfe7af23-ee0f-4f33-96a4-8032466e2135.png" style=""/></div>
<ul>
<li>Auto Save -This method forces the Live Viewer to save the files once a specific criterion has been met (that is, on a new day and/or message limit).</li>
<li>Auto Purge -This method forces the Live Viewer to purge the top portion of the logged messages, based on predefined size percentages of the current log file.</li>
</ul>
<p>It is sufficient to say that if we look at the following screenshot, we can see the amount of information that may be gathered from our algorithms and applications; it's huge:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/80faab8c-4cab-4a79-a05e-84853e12b424.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Example</h1>
                </header>
            
            <article>
                
<p>We've mentioned just how valuable a tool such as this can be when it comes to machine learning, so it's only fair that we show you exactly what we mean. Up next is a screenshot of an actual machine learning algorithm outputting data to the Live Viewer. Without this information in real time, we would be lost with respect to the efficacy and performance of our application!</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d4bfc724-4901-4e4e-a8b5-b9bdac3900d5.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">ReflectInsight Utilities: </h1>
                </header>
            
            <article>
                
<p><span class="packt_screen">Message Statistics</span> can be viewed and adjusted to meet your criteria with this incredibly valuable tool. You can search for various types of messages, by names, categories, users and more. From there you can see the composition of such messages.</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/55f4be94-f881-4519-989e-597c384f3dbc.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Watches</h1>
                </header>
            
            <article>
                
<p>Watches observe parameters and variables in real-time as shown below. You define your own watches programatically and periodically update their values and/or parameters.</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2801e7ff-f9d2-4c4c-97b2-1255c488cfc8.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Software Development Kit</h1>
                </header>
            
            <article>
                
<p>The SDK is what allows us to connect ReflectInsight to our applications. We will see as we get further along just how easy it is to do this. The beautiful thing about how this SDK works compared to others is the rich image set assigned to each message. When you have thousands of messages streaming per second, colors and images can be a huge help in focusing your attention on just what you need to see.</p>
<p>The following is a screenshot that shows exactly what I mean. As an example, if we use the <span class="packt_screen">SendException</span> message, then the red <em>X</em> will be displayed in the icon panel along the far left-hand side of the Live Viewer/Log Viewer. The same applies for all the other messages you see in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5a4f32d3-060b-4c44-871c-9ae0d0c7a5ee.png" style=""/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuration editor</h1>
                </header>
            
            <article>
                
<p>The configuration editor is a visual interface into the ability to make configuration parameter changes for the application. This makes it simpler and more intuitive compared to changing text file parameters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Overview</h1>
                </header>
            
            <article>
                
<p>We can use the XML-based configuration file with our applications to make the ReflectInsight viewer behave the way we want it to. There are a few configuration categories available, from autosave and filtering, to message coloring and many more.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">XML configuration</h1>
                </header>
            
            <article>
                
<p>ReflectInsight is configured using an XML configuration file. The configuration information can be embedded within other XML configuration files, such as the application or <kbd>web.config</kbd> file, or in a separate file. The configuration is easily readable and updatable while retaining the flexibility to express all configurations.</p>
<p>Alternatively, ReflectInsight can be configured programmatically. We will use a combination of both throughout this book, with the main configuration usually done via the <kbd>app.config</kbd> file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Dynamic configuration</h1>
                </header>
            
            <article>
                
<p>ReflectInsight automatically monitors its configuration file for changes and dynamically applies these changes when made. In many cases, it is possible to diagnose application issues without terminating the process in question. This can be a very valuable tool in investigating issues from our deployed applications.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Main Screen</h1>
                </header>
            
            <article>
                
<p>The ReflectInsight insight configuration editor helps in easily creating configuration files through a visual interface, but advanced users can work with XML.</p>
<p>The tool is very useful for editing settings, defining message patterns/formats, defining extensions, defining listeners, associating colors with message types, and more:</p>
<ul>
<li>Easy-to-understand layout</li>
<li>It remembers the recent files list</li>
<li>Predefined selections and dynamic section lookups</li>
<li>Key values popup editor</li>
<li>Message pattern popup editor</li>
<li>Method types popup editor</li>
<li>Color definition and message color popup editor</li>
</ul>
<p>Following is a screenshot of the configuration editor and the various parameters its changes can affect:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3f8d6cb0-ed3d-4aed-aa0b-7d3e3991fef5.png" style=""/></div>
<p>You can download a trial copy of ReflectInsight from <a href="http://www.reflectsoftware.com">www.reflectsoftware.com</a>. Mention this book when purchasing and get a substantial discount off the retail price!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we learned about ReflectInsight and the incredible benefits it can provide you. We saw especially how it can help the machine learning developer see exactly what is going on inside their algorithm. I encourage you to download your copy and try it out. You will never look at logging the same way again. Our next chapter will expose the famous Traveling Salesman problem, and we will get our first exposure to the second love of my life, neurons, as well as work with the famous Bayes theorem!</p>
<p>ReflectInsight is a copyright of ReflectSoftware. All images, text, and logos are used with permission.</p>


            </article>

            
        </section>
    </body></html>