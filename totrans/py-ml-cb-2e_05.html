<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Visualizing Data</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Plotting three-dimensional scatter plots</li>
<li>Plotting bubble plots</li>
<li>Animating bubble plots</li>
<li>Drawing pie charts</li>
<li>Plotting date-formatted time series data</li>
<li>Plotting histograms</li>
<li>Visualizing heat maps</li>
<li>Animating dynamic signals</li>
<li>Working with the Seaborn library</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>To address the recipes in this chapter, you will need the following files (available on GitHub):</p>
<ul>
<li><kbd>scatter_3d.py</kbd></li>
<li><kbd>bubble_plot.py</kbd></li>
<li><kbd>dynamic_bubble_plot.py</kbd></li>
<li><kbd>pie_chart.py</kbd></li>
<li><kbd>time_series.py</kbd></li>
<li><kbd>aapl.csv</kbd></li>
<li><kbd>histogram.py</kbd></li>
<li><kbd>heatmap.py</kbd></li>
<li><kbd>moving_wave_variable.py</kbd></li>
<li><kbd>seaborn.boxplot.py</kbd></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">An introduction to data visualization</h1>
                </header>
            
            <article>
                
<p><strong>Data visualization</strong> is an important pillar of machine learning. It helps us to formulate the right strategies to understand data. The visual representation of data assists helps us choose the right algorithms. One of the main goals of data visualization is to communicate clearly by using graphs and charts.</p>
<p>We encounter numerical data all the time in the real world. We want to encode this numerical data by using graphs, lines, dots, bars, and so on, to visually display the information contained in those numbers. This makes complex distributions of data more understandable and usable. The process is used in a variety of situations, including comparative analysis, tracking growth, market distribution, public opinion polls, and much more.</p>
<p>We use different charts to show patterns or relationships between variables. We use histograms to display the distribution of data. We use tables when we want to look up a specific measurement. In this chapter, we will look at various scenarios and discuss what visualizations we can use in those situations.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Plotting three-dimensional scatter plots</h1>
                </header>
            
            <article>
                
<p>The relationships between quantitative variables can be represented by using a scatter plot. A version of this graph is represented by the three-dimensional scatter plots that are used to show the relationships between three variables.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p><span>In this recipe, you will learn how to plot three-dimensional scatter plots and visualize them in three dimensions.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to plot three-dimensional scatter plots:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>scatter_3d.py</kbd><span> </span><span>file that's already provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt  </pre>
<ol start="2">
<li>Create the empty figure, as follows:</li>
</ol>
<pre style="padding-left: 60px"># Create the figure 
fig = plt.figure() 
ax = fig.add_subplot(111, projection='3d') </pre>
<ol start="3">
<li>Define the number of values that we should generate:</li>
</ol>
<pre style="padding-left: 60px"># Define the number of values 
n = 250 </pre>
<ol start="4">
<li>Create a <kbd>lambda</kbd> function to generate the values in a given range:</li>
</ol>
<pre style="padding-left: 60px"># Create a lambda function to generate the random values in the given range 
f = lambda minval, maxval, n: minval + (maxval - minval) * np.random.rand(n) </pre>
<ol start="5">
<li>Generate the x, y, and z values using the <kbd>lambda</kbd> function:</li>
</ol>
<pre style="padding-left: 60px"># Generate the values 
x_vals = f(15, 41, n) y_vals = f(-10, 70, n) 
z_vals = f(-52, -37, n) </pre>
<ol start="6">
<li>Plot these values, as follows:</li>
</ol>
<pre style="padding-left: 60px"># Plot the values 
ax.scatter(x_vals, y_vals, z_vals, c='k', marker='o') 
ax.set_xlabel('X axis') 
ax.set_ylabel('Y axis') 
ax.set_zlabel('Z axis') 
 
plt.show() </pre>
<p style="padding-left: 60px">If you run the preceding code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1007 image-border" src="assets/e02664cf-8fb5-4823-a0c8-ce70baf3e1c3.png" style="width:31.08em;height:24.50em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The scatter plot helps us to understand whether there is a statistical association between two quantitative characters. If as one variable increases, the other tends to decrease, we have a discordant association. If as one variable increases, the other tends to increase, we have a concordant association. If one changes and the other tends to not change, we have no association. To analyze this trend, the disposition of markers is analyzed. If the markers are close to forming a straight line in any direction in the three-dimensional space of the graph, the correlation between the corresponding variables is high. If the markers are equally distributed in the graph, the correlation is low, or zero.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">Three-dimensional scatter plots are used to show the relationship between three variables. A fourth variable can be added by matching the color or size of the markers, adding another variable to the plot.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root">Refer to the official documentation of Matplotlib at <a href="https://matplotlib.org/gallery/mplot3d/scatter3d.html">https://matplotlib.org/gallery/mplot3d/scatter3d.html</a>.<a href="https://matplotlib.org/gallery/mplot3d/scatter3d.html"/></li>
<li>Refer to <em>Visualize Your Data: Scatter Plots</em> (from the University of Illinois) at <a href="http://guides.library.illinois.edu/visualize-your-data/scatter-plots">http://guides.library.illinois.edu/visualize-your-data/scatter-plots</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Plotting bubble plots</h1>
                </header>
            
            <article>
                
<p>A <strong>bubble plot</strong> is a type of chart in which each represented entity is defined in terms of three distinct numerical parameters. The first two parameters are used as values of the two Cartesian axes, while the third is used to find the radius of the bubble. Bubble plots are used to describe relationships in various scientific fields.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>Let's look at how to plot bubble plots. The size of each circle in a two-dimensional bubble plot represents the amplitude of that particular point.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to plot bubble plots:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>bubble_plot.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt  </pre>
<ol start="2">
<li>Define the number of values that we should generate:</li>
</ol>
<pre style="padding-left: 60px"># Define the number of values 
num_vals = 40 </pre>
<ol start="3">
<li>Generate random values for <kbd>x</kbd> and <kbd>y</kbd>:</li>
</ol>
<pre style="padding-left: 60px"># Generate random values 
x = np.random.rand(num_vals) 
y = np.random.rand(num_vals) </pre>
<ol start="4">
<li>Define the area value for each point in the bubble plot:</li>
</ol>
<pre style="padding-left: 60px"># Define area for each bubble 
# Max radius is set to a specified value 
max_radius = 25 
area = np.pi * (max_radius * np.random.rand(num_vals)) ** 2   </pre>
<ol start="5">
<li>Define the colors:</li>
</ol>
<pre style="padding-left: 60px"># Generate colors 
colors = np.random.rand(num_vals) </pre>
<ol start="6">
<li>Plot these values:</li>
</ol>
<pre style="padding-left: 60px"># Plot the points 
plt.scatter(x, y, s=area, c=colors, alpha=1.0) 
 
plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1008 image-border" src="assets/506a77bd-829c-4890-bc30-9971e5e1c597.png" style="width:30.83em;height:23.58em;"/></p>
<p> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The variables that were shown previously can be compared to each other based on their sizes and their positions relative to the numeric axis. In fact, the <em>x</em> and <em>y</em> axis of a bubble chart are numerical scales, so the position in which data is represented describes two numerical values, while the area of the drawing depends on the value of the third parameter.</p>
<p>When drawing a bubble chart, it is necessary to pay attention to the fact that the area of a circle is proportional to the square of the radius, so if the radius is determined proportionally to the third value, the result will disproportionately emphasize the third value. To have a correctly weighed scale, the radius must be chosen in proportion to the square root of the third value. This error is commonly committed when drawing bubble charts.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">A bubble plot can be considered a variation of a scatter plot, where points are replaced with bubbles. This type of chart can be used instead of a scatter plot if the data has three series, each of which contains a set of data.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root"><span>Refer to the official documentation of Matplotlib at <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.scatter.html">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.scatter.html</a>.<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.scatter.html"/></span></li>
<li>Refer to the <kbd>pyplot</kbd> tutorial at <a href="https://matplotlib.org/users/pyplot_tutorial.html">https://matplotlib.org/users/pyplot_tutorial.html</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Animating bubble plots</h1>
                </header>
            
            <article>
                
<p>An animating bubble plot is a bubble plot in motion. It allows for the efficient and interactive visualization of correlations through time. It is particularly useful, as it allows us to visualize how the correlations between variables change over time <span>efficiently and interactively.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>Let's look at how to animate a bubble plot. This will be useful when you want to visualize data that's transient and dynamic.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to animate bubble plots:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>dynamic_bubble_plot.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt 
from matplotlib.animation import FuncAnimation  </pre>
<ol start="2">
<li>Let's define a <kbd>tracker</kbd> function that will dynamically update the bubble plot:</li>
</ol>
<pre style="padding-left: 60px">def tracker(cur_num): 
    # Get the current index  
    cur_index = cur_num % num_points </pre>
<ol start="3">
<li>Define the color:</li>
</ol>
<pre>    # Set the color of the datapoints  
    datapoints['color'][:, 3] = 1.0 </pre>
<ol start="4">
<li>Update the size of the circles:</li>
</ol>
<pre>    # Update the size of the circles  
    datapoints['size'] += datapoints['growth'] </pre>
<ol start="5">
<li>Update the position of the oldest data point in the set:</li>
</ol>
<pre>    # Update the position of the oldest datapoint  
    datapoints['position'][cur_index] = np.random.uniform(0, 1, 2) 
    datapoints['size'][cur_index] = 7 
    datapoints['color'][cur_index] = (0, 0, 0, 1) 
    datapoints['growth'][cur_index] = np.random.uniform(40, 150) </pre>
<ol start="6">
<li>Update the parameters of the scatter plot:</li>
</ol>
<pre>    # Update the parameters of the scatter plot  
    scatter_plot.set_edgecolors(datapoints['color']) 
    scatter_plot.set_sizes(datapoints['size']) 
    scatter_plot.set_offsets(datapoints['position']) </pre>
<ol start="7">
<li>Define the <kbd>main</kbd> function and create an empty figure:</li>
</ol>
<pre>if __name__=='__main__': 
    # Create a figure  
    fig = plt.figure(figsize=(9, 7), facecolor=(0,0.9,0.9)) 
    ax = fig.add_axes([0, 0, 1, 1], frameon=False) 
    ax.set_xlim(0, 1), ax.set_xticks([]) 
    ax.set_ylim(0, 1), ax.set_yticks([]) </pre>
<ol start="8">
<li>Define the number of points that will be on the plot at any given point in time:</li>
</ol>
<pre>    # Create and initialize the datapoints in random positions  
    # and with random growth rates. 
    num_points = 20 </pre>
<ol start="9">
<li>Define the <kbd>datapoints</kbd> by using random values:</li>
</ol>
<pre>    datapoints = np.zeros(num_points, dtype=[('position', float, 2), 
            ('size', float, 1), ('growth', float, 1), ('color', float, 4)]) 
    datapoints['position'] = np.random.uniform(0, 1, (num_points, 2)) 
    datapoints['growth'] = np.random.uniform(40, 150, num_points) </pre>
<ol start="10">
<li>Create the scatter plot that will be updated in every frame:</li>
</ol>
<pre>    # Construct the scatter plot that will be updated every frame 
    scatter_plot = ax.scatter(datapoints['position'][:, 0], datapoints['position'][:, 1], 
                      s=datapoints['size'], lw=0.7, edgecolors=datapoints['color'], 
                      facecolors='none') </pre>
<ol start="11">
<li>Start the animation by using the <kbd>tracker</kbd> function:</li>
</ol>
<pre>    # Start the animation using the 'tracker' function  
    animation = FuncAnimation(fig, tracker, interval=10) 
 
    plt.show() </pre>
<p class="mce-root"/>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1009 image-border" src="assets/c4758a55-285e-4338-aedd-b9208d671525.png" style="width:44.25em;height:21.08em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In this recipe, we simply used a series of bubble plots with values that change over time to build an animation. To do this, we started with the construction of a function that updates the parameters of these graphs. Then, we defined the code that traces the bubble plot with the current parameters. Finally, we used the <kbd>FuncAnimation()</kbd> function to create animations from the individual bubble plots.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">The <kbd>FuncAnimation()</kbd> function of Matplotlib creates an animation by repeatedly calling a specific function.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li><span>Refer to the official documentation of Matplotlib at </span><a href="https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html">https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html</a>.</li>
<li>Refer to the Matplotlib animation at <a href="https://matplotlib.org/api/animation_api.html">https://matplotlib.org/api/animation_api.html</a>.</li>
</ul>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Drawing pie charts</h1>
                </header>
            
            <article>
                
<p>The circular diagram, often referred to as a pie chart, is a method used in descriptive statistics for graphical representations of quantitative variables measured on classes of categories (nominal values), in order to avoid establishing, even unintentionally, an order that does not exist in the categories.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>Let's look at how to draw pie charts. This will be useful when you want to visualize the percentages of a set of labels in a group.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to draw pie charts, as follows:</p>
<ol>
<li>Create a new Python file and import the following package (t<span>he full code is in the </span><kbd>pie_chart.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import matplotlib.pyplot as plt  </pre>
<ol start="2">
<li>Define the labels and values:</li>
</ol>
<pre style="padding-left: 60px"># Labels and corresponding values in counter clockwise direction 
data = {'Apple': 26,  
        'Mango': 17, 
        'Pineapple': 21,  
        'Banana': 29,  
        'Strawberry': 11} </pre>
<ol start="3">
<li>Define the colors for visualization:</li>
</ol>
<pre style="padding-left: 60px"># List of corresponding colors 
colors = ['orange', 'lightgreen', 'lightblue', 'gold', 'cyan'] </pre>
<ol start="4">
<li>Define a variable to highlight a section of the pie chart by separating it from the rest. If you don't want to highlight any sections, set all of the values to <kbd>0</kbd>:</li>
</ol>
<pre style="padding-left: 60px"># Needed if we want to highlight a section 
explode = (0, 0, 0, 0, 0)   </pre>
<ol start="5">
<li>Plot the pie chart. Note that if you are using Python 3, you should use <kbd>list(data.values())</kbd> in the following function call:</li>
</ol>
<pre style="padding-left: 60px"># Plot the pie chart 
plt.pie(data.values(), explode=explode, labels=data.keys(),  
        colors=colors, autopct='%1.1f%%', shadow=False, startangle=90) 
 
# Aspect ratio of the pie chart, 'equal' indicates tht we  
# want it to be a circle 
plt.axis('equal') 
 
plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1010 image-border" src="assets/72a5ae8a-affc-4e3f-8e44-4a073c145744.png" style="width:28.50em;height:23.83em;"/></p>
<ol start="7">
<li class="packt_nosymbol">If you change the explode array to (<kbd>0, 0.2, 0, 0, 0</kbd>), it will highlight the <span>Mango</span> section. You will see the following output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1011 image-border" src="assets/7ddf1938-939a-416f-ba02-b36d2263c16d.png" style="width:29.67em;height:23.58em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>A pie chart is constructed by dividing a circle into slices whose angular amplitudes are proportional to the frequency classes. The areas identified by the slices are proportional to the frequencies. To make the diagram clearer, the various slices are filled with different colors.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">The pie chart is useful for displaying the market shares of products and brands, or the percentages taken by political parties in elections. The chart does not work with large percentage differences or with too many elements, as this would make the pie too jagged.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root"><span>Refer to the official documentation of Matplotlib at <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pie.html">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pie.html</a>.</span></li>
<li><span>Refer to the p</span>ie chart (from Wikipedia) at <a href="https://en.wikipedia.org/wiki/Pie_chart">https://en.wikipedia.org/wiki/Pie_chart</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Plotting date-formatted time series data</h1>
                </header>
            
            <article>
                
<p>A <strong>time series</strong> constitutes a sequence of observations of a phenomenon, carried out in consecutive instants or time intervals. Usually, even if it's not necessary, they are evenly spaced out or are of the same length. The trends of commodity prices, stock market indices, government bonds spread, and unemployment rates are just a few examples of times series.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>Let's look at how to plot time series data by using date formatting. This will be useful in visualizing stock data over time.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to plot date-formatted time series data, as follows:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>time_series.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy 
import matplotlib.pyplot as plt 
from matplotlib.mlab import csv2rec 
from matplotlib.ticker import Formatter </pre>
<ol start="2">
<li>Define a function to format the dates. The <kbd>__init__</kbd> function sets the class variables:</li>
</ol>
<pre style="padding-left: 60px"># Define a class for formatting 
class DataFormatter(Formatter): 
    def __init__(self, dates, date_format='%Y-%m-%d'): 
        self.dates = dates 
        self.date_format = date_format </pre>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="3">
<li>Extract the value at any given time and return it in the following format:</li>
</ol>
<pre>    # Extract the value at time t at position 'position' 
    def __call__(self, t, position=0): 
        index = int(round(t)) 
        if index &gt;= len(self.dates) or index &lt; 0: 
            return '' 
 
        return self.dates[index].strftime(self.date_format) </pre>
<ol start="4">
<li>Define the <kbd>main</kbd> function. We'll use the Apple stock quotes CSV file that was <span>already provided to you (<kbd>aapl.csv</kbd>). </span>Load the CSV file:</li>
</ol>
<pre>    # Load csv file into numpy record array 
    data = csv2rec('aapl.csv') </pre>
<ol start="5">
<li>Extract a subset of these values in order to plot them:</li>
</ol>
<pre>    # Take a subset for plotting 
    data = data[-70:] </pre>
<ol start="6">
<li>Create the <kbd>formatter</kbd> object and initialize it with the dates:</li>
</ol>
<pre>    # Create the date formatter object 
    formatter = DataFormatter(data.date) </pre>
<ol start="7">
<li>Define the <em>x</em> and <em>y</em> axes:</li>
</ol>
<pre>    # X axis 
    x_vals = numpy.arange(len(data)) 
 
    # Y axis values are the closing stock quotes 
    y_vals = data.close  </pre>
<ol start="8">
<li>Plot the data:</li>
</ol>
<pre>    # Plot data 
    fig, ax = plt.subplots() 
    ax.xaxis.set_major_formatter(formatter) 
    ax.plot(x_vals, y_vals, 'o-') 
    fig.autofmt_xdate() 
    plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1012 image-border" src="assets/236cda03-651a-460d-a8a7-86653471c57d.png" style="width:35.58em;height:25.42em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In this recipe, we have plotted time series data by using date formatting. We started by defining a class for formatting the date. We extracted the value at time <em>t</em> at a specific position. Then, we loaded a CSV file into a NumPy record array. So, we took a subset for plotting and we created the date <kbd>formatter</kbd> object. Finally, we set the <em>x</em> and <em>y</em> axes and plotted the data.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">Visualization is fundamental in the analysis of time series. Viewing raw data can provide tools for identifying temporal structures, such as trends, cycles, and seasonality. However, the formatting of the dates represents an operation that you must learn to process, in order to obtain a correct visualization of the axes.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root">Refer to <em>Time Series Basics</em> (from Pennsylvania State University) at <a href="https://newonlinecourses.science.psu.edu/stat510/node/41/">https://newonlinecourses.science.psu.edu/stat510/node/41/</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Plotting histograms</h1>
                </header>
            
            <article>
                
<p>A <strong>histogram</strong> is a reproduction of numerical distributions that shows the shape of a distribution. It consists of adjacent rectangles (bins) whose bases are aligned on an axis and are equipped with a unit of measure. </p>
<p>For more information, refer to the book <em>MATLAB for Machine Learning</em> by Giuseppe Ciaburro.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>We'll look at how to plot histograms in this recipe. We'll compare two sets of data and build a comparative histogram.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to plot histograms, as follows:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>histogram.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt  </pre>
<ol start="2">
<li>We'll compare the production quantities of apples and oranges in this recipe. Let's define some values:</li>
</ol>
<pre style="padding-left: 60px"># Input data 
apples = [30, 25, 22, 36, 21, 29] 
oranges = [24, 33, 19, 27, 35, 20] 
 
# Number of groups 
num_groups = len(apples) </pre>
<ol start="3">
<li>Create the figure and define its parameters:</li>
</ol>
<pre style="padding-left: 60px"># Create the figure 
fig, ax = plt.subplots() 
 
# Define the X axis 
indices = np.arange(num_groups) 
 
# Width and opacity of histogram bars 
bar_width = 0.4 
opacity = 0.6 </pre>
<ol start="4">
<li>Plot the histogram:</li>
</ol>
<pre style="padding-left: 60px"># Plot the values 
hist_apples = plt.bar(indices, apples, bar_width,  
        alpha=opacity, color='g', label='Apples') 
 
hist_oranges = plt.bar(indices + bar_width, oranges, bar_width, 
        alpha=opacity, color='b', label='Oranges') </pre>
<ol start="5">
<li>Set the parameters of the plot:</li>
</ol>
<pre style="padding-left: 60px">plt.xlabel('Month') 
plt.ylabel('Production quantity') 
plt.title('Comparing apples and oranges') 
plt.xticks(indices + bar_width, ('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun')) 
plt.ylim([0, 45]) 
plt.legend() 
plt.tight_layout() 
 
plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1013 image-border" src="assets/79063eb4-b414-4b7b-9e71-87c2e2f9a311.png" style="width:37.92em;height:28.42em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The histogram is a particular Cartesian diagram that has discrete values on the abscissas and a magnitude on the ordinates, represented by the height of a column, which we call a bin. In physics, histograms allow us to study the results of an experiment, since they provide us with a graphic indication of how the counts or frequencies are distributed, according to the discrete values taken into consideration.</p>
<p class="mce-root">To build a histogram, perform the following steps:</p>
<ol>
<li class="mce-root">First of all, you have to decide the number of tests.</li>
<li class="mce-root">Then, you must choose the binning, that is, the division of the domain of the variable on the abscissas, in intervals. You must therefore define the number of intervals, where the <em>j</em><sup>th</sup> bin will have a predetermined width.</li>
<li class="mce-root">Finally, you must count the occurrences to associate with the individual bins.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">A histogram is most useful under the following circumstances:</p>
<ul>
<li class="mce-root">The data to be represented are of the numeric type.</li>
<li class="mce-root">You want to visualize the form of the data distribution, in order to see whether it is normal and analyze whether a process can (or cannot) meet the requirements imposed.</li>
<li class="mce-root">You want to determine whether the output of two or more processes is different.</li>
<li class="mce-root">You want to quickly communicate data distributions.</li>
<li class="mce-root">You want to check whether a change has occurred in a process over a certain period of time.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root">Refer to <em>Histograms</em> (from the University of Leicester) at <a href="https://www2.le.ac.uk/offices/ld/resources/numerical-data/histograms">https://www2.le.ac.uk/offices/ld/resources/numerical-data/histograms</a>.</li>
<li><span>Refer to the official documentation of Matplotlib at </span><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html</a>.<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html"/></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Visualizing heat maps</h1>
                </header>
            
            <article>
                
<p>The <strong>heat map</strong> is a graph where the individual values contained in a matrix are represented through gradations of colors. Both fractal maps and tree maps often use the same color-coding systems to represent the hierarchy of a variable. For example, if we measure the number of clicks on a web page or the areas where the mouse pointer passes the most often, we will obtain a heat map with certain areas highlighted by warm colors, that is, those that most attract our attention.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>We'll look at how to visualize heat maps in this recipe. This is a pictorial representation of data, where two groups are associated point by point. The individual values that are contained in a matrix are represented as color values in the plot.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to visualize heat maps:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>heatmap.py</kbd><span> file that's been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt </pre>
<ol start="2">
<li>Define the two groups:</li>
</ol>
<pre style="padding-left: 60px"># Define the two groups  
group1 = ['France', 'Italy', 'Spain', 'Portugal', 'Germany']  
group2 = ['Japan', 'China', 'Brazil', 'Russia', 'Australia'] </pre>
<ol start="3">
<li>Generate a random two-dimensional matrix:</li>
</ol>
<pre style="padding-left: 60px"># Generate some random values 
data = np.random.rand(5, 5) </pre>
<ol start="4">
<li>Create a figure:</li>
</ol>
<pre style="padding-left: 60px"># Create a figure 
fig, ax = plt.subplots() </pre>
<ol start="5">
<li>Create a heat map:</li>
</ol>
<pre style="padding-left: 60px"># Create the heat map 
heatmap = ax.pcolor(data, cmap=plt.cm.gray) </pre>
<ol start="6">
<li>Plot these values:</li>
</ol>
<pre style="padding-left: 60px"># Add major ticks at the middle of each cell 
ax.set_xticks(np.arange(data.shape[0]) + 0.5, minor=False) 
ax.set_yticks(np.arange(data.shape[1]) + 0.5, minor=False) 
 
# Make it look like a table  
ax.invert_yaxis() 
ax.xaxis.tick_top() 
 
# Add tick labels 
ax.set_xticklabels(group2, minor=False) 
ax.set_yticklabels(group1, minor=False) 
 
plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1014 image-border" src="assets/8a66ae19-55ca-445a-bba1-7f482a284a9e.png" style="width:31.83em;height:23.08em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We already stated that a heat map is a type of graphical representation of data, where the values are expressed through a different color range. Its representation usually includes the following:</p>
<ul>
<li class="mce-root"><strong>Warm colors</strong>: Red, orange, and yellow, in the areas of greatest interest</li>
<li class="mce-root"><strong>Cold colors</strong>: Green or blue, for the areas with worse results</li>
</ul>
<p class="mce-root">Generally, heat maps require a large sample of data, and their main objective is to obtain useful data on the trend of a particular variable. This means of analysis allows us to evaluate the distribution of the variable of interest in the analyzed area. In this way, the concentration of warm colors in particular areas will highlight the areas in which the variable assumes the highest values.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">The creator of heat maps was Cormac Kinney, who, in the mid-1990s, developed this solution to provide stock market operators with an extremely quick tool for gathering a variety of financial data.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root">Refer to <em>Creating Annotated Heatmaps</em> (from the official documentation of Matplotlib) at <a href="https://matplotlib.org/gallery/images_contours_and_fields/image_annotated_heatmap.html">https://matplotlib.org/gallery/images_contours_and_fields/image_annotated_heatmap.html</a>.</li>
<li>Refer to the official documentation of Matplotlib at <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pcolor.html">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pcolor.html</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Animating dynamic signals</h1>
                </header>
            
            <article>
                
<p>When we visualize real-time signals, it's nice to look at how the waveform builds up. A <strong>dynamic system</strong> is a mathematical model that represents an object with a finite number of degrees of freedom that evolves over time, according to a deterministic law. A dynamic system is identified by a vector in the phase space, which is, the space of the system states, where <strong>state</strong> is a term that indicates the set of physical quantities, called <strong>state variables</strong> that characterize the dynamics of the system.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>In this recipe, we will look at how to animate dynamic signals and visualize them as they are encountered in real time.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to animate dynamic signals, as follows:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the </span><kbd>moving_wave_variable.py</kbd><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import numpy as np 
import matplotlib.pyplot as plt 
import matplotlib.animation as animation  </pre>
<ol start="2">
<li>Create a function to generate a damping sinusoid signal:</li>
</ol>
<pre style="padding-left: 60px"># Generate the signal 
def generate_data(length=2500, t=0, step_size=0.05): 
    for count in range(length): 
        t += step_size 
        signal = np.sin(2*np.pi*t) 
        damper = np.exp(-t/8.0) 
        yield t, signal * damper  </pre>
<ol start="3">
<li>Define an <kbd>initializer</kbd> function to initialize the parameters of the plot:</li>
</ol>
<pre style="padding-left: 60px"># Initializer function 
def initializer(): 
    peak_val = 1.0 
    buffer_val = 0.1 </pre>
<ol start="4">
<li>Set these parameters, as follows:</li>
</ol>
<pre style="padding-left: 60px">    ax.set_ylim(-peak_val * (1 + buffer_val), peak_val * (1 + buffer_val)) 
    ax.set_xlim(0, 10) 
    del x_vals[:] 
    del y_vals[:] 
    line.set_data(x_vals, y_vals) 
    return line </pre>
<ol start="5">
<li>Define a function to draw the values:</li>
</ol>
<pre style="padding-left: 60px">def draw(data): 
    # update the data 
    t, signal = data 
    x_vals.append(t) 
    y_vals.append(signal) 
    x_min, x_max = ax.get_xlim() </pre>
<ol start="6">
<li>If the values go past the current <em>x</em> axis limits, then update and extend the graph:</li>
</ol>
<pre>    if t &gt;= x_max: 
        ax.set_xlim(x_min, 2 * x_max) 
        ax.figure.canvas.draw() 
 
    line.set_data(x_vals, y_vals) 
 
    return line </pre>
<ol start="7">
<li>Define the <kbd>main</kbd> function:</li>
</ol>
<pre style="padding-left: 30px">if __name__=='__main__': 
    # Create the figure 
    fig, ax = plt.subplots() 
    ax.grid() </pre>
<ol start="8">
<li>Extract the line:</li>
</ol>
<pre>    # Extract the line 
    line, = ax.plot([], [], lw=1.5) </pre>
<ol start="9">
<li>Create the variables and initialize them to empty lists:</li>
</ol>
<pre>    # Create the variables 
    x_vals, y_vals = [], [] </pre>
<ol start="10">
<li>Define and start the animation by using the <kbd>animator</kbd> object:</li>
</ol>
<pre>    # Define the animator object 
    animator = animation.FuncAnimation(fig, draw, generate_data,  
            blit=False, interval=10, repeat=False, init_func=initializer) 
 
    plt.show() </pre>
<p style="padding-left: 60px">If you run this code, you will see the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1015 image-border" src="assets/4ab9df5d-9beb-46b6-9e33-de5a4e80e7de.png" style="width:133.75em;height:69.08em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>In this recipe, we animated dynamic signals and visualized them as they are encountered in real time. To do this, a damped sine wave was used. When we go on a seesaw, we know that after the initial push, it oscillates for a while and then stops. The seesaw is an example of a pendulum, whose motion is represented by a damped sine wave. A <strong>damped sine wave</strong> is a sinusoidal function whose amplitude approaches zero as time increases.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root"><strong>Sinusoidal waves</strong> are used to describe many oscillating phenomena. When a sine wave is muted, each successive peak decreases with time. The most common form of damping is exponential damping, in which the outer envelope of the subsequent peaks is an exponential decay curve.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li><span>Refer to the official documentation of Matplotlib at </span><a href="https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html">https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html</a>.<a href="https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html"/></li>
<li>Refer to Matplotlib animation at <a href="https://matplotlib.org/api/animation_api.html">https://matplotlib.org/api/animation_api.html</a>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Working with the Seaborn library</h1>
                </header>
            
            <article>
                
<p>A <strong>box plot</strong>, also called a <strong>whiskers chart</strong>, is a graph that uses <span>simple dispersion and position indexes</span> to describe the distribution of a sample. A box plot can be depicted either horizontally or vertically, by means of a rectangular partition divided by two segments. The rectangle (box) is delimited by the first quartile (the 25<sup>th</sup> percentile) and the third quartile (the 75<sup>th</sup> percentile), and is divided by the median (the 50<sup>th</sup> percentile).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this recipe, we will draw a box plot to show the distribution of the predictors contained in the Boston dataset, which we already used in the <em>Estimating housing prices</em> recipe in <a href="f552bbc7-5e56-41b8-8e8d-915cc1bd53ab.xhtml">Chapter 1</a><em>, The Realm of Supervised Learning</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>Let's look at how to work with the <kbd>seaborn</kbd> library, as follows:</p>
<ol>
<li>Create a new Python file and import the following packages (t<span>he full code is in the <kbd>seaborn.boxplot.py</kbd></span><span> file that's already been provided to you</span>):</li>
</ol>
<pre style="padding-left: 60px">import pandas as pd<br/>from sklearn import datasets<br/>import seaborn as sns  </pre>
<ol start="2">
<li>Load the dataset contained in the <kbd>sklearn.datasets</kbd> library:</li>
</ol>
<pre style="padding-left: 60px">boston = datasets.load_boston()</pre>
<ol start="3">
<li>Convert the data into a pandas <kbd>DataFrame</kbd>:</li>
</ol>
<pre style="padding-left: 60px">BostonDF = pd.DataFrame(boston.data, columns=boston.feature_names)</pre>
<ol start="4">
<li>Extract the first <kbd>12</kbd> features as predictors:</li>
</ol>
<pre>    Predictors = BostonDF[BostonDF.columns[0:12]]</pre>
<ol start="5">
<li>Draw the box plot by using the <kbd>seaborn</kbd> library:</li>
</ol>
<pre style="padding-left: 60px">sns.set(style="ticks")<br/>sns.boxplot(data = Predictors)</pre>
<p style="padding-left: 60px">Let's look at the results in the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1016 image-border" src="assets/d626dec6-d72d-4f8c-a106-9022b05bc2ec.png" style="width:74.67em;height:38.17em;"/></p>
<p style="padding-left: 60px">We can see that the predictors have different ranges of values. This makes the chart difficult to read; the variability for some predictors is not highlighted. In these cases, it is necessary to scale the data.</p>
<ol start="6">
<li>Import the <kbd>sklearn.preprocessing.MinMaxScaler</kbd> library and scale the data, as follows:</li>
</ol>
<pre style="padding-left: 60px">from sklearn.preprocessing import MinMaxScaler<br/><br/>scaler = MinMaxScaler()<br/>DataScaled = scaler.fit_transform(Predictors)</pre>
<ol start="6">
<li>Now, we draw a box plot again to see the difference:</li>
</ol>
<pre style="padding-left: 60px">sns.set(style="ticks")<br/>sns.boxplot(data = DataScaled)</pre>
<p class="mce-root"/>
<p style="padding-left: 60px"><span>The results are shown in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1017 image-border" src="assets/4a99ae1a-6934-4c29-98fe-c73497e0549e.png" style="width:132.00em;height:67.33em;"/></p>
<p style="padding-left: 60px">In this case, we can see that the data is between 0-1. In this way, the variability of the data is recognizable for all of the predictors.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p class="mce-root">The Seaborn library is a data visualization library that's based on Matplotlib. It is useful for drawing attractive and informative statistical graphics, and is closely integrated with Pandas data structures. Seaborn offers many features that can help us with the visual analysis of a data source.</p>
<p class="mce-root">These features can be seen at<a href="http://seaborn.pydata.org/introduction.html"> http://seaborn.pydata.org/introduction.html</a>.<a href="http://seaborn.pydata.org/introduction.html"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p class="mce-root">In a box plot, the segments outside of the box (the whiskers) represent the minimum and maximum of the sample. In this way, the four equally populated ranges, delineated by quartiles, are graphically represented.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mceNonEditable"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li class="mce-root"><span>Refer to the official website of the Seaborn library at <a href="https://seaborn.pydata.org/index.html">https://seaborn.pydata.org/index.html</a>.</span></li>
<li>Refer to the official Seaborn tutorial at <a href="https://seaborn.pydata.org/tutorial.html">https://seaborn.pydata.org/tutorial.html</a>.</li>
</ul>


            </article>

            
        </section>
    </body></html>