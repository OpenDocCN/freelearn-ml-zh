- en: '8'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Building Machine Learning Models with Power BI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In [*Chapter 7*](B19500_07.xhtml#_idTextAnchor102) of this book, you built three
    queries in Power BI dataflows that will be used for ML in Power BI. FAA Wildlife
    Strike data was the source of that data, which you will use to build your Power
    BI ML models. Those queries are sets of features associated with reports of incidents
    in which an aircraft struck wildlife.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you will build and train ML models using the queries created
    in [*Chapter 7*](B19500_07.xhtml#_idTextAnchor102). In [*Chapter 1*](B19500_01.xhtml#_idTextAnchor015),
    you determined that you would create a binary prediction model for predicting
    whether damage occurred, a general classification model to predict the size of
    the wildlife, and a regression model to predict the height from the ground associated
    with wildlife strikes that caused damage. At the end of this chapter, you will
    be ready to assess the results of the ML models you have built. We’ll do that
    in the following chapter.
  prefs: []
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You’ll need the following for this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: FAA Wildlife Strike data files from either the FAA website or the Packt GitHub
    site
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Power BI Pro license
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'One of the following Power BI licensing options for access to Power BI dataflows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Power BI Premium
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Power BI Premium Per User
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'One of the following options for getting data into the Power BI cloud service:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Microsoft OneDrive (with connectivity to the Power BI cloud service)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Microsoft Access and Power BI Gateway
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Azure Data Lake (with connectivity to the Power BI cloud service)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Building and training a binary prediction ML model in Power BI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You’re finally ready to build and train your first ML model in Power BI! We
    will start with a binary prediction model to predict whether damage happened when
    wildlife struck an airplane. As discussed in [*Chapter 1*](B19500_01.xhtml#_idTextAnchor015),
    a binary prediction model will make a yes/no prediction for a given row of data
    containing columns that are the predictive features. The query that you built
    in [*Chapter 7*](B19500_07.xhtml#_idTextAnchor102) is in your **ML Queries** dataflow
    and is named **Predict Damage**.
  prefs: []
  type: TYPE_NORMAL
- en: 'You''ll build your prediction model as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a new dataflow in your Power BI workspace by selecting **New** | **Dataflow**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Link tables from** **other dataflows**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure you are signed in to your organizational account and select **Next**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand your Power BI workspace folder, expand the **ML Queries** dataflow, select
    **Predict Damage**, and click **Transform data**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save and close the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name the new dataflow `Predict` `Damage ML`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Refresh the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you can begin building your binary prediction ML model in Power BI.
  prefs: []
  type: TYPE_NORMAL
- en: Click on the new dataflow, **Predict Damage ML**, from your workspace.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the ribbon header for **Machine** **learning models**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Select **Get started**, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.1 – Start an ML model from within a Power BI dataflow](img/B19500_08_001.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.1 – Start an ML model from within a Power BI dataflow
  prefs: []
  type: TYPE_NORMAL
- en: Now, select the column of data that the ML model will predict. For your binary
    prediction model, you must select a column with two possible outcomes. The column
    named `Indicated Damage` within the `Predict Damage` table contains a `1` value
    when damage was reported for a wildlife strike and a `0` value when damage was
    not reported. Each row represents a unique wildlife strike event.
  prefs: []
  type: TYPE_NORMAL
- en: Select the `Predict` `Damage` table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the `Indicated Damage`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click **Next**. Your screen should look as follows:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.2 – The table and outcome column for a binary prediction model are
    selected](img/B19500_08_002.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.2 – The table and outcome column for a binary prediction model are
    selected
  prefs: []
  type: TYPE_NORMAL
- en: Power BI automatically recognizes that a `Indicated Damage` column. The `1`
    value indicates that damage was reported, and that is the prediction that is most
    interesting for the ML model. Damage is the less frequent outcome and will also
    be associated with possible safety issues and costs.
  prefs: []
  type: TYPE_NORMAL
- en: Select **1** from the **Choose a target** **outcome** field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For `1` to indicate that the prediction accurately matches the outcome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For `Not 1` to indicate that the prediction missed the mark.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Your screen should look like the following screenshot before you click **Next**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.3 – Power BI detected a fit for a Binary Prediction model](img/B19500_08_003.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.3 – Power BI detected a fit for a Binary Prediction model
  prefs: []
  type: TYPE_NORMAL
- en: 'Selecting features that will be used to train the binary prediction ML model
    is the next step. As you can see in *Figure 8**.4*, Power BI has detected columns
    that are correlated to the outcome. At the time this screenshot was taken, the
    recommended columns were **Speed**, **Struck Windshield**, **Struck Nose**, **Ingested
    Engine 2**, **Struck Propeller**, **Struck Wing or Rotor**, **Struck Fuselage**,
    **Struck Landing Gear**, **Struck Tail**, and **Size**. You check the boxes for
    all of the columns in the data that do not directly indicate some form of damage
    beyond those that are recommended. The recommendations are based on a sampling
    of data, so there may be some hidden gems within features that were not flagged.
    Unless there are too many unique values, there’s no harm in adding all the features
    to your first pass at the Power BI AutoML tool. You will whittle down the features
    as you iterate the ML model and attempt to improve future results. Here’s a screenshot
    of the selection page before you check all of the features:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 8.4 – Default column selection for the ML model contains recommended
    columns by Power BI](img/B19500_08_004.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.4 – Default column selection for the ML model contains recommended
    columns by Power BI
  prefs: []
  type: TYPE_NORMAL
- en: Now you can select settings for the ML model that will be trained.
  prefs: []
  type: TYPE_NORMAL
- en: Give the ML model a name such as `Predict Damage` `ML Model`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add a description in the **Description** field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the `29` minutes. Note that you can also re-run the training process
    at different durations to compare results.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Note that at the bottom of the screen, Power BI says it will automatically
    use **20%** of the data for testing and **80%** for training. Here’s a screenshot
    before you select **Save &** **train**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.5 – Settings for naming and training the ML model](img/B19500_08_005.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.5 – Settings for naming and training the ML model
  prefs: []
  type: TYPE_NORMAL
- en: Once you select **Save & train**, Power BI will begin training and testing different
    ML algorithms to find the best fit for your data. Now you can kick back, let Power
    BI do the work, and move on to your next ML model! After the ML model has been
    trained, you will take a deep dive into the testing results in the next chapter.
  prefs: []
  type: TYPE_NORMAL
- en: Building and training a general classification ML model in Power BI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Moving on to your second ML model, you will predict the size of wildlife that
    struck an aircraft based on data collected about the strike. This ML model could
    be useful in predicting possible species that struck an aircraft. Use the query
    from the **ML Queries** dataflow named **Predict Size**:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a new dataflow in your Power BI workspace by selecting **New** | **Dataflow**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Link tables from** **other dataflows**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure you are signed in to your organizational account and select **Next**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand your Power BI workspace folder, expand the **ML Queries** dataflow, select
    **Predict Size**, and click **Transform data**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save and close the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name the new dataflow `Predict` `Size ML`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Refresh the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you can begin building your general classification ML model in Power BI.
  prefs: []
  type: TYPE_NORMAL
- en: Click on the new **Predict Size ML** dataflow from your workspace.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the ribbon header for **Machine** **learning models**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Get Started**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For a general classification ML model, you now select a column with more than
    two possible values to be predicted. The column named **Size** within the **Predict
    Size** table contains three values: **Large**, **Medium**, and **Small**. Each
    row still represents a unique wildlife strike event, just as in the previous binary
    classification ML model.'
  prefs: []
  type: TYPE_NORMAL
- en: Select the **Predict** **Size** table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Outcome column named **Size**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Next**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Power BI automatically recognizes that a **General Classification** model was
    the best choice. Your screen should look like the following screenshot before
    you click **Next**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.6 – Power BI detected a fit for a General Classification model](img/B19500_08_006.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.6 – Power BI detected a fit for a General Classification model
  prefs: []
  type: TYPE_NORMAL
- en: As with the previous binary prediction ML model, Power BI will recommend features
    for your first attempt to build the model. The recommended columns for your general
    classification ML model at the time this book was written were **Airport ID**,
    **Aircraft Mass Code**, **Number of Engines**, **Phase of Flight**, **Height**,
    **Speed**, **Sky**, **Precipitation**, **ingested Other**, **Indicated Damage**,
    **Struck Random**, **Damaged Random**, **Struck Windshield,** **Damaged Windshield**,
    **Struck Nose**, **Damaged Nose**, **Struck Engine 1**, **Damaged Engine 2**,
    **Struck Engine 3**, **Struck Propeller**, **Struck Wing or Rotor**, **Damaged
    Wing or Rotor**, **Struck Fuselage**, **Damaged Fuselage**, **Struck Landing Gear**,
    **Struck Tail**, **Damaged Tail**, **Struck Lights**, **Damaged Lights**, **Struck
    Other**, **Effect on Flight**, **Number of Engines Ingested**, **Percentage of
    Engines Ingested**, **Number of Engines Damaged**, and **Month Number**. Take
    note of these features, and then also check the box for the other features for
    your first pass at the Power BI ML tool.
  prefs: []
  type: TYPE_NORMAL
- en: Now you can select settings for the ML model that will be trained.
  prefs: []
  type: TYPE_NORMAL
- en: Give the ML model a name, such as `Predict Size` `ML Model`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add a description in the **Description** field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select a value in **Training time**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you select **Save & train**, Power BI will begin training and testing different
    ML algorithms to find the best fit for your data.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have given your ML model some time for building, you can circle back
    to it in the next chapter to review the testing data.
  prefs: []
  type: TYPE_NORMAL
- en: Building and training a regression ML model in Power BI
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Finally, you will build an ML model to predict the height of impact associated
    with wildlife strikes. A regression ML model can predict numeric values based
    on features used to train the model. This ML model could be useful in predicting
    expected costs when a wildlife strike causes damage. Use the query from the **ML
    Queries** dataflow named **Predict Height**:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a new dataflow in your Power BI workspace by selecting **New** | **Dataflow**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Link tables from** **other dataflows**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure you are signed in to your organizational account and select **Next**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand your Power BI workspace folder, expand the dataflow **ML Queries**, select
    **Predict Height**, and click **Transform data**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save and close the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name the new dataflow `Predict` `Height ML`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Refresh the new dataflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you can begin building your regression ML model in Power BI.
  prefs: []
  type: TYPE_NORMAL
- en: Click on the new **Predict Height ML** dataflow from your workspace.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the ribbon header for **Machine** **learning models**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Get Started**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A regression ML model will predict a numeric value based on features. In this
    use case, you will be building an ML model that predicts the height related to
    a wildlife strike. The column named **Height** within the **Predict Height** table
    contains integer values representing feet above the ground. Each row still represents
    a unique wildlife strike event.
  prefs: []
  type: TYPE_NORMAL
- en: Select the **Predict** **Height** table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Outcome column** named **Height**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Next**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If a regression use case is not auto-detected, Power BI gives you all three
    choices of ML model types to choose from. As shown in *Figure 8**.7*, click on
    **Regression** before clicking **Next**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 8.7 – The regression model will predict numeric values](img/B19500_08_007.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 8.7 – The regression model will predict numeric values
  prefs: []
  type: TYPE_NORMAL
- en: Power BI again recommends features, and you can select all of them for the first
    run of the ML model.
  prefs: []
  type: TYPE_NORMAL
- en: Now you can select settings for the ML model that will be trained.
  prefs: []
  type: TYPE_NORMAL
- en: Give the ML model a name, such as `Predict Height` `ML Model`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add a description in the **Description** field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select a value in **Training time**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you select **Save & train**, Power BI will begin training and testing different
    ML algorithms to find the best model for your data.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You’ve now reached a point in the project where the first attempts at all three
    ML models have been built. While it may have seemed easy, there is still much
    work to do in the coming chapters!
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you used Power BI to build dataflows and train a binary prediction
    ML model, a general classification model, and a regression model. All three relied
    on the work you had done through [*Chapter 7*](B19500_07.xhtml#_idTextAnchor102)
    to identify features in the FAA Wildlife Strike data, prep queries for ML, and
    then publish everything to the Power BI cloud service.
  prefs: []
  type: TYPE_NORMAL
- en: In [*Chapter 9*](B19500_09.xhtml#_idTextAnchor125), you will review the testing
    results of the ML models and evaluate the accuracy of the tested predictions.
    ML models needing improvement can be modified and re-trained as needed until acceptable
    results are attained.
  prefs: []
  type: TYPE_NORMAL
