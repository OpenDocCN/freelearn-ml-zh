- en: Chatbots
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聊天机器人
- en: 'The era of chatbots has now arrived, a new technological phenomenon that has
    helped generate a new way of interacting with machines, consequently creating
    businesses. Chatbots are robots that interact with users through a chat and are
    able to assist them by carrying out extremely limited tasks: providing information
    on a current account, buying a ticket, receiving news about the weather, and so
    on.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人的时代已经到来，这是一种新的技术现象，它帮助产生了与机器互动的新方式，从而创造了新的商业机会。聊天机器人是能够通过聊天与用户互动的机器人，能够通过执行极其有限的任务来帮助他们：提供当前账户信息、购票、接收天气预报等。
- en: A chatbot processes the text presented by the user, before responding based
    on a complex set of algorithms that interpret and identify what the user has said.
    After deducting what the user requires, it determines a set of appropriate responses
    based on the information extracted from the context. Some chatbots offer an extraordinarily
    authentic conversational experience, in which it is very difficult to determine
    if the agent is a bot or a human being.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人处理用户呈现的文本，然后根据一组复杂的算法进行响应，这些算法解释和识别用户说了什么。在扣除用户所需的内容后，它根据从上下文中提取的信息确定一组适当的响应。一些聊天机器人提供了一种非常真实的对话体验，其中很难确定代理是机器人还是人类。
- en: Chatbots are also one of the most exciting innovations brought about by AI.
    In this chapter, after introducing the main concepts on which all of this technology
    is based, we will present the methods for building contextual chatbots and implement
    a simple chatbot end-to-end application on GCP.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人也是人工智能带来的最令人兴奋的创新之一。在本章中，在介绍所有这些技术所基于的主要概念之后，我们将介绍构建上下文聊天机器人的方法，并在GCP上实现一个简单的聊天机器人端到端应用程序。
- en: 'Topics covered:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 涵盖的主题：
- en: Chatbot fundamentals
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聊天机器人基础
- en: Chatbot design techniques
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聊天机器人设计技术
- en: Natural language processing
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自然语言处理
- en: Google Cloud Dialogflow
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google Cloud Dialogflow
- en: Chatbot building and implementation on GCP
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在GCP上构建和实施聊天机器人
- en: At the end of the chapter, the reader will have completed a hands-on introduction
    to chatbots and learned how to train a contextual chatbot while implementing it
    in a real web application.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，读者将完成对聊天机器人的实战介绍，并学习如何在实施过程中训练上下文聊天机器人。
- en: Chatbots fundamentals
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聊天机器人基础
- en: Chat bots, or chatbots, are programs that can interact through a chat with a
    human being, simulating their behavior. A conversation is then established between
    the human and the robot. Since the first developments in computer science, in
    collaboration with other disciplines, scholars have tried to reproduce typically
    human cognitive processes through the use of machines. They are usually used for
    simple and repetitive activities, which may otherwise take a lot of time or which
    are not worth assigning a human resource.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人，或称为chatbots，是能够通过聊天与人类互动的程序，模拟人类的行为。随后，人类与机器人之间建立对话。自从计算机科学开始发展以来，学者们与其他学科合作，试图通过机器来重现典型的人类认知过程。它们通常用于简单且重复的活动，这些活动可能需要花费大量时间，或者不值得分配人力资源。
- en: Given their complexity, it is obvious that, in this case, you cannot speak of
    a satisfactory simulation of people's own behavior, but can nevertheless begin
    to refer to the concept of AI.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到它们的复杂性，显然在这种情况下，我们不能谈论对人类自身行为的令人满意的模拟，但仍然可以开始提及人工智能的概念。
- en: The bot can execute a scheme and show its operation. Bots can do anything, from
    responding to messages automatically to allowing online purchases. They can receive
    news of any kind, release weather conditions, or show music videos, all exclusively
    via chat.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 机器人可以执行方案并展示其操作。机器人可以做任何事情，从自动回复消息到允许在线购物。它们可以接收任何类型的新闻，发布天气状况，或展示音乐视频，所有这些都可以通过聊天完成。
- en: 'There are several platforms that implement the ability to use bots. These include:
    Telegram, Skype, Messenger, Slack, SMS, and email. The bots allow you to use these
    platforms—applications already known and used by the user for other features (such
    as messaging)—to perform within them the most disparate functions, saving the
    user''s effort to use and install additional applications on the user''s device.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个平台实现了使用机器人的能力。这些包括：Telegram、Skype、Messenger、Slack、SMS和电子邮件。机器人允许您使用这些平台——用户已知并用于其他功能（如消息）的应用程序——在它们内部执行最不同的功能，从而节省用户在设备上使用和安装额外应用程序的努力。
- en: Chatbot history
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聊天机器人历史
- en: The history of chatbots begins much earlier than you may think. We are in England
    in the mid-20^(th) century when Alan Turing, asking the question *Can machines
    think?*, proposes a test that links intelligence to the ability to hold a conversation.
    Since then, the challenge of creating software capable of simulating human language
    in an increasingly accurate manner has never stopped.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人的历史比你想象的要早得多。我们回到了20世纪中叶的英国，当时艾伦·图灵提出了“机器能思考吗？”这个问题，并提出了一种将智能与进行对话的能力联系起来的测试。从那时起，创建能够以越来越准确的方式模拟人类语言的软件的挑战从未停止。
- en: The imitation game
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模仿游戏
- en: 'In the 1950s, Alan Turing wrote an article called *Computing machinery and
    intelligence*, in which the problem was about establishing a criterion for determining
    whether a machine can think. The criterion is based on *The imitation game*, in
    which there is a computer **A**, a human **B**, and another human **C** (the interrogator).
    Human **C** must establish who is **A** and who is **B**. The interrogator asks
    both of them questions, to which **A** and **B** respond in writing. Computer
    **A** wins the game when **C** mistakes in judging **A**''s identity, believing
    it to be human. The following diagram shows an imitation game scheme:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在20世纪50年代，艾伦·图灵撰写了一篇名为*计算机与智能*的文章，其中讨论了确定机器是否能够思考的标准问题。这个标准基于*模仿游戏*，其中有一个计算机**A**，一个人**B**，以及另一个人类**C**（审问者）。人类**C**必须确定**A**和**B**的身份。审问者向他们提问，**A**和**B**以书面形式回答。当**C**在判断**A**的身份时出错，认为它是人类时，计算机**A**赢得游戏。以下图显示了模仿游戏的方案：
- en: '![](img/585c227a-747a-46cb-8482-41057192280a.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/585c227a-747a-46cb-8482-41057192280a.png)'
- en: Turing's game—despite numerous criticisms claiming that this criterion is not
    enough to establish whether a machine can think—has given rise to a challenge
    over the last decades that has led to the creation of software simulating human
    language in a way that is more and more accurate.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图灵的游戏——尽管有众多批评认为这一标准不足以确定机器是否能够思考——在过去几十年中引发了一场挑战，导致了以越来越准确的方式模拟人类语言的软件的创建。
- en: 'In 1990, a competition called the **Loebner prize** was established, based
    on the Turing test, to reward the computer whose behavior is most similar to human
    thought. This competition takes place every year. Here''s the official website
    of the competition: [http://www.aisb.org.uk/events/loebner-prize](http://www.aisb.org.uk/events/loebner-prize).'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 1990年，一项名为**洛布纳奖**的竞赛成立，基于图灵测试，以奖励行为最接近人类思维的计算机。这项竞赛每年举行一次。以下是竞赛的官方网站：[http://www.aisb.org.uk/events/loebner-prize](http://www.aisb.org.uk/events/loebner-prize)。
- en: Eliza
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Eliza
- en: 'In 1966, Joseph Weizenbaum created Eliza, a program that set out to create
    a parody of a conversation between a therapist and his patient in their initial
    phase. In it, an exchange of simple questions that do not require great emotional
    depth takes place. In the following screenshot, a simple Eliza chatbot is shown:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 1966年，约瑟夫·魏岑鲍姆创建了Eliza程序，旨在模仿治疗师和患者在他们初始阶段之间的对话。在程序中，发生了一系列简单的问题交换，这些问题不需要深厚的情感深度。以下截图展示了一个简单的Eliza聊天机器人：
- en: '![](img/905b8ec8-7c09-4711-8368-6deea5989245.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/905b8ec8-7c09-4711-8368-6deea5989245.png)'
- en: Eliza relies on the use of regular expressions to transform user input into
    its outputs, so as to give continuity to the conversation as well as apparent
    consistency. At other times, it produces no contextual observations but stuff
    that is perfectly in line with the attitude of a psychotherapist, such as *very
    interesting*, *please*, *go on*, or c*an you elaborate on that?*
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Eliza依赖于使用正则表达式将用户输入转换为输出，以便使对话保持连续性以及明显的连贯性。在其他时候，它不会产生任何上下文观察，而是产生与心理治疗师态度完全一致的内容，例如*非常有趣*、*请*、*继续*或*c*an
    you elaborate on that?*
- en: Parry
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 帕里
- en: Remaining in the medical field, Parry simulated the behavior of a person with
    paranoid schizophrenia. It was developed in 1972 by psychiatrist Kenneth Colby
    as a practice tool for his students before they could deal with real patients.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 帕里继续留在医疗领域，模拟了患有偏执型精神分裂症的人的行为。它于1972年由精神病学家肯尼斯·科比开发，作为他在处理真实患者之前为学生提供的一种实践工具。
- en: In a slight variation of the Turing test, psychiatrists were asked to read Parry's
    transcripts and those of real patients to distinguish which of the two they came
    from. It was an incredible result for that time; the psychiatrists managed to
    identify a difference in the behavior only 48 percent of the time.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在图灵测试的一个轻微变化中，精神科医生被要求阅读Parry的记录和真实患者的记录，以区分这两者来自哪里。这在当时是一个令人难以置信的结果；精神科医生只成功地在48%的时间里识别出行为上的差异。
- en: 'In January 1973, as a demonstration during an international computer conference,
    computer science pioneer Vint Cerf decided to take bots to their logical conclusion.
    Using ARPANET, he set up a conversation between Eliza and Parry. It was a bicoastal
    meeting of the computer minds; Eliza was based at MIT and Parry at Stanford. The
    following is a brief excerpt of the conversation between the two bots:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 1973年1月，在国际计算机会议期间，计算机科学先驱Vint Cerf决定将机器人带到它们的逻辑结论。使用ARPANET，他设置了Eliza和Parry之间的对话。这是一次计算机思维的跨海岸会议；Eliza位于麻省理工学院，Parry位于斯坦福大学。以下是从两个机器人之间的对话中摘录的一段简短对话：
- en: 'Eliza: *Good Evening. Tell me your problems. Please terminate input with a
    period or a question mark.*'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*晚上好。告诉我你的问题。请用句号或问号结束输入。*
- en: 'Parry: *People get on my nerves sometimes.*'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*有时候人们让我感到烦躁。*
- en: 'Eliza: *I am not sure I understand you fully.*'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*我不确定我是否完全理解你。*
- en: 'Parry: *You should pay more attention.*'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*你应该更加注意。*
- en: 'Eliza: *Suppose you should pay more attention.*'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*也许你应该更加注意。*
- en: 'Parry: *You''re entitled to your own opinion.*'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*你有权持有自己的观点。*
- en: 'Eliza: *What makes you think I am entitled to my own opinion?*'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*是什么让你认为我有权持有自己的观点？*
- en: 'Parry: *It bothers me just to be around people in general.*'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*仅仅和普通人在一起就让我感到烦恼。*
- en: 'Eliza: *Please go on.*'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*请继续说。*
- en: 'Parry: *I went to the track at Bay Meadows a while back.*'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*我之前去过Bay Meadows的跑道。*
- en: 'Eliza: *What does that suggest to you?*'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eliza：*这对你有什么启示？*
- en: 'Parry: *I went to the races.*'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parry：*我去过赛马。*
- en: Jabberwacky
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Jabberwacky
- en: Jabberwacky was created by programmer Rollo Carpenter in 1988\. The aim of the
    bot was to pass the Turing test. Jabberwacky was able to simulate a human voice
    in a humorous way. Currently, developments are still ongoing on the bot, aimed
    at implementing the system on robots or talking pets, based on sound learning.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: Jabberwacky是由程序员Rollo Carpenter于1988年创造的。这个机器人的目标是通过图灵测试。Jabberwacky能够以幽默的方式模拟人类的声音。目前，该机器人的开发仍在继续，旨在将系统应用于机器人或会说话的宠物，基于声音学习。
- en: This is a bot based on machine learning; in fact, to interact with us, it uses
    only the material learned and borrows some of our intelligence while increasing
    its knowledge. Without hardcoded rules, it is based entirely on the principles
    of feedback.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个基于机器学习的机器人；实际上，为了与我们互动，它只使用学到的材料，并借用我们的一些智慧，同时增加它的知识。没有硬编码的规则，它完全基于反馈的原则。
- en: Cleverbot is a variant of Jabberwacky released in 1997 that achieved great results;
    in 2011, it participated in a Turing test at IIT Guwahati in India and was considered
    a human at a 59.3% probability.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Cleverbot是Jabberwacky在1997年发布的一个变体，取得了显著成果；2011年，它参加了印度IIT Guwahati的图灵测试，有59.3%的概率被认为是人类。
- en: Dr. Sbaitso
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dr. Sbaitso
- en: 'Dr. Sbaitso was also designed to simulate the behavior of a psychologist able
    to solve emotional problems of users, and was usable by personal computers with
    the MS-DOS operating system. It was developed by Creative Labs in 1992, with the
    aim of demonstrating the ability of sound cards to generate a synthesized voice.
    The following screenshot shows the MS-DOS window with the welcome message in Dr.
    Sbaitso:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Dr. Sbaitso也被设计成模拟能够解决用户情感问题的心理学家的行为，并且可以在使用MS-DOS操作系统的个人电脑上使用。它由Creative Labs于1992年开发，旨在展示声卡生成合成声音的能力。以下截图显示了Dr.
    Sbaitso中的欢迎信息所在的MS-DOS窗口：
- en: '![](img/ea6fa792-4b3d-4971-a778-4b9f2a9c787d.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ea6fa792-4b3d-4971-a778-4b9f2a9c787d.png)'
- en: Most of the questions were `WHY DO YOU FEEL THAT WAY?`. Thus avoiding more complicated
    interactions. When he received a sentence he could not understand, he usually
    answered `THAT'S NOT MY PROBLEM`.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 大部分问题是`WHY DO YOU FEEL THAT WAY?`。因此避免了更复杂的互动。当他收到他无法理解的句子时，他通常会回答`THAT'S NOT
    MY PROBLEM`。
- en: ALICE
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ALICE
- en: '**Artificial Linguistic Internet Computer Entity** (**ALICE**) was created
    as open source software based on **Natural Language Processing** (**NLP**). It
    was designed with the **Artificial Intelligence Markup Language** (**AIML**) by
    scientist Richard S. Wallace in 1995\. Alice''s interpretation system was based
    on a minimal approach. The meaning of a sentence was elaborated through specific
    keywords or terms (roots), avoiding in-depth and complex analyzes. Alice won the
    Loebner prize three times: in 2000, 2001, and 2004.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**人工语言互联网计算机实体** (**ALICE**) 是基于 **自然语言处理** (**NLP**) 的开源软件，由科学家理查德·S·华莱士于
    1995 年设计。Alice 的解释系统基于最小化方法。句子的意义通过特定的关键词或术语（根）来阐述，避免了深入和复杂的分析。Alice 三次赢得了 Loebner
    奖：2000 年、2001 年和 2004 年。'
- en: SmarterChild
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SmarterChild
- en: SmarterChild was a very successful chatbot and was available on AOL instant
    messenger and MSN messenger. Developed by ActiveBuddy Inc. in 2001, it was used
    by over 30 million users. From the rapid success of SmarterChild are derived marketing-oriented
    bots for Radiohead, Austin Powers, Intel, Keebler, Sporting News, and others.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: SmarterChild 是一个非常成功的聊天机器人，可在 AOL 即时消息和 MSN 即时消息上使用。由 ActiveBuddy Inc. 于 2001
    年开发，被超过 3000 万用户使用。从 SmarterChild 的快速成功中衍生出了面向市场营销的机器人，如 Radiohead、Austin Powers、Intel、Keebler、体育新闻等。
- en: IBM Watson
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IBM Watson
- en: Watson is an AI system developed by IBM in 2006, able to answer questions expressed
    in natural language. In the beginning, Watson was created to compete for an American
    television quiz called **Jeopardy!** At the first participation, however, it managed
    to answer only 35% of the questions. Following several improvements by an IBM
    team, Watson tried again in 2011, and this time it managed to defeat the human
    champions of the quiz.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Watson 是 IBM 在 2006 年开发的人工智能系统，能够回答以自然语言表达的问题。最初，Watson 是为了参加一档名为 **Jeopardy!**
    的美国电视智力竞赛而创建的。然而，在第一次参赛时，它只能回答 35% 的问题。在 IBM 团队进行多次改进后，Watson 于 2011 年再次尝试，这次它成功地击败了智力竞赛的人类冠军。
- en: During the game, Watson worked without being connected to the internet, exploiting
    an occupation of 4 terabytes of disk space. Later, it was used in many other completely
    different contexts, such as managing lung cancer treatment decisions at the Memorial
    Sloan-Kettering Cancer Center.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在游戏中，Watson 在没有连接到互联网的情况下工作，利用了 4 个 terabytes 的磁盘空间。后来，它被用于许多其他完全不同的环境中，例如在纪念斯隆-凯特琳癌症中心管理肺癌治疗决策。
- en: Building a bot
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建机器人
- en: In the first chatbots, quite simple algorithms were used to analyze the input
    message and return an output response; these algorithms were intended to simulate
    the computer's understanding of what was proposed in the input by providing consistent
    responses as output. As time passed and technology evolved, more and more sophisticated
    AI methods were created, with which the chatbots were able to establish conversations
    closer and closer to real ones between humans. From what basics is it necessary
    to start in order to correctly design chatbots? Fundamental topics in the bot
    building are intents, entities, and context. In the following section, we will
    analyze them to understand how to use them efficiently.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在早期的聊天机器人中，使用了相当简单的算法来分析输入消息并返回输出响应；这些算法旨在通过提供一致的输出响应来模拟计算机对输入中提出的内容的理解。随着时间的推移和技术的发展，越来越多的复杂人工智能方法被创造出来，使得聊天机器人能够建立越来越接近人类真实对话的对话。为了正确设计聊天机器人，从哪些基本点开始是必要的？机器人构建的基本主题包括意图、实体和上下文。在下一节中，我们将分析它们，以了解如何有效地使用它们。
- en: Intents
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 意图
- en: The intent of a user is their purpose, the ultimate goal. Examples are ordering
    something, wanting to activate something on the user window, looking for shows,
    or simply saying goodbye. A chatbot should be able to perform some actions based
    on the intent it detects from the user's message.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 用户的意图是他们的目的，最终目标。例如，订购某物、想要激活用户窗口上的某物、寻找节目，或者只是说再见。聊天机器人应该能够根据从用户消息中检测到的意图执行一些操作。
- en: 'Suppose we want to create a chatbot for a store that sells IT-related products.
    As a preliminary procedure, it is necessary to consider what actions the chatbot
    will be able to execute once requested by the user. For example, the chatbot will
    need to respond to the user with appropriate information when a user asks to see
    the products the store sells by supplying it: **I want to buy a mouse**. Similarly,
    when the user sends a message, such as **Looking for a store in Rome**, the chatbot
    should be able to locate all the stores near that particular location. To perform
    each of these actions, the chatbot must be able to distinguish between the two
    intentions of the user: searching for a product or a point of sale. In the following
    diagram, two possible intents are expressed by the user:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们想要创建一个为销售IT相关产品的商店设计的聊天机器人。作为一个初步程序，有必要考虑聊天机器人在被用户请求后能够执行哪些操作。例如，当用户请求查看商店销售的产品时，聊天机器人需要向用户提供适当的信息，比如：“我想买一个鼠标”。同样，当用户发送消息，如“在罗马找一个商店”时，聊天机器人应该能够定位到该特定位置附近的商店。为了执行这些操作中的每一个，聊天机器人必须能够区分用户的两种意图：搜索产品或销售点。在以下图中，用户表达了两种可能的意图：
- en: '![](img/50d16893-9572-4706-9ef8-daccd32bb800.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/50d16893-9572-4706-9ef8-daccd32bb800.png)'
- en: Detecting intents from the user's message is a very common problem in the field
    of machine learning. This is the technique called **text classification**, in
    which the objective of the program is to classify documents/phrases in several
    classes that represent the intent of the user. Understanding what the user's request
    is is the intelligent part of the chatbot because there are many ways in which
    a request can be expressed in natural language. The chatbot will try to interpret
    the user's request by identifying the closest intent. Naturally, the association
    will not always be precise; in fact, a ranking of possible interpretations is
    returned. But from this point of view the answers can be improved by providing
    more alternative examples of the same requests.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 从用户消息中检测意图是机器学习领域的一个非常普遍的问题。这是称为**文本分类**的技术，其中程序的目标是将文档/短语分类到几个类别中，这些类别代表了用户的意图。理解用户的请求是什么是聊天机器人的智能部分，因为自然语言中表达请求的方式有很多。聊天机器人将通过识别最接近的意图来尝试解释用户的请求。当然，这种关联并不总是精确的；事实上，会返回可能的解释的排名。但从这个角度来看，可以通过提供更多相同请求的替代示例来改进答案。
- en: Entities
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实体
- en: 'Entities are the relevant subjects contained in the message coming from the
    user, for example, an object, a color, or a date. If the intent is to activate
    something on a web page, the user may also indicate what, like a button or a window.
    Entities are therefore the keywords that the chatbot can recognize. Thanks to
    these entities, the chatbot is able to identify the topic of the conversation,
    thus providing targeted information as output. In the following diagram, two possible
    entities are identified by the chatbot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 实体是用户消息中包含的相关主题，例如一个物体、一种颜色或一个日期。如果意图是在网页上激活某个功能，用户也可能指明是什么，比如一个按钮或一个窗口。因此，实体是聊天机器人可以识别的关键词。多亏了这些实体，聊天机器人能够识别对话的主题，从而提供有针对性的信息作为输出。在以下图中，聊天机器人识别出了两个可能的实体：
- en: '![](img/4a401ba2-673a-4e98-a9a5-8e6740dc162e.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4a401ba2-673a-4e98-a9a5-8e6740dc162e.png)'
- en: 'Suppose we had the following message as an input: `I want to buy a monitor`.
    It is clear that the user wants to buy an IT product, but if the bot is not able
    to identify the type of product that the user is trying to buy, the information
    returned will be about all types of IT products, many of which are not of interest
    to the user. If the chatbot is able to detect that the user is trying to buy a
    monitor, then it will only return information on this type of IT product, thus
    reducing the options available. And this is to the user''s benefit.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有一个以下的消息作为输入：`我想买一个显示器`。很明显，用户想要购买一个IT产品，但如果聊天机器人无法识别用户试图购买的产品类型，返回的信息将关于所有类型的IT产品，其中许多对用户来说并不感兴趣。如果聊天机器人能够检测到用户试图购买显示器，那么它将只返回关于这种IT产品的信息，从而减少可用的选项。这对用户是有益的。
- en: Context
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 上下文
- en: Chatbots were created with the aim of simplifying and automating processes.
    So a chatbot fails if it complicates a process previously managed by humans in
    a simple way. For example, suppose you search for weather information. If you
    use the phone to request information, the service provider may use your phone
    number to look up your account information as your address. The same procedure
    should apply to chatbots. The context of a chatbot is extremely important if you
    aim to create a robot that is more or less efficient than using the phone.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人是为了简化并自动化流程而创建的。因此，如果一个聊天机器人使人类以前简单管理的过程变得复杂，那么它就失败了。例如，假设你搜索天气信息。如果你用手机请求信息，服务提供商可能会使用你的电话号码查找你的账户信息，就像你的地址一样。同样的程序应该适用于聊天机器人。如果你旨在创建一个与使用手机相当或更有效率或更无效的机器人，那么聊天机器人的上下文就极其重要。
- en: When we talk about context in terms of chatbots, we refer to the fact that the
    bot is able to identify what it already knows and able to look only for the unknown
    information it needs to provide an appropriate solution. In this case, it has
    to provide information on weather in that area in the coming days. If this weather
    information chatbot uses the context appropriately, then it should not ask for
    information it already knows. The use of information already held by the bot,
    thanks to the maintenance of the context, makes the procedure for returning information
    much faster.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们谈论聊天机器人的上下文时，我们指的是机器人能够识别它已经知道的信息，并且能够只查找它需要提供适当解决方案的未知信息。在这种情况下，它必须提供未来几天该地区的天气信息。如果这个天气信息聊天机器人适当地使用上下文，那么它就不应该询问它已经知道的信息。由于上下文的维护，使用机器人已经持有的信息，使得返回信息的程序变得更快。
- en: Once the intents and entities are put into the system, the logical flow of the
    conversation is created, because what distinguishes a conversation from simple
    **Frequently Asked Questions** (**FAQs**) is the context. Thanks to the context,
    it is possible to connect the user's current input to the previously mentioned
    one.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦意图和实体被放入系统中，对话的逻辑流程就创建了，因为区分对话和简单的**常见问题解答**（**FAQs**）的是上下文。多亏了上下文，我们才能将用户的当前输入与之前提到的输入联系起来。
- en: The context is passed back and forth between the chatbot and the user. It is
    the responsibility of the chatbot to maintain the context from one shift to the
    next of the conversation. A context includes a unique identifier for each conversation
    with a user, as well as a counter that is incremented at each turn of the conversation.
    If we do not preserve the context, every round of input seems to be the beginning
    of a new conversation.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 上下文在聊天机器人和用户之间来回传递。维护对话从一回合到下一回合的上下文是聊天机器人的责任。上下文包括与每个用户对话的唯一标识符，以及每次对话回合增加的计数器。如果我们不保留上下文，每一轮输入似乎都是一次新对话的开始。
- en: Chatbots
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聊天机器人
- en: We do not have to start from scratch to design a chatbot. In fact, we can use
    the experience gained over time by programmers in the development of applications
    that we have analyzed in previous sections. All the information collected represents
    a know-how from which we can draw useful cues for our applications.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不需要从头开始设计聊天机器人。事实上，我们可以利用程序员在开发我们之前章节中分析的应用程序过程中积累的经验。收集到的所有信息代表了一种知识，我们可以从中提取对我们应用程序有用的线索。
- en: Essential requirements
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 必要要求
- en: 'To start, we can take a look at the requirements that a great chatbot must
    fulfill to ensure the success of the service it provides. The following list mentions
    some key elements of chatbot design that we must keep in mind:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们可以看看一个优秀的聊天机器人必须满足哪些要求，以确保它提供服务的成功。以下列表提到了我们必须记住的聊天机器人设计的一些关键要素：
- en: '**Guarantee minimum manual effort by the user**: This represents the starting
    point in the design of a chatbot. For the success of the service, it is essential
    that the user is accompanied in their choices by minimizing manual intervention.
    This is achieved by drastically reducing the number of touches, keystrokes, or
    mouse clicks required to help the bot determine the best solution to the problem.
    To do this, you need to ensure that most of the options are provided by the same
    chatbot, with the user simply having to select the right option. In this way,
    considerable time savings are achieved in the interaction between user and chatbot.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保证用户最小手动努力**：这是聊天机器人设计中的起点。为了服务的成功，必须通过最小化手动干预来陪伴用户的选择。这是通过大幅减少帮助机器人确定最佳解决方案所需的触摸、按键或鼠标点击次数来实现的。为此，你需要确保大多数选项都由同一个聊天机器人提供，用户只需选择正确的选项。这样，在用户与聊天机器人的交互中可以节省大量时间。'
- en: '**Predict the right options**: To make sure that the system displays only the
    options related to that context, the right options must be provided through a
    series of choices. To achieve this, the system must be able to identify the user''s
    needs. User needs must be identified with the least number of questions and manual
    efforts by users.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预测正确选项**：为了确保系统只显示与该上下文相关的选项，必须通过一系列选择提供正确的选项。为了实现这一点，系统必须能够识别用户的需求。用户需求必须通过最少的提问和用户的手动努力来识别。'
- en: '**Customization of the chatbot**: This is the possibility to construct a different
    user chatbot interaction depending on the characteristics of the user of the service.
    For example, it is possible to make the system memorize user profiles, previous
    interactions, the interactions of other users in the system, the current context
    and environmental know-how. Each of these attributes must be understood together
    with others to truly understand users and what they may need now.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**聊天机器人的定制**：这是根据服务用户的特点构建不同用户聊天机器人交互的可能性。例如，系统可以记住用户档案、之前的交互、系统中其他用户的交互、当前上下文和环境知识。理解用户及其当前可能需要什么，必须将这些属性与其他属性一起理解。'
- en: The importance of the text
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 文本的重要性
- en: 'Before any text interpretation strategies can be applied, it is necessary to
    carry out a series of elaborations. In particular, the following phases are important:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在应用任何文本解释策略之前，必须进行一系列的加工。特别是，以下阶段很重要：
- en: '**Text cleaning**: The text is cleaned of all the elements that can alter subsequent
    analyzes (for example, spaces at the beginning and at the end of the message)'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本清理**：文本被清理掉所有可能改变后续分析结果的因素（例如，消息开头和结尾的空格）'
- en: '**Verification of the characters of the text**: It checks whether the text
    contains characters equivalent to others that could invalidate subsequent analysis'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**验证文本字符**：检查文本是否包含等同于其他可能使后续分析无效的字符'
- en: '**Text normalization**: Transformation of uppercase characters into lowercase
    is done so that the same word written with a capital letter instead of lowercase
    is interpreted in the same way (this approach is not always optimal since capitalization
    can sometimes have a discriminatory value)'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本规范化**：将大写字母转换为小写字母，这样用大写字母而不是小写字母写的同一个单词将被以相同的方式解释（这种方法并不总是最优的，因为有时大写字母可能具有歧视性价值）'
- en: Word transposition
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 单词转换
- en: This technique has been widely used by chatbots of the Eliza type. It consists
    of reformulating the input message to generate a corresponding output. For example,
    if the user writes *you are a chatbot* the answer of the chatbot will be *so you
    think I'm a chatbot*.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术已被Eliza类型的聊天机器人广泛使用。它包括重新表述输入消息以生成相应的输出。例如，如果用户写道 *you are a chatbot*，聊天机器人的回答将是
    *so you think I'm a chatbot*。
- en: The substitutions that are made using this technique concern mainly personal
    pronouns (you → me) and verbs (you are → I am), therefore transforming all forms
    in the first person into forms in the second person and vice versa.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种技术进行的替换主要涉及人称代词（you → me）和动词（you are → I am），因此将所有第一人称形式转换为第二人称形式，反之亦然。
- en: Checking a value against a pattern
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查值与模式的一致性
- en: Anyone who has ever used word processing programs has had to face the problem
    of searching for a text string within the period. Perhaps without knowing it,
    we came across the pattern matching problem. Pattern matching is a procedure in
    which you check whether a token sequence has a certain pattern, that is, a combination
    of characters that respects a certain pattern.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 任何使用过文字处理程序的人都必须面对在括号内搜索文本字符串的问题。也许我们并不知道，我们遇到了模式匹配问题。模式匹配是一种检查标记序列是否具有某种模式的过程，即一组遵循特定模式的字符。
- en: A lexical token, or simply token, is a string with an assigned and thus identified
    meaning. It is structured as a pair consisting of a token name and an optional
    token value. The token name is a category of lexical unit.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 词汇标记，或简称为标记，是一个具有分配和因此识别的意义的字符串。它由一个标记名称和一个可选的标记值组成的对构成。标记名称是词汇单元的类别。
- en: As for the interpretation of the inputs by a chatbot, pattern matching can be
    useful for recognizing certain message sets. For example, thanks to pattern matching,
    you can answer *Hello!* to all the messages that contain the word *hello* or *hi*;
    or you can recognize that a message is of question type by checking whether the
    last token is *?*.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 至于聊天机器人对输入的解释，模式匹配对于识别某些消息集是有用的。例如，通过模式匹配，你可以对包含单词*hello*或*hi*的所有消息回答*Hello!*；或者你可以通过检查最后一个标记是否为*?*来识别消息是问题类型。
- en: A very useful tool for pattern recognition is regular expression, which offers
    a notation system for identifying sets of strings.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 正则表达式是模式识别的一个非常有用的工具，它提供了一种识别字符串集合的符号系统。
- en: Maintaining context
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 维护上下文
- en: Storing the context is a strategy used to keep track of what has been said before,
    and to be able to reuse it for the conversation. This becomes necessary when the
    response of the chatbot cannot be based only on the last message sent by the user
    but must draw information from some previous message.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 存储上下文是一种策略，用于跟踪之前说过的话，并能够将其用于对话。当聊天机器人的响应不能仅基于用户发送的最后一条消息，而必须从某些之前的消息中获取信息时，这变得必要。
- en: 'To better understand the usefulness of context management, let''s take an example:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解上下文管理的作用，让我们举一个例子：
- en: 'User: *My name is Giuseppe.*'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户：*我的名字是Giuseppe.*
- en: 'Chatbot: *Okay Giuseppe.*'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聊天机器人：*好的，Giuseppe。*
- en: 'User: *What is my name?*'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户：*我的名字是什么？*
- en: 'Chatbot: *You told me before calling you Giuseppe.*'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聊天机器人：*你之前在叫你Giuseppe之前告诉过我。*
- en: 'If the user has not yet declared his name, the chatbot''s answer will have
    to be something like:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户尚未声明他的名字，聊天机器人的回答将不得不类似于：
- en: 'User: *What is my name?*'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户：*我的名字是什么？*
- en: 'Chatbot: *You still have not told me your name.*'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 聊天机器人：*你仍然没有告诉我你的名字。*
- en: It is therefore easy to understand how to manage the context to formulate an
    answer. This is extremely important in order to give the chatbot a much less mechanical
    and more human appearance.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，理解如何管理上下文以形成答案是很简单的。这对于使聊天机器人看起来不那么机械而更有人性化至关重要。
- en: Having memory of previous messages is also useful for detecting when the user
    sends a message repeatedly, or it can prevent the same chatbot from sending the
    same message by checking the value of the last message before choosing the next
    one.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 记住之前的消息对于检测用户重复发送消息是有用的，或者它可以通过在选择下一个之前检查最后一条消息的值来防止相同的聊天机器人发送相同的消息。
- en: Chatbots architecture
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聊天机器人架构
- en: The main module of a chatbot is the dialogue manager. This module controls the
    flow of human-machine interaction. It receives the user's request as input and
    decides what the system's response should be. It will memorize the dialogue context
    in some form, for example, through pairs of key values, to manage the conversation
    on several steps between the user and the system.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 聊天机器人的主要模块是对话管理器。该模块控制人机交互的流程。它接收用户的请求作为输入，并决定系统的响应应该是什么。它将以某种形式记住对话上下文，例如通过键值对，来管理用户和系统之间多步骤的对话。
- en: For the dialogue manager to be able to choose the right answer for the request
    made by the user, it is necessary to understand the user's intention. In the most
    advanced chatbots, which are able to understand human language, the user's expressions
    will be translated into a semantic representation consisting of user intent and
    entity. This operation will be carried out by a module of natural language comprehension.
    This module must be previously trained to understand a series of user intent previously
    identified by the developer. This module is based on the **natural language understanding**
    (**NLU**) component.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使对话管理器能够为用户提出的请求选择正确的答案，有必要理解用户意图。在最能理解人类语言的先进聊天机器人中，用户的表达将被转换为包含用户意图和实体的语义表示。这项操作将由自然语言理解模块执行。该模块必须事先经过训练，以理解开发者先前识别的一系列用户意图。该模块基于**自然语言理解（NLU**）组件。
- en: In the case of voice input, the system must also be equipped with a voice recognition
    module that can translate the input into text before passing it to the natural
    language comprehension module. At the end of the operation, the system response
    (output) must first be treated with a speech synthesizer module that converts
    the textual response of the system into speech.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在语音输入的情况下，系统还必须配备一个可以将输入转换为文本的语音识别模块，然后再将其传递到自然语言理解模块。在操作结束时，系统响应（输出）必须首先通过语音合成器模块处理，该模块将系统的文本响应转换为语音。
- en: 'When user input is understood, the dialogue manager takes actions. To perform
    the action or generate the response, the dialogue manager retrieves the required
    information from the data sources. After this, a response message is generated
    by the response generation component and sent back to the user. The following
    diagram is a chatbot architecture scheme:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户输入被理解时，对话管理器会采取行动。为了执行操作或生成响应，对话管理器从数据源检索所需信息。之后，响应生成组件生成响应消息并发送回用户。以下是一个聊天机器人架构方案图：
- en: '![](img/451904ec-d703-4bbb-84f9-81a7f5f6bae4.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/451904ec-d703-4bbb-84f9-81a7f5f6bae4.png)'
- en: To keep track of the context, the dialogue manager keeps the conversation status
    to know if the request is related to the previous conversation or introduces a
    new topic into the conversation.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟踪上下文，对话管理器保持对话状态，以了解请求是否与之前的对话相关，或者是否将新主题引入对话。
- en: Natural language processing
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自然语言处理
- en: NLP is a field of computational linguistics that deals with the interaction
    between computers and natural languages.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 自然语言处理（NLP）是计算语言学的一个领域，它处理计算机与自然语言之间的交互。
- en: Computational linguistics deals with analysis and processing of natural language
    through the use of computer methodologies. It focuses on the development of descriptive
    formalisms of the functioning of natural language, such that they can be transformed
    into programs that can be executed by computers.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 计算语言学通过计算机方法处理自然语言的分析和处理。它侧重于发展自然语言功能的描述性形式化，以便它们可以被转换成计算机可以执行的程序。
- en: Traditionally, computers require that you interact with them through a programming
    language, so it should be a way of communicating that is precise, unambiguous,
    and highly structured, using a finite number of known commands. On the contrary,
    human language is not precise; it is often ambiguous, and the linguistic structure
    can depend on many different variables, such as dialects and various social contexts.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，计算机要求你通过编程语言与之交互，因此它应该是一种精确、无歧义且高度结构化的通信方式，使用有限数量的已知命令。相反，人类语言并不精确；它通常是模糊的，语言结构可能取决于许多不同的变量，例如方言和各种社会环境。
- en: For this reason, NLP is an extremely important sector, as it studies and tries
    to solve all the difficulties encountered by a computer when it has to interpret
    or analyze human language. The numerous ambiguities of human language make comprehension
    of a human language by an algorithm particularly difficult. To understand a discourse,
    it is necessary to have more extensive knowledge of reality and of the surrounding
    world. Mere knowledge of the meaning of every single word is, in fact, not sufficient
    to correctly interpret the message of the sentence; on the contrary, it can lead
    to contradictory and meaningless communications.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，NLP是一个极其重要的领域，因为它研究和试图解决计算机在解释或分析人类语言时遇到的全部困难。人类语言的众多歧义使得算法理解人类语言特别困难。要理解一个话语，有必要对现实和周围世界有更广泛的知识。实际上，仅仅了解每个单词的含义并不足以正确解释句子的信息；相反，它可能导致矛盾和无意义的交流。
- en: 'The study of natural language takes place by phases performed in a precise
    sequence and characterized by a growing semantic value, as described here:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 自然语言的研究是通过一系列精确顺序的步骤进行的，这些步骤以不断增长的语义价值为特征，如下所述：
- en: Articulate and decode the sounds of a language that allows us to identify sounds
    and letters.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发音并解码一种语言的声音，使我们能够识别声音和字母。
- en: Know the words of a language, their structure (plural/singular), and their organization
    (noun, verb, and adjective). Lexical analysis identifies the lexicons that make
    up the language and find a definition in the dictionary. Morphological analysis
    identifies the plural/singular structure, verbal mode, and verbal time; and it
    assigns to each word its own morphological class, understood as adjective, noun,
    and verb.
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解一种语言中的单词，它们的结构（复数/单数）以及它们的组织（名词、动词和形容词）。词汇分析识别构成该语言的词汇并从词典中找到定义。形态分析识别复数/单数结构、动词方式和动词时间；并为每个单词分配其自身的形态类别，即形容词、名词和动词。
- en: Composition of words in complex constituents (part-of-speech). The syntax identifies
    the parts of the speech as subject, predicate, complement, or groups of words
    with a single meaning such as hot dog, or the nominal and verbal part with derivation
    of the full syntactic tree.
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在复杂成分（词性）中组合单词。句法识别词性作为主语、谓语、补语或具有单一意义的单词组，如热狗，或具有完整句法树派生的名词和动词部分。
- en: Assignment of meanings to simple and complex linguistic expressions. Semantics
    tries to identify the meaning of words according to the context.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将意义赋予简单和复杂的语言表达。语义学试图根据上下文识别单词的意义。
- en: Use of sentences in contexts, situations and ways appropriate for communication
    purposes. The pragmatist observes how and for what purposes the language is used,
    distinguishing whether it is a question of narration, dialogue, metaphor, and
    so on.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在适合交流目的的语境、情境和方式中使用句子。实用主义者观察语言是如何以及为什么目的被使用的，区分它是叙述、对话、隐喻等问题。
- en: 'The results obtained are then applied to the two main categories of NLP:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将获得的结果应用于NLP的两个主要类别：
- en: '**Natural Language Generation** (**NLG**), which deals with the conversion
    of information from a database to a human-readable language'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自然语言生成**（**NLG**），它涉及将数据库中的信息转换为人类可读语言'
- en: NLU, which transforms a human language into forms of representation that are
    easily manipulated by programs
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NLU，它将人类语言转换为程序易于操作的形式
- en: 'NLP faces many problems:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: NLP面临许多问题：
- en: '**Speech segmentation**: Conversion of a vocal track into characters and words
    with complete meaning'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语音分割**：将语音轨道转换为具有完整意义的字符和单词'
- en: '**Text segmentation**: Recognition of individual words in texts written with
    ideograms instead of letters (Chinese, Japanese, Thai, and so on)'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本分割**：识别用汉字而不是字母书写的文本中的单个单词（如中文、日语、泰语等）'
- en: '**Part-of-speech tagging**: Identification of the grammatical elements of a
    sentence such as noun, adjective, verb, pronoun'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**词性标注**：识别句子中的语法元素，如名词、形容词、动词、代词'
- en: '**Word sense disambiguation**: Deduction from the context of the meaning of
    a term normally used to indicate multiple concepts'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**词义消歧**：从上下文中推断出通常用于表示多个概念的术语的意义'
- en: '**Imperfect or irregular input**: Recognition and correction of any regional
    accents, typos, or errors produced by optical character recognition tools'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**不完整或不规则输入**：识别和纠正任何地方口音、打字错误或由光学字符识别工具产生的错误'
- en: 'The difficulties of elaboration in the linguistic field can also be explained
    by considering the most evident characteristics of natural language itself:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 语言领域阐述的困难也可以通过考虑自然语言本身最明显的特征来解释：
- en: Flexibility, because it uses different ways to affirm the same fact
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 灵活性，因为它使用不同的方式来确认同一个事实
- en: Ambiguity, because the same statement can have more than one meaning
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 含糊性，因为同一个陈述可以有多个含义
- en: Dynamism, caused by the continuous creation of new words
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态性，由于新词的不断创造
- en: Precisely because of these particularities, the understanding of natural language
    is often considered an AI-complete problem, that is, a problem whose resolution
    is compared to the equivalent of the creation of an AI. In fact, understanding
    texts requires understanding of the concepts associated with them, and therefore
    it requires extensive knowledge of reality and a great ability to manipulate it.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 正是因为这些特殊性，自然语言的理解通常被认为是一个AI完全问题，即一个其解决方案相当于创建AI本身的问题。实际上，理解文本需要理解与之相关的概念，因此需要广泛的知识和对现实的深刻理解，以及强大的操纵能力。
- en: '**AI-complete** are defined as the most difficult problems; that is, they present
    computational problems equivalent to that of solving the problem of AI itself—making
    computers as intelligent as people. The term AI-complete therefore indicates a
    problem that would not be solved by a simple specific algorithm.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**AI完全**被定义为最困难的问题；也就是说，它们呈现的计算问题等同于解决AI本身的问题——使计算机像人一样智能。因此，AI完全这个术语表明了一个不会通过简单的特定算法解决的问题。'
- en: For people, language comprehension is the result of a mental process that cannot
    be reproduced in a machine; moreover, language is a form of communication and
    interaction between people that reflects the surface of meaning and allows people
    to understand one another. While a computer, however sophisticated its software
    is, is nevertheless based on procedures determined a priori.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 对于人类来说，语言理解是心理过程的结果，这个过程在机器中无法复制；此外，语言是人与人之间沟通和互动的一种形式，它反映了意义的表面，并使人们能够相互理解。然而，无论计算机的软件多么复杂，它仍然基于先验确定的程序。
- en: Natural language understanding
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自然语言理解
- en: NLU consists of reading a text expressed in natural language; determining its
    meaning by attributing a meaning to terms, sentences, and paragraphs present in
    it, and making inferences about these elements in order to elicit their explicit
    or implicit properties. In particular, one of the most salient issues in modeling
    a textual representation is to capture semantic relationships between concepts.
    To solve this task, several methodologies have been proposed in the literature,
    some of which talk of access to external knowledge bases. Others, instead, construct
    semantic distributive spaces, analyzing the content of the text collection without
    making use of prior knowledge.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: NLU包括阅读用自然语言表达的文字；通过赋予其中存在的术语、句子和段落以意义来确定其含义，并通过对这些元素进行推理来揭示它们的显性或隐性属性。特别是，在建模文本表示时最突出的问题之一是捕捉概念之间的语义关系。为了解决这个任务，文献中提出了几种方法，其中一些提到了访问外部知识库。另一些方法则构建语义分布空间，分析文本集合的内容，而不使用先验知识。
- en: Under the NLU definition, there is a wide range of computer applications, ranging
    from simple operations such as short commands given to robots, to complex operations,
    such as full comprehension of texts. In the real world, there is now a widespread
    use of algorithms based on NLU; for example, classification of text for attribution
    of labels in an email does not require a thorough understanding of the text, but
    it needs to deal with many vocabulary items.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在NLU的定义下，计算机应用的范围非常广泛，从简单的操作，如给机器人的简短命令，到复杂的操作，如对文本的全面理解。在现实世界中，现在广泛使用基于NLU的算法；例如，对电子邮件中的文本进行分类以分配标签，不需要对文本有彻底的理解，但它需要处理许多词汇项。
- en: 'The process of disassembling and parsing of text input is very complex, because
    of the occurrence of unknown and unexpected features in the input and the need
    to determine the appropriate syntactic and semantic schemes to apply to it (factors
    that are predetermined) when outputting the language. In the following diagram,
    you can see a flowchart of the NLU process:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 文本输入的拆解和解析过程非常复杂，因为输入中出现了未知和意外的特征，并且在输出语言时需要确定适用于它的适当句法和语义方案（这些因素是预先确定的）。在下面的图中，你可以看到NLU过程的流程图：
- en: '![](img/a5db4d82-8a8a-4980-a170-3e0576b4ab0b.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a5db4d82-8a8a-4980-a170-3e0576b4ab0b.png)'
- en: NLU, helps us to analyze semantic features of input text and extract metadata
    from content, such as categories, concepts, emotion, entities, keywords, metadata,
    relations, and semantic roles. Through NLU, the developer makes a translation
    of text into a machine-readable formal representation, making relevant aspects
    of its content explicit.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: NLU（自然语言理解）帮助我们分析输入文本的语义特征并从内容中提取元数据，例如类别、概念、情感、实体、关键词、元数据、关系和语义角色。通过 NLU，开发者将文本翻译成机器可读的正式表示，使其内容的相关方面明确化。
- en: Google Cloud Dialogflow
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Dialogflow
- en: 'The widespread use of conversational virtual assistance apps, from chatbots
    to IoT devices, capable of interacting with the most natural language possible,
    implies the need to create ever more engaging personal interactions. The challenge
    is twofold: not only that of recognizing and transmitting optimized basic information,
    but also that of involving users and helping them in their objectives. This presupposes
    the ability of the automatic system to adapt, as much as possible, its own language
    to that of the user to whom it is addressed, thanks to the analysis of data and
    the power of machine learning and AI technologies.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 从聊天机器人到物联网设备，广泛使用的对话式虚拟助手应用能够以最自然的方式与人类语言互动，这表明需要创建更多引人入胜的个人交互。挑战是双重的：不仅需要识别和传输优化的基本信息，还需要涉及用户并帮助他们实现目标。这要求自动系统尽可能适应其目标用户的语言，这得益于数据分析和机器学习及人工智能技术的力量。
- en: Dialogflow overview
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dialogflow 概述
- en: Google responds to this challenge with Dialogflow, a platform for creating voice
    and text conversation applications based on machine learning. It supports 14 languages
    ​​and can be integrated with major chat platforms such as Google Assistant, Facebook
    Messenger, Slack, Skype, Telegram, and its own applications through the service
    APIs.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: Google 通过 Dialogflow 应对这一挑战，Dialogflow 是一个基于机器学习的创建语音和文本对话应用的平台。它支持 14 种语言，并且可以通过服务
    API 与主要的聊天平台集成，如 Google Assistant、Facebook Messenger、Slack、Skype、Telegram 以及其自身的应用。
- en: Recently, given the great demand from developers to add business functionality
    to the standard version, Google announced the release of Dialogflow Enterprise
    Edition, available in beta.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，鉴于开发者对在标准版本中添加商业功能的大量需求，Google 宣布推出 Dialogflow 企业版，目前处于测试阶段。
- en: 'The following are some features offered by Dialogflow:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些 Dialogflow 提供的功能：
- en: '**Conversational interactions based on machine learning**: Dialogflow uses
    NLP to create faster conversation experiences and iterate faster. Just give some
    examples of what users may say, and Dialogflow will create a specific model that
    can learn which actions to activate and which data to extract to provide the most
    relevant and accurate answers.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于机器学习的对话交互**：Dialogflow 使用自然语言处理（NLP）来创建更快的对话体验并快速迭代。只需提供一些用户可能说的话的例子，Dialogflow
    就会创建一个特定的模型，该模型可以学习激活哪些动作以及提取哪些数据以提供最相关和最准确的答案。'
- en: '**Create once and deploy everywhere**: Use Dialogflow to create a conversational
    app and deploy it to your website, app, or 32 different platforms, including Google
    Assistant and other popular messaging services. Dialogflow also includes multilingual
    support and multilingual experiences to reach users from all over the world.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一次创建，处处部署**：使用 Dialogflow 创建对话应用，并将其部署到您的网站、应用或包括 Google Assistant 和其他流行消息服务在内的
    32 个不同平台。Dialogflow 还包括多语言支持和多语言体验，以覆盖全球各地的用户。'
- en: '**Advanced fulfillment options**: Fulfillment means the corresponding action
    in response to what the user says, such as processing a food order or activating
    the right answer to the user''s question. For this purpose Dialogflow allows you
    to connect to any web hook whether it is hosted in the public Cloud or locally.
    The Dialogflow integrated code editor allows you to encode, test and implement
    these actions directly in the Dialogflow console.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级满足选项**：满足意味着对用户所说内容的相应动作，例如处理食品订单或激活对用户问题的正确答案。为此，Dialogflow 允许您连接到任何 Webhook，无论它托管在公共云还是本地。Dialogflow
    集成的代码编辑器允许您直接在 Dialogflow 控制台中编码、测试和实施这些动作。'
- en: '**Voice recognition with speech recognition**: Dialogflow enables the conversational
    app to respond to commands or voice conversations. It is available in a single
    API call that combines speech recognition with natural language comprehension.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语音识别与语音识别**：Dialogflow使对话应用能够响应命令或语音对话。它可以通过一个API调用实现，该调用结合了语音识别和自然语言理解。'
- en: In addition to the understanding of natural language, it is also the flexibility
    of Dialogflow that allows developers to go beyond decision structures and features,
    such as deep integration with Cloud functions to write basic serverless scripts
    directly into its interface that distinguishes Dialogflow from some of its competitors.
    Dialogflow also simplifies the connection to other applications, regardless of
    where they are hosted. This is something you need if you want to integrate your
    conversational app with your ordering and shipping systems, for example.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 除了理解自然语言之外，Dialogflow的灵活性也允许开发者超越决策结构和功能，例如与云函数的深度集成，可以直接将其界面中的基本无服务器脚本写入其中，这使得Dialogflow与一些竞争对手区分开来。Dialogflow还简化了与其他应用程序的连接，无论它们托管在哪里。如果你想要将你的对话应用与你的订单和发货系统集成，这将是必需的。
- en: Basics Dialogflow elements
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dialogflow基本元素
- en: Before analyzing in detail a practical case of building a chatbot, it is advisable
    to analyze in detail the basic elements of Dialogflow. We'll now cover the most
    used elements in chatbot building.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在详细分析构建聊天机器人的实际案例之前，建议详细分析Dialogflow的基本元素。我们现在将介绍在聊天机器人构建中最常用的元素。
- en: Agents
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代理
- en: An agent is a program that responds to a specific task. It could be a hostess
    for hotel room reservations. Or it could be a business expert who knows all the
    products and price lists of an online store. Or it could a competent support technician
    for the household appliances we purchased. Or it could be the onboard computer
    of a car.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 代理是一个响应特定任务的程序。它可以是一个负责酒店房间预订的接待员。或者它可能是一个了解所有产品和价格表的在线商店的商业专家。或者它可能是一个为我们购买的家用电器提供合格技术支持的合格技术支持人员。或者它可能是汽车的机载计算机。
- en: What is important is that an agent has a specific purpose and a limited baggage
    of knowledge; we are not interested in playing chess with the bot that makes flight
    bookings, and in any case it would not be able to do so.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是，一个智能代理有一个特定的目的和有限的知识库；我们并不感兴趣与那个负责航班预订的机器人下棋，而且无论如何它也无法做到这一点。
- en: 'With Dialogflow, the creation of an agent is very simple; just go to the initial
    page of the service, click on the CREATE AGENT button, and give it a name, as
    shown in the following screenshot:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Dialogflow，创建代理非常简单；只需访问服务的初始页面，点击创建代理按钮，给它起一个名字，如下面的截图所示：
- en: '![](img/98059904-a3fb-4d62-92b5-75d75fe371ba.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/98059904-a3fb-4d62-92b5-75d75fe371ba.png)'
- en: To access Dialogflow, just use the URL [https://dialogflow.com/](https://dialogflow.com/).
    You can register or use a Google account and log in.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问Dialogflow，只需使用URL [https://dialogflow.com/](https://dialogflow.com/)。你可以注册或使用Google账户并登录。
- en: Intent
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 意图
- en: An intent is what an end user can ask an agent. Booking a hotel room is an intent;
    another intent is the consultation of lunch hours, or the cancellation of a reservation
    that is already made.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 意图是最终用户可以向代理提出的问题。预订酒店房间是一个意图；另一个意图是咨询午餐时间，或者取消已经做出的预订。
- en: Understanding what the user's request is is the intelligent part of the agent
    because there are many ways in which a request can be expressed in natural language,
    that is, what we humans talk about.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 理解用户的请求是什么是代理的智能部分，因为请求可以用自然语言以多种方式表达，即我们人类所谈论的内容。
- en: The agent will try to interpret the user's request by identifying the closest
    intent. Naturally, the association is not always precise; in fact a ranking of
    possible interpretations is returned. But, from this point of view, we can improve
    the answers by providing more alternative examples of the same requests. Also
    it is possible to apply machine learning algorithms in order to learn from the
    previous answers.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 代理将通过识别最接近的意图来尝试解释用户的请求。自然地，这种关联并不总是精确的；事实上，会返回可能的解释的排名。但是，从这个角度来看，我们可以通过提供更多相同请求的替代示例来改进答案。此外，还可以应用机器学习算法来从之前的答案中学习。
- en: Entity
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实体
- en: If an intent matches a request, the entity corresponds to the details. In booking
    a hotel room you need to know the exact date, the people who will stay, or the
    user's requests. From the design point of view of the agent, an entity such as
    hotel room is defined and it contains all the necessary details.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个意图与请求匹配，实体对应于细节。在预订酒店房间时，您需要知道确切的日期、将入住的人或用户的请求。从代理的设计角度来看，像酒店房间这样的实体被定义，并包含所有必要的细节。
- en: Dialogflow has a series of already-created system entities that facilitate the
    management of simpler concepts (for example, dates). The developer can define
    a series of entities (Dev entity) to generalize the behavior of the agent. Finally,
    the end user creates an entity for each request. A Dev entity can have values
    determined by a list, perform a mapping, or be in turn made up of other entities,
    and much more.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: Dialogflow 有一系列已创建的系统实体，这些实体有助于管理更简单的概念（例如，日期）。开发者可以定义一系列实体（开发实体）以概括代理的行为。最后，最终用户为每个请求创建一个实体。开发实体可以具有由列表确定的值、执行映射或由其他实体组成，等等。
- en: Action
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 动作
- en: Until now, we have dealt with interpreting the user's request; now it is a matter
    of answering. In reality, the concept is broader; once we have understood a request,
    we can fulfill it, for example, by booking the room, opening a ticket, or communicating
    with the restaurant. But if what we are making is a chatbot, the answer will probably
    correspond to the action.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们处理的是对用户请求的解释；现在则是回答的问题。实际上，这个概念更为广泛；一旦我们理解了一个请求，我们就可以满足它，例如，预订房间、开票或与餐厅沟通。但如果我们在制作聊天机器人，答案可能将对应于动作。
- en: An action corresponds to the step your application will take when a specific
    intent has been triggered by a user's input. Both the action name and its parameters
    are defined in the action section of an intent.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 一个动作对应于当用户的输入触发特定意图时，应用程序将采取的步骤。动作的名称及其参数都在意图的动作部分定义。
- en: Context
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 上下文
- en: 'What time does the guest arrive at the hotel? What did you eat? These are meaningless
    phrases without a context but become comprehensible in the context of a broader
    dialogue; this is what a context is for. The syntax for collecting a parameter
    from the context is very simple:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 客人何时到达酒店？你吃了什么？这些短语在没有上下文的情况下是没有意义的，但在更广泛的对话上下文中变得可以理解；这就是上下文的作用。从上下文中收集参数的语法非常简单：
- en: '[PRE0]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: With Dialogflow, a context is maintained for 10 minutes or five requests.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Dialogflow，上下文保持时间为 10 分钟或五次请求。
- en: Building a chatbot with Dialogflow
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Dialogflow 构建聊天机器人
- en: After analyzing the main components of Dialogflow, it is time to focus on a
    practical application. In fact, we will create a simple chatbot that will help
    users to retrieve weather information about the most beautiful city in the world.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在分析了 Dialogflow 的主要组件之后，现在是时候关注实际应用了。实际上，我们将创建一个简单的聊天机器人，帮助用户检索关于世界上最美丽城市的天气信息。
- en: The first thing to do is to create the agent, that is, the project containing
    intents, entities, and answers that you want to deliver to the user. The intent
    is the mechanisms that collect what the user is requesting (using the entities)
    and direct the agent to respond accordingly. For simple answers that do not include
    information collected outside the conversation, you can define the answers directly
    in the intent. You can perform more advanced responses using your own logic and
    the web hooks for implementation.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 首先要做的是创建代理，即包含您想要向用户提供的意图、实体和答案的项目。意图是收集用户请求（使用实体）并指导代理相应响应的机制。对于不包含对话外收集信息的简单答案，您可以直接在意图中定义答案。您可以使用自己的逻辑和
    Webhook 来执行更复杂的响应。
- en: The web hook is the URL to be invoked that hosts the code that implements the
    actions to be performed. Unlike other environments, Dialogflow also allows you
    to use the HTTP protocol (and not just the HTTPS protocol).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: Webhook 是调用执行要执行的动作的代码的 URL。与其它环境不同，Dialogflow 还允许您使用 HTTP 协议（而不仅仅是 HTTPS 协议）。
- en: Agent creation
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代理创建
- en: 'To create an agent, perform the following steps:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建代理，请执行以下步骤：
- en: If you don't have a Dialogflow account, sign up. If you have an account, log
    in.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您还没有 Dialogflow 账户，请注册。如果您已有账户，请登录。
- en: 'Click on Create Agent in the left navigation and fill in the fields. The following
    window is opened:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧导航中的“创建代理”并填写字段。以下窗口将被打开：
- en: '![](img/0494622c-3864-42b9-a9ab-c93b2fc13b01.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0494622c-3864-42b9-a9ab-c93b2fc13b01.png)'
- en: 'In this window, we will have to set some parameters:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在此窗口中，我们需要设置一些参数：
- en: The name of the agent.
  id: totrans-189
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理的名称。
- en: Primary language for your agent.
  id: totrans-190
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理的主要语言。
- en: Time zone setting. Date and time are resolved using this time zone.
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时区设置。日期和时间使用此时区进行解析。
- en: Google project. This enables Cloud functions, actions on Google, and permissions
    management.
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google项目。这使Cloud functions、Google动作和权限管理成为可能。
- en: A series of agents (prebuilt agents) are already available for some types of
    requests that can be customized and enriched for your needs. The number of agents
    available depends on the language; more than 30 different agents are available
    in English.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 已有一系列代理（预构建代理）可用于某些类型的请求，可以根据您的需求进行定制和丰富。可用的代理数量取决于语言；在英语中，有超过30个不同的代理可用。
- en: Click on the Save button.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存按钮。
- en: Intent definition
  id: totrans-195
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 意图定义
- en: As we said previously, the user's intent is their purpose, the ultimate goal.
    Examples are ordering something, wanting to activate something on the user window,
    looking for shows, or simply saying goodbye. A chatbot should be able to perform
    some actions based on the intent it detects from the user's message.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前所说，用户的意图是他们的目的，最终目标。例如，订购某物、想要在用户窗口上激活某物、寻找节目，或者只是说再见。聊天机器人应该能够根据从用户消息中检测到的意图执行一些操作。
- en: 'To create an intent, click on the plus icon next to Intents; the following
    window is opened:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个意图，请点击“意图”旁边的加号图标；以下窗口将被打开：
- en: '![](img/da5e5cf7-ab94-4968-8941-21c8922c16cd.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/da5e5cf7-ab94-4968-8941-21c8922c16cd.png)'
- en: 'In this window, we will have to set some parameters:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 在此窗口中，我们需要设置一些参数：
- en: 'Intent name: The name of the intent.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意图名称：意图的名称。
- en: 'Contexts: This is used to manage the flow of the conversation.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上下文：这是用于管理对话流程的。
- en: 'Events: This is a feature that allows you to invoke intents by an event name
    instead of a user query. Events can be used by external services to trigger Dialogflow
    intents, for example, Google Assistant''s built-in intents.'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件：这是一个允许您通过事件名称而不是用户查询来调用意图的功能。事件可以被外部服务用来触发Dialogflow意图，例如，Google Assistant的内置意图。
- en: 'Training phrases: The phrases that identify the intent must be reported in
    natural language. You can use both examples (example mode identified with the
    " icon) and templates (template mode identified with the @ icon). Other examples
    of sentences are provided, the more the agent will be intelligent or he will be
    able to better recognize the user requests and to resolve ambiguities.'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 训练短语：必须以自然语言报告识别意图的短语。您可以使用示例（示例模式由“图标”识别）和模板（模板模式由“@”图标识别）。还提供了其他句子的示例，越多，代理将越智能，或者他将能够更好地识别用户请求并解决歧义。
- en: 'Action and parameters: This specifies the possible action to be executed and
    its parameters that can be extracted from the dialogue.'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动作和参数：这指定了要执行的可能动作及其可以从对话中提取的参数。
- en: 'Response: The answers to be returned to the user when the intent has been recognized
    must be reported. To make it more human-like, you can enter different variations
    for the same answer. The answers can also be parameterized, and depending on the
    integration used, they can consist of rich messages.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 响应：当识别到意图时，必须报告返回给用户的答案。为了使其更人性化，您可以输入相同答案的不同变体。答案也可以参数化，并且根据所使用的集成，它们可以由丰富的消息组成。
- en: 'Fulfillment: Call a web service to connect your backend. Send the intent, parameters,
    and context to your Cloud function or a web service. Execute the necessary logic
    and respond with a written, spoken, or visual response.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 履行：调用网络服务以连接您的后端。将意图、参数和上下文发送到您的云函数或网络服务。执行必要的逻辑并以书面、口语或视觉响应进行响应。
- en: When an example sentence is inserted, it is automatically noted, recognizing
    the parts that are collected as entity. An agent always contains a default fallback
    intent that collects all the cases in which no other intent has been recognized.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 当插入示例句子时，它会自动标记，识别收集为实体的部分。一个代理总是包含一个默认的回退意图，收集所有没有识别到其他意图的情况。
- en: 'The first intent we want to insert has the purpose to specify the position
    related to our weather forecast. We said that an intent represents the user''s
    purpose, so we need to think what questions the user may ask to receive weather
    forecasts. We need different intentions because there are many ways to ask the
    same thing. The process of identifying the intent is to map all the possible ways
    that the user can use to express an intent. The requests that we may expect from
    a user should be specified in the training phrases section. To start, let''s insert
    the following phrases:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要插入的第一个意图的目的是指定与我们的天气预报相关的位置。我们说意图代表用户的意图，因此我们需要思考用户可能会提出哪些问题以获取天气预报。我们需要不同的意图，因为询问相同内容的方式有很多。识别意图的过程是将用户可以用来表达意图的所有可能方式映射出来。我们可能期望从用户那里得到的要求应在训练短语部分中指定。为了开始，让我们插入以下短语：
- en: '`What''s the weather like in Rome`'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`罗马的天气怎么样`'
- en: '`How''s the weather in Rome`'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`罗马的天气怎么样`'
- en: '`Weather in Rome`'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`罗马的天气`'
- en: '`Rome weather forecast`'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`罗马天气预报`'
- en: 'To insert a single phrase, simply add the user expression in the Training phrases
    text field and then press *Enter* to add another phrase. We will notice that the
    sentence will be added to our declaration of intent. In particular, we can see
    that the word Rome is highlighted. This means that it was noted as a parameter
    assigned to existing city entities, as shown in the following screenshot:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 要插入单个短语，只需在训练短语文本字段中添加用户表达式，然后按*Enter*键添加另一个短语。我们会注意到句子将被添加到我们的意图声明中。特别是，我们可以看到单词Rome被突出显示。这意味着它被标记为分配给现有城市实体的参数，如下面的截图所示：
- en: '![](img/0eedbdb4-6f76-4885-94c3-844a413f3130.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0eedbdb4-6f76-4885-94c3-844a413f3130.png)'
- en: 'We continue to insert the sentences. After defining the location, it is necessary
    to define the time. It is clear that the user will need to know the predictions
    on a specific day, today or tomorrow for example. Then we also include these phrases:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 我们继续插入句子。在定义位置之后，还需要定义时间。很明显，用户将需要知道特定日期的预测，例如今天或明天。然后我们也包括以下短语：
- en: '`What is the weather today`'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`今天天气怎么样`'
- en: '`Weather for tomorrow`'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`明天的天气预报`'
- en: '`Weather forecast in Rome today`'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`罗马今天的天气预报`'
- en: 'As before, the time parameter is also highlighted, this time with a different
    color. The last sentence is interesting as it contains both a `date` parameter
    and a `geo-city` parameter, as shown in the following screenshot:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，时间参数也被突出显示，这次颜色不同。最后一句很有趣，因为它包含了一个`date`参数和一个`geo-city`参数，如下面的截图所示：
- en: '![](img/c0724bda-d70e-4400-9bcc-f2ea5072afa6.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c0724bda-d70e-4400-9bcc-f2ea5072afa6.png)'
- en: 'To start, we leave the other fields as is and focus only on the answer that
    the chatbot will have to provide to the user. So far, we have not considered any
    external reference from which to retrieve the information requested by the user.
    This means that at least for now, we will have to insert vague answers like these:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，我们保留其他字段不变，只关注聊天机器人将提供给用户的答案。到目前为止，我们还没有考虑任何外部参考来检索用户请求的信息。这意味着至少现在，我们不得不插入这样的模糊答案：
- en: '`I''m sorry, I do not have this information right now`'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`很抱歉，我现在没有这个信息`'
- en: '`Forecasts for $date are not available`'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`日期为$date的预报不可用`'
- en: '`The weather forecast for $date in $geo-city is not available`'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`在$geo-city的日期为$date的天气预报不可用`'
- en: 'In the last two phrases, we have inserted the following reference entities:
    `$date` and `$geo-city`. So, when the agent responds, it takes into account the
    parameter values gathered and will use a reply that includes those values that
    it picked up.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后两个短语中，我们插入了以下参考实体：`$date`和`$geo-city`。因此，当代理响应时，它会考虑收集到的参数值，并使用包含这些值的回复。
- en: 'Once we''re done, we click on the Save button. The following messages appear
    at the bottom right of the window:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦完成，我们点击保存按钮。以下消息出现在窗口的右下角：
- en: Intent saved
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意图已保存
- en: Agent training started
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理训练开始
- en: Agent training completed
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理训练完成
- en: 'The meaning is clear. Now that your agent can understand basic requests from
    the user, try out what you have made so far. To try the newly created agent, we
    can use the appropriate box available in the console at the top right. To do this,
    we simply need to type in a request. Let''s try our agent by typing a slightly
    different request from the examples given in the *Training phrases* section. For
    example, we ask: `Hows the weather in Rome today`. After this, we press *Enter*
    and the following window is returned:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 意义很明确。既然你的代理能够理解用户的基本请求，现在就尝试一下你到目前为止所做的一切。要尝试新创建的代理，我们可以使用右上角控制台中的相应框。为此，我们只需输入一个请求。让我们通过输入与“训练短语”部分给出的示例略有不同的请求来测试我们的代理。例如，我们询问：“今天罗马的天气怎么样”。之后，我们按下*Enter*键，随后返回以下窗口：
- en: '![](img/cdf1b90f-4364-4fed-bf43-a84d316a997f.png)'
  id: totrans-231
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/cdf1b90f-4364-4fed-bf43-a84d316a997f.png)'
- en: We can understand the frustration of the user who has not recovered the searched
    information, but we can already be satisfied as the agent has correctly interpreted
    the question and provided a plausible answer. Remember that, at least for now,
    the forecast data is not available and this is what the agent said. Also, as anticipated,
    the agent has identified the two reference entities and reused them to construct
    the response.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以理解那些未能恢复搜索信息的用户的挫败感，但至少现在我们可以满意，因为代理已经正确理解了问题并提供了合理的答案。记住，至少目前，预报数据是不可用的，这就是代理所说的。此外，正如预期的那样，代理已经识别出两个参考实体，并重新使用它们来构建响应。
- en: Summary
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we discovered the amazing world of chatbots. Chatbots are
    robots, that interact with users through a chat and are able to assist them by
    carrying out extremely limited tasks: providing information on a current account,
    buying a ticket, receiving news about the weather, and so forth.'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们发现了聊天机器人的神奇世界。聊天机器人是机器人，通过与用户进行聊天互动，能够通过执行极其有限的任务来帮助他们：提供当前账户的信息、购票、接收天气预报等。
- en: To begin with, we took a look at the fundamentals of the topic, starting with
    the history of chatbots in the 1950s, with the efforts of Alan Turing and various
    subsequent implementations of chatbots that perfected the basic concepts. Eliza,
    Parry, Jabberwacky, Dr. Sbaitso, ALICE, SmarterChild, and IBM Watson are the most
    important examples. As time passed and technology evolved, more and more sophisticated
    AI methods were created.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们研究了该主题的基本概念，从20世纪50年代聊天机器人的历史开始，包括艾伦·图灵的努力以及各种随后的聊天机器人实现，它们完善了基本概念。Eliza、Parry、Jabberwacky、Dr.
    Sbaitso、ALICE、SmarterChild和IBM Watson是最重要的例子。随着时间的推移和技术的发展，越来越多的复杂人工智能方法被创造出来。
- en: After introducing the basic concepts, we focused on the design techniques of
    chatbots and then moved on to analyze the architecture of a chatbot. We explored
    the interesting fields of NLP and NLU.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在介绍基本概念之后，我们专注于聊天机器人的设计技术，然后转向分析聊天机器人的架构。我们探讨了自然语言处理（NLP）和自然语言理解（NLU）的有趣领域。
- en: In the last part of the chapter, we covered Google Cloud Dialogflow, a platform
    for creating voice and text conversation applications based on machine learning.
    It supports 14 languages and can be integrated with major chat platforms. Finally,
    we created a simple chatbot that helps users to retrieve weather information about
    the most beautiful city in the world, that is, Rome. This can be an opportunity
    to travel, at least with the mind.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的最后部分，我们介绍了基于机器学习的语音和文本对话应用平台Google Cloud Dialogflow。它支持14种语言，可以与主要的聊天平台集成。最后，我们创建了一个简单的聊天机器人，帮助用户获取世界上最美城市——罗马的天气预报。这至少是一个心灵旅行的好机会。
