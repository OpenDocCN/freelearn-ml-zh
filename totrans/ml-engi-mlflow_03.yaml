- en: '*Chapter 2*: Your Machine Learning Project'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第二章*：您的机器学习项目'
- en: The approach of this book is to iterate through a practical business project
    – namely, stock market prediction – and, with this use case, explore through the
    different chapters the different features of MLflow. We will use a structured
    approach to frame a machine learning problem and project. A sample pipeline will
    be created and used to iterate and evolve the project in the remainder of the
    book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的方法是通过迭代一个实际商业项目——即股票市场预测——并利用这个用例，通过不同的章节探索MLflow的不同功能。我们将使用结构化方法来构建机器学习问题和项目。本书剩余部分将创建并使用一个示例管道来迭代和演进项目。
- en: Using a structured framework to describe a machine learning problem helps the
    practitioner to reason more efficiently about the different requirements of the
    machine learning pipeline. We will present a practical pipeline using the requirements
    elicited during framing.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 使用结构化框架描述机器学习问题有助于从业者更有效地推理机器学习管道的不同需求。我们将展示一个使用在构建阶段收集到的需求的实际管道。
- en: 'Specifically, we will cover the following sections in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，在本章中，我们将涵盖以下内容：
- en: Exploring the machine learning process
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索机器学习过程
- en: Framing the machine learning problem
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建机器学习问题
- en: Introducing the stock market prediction problem
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍股票市场预测问题
- en: Developing your machine learning baseline pipeline
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开发您的机器学习基线管道
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'For this chapter, you will need the following prerequisites:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章，您需要以下先决条件：
- en: The latest version of Docker installed on your machine. If you don't already
    have it installed, please follow the instructions at [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/).
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的机器上安装了最新版本的Docker。如果您还没有安装，请按照[https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)上的说明进行操作。
- en: Access to a Bash terminal (Linux or Windows).
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问Bash终端（Linux或Windows）。
- en: Access to a browser.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问浏览器。
- en: Python 3.5+ installed.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已安装Python 3.5以上版本。
- en: MLflow installed locally as described in [*Chapter 1*](B16783_01_Final_SB_epub.xhtml#_idTextAnchor015),
    *Introducing MLflow*.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如[*第一章*](B16783_01_Final_SB_epub.xhtml#_idTextAnchor015)，“介绍MLflow”中所述，在本地安装MLflow。
- en: Exploring the machine learning process
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索机器学习过程
- en: In this chapter, we will begin by describing the problem that we will solve
    throughout the book. We aim to focus on machine learning in the context of stock
    trading.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将首先描述我们将贯穿整本书解决的问题。我们的目标是关注股票交易背景下的机器学习。
- en: Machine learning can be defined as the process of training a software artifact
    – in this case, a model to make relevant predictions in a problem. Predictions
    are used to drive business decisions, for instance, which stock should be bought
    or sold or whether a picture contains a cat or not.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习可以被定义为训练一个软件实体的过程——在本例中，是一个模型，用于在问题中做出相关预测。预测被用于驱动业务决策，例如，应该购买或出售哪只股票，或者图片中是否包含猫。
- en: 'Having a standard approach to a machine learning project is critical for a
    successful project. The typical iteration of a machine learning life cycle is
    depicted in *Figure 2.1*:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个成功的项目来说，拥有标准的机器学习项目方法是至关重要的。机器学习生命周期的典型迭代在*图2.1*中展示：
- en: '![Figure 2.1 – Excerpt of the acquired data with the prediction column'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.1 – 获取数据的摘录及预测列'
- en: '](img/B16783_02_001.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16783_02_001.jpg)'
- en: Figure 2.1 – Excerpt of the acquired data with the prediction column
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.1 – 获取数据的摘录及预测列
- en: 'Let''s examine each stage in detail:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细检查每个阶段：
- en: '**Ideation**: This phase involves identifying a business opportunity to use
    machine learning and formulating the problem.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**构思**：这一阶段涉及识别一个使用机器学习的机会并制定问题。'
- en: '**Prototyping**: This involves verifying the feasibility and suitability of
    existing datasets to implement the planned idea.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**原型设计**：这涉及到验证现有数据集的可行性和适用性，以实现计划中的想法。'
- en: '**Pilot**: This involves evaluating and iterating over a machine learning algorithm
    in order to make the decision of whether to progress or not to the subsequent
    phase.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**试点**：这涉及到评估和迭代机器学习算法，以便决定是否进入下一阶段。'
- en: '**Production deployment**: Upon successful piloting, we should be able to run
    the machine learning project in production and allow it to start receiving production
    traffic.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生产部署**：在成功试点后，我们应该能够在生产中运行机器学习项目，并允许它开始接收生产流量。'
- en: These high-level phases defined in *Figure 2.1* are definitely not static and
    are generally iterative, with dynamic movement between the phases to refine and
    improve.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图2.1*中定义的这些高级阶段肯定不是静态的，通常是迭代的，各阶段之间有动态移动以精炼和改进。
- en: It should be noted that machine learning is not the solution to every problem.
    Before deciding on machine learning, a deep evaluation needs to be made of the
    problem or project at hand to decide whether or not to apply machine learning.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 应该注意的是，机器学习并不是解决所有问题的方案。在决定使用机器学习之前，需要对当前的问题或项目进行深入评估，以决定是否应用机器学习。
- en: 'There are simple scenarios where a machine learning solution is a good candidate,
    for instance, in the following cases:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些简单场景，机器学习解决方案是一个很好的候选者，例如以下情况：
- en: When simple rules and heuristics are not enough to solve the problem at hand.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当简单的规则和启发式方法不足以解决当前的问题时。
- en: It's very expensive to solve the problem with the current state-of-the-art solutions.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用当前最先进的方法解决问题非常昂贵。
- en: When the rules and code to solve a problem are very intricate and hard to maintain.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当解决问题的规则和代码非常复杂且难以维护时。
- en: The advent of machine learning brought changes to various areas; one of these
    areas is the **finance** field. Before computers, finance was based on trading
    papers in small offices with a reduced number of transactions. With computers,
    the situation changed; there are now millions of transactions done per day. Millions
    of people trade with each other without having to meet in person or have any other
    sort of physical contact.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习的出现给各个领域带来了变化；其中之一是**金融**领域。在计算机出现之前，金融是基于小办公室中的交易纸张，交易数量较少。有了计算机，情况发生了变化；现在每天有数百万笔交易。数百万人相互交易，无需亲自见面或进行任何其他形式的物理接触。
- en: 'In finance and the stock trading space, machine learning can be used in the
    following contexts:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在金融和股票交易领域，机器学习可以在以下环境中使用：
- en: '**Data mining**: To identify patterns in your dataset using advanced predictive
    analytics. It''s very common for advanced data analysts to use machine learning
    models as part of their analysis process and to drive business decisions.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据挖掘**：使用高级预测分析来识别数据集中的模式。高级数据分析师通常将机器学习模型作为其分析过程的一部分，并用于驱动业务决策。'
- en: '**Pair trading**: A technique of using two pairs of stocks that are in opposite
    directions of the market. Basically, this works by selling or buying when each
    of the stocks is out of phase with its normal behavior as the markets are known
    to converge after some time.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**对冲交易**：一种使用两对市场方向相反的股票的技术。基本上，这是通过在每只股票与其正常行为不同步时卖出或买入来实现的，因为市场在一段时间后会趋于收敛。'
- en: '**Stock forecasting**: Simple prediction, based on the current time series
    of what a particular stock will be traded for at a point in the future.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**股票预测**：基于当前时间序列对特定股票在未来的某个时间点将被交易的简单预测。'
- en: '**Anomaly detection**: Detecting abnormal situations in the market reveals
    itself to be very important to prevent auto-trading systems from operating on
    days when the market is anomalous.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**异常检测**：在市场中检测异常情况，发现对防止自动交易系统在市场异常的日子里运行非常重要。'
- en: '**Sentiment analysis**: The stock market is known to be driven mostly by sentiments
    of participants around companies and businesses. This technique uses, for instance,
    messages on social media or other mediums, using natural language processing techniques
    to gauge sentiment (for example, positive, negative, or neutral).'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**情感分析**：众所周知，股市主要是由公司和企业参与者的情绪驱动的。这种技术使用社交媒体或其它媒介上的消息，利用自然语言处理技术来衡量情绪（例如，正面、负面或中性）。'
- en: Next, we'll look at framing the problem for machine learning.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将探讨为机器学习构建问题框架。
- en: Framing the machine learning problem
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建机器学习问题框架
- en: Machine learning problem framing, as defined in this section, is a technique
    and methodology to help specify and contextualize a machine learning problem in
    such a way that an engineering solution can be implemented. Without a solid approach
    to tackling machine learning problems, it can become very hard to extract the
    real value of the undertaking.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 本节中定义的机器学习问题框架是一种技术和方法，旨在帮助明确和具体化机器学习问题，以便可以实施工程解决方案。如果没有一个稳固的方法来处理机器学习问题，提取这项工作的真正价值可能会变得非常困难。
- en: We will draw inspiration from the approaches of companies such as Amazon and
    Google, which have been successfully applying the technique of machine learning
    problem framing.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将借鉴亚马逊和谷歌等公司的方法，这些公司已经成功应用了机器学习问题框架的技术。
- en: The machine learning development process is highly based on the scientific method.
    We undergo different stages of stating a goal, data collection, hypothesis testing,
    and conclusion. It's expected that we will cycle through the different stages
    of the workflow until either a good model is identified or it becomes apparent
    that it's impossible to develop one.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习开发过程高度基于科学方法。我们经过不同的阶段，包括陈述目标、数据收集、假设检验和结论。预期我们将循环通过工作流程的不同阶段，直到确定一个好的模型或明显无法开发模型。
- en: The following subsections depict the framework that we will use in the rest
    of the book to elicit a machine learning problem-solving framework.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 以下小节描述了本书其余部分将使用的框架，以激发机器学习问题解决框架。
- en: Problem statement
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题陈述
- en: 'Understanding the problem that we are solving is very important before we attempt
    anything else. Defining a problem statement for the problem at hand is a clear
    way to define your problem. The following are reasonable examples of a machine
    learning problem statement:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试其他任何事情之前，理解我们正在解决的问题非常重要。为当前问题定义问题陈述是定义问题的明确方式。以下是一些合理的机器学习问题陈述示例：
- en: Predict whether the stock market for a specific ticker will go up tomorrow.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测特定股票的股票市场明天是否会上涨。
- en: Predict whether we have a cat in a picture.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测图片中是否有猫。
- en: 'In this part of the process, we specify the specific type of machine learning
    problem that we are aiming to solve. The following are common types of problems:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个流程的部分，我们指定我们旨在解决的特定类型的学习问题。以下是一些常见的问题类型：
- en: '**Classification**: This type of problem requires you to predict a label or
    class as the output of your model, for example, classifying whether an email text
    is spam or not spam. It can be a binary classification or a multiclass classification.
    A good example of a multiclass variant is classifying the digits given the handwriting.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分类**：这类问题要求你预测模型的输出标签或类别，例如，分类电子邮件文本是否为垃圾邮件。它可以是二分类或多分类。一个多分类变体的好例子是根据手写数字进行分类。'
- en: '**Regression**: This is if you need, for instance, to have a model predict
    a numeric value from a training dataset. Good examples are predicting temperature
    based on atmospheric features and predicting the exact value in dollars of a given
    stock.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回归**：这指的是你需要，例如，从训练数据集中预测一个数值。好的例子包括根据大气特征预测温度和预测给定股票的美元价值。'
- en: '**Clustering**: Consists of discovering natural groupings of data when you
    don''t have labels to train models. It groups similar data points into the same
    groups using a distance metric. Clustering can be used to identify fraudulent
    transactions as they won''t belong to an existing grouping.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**聚类**：当你没有标签来训练模型时，它包括发现数据的自然分组。它使用距离度量将相似数据点分组到同一组中。聚类可以用来识别欺诈交易，因为它们不会属于现有的分组。'
- en: '**Generative model**: This is a novel type of machine learning where new data
    is generated based on the existing data and is statistically similar to the input
    data. It''s widely used in modern language models such as GPT-3 from OpenAI.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成模型**：这是一种新型的机器学习，它根据现有数据生成新的数据，并且与输入数据在统计上相似。它在现代语言模型中广泛使用，例如OpenAI的GPT-3。'
- en: '**Reinforcement learning**: A type of machine learning where the agent/model
    interacts with the environment to learn optimal behavior to maximize the reward.
    One famous application is the AlphaGo agent from Google DeepMind, which was able
    to outperform the best human player at the board game Go. A very important application
    is to train an automated trading stock agent using profitability as the reward.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**强化学习**：这是一种机器学习类型，其中代理/模型与环境交互以学习最优行为以最大化奖励。一个著名的应用是谷歌DeepMind的AlphaGo代理，它能够在围棋棋盘游戏中击败最佳人类玩家。一个非常重要的应用是使用盈利作为奖励来训练自动交易股票代理。'
- en: Important note
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: There are multiple taxonomies for machine learning problems; the listing in
    this section is by no means exhaustive. This list is relevant to the examples
    in the book.
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 机器学习问题有多种分类法；本节中的列表绝对不是详尽的。此列表与书中的示例相关。
- en: Success and failure definition
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 成功与失败的定义
- en: 'Getting the success definition from a business is very important to put your
    problem in perspective. For instance, for the stock market case, the following
    can be outlined as a desirable outcome: "Using the model of this project, we would
    like to *improve* the *profitability* up to 56% of our daily *trading* operations
    as they are currently profitable in 50% of the daily trades."'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 从业务中获得成功定义对于将您的问题置于正确的视角非常重要。例如，对于股市案例，以下可以概述为一个期望的结果：“使用本项目的模型，我们希望将我们目前50%的日常交易盈利的*盈利能力*提高至56%。”
- en: So, if we have successful trades only 30% of the time, the model is clearly
    a failure. It will generally be dependent on business criteria.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果我们只有30%的交易是成功的，那么这个模型显然是失败的。它通常将依赖于业务标准。
- en: Having a business metric as a success definition, instead of a technical metric
    such as accuracy, precision, or recall, helps keep the solution aligned to tangible
    goals to an organization.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 将业务指标作为成功定义，而不是像准确性、精确度或召回率这样的技术指标，有助于使解决方案与组织的具体目标保持一致。
- en: Model output
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型输出
- en: The model output in the context of machine learning problem framing is dependent
    on the type of problem that you are solving. For instance, a regression model
    output will be a specific number (for example, 10.5 as a stock prediction) and
    a classification will return a label (for example, `true` when a cat is detected)
    and a probabilistic threshold.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在机器学习问题框架的背景下，模型输出取决于您要解决的问题类型。例如，回归模型输出将是一个特定的数字（例如，作为股票预测的10.5）和分类将返回一个标签（例如，检测到猫时返回`true`）以及一个概率阈值。
- en: Your model output should definitely be related to your outcome definition.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 您的模型输出应该肯定与您的结果定义相关。
- en: Output usage
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输出用途
- en: Stating how your prediction will be used helps unveil the reasoning for the
    model development, helping the developers to get context and ownership of the
    problem, for instance, deciding whether you will use your prediction directly
    in a UI or use it to feed an upstream system.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 说明您的预测将如何被使用有助于揭示模型开发的理由，帮助开发者了解问题和拥有感，例如，决定您是否将预测直接用于用户界面或用于喂养上游系统。
- en: Heuristics
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启发式方法
- en: Problems solved with machine learning can be approximated by rules and heuristics.
    Having a heuristic as a starting point for a machine learning pipeline is generally
    a recommended approach to starting a project.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 使用机器学习解决的问题可以通过规则和启发式方法来近似。将启发式方法作为机器学习管道的起点通常是一个推荐的项目启动方法。
- en: For instance, a valid heuristic for the stock trading prediction problem would
    be using the last day's prediction as the first baseline production heuristic.
    The goal of the model developer is then to beat the baseline with a better model.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，对于股票交易预测问题的一个有效启发式方法是使用最后一天的预测作为第一个基线生产启发式。模型开发者的目标就是通过更好的模型来超越基线。
- en: Data layer definition
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据层定义
- en: Defining precisely the input and output in the context of your model helps clarify
    and guide the development of your machine learning problem.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的模型背景下精确定义输入和输出有助于澄清并指导您的机器学习问题开发。
- en: Data sources
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据源
- en: This section on framing the problem comprises identifying raw data sources and
    documenting them during the problem framing process. Examples of raw data sources
    are public or proprietary datasets and their definitions and data dictionaries.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 本节关于问题框架的内容包括在问题框架过程中识别原始数据源并对其进行记录。原始数据源的例子包括公共或专有数据集及其定义和数据字典。
- en: It's important to identify whether the data is labeled or not at this stage,
    and the effort that will be needed to label the data.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，识别数据是否已标记以及标记数据所需付出的努力是很重要的。
- en: Model input/output
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模型输入/输出
- en: Model development involves defining the precise inputs to be used in the model.
    Given all the data sources available, specifying the model input or feature sets
    becomes essential in order to execute your pipeline. Alongside your input, the
    desired target should be defined.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 模型开发涉及定义模型中要使用的精确输入。考虑到所有可用的数据源，指定模型输入或特征集对于执行您的管道变得至关重要。与您的输入一起，应定义期望的目标。
- en: 'The model input/output is better framed as a table, as in *Figure 2.2*, in
    order to facilitate reasoning and model implementation. One row of example data
    is added for clarity:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 模型输入/输出最好以表格形式呈现，如*图2.2*所示，以便于推理和模型实现。为了清晰起见，增加了一行示例数据：
- en: '![Figure 2.2 – Example of documenting the inputs/outputs of a model'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.2 – 记录模型输入/输出的示例'
- en: '](img/B16783_02_002.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16783_02_002.jpg)'
- en: Figure 2.2 – Example of documenting the inputs/outputs of a model
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.2 – 模型输入/输出的文档示例
- en: Next, we'll look at using the machine learning problem framing technique on
    the stock trading scenario that we will work on throughout the book.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将探讨在本书中我们将要工作的股票交易场景中，使用机器学习问题界定技术。
- en: Introducing the stock market prediction problem
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍股票市场预测问题
- en: The scenario that we will cover in the remaining chapters of the book is of
    the hypothetical company **PsyStock LLC**, which provides a platform for amateur
    traders, providing APIs and UIs to solve different predictions in the context
    of stock prediction.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 本书剩余章节将涵盖假设公司**PsyStock LLC**的情景，该公司为业余交易者提供平台，提供API和UI以解决股票预测背景下的不同预测问题。
- en: As machine learning practitioners and developers, we should be able to build
    a platform that will allow a team of data scientists to quickly develop, test,
    and bring into production machine learning projects.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 作为机器学习实践者和开发者，我们应该能够构建一个平台，使数据科学家团队能够快速开发、测试并将机器学习项目投入生产。
- en: 'We will apply and frame the problems initially so we can build our platform
    upon the basis of the definitions of the problems. It should be noted that the
    problem framing will evolve as we learn more about the problem: the initial framing
    will give us guidance on the problem spaces that we will be tackling.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先应用和界定问题，以便我们可以在问题的定义基础上构建我们的平台。需要注意的是，随着我们对问题的了解更多，问题界定将不断发展：初始界定将为我们提供解决问题空间的指导。
- en: The following are the core projects that we will use as references in the rest
    of the book for machine learning development in MLflow.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们将在本书的其余部分作为机器学习开发在MLflow中参考的核心项目。
- en: Stock movement predictor
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 股票走势预测器
- en: This is the project for the first API that the company PsyStock LLC will provide
    to its customers. This API will return `true` if a given stock ticker will go
    up in the stock market and `false` if not.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这是公司PsyStock LLC将为客户提供的第一个API项目。如果给定的股票代码在股市中上涨，则该API将返回`true`，如果不上涨，则返回`false`。
- en: Problem statement
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题陈述
- en: The problem statement is to *predict through a machine learning classifier whether
    the market will go up or not in a single day*.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 问题陈述是通过机器学习分类器预测市场在单日是否会上涨。
- en: Success and failure definition
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 成功与失败定义
- en: Success, in this case, is defined by *the percentage of days in a month where
    the system predicted the correct direction of the market*. Success is basically
    whether the system is accurate, from a market direction perspective, more than
    60% of the time – basically, the expected value of being better than the random
    baseline.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，成功定义为系统中预测市场方向正确的天数占一个月天数的百分比。成功基本上是指系统在市场方向上准确率超过60% – 基本上，是优于随机基线的期望值。
- en: Model output
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型输出
- en: The model output is `1` for an increase in value of a stock ticker and `0` for
    non-increase.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 模型输出为`1`表示股票代码价值增加，为`0`表示未增加。
- en: Output usage
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输出用途
- en: The output of the model will be used to provide the Rest API with a `true` or
    `false` value based on a defined threshold of accuracy on the classification.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 模型的输出将用于向Rest API提供基于分类准确度定义阈值的`true`或`false`值。
- en: The expected latency for this problem is *under 1,000 milliseconds*.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 此问题的预期延迟低于1,000毫秒。
- en: Heuristics
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启发式方法
- en: The simplest heuristic to solve this problem is using a random predictor for
    each input, with an equal probability of the market going up or down.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 解决此问题的最简单启发式方法是使用随机预测器对每个输入进行预测，市场上涨或下跌的概率相等。
- en: Data layer definition
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据层定义
- en: Let's define each part of our data layer.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们定义我们数据层的每个部分。
- en: Data sources
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据源
- en: Historical stock market datasets as provided by the Yahoo Finance public API.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 由Yahoo Finance公共API提供的历史股票市场数据集。
- en: Model input/output
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模型输入/输出
- en: 'Let''s look at the input and output, next:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看输入和输出，接下来：
- en: '**Input**: Historical end-of-the-day price of a given ticker for the last 10
    days.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输入**：过去10天给定股票代码的每日收盘价。'
- en: '`1` for increasing and `0` for not increasing in the next period.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`1`表示下一期增加，`0`表示不增加。'
- en: 'The following table shows the input/output data of a model:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 下表显示了模型的输入/输出数据：
- en: '![Figure 2.3 – Example of documenting the input/outputs of a model'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.3 – 模型输入/输出的文档示例](img/B16783_02_003.jpg)'
- en: '](img/B16783_02_003.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16783_02_003.jpg)'
- en: Figure 2.3 – Example of documenting the input/outputs of a model
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.3 – 记录模型输入/输出的示例
- en: Sentiment analysis of market influencers
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 市场影响者的情绪分析
- en: The sentiment machine learning pipeline will *predict whether the sentiment
    over a stock ticker is positive or negative on social media* and provide it as
    an API to the users of the machine learning platform that we are developing in
    this book.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 情绪机器学习管道将*预测社交媒体上股票代码的情绪是正面还是负面*，并将其作为API提供给我们在本书中开发的机器学习平台的用户。
- en: Problem statement
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题陈述
- en: To predict whether a given stock ticker has positive sentiment for the current
    day of relevant market influencers on Twitter selected by PsyStock LLC.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 为了预测PsyStock LLC选定的相关市场影响者在Twitter上对给定股票代码在当天是否具有正面情绪。
- en: Success and failure definition
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 成功与失败的定义
- en: Success, in this case, is a bit harder to define, as the fact of a sentiment
    being positive can't exactly be tracked to a market metric. The definition of
    success on this particular prediction problem should be a proxy for how many times
    a user is a repeat user of the API.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，成功定义起来有点困难，因为情绪是正面的这一事实不能精确地追踪到市场指标。对于这个特定的预测问题，成功的定义应该是用户重复使用API次数的代理。
- en: Model output
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型输出
- en: The model output is basically a number matching the polarity of the tweet –
    positive, negative, or neutral sentiment – of a ticker.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 模型输出基本上是一个数字，匹配股票代码的推文的极性——正面、负面或中性情绪。
- en: Output usage
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输出用途
- en: The output of this system will be used in a Rest API that will be provided on
    request, with the number of positive, neutral, and negative polarities for a given
    ticker.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 该系统的输出将用于一个Rest API，该API将在请求时提供，包括给定股票代码的正面、中性和负面极性的数量。
- en: Heuristics
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启发式方法
- en: A very simple heuristic to implement as a baseline for this problem is to count
    the number of times that the words `up` and `down` are used. Whichever word is
    more frequent for a ticker, its value will be used for polarity. If the percentage
    of frequency between the two words is less than 10%, we will assume that the ticker
    sentiment was neutral.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此问题的基线，一个非常简单的启发式方法是计算单词“up”和“down”出现的次数。对于股票代码，哪个单词更频繁，就使用哪个单词的值作为极性。如果两个单词之间的频率百分比小于10%，我们将假设该股票代码的情绪是中性的。
- en: Data layer definition
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据层定义
- en: The most readily available raw data for this problem is social media. Twitter
    provides an easy-to-consume and search API where we can search by ticker and influencer
    handle.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个问题，最 readily available 的原始数据是社交媒体。Twitter 提供了一个易于消费和搜索的 API，我们可以通过股票代码和影响者用户名进行搜索。
- en: Data sources
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据来源
- en: The source data will be acquired through the Twitter API to search for tickers
    given an updatable list of market influencers.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 源数据将通过Twitter API获取，以搜索给定可更新市场影响者列表的股票代码。
- en: Model input/output
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模型输入/输出
- en: 'The system that will serve the model will receive a tweet and return the classified
    sentiment (positive, negative, or neutral):'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 将为模型提供服务的系统将接收一条推文并返回分类的情绪（正面、负面或中性）：
- en: '![Figure 2.4 – Example of documenting the input/outputs of a model'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.4 – 记录模型输入/输出的示例'
- en: '](img/B16783_02_004.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16783_02_004.jpg)'
- en: Figure 2.4 – Example of documenting the input/outputs of a model
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.4 – 记录模型输入/输出的示例
- en: In this section, we just defined the initial problems that we will tackle, end
    to end, throughout the book. We will be refining the definition of the problem
    frame and improving it when necessary and updating the problem frame as required.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们仅定义了我们将从头到尾在整个书中解决的问题。我们将根据需要改进问题框架的定义，并在必要时对其进行更新。
- en: In the next section, we'll look at using the definition of the heuristics during
    problem framing to create the first base pipeline that we will work on improving.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将探讨在问题框架中定义启发式方法，以创建我们将要改进的第一个基础管道。
- en: Developing your machine learning baseline pipeline
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开发您的机器学习基线管道
- en: For our machine learning platform, we will start with a very simple, heuristic-based
    pipeline, in order to get the infrastructure of your end-to-end system working
    correctly and an environment where the machine learning models can iterate on
    it.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的机器学习平台，我们将从一个非常简单、基于启发式方法的管道开始，以确保您的端到端系统的基础设施运行正确，并为机器学习模型提供一个可以迭代的 环境。
- en: Important note
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: It is critical that the technical requirements are correctly installed in your
    local machine to follow along. The assumption on this section is that you have
    MLflow and Docker installed as per the *Technical requirements* section.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 确保在本地机器上正确安装技术要求对于跟随教程至关重要。本节假设您已按照*技术要求*部分安装了MLflow和Docker。
- en: 'By the end of this section, you will be able to create our baseline pipeline.
    The baseline pipeline value is to enable rapid iteration to the model developers.
    So, basically, an end-to-end infrastructure with placeholders for training and
    model serving will be made available to the development team. Since it''s all
    implemented in MLflow, it becomes easy to have specialization and focus of the
    different types of teams involved in a machine learning project. The engineering
    teams will focus on improving the pipeline while the data science-oriented teams
    will have a way to rapidly test and evaluate their models:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 到本节结束时，您将能够创建我们的基线流程。基线流程的价值在于能够快速迭代模型开发。因此，基本上，一个端到端的基础设施将提供给开发团队，其中包含用于训练和模型服务的占位符。由于所有这些都实现在了MLflow中，因此可以轻松实现不同类型团队在机器学习项目中的专业化和专注。工程团队将专注于改进流程，而数据科学导向的团队将有一种快速测试和评估其模型的方法：
- en: Implement the heuristic model in MLflow.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在MLflow中实现启发式模型。
- en: 'In the following block of code, we create the `RandomPredictor` class, a bespoke
    predictor that descends from the `mlflow.pyfunc.PythonModel` class. The main `predict`
    method returns a random number between 0 and 1:'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在以下代码块中，我们创建了`RandomPredictor`类，这是一个从`mlflow.pyfunc.PythonModel`类派生的定制预测器。主要的`predict`方法返回0到1之间的随机数：
- en: '[PRE0]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We use a specific functionality of creating a custom model in MLflow; more details
    about custom models can be found at [https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#pyfunc-create-custom](https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#pyfunc-create-custom).
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们使用MLflow中创建自定义模型的特定功能；有关自定义模型的更多详细信息，请参阅[https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#pyfunc-create-custom](https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#pyfunc-create-custom)。
- en: Save the model in MLflow.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在MLflow中保存模型。
- en: 'The following block of code saves the model with the name `random_model` in
    a way that can be retrieved later on. It registers within the MLflow registry
    in the local filesystem:'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下代码块以`random_model`的名称保存模型，以便以后检索。它在本地文件系统中的MLflow注册表中注册：
- en: '[PRE1]'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: At this stage, we basically instantiate the model and store it on the model
    registry as configured by the local environment.
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这个阶段，我们基本上实例化了模型，并按照本地环境配置将其存储在模型注册表中。
- en: 'Run your `mlflow` job:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行您的`mlflow`作业：
- en: '[PRE2]'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Start the serving API:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动服务API：
- en: '[PRE3]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Test the API of your model.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试您模型的API。
- en: 'You have access to a very simple Flask server that can run your model. You
    can test the execution by running a `curl` command in your server:'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以访问一个非常简单的Flask服务器，可以运行您的模型。您可以通过在服务器上运行`curl`命令来测试执行：
- en: '[PRE4]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: At this stage, we have a baseline dummy model that the goal of the model developers
    team is now to improve upon. This same pipeline will be used in the next chapter
    to build a data science development environment with the initial algorithms of
    the platform being built in this book.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，我们有一个基线虚拟模型，模型开发团队的目标现在是要改进这个模型。这个相同的流程将在下一章中用于构建一个数据科学开发环境，该平台在本书中构建的初始算法。
- en: Summary
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we introduced the machine learning problem framing approach, and
    explored some of the motivation behind adopting this framework.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了机器学习问题框架方法，并探讨了采用此框架的一些动机。
- en: We introduced the stock market prediction machine learning platform and our
    initial set of prediction problems using the ML problem framing methodology.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 我们介绍了股票市场预测机器学习平台以及我们使用ML问题框架方法定义的初始预测问题集。
- en: We briefly introduced in this chapter the use case of a stock market prediction
    basic pipeline that will be used in the rest of the book.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们简要介绍了将在本书其余部分使用的股票市场预测基本流程的用例。
- en: In the next chapter, we will focus on creating a data science development environment
    with MLflow using the definitions of the problem made in this chapter.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将专注于使用本章中定义的问题创建一个数据科学开发环境，使用MLflow。
- en: Further reading
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'In order to further your knowledge, you can consult the documentation at the
    following links:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步扩展您的知识，您可以查阅以下链接中的文档：
- en: 'Reference information on the Google machine learning problem framing framework:
    [https://developers.google.com/machine-learning/problem-framing](https://developers.google.com/machine-learning/problem-framing)'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于谷歌机器学习问题框架的参考信息：[https://developers.google.com/machine-learning/problem-framing](https://developers.google.com/machine-learning/problem-framing)
- en: 'Reference information on the Amazon machine learning framing framework: [https://docs.aws.amazon.com/wellarchitected/latest/machine-learning-lens/ml-problem-framing.html](https://docs.aws.amazon.com/wellarchitected/latest/machine-learning-lens/ml-problem-framing.html)'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于亚马逊机器学习框架的参考信息：[https://docs.aws.amazon.com/wellarchitected/latest/machine-learning-lens/ml-problem-framing.html](https://docs.aws.amazon.com/wellarchitected/latest/machine-learning-lens/ml-problem-framing.html)
