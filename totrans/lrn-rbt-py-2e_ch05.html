<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis">
<head>
  <meta charset="UTF-8"/>
  <title>Designing ChefBot Hardware and Circuits</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css"/>
  <link type="text/css" rel="stylesheet" media="all" href="core.css"/>
</head>
<body>
  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Designing ChefBot Hardware and Circuits</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will discuss the design and workings of ChefBot hardware and look at a selection of its hardware components. In the previous chapter, we designed and simulated the basic robot framework in a hotel environment using Gazebo and ROS, and tested a few variables, such as the robot body mass, motor torque, wheel diameter, and more. We also tested the autonomous navigation capability of ChefBot in a hotel environment.</p>
<p>To achieve this using hardware, we need to select all the hardware components and figure out how to connect all these components. We know that the main functionality of this robot is navigation: this robot will have the ability to navigate from a start position to an end position without any collision with its surroundings. We will discuss the different sensors and hardware components required to achieve this goal. We will look at a block diagram representation of these components and its explanation, and also discuss the main functions and physical operations of the robot. Finally, we need to select the components required to build the robot. We will also familiarize ourselves with the online stores where we can purchase these components.</p>
<p>If you have a TurtleBot, you may skip this chapter because this chapter is only for those who need to create their robot's hardware. Let's look at the specifications that we have to meet in the design of the hardware. The robot hardware mainly includes the robot chassis, sensors, actuators, controller boards, and PC.</p>
<p>The following topics will be covered in this chapter:</p>
<ul>
<li>Block diagram and description of the Chefbot robot</li>
<li>Robot component selection and description</li>
<li>The workings of Chefbot's hardware</li>
</ul>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>The components required to build the robot are described in this chapter. You have to purchase these components or similar components in order to build the ChefBot.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Specifications of the ChefBot's hardware</h1>
                </header>
            
            <article>
                
<p>In this section, we will be discussing some of the important specifications that we mentioned in <span class="ChapterrefPACKT">Chapter 3</span>, <em>Modeling the Differential-Drive Robot</em>. The final robot prototype will meet the following specifications:</p>
<ul>
<li><strong>Simple and cost-effective robot chassis design</strong>: The robot chassis design should be simple and cost effective compared to existing robots.</li>
<li><strong>Autonomous navigation functionality</strong>: The robot should autonomously navigate and it should contain the necessary sensors for doing this.</li>
<li><strong>Long battery life</strong>: The robot should have a long battery life in order to work continuously. The length of time that it can work should be greater than one hour.</li>
<li><strong>Obstacle avoidance</strong>: The robot should be able to avoid static and dynamic objects in its surroundings.</li>
</ul>
<p>The robot hardware design should meet these specifications. Let's look at one of the possible ways of interconnecting the components in this robot. In the next section, we will look at a block diagram of the robot and use it to examine its workings.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Block diagram of the robot</h1>
                </header>
            
            <article>
                
<p>The robot's movement is controlled by two <strong>direct current</strong> (<strong>DC</strong>) gear motors using an encoder. The two motors are driven using a motor driver. The motor driver is interfaced with an embedded controller board, which will send commands to the motor driver to control the motor's movements. The encoder of the motor is interfaced with the controller board in order to count the number of rotations of the motor shaft. This data is used to compute the odometry data of the robot. There are ultrasonic sensors that are interfaced with the controller board in order to sense the obstacles and measure the distance from the obstacles. There is an IMU sensor to improve odometry calculation. The embedded controller board is interfaced with a PC, which does all the high-end processing in the robot. Vision and sound sensors are interfaced with the PC and Wi-Fi is attached for remote operations. Each component of the robot is explained in the following diagram:</p>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign"><img src="images/9b7cf915-657b-47fd-af63-ca3e13160f73.png" style="width:37.08em;height:19.83em;"/></div>
</div>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign packt_figref">Robot hardware block diagram</div>
</div>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Motor and encoder</h1>
                </header>
            
            <article>
                
<p>The robot that we are going to design is a differential-drive robot with two wheels, so we will require two motors for its locomotion. Each motor consists of quadrature encoders (<a href="http://www.creative-robotics.com/quadrature-intro"><span class="URLPACKT">http://www.creative-robotics.com/quadrature-intro</span></a>) so that we can get motor rotation feedback data.</p>
<p>The quadrature encoder will send data regarding of the rotation of the motor as square pulses; we can decode the pulses to get the number of the encoder's ticks, which can be used for feedback. If we know the wheel's diameter and the number of ticks of the motor, we can compute the displacement and the angle of the robot that moved. This computation is very useful for us in our attempts to navigate the robot.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting motors, encoders, and wheels for the robot</h1>
                </header>
            
            <article>
                
<p>From the simulation, we got an idea of the robot's parameters. While experimenting with the simulation's parameters, we mentioned that the motor torque needed to drive the robot is 18 N, but the calculated torque is slightly more than this; we are selecting a standard torque motor that is very close to the actual torque in order to make the motor selection easier. One of the standard motors that we might consider is from Pololu. According to our design specifications, we could select a high-torque DC gear motor with an encoder working at 12 V DC and with a speed of 80 RPM.</p>
<p>The following image shows the selected motor for this robot. The motor comes with an integrated quadrature encoder with a resolution of 64 counts per revolution of the motor shaft, which corresponds to 8,400 counts per revolution of the gearbox's output shaft:</p>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign"><img src="images/9e3b0acd-1978-499f-90e8-3d35eb65a160.png" style="width:13.83em;height:11.33em;"/></div>
</div>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign packt_figref">DC gear motor with encoder and wheel (see https://www.pololu.com/product/2827)</div>
</div>
<p>This motor has six differently colored pins . The descriptions of this motor's pins are given in the following table:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Color</strong></p>
</td>
<td>
<p><strong>Function</strong></p>
</td>
</tr>
<tr>
<td>
<p>Red</p>
</td>
<td>
<p>Motor power (connects to one motor terminal)</p>
</td>
</tr>
<tr>
<td>
<p>Black</p>
</td>
<td>
<p>Motor power (connects to the other motor terminal)</p>
</td>
</tr>
<tr>
<td>
<p>Green</p>
</td>
<td>
<p>Encoder GND</p>
</td>
</tr>
<tr>
<td>
<p>Blue</p>
</td>
<td>
<p>Encoder Vcc (3.5 V-20 V)</p>
</td>
</tr>
<tr>
<td>
<p>Yellow</p>
</td>
<td>
<p>Encoder A output</p>
</td>
</tr>
<tr>
<td>
<p>White</p>
</td>
<td>
<p>Encoder B output</p>
</td>
</tr>
</tbody>
</table>
<p>&#160;</p>
<p>In accordance with our design specifications, we will choose a wheel diameter of 90 mm. Pololu provides a 90-mm wheel, which is available at <a href="http://www.pololu.com/product/1439"><span class="URLPACKT">http://www.pololu.com/product/1439</span></a>. The preceding image showed the motor assembled with this wheel.</p>
<p>The other connectors needed to connect the motors and wheels together are available as follows:</p>
<ul>
<li>The mounting hub required to mount the wheel to the motor shaft is available at <a href="http://www.pololu.com/product/1083"><span class="URLPACKT">http://www.pololu.com/product/1083</span></a>.</li>
<li>The L-bracket for the motor to mount onto the robot chassis is available at <a href="http://www.pololu.com/product/1084"><span class="URLPACKT">http://www.pololu.com/product/1084</span></a>.</li>
</ul>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Motor driver</h1>
                </header>
            
            <article>
                
<p>A <strong>motor driver</strong>, or <strong>motor controller</strong>, is a circuit that can control the speed of the motor. By controlling the motors, we mean that we can control the voltage across the motors and can also control the direction and speed of the motors. Motors can rotate clockwise or counter clockwise if we change the polarity of the motor terminal.</p>
<p><strong>H-bridge</strong> circuits are commonly used in motor controllers. An <strong>H-bridge</strong> is an electronic circuit that can apply voltage in either direction of the load. It has high current-handling properties and can change the direction of the current flow.</p>
<p>The following diagram shows a basic H-bridge circuit using switches:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/440ebeef-7d5b-4dfb-af85-00ef5275369a.png" style="width:27.67em;height:12.92em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">H -bridge circuit</div>
<p>The direction of the motor according to the state of the four switches is given as follows:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>S1</strong></p>
</td>
<td>
<p><strong>S2</strong></p>
</td>
<td>
<p><strong>S3</strong></p>
</td>
<td>
<p><strong>S4</strong></p>
</td>
<td>
<p><strong>Result</strong></p>
</td>
</tr>
<tr>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>Motor moves right</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>Motor moves left</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>Motor free runs</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>Motor brakes</p>
</td>
</tr>
<tr>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>Motor brakes</p>
</td>
</tr>
<tr>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>Motor shoots through</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>Motor shoots through</p>
</td>
</tr>
<tr>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>Motor shoots through</p>
</td>
</tr>
</tbody>
</table>
<p>&#160;</p>
<p>We have seen the basics of an H-bridge circuit in the preceding motor driver circuit diagram. Now, we will select one of the motor drivers for our application and discuss how it works.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting a motor driver/controller</h1>
                </header>
            
            <article>
                
<p>There are some motor drivers available in Pololu that are compatible with the selected motor. The following image shows one of the motor drivers that we will use in our robot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/4de5ba83-20c4-45f2-b3a8-e07cf339f187.png" style="width:24.67em;height:17.83em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Dual VNH2SP30 motor driver carrier MD03A</div>
<p>This motor driver is available at <a href="http://www.pololu.com/product/708"><span class="URLPACKT">http://www.pololu.com/product/708</span></a>.</p>
<p>This driver can drive two motors with a maximum current rating of 30 A, and contains two integrated ICs for driving each of the motors. The pin description of this driver is given in the upcoming sections.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Input pins</h1>
                </header>
            
            <article>
                
<p>The following pins are the input pins of the motor driver, through which we can control mainly the motor speed and direction:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Pin name</strong></p>
</td>
<td>
<p><strong>Function</strong></p>
</td>
</tr>
<tr>
<td>
<p>1DIAG/EN, 2DIAG/EN</p>
</td>
<td>
<p>These monitor the fault conditions of motor drivers 1 and 2. In a normal operation, they will remain disconnected.</p>
</td>
</tr>
<tr>
<td>
<p>1INa, 1INb, 2INa, 2INb</p>
</td>
<td>
<p>These pins will control the direction of motors 1 and 2 in the following manner:</p>
<ul>
<li>If INA = INB = 0, the motor will break</li>
<li>If INA = 1, INB = 0, the motor will rotate clockwise</li>
<li>If INA = 0, INB = 1, the motor will rotate counter clockwise</li>
<li><span class="URLPACKT">*</span> If INA = INB = 1, the motor will break</li>
</ul>
</td>
</tr>
<tr>
<td>
<p>1PWM, 2PWM</p>
</td>
<td>
<p>This will control the speed of motors 1 and 2 by turning them on and off at very high speed.</p>
</td>
</tr>
<tr>
<td>
<p>1CS, 2CS</p>
</td>
<td>
<p>This is the current sensing pin for each motor.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Output pins</h1>
                </header>
            
            <article>
                
<p>The output pins of the motor driver will drive the two motors. The following are the output pins:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Pin name</strong></p>
</td>
<td>
<p><strong>Function</strong></p>
</td>
</tr>
<tr>
<td>
<p>OUT 1A, OUT 1B</p>
</td>
<td>
<p>These pins can connect to motor 1's power terminals.</p>
</td>
</tr>
<tr>
<td>
<p>OUT 2A, OUT 2B</p>
</td>
<td>
<p>These pins can connect to motor 2's power terminals.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Power supply pins</h1>
                </header>
            
            <article>
                
<p>The following are the power supply pins:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Pin name</strong></p>
</td>
<td>
<p><strong>Function</strong></p>
</td>
</tr>
<tr>
<td>
<p>VIN (+), GND (-)</p>
</td>
<td>
<p>These are the supply pins of the two motors. The voltage ranges from 5.5 V to 16 V.</p>
</td>
</tr>
<tr>
<td>
<p>+5 VIN, GND (-)</p>
</td>
<td>
<p>This is the power supply of the motor driver. The voltage should be 5 V.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Embedded controller board</h1>
                </header>
            
            <article>
                
<p><strong>Controller boards</strong> are typically I/O boards that can send control signals in the form of digital pulses to the H-bridge/motor-driver board and can receive inputs from sensors, such as ultrasonic and IR sensors. We can also interface motor encoders with the control board in order to send data from the motor.</p>
<p>The main uses of the controller board in this robot are as follows:</p>
<ul>
<li>Interfacing the motor driver and encoder</li>
<li>Interfacing the ultrasonic sound sensor</li>
<li>Sending and receiving sensor values to and from the PC</li>
</ul>
<p>We will deal with I/O boards and interfacing with different components in the upcoming chapters. Some of the more popular I/O boards are Arduino (<span class="URLPACKT">arduino.cc</span>) and Tiva-C LaunchPad (<a href="http://www.ti.com/tool/EK-TM4C123GXL"><span class="URLPACKT">http://www.ti.com/tool/EK-TM4C123GXL</span></a>) by Texas Instruments. We are selecting Tiva-C LaunchPad over Arduino because of the following factors:</p>
<ul>
<li>Tiva-C LaunchPad has a microcontroller based on a 32-bit ARM Cortex-M4 with 256 KB flash memory, 32 KB SRAM, and 80 MHz data transmission frequency; most Arduino boards run below these specifications.</li>
<li>Outstanding processing performance combined with fast interrupt handling.</li>
<li>12 timers.</li>
<li>16 PWM outputs.</li>
<li>2 quadrature encoder inputs.</li>
<li>8 <strong>universal asynchronous receiver/transmitters</strong> (<strong>UART</strong>).</li>
<li>5 V-tolerant <strong>general-purpose input/output</strong> (<strong>GPIO</strong>).</li>
<li>Low cost and size compared to Arduino boards.</li>
<li>Easily programmable interface IDE called Energia (<span class="URLPACKT">http://energia.nu/</span>). The code written in Energia is Arduino-board compatible.</li>
</ul>
<p>The following image shows Texas Instrument's Tiva-C LaunchPad:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/02bd256a-b995-419e-88df-cab4ee6cf78c.png" style="width:28.50em;height:35.50em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Tiva-C LaunchPad 123 (http://www.ti.com/tool/EK-TM4C123GXL)</div>
<p>The pinout of Texas Instrument's LaunchPad series is given at <a href="http://energia.nu/pin-maps/guide_stellarislaunchpad/"><span class="URLPACKT">http://energia.nu/pin-maps/guide_stellarislaunchpad/</span></a>. This pinout map is compatible with all LaunchPad series releases. This can also be used while programming in the Energia IDE.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Ultrasonic sensors</h1>
                </header>
            
            <article>
                
<p><strong>Ultrasonic sensors</strong>, also called ping sensors and are mainly used to measure the distance from an object. The main application of ping sensors is to avoid obstacles. The ultrasonic sensor emits high-frequency sound waves and evaluates the echoes that it receives from the object. The sensor will calculate the delay between the sending and receiving of the echo and determine its distance to the object.</p>
<p>In our robot, collision-free navigation is an important part of the design specifications, otherwise there will be damage to the robot. You will see an image showing an ultrasonic sensor in the next section. This sensor can be installed on the sides of a robot to detect collisions at the sides and back of the robot. Kinect is also mainly used for obstacle detection and collision avoidance when used in robotics. Kinect can only be expected to be accurate at a range of 0.8 m, so the remaining distance from the 0.8 m-range limit can be detected using an ultrasonic sensor. In this case, the ultrasonic sensor is actually an add-on to our robot in order to increase its collision avoidance and detection abilities.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting an ultrasonic sensor</h1>
                </header>
            
            <article>
                
<p>One of the more popular and cheap ultrasonic sensors available is <strong>HC-SR04</strong>. We are selecting this sensor for our robot because of the following factors:</p>
<ul>
<li>Range of detection is from 2 cm to 4 m</li>
<li>Working voltage is 5 V</li>
<li>Working current is very low, typically 15 mA</li>
</ul>
<p>We can use this sensor to accurately detect obstacles. It also works at 5 V. Here is an image of HC-SR04 and its pinout:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/37902c89-4ce4-4281-ad65-ad1795571060.png" style="width:19.58em;height:11.83em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Ultrasonic sound sensor (https://www.makerfabs.com/index.php?route=product/product&amp;product_id=72)</div>
<p>The pins and their functions are given as follows:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Pins</strong></p>
</td>
<td>
<p><strong>Function</strong></p>
</td>
</tr>
<tr>
<td>
<p>Vcc, GND</p>
</td>
<td>
<p>These are the supply pins of the ultrasonic sensor. Usually, we need to apply 5 V for it to operate normally.</p>
</td>
</tr>
<tr>
<td>
<p>Trig</p>
</td>
<td>
<p>This is the input pin of the sensor. We need to apply a pulse with a particular duration to this pin to send the ultrasonic sound waves.</p>
</td>
</tr>
<tr>
<td>
<p>Echo</p>
</td>
<td>
<p>This is the output pin of the sensor. It will generate a pulse on this pin with a time duration according to the delay in receiving the triggered pulse.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Inertial measurement unit</h1>
                </header>
            
            <article>
                
<p>We will use&#160;<strong>the inertial measurement unit</strong> (<strong>IMU</strong>) in this robot to get a good estimate of the odometry value and the robot's pose. The odometry values computed from the encoder alone may not be sufficient for efficient navigation, as they can contain errors. To compensate for the error during the robot's movement, especially rotation, we will use the IMU in this robot. We are selecting MPU 6050 for the IMU because of the following reasons:</p>
<ul>
<li>In MPU 6050, the accelerometer and gyroscope are integrated on a single chip</li>
<li>It provides high accuracy and sensitivity</li>
<li>We are able to interface with a magnetometer for better IMU performance</li>
<li>The breakout board of MPU 6050 is very cheap</li>
<li>MPU 6050 can directly interface with LaunchPad</li>
<li>Both MPU 6050 and LaunchPad are 3.3 V-compatible</li>
<li>Software libraries are also available for easier interfacing between MPU 6050 and LaunchPad</li>
</ul>
<p>The following image shows the breakout board of MPU 6050:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/4ee5c70b-776c-4a0e-9c0e-d532812fd12f.jpg" style="width:9.83em;height:12.67em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">The MPU 6050 device</div>
<p>The pins and their functions are given as follows:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Pins</strong></p>
</td>
<td>
<p><strong>Functions</strong></p>
</td>
</tr>
<tr>
<td>
<p>VDD, GND</p>
</td>
<td>
<p>Supply voltage 2.3 V-3.4 V</p>
</td>
</tr>
<tr>
<td>
<p>INT</p>
</td>
<td>
<p>This pin will generate an interrupt when data comes to the device buffer</p>
</td>
</tr>
<tr>
<td>
<p>SCL, SDA</p>
</td>
<td>
<p><strong>Serial data line</strong> (<strong>SDA</strong>) and <strong>serial clock line</strong> (SCL) are used for I2C communication</p>
</td>
</tr>
<tr>
<td>
<p>ASCL, ASDA</p>
</td>
<td>
<p>Auxiliary I2C for communication with the magnetometer</p>
</td>
</tr>
</tbody>
</table>
<p>&#160;</p>
<p>We can purchase the breakout board from Amazon at <a href="http://a.co/9EBIquO"><span class="URLPACKT">http://a.co/9EBIquO</span></a>.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Kinect/Orbbec Astra</h1>
                </header>
            
            <article>
                
<p><strong>Kinect</strong> is a 3D-vision sensor, mainly used in 3D-vision applications and motion-based gaming. We are using Kinect for 3D vision. Using Kinect, the robot will get a 3D image of the surrounding. The 3D images are converted to finer points that are gathered to form a point cloud. The point cloud data will have all the 3D parameters that constitute the surrounding environment.</p>
<p>The main use of Kinect on the robot is to mock the functionality of a laser scanner. The laser scanner data is essential for the SLAM algorithm to build a map of the environment. The laser scanner is a very costly device, so instead of buying an expensive laser scanner, we can convert a Kinect into a virtual laser scanner. Kinect has officially stopped production, but it's still available from some vendors. One of the alternatives to Kinect is Orbbec Astra (<a href="https://orbbec3d.com/product-astra/"><span class="URLPACKT">https://orbbec3d.com/product-astra/</span></a>). It will support the same software that is written for Kinect. The point-cloud-to-laser-data conversion is done with this software, so we only need to change the device driver if you are using Astra; the resetting of the software is the same. After generating the map of the environment, the robot can navigate the surroundings. The following image shows the Kinect sensor (A) and Orbbec Astra (B):</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/1c4edfe9-8daa-45c2-8dab-c74dd8d352fc.png" style="width:14.33em;height:10.42em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Kinect and Orbbec Astra</div>
<p>Kinect mainly has an IR camera and projector, as well as an RGB camera. The IR camera and projector generates the 3D point cloud of the surrounding area. It also has a mic array and motorized tilt for moving the Kinect up and down. The Astra is very similar to Kinect.</p>
<p>We can purchase Kinect from <a href="http://www.amazon.co.uk/Xbox-360-Kinect-Sensor-Adventures/dp/B0036DDW2G">http://www.amazon.co.uk/Xbox-360-Kinect-Sensor-Adventures/dp/B0036DDW2G</a>.</p>
<p>We can purchase Astra from <a href="https://orbbec3d.com/product-astra/">https://orbbec3d.com/product-astra/</a>.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Central processing unit</h1>
                </header>
            
            <article>
                
<p>The robot is mainly controlled by the navigational algorithm that is running on its PC. We can choose a laptop, mini PC, or net book to use for the robot's processing functionalities. Recently, Intel launched a mini PC called Intel <strong>Next Unit of Computing</strong> (<strong>NUC</strong>). It has an ultra-small form factor (size), is lightweight, and has a good computing processor with either Intel Celeron, Core i3, or Core i5. It can support up to 16 GB of RAM and has integrated Wi-Fi/Bluetooth. We are choosing Intel NUC because of its performance, ultra-small form factor, and its light weight. We are not going for a popular board, such as Raspberry Pi (<a href="http://www.raspberrypi.org/"><span class="URLPACKT">http://www.raspberrypi.org/</span></a>) or Beagle Bone (<a href="http://beagleboard.org/"><span class="URLPACKT">http://beagleboard.org/</span></a>), because we require high-computing power, and this cannot be provided by these boards.</p>
<p>The NUC we are using is <strong>Intel DN2820FYKH</strong>. Here is the specification of this computer:</p>
<ul>
<li>Intel Celeron dual core processor with 2.39 GHz</li>
<li>4 GB RAM</li>
<li>500 GB hard disk</li>
<li>Intel-integrated graphics</li>
<li>Headphone/microphone jack</li>
<li>12 V supply</li>
</ul>
<p>The following image shows the Intel NUC minicomputer:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/fe1a2290-3758-44c9-86f0-63923de9a671.png" style="width:10.25em;height:7.92em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Intel NUC DN2820FYKH</div>
<p>We can purchase NUC from Amazon at <a href="http://a.co/2F2flYl">http://a.co/2F2flYl</a>.</p>
<p>This model of NUC is an old model; if it is not available, you can check for a low-cost NUC using the following links shown:</p>
<ul>
<li>Intel NUC BOXNUC6CAYH (<a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc6cayh.html">https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc6cayh.html</a>)</li>
<li><strong>Intel NUC KIT NUC7CJYH (</strong><a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc7cjyh.html"><span class="URLPACKT">https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc7cjyh.html</span></a>)</li>
<li><strong>Intel NUC KIT NUC5CPYH (</strong><a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc5cpyh.html"><span class="URLPACKT">https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc5cpyh.html)</span></a></li>
<li><strong>Intel NUC KIT NUC7PJYH</strong><span class="URLPACKT">&#160;(<a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc7pjyh.html">https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc7pjyh.html</a></span>)</li>
</ul>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Speakers/mic</h1>
                </header>
            
            <article>
                
<p>The main function of the robot is autonomous navigation. We will add an additional feature with which the robot can interact with users through speech. The robot can be given commands using voice input and can speak to the user using a <strong>text-to-speech</strong> (<strong>TTS</strong>) engine, which can convert text to speech format. A microphone and speakers are essential for this application. There is no particular selection that we will recommend for this hardware. If the speaker and mic are USB compatible, then that will be great. One of the other alternatives is a Bluetooth headset.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Power supply/battery</h1>
                </header>
            
            <article>
                
<p>One of the most important hardware components is the power supply. We saw in the specification that the robot has to work for more than one hour. It will be good if the supply voltage of the battery is compatible with that required by the components. Also, if the size and weight of the battery is less than what we had in mind, it will not affect the robot's payload.</p>
<p>Another concern is that the maximum current needed for the entire circuit will not exceed the battery's maximum current, that it can source. The maximum voltage and current distribution of each part of the circuit is as follows:</p>
<table style="border-collapse: collapse" border="1">
<tbody>
<tr>
<td>
<p><strong>Component</strong></p>
</td>
<td>
<p><strong>Maximum current (in amperes)</strong></p>
</td>
</tr>
<tr>
<td>
<p>Intel NUC PC</p>
</td>
<td>
<p>12 V, 5 A</p>
</td>
</tr>
<tr>
<td>
<p>Kinect</p>
</td>
<td>
<p>12 V, 1 A</p>
</td>
</tr>
<tr>
<td>
<p>Motors</p>
</td>
<td>
<p>12 V, 0.7 A</p>
</td>
</tr>
<tr>
<td>
<p>Motor driver, ultrasonic sensors, IMU, speakers</p>
</td>
<td>
<p>5 V, &lt; 0.5 A</p>
</td>
</tr>
</tbody>
</table>
<p>&#160;</p>
<p>To meet these specifications, we are selecting a 12 V, 10 AH li-polymer or sealed lead acid (SLA) battery for our robot. Here is a typical low-cost SLA battery that we can use for this purpose:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/6be70a5e-ee95-4ed1-ac4e-79de7bd42e10.png" style="width:40.08em;height:29.50em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Sealed lead acid battery</div>
<p>We can buy this battery from <a href="http://a.co/iOaMuZe">http://a.co/iOaMuZe</a>. You can choose a battery based on how convenience it is for you, but it should satisfy the robot's power requirements.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How ChefBot’s hardware works’?</h1>
                </header>
            
            <article>
                
<p>We can explain how ChefBot's hardware works using the following block diagram. This is an improved version of our first block diagram, as it mentions the voltage of each component and its interconnection:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="images/d5ec768d-2df2-462d-aa9d-5e782054f8de.png" style="width:44.83em;height:30.00em;"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Detailed block diagram of Chefbot's hardware</div>
<p>The main aim of this chapter was to design the hardware for ChefBot, which included finding the appropriate hardware components and learning about the interconnection between each part. The main functionality of this robot is to perform autonomous navigation. The hardware design of the robot is optimized for autonomous navigation.</p>
<p>The robot drive is based on the differential-drive system, which consists of two motors and two wheels. There are caster wheels for supporting the main wheels. These two motors can move the robot to face in any direction on a 2D plane by adjusting their direction and speed of rotation.</p>
<p>For controlling the velocity and direction of the wheels, we have to interface a motor controller, which can perform these functions. The motor driver we choose should able to control two motors at the same time, and it should also be able to change their direction and speed.</p>
<p>The motor driver pins are interfaced with a microcontroller board called Tiva-C LaunchPad, which can send the commands to change the direction and speed of the motor. The motor driver is interfaced with LaunchPad with the help of a level shifter. The <strong>level shifter</strong> is a circuit that can shift voltage levels from 3.3 V to 5 V and vice versa. We are using a level shifter because the motor driver is operating at a level of 5 V, but the LaunchPad board is operating at 3.3 V.</p>
<p>Each motor has a rotation feedback sensor called an encoder, which can be used to estimate the robot's position. The encoders are interfaced with LaunchPad with the level shifter.</p>
<p>Other sensors that are interfaced with LaunchPad include an ultrasonic sound sensor and IMU. The ultrasonic sound sensor can detect objects that are close by, but that cannot be detected by the Kinect sensor. IMU is used along with encoders to get a good estimation of the robot's pose.</p>
<p>All sensor values are received on the LaunchPad and sent to the PC via USB. The LaunchPad board runs a firmware code that can receive all sensor values and send them to the PC.</p>
<p>The PC is interfaced with Kinect, the LaunchPad board, the speaker, and the mic. The PC has ROS running on it, and it will receive Kinect data and convert it to its equivalent laser scanner data. This data can be used to build a map of the environment using SLAM. The speaker and mic are used for communication between the user and robot. The speed commands generated in ROS nodes are sent to LaunchPad. LaunchPad will process the speed commands and send the appropriate PWM values to the motor driver circuit.</p>
<p>After designing and discussing the workings of the robot's hardware, we can discuss the detailed interfacing of each component and the firmware coding necessary for this interfacing in the next chapter.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we have looked at the features of the robot that we are going to design. The main feature of this robot is its autonomous navigation. The robot can navigate its surroundings by analyzing sensor readings. We looked at the robot's block diagram and discussed the role of each block, selecting the appropriate components that satisfy our requirements. We also suggested some economical components with which to build this robot. In the next chapter, we will take a closer look at actuators and the interfacing that we will use for them in this robot.</p>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<ol>
<li>What is robot hardware design all about?</li>
<li>What is an H-bridge circuit and what are its functions?</li>
<li>What are the essential components for a robot's navigation algorithm?</li>
<li>What are the criteria that have to be kept in mind while selecting robotic components?</li>
<li>What are the main applications of Kinect as regards this robot?</li>
</ol>


            </article>

            
        </section>
    </div>


  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<p>You can learn more about the Tiva-C LaunchPad board from the following link:</p>
<p><a href="http://processors.wiki.ti.com/index.php/Getting_Started_with_the_TIVA%E2%84%A2_C_Series_TM4C123G_LaunchPad">http://processors.wiki.ti.com/index.php/Getting_Started_with_the_TIVA%E2%84%A2_C_Series_TM4C123G_LaunchPad</a></p>


            </article>

            
        </section>
    </div>
</body>
</html>