<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Building Conversational Interfaces Using AWS Lex</h1>
                </header>
            
            <article>
                
<p class="mce-root">One of the most popular applications of machine learning is chatbots; they can talk to you like a human being and understand your instructions. These chatbots use <strong>natural language processing</strong> (<strong>NLP</strong>) to decipher instructions and return a query or answer based on your questions. Amazon offers a service called <strong>Lex</strong> (it is a short form of <strong>Alexa</strong>), where you can build sophisticated chatbots that can perform various tasks. </p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Introducing Amazon Lex</li>
<li>Building custom chatbot using Amazon Lex</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introducing Amazon Lex</h1>
                </header>
            
            <article>
                
<p>Amazon Lex (<a href="https://aws.amazon.com/lex/">https://aws.amazon.com/lex/</a>) offers services that can be used to create conversational bots. Conversational bots use various machine learning technologies such as <strong>speech recognition</strong>, <strong>NLP</strong>, and <strong>deep learning</strong>. Due to advances in these fields in recent years, conversational bots have become a mainstay in our everyday life. Millions of people use Amazon Alexa, Google Assistant, Siri, or Cortana as a conversational device to perform various tasks. These devices can perform simple tasks, such as tell you the weather, call an Uber for you, order a pizza, and control your lighting. Many businesses offer chatbots for customer support. For example, Verizon FIOS, which is an internet provider, offers a chatbot that can perform tasks such as pointing you to the correct troubleshooting documentation or resetting your router based on a chat with you. Many companies also use such conversational bots to make robocalls (automated calls), where it is very hard for a person to tell whether the caller on the other side is not a real human being. </p>
<p class="mce-root"/>
<p>Building such conversational bots from scratch is not easy. As we studied in <a href="b83ce0ca-e2d7-43f5-9e82-21edb54250c9.xhtml">Chapter 10</a>, <em>Working with AWS Comprehend</em>, natural language does not follow a rigid grammatical structure and we have multiple ways to convey the same meaning. So, a conversational bot needs to be able to decipher the relevant data from a natural language query and respond with the most likely answer. Devices such as Amazon Echo can understand the query in different formats and discover what is the most relevant information that can be presented to the user. Firstly, such devices need to understand the speech and convert it into text that the machine can understand. Secondly, they need to trigger the correct skill that can answer that question and present the user input to that skill. Once the skill generates the answer, it has to be translated back to speech using text-to-speech transformers. All these steps require dedicated and high-quality deep learning models to perform these tasks. For example, Amazon uses a deep learning model to determine the pauses between words in their text-to-speech transformers. </p>
<p>Although building such conversational bots may sound like a daunting task, Amazon also offers services where you utilize their models to generate such tasks. This service is called Amazon Lex and you access it <span><span>using</span></span> the AWS console. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building a custom chatbot using Amazon Lex</h1>
                </header>
            
            <article>
                
<p>In this section, we will build a simple custom conversational bot using Amazon Lex. To access the Amazon Lex dashboard, simply go to the AWS console and search for this service. Once you reach the dashboard, you will have an option to create a new bot. You can build separate bots that can handle specific tasks. In this example, we provide the following steps to create a bot that the user can ask to order food from a specific restaurant at a specified time:</p>
<ol>
<li>To get started, click on the <span class="packt_screen">Create bot</span> option on the dashboard. You will be able to access the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign" style="padding-left: 30px"><img class="aligncenter size-full wp-image-656 image-border" src="assets/6d292eae-ebb2-4f8b-8785-8d2642748649.png" style="width:71.83em;height:52.92em;"/></p>
<p style="padding-left: 60px">You will have to specify the bot name on this screen and the voice that you want to select when testing the bot. You can also specify when the session times out so that a person who has left the order incomplete and left their machine are not at risk of someone else continuing their chat session. We are creating a custom bot in this example. However, you can also access sample bots to test the service and see how those bots were created.</p>
<ol start="2">
<li>When you click on the <span class="packt_screen">Create</span> button, you will be taken to the next screen where you have to enter information regarding how your bot works. Firstly, you will have to specify how your specific bot is triggered in the chat screen. In our case, there are various ways in which a user can let the chat window know that they are hungry, so you should add samples of what queries should trigger your bot. Such queries are called <strong>utterances</strong> in Amazon Lex. We added the following utterances <span>that would trigger our bot:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-839 image-border" src="assets/a38b09b9-146e-40d5-8ac6-5cf230c244c7.png" style="width:19.75em;height:13.25em;"/></p>
<ol start="3">
<li>Amazon Lex will use machine learning to expand the list of utterances, so that if a user asks a question such as <kbd>Can you order some food</kbd>, our bot will still be triggered, as the utterance is similar to the one we specified. </li>
<li>Once we specify what will trigger our bot, we have to specify what happens when the bot starts. You can either use the Lambda function on AWS that can perform a specific task, or use the dashboard to design the chat. Since designing lambda functions is not in the scope of this book, we will use the dashboard to ask the user what they would like to order. The following screen options show how we can add information that we expect from the users:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-658 image-border" src="assets/e62ce9d9-5ede-4a61-b81f-2cb7c7a06d72.png" style="width:109.08em;height:25.17em;"/></p>
<p class="mce-root"/>
<ol start="5">
<li>We define three variables that we would like our chatbot to get inputs on. For example, we would want to know the name of the restaurant they want to order from, what they want to order, and the time they want their food to be ready. Amazon Lex offers pre-built slots (variable types) that you can select when getting the inputs. For example, the <span class="packt_screen">AMAZON.Food</span> slot type will try to ensure that the value of the variable is a type of food, while the <span class="packt_screen">AMAZON.Time</span> variable type will ensure that the time added is a valid time.</li>
<li>Once our bot has information for all the variables that are required, you have to specify how the bot will respond. In our case, to keep it simple, we will just tell the user that we have ordered the food (please note that this code does not really order food). If you were building a real application that orders food, you can also invoke a lambda function that can run custom code with the variable names. The following screenshot shows how you can add the information about how the bot responds, along with a confirmation screen:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-840 image-border" src="assets/fa22ea15-33f0-47e9-a717-a1d1b48c0b9c.png" style="width:38.83em;height:10.67em;"/></p>
<ol start="7">
<li>If the user confirms, you can provide a thank you message to the user using the following <span class="packt_screen">Fulfillment</span> option:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-660 image-border" src="assets/0a012d34-ec3d-4e03-b473-c83d63d8ed3d.png" style="width:29.92em;height:18.58em;"/></p>
<ol start="8">
<li>Once you are done filling out the form, you can build your bot using the <span class="packt_screen">build</span> option on the screen. If you made any errors on the screen, the build will prompt you to fix them. Finally, once you have built your bot successfully, you can test it by selecting the <span class="packt_screen">Test Chatbot</span> option on the right-hand side. The following screen shows how our chatbot works. <span>As you can see, we were able to chat with our chatbot and (pretend to) order food from it, as shown in the following screenshot:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-661 image-border" src="assets/61016471-0011-470e-b426-f535a20fc273.png" style="width:23.83em;height:43.50em;"/></p>
<p>Amazon Lex makes creating chatbots very accessible to everyone by adding a layer of abstraction between the actual machine learning models and the users. You can concentrate on building a bot that best fits your needs, without worrying about the algorithms behind the scenes. As Amazon Lex is a service, AWS charges you based on the calls you make to their machine learning models. </p>
<p>Moreover, Amazon Lex models can be exported to the Alexa Skills kit easily using the <span class="packt_screen">Export</span> option in the <span class="packt_screen">Actions</span> drop-down menu for each bot. So, by using Amazon Lex, you can design chatbots in a matter of minutes and publish them to be used by Alexa. Amazon Lex also has APIs that you can use to build the bots, so that you can update or edit your utterances or slots using your code. Please refer to the boto3 API (<a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lex-models.html">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lex-models.html</a>) documentation to learn how to use the API. The calls to APIs use codes similar to the examples we presented in <a href="b83ce0ca-e2d7-43f5-9e82-21edb54250c9.xhtml">Chapter 10</a>, <em>Working with AWS Comprehend</em>, and <a href="b6601397-10a0-4a94-ba9f-32b5bfcdbb06.xhtml">Chapter 11</a>, <em>Using AWS Rekognition</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>Amazon Lex makes building conversational bots easier and more accessible for everyone. Conversational bots use a lot of machine learning models to provide users with quick answers to their queries. Amazon Lex provides a graphical interface where you can specify what utterances your bot should respond to, slots of information it should collect, and confirmation questions that your bot should ask the user. Such tools can be tested directly on the dashboard, as we demonstrated in the previous section. </p>
<p>As data scientists need to build applications that wow the customers, using tools such as Amazon Comprehend, Rekognition, and Lex is a good way to build these prototypes rapidly. However, these services may prove to be expensive when used on a large scale. In such cases, we always work on building our own models using frameworks such as Apache Spark or SageMaker. </p>
<p>In the next chapter, we will study how to set up new AWS clusters, and examine the nuances of how to select the correct cluster for your task.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Exercises</h1>
                </header>
            
            <article>
                
<ol>
<li>Create a chatbot that provides you with the status of a flight based on the information provided by the user.</li>
<li>Create a chatbot that can answer various weather-related questions.</li>
</ol>


            </article>

            
        </section>
    </body></html>