- en: '*Chapter 2:*'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第二章*：'
- en: Exploratory Analysis of Data
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据的探索性分析
- en: Learning Objectives
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 学习目标
- en: 'By the end of this chapter, you will be able to:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，您将能够：
- en: Define a problem statement with industry standard frameworks
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用行业标准框架定义问题陈述
- en: Perform univariate and bivariate analysis
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行单变量和多变量分析
- en: Explain multivariate analysis
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解释多元分析
- en: Perform hypothesis testing
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行假设检验
- en: Perform data wrangling using the dplyr and reshape2 packages
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用dplyr和reshape2包进行数据整理
- en: Visualize data using the ggplot2 package
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用ggplot2包可视化数据
- en: In this chapter, we will acquaint learners with techniques to clean, transform,
    and visualize data in order to get useful insights.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将向学习者介绍清洁、转换和可视化数据的技术，以便获得有用的见解。
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 简介
- en: '*Chapter 1*, *R for Advanced Analytics*, introduced to you the R language and
    its ecosystem for data science. We are now ready to enter a crucial part of data
    science and machine learning, that is, **Exploratory Data Analysis** (**EDA**),
    the art of understanding the data.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '*第一章*，*R高级分析*，向您介绍了R语言及其数据科学生态系统。我们现在准备进入数据科学和机器学习的关键部分，那就是**探索性数据分析**（**EDA**），理解数据的艺术。'
- en: In this chapter, we will approach EDA with the same banking dataset used in
    the previous chapter, but in a more problem-centric way. We will start by defining
    the problem statement with industry standard artifacts, design a solution for
    the problem, and learn how EDA fits in the larger problem framework. We will then
    tackle the EDA for the direct marketing campaigns (phone calls) of a Portuguese
    banking institution use case using a combination of data engineering, data wrangling,
    and data visualization techniques in R, backed up by a business-centric approach.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用与上一章相同的银行数据集来处理EDA，但以更问题为中心的方式。我们将首先使用行业标准工件定义问题陈述，为问题设计解决方案，并学习EDA如何适应更大的问题框架。我们将使用R中的数据工程、数据整理和可视化技术，结合以业务为中心的方法，来处理葡萄牙银行机构的直接营销活动（电话）用例的EDA。
- en: In any data science use case, understanding the data consumes the bulk of the
    time and effort. Most data science professionals spend around 80% of their time
    understanding data. Given that this is the most crucial part of your journey,
    it is important to have a macro-view of the overall process for any data science
    use case.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何数据科学用例中，理解数据占据了大部分的时间和精力。大多数数据科学专业人士花费大约80%的时间在理解数据上。鉴于这是您旅程中最关键的部分，对任何数据科学用例的整体过程有一个宏观的视角是很重要的。
- en: A typical data science use case takes the path of a core business-analytics
    problem or a machine-learning problem. With either path approached, EDA is inevitable.
    *Figure 2.1* demonstrates the life cycle of a basic data science use case. It
    starts by defining the problem statement using one or more standard frameworks,
    and then it delves into data gathering and reaches EDA. The majority of efforts
    and time in any project is consumed in EDA. Once the process of understanding
    the data is complete, a project may take a different path based on the scope of
    the use case. In most business analytics-based use cases, the next step is to
    assimilate all the observed patterns into meaningful insights. Though this might
    sound trivial, it is an iterative and arduous task. This step then evolves into
    story-telling, where the condensed insights are tailored into a meaningful story
    for the business stakeholders. Similarly, in scenarios where the objective is
    to develop a predictive model, the next step would be to actually develop a machine
    learning model and then deploy it into a production system/product.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的数据科学用例遵循核心业务分析问题或机器学习问题的路径。无论采取哪种路径，EDA都是不可避免的。*图2.1*展示了基本数据科学用例的生命周期。它从使用一个或多个标准框架定义问题陈述开始，然后深入数据收集并达到EDA。在任何项目中，大部分的努力和时间都消耗在EDA上。一旦理解数据的过程完成，项目可能会根据用例的范围采取不同的路径。在大多数基于业务分析的使用案例中，下一步是将所有观察到的模式综合成有意义的见解。尽管这可能听起来很
    trivial，但它是一个迭代且艰巨的任务。这一步随后演变为讲故事，其中浓缩的见解被定制成对业务利益相关者有意义的叙述。同样，在目标是为了开发预测模型的情况下，下一步将是实际开发机器学习模型并将其部署到生产系统/产品中。
- en: '![Figure 2.1: Life cycle of a data science use case'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.1：数据科学用例的生命周期'
- en: '](img/C12624_02_01.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/C12624_02_01.jpg)'
- en: 'Figure 2.1: Life cycle of a data science use case'
  id: totrans-18
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.1：数据科学用例的生命周期
- en: Let's take a brief look at the first step, *Defining the Problem Statement*.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们简要地看看第一步，*定义问题陈述*。
- en: Defining the Problem Statement
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义问题陈述
- en: If you recollect the data we explored in *Chapter 1*, *R for Advanced Analytics*,
    bank marketing data, we have a dataset that captures the telemarketing campaigns
    conducted by a bank to attract customers.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您还记得我们在*第一章*中探讨的数据，*高级分析中的R*，银行营销数据，我们有一个数据集，该数据集捕捉了银行进行的吸引客户的电话营销活动。
- en: A large multinational bank is designing a marketing campaign to achieve its
    growth target by enticing customers for bank deposits. The campaign has been ineffective
    in luring customers, and the marketing team wants to understand how the campaign
    can be improved to achieve the growth targets.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一家大型跨国银行正在设计一项营销活动，通过吸引客户存款来实现其增长目标。该活动在吸引客户方面效果不佳，营销团队希望了解如何改进活动以达到增长目标。
- en: We can reframe the problem from the business stakeholders' perspective and try
    to see what kind of solution would best fit here.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从业务利益相关者的角度重新构建问题，并尝试了解哪种解决方案最适合这里。
- en: Problem-Designing Artifacts
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 问题-设计工件
- en: Just like there are several frameworks, templates, and artifacts for software
    engineering and other industrial projects, data science and business analytics
    projects can also be effectively represented using industry standard artifacts.
    Some popular choices are available from consulting giants such as McKinsey, BCG,
    and decision sciences giants such as Mu Sigma. We will use a popular framework
    based on the **Minto Pyramid** principle called **Situation - Complication -Question
    Analysis** (**SCQ**).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 正如软件工程和其他工业项目有多个框架、模板和工件一样，数据科学和商业分析项目也可以使用行业标准工件有效地表示。一些流行的选择来自咨询巨头如麦肯锡、BCG，以及决策科学巨头如穆西伽。我们将使用一个基于**Minto金字塔**原则的流行框架，称为**情境-复杂性问题分析**（**SCQ**）。
- en: 'Let''s try defining the problem statement in the following construct:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试以下结构来定义问题陈述：
- en: '**Situation**: Define the current situation. We can simplify this by answering
    the question—what happened?'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**情境**：定义当前情况。我们可以通过回答问题来简化这一点——发生了什么？'
- en: A large multinational bank is designing a marketing campaign to achieve its
    growth target by enticing customers for bank deposits. The campaign has been ineffective
    in luring customers, and the marketing team wants to understand how the campaign
    can be improved to achieve the growth targets.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一家大型跨国银行正在设计一项营销活动，通过吸引客户存款来实现其增长目标。该活动在吸引客户方面效果不佳，营销团队希望了解如何改进活动以达到增长目标。
- en: In the previous section, we saw a hypothetical business problem framed for the
    banking data's use case. Though this might be different in reality, we are definitely
    trying to solve a valid use case. By representing the problem statement in the
    format demonstrated as in the previous format, we have a clear area to focus on
    and solve. This solves the first step in the life cycle of a typical data science
    use case. The second step is data gathering, which we explored in the previous
    chapter. We will refer to the same dataset provided by UCI machine learning repository
    at [https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing](https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们看到了一个为银行数据用例构建的假设商业问题。尽管在现实中可能有所不同，但我们确实在尝试解决一个有效的用例。通过以前格式展示的格式表示问题陈述，我们有一个明确的关注和解决问题的领域。这解决了典型数据科学用例生命周期中的第一步。第二步是数据收集，我们在上一章中探讨了这一点。我们将参考由UCI机器学习存储库提供的相同数据集，网址为[https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing](https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing)。
- en: Note
  id: totrans-30
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 备注
- en: '[Moro et al., 2014] S. Moro, P. Cortez, and P. Rita. A Data-Driven Approach
    to Predict the Success of Bank Telemarketing. Decision Support Systems, Elsevier,
    62:22-31, June 2014.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '[Moro et al., 2014] S. Moro, P. Cortez, and P. Rita. A Data-Driven Approach
    to Predict the Success of Bank Telemarketing. Decision Support Systems, Elsevier,
    62:22-31, June 2014.'
- en: 'This brings us to the final step: EDA. In this use case, we want to understand
    the various factors that are leading to the poor performance of the campaign.
    Before we delve into the actual exercise, let''s take a moment to understand the
    concept of EDA in a more intuitive way.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这将我们带到了最后一步：EDA。在这个用例中，我们想要了解导致活动表现不佳的各种因素。在我们深入实际练习之前，让我们花点时间以更直观的方式理解EDA的概念。
- en: Understanding the Science Behind EDA
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解EDA背后的科学
- en: In layman's terms, we can define EDA as the science of understanding data. A
    more formal definition is the process of analyzing and exploring datasets to summarize
    its characteristics, properties, and latent relationships using statistical, visual,
    analytical, or a combination of techniques.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 用通俗易懂的话来说，我们可以将EDA定义为理解数据的科学。更正式的定义是分析并探索数据集的过程，使用统计、视觉、分析或这些技术的组合来总结其特征、属性和潜在关系。
- en: To cement our understanding, let's break down the definition further. The dataset
    is a combination of numeric and categorical features. To study the data, we might
    need to explore features individually, and to study relationships, we might need
    to explore features together. Depending on the number of features and the type
    of features, we may cross paths with different types of EDA.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 为了巩固我们的理解，让我们进一步分解定义。数据集是数值特征和分类特征的组合。为了研究数据，我们可能需要单独探索特征，而为了研究关系，我们可能需要一起探索特征。根据特征的数量和类型，我们可能会遇到不同类型的探索性数据分析（EDA）。
- en: 'To simplify, we can broadly classify the process of EDA as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化，我们可以将EDA的过程大致分为以下几类：
- en: '**Univariate analysis**: Studying a single feature'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**单变量分析**：研究单个特征'
- en: '**Bivariate analysis**: Studying the relationship between two features'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**双变量分析**：研究两个特征之间的关系'
- en: '**Multivariate analysis**: Studying the relationship between more than two
    features'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**多元分析**：研究两个以上特征之间的关系'
- en: For now, we will restrict the scope of the chapter to **univariate** and **bivariate**
    analysis. A few forms of multivariate analysis, such as regression, will be covered
    in the upcoming chapters.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将本章的范围限制在**单变量**和**双变量**分析上。在接下来的章节中，我们将介绍一些多元分析形式，如回归。
- en: To accomplish each of the previously mentioned analyses, we can use visualization
    techniques such as boxplots, scatter plots, and bar charts; statistical techniques
    such as hypothesis testing; or simple analytical techniques such as averages,
    frequency counts, and so on.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成之前提到的每一项分析，我们可以使用可视化技术，如箱线图、散点图和条形图；统计技术，如假设检验；或者简单的分析技术，如平均值、频率计数等。
- en: Breaking this further down, we have another dimension to cater to, that is,
    the types of features—**numeric** or **categorical**. In each of the type of analysis
    mentioned—**univariate** and **bivariate**—based on the type of the feature, we
    might have a different visual technique to accomplish the study. So, for univariate
    analysis of a numeric variable, we could use a histogram or a boxplot, whereas
    we might use a frequency bar chart for a categorical variable. We will get into
    the details of the overall exercise of EDA using a *lazy programming* approach,
    that is, we will explore the context and details of the analysis as and when it
    occurs in the book.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 进一步细分，我们还有一个维度需要考虑，那就是特征的类型——**数值**或**分类**。在提到的每种分析类型中——**单变量**和**双变量**——根据特征类型，我们可能有不同的可视化技术来完成研究。因此，对于数值变量的单变量分析，我们可以使用直方图或箱线图，而对于分类变量，我们可能使用频率条形图。我们将以**懒编程**的方式深入了解EDA的整体练习，也就是说，我们将探索书中分析出现的上下文和细节。
- en: With the basic background context set for the exercise, let's get ready for
    a specific EDA exercise.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在为练习设置基本背景后，让我们为特定的EDA练习做好准备。
- en: Exploratory Data Analysis
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索性数据分析
- en: We will get started with the dataset available to download from UCI ML Repository
    at [https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing](https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从可以从UCI ML存储库下载的数据集开始，该存储库的网址为[https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing](https://archive.ics.uci.edu/ml/datasets/Bank%20Marketing)。
- en: Download the ZIP file and extract it to a folder in your workspace and use the
    file named `bank-additional-full.csv`. Ask the students to start a new Jupyter
    notebook or an IDE of their choice and load the data into memory.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 下载ZIP文件，将其解压到工作空间中的一个文件夹中，并使用名为`bank-additional-full.csv`的文件。要求学生启动一个新的Jupyter笔记本或他们选择的IDE，并将数据加载到内存中。
- en: 'Exercise 18: Studying the Data Dimensions'
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习18：研究数据维度
- en: Let's quickly ingest the data using the simple commands we explored in the previous
    chapter and take a look at a few essential characteristics of the dataset.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速使用上一章中探索的简单命令加载数据，并查看数据集的一些基本特征。
- en: We are exploring the length and breadth of the data, that is, the number of
    rows and columns, the names of each column, the data type of each column, and
    a high-level view of what is stored in each column.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 我们正在探索数据的长度和宽度，即行数和列数、每列的名称、每列的数据类型以及每列存储内容的概览。
- en: 'Perform the following steps to explore the bank dataset:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以探索银行数据集：
- en: 'First, import all the required libraries in RStudio:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，在RStudio中导入所有必需的库：
- en: '[PRE0]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Now, use the `option` method to set the `width` and `height` of the plot as
    `12` and `4`, respectively:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用`option`方法将图表的`width`和`height`分别设置为`12`和`4`：
- en: '[PRE1]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Ensure that you download and place the `bank-additional-full.csv` file in the
    appropriate folder. You can access the file from [http://bit.ly/2DR4P9I](http://bit.ly/2DR4P9I).
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 确保您下载并将`bank-additional-full.csv`文件放置在适当的文件夹中。您可以从[http://bit.ly/2DR4P9I](http://bit.ly/2DR4P9I)访问该文件。
- en: 'Create a DataFrame object and read the CSV file using the following command:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个DataFrame对象并使用以下命令读取CSV文件：
- en: '[PRE2]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now, use the following command to display the data from the dataset:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下命令显示数据集中的数据：
- en: '[PRE3]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The output is as follows:'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.2: Bank data from the bank-additional-full CSV file'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.2：来自bank-additional-full CSV文件的银行数据](img/C12624_02_02.jpg)'
- en: '](img/C12624_02_02.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/C12624_02_02.jpg)'
- en: 'Figure 2.2: Bank data from the bank-additional-full CSV file'
  id: totrans-63
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.2：来自bank-additional-full CSV文件的银行数据
- en: In the preceding example, we used the traditional `read.csv` function that's
    available in R to read the file into memory. We added an argument to the `sep=";"`
    function since the file is semicolon separated. The `str` function prints the
    high-level information we require about the dataset. If you carefully observe
    the output snippet, you can see that the first line denotes the shape of data,
    that is, the number of rows/observations and the number of columns/variables.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，我们使用了R中可用的传统`read.csv`函数将文件读入内存。由于文件是分号分隔的，我们向`sep=";"`函数添加了一个参数。`str`函数打印出我们所需的数据集的高级信息。如果您仔细观察输出片段，您可以看到第一行表示数据的形状，即行数/观测数和列数/变量数。
- en: The next 21 lines in the output snippet give us a sneak-peek of each variable
    in dataset. It displays the name of the variable, its datatype, and the first
    few values in the dataset. We have one line for each column. The `str` function
    practically gives us a macro-view of the entire dataset.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 输出片段中的下21行展示了数据集中每个变量的预览。它显示了变量的名称、其数据类型和数据集中的一些值。我们为每一列有一个条目。`str`函数实际上为我们提供了整个数据集的宏观视图。
- en: As you can see from the dataset, we have 20 independent variables, such as `age`,
    `job`, and `education`, and one outcome/dependent variable—`y`. Here, the outcome
    variable defines whether the campaign call made to the client resulted in a successful
    deposit sign-up with `yes` or `no`. To understand the overall dataset, we now
    need to study each variable in the dataset. Let's first hop on to univariate analysis.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 如您从数据集中所见，我们有20个独立变量，例如`age`、`job`和`education`，以及一个结果/因变量`y`。在这里，结果变量定义了向客户发起的营销电话是否导致了成功的存款注册，用`yes`或`no`表示。为了理解整个数据集，我们现在需要研究数据集中的每个变量。让我们首先进行单变量分析。
- en: Univariate Analysis
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 单变量分析
- en: '`age`, `duration`, `nr.employed` (numeric features in the dataset) and many
    others, we look at summary statistics such as min, max, mean, standard deviation,
    and percentile distribution. These measures together help us understand the spread
    of the data. Similarly, for categorical features such as `job`, `marital`, and
    `education`, we need to study the distinct values in the feature and the frequency
    of these values. To accomplish this, we can implement a few analytical, visual,
    and statistical techniques. Let''s take a look at the analytical and visual techniques
    for exploring numeric features.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 对于数据集中的数值特征（如`age`、`duration`、`nr.employed`）等，我们查看诸如最小值、最大值、平均值、标准差和百分位数分布等汇总统计量。这些度量共同帮助我们了解数据的分布。同样，对于分类特征（如`job`、`marital`和`education`），我们需要研究特征中的不同值及其频率。为了完成这项任务，我们可以实施一些分析、可视化和统计技术。让我们看看探索数值特征的解析和可视化技术。
- en: Exploring Numeric/Continuous Features
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 探索数值/连续特征
- en: If you explored the previous output snippet, you might have noted that we have
    a mix of numeric and categorical features in the dataset. Let's start by looking
    at the first feature in the dataset, which is a numeric feature named `age`. As
    the name suggests, it denotes the age of the customer being targeted. Let's take
    a look at the summary statistics of the feature and visualize it using a simple
    boxplot.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你探索了前面的输出片段，你可能已经注意到数据集中有数值型和分类型特征的混合。让我们首先查看数据集中的第一个特征，它是一个名为`age`的数值型特征。正如其名所示，它表示目标客户的年龄。让我们看一下该特征的摘要统计信息，并使用简单的箱线图进行可视化。
- en: 'Exercise 19: Visualizing Data Using a Box Plot'
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习19：使用箱线图可视化数据
- en: In this exercise, we will explore using a boxplot for univariate analysis, explain
    how to interpret the boxplot, and walk through the code.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将探索使用箱线图进行单变量分析，解释如何解释箱线图，并逐步展示代码。
- en: 'Perform the following steps to visualize the data using a boxplot:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以使用箱线图可视化数据：
- en: 'First, import the ggplot2 package using the following command:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入ggplot2包：
- en: '[PRE4]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个DataFrame对象，`df`，并使用`bank-additional-full.csv`文件，使用以下命令：
- en: '[PRE5]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Print the `age` data, such as `mean` and `max`, using the following command:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令打印`age`数据，例如`mean`和`max`：
- en: '[PRE6]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The output is as follows:'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE7]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Next, print the standard deviation of age as follows:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，按照以下方式打印年龄的标准差：
- en: '[PRE8]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The output is as follows:'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE9]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Now, plot the boxplot using of age with following parameters:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下参数绘制年龄的箱线图：
- en: '[PRE10]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The output is as follows:'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.3: Boxplot of age.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.3：年龄的箱线图。'
- en: '](img/C12624_02_03.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.3：年龄的箱线图。'
- en: 'Figure 2.3: Boxplot of age.'
  id: totrans-91
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.3：年龄的箱线图。
- en: We first load the `ggplot2` library, which provides handy functions for visualizing
    the data. R provides a simple function called `summary`, which prints summary
    statistics such as min, max, median, mean, 75th percentile, and 25th percentile
    values. The next line uses the `sd` function to compute the standard deviation,
    and, lastly, the final line uses the `ggplot` library to plot the boxplot for
    the data.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先加载`ggplot2`库，它提供了用于可视化数据的便捷函数。R提供了一个简单的函数`summary`，它打印摘要统计信息，如最小值、最大值、中位数、平均值、75百分位数和25百分位数值。下一行使用`sd`函数计算标准差，最后，最后一行使用`ggplot`库绘制数据的箱线图。
- en: If you explore the variable with the output from the summary statistics, we
    can see that age has a minimum value of 17, a max of 98, and a mean of 42\. If
    you take a close look at the gap between the 75th percentile (3rd quartile) and
    the 100th percentile (max), we can see a huge jump. This indicates that there
    are outliers present in the age variable. The presence of outliers will incorrectly
    change your conclusions from the analysis. In some cases, when there is just one
    data point with a value of `1000x` the 75th percentile, your mean will shift toward
    the right. In scenarios where you would use just mean as a ballpark figure to
    give an estimate of the variable, the whole understanding of the feature might
    be misleading.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你探索了摘要统计信息的输出，我们可以看到年龄的最小值为17，最大值为98，平均值为42。如果你仔细观察75百分位数（第三四分位数）和100百分位数（最大值）之间的差距，我们可以看到巨大的跳跃。这表明年龄变量中存在异常值。异常值的存在将错误地改变你的分析结论。在某些情况下，当只有一个值为75百分位数的`1000x`的数据点时，你的平均值会向右移动。在仅使用平均值作为对变量进行估计的大致数值的情况下，对特征的整体理解可能会产生误导。
- en: The boxplot, on the other hand, helps us visually consume this information in
    a simple and lucid way. The boxplot splits the data into three quartiles. The
    lower quartile, that is, the line below the box, represents the min and the 25th
    percentile. The middle quartile represents the 25th to 50th to 75th percentile.
    The upper quartile represents the 75th to the 100th percentile. The dots above
    the 100th percentile are outliers determined by the internal functions. As we
    can see, the observation from the summary statistics are in line with the boxplots.
    We do see outliers, marked as dots above the upper quartile.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，箱线图帮助我们以简单明了的方式直观地消费这些信息。箱线图将数据分为三个四分位数。下四分位数，即箱体下方的线，代表最小值和25百分位数。中间四分位数代表25至50至75百分位数。上四分位数代表75至100百分位数。100百分位数以上的点是由内部函数确定的异常值。正如我们所见，从摘要统计中得出的观察结果与箱线图一致。我们确实看到了异常值，标记为上四分位数以上的点。
- en: In the next exercise, we will perform an EDA on the age variable using a histogram.
    Let's see what insight we can get from the histogram plot.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个练习中，我们将使用直方图对年龄变量进行 EDA。让我们看看从直方图图中我们能得到哪些见解。
- en: 'Exercise 20: Visualizing Data Using a Histogram'
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习 20：使用直方图可视化数据
- en: In this exercise, we will discuss how to interpret the histogram and outliers.
    Let's continue from the previous exercise.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将讨论如何解释直方图和异常值。让我们从上一个练习继续。
- en: In order to get a more detailed view of the data and closely understand how
    the `age` variable is organized, we can use histograms. A histogram is a special
    bar plot, where the data is grouped and sequentially arranged into equal intervals
    called `bins`, and the frequency of data points in the respective bins are plotted.
    The histogram helps us to understand the distribution of the data more effectively.
    The exercise plots the histogram to help us visualize the data more effectively.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获得数据的更详细视图并更深入地理解 `age` 变量的组织方式，我们可以使用直方图。直方图是一种特殊的条形图，其中数据被分组并按顺序排列到称为 `bins`
    的相等间隔中，并绘制相应分箱中的数据点的频率。直方图帮助我们更有效地理解数据的分布。练习通过绘制直方图帮助我们更有效地可视化数据。
- en: 'Perform the following steps:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: 'First, import the ggplot2 package using the following command:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入 ggplot2 包：
- en: '[PRE11]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个 DataFrame 对象 `df`，并使用以下命令使用 `bank-additional-full.csv` 文件：
- en: '[PRE12]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Now, use the following command to plot the histogram for age using the provided
    parameters:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下命令使用提供的参数绘制年龄的直方图：
- en: '[PRE13]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The output is as follows:'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.4: Histogram for age'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 2.4：年龄直方图'
- en: '](img/C12624_02_04.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/C12624_02_04.jpg)'
- en: 'Figure 2.4: Histogram for age'
  id: totrans-109
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 2.4：年龄直方图
- en: The `ggplot` function defines the base layer for visualization, which is then
    followed by the `geom_histogram` function with parameters that define the histogram-related
    aspects such as the number of bins, color to fill, alpha (opacity), and many more.
    The number of bins is also calculated by default, but it can be overridden by
    passing a value to the `bin` parameter, such as `bin=10`. The next function, `ggtitle`,
    is used to add a title to the plot, and the `theme_bw` function is added to change
    the theme to black and white instead of the default. The `theme` function is optional
    and is added here for only visually appealing plots.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '`ggplot` 函数定义了可视化的基础层，随后通过带有参数的 `geom_histogram` 函数，这些参数定义了直方图相关方面，例如分箱数、填充颜色、alpha（透明度）等。默认情况下，分箱数也会被计算，但可以通过传递一个值给
    `bin` 参数来覆盖，例如 `bin=10`。下一个函数 `ggtitle` 用于给图表添加标题，而 `theme_bw` 函数用于将主题改为黑白而非默认。`theme`
    函数是可选的，这里添加它只是为了使图表更美观。'
- en: As you can clearly see, the histogram gives us a more granular view of the data
    distribution for the feature. We can understand that the number of records drastically
    reduce after 65 and only a few records have values beyond 75\. In some cases,
    choosing the number of bins for the histogram becomes important as higher number
    of bins make the distribution messy and a smaller number of bins make the distribution
    less informative. In scenarios where we would want to see a much more granular
    view of the distribution, instead of increasing the number of bins for the histogram,
    we can opt for visualizing using a density plot that visualizes the plot over
    a continuous interval while using kernel smoothing to smooth out the noise.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所清晰看到的，直方图为我们提供了对特征数据分布的更细粒度的视图。我们可以理解，65岁之后记录数急剧减少，只有少数记录的值超过75。在某些情况下，选择直方图的分箱数变得很重要，因为更多的分箱会使分布变得混乱，而较少的分箱会使分布信息不足。在我们想要看到分布的更细粒度视图的情况下，而不是增加直方图的分箱数，我们可以选择使用密度图来可视化，该图在连续区间上可视化，同时使用核平滑来平滑噪声。
- en: We can also visualize the age variable using a density plot rather a histogram.
    The next exercise goes into the details of how to do it.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以使用密度图而不是直方图来可视化年龄变量。下一个练习将详细介绍如何实现。
- en: 'Exercise 21: Visualizing Data Using a Density Plot'
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习 21：使用密度图可视化数据
- en: In this exercise, we will demonstrate the density plot for the same feature,
    `age`.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将演示相同特征 `age` 的密度图。
- en: 'Perform the following steps:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: 'First, import the ggplot2 package using the following command:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入 ggplot2 包：
- en: '[PRE14]'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个DataFrame对象`df`，并使用以下命令使用`bank-additional-full.csv`文件：
- en: '[PRE15]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now, use the following command to plot the density plot for age:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下命令绘制年龄的密度图：
- en: '[PRE16]'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The output is as follows:'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.5: Density plot for age.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.5：年龄的密度图。'
- en: '](img/C12624_02_05.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/C12624_02_05.jpg]'
- en: 'Figure 2.5: Density plot for age.'
  id: totrans-125
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.5：年龄的密度图。
- en: Similar to the previous exercise, we use the same base for the visualization
    with the `ggplot` function and use a different `geom_density` function for the
    density plot. The rest of the additional functions used for the visualization
    remain the same.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 与上一个练习类似，我们使用`ggplot`函数的相同基础进行可视化，并使用不同的`geom_density`函数进行密度图绘制。其他用于可视化的附加函数保持不变。
- en: Density plots give finer details than a histogram. While this level of detail
    can also be achieved using higher number of bins for a histogram, there is often
    a hit and try method required to get the best number of bins. In such cases, an
    easier option to opt for would be density plots.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 密度图比直方图提供更详细的信息。虽然通过增加直方图的分组数也可以达到这种详细程度，但通常需要通过试错法来确定最佳的分组数。在这种情况下，选择密度图会是一个更简单的选项。
- en: Now that we have understood the idea of univariate analysis for numeric variables,
    let's speed up the data exploration for other variables. We have a total of 10
    categorical features and 10 numeric columns. Let's try to take a look at four
    numeric variables together using a histogram.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了数值变量的单变量分析的概念，让我们加快对其他变量的数据探索。我们总共有10个分类特征和10个数值列。让我们尝试使用直方图一起查看四个数值变量。
- en: Just like we plotted the histogram for age, we can do it for multiple variables
    at the same time by defining a custom function. The next exercise shows how to
    do this.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 就像我们绘制年龄的直方图一样，我们可以通过定义一个自定义函数同时为多个变量绘制直方图。下一个练习将展示如何做到这一点。
- en: 'Exercise 22: Visualizing Multiple Variables Using a Histogram'
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习22：使用直方图可视化多个变量
- en: In this exercise, we will combine the four histograms, one for each of the variables
    of interest, into a single plot. We have `campaign`, which indicates the number
    of contacts performed during the campaign, and `pdays`, which indicates the number
    of days since the client was last contacted by the previous campaign; a value
    of 999 indicates that the client was never contacted before. `previous` indicates
    the number of contacts previously made for this client, and lastly, `emp.var.rate`
    indicates the employment variance rate.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将把四个直方图（每个变量一个）组合成一个单独的图表。我们有`campaign`，表示在活动中进行的联系次数，`pdays`表示自上次前一个活动联系客户以来的天数；值为999表示客户之前从未被联系过。`previous`表示为此客户之前进行的联系次数，最后，`emp.var.rate`表示就业方差率。
- en: 'Let''s perform the following steps to complete the exercise:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这个练习，我们执行以下步骤：
- en: 'First, import the `cowplot` package using the following command:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入`cowplot`包：
- en: '[PRE17]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Ensure that the `cowplot` package is installed.
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 确保已安装`cowplot`包。
- en: 'Next, define a function to plot histograms for all numeric columns:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，定义一个函数来绘制所有数值列的直方图：
- en: '[PRE18]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now, use the `summary` function to print the mean, max, and other parameters
    for the `campaign`, `pdays`, `previous`, and `emp.var.rate` columns:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用`summary`函数打印`campaign`、`pdays`、`previous`和`emp.var.rate`列的均值、最大值和其他参数：
- en: '[PRE19]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The output is as follows:'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE20]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Call the function we defined earlier to plot the histogram:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调用我们之前定义的函数来绘制直方图：
- en: '[PRE21]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The output is as follows:'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.6: Visualizing multiple variables using a histogram'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.6：使用直方图可视化多个变量'
- en: '](img/C12624_02_06.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/C12624_02_06.jpg]'
- en: 'Figure 2.6: Visualizing multiple variables using a histogram'
  id: totrans-147
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.6：使用直方图可视化多个变量
- en: In this exercise, we automated the process of stacking multiple plots of the
    same kind into a consolidated plot. We first load the required `cowplot` library.
    This library provides handy functions for creating a plot grid for plots rendered
    by the `ggplot` library. If you do not have the library loaded, install the packages
    using the `install.packages('cowplot')` command. We then define a function called
    `plot_grid_numeric`, which accepts the parameters dataset, a list of features
    to plot, and the number of columns to be used in the grid. If you observe the
    internals of the function, you will see that we simply traverse through the list
    of provided variables using a `for` loop and collect the individual plots into
    a list called `plt_matrix`. Later, we use the `plot_grid` function provided by
    the `cowplot` library to arrange the plots into a grid with two columns.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们自动化了将多个同类型图堆叠成一个综合图的过程。我们首先加载所需的`cowplot`库。这个库为使用`ggplot`库渲染的图提供了创建图网格的便捷函数。如果你还没有加载这个库，请使用`install.packages('cowplot')`命令安装包。然后我们定义一个名为`plot_grid_numeric`的函数，它接受数据集、要绘制的特征列表以及网格中要使用的列数作为参数。如果你观察函数的内部实现，你会看到我们只是使用`for`循环遍历提供的变量列表，并将单个图收集到一个名为`plt_matrix`的列表中。稍后，我们使用`cowplot`库提供的`plot_grid`函数将图排列成两列的网格。
- en: The same function can be used to display a grid of any number of histograms;
    use a number based on your screen size. The current number has been restricted
    to 4 for best results. We also use the `summary` function to display the overall
    statistics for the same set of numeric variables in conjunction with the histogram
    plots.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 同一个函数可以用来显示任何数量的直方图网格；使用基于你屏幕大小的数字。当前数字已被限制为4以获得最佳效果。我们还使用`summary`函数与直方图图一起显示相同一组数值变量的总体统计信息。
- en: Note
  id: totrans-150
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: There is no exception handling code used in the previous function. We have ignored
    implementing sophisticated code for now in order to focus on the topic of interest.
    In the event of using the function for non-numeric variables, the error messages
    will not be the most effective to solve it.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的函数中没有使用异常处理代码。我们目前忽略了实现复杂的代码，以便专注于感兴趣的主题。如果在非数值变量上使用该函数，错误信息可能不是最有效的解决方案。
- en: As we can see in the previous plot, we now have four variables together for
    analysis. Studying the summary statistics in tandem with the histogram plots helps
    us uncover the underlying variable better. `Campaign` has 75% of the values below
    or equal to 3\. We can see that there is an outlier at 56, but a significant majority
    of the records have values less than 5\. `pdays` seems to not be a useful variable
    for our analysis as almost all records have the default value of 999\. The tall
    bar in 1000 makes it clear that barely any records will have values other than
    999.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一个图所示，我们现在有四个变量一起进行分析。将摘要统计信息与直方图图一起研究有助于我们更好地揭示变量。`Campaign`有75%的值小于或等于3。我们可以看到有一个异常值在56，但绝大多数的记录值小于5。`pdays`似乎不是我们分析的有用变量，因为几乎所有记录都有默认值999。1000中的高柱状图清楚地表明，几乎没有记录的值不是999。
- en: For the `previous` variable, we see the exact opposite of `pdays`; most records
    have a value of 0\. Lastly, `emp.var.rate` shows us an interesting result. Though
    the values range from `-4` to `2`, more than half of the records have a positive
    value.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`previous`变量，我们看到它与`pdays`正好相反；大多数记录的值为0。最后，`emp.var.rate`显示了一个有趣的结果。尽管值范围从`-4`到`2`，但超过一半的记录具有正值。
- en: So, with the analysis of these four variables, we can roughly conclude that
    the previously conducted campaigns didn't communicate very often by phone with
    the clients, or it could also mean that close to none of the clients targeted
    in the previous campaign were contacted for the current campaign. Also, the ones
    who were contacted earlier were contacted seven times at most. The number of days
    since the client was last contacted naturally is in sync with the results from
    the previous campaign, because hardly any have been contacted earlier. However,
    for the current campaign, clients have been contacted an average of 2.5 times,
    75% of the clients have been contacted up to 3 times, and some clients have been
    contacted as high as 56 times. The employment variance rate is an indicator of
    how many people are hired or fired due to macro-economic situations. We understand
    that the economic situation has been fairly steady for most of the time during
    the campaigns.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: Similar to the function created in the previous section to stack histograms
    together, in this activity, we will create another function to stack density plots
    and another for boxplots.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: 'Activity 4: Plotting Multiple Density Plots and Boxplots'
  id: totrans-156
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this activity, we will create a function to stack density plots, and another
    for boxplots. Use the newly created functions to visualize the same set of variables
    as in the previous section and study the most effective way to analyze numeric
    variables.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: By end of this activity, you will learn how to plot multiple variables in density
    plot at the same time. Doing so makes it easy to compare the different variables
    in one go and draw insights about the data.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps to complete this activity:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: First, load the necessary libraries and packages in RStudio.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Read the `bank-additional-full.csv` dataset into a DataFrame named `df`.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Define the `plot_grid_numeric` function for the density plot:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Plot the density plot for the `campaign`, `pdays`, `previous`, and `emp.var.rate`
    variables:![Figure 2.7: Density plots for the campaign, pdays, previous, and emp.var.rate
    variables'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/C12624_02_07.jpg)'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 2.7: Density plots for the campaign, pdays, previous, and emp.var.rate
    variables'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Observe that the interpretations we obtained using the histogram are visibly
    true in the density plot as well. Hence, this serves as another alternative plot
    for looking at the same trend.
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Repeat the steps for the boxplot:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The plot is as follows:'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.8: Boxplots for the campaign, pdays, previous, and emp.var.rate
    variables'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_08.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.8: Boxplots for the campaign, pdays, previous, and emp.var.rate variables'
  id: totrans-173
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: An additional point to note in the boxplot is that it shows the clear presence
    of outliers in the `campaign` variable, which wasn't very visible in the other
    two plots. A similar observation could be made for `previous` and `pdays` variables
    as well. Students should try to plot boxplots after removing the outliers and
    see how different they look then.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在箱线图中需要注意的一个额外点是，它显示了`campaign`变量中存在明显的异常值，这在其他两个图表中并不非常明显。对于`previous`和`pdays`变量也可以做出类似的观察。学生应该尝试在移除异常值后绘制箱线图，看看它们看起来有何不同。
- en: Note
  id: totrans-175
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: You can find the solution for this activity on page 442.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在第442页找到这个活动的解决方案。
- en: 'Exercise 23: Plotting a Histogram for the nr.employed, euribor3m, cons.conf.idx,
    and duration Variables'
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习23：绘制nr.employed、euribor3m、cons.conf.idx和duration变量的直方图
- en: In this exercise, we will move to the next and the last set of four numeric
    variables. We have `nr.employed`, which indicates the number of employees employed
    at the bank, and `euribor3m`, which indicates the 3-month euro interbank rates
    for average interest rates. Also, we have `cons.conf.index`, which is the consumer
    confidence indicator measured as the degree of optimism on the state by consumers
    by expressing through the activities of savings and spending. Lastly, there is
    `duration`, which indicates the last contact duration. As per the metadata provided
    by UCI, this variable is highly correlated with the outcome and will lead to possible
    data leakage. Therefore, we will drop this variable from our future analysis.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将转向下一组也是最后一组四个数值变量。我们有`nr.employed`，表示在银行工作的员工人数，`euribor3m`表示3个月欧元间银行利率的平均利率。此外，我们还有`cons.conf.index`，这是消费者信心指标，通过消费者通过储蓄和消费活动表达的对国家乐观程度的程度来衡量。最后，是`duration`，表示最后一次联系持续时间。根据UCI提供的元数据，这个变量与结果高度相关，可能导致数据泄露。因此，我们将从未来的分析中删除这个变量。
- en: 'Perform the following steps to study the next set of numeric variables:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以研究下一组数值变量：
- en: 'First, import the `cowplot` package using the following command:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入`cowplot`包：
- en: '[PRE24]'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个DataFrame对象，`df`，并使用以下命令使用`bank-additional-full.csv`文件：
- en: '[PRE25]'
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Print the details using the `summary` method:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`summary`方法打印详细信息：
- en: '[PRE26]'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The output is as follows:'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE27]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Plot the histogram for the defined variables, as illustrated in the following
    command:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制定义变量的直方图，如下命令所示：
- en: '[PRE28]'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The output is as follows:'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.9: Histogram of count and duration for various variables'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.9：各种变量的计数和持续时间的直方图'
- en: '](img/C12624_02_09.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/C12624_02_09.jpg](img/C12624_02_09.jpg)'
- en: 'Figure 2.9: Histogram of count and duration for various variables'
  id: totrans-193
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.9：各种变量的计数和持续时间的直方图
- en: Just like *Exercise 5*, *Visualizing Multiple Variables Using a Histogram*,
    we first perform the summary statistics on our desired set of variables with the
    `summary` function, and then plot the combined histogram for all the desired variables
    together by calling the same functions we defined earlier.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 就像*练习5*，*使用直方图可视化多个变量*，我们首先使用`summary`函数对所需的一组变量进行汇总统计，然后通过调用我们之前定义的相同函数，一起绘制所有所需变量的组合直方图。
- en: As we can see, the number of employees employed has been mostly constant at
    `5228`, but it has also decreased during the time period to different values.
    This number is measured quarterly, and hence the frequency is not very dynamic,
    which is why we can see values centered around only a few bins. The euro interbank
    interest rate has been mostly between `2.5` and `5`. There are just 1 or 2 records
    that have values above 5, and we can see that the max value measured for this
    variable is `5.045`. The consumer confidence index is mostly negative, which means
    that the consumers mostly perceived the state of the economy negatively during
    this time. We see two peaks in the bins of the histogram, which calls for the
    most common confidence index during the time and vaguely suggests limited variation
    in the index during the length of the campaign. The duration of the call, in seconds,
    shall be ignored from our analysis for now.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，雇佣的员工数量大部分保持在`5228`，但在时间期间也降至不同的值。这个数字是按季度测量的，因此频率并不非常动态，这就是为什么我们可以看到围绕仅几个桶的值。欧元间银行利率大部分在`2.5`到`5`之间。只有1或2条记录的值超过5，我们可以看到这个变量的最大测量值为`5.045`。消费者信心指数大部分为负值，这意味着消费者在此时大部分对经济状况持负面看法。我们在直方图的桶中看到两个峰值，这表明了当时最常见的信心指数，并模糊地暗示了在活动期间指数的有限变化。现在，我们暂时忽略通话时长（以秒为单位）的分析。
- en: To summarize, we understand that the bank's number of employees increased and
    decreased during the campaigns in a range of ~250, which is ~5% of the total employees.
    It ranged between `4964` and `5228` and mostly had little variation. The consumer
    confidence index remained mostly negative and with little variation during the
    time period, and the euro interbank rates had an average of 3.6, with most of
    the records between 2.5 and 5.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，我们了解到在活动中，银行的员工数量在约250人的范围内有所增加和减少，这大约是总员工数的5%。员工数量在`4964`到`5228`之间，变化不大。消费者信心指数在时间期间大部分保持负值，变化不大，欧元间银行利率的平均值为3.6，大部分记录在2.5到5之间。
- en: Now, let's move on to study the categorical variables using univariate analysis.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们继续研究使用单变量分析来研究分类型变量。
- en: Exploring Categorical Features
  id: totrans-198
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索分类型特征
- en: Categorical features differ from numeric or continuous features in nature, and
    therefore the traditional methods used earlier aren't applicable here. We can
    analyze the number of different classes within a categorical variable and the
    frequency associated with each. This can be achieved using either simple analytical
    techniques or visual techniques. Let's explore a list of categorical features
    using a combination of both.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 分类型特征在本质上与数值或连续特征不同，因此之前使用的传统方法在这里不适用。我们可以分析分类型变量中不同类的数量以及与每个类相关的频率。这可以通过简单分析技术或视觉技术实现。让我们通过结合这两种方法来探索一系列分类型特征。
- en: 'Exercise 24: Exploring Categorical Features'
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习24：探索分类型特征
- en: In this exercise, we will start with a simple variable, that is, `marital`,
    which indicates the marital status of the client. Let's use the `dplyr` library
    to perform grouped data aggregation.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将从一个简单的变量开始，即`marital`，它表示客户的婚姻状况。让我们使用`dplyr`库来进行分组数据聚合。
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成练习：
- en: 'First, import the `dplyr` library in the system using the following command:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令在系统中导入`dplyr`库：
- en: '[PRE29]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Next, we will create an object named `marital_distribution` and store the value
    based on the following condition:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将创建一个名为`marital_distribution`的对象，并根据以下条件存储值：
- en: '[PRE30]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Now, print the value stored in the `marital_distribution` object:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，打印存储在`marital_distribution`对象中的值：
- en: '[PRE31]'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'The output is as follows:'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE32]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: To count the distinct number of classes within the categorical column and to
    get the count of records within each of the individual classes, we use the `group_by`
    functions available under the `dplyr` library. The `%>%`, also called the `marital`
    and then pass the output to the `summarize` function, which aggregates the DataFrame
    to the grouped level using the aggregation function we provide; in this case,
    `n()` is a simple `count` equivalent. Finally, we use the `mutate` function to
    calculate the percentage of counts for each of the individual group members.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 为了计数分类列中的不同类别的数量，以及获取每个个别类别的记录计数，我们使用 `dplyr` 库下可用的 `group_by` 函数。`%>%`，也称为
    `marital`，然后将输出传递给 `summarize` 函数，该函数使用我们提供的聚合函数将 DataFrame 聚合到分组级别；在这种情况下，`n()`
    是简单的 `count` 等价。最后，我们使用 `mutate` 函数计算每个个别组成员的计数百分比。
- en: We see that majority of the campaign calls were made to married clients, around
    61%, followed by calls to single clients at 28% and so on.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，大多数竞选电话是打给已婚客户的，约占 61%，其次是 28% 的单身客户电话，等等。
- en: 'Exercise 25: Exploring Categorical Features Using a Bar Chart'
  id: totrans-213
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习 25：使用柱状图探索分类特征
- en: In this exercise, we will plot a bar chart with the frequency counts for each
    class visualized. We could also use the bar chart to represent the frequency distribution
    of each of these individual categories with a plot.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将绘制一个柱状图，以可视化每个类别的频率计数。我们也可以使用柱状图来表示每个这些个别类别的频率分布图。
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成练习：
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入 `ggplot2` 包：
- en: '[PRE33]'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个 DataFrame 对象，`df`，并使用以下命令使用 `bank-additional-full.csv` 文件：
- en: '[PRE34]'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Now, plot the bar chart of marital status per count using the following command:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用以下命令按计数绘制婚姻状况的柱状图：
- en: '[PRE35]'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The output is as follows:'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.10: Bar chart of marital status per count'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 2.10：按计数显示的婚姻状况柱状图'
- en: '](img/C12624_02_10.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/C12624_02_10.jpg)'
- en: 'Figure 2.10: Bar chart of marital status per count'
  id: totrans-225
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 2.10：按计数显示的婚姻状况柱状图
- en: We use the same dataset engineered in the previous snippet, which calculates
    the frequency of each class and its relative percentage. To plot the bar chart,
    we use the same base function of `ggplot`, where we define the aesthetics of the
    *x* and *y* variables and append the bar plot using the `geom_bar` function. The
    `geom_text` function allows us to add labels to each bar in the plot.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用与之前片段中相同的工程化数据集，该数据集计算每个类别的频率及其相对百分比。要绘制柱状图，我们使用 `ggplot` 的相同基础函数，其中我们定义了
    *x* 和 *y* 变量的美学，并使用 `geom_bar` 函数附加柱状图。`geom_text` 函数允许我们在图表中的每个条形上添加标签。
- en: We can now see the same numbers displayed in the previous exercise visualized
    here with a bar plot. In scenarios where we have a large number of classes within
    the variable, glancing through each individual class to study them might not be
    the most effective method. A simple plot easily helps us to understand the frequency
    distribution of the categorical variable in an easy-to-consume way.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以看到与之前练习中相同的数字，这里通过柱状图可视化。在变量中有大量类别的情况下，逐个查看每个类别来研究它们可能不是最有效的方法。一个简单的图表可以轻松帮助我们以易于消费的方式理解分类变量的频率分布。
- en: 'Exercise 26: Exploring Categorical Features using Pie Chart'
  id: totrans-228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习 26：使用饼图探索分类特征
- en: In this exercise, we will define the pie chart and the various components within
    it.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将定义饼图及其内部的各种组件。
- en: 'Similar to the bar plot, we also have a pie chart that makes understanding
    the percentage distribution of the classes easier. Perform the following steps
    to visualize the same variable, that is, marital status using a pie chart:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 与柱状图类似，我们还有一个饼图，它使理解类别的百分比分布更容易。执行以下步骤以使用饼图可视化相同的变量，即婚姻状况：
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入 `ggplot2` 包：
- en: '[PRE36]'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个 DataFrame 对象，`df`，并使用以下命令使用 `bank-additional-full.csv` 文件：
- en: '[PRE37]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Next, define the label positions using the following command:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令定义标签位置：
- en: '[PRE38]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Now, define labels for the plots:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，为图表定义标签：
- en: '[PRE39]'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Set the plot size for better visuals:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置图表大小以获得更好的视觉效果：
- en: '[PRE40]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Create the pie chart using the following command:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令创建饼图：
- en: '[PRE41]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '![Figure 2.11: Pie chart for the percentage distribution for the marital status'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.11：婚姻状况的百分比分布饼图]'
- en: '](img/C12624_02_11.jpg)'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/C12624_02_11.jpg]'
- en: 'Figure 2.11: Pie chart for the percentage distribution for the marital status'
  id: totrans-245
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.11：婚姻状况的百分比分布饼图
- en: We first define a few extra variables that will help us to get the plot in an
    easier way. In order to label the pie chart, we would need the break points and
    the actual labels. The break point should ideally be located in the middle part
    of the pie piece. So, we take a cumulative sum of the percentage distribution
    and subtract half of each category to find the mid-point of the section. We then
    subtract the entire number from 100 to arrange the labels in a clockwise direction.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先定义一些额外的变量，这将帮助我们更容易地获取图表。为了标记饼图，我们需要断点（break points）和实际标签。理想情况下，断点应位于饼图的中间部分。因此，我们计算百分比分布的累积总和，并从每个类别中减去一半，以找到该部分的中间点。然后，我们从100中减去整个数值，以顺时针方向排列标签。
- en: The next step defines the label for each pie piece; we use the `paste` function
    to concatenate the label name and the actual percentage values. The pie chart
    functionality in `ggplot` works by constructing elements on top of a bar chart.
    We first use the base from `ggplot` and `geom_bar` to render the base for a stacked
    bar plot and use the `coord_polar` function to transform this into the required
    pie chart. The `scale_y_continuous` function helps in placing the labels on the
    pie distribution. The next line adds a rotation angle to the positioning of the
    text. The `size` parameter inside the `element_text` portion of the `theme` function
    defines the font size for the text in the plot. The rest is the same as we studied
    in the earlier plots.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步定义每个饼图的标签；我们使用`paste`函数将标签名称和实际百分比值连接起来。`ggplot`中的饼图功能是通过在柱状图之上构建元素来实现的。我们首先使用`ggplot`和`geom_bar`的基础来渲染堆叠柱状图的基础，并使用`coord_polar`函数将其转换为所需的饼图。`scale_y_continuous`函数有助于将标签放置在饼图分布上。下一行添加了文本定位的旋转角度。`theme`函数的`element_text`部分中的`size`参数定义了图中文本的字体大小。其余部分与我们在早期图表中学习的一样。
- en: We can see that the pie chart provides us with an intuitive way to explore the
    percentage distribution for the categories within each variable. A word of caution
    to choose the pie chart over bar plot would be based on the number of distinct
    categories within a variable. Though pie charts are visually more appealing, with
    many distinct classes, pie charts become overcrowded.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，饼图为我们提供了一个直观的方式来探索每个变量中类别的百分比分布。关于选择饼图而不是柱状图的建议，应基于变量中不同类别的数量。尽管饼图在视觉上更吸引人，但类别众多时，饼图会显得过于拥挤。
- en: Note
  id: totrans-249
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Pie charts are best avoided when the number of distinct classes within a categorical
    variable is high. There is no definite rule, but anything that makes visually
    cluttered pie charts would not be ideal to study.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 当分类变量中不同类别的数量较高时，最好避免使用饼图。没有明确的规则，但任何使饼图视觉上杂乱无章的因素都不适合研究。
- en: 'Exercise 27: Automate Plotting Categorical Variables'
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习27：自动化绘图分类变量
- en: In this exercise, we will automate the plotting of categorical variables.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将自动化分类变量的绘图。
- en: Just like numeric variables, we also have 10 categorical variables, excluding
    the target variable. Similar to automating the exploration of numeric features,
    let's now create a function for categorical variables. To keep things simple,
    we will primarily use boxplots with a percentage distribution instead of a pie
    chart. We will start with four categorical features and then move to the next
    remainder set.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 就像数值变量一样，我们也有10个分类变量，不包括目标变量。类似于自动化数值特征的探索，现在让我们为分类变量创建一个函数。为了使事情简单，我们将主要使用带有百分比分布的箱线图而不是饼图。我们将从四个分类特征开始，然后转到下一个剩余的集合。
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成练习：
- en: 'First, import the `cowplot` package using the following command:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用以下命令导入`cowplot`包：
- en: '[PRE42]'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Define a function to plot histograms for all numeric columns:'
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个函数来绘制所有数值列的直方图：
- en: '[PRE43]'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Next, call the `summary` statistics using the following command:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令调用`summary`统计量：
- en: '[PRE44]'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The output is as follows:'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE45]'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Call the function we defined earlier to plot the histogram:'
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调用我们之前定义的函数来绘制直方图：
- en: '[PRE46]'
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The output is as follows:'
  id: totrans-265
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.12: Bar plot for categorical variables'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.12：分类变量的柱状图]'
- en: '](img/C12624_02_12.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/C12624_02_12.jpg]'
- en: 'Figure 2.12: Bar plot for categorical variables'
  id: totrans-268
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Similar to the earlier function we created for the numeric features visual automation,
    we have created a simple function to explore the percentage distribution for categorical
    features. Some additions to the function are the creation of the temporary aggregation
    dataset and some additional cosmetic enhancements to the plot. We add the labels
    and rotate them by 30 degrees so that they can neatly align with the plot, and
    the rest remains the same. We get the frequency count by calling the `summary`
    function on the `categorical` column. Similar to numeric columns, we explore the
    categorical columns first using the `summary` function and then use the defined
    function to visualize the collated bar plots.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
- en: Exploring the `job` feature, we can see 12 distinct values, with most of the
    records for admin, blue-collar, and technician. Overall, the `job` category seems
    to have a fairly diverse distribution of values. Education level of the client
    also has a diverse set of values, with ~50% of the values from high school and
    university. For the `default` variable, which indicates whether the client has
    defaulted in credit previously, we have ~80% of the values as `no` and around
    ~20% unknown. This doesn't seem to be useful information. Finally, `contact`,
    which defines the mode of contact used for the campaign communication, shows that
    64% was through cellular phones, and the rest through landlines.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
- en: Let's move on and repeat the same analysis for the next set of features.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 28: Automate Plotting for the Remaining Categorical Variables'
  id: totrans-272
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this exercise, we will reuse the same function for the next set of four categorical
    variables. Remember that you need to use the frequency count generated using the
    `summary` command in conjunction with the plots to interpret the value.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s perform the following procedure to complete the exercise:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
- en: 'First, import the `cowplot` package using the following command:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE47]'
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE48]'
  id: totrans-278
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Next, call the `summary` statistics using the following command:'
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE49]'
  id: totrans-280
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'The output is as follows:'
  id: totrans-281
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE50]'
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Call the defined function to plot the histogram:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE51]'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The output is as follows:'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.13: Automate plotting for the remaining categorical variables'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_13.jpg)'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.13: Automate plotting for the remaining categorical variables'
  id: totrans-288
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: We reuse the previously defined functions to explore the new set of four variables
    just like we explored the previous set of features.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: The `loan` variable indicates whether the client has a personal loan. We have
    ~86.6% of clients with no personal loan, 10.3% with a loan, and 3.3% unknown.
    Similarly, the `month` variable indicates the actual month when the campaign calls
    were executed. We see that the majority of communication was conducted in the
    month of `may`, followed by `jul` and `aug`. Overall, the `month` feature also
    seems to be a fairly diverse variable with a good distribution of values. The
    `day_of_week` variable shows a consistent distribution across all days of the
    week. `poutcome` indicates the result of the previously executed campaign; a significant
    majority was non-existent, a small chunk of around 3.3% was successful, and ~10%
    failed.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '`loan` 变量表示客户是否有个人贷款。我们有大约 86.6% 的客户没有个人贷款，10.3% 有贷款，3.3% 未知。同样，`month` 变量表示活动电话执行的实际月份。我们看到大多数沟通是在
    `may` 月份进行的，其次是 `jul` 和 `aug`。总体而言，`month` 特征似乎也是一个相当多样化的变量，具有良好的值分布。`day_of_week`
    变量在每周的每一天都显示出一致的分布。`poutcome` 表示之前执行的活动的结果；绝大多数不存在，大约 3.3% 的成功，大约 10% 失败。'
- en: 'Exercise 29: Exploring the Last Remaining Categorical Variable and the Target
    Variable'
  id: totrans-291
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 练习 29：探索最后一个剩余的分类变量和目标变量
- en: Finally, let's explore the last remaining categorical variable and the target
    variable. Since both are categorical, we can continue using the same function
    for the exploration.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们探索最后一个剩余的分类变量和目标变量。由于两者都是分类变量，我们可以继续使用相同的函数进行探索。
- en: 'Repeat the same process for the last independent categorical variable and the
    dependent variable (which is also categorical):'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 对最后一个独立分类变量和因变量（也是分类变量）重复相同的过程：
- en: 'First, after importing the required packages and creating DataFrame object,
    call the summary statistics using the following command:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，在导入所需的包并创建 DataFrame 对象后，使用以下命令调用摘要统计：
- en: '[PRE52]'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The output is as follows:'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE53]'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Call the defined function to plot the histogram:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调用定义好的函数来绘制直方图：
- en: '[PRE54]'
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'The output is as follows:'
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 2.14: Histogram of housing per count'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 2.14：按计数划分的住房直方图'
- en: '](img/C12624_02_14.jpg)'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 C12624_02_14.jpg](img/C12624_02_14.jpg)'
- en: 'Figure 2.14: Histogram of housing per count'
  id: totrans-303
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 2.14：按计数划分的住房直方图
- en: If we carefully look at the distribution of the outcome variable, we can see
    that a large majority of the clients have negatively responded to the campaign
    calls. Only ~11% of the overall campaign base have positively responded to the
    campaign. Similarly, if we look at the `housing` variable, we can see that roughly
    50% of the clients had a housing loan.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们仔细观察结果变量的分布，我们可以看到大多数客户对活动电话做出了负面回应。只有大约 11% 的整体活动基础对活动做出了积极回应。同样，如果我们查看
    `housing` 变量，我们可以看到大约 50% 的客户有住房贷款。
- en: 'To summarize, we can distill our observations as follows:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，我们可以将我们的观察总结如下：
- en: The campaign was conducted with a major focus of new customers who had not been
    previously contacted.
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该活动主要针对那些之前未曾接触过的新客户。
- en: Around 60% of the client base are married and 80% have not defaulted in credit
    history.
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大约 60% 的客户已婚，80% 在信用历史中没有违约。
- en: Roughly 50% of the client base has a housing loan and over 80% has never opted
    for a personal loan.
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大约 50% 的客户有住房贷款，超过 80% 从未选择过个人贷款。
- en: The campaign was the most active during the month of May and demonstrated fairly
    strong momentum in July and August.
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该活动在五月份最为活跃，并在七月和八月展现了相当强的动力。
- en: More than 60% of the communication of the campaign was through cellular phones,
    and over 50% of the client base at least had a high school degree.
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 活动的超过 60% 的沟通是通过手机进行的，并且超过 50% 的客户至少有高中文凭。
- en: Overall, only 11% of the campaign calls had a positive response.
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总体而言，只有 11% 的活动电话获得了积极回应。
- en: 'With the univariate analysis of all the numeric and categorical variables complete,
    we now have a fair understanding of the story the data conveys. We almost understand
    each data dimension and its distribution. Let''s move on to explore another interesting
    facet of EDA: bivariate analysis.'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成所有数值和分类变量的单变量分析后，我们现在对数据传达的故事有了相当的了解。我们几乎理解了每个数据维度及其分布。让我们继续探索 EDA 的另一个有趣方面：双变量分析。
- en: Bivariate Analysis
  id: totrans-313
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 双变量分析
- en: In **bivariate analysis**, we extend our analysis to study two variables together.
    In our use case, we have around 20 independent variables. It is indeed possible
    to study all permutation combinations of the available 20 variables, but we won't
    go to that extent in this chapter. In our use case, we are more interested in
    studying all the factors that led to the poor performance of the campaign. Therefore,
    our primary focus will be to perform bivariate analysis and study the relationship
    between all the independent variables and our dependent target variable. Again,
    depending on the type of variable, we will have a different type of visual or
    analytical technique to analyze the relationship between the two variables. The
    possible combinations are numeric and numeric, and numeric and categorical. Given
    that our dependent variable is a categorical variable, we might have to explore
    the relationship between two independent variables in our list to study the relationship
    between two numeric variables. Let's get started.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
- en: Studying the Relationship between Two Numeric Variables
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To understand how we can study the relationship between two numeric variables,
    we can leverage scatter plots. It is a 2-dimensional visualization of the data,
    where each variable is plotted on an axis along its length. Relationships between
    the variables are easily identified by studying the trend across the visualization.
    Let's take a look at an example in the following exercise.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 30: Studying the Relationship between Employee Variance Rate and Number
    of Employees'
  id: totrans-317
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Let's study the relationship between employee variance rate and the number of
    employees. Ideally, the number of employees should increase as the variation rate
    increases.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE55]'
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE56]'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Now, plot the scatter plot using the following command:'
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE57]'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'The output is as follows:'
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.15: Scatterplot of employment variation versus the number of employees'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_15.jpg)'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.15: Scatterplot of employment variation versus the number of employees'
  id: totrans-329
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: We use the same base function, `ggplot`, with a new wrapper for the scatterplot.
    The `geom_point` function in `ggplot` provides the necessary constructs for using
    a scatterplot.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
- en: We can see an overall increasing trend, that is, as employment variance rate
    increases, we see the number of employees also increases. The fewer number of
    dots are due to repetitive records in `nr.employed`.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
- en: Studying the Relationship between a Categorical and a Numeric Variable
  id: totrans-332
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let's first recall the methods discussed to study the relationship between the
    numeric and categorical variable and discuss the approach to execute it.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
- en: In this section, we will discuss the different aggregation metrics that we can
    use for summarizing the data. So far, we have used `avg`, but a better approach
    would be to use a combination of `avg`, `min`, `max`, and other metrics.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 31: Studying the Relationship between the y and age Variables'
  id: totrans-335
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We have a categorical dependent variable and nine numeric variables to explore.
    To start small, we will first explore the relationship between our target, `y`,
    and `age`. To study the relationship between a categorical and numeric variable,
    we can choose a simple analytical technique where we calculate the average age
    across each target outcome; if we see stark differences, we can make insights
    from the observations.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
- en: In this exercise, we will calculate the average age across each target outcome
    and also count the number of records in each bucket, followed by a visual representation.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE58]'
  id: totrans-340
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE59]'
  id: totrans-342
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Create a `temp` object and store the value using the following command:'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE60]'
  id: totrans-344
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Print the value stored in the `temp` object:'
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE61]'
  id: totrans-346
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The output is as follows:'
  id: totrans-347
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE62]'
  id: totrans-348
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Now, create a plot using the `ggplot` command:'
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE63]'
  id: totrans-350
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'The output is as follows:'
  id: totrans-351
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.16: Histogram for the average age across target outcome'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_16.jpg)'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.16: Histogram for the average age across target outcome'
  id: totrans-354
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: The first line of code creates the temporary aggregation datasets, which summarizes
    the average age and the number of records in each category. The plotting functionality
    used is on the lines of our previous visuals. We extend the `ggplot` function
    with the `geom_bar` to render the bar plots.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
- en: We can see that there is barely any difference between the two outcomes. We
    don't see any interesting patterns.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-357
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: In bivariate analysis, we need to be careful before concluding any interesting
    patterns as insights. In many cases, due to the skewed distribution of data, the
    patterns would seem surprisingly interesting.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
- en: Let's move on to the next set of variables.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 32: Studying the Relationship between the Average Value and the y
    Variable'
  id: totrans-360
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this exercise, we will study the relationship between the next set of variables:
    `average` and `y`.'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame object.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, create the `plot_bivariate_numeric_and_categorical` object using the
    following command:'
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE64]'
  id: totrans-365
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Now, print the distribution of records across target outcomes:'
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE65]'
  id: totrans-367
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The output is as follows:'
  id: totrans-368
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE66]'
  id: totrans-369
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Now, plot the histogram using the following command for the defined variables:'
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE67]'
  id: totrans-371
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'The output is as follows:'
  id: totrans-372
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.17: Histogram of average value versus the y variable'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_17.jpg)'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.17: Histogram of average value versus the y variable'
  id: totrans-375
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: In order to automate the data exploration task for bivariate analysis between
    a categorical and a numeric variable, we have defined a function similar to the
    one we defined in the previous exercise. We have additionally used the `sym` function,
    which will help us use dynamic column names in the function. Using `!!sym(column)`
    converts a string to a real column name that's analogous to passing the actual
    value. The previous function first aggregates the average value of the target
    across the variable of interest. The `plot` function then uses the information
    to plot the bar chart with the average values across the target outcomes.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
- en: In bivariate analysis, it is important to carefully validate the patterns observed
    before concluding a specific insight. In some cases, outliers might skew the results
    and therefore deliver incorrect findings. Additionally, fewer of records for a
    particular pattern might also be a risky pattern to conclude. It is always recommended
    to collect all the insights observed and further validate them with additional
    extensive EDA or statistical techniques for significance.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
- en: Here, we don't see any prominent results to conclude. In the `campaign` variable,
    the average number of contacts made during the campaign is a bit lower for successful
    campaigns, but the difference is too small to make any possible conclusions. `pdays`,
    which indicate the number of days since the last contact in the previous campaign
    shows a big difference between the outcomes for the target.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
- en: However, this difference is purely due to most clients being not contacted in
    the previous campaign. All of those records have values set to 999\. The same
    holds true for `previous`; though there is a decent difference between the two,
    most clients were contacted for the first time in the current campaign. The employment
    variance rate, however, shows counter-intuitive results. We would actually expect
    the variance rate to be higher when the outcome is `yes`, but we see it the other
    way around. This sounds interesting, we will make a note of this insight for now
    and later come back for more validation before making any conclusions.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
- en: Let's move on to the next set of categorical dependent variables to be studied
    with the categorical dependent variable.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 33: Studying the Relationship between the cons.price.idx, cons.conf.idx,
    curibor3m, and nr.employed Variables'
  id: totrans-381
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Let's move on to the next set of categorical dependent variables to be studied
    with the categorical dependent variable. For this exercise, we will explore the
    relationship between `cons.price.idx`, `cons.conf.idx`, `euribor3m`, and `nr.employed`,
    with the target variable `y` using histogram.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame object.
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, create a `plot_bivariate_numeric_and_categorical` function and plot the
    histogram:'
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE68]'
  id: totrans-385
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'The output is as follows:'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.18: Histogram of the cons.price.idx, cons.conf.idx, euribor3m, and
    nr.employed variables'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_18.jpg)'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.18: Histogram of the cons.price.idx, cons.conf.idx, euribor3m, and
    nr.employed variables'
  id: totrans-389
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Again, for most cases, we don't see any prominent patterns. However, the `euribor3m`
    variable demonstrates some good differences between the average values for `yes`
    and `no` outcomes of the campaign and, again, seems counter-intuitive. We ideally
    expected higher bank deposits with higher interest rates. Therefore, let's make
    a note of the insight and validate it later.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
- en: Moving on, let's now explore the relationship between two categorical variables.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
- en: Studying the Relationship Between Two Categorical Variables
  id: totrans-392
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To study the relationship and patterns that exist between two categorical variables,
    we can first explore the frequency distribution across each category of the variables.
    A higher concentration in any outcome might be a potential insight. The most effective
    way to visualize this is using stacked bar charts.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
- en: A stacked bar chart will help us to observe the distribution of the target variable
    across multiple categorical variables. The distribution will reveal whether a
    specific category in a categorical variable dominates the target variable, `y`.
    If yes, we can further explore its influence on our problem.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
- en: In the next few exercises, we will explore various categorical variables across
    target variable `y` using stacked bar chart. We will plot absolute count and percentage
    to understand the distribution better.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 34: Studying the Relationship Between the Target y and marital status
    Variables'
  id: totrans-396
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this exercise, we will demonstrate the study between two categorical variables
    using plain frequency counts and then show how inconvenient it is.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
- en: To start simple, let's begin with exploring the relationship between the target,
    `y`, and `marital status`.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE69]'
  id: totrans-400
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE70]'
  id: totrans-402
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Next, create a `temp` aggregation dataset:'
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE71]'
  id: totrans-404
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Define plot size, as illustrated here:'
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE72]'
  id: totrans-406
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Plot the chart with frequency distribution:'
  id: totrans-407
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE73]'
  id: totrans-408
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'The output is as follows:'
  id: totrans-409
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.19: Using ggplot to study the relationship between the target y
    and marital status variables'
  id: totrans-410
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/C12624_02_19.jpg)'
  id: totrans-411
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 2.19: Using ggplot to study the relationship between the target y and
    marital status variables'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: We first aggregate the categorical columns using the `group_by` function. This
    would help us cross frequency count for each category combination. We now use
    this temporary dataset to plot the frequency distribution across the independent
    variable.
  id: totrans-413
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: As we can see, the `yes` frequency is highest for married clients, but this
    may be true just because the number of married clients is high. To understand
    the relationship better, we can further break this down using a stacked bar chart
    with percentage distribution, where each bar represents the percentage of `yes`
    and `no`, respectively.
  id: totrans-414
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Create a `temp` aggregation dataset:'
  id: totrans-415
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE74]'
  id: totrans-416
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Define the plot size using the `options` method:'
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE75]'
  id: totrans-418
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Plot the percentage distribution using the `ggplot` method:'
  id: totrans-419
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE76]'
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The output is as follows:'
  id: totrans-421
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.20: Distribution of target y percentage across marital status'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_20.jpg)'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.20: Distribution of target y percentage across marital status'
  id: totrans-424
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: We can now see counter-intuitive results compared to the previous plot. After
    we normalize the results, we see that `single` clients are more responsive to
    the campaign than those who are married. This is true for `unknown` too, but given
    the uncertainty of the value and the extremely low number of records, we should
    ignore this. We cannot directly conclude the result that single customers are
    more effective in responding to campaigns, but we can validate this later.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 35: Studying the Relationship between the job and education Variables'
  id: totrans-426
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this exercise, we will accelerate our exploration. Let's build a custom function
    where we can combine the two charts, that is, frequency distribution as well percentage
    distribution, for categorical variable's bivariate analysis.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps:'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
- en: 'First, import the `ggplot2` package using the following command:'
  id: totrans-429
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE77]'
  id: totrans-430
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'Create a DataFrame object, `df`, and use the `bank-additional-full.csv` file
    using the following command:'
  id: totrans-431
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE78]'
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'Create a `temp` aggregation dataset:'
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE79]'
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Define the plot size:'
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE80]'
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Plot the chart with a frequency distribution:'
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE81]'
  id: totrans-438
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Plot the percentage distribution:'
  id: totrans-439
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE82]'
  id: totrans-440
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Plot the `plot_bivariate_categorical` using the following command:'
  id: totrans-441
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE83]'
  id: totrans-442
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'The output is as follows:'
  id: totrans-443
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.21: Studying the relationship between the job and education variables'
  id: totrans-444
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/C12624_02_21.jpg)'
  id: totrans-445
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 2.21: Studying the relationship between the job and education variables'
  id: totrans-446
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: We use the same principles to define the function that would plot the charts
    together. The additional difference here would be two plots for each combination.
    The first (left) is the frequency plot across the category combinations, and the
    right-hand side plot showcases the percentage distribution (normalized across
    category) visual. Studying both the plots together helps validate results more
    effectively. The creation of temporary aggregated datasets has an additional step
    with the use of the `ungroup` function. This is used to enable the relative percentage
    distribution of target outcome within the categorical levels of independent variable,
    that is, distribution of `y` across each level within `marital`.
  id: totrans-447
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If we observe the results from the previous output plots, we can see that the
    highest response rates for the campaign are from student and retired professionals,
    but this comes with a caveat. We see that both of these categories have far less
    observations as compared to the other categories. Therefore, we would need additional
    validation before making further conclusions. We, therefore, make a note of this
    insight too. From education levels, we don't see any interesting trends. Though
    `illiterate` clients have a high response rate, the number of observations are
    far too low to conclude anything tangible.
  id: totrans-448
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Let''s take a look at credit default and housing loan categories:'
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE84]'
  id: totrans-450
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'The output is as follows:'
  id: totrans-451
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.22: Studying the relationship between the default and housing variables'
  id: totrans-452
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/C12624_02_22.jpg)'
  id: totrans-453
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 2.22: Studying the relationship between the default and housing variables'
  id: totrans-454
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Again, we don''t see any interesting trends. Let''s continue the exploration
    for personal loan and contact mode:'
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE85]'
  id: totrans-456
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'The output is as follows:'
  id: totrans-457
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 2.23: Studying the relationship between the loan and contact variables'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_23.jpg)'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.23: Studying the relationship between the loan and contact variables'
  id: totrans-460
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Here, we can see an interesting trend for the mode of contact used. There is
    generally a higher response rate when the mode of campaign communication is cellular
    rather than landline. Let's make a note of this trend too and huddle back with
    further validation.
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
- en: 'I encourage you to explore the relationships between our target variable and
    the remaining dependent categorical variables: month, day of week, and the previous
    outcome of the campaign.'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
- en: Multivariate Analysis
  id: totrans-463
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Multivariate analysis is the process of studying the relationships between more
    than two variables; essentially, one dependent variable and more than one independent
    variable. Bivariate analysis is a form of multivariate analysis. There are several
    forms of multivariate analysis that are important, but we will skip the details
    for now to restrict the scope of the chapter. In the next few chapters, we will
    take a closer look at linear and logistic regression, which are two popular multivariate
    analysis techniques.
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
- en: 'Some of the most common techniques used in multivariate analysis are as follows:'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
- en: Multiple linear regression (studying the impact of more than one independent
    variable on a numeric/continuous target variable)
  id: totrans-466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Logistic regression (studying the impact of more than one independent variable
    on a categorical target variable)
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Factor analysis
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MANOVA
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Validating Insights Using Statistical Tests
  id: totrans-470
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Throughout the journey of EDA, we have collected and noted some interesting
    patterns for further validation. It is now the right time to test whether whatever
    we observed previously are actually valid patterns or just appeared to be interesting
    due to random chance. The most effective and straightforward way to approach this
    validation is by performing a set of statistical tests and measuring the statistical
    significance of the pattern. We have a ton of options in the available set of
    tests to choose from. The options vary based on the type of independent and dependent
    variable. The following is a handy reference diagram that explains the types of
    statistical test that we can perform to validate our observed patterns:'
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 2.24: Validating dependent and independent variables'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
- en: '](img/C12624_02_24.jpg)'
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 2.24: Validating dependent and independent variables'
  id: totrans-474
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Let''s collect all our interesting patterns into one place here:'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
- en: The campaign outcome has a higher chance of `yes` when the employee variance
    rate is low.
  id: totrans-476
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The campaign outcome has a higher chance of `yes` when the euro interest rates
    are low.
  id: totrans-477
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Single clients have a higher chance of responding positively to the campaign.
  id: totrans-478
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Student and retired clients have a higher chance of responding positively to
    the campaign.
  id: totrans-479
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cellular contacts have a higher chance of responding positively to the campaign.
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you try to categorize these hypotheses, we can see that we have a categorical
    dependent variable in all cases. So, we should use a chi-squared test or logistic
    regression test to validate our results.
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
- en: Let's perform these tests one by one.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
- en: Categorical Dependent and Numeric/Continuous Independent Variables
  id: totrans-483
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Hypotheses 1 and 2 have a continuous independent variable. Referring to the
    figure in the previous section, we will opt for the chi-squared test. In the process
    of hypothesis testing, we start by defining a null hypothesis and an alternate
    hypothesis. Start with a negative approach, that is, assume the null hypothesis
    to be what we don't want to happen. The hypothesis test examines the chances that
    the pattern observed happens due to random chance or there if is certainty about
    the observation. This measure is quantified as probability. If the probability
    of the significance of the null hypothesis to happen is less than 5% (or a suitable
    cut-off), we reject the null hypothesis and confirm the validity of the alternate
    hypothesis.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s begin; for hypothesis 1, we define the following:'
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
- en: '**Null hypothesis**: The campaign outcome has no relationship with the employee
    variance rate.'
  id: totrans-486
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Alternate hypothesis**: The campaign outcome has a relationship with employee
    variance rate.'
  id: totrans-487
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We test the validity of our null hypothesis with simple logistic regression.
    We will discuss this topic in more detail in the following chapters. For now,
    we will quickly perform a simple check to test our hypothesis. The following exercise
    leverages R's built-in function for performing logistic regression.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 36: Hypothesis 1 Testing for Categorical Dependent Variables and Continuous
    Independent Variables'
  id: totrans-489
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: To perform hypothesis testing for categorical dependent variables and continuous
    independent variables, we will use the `glm()` function to fit the logistic regression
    model (more on this in *Chapter 5*, *Classification*). This exercise will help
    us statistically test whether a categorical dependent variable (for example, `y`)
    has any relationship with a continuous independent variable, for example,
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
- en: '`emp.var.rate`.'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps to complete the exercise:'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame objects.
  id: totrans-493
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'First, convert the dependent variable into a `factor` type:'
  id: totrans-494
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE86]'
  id: totrans-495
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'Next, perform logistic regression:'
  id: totrans-496
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE87]'
  id: totrans-497
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: 'Print the test summary:'
  id: totrans-498
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE88]'
  id: totrans-499
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'The output is as follows:'
  id: totrans-500
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE89]'
  id: totrans-501
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: We convert the target variable, `y`, as a `factor` (if it was not already).
    We use the `glm` function provided by R for logistic regression. The `glm` function
    also performs other forms of regression, and we specify the `family = 'binomial'`
    parameter for using the function as a logistic regression. The formula in the
    first place of the function defines the dependent and independent variables.
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
- en: There are quite a few results shared in the output. We will ignore most of them
    for now and focus only on the final output. One of the results provided is the
    significance probability, which confirms that there is less than a `2e-16` chance
    that our null hypothesis is true, and therefore we can reject it. Therefore, the
    target outcome has a statistically significant relationship with the employee
    variance rate and, as we can see, there is a higher chance of campaign conversion
    as the rate decreases.
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
- en: 'Similarly, let''s repeat the same test for our second hypothesis. We define
    the following:'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
- en: '**Null hypothesis**: The campaign outcome has no relationship with the euro
    interest rate.'
  id: totrans-505
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Alternate hypothesis**: The campaign outcome has a relationship with the
    euro interest rate.'
  id: totrans-506
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Exercise 37: Hypothesis 2 Testing for Categorical Dependent Variables and Continuous
    Independent Variables'
  id: totrans-507
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once again, we will use logistic regression to statistically test whether there
    is a relationship between the target variable, `y`, and the independent variable.
    In this exercise, we will use the `euribor3m` variable.
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps:'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame objects.
  id: totrans-510
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'First, convert the dependent variable into a `factor` type:'
  id: totrans-511
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE90]'
  id: totrans-512
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Next, perform logistic regression:'
  id: totrans-513
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE91]'
  id: totrans-514
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'Print the test summary:'
  id: totrans-515
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE92]'
  id: totrans-516
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'The output is as follows:'
  id: totrans-517
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE93]'
  id: totrans-518
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: Focusing exclusively on the previous output, we can confirm that we can reject
    the null hypothesis and accept the alternative hypothesis. Therefore, the target
    outcome has a statistically significant relationship with the Euro Interest rate
    and, as we can see, there is a higher chance of campaign conversion as the rate
    decreases.
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
- en: Categorical Dependent and Categorical Independent Variables
  id: totrans-520
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Moving on, let's take a look at the third hypothesis. To test the relationship
    between the categorical dependent variable and categorical independent variable,
    we can use the chi squared test.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
- en: 'For hypothesis 3, we define the following:'
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
- en: '**Null hypothesis**: The campaign outcome has no relationship with clients
    who never married.'
  id: totrans-523
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Alternate hypothesis**: The campaign outcome has a relationship with clients
    who never married.'
  id: totrans-524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the following exercise, we will leverage R's chi-square test function to
    validate the hypothesis..
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 38: Hypothesis 3 Testing for Categorical Dependent Variables and Categorical
    Independent Variables'
  id: totrans-526
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this exercise, we will perform a statistical test using the chi-squared test.
    We use the chi-squared test because both the independent and dependent variables
    are categorical, particularly when testing the relationship between `y` and marital
    status.
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps:'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame objects.
  id: totrans-529
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'First, convert the dependent variable into a `factor` type:'
  id: totrans-530
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE94]'
  id: totrans-531
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Create a flag for `single` clients:'
  id: totrans-532
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE95]'
  id: totrans-533
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'Create a `sample` object and print the value:'
  id: totrans-534
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE96]'
  id: totrans-535
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'The output is as follows:'
  id: totrans-536
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE97]'
  id: totrans-537
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Perform the chi-squared test:'
  id: totrans-538
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE98]'
  id: totrans-539
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'Print the test summary:'
  id: totrans-540
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE99]'
  id: totrans-541
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'The output is as follows:'
  id: totrans-542
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE100]'
  id: totrans-543
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE100]'
- en: We first create a new variable/flag for this test where we define whether a
    client is `single` or not. Since we are exclusively defining our relationship
    between the target and client's `single` marital status, we mask all other classes
    within marital status.
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
- en: The `table` command creates a new DataFrame with a simple frequency distribution
    between each individual class. Finally, we use this DataFrame to perform the chi-squared
    test.
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
- en: As we can see, the p-value or the chance of the null hypothesis being true is
    far less than 5%. Therefore, we can accept our alternate hypothesis, which confirms
    the fact that the campaign's outcome is positively influenced by single clients
    rather than other clients.
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
- en: Moving on, let's take a quick look at the validity of our 4th and 5th hypotheses.
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
- en: 'For the 4th and 5th hypotheses, we define the following:'
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
- en: '**Null hypothesis**: The campaign outcome has no relationship with clients
    who are students or retired. The campaign outcome has no relationship with the
    contact mode used.'
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Alternate hypothesis**: The campaign outcome has no relationship with clients
    who are students or retired. The campaign outcome has a relationship with the
    contact mode used.'
  id: totrans-550
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Exercise 39: Hypothesis 4 and 5 Testing for a Categorical Dependent Variable
    and a Categorical Independent Variable'
  id: totrans-551
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once again, let's use the chi-squared test to statistically check whether there
    is a relationship between the target variable, `y`, the categorical independent
    variable `job_flag`, and `contact`.
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps:'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
- en: Import the required libraries and create the DataFrame objects.
  id: totrans-554
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'First, convert the dependent variable into a `factor` type:'
  id: totrans-555
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE101]'
  id: totrans-556
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'Prepare the independent variable:'
  id: totrans-557
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE102]'
  id: totrans-558
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Create an object named `sample4` and print the value:'
  id: totrans-559
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE103]'
  id: totrans-560
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The output is as follows:'
  id: totrans-561
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE104]'
  id: totrans-562
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE104]'
- en: 'Perform the test for the 4th hypothesis:'
  id: totrans-563
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE105]'
  id: totrans-564
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'Print the test summary for the 4th hypothesis:'
  id: totrans-565
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE106]'
  id: totrans-566
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'The output is as follows:'
  id: totrans-567
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE107]'
  id: totrans-568
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'Now, create a new `sample5` object and print the value:'
  id: totrans-569
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE108]'
  id: totrans-570
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'The output is as follows:'
  id: totrans-571
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE109]'
  id: totrans-572
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Perform the test on the `test5` variable:'
  id: totrans-573
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE110]'
  id: totrans-574
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: 'Print the test summary for the 5th hypothesis:'
  id: totrans-575
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE111]'
  id: totrans-576
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'The output is as follows:'
  id: totrans-577
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE112]'
  id: totrans-578
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE112]'
- en: We can see that results have been validated in our favor. We can also see that
    there is definitely a relationship between student and retired clients and the
    cellular mode of communication with a positive outcome in the campaign.
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
- en: Collating Insights – Refine the Solution to the Problem
  id: totrans-580
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We have now traversed the length and breadth of EDA. In the different sections,
    we studied the data in varying levels of depth. Now that we have valid answers
    for the data exploration problem, we can touch base again with the initial problem
    defined. If you recall the **complication** and **question** section in the problem
    statement, we had *What are factors that lead to poor performance of the campaign*.
    Well, we now have an answer based on the patterns we discovered during the bivariate
    analysis and validated with statistical tests.
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
- en: Collating all the hypotheses validated with the correct story brings about the
    solution to our problem. Spend good time with the outcome of each of the hypothesis
    test results to knit the story together. Each hypothesis tells us whether an independent
    variable has a relationship with a dependent variable.
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-583
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this chapter, we explored EDA using a practical use case and traversed the
    business problem. We started by understanding the overall process of executing
    a data science problem and then defined our business problem using an industry
    standard framework. With the use case being cemented with appropriate questions
    and complications, we understood the role of EDA in designing the solution for
    the problem. Exploring the journey of EDA, we studied univariate, bivariate, and
    multivariate analysis. We performed the analysis using a combination of analytical
    as well as visual techniques. Through this, we explored the R packages for visualization,
    that is, `ggplot` and some packages for data wrangling through `dplyr`. We also
    validated our insights with statistical tests and, finally, collated the insights
    noted to loop back with the original problem statement.
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will lay the foundation for various machine learning
    algorithms, and discuss supervised learning in depth.
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
