<html><head></head><body>
		<div id="_idContainer075">
			<h1 id="_idParaDest-59" class="chapter-number"><a id="_idTextAnchor062"/>4</h1>
			<h1 id="_idParaDest-60"><a id="_idTextAnchor063"/>Model Data for Machine Learning in Power BI</h1>
			<p>In <a href="B19500_03.xhtml#_idTextAnchor047"><span class="No-Break"><em class="italic">Chapter 3</em></span></a> of this book, you prepped FAA Wildlife Strike data for a Power BI dataset, built a relational dataset that will function as a foundation for analytics, and then configured basic settings in that dataset so that you could take a deep dive into the data and discover features for ML in <span class="No-Break">Power BI.</span></p>
			<p>As you begin discovering features in the data for your ML models, you will need a process for adding those features to queries that can be used for training and testing those models in Power BI. In this chapter, you will build out an analytic report in Power BI as you explore the dataset for features suitable for ML in Power BI. When features are discovered, you will create queries within Power Query that will eventually serve the purpose of training and testing your <span class="No-Break">ML models.</span></p>
			<h1 id="_idParaDest-61"><a id="_idTextAnchor064"/>Technical requirements</h1>
			<p>For this chapter, you will need <span class="No-Break">the following:</span></p>
			<ul>
				<li>Power BI Desktop April 2023 or later (no <span class="No-Break">licenses required)</span></li>
				<li>FAA Wildlife Strike data files from either the FAA website or the Packt GitHub <span class="No-Break">site: </span><a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI"><span class="No-Break">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI</span></a></li>
			</ul>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor065"/>Choosing features via data exploration</h1>
			<p>Your project is <a id="_idIndexMarker207"/>to be implemented completely within <a id="_idIndexMarker208"/>Power BI, without using external <a id="_idIndexMarker209"/>tools. Power BI ML is a <strong class="bold">software as a service</strong> (<strong class="bold">SaaS</strong>) tool that does <a id="_idIndexMarker210"/>not require the setup of an infrastructure or advanced coding skills. Traditionally, most ML projects are implemented using highly specialized tools that require strong coding skills with languages such as R and Python. By implementing the entire project in Power BI, you will be able <a id="_idIndexMarker211"/>to complete it in a short timeline, build <a id="_idIndexMarker212"/>all of the components with SaaS tools and minimal coding, and then manage deployment, scalability, and future changes using a single suite <span class="No-Break">of tools.</span></p>
			<p>The data architecture techniques in this chapter are tailored to analysts and business intelligence developers, and the process will be a great way to learn the basics of finding and modeling features for ML. Experienced ML architects who are fluent in R or Python might handle the process differently, but you need to proceed with tools that are within your skill set. Using Power BI tools including Power Query, datasets, dataflows, and ML will enable you to complete the project with little code effort, all within <span class="No-Break">Power BI.</span></p>
			<p>When you run potential features through Power BI ML, the tool will help identify the features that have strong predictive value. Some of the features that you add to tables may turn out to have little predictive value, but running them through the Power BI ML tool will help identify the value <span class="No-Break">of features.</span></p>
			<h2 id="_idParaDest-63"><a id="_idTextAnchor066"/>Adding Power Query tables to your architecture for ML training and testing</h2>
			<p>Revisiting your <a id="_idIndexMarker213"/>preliminary data architecture, you will be populating the ML training data tables in Power Query with features that you discover while creating an analytical report in Power BI using <span class="No-Break">your dataset:</span></p>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/Figure_4.01_B19500.jpg" alt="Figure 4.1 – ML training data will be discovered during analysis in Power BI"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 – ML training data will be discovered during analysis in Power BI</p>
			<p>You decide to review the deliverables that will fulfil the stakeholder requirements, as discussed in <a href="B19500_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic">Chapter 1</em></span></a><span class="No-Break">:</span></p>
			<ul>
				<li><strong class="bold">Analytic Report</strong>: This will be created as part of the analysis process using your Power <span class="No-Break">BI dataset</span></li>
				<li><strong class="bold">Predict Damage, Predict Size, Predict Height</strong>: You will need three separate tables of training data for each of these three machine <span class="No-Break">learning models</span></li>
			</ul>
			<p>As you build out <a id="_idIndexMarker214"/>your analytic report and discover new features that can be used for predictions, you will iteratively build out your training data tables in Power Query for use with ML. You are building an architecture that can be updated and modified for future versions of the <span class="No-Break">project, too:</span></p>
			<div>
				<div id="_idContainer059" class="IMG---Figure">
					<img src="image/Figure_4.02_B19500.jpg" alt="Figure 4.2 – Data exploration and feature discovery is an iterative process"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 – Data exploration and feature discovery is an iterative process</p>
			<p>You can resume where you left off with your PBIX file from <a href="B19500_03.xhtml#_idTextAnchor047"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, or you can follow along using the finished version of the content from this chapter. You can download the PBIT version of the file from the Packt GitHub site folder for <a href="B19500_04.xhtml#_idTextAnchor062"><span class="No-Break"><em class="italic">Chapter </em></span><span class="No-Break"><em class="italic">4</em></span></a><span class="No-Break">: </span><a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-04"><span class="No-Break">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-04</span></a><span class="No-Break">.</span></p>
			<p>First, you’ll need <a id="_idIndexMarker215"/>to create a group of new queries to make tables that can be modified during this <span class="No-Break">iterative process:</span></p>
			<ol>
				<li>Create a new group in Power Query called <span class="No-Break"><strong class="source-inline">ML Queries</strong></span><span class="No-Break">.</span></li>
				<li>Right-click the <strong class="bold">Strike Reports</strong> query in the <strong class="bold">Curated Reporting Queries</strong> group, and <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Reference</strong></span><span class="No-Break">.</span></li>
				<li>Rename the new query <span class="No-Break"><strong class="source-inline">Predict Damage</strong></span><span class="No-Break">.</span></li>
				<li>Right-click the new query and unselect <span class="No-Break"><strong class="bold">Enable Load</strong></span><span class="No-Break">.</span></li>
				<li>Right-click the new query and move it to the new <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>Repeat these steps two more times, but rename the queries <strong class="source-inline">Predict Size</strong> and <span class="No-Break"><strong class="source-inline">Predict Height</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Your Power Query groups should now look <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/Figure_4.03_B19500.jpg" alt="Figure 4.3 – You now have a separate group for ML Queries"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 – You now have a separate group for ML Queries</p>
			<p>Are you scratching your head and wondering why all three queries are identical? Reviewing the iterative process from <span class="No-Break"><em class="italic">Figure 4</em></span><em class="italic">.2</em>, you’ll see that each of these queries will be modified as you discover new features in the data using Power BI. Through this process, each <a id="_idIndexMarker216"/>query will be whittled down and customized to represent a unique set of features that relate to the intended prediction. Before beginning feature discovery via analytics, you think through the likely granularity of each query for your ML models. Effectively, you want to define what an individual row of <span class="No-Break">data represents:</span></p>
			<ul>
				<li><strong class="bold">Predict Damage</strong>: The <em class="italic">yes</em>/<em class="italic">no</em> binary prediction for damage will be applied to an individual reported wildlife strike. The question asked will be “<em class="italic">Based upon the circumstances of the strike, how likely is there to be damage to the aircraft?</em>” Each row will be a unique wildlife strike <span class="No-Break">report flight.</span></li>
				<li><strong class="bold">Predict Size</strong>: Predicting the size of the wildlife that struck the aircraft is your second deliverable. This prediction could be useful in identifying the size of an animal that struck an aircraft if there was no visual confirmation or remains recovered. This prediction will also be at the level of a unique wildlife strike <span class="No-Break">report flight.</span></li>
				<li><strong class="bold">Predict Height</strong>: Ideally, you’d like to predict the height of different wildlife that hit an aircraft. Data about the time of year, location, and species could be used to predict the height. Predicting the height of an individual event would also keep the grain of the table identical to the <span class="No-Break">source database.</span></li>
			</ul>
			<p>The next stage is building <span class="No-Break">the report.</span></p>
			<h2 id="_idParaDest-64"><a id="_idTextAnchor067"/>Building an analytic report to discover and choose initial features for the Predict Damage ML model</h2>
			<p>At the bottom of <a id="_idIndexMarker217"/>your blank Power BI report, change the name of the page to <strong class="source-inline">Predict Damage</strong>. This <a id="_idIndexMarker218"/>page will be part of your analytic report. You first ask the question “<em class="italic">What constitutes a yes/no answer to indicate whether a wildlife strike caused damage?</em>” Referring to the <strong class="source-inline">read_me.xls</strong> documentation, you find a column named <strong class="bold">Indicated Damage</strong>, which is on the <strong class="bold">Strike Reports</strong> table, and provides a <em class="italic">True</em>/<em class="italic">False</em> value. This column will serve as the column you are predicting in the Predict Damage binary <span class="No-Break">ML model.</span></p>
			<p>You follow these steps to dive into <span class="No-Break">the data:</span></p>
			<ol>
				<li>From the <strong class="bold">Fields</strong> list, drag <strong class="bold">Incidents</strong> onto <span class="No-Break">the canvas.</span></li>
				<li>Create a <a id="_idIndexMarker219"/>new calculated measure to calculate the percentage <a id="_idIndexMarker220"/>of incidents that <span class="No-Break">had damage:</span><pre class="source-code">
<strong class="bold">Indicated Damage % = DIVIDE(CALCULATE([Incidents],FILTER('Strike Reports Fact',[Indicated Damage] = TRUE)),[Incidents])</strong></pre></li>
				<li>Format <strong class="bold">Indicated Damage %</strong> as <span class="No-Break">a percentage.</span></li>
				<li>Drag <strong class="bold">Indicated Damage %</strong> onto the table <span class="No-Break">with </span><span class="No-Break"><strong class="bold">Incidents</strong></span><span class="No-Break">.</span></li>
				<li>Change the table to <span class="No-Break">a matrix.</span></li>
				<li>Drag <strong class="bold">Aircraft Type Dim[Aircraft Classification]</strong> <span class="No-Break">onto rows.</span></li>
			</ol>
			<p>Your matrix should appear <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/Figure_4.04_B19500.jpg" alt="Figure 4.4 – Animal strikes with reported damage by aircraft classification"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 – Animal strikes with reported damage by aircraft classification</p>
			<p>You notice that the vast majority of wildlife strike reports are for airplanes, and 9.4% of the reports indicated damage. Helicopters also have several thousand reports, but you decide to whittle the data down to airplanes since those are the most common passenger aircraft and do not introduce flight path complexities such <span class="No-Break">as hovering:</span></p>
			<ol>
				<li value="7">Drag <strong class="bold">Aircraft Type Dim[Aircraft Classification]</strong> into <strong class="bold">Filters on this page</strong> of the Power BI <span class="No-Break">filter pane.</span></li>
				<li>Filter for <strong class="bold">Airplane</strong> and leave the other <span class="No-Break">options unchecked.</span></li>
			</ol>
			<p>Move the <a id="_idIndexMarker221"/>matrix to the left side of the canvas, and create a new chart <a id="_idIndexMarker222"/>to view incidents and damage <span class="No-Break">by year.</span></p>
			<ol>
				<li value="9">Choose <strong class="bold">Line and stacked column chart</strong> from the <span class="No-Break"><strong class="bold">Visualizations</strong></span><span class="No-Break"> column.</span></li>
				<li>Put <strong class="bold">Strike Report Fact[Incidents]</strong> on the column <span class="No-Break"><em class="italic">y</em></span><span class="No-Break"> axis.</span></li>
				<li>Put <strong class="bold">Strike Report Fact[Indicated Damage %]</strong> on the line <span class="No-Break"><em class="italic">y</em></span><span class="No-Break"> axis.</span></li>
				<li>Put <strong class="bold">Date Dim[Year]</strong> on the <span class="No-Break"><em class="italic">x</em></span><span class="No-Break"> axis.</span></li>
			</ol>
			<p>You notice an interesting trend on the chart. The number of reported incidents increased over time until the COVID-related disruptions of 2020. At the same time, the percentage of strikes that caused damage went down and appear to have leveled off <span class="No-Break">around 2014.</span></p>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/Figure_4.05_B19500.jpg" alt="Figure 4.5 – Incidents and incidents with damage by year"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.5 – Incidents and incidents with damage by year</p>
			<p>Why did these trends develop? You don’t know the answers, but the following are among the <span class="No-Break">possible causes:</span></p>
			<ul>
				<li>Improved surveillance and deterrence of wildlife by air traffic control <span class="No-Break">over time</span></li>
				<li>Better compliance with filling out reports when there wasn’t <span class="No-Break">any damage</span></li>
				<li>Improvements in <span class="No-Break">aircraft technology</span></li>
				<li>Changes in quantities of flights, times of flights, and times at <span class="No-Break">various altitudes</span></li>
			</ul>
			<p>For the time <a id="_idIndexMarker223"/>being, you decide to focus on data starting in the year 2014 since older data <a id="_idIndexMarker224"/>likely has different trends. Is this the perfect starting point? Advanced analytic techniques might unveil the perfect start date for your data, but for your first round of analytics in Power BI, you settle on 2014 as the starting point. Drag <strong class="bold">Date Dim[Year]</strong> into <strong class="bold">Filters on this page</strong> of the Power BI filter pane and filter to greater than or equal <span class="No-Break">to 2014.</span></p>
			<p>Using common sense, it would seem that larger wildlife could be more likely to cause damage versus small animals. Copy and paste the matrix on the left side of the page showing <strong class="bold">Aircraft Classification</strong>, and replace <strong class="bold">Aircraft Classification</strong> with <strong class="bold">Strike Report Fact[Size]</strong>. Your report should look <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer063" class="IMG---Figure">
					<img src="image/Figure_4.06_B19500.jpg" alt="Figure 4.6 – Viewing incidents and damage with filter criteria applied"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 – Viewing incidents and damage with filter criteria applied</p>
			<p>You notice that increasing the size of the wildlife appears to result in a larger percentage of incidents <a id="_idIndexMarker225"/>with damage. Several incidents also left the size field blank, which will need to <a id="_idIndexMarker226"/>be fixed if you use that field for ML. Basic ML tools generally require non-blank values in the data that is used for training and testing. Power BI ML has built-in featurization tools that will account for blank values, but handling blank values is a good idea before building <span class="No-Break">ML models.</span></p>
			<p>For your first iteration of the <strong class="bold">Predict Damage</strong> data for ML in Power BI, you’ve isolated the following features. You will add more features in future chapters of the book, but this is a good start to test your architectural design in <span class="No-Break">Power Query:</span></p>
			<ul>
				<li>A row represents an individual <span class="No-Break">reported event.</span></li>
				<li><strong class="bold">Strike Report Fact[Indicated Damage]</strong> is the field you will be training the machine learning model <span class="No-Break">to predict.</span></li>
				<li>You will use rows that have <strong class="bold">Aircraft Classification</strong> <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">Airplane</strong></span><span class="No-Break">.</span></li>
				<li>You will use data with <strong class="bold">Incident Date</strong> on or after January <span class="No-Break">1, 2014.</span></li>
				<li>You will <a id="_idIndexMarker227"/>also use <strong class="bold">Strike Report Fact[Size]</strong> as a feature for the machine <a id="_idIndexMarker228"/>learning model. You’ll need to replace the blank values with a value such as text <span class="No-Break">reading </span><span class="No-Break"><strong class="source-inline">blank</strong></span><span class="No-Break">.</span></li>
			</ul>
			<h2 id="_idParaDest-65"><a id="_idTextAnchor068"/>Building an analytic report to discover and choose initial features for the Predict Size ML model</h2>
			<p>Now you move on to find a few features to be used in predicting the size of the wildlife that struck an <a id="_idIndexMarker229"/>aircraft. Predicting the size of the animal or animals could be helpful in understanding <a id="_idIndexMarker230"/>what may have hit an aircraft at a certain altitude, location, and in a certain season. When the species is unknown, size could be a valuable factor in determining future risks and also for identifying possible collisions with endangered or <span class="No-Break">protected wildlife.</span></p>
			<p>You’ve already included size as a predictive factor for your damage prediction ML model, but there will inevitably be scenarios where the animal was not seen or found. The Predict Size algorithm will predict whether a strike happened with wildlife that is large, medium, <span class="No-Break">or small:</span></p>
			<ol>
				<li>You start by duplicating the <strong class="bold">Predict Damage</strong> page, and change the name to <strong class="source-inline">Predict Size</strong>. You will reuse the content that has already <span class="No-Break">been created.</span></li>
				<li>First, you decide to keep the <strong class="bold">Aircraft Classification</strong> filter set to <strong class="source-inline">Airplane</strong> so that your machine learning models will apply to the same types of use cases for your project. You modify the line and stacked column chart <span class="No-Break">as follows:</span><ul><li>Remove <strong class="bold">Indicated Damage %</strong> from <span class="No-Break">the chart</span></li><li>Add <strong class="bold">Strike Reports Fact[Size]</strong> to the <span class="No-Break">column legend</span></li><li>In the filter pane, clear the filter <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Date[Year]</strong></span></li></ul></li>
			</ol>
			<p>You notice that blank (empty) values for <strong class="bold">Size</strong> start showing up in the <span class="No-Break">year 2010:</span></p>
			<div>
				<div id="_idContainer064" class="IMG---Figure">
					<img src="image/Figure_4.07_B19500.jpg" alt="Figure 4.7 – Blank values start showing up in 2010"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 – Blank values start showing up in 2010</p>
			<ol>
				<li value="3">You add <strong class="bold">Strike Reports Fact[Size]</strong> to the filter pane for <strong class="bold">Filters on this page</strong> and remove the blank values from the report. While blank values for <strong class="bold">Size</strong> were <a id="_idIndexMarker231"/>included with your previous query for predicting damage, blank values <a id="_idIndexMarker232"/>do not provide value for this model since you are trying to predict the outcome of the <strong class="bold">Strike Reports Fact[Size]</strong> field. The <strong class="bold">Predict Damage ML</strong> model will be beneficial for evaluating the likelihood of damage from a strike, while the <strong class="bold">Predict Size ML</strong> model will predict the size of the wildlife strike when other factors <span class="No-Break">are known.</span></li>
			</ol>
			<p>You notice that even with the blank values removed for <strong class="bold">Size</strong>, there was some sort of change in 2010. Fewer medium-sized strikes were reported, and more small strikes <span class="No-Break">were reported:</span></p>
			<div>
				<div id="_idContainer065" class="IMG---Figure">
					<img src="image/Figure_4.08_B19500.jpg" alt="Figure 4.8 – Distribution of reported sizes appears to change in 2010"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 – Distribution of reported sizes appears to change in 2010</p>
			<p>You decide to include data starting in the year 2010 by filtering <strong class="bold">Date[Year]</strong> in the filter pane. Make the change in <strong class="bold">Filters on this page</strong> with <strong class="bold">Year</strong> added as <span class="No-Break">a filter.</span></p>
			<p>On the <strong class="bold">Predict Damage</strong> report page, you already observed that the likelihood of damage <a id="_idIndexMarker233"/>increases as the <a id="_idIndexMarker234"/>size of the strike increases. Therefore, you decide to keep <strong class="bold">Strike Reports Fact[Indicated Damage]</strong> as a feature for <span class="No-Break">predicting size.</span></p>
			<p>You are aware that birds, which are often the culprits in these wildlife strikes, migrate over the course of the year. You remove <strong class="bold">Date[Year]</strong> from the <em class="italic">x</em> axis of the line and stacked column chart, and replace it with <strong class="bold">Date[Month Num]</strong>. Notice that the frequency and distribution of strikes and the size of strikes change throughout <span class="No-Break">the year:</span></p>
			<div>
				<div id="_idContainer066" class="IMG---Figure">
					<img src="image/Figure_4.09_B19500.jpg" alt="Figure 4.9 – Frequency and distribution appear to change by month when all years are aggregated"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 – Frequency and distribution appear to change by month when all years are aggregated</p>
			<p>You decide to add the month number as a feature to your query for data to train and test the Predict Size ML model. Is month of year a better level of aggregation than day of year, week <a id="_idIndexMarker235"/>of year, or quarter of year? You might revisit this question in future iterations <a id="_idIndexMarker236"/>of the solution, but for now, you decide to proceed since a deep dive would require extra time and effort that could impact <span class="No-Break">your deadline.</span></p>
			<p>Logically, larger-sized wildlife strikes could cause more severe or expensive damage. The <strong class="bold">Strike Reports Fact</strong> table contains four columns with cost data including <strong class="bold">Cost of Repairs</strong>, <strong class="bold">Other Costs</strong>, <strong class="bold">Cost of Repair Adjusted</strong>, and <strong class="bold">Other Costs Adjusted</strong>. The adjusted columns are indexed for inflation, so you decide to use those values. You decide to combine those columns into a single column. In order to combine them, you go back to Power Query and create a new column on the <strong class="bold">Strike Reports</strong> query of the <strong class="bold">Curated Reporting </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group:</span></p>
			<ol>
				<li>Click on the <strong class="bold">Strike Reports</strong> query of the <strong class="bold">Curated Reporting </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>On the Power Query ribbon and select <strong class="bold">Add Column</strong> | <strong class="bold">General</strong> | <span class="No-Break"><strong class="bold">Custom Column</strong></span><span class="No-Break">.</span></li>
				<li>Name <a id="_idIndexMarker237"/>the new column <strong class="source-inline">Total </strong><span class="No-Break"><strong class="source-inline">Costs Adjusted</strong></span><span class="No-Break">.</span></li>
				<li>Enter <a id="_idIndexMarker238"/>the following as the M expression that adds the <span class="No-Break">columns together:</span><pre class="source-code">
= if [Cost of Repairs Adjusted] = null then [Other Costs Adjusted]</pre><pre class="source-code">
else if [Other Costs Adjusted] = null then [Cost of Repairs Adjusted]</pre><pre class="source-code">
else [Cost of Repairs Adjusted] + [Other Costs Adjusted]</pre></li>
			</ol>
			<p>The conditional statements exist to ensure that rows with one null value don’t <span class="No-Break">get skipped.</span></p>
			<ol>
				<li value="5">Change the data type to <strong class="bold">Fixed </strong><span class="No-Break"><strong class="bold">Decimal Number</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/Figure_4.10_B19500.jpg" alt="Figure 4.10 – Add a custom column for total costs"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 – Add a custom column for total costs</p>
			<p>Since you referenced the <strong class="bold">Strike Reports</strong> query in your other downstream queries, the new column will also propagate to those queries! Next time you reprocess your Power BI dataset, a column for <strong class="bold">Total Adjusted Costs</strong> will appear on the <strong class="bold">Strike Reports</strong> Fact table. Click <strong class="bold">Close &amp; Apply</strong> in Power Query to update your dataset. Once processed, you <a id="_idIndexMarker239"/>decide to add three new DAX expressions to the <strong class="bold">Strike Reports</strong> Fact table of the <a id="_idIndexMarker240"/>dataset for sum (total charges for all rows selected), average (an average of all rows selected), and median (the middle value of all rows selected to eliminate the impact of extremely large and rare <span class="No-Break">cost events):</span></p>
			<ul>
				<li><strong class="source-inline">Total Costs Inflation Adjusted = SUM([Total </strong><span class="No-Break"><strong class="source-inline">Costs Adjusted])</strong></span></li>
				<li><strong class="source-inline">Cost per Strike Avg = AVERAGE([Total Costs </strong><span class="No-Break"><strong class="source-inline">Inflation Adjusted])</strong></span></li>
				<li><strong class="source-inline">Cost per Strike Median = MEDIAN([Total </strong><span class="No-Break"><strong class="source-inline">Costs Adjusted])</strong></span></li>
			</ul>
			<p>Finally, thinking about climate and geography, you realize that the species of animals at different times of the year will be different in the Pacific Northwest, versus the deep South, versus New England. Certain species will inhabit different parts of the country, and some species migrate to new geographies at different times of the year. For example, flamingos will never fly through Minnesota. For the first iteration of your project, you decide to filter the data down to the top 15 airports that experience <span class="No-Break">wildlife strikes:</span></p>
			<ol>
				<li>Copy and paste the matrix visual with <strong class="bold">Size</strong>, <strong class="bold">Incidents</strong>, and <strong class="bold">Indicated </strong><span class="No-Break"><strong class="bold">Damage %</strong></span><span class="No-Break">.</span></li>
				<li>Move <strong class="bold">Size</strong> from rows <span class="No-Break">to columns.</span></li>
				<li>Add <strong class="bold">Strike Reports Fact[Airport ID]</strong> to <span class="No-Break">the rows.</span></li>
				<li>Sort by <span class="No-Break"><strong class="bold">Total Incidents</strong></span><span class="No-Break">.</span></li>
				<li>Choose the top 15 airports based on total strikes. Exclude <strong class="source-inline">ZZZZ</strong> since this is not a valid <a id="_idIndexMarker241"/>airport code and was most likely used when the airport was unknown. Notice that the <a id="_idIndexMarker242"/>locations provide some geographical <span class="No-Break">diversity, too:</span></li>
			</ol>
			<table id="table001-4" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Airport ID</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Airport City</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><a id="_idTextAnchor069"/><span class="No-Break">KDEN</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Denver, CO</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KMEM</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Memphis, TN</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KDFW</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Dallas, TX</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KSMF</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Sacramento, CA</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KCLT</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Charlotte, NC</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KORD</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Chicago, IL</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KPHL</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Philadelphia, PA</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KSDF</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Louisville, KY</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KMCO</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Orlando, FL</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KLGA</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Queens, NY</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KATL</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Atlanta, GA</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KJFK</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Queens, NY</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KIAH</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Houston, TX</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KAUS</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Austin, TX</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">KBNA</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Nashville, TN</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 – Top 15 airports by incident count</p>
			<p>You’ve now identified the feature that you will be predicting, along with the features used to score the machine learning model in <span class="No-Break">Power BI:</span></p>
			<ul>
				<li>A row represents an individual <span class="No-Break">reported event</span></li>
				<li><strong class="bold">Strike Report Fact[Size]</strong> is the field you will be training the machine learning model to predict – <strong class="source-inline">Large</strong>, <strong class="source-inline">Medium</strong>, or <strong class="source-inline">Small</strong> <span class="No-Break">strike size</span></li>
				<li>You will <a id="_idIndexMarker243"/>use rows that have an <strong class="bold">Aircraft Classification</strong> <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">Airplane</strong></span></li>
				<li>You will <a id="_idIndexMarker244"/>use data with an incident date on or after January <span class="No-Break">1, 2010</span></li>
				<li>Blank values will be removed from <strong class="bold">Strike </strong><span class="No-Break"><strong class="bold">Report Fact[Size]</strong></span></li>
				<li>You will include the <strong class="bold">Strike Reports Fact[Indicated Damage]</strong> flag as <span class="No-Break">a feature</span></li>
				<li>You will filter down to the top 15 airports by wildlife <span class="No-Break">strike volume</span></li>
				<li>You will include the month of the year as <span class="No-Break">a feature</span></li>
			</ul>
			<h2 id="_idParaDest-66"><a id="_idTextAnchor070"/>Building an analytic report to discover and choose initial features for the Predict Height ML model</h2>
			<p>Your third <a id="_idIndexMarker245"/>ML model in Power BI is planned to predict the height of a wildlife strike on an aircraft. The <a id="_idIndexMarker246"/>regression model will predict a numeric value in feet above the ground. You plan to predict height at the level of an individual flight, and if those results have low accuracy, then you will roll incidents up to an <span class="No-Break">aggregate level.</span></p>
			<p>First, on your Power BI report, duplicate the <strong class="bold">Predict Damage</strong> page and rename it to <strong class="source-inline">Predict Height</strong>. <strong class="bold">Height</strong> is a single column in the table of data. You’ll want to filter out rows for which the height <span class="No-Break">is missing.</span></p>
			<p>You create new DAX expressions to analyze <strong class="bold">Height</strong>, in addition to <strong class="bold">Average Height</strong>, which was created in <a href="B19500_03.xhtml#_idTextAnchor047"><span class="No-Break"><em class="italic">Chapter 3</em></span></a><span class="No-Break">:</span></p>
			<ul>
				<li><strong class="source-inline">Median Height = </strong><span class="No-Break"><strong class="source-inline">MEDIAN([Height])</strong></span></li>
				<li><strong class="source-inline">Max Height = </strong><span class="No-Break"><strong class="source-inline">MAX([Height])</strong></span></li>
				<li><strong class="source-inline">Min Height = </strong><span class="No-Break"><strong class="source-inline">MIN([Height])</strong></span></li>
			</ul>
			<p>Now you begin analyzing <span class="No-Break">the data:</span></p>
			<ol>
				<li>On the <a id="_idIndexMarker247"/>line and stacked column chart, remove <strong class="bold">Indicated Damage %</strong> from <a id="_idIndexMarker248"/>the line <em class="italic">y</em> axis and replace it with both <strong class="bold">Strike Reports Fact[Average Height]</strong> and <strong class="bold">Strike Reports </strong><span class="No-Break"><strong class="bold">Fact[Median Height]</strong></span><span class="No-Break">.</span></li>
				<li>Clear the <strong class="bold">Date[Year]</strong> filter on the filter panel for <strong class="bold">Filters on </strong><span class="No-Break"><strong class="bold">this page</strong></span><span class="No-Break">.</span></li>
				<li>Leave the <strong class="bold">Airplane Classification</strong> filter <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">Airplane</strong></span><span class="No-Break">.</span></li>
				<li>On the filter panel, add <strong class="bold">Height</strong> and set it to <strong class="bold">is </strong><span class="No-Break"><strong class="bold">not blank</strong></span><span class="No-Break">.</span></li>
				<li>Ensure that <strong class="bold">Secondary y-axis</strong> is turned on for <span class="No-Break">the visual.</span></li>
			</ol>
			<p>Your chart should look <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer068" class="IMG---Figure">
					<img src="image/Figure_4.11_B19500.jpg" alt="Figure 4.12 – Average and median height over time"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 – Average and median height over time</p>
			<p>You decide to reapply a filter to the <strong class="bold">Year</strong> for the whole page for 2010 and later, so that the date range is in line with <span class="No-Break"><strong class="bold">Predict Size</strong></span><span class="No-Break">.</span></p>
			<p>On the <a id="_idIndexMarker249"/>matrix containing <strong class="bold">Size</strong>, <strong class="bold">Incidents</strong>, and <strong class="bold">Indicated Damage %</strong>, follow the <span class="No-Break">following </span><span class="No-Break"><a id="_idIndexMarker250"/></span><span class="No-Break">steps:</span></p>
			<ol>
				<li>Remove <strong class="bold">Indicated </strong><span class="No-Break"><strong class="bold">Damage %</strong></span><span class="No-Break">.</span></li>
				<li>Add <strong class="bold">Strike Reports Fact[Average Height]</strong>, <strong class="bold">Strike Reports Fact[Median Height]</strong>, <strong class="bold">Strike Reports Fact[Max Height]</strong>, and <strong class="bold">Strike Reports Fact[Min Height]</strong> to the values of <span class="No-Break">the matrix.</span></li>
				<li>Add <strong class="bold">Strike Reports Fact[Height]</strong> to the filter pane under <strong class="bold">Filters on all pages</strong> and set it to <strong class="bold">is </strong><span class="No-Break"><strong class="bold">not blank</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Notice that there is a slight uptrend as <strong class="bold">Size</strong> increases for the median and a more significant uptrend for <span class="No-Break">the average:</span></p>
			<div>
				<div id="_idContainer069" class="IMG---Figure">
					<img src="image/Figure_4.12_B19500.jpg" alt="Figure 4.13 – Height average, median, max, and min by size of wildlife strike"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 – Height average, median, max, and min by size of wildlife strike</p>
			<p>At this level of summarization, there does not appear to be a great deal of difference <a id="_idIndexMarker251"/>between size and height. Since there are many different <a id="_idIndexMarker252"/>species that get grouped into size categorizations, this feature might not be highly valuable. For example, a single small bird might be classified as <strong class="source-inline">Small</strong> while a big flock of the same birds might be classified as <strong class="source-inline">Large</strong>. You will keep <strong class="bold">Size</strong> on the table of data for predicting height, and then see how it fairs when you run it through Power <span class="No-Break">BI ML.</span></p>
			<ol>
				<li value="4">Copy and paste the matrix visual that you built, and replace <strong class="bold">Strike Reports Fact[Size]</strong> with <strong class="bold">Strike Reports Fact[Species]</strong>. You see a much more <span class="No-Break">dramatic change:</span></li>
			</ol>
			<div>
				<div id="_idContainer070" class="IMG---Figure">
					<img src="image/Figure_4.13_B19500.jpg" alt="Figure 4.14 – Height metrics by species"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 – Height metrics by species</p>
			<p>Average, median, and max heights differ greatly by species. Ground-dwelling species, which <a id="_idIndexMarker253"/>most likely were struck on the runway, are also on the list and <a id="_idIndexMarker254"/>consistently have heights of zero feet. For example, if you filter <strong class="bold">Species</strong> to <strong class="source-inline">Swine (pigs)</strong>, you can see there were four incidents that happened at a height of zero. Common sense tells you that this is expected, and you do not need to test the hypothesis “Pigs don’t fly.” In all seriousness, you may want to filter down the list to species that can be airborne, and also eliminate catch-all buckets such as <strong class="source-inline">Unknown bird – small</strong>. Specific species that actually fly could potentially be a strong <span class="No-Break">predictive factor.</span></p>
			<ol>
				<li value="5">Copy and paste the matrix visual again, and replace <strong class="bold">Size</strong> with <strong class="bold">Date[Month Num]</strong>. You also see a pattern <span class="No-Break">by month:</span></li>
			</ol>
			<div>
				<div id="_idContainer071" class="IMG---Figure">
					<img src="image/Figure_4.14_B19500.jpg" alt="Figure 4.15 – Height metrics by month of the year"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 – Height metrics by month of the year</p>
			<p><strong class="bold">Month Num</strong> could be a valuable feature for predicting height. Some bird species migrate to <a id="_idIndexMarker255"/>different geographies and occupy different heights, depending on the time <a id="_idIndexMarker256"/>of year. Adding in the <strong class="bold">Airport ID</strong> field as a feature and filtering to the top 15 airports listed under the <strong class="bold">Predict Size</strong> portion of this chapter (<em class="italic">Building an analytic report to discover and choose initial features for the Predict Size ML model</em>) could also enhance the value of <span class="No-Break"><strong class="bold">Month Num</strong></span><span class="No-Break">.</span></p>
			<p>At this point, you decide to move on to the next step of your project and start building out the foundations for ML training and testing data in Power Query. For the <strong class="bold">Predict Height</strong> query you have decided <span class="No-Break">the following:</span></p>
			<ul>
				<li>Height will be predicted by the <span class="No-Break">regression model</span></li>
				<li>Data will be filtered to start <span class="No-Break">in 2010</span></li>
				<li><strong class="bold">Aircraft Classification</strong> will be set <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">Airplane</strong></span></li>
				<li><strong class="bold">Size</strong> of wildlife strikes will be <span class="No-Break">a feature</span></li>
				<li><strong class="bold">Species</strong> will be <span class="No-Break">a feature</span></li>
				<li>The top 15 airports will be a filter criterion for <span class="No-Break">predicting height</span></li>
			</ul>
			<p>You’ve now <a id="_idIndexMarker257"/>discovered enough potential features to return to Power Query and begin building <a id="_idIndexMarker258"/>out some queries that will be the basis of the data used to train and test your <span class="No-Break">ML models.</span></p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor071"/>Creating flattened tables in Power Query for ML in  Power BI</h1>
			<p>Now that <a id="_idIndexMarker259"/>you’ve done some analysis and <a id="_idIndexMarker260"/>discovered features that you’d like to include for your first round of ML models, you return to Power Query and get to work. You review your notes from the previous sections of this chapter and begin with the <strong class="bold">Predict Damage</strong> table in the <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor072"/>Modifying the Predict Damage table in Power Query</h2>
			<p>Since a row <a id="_idIndexMarker261"/>will represent an individual event that is predicted, you do not need to do any groupings with the data. You will be selecting columns and filtering down the rows to a set of data that is better suited to <span class="No-Break">the task:</span></p>
			<ol>
				<li>Highlight the <strong class="bold">Predict Damage</strong> table in the <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>The aircraft class code for airplane is <strong class="source-inline">A</strong>, so filter the <strong class="bold">Aircraft Class Code</strong> column <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">A</strong></span><span class="No-Break">.</span></li>
				<li>Filter the <strong class="bold">Incident Date</strong> column to be on or <span class="No-Break">after </span><span class="No-Break"><strong class="source-inline">1/1/2014</strong></span><span class="No-Break">.</span></li>
				<li>On the Power Query ribbon, select <strong class="bold">Home</strong> | <strong class="bold">Manage Columns</strong> | <strong class="bold">Choose Columns</strong> and keep the <strong class="bold">Size</strong> and <strong class="bold">Indicated </strong><span class="No-Break"><strong class="bold">Damage</strong></span><span class="No-Break"> columns.</span></li>
				<li>On the <strong class="bold">Size</strong> column, replace the <strong class="source-inline">null</strong> value with <strong class="source-inline">empty</strong> so that you do not have <span class="No-Break">blank values.</span></li>
			</ol>
			<p>Are you confused that there are only two columns? Don’t worry! As you progress through future chapters, more features will be added to the table. This example was kept simple <a id="_idIndexMarker262"/>to reinforce the methodology of building up your tables of features slowly as you progress through the discovery process. Your table should look <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer072" class="IMG---Figure">
					<img src="image/Figure_4.15_B19500.jpg" alt="Figure 4.16 – Foundation for the Predict Damages query to train and test an ML model"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.16 – Foundation for the Predict Damages query to train and test an ML model</p>
			<p>Next, we’ll do the same with the <strong class="bold">Predict </strong><span class="No-Break"><strong class="bold">Size</strong></span><span class="No-Break"> table.</span></p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor073"/>Modifying the Predict Size table in Power Query</h2>
			<p>Repeat the same <a id="_idIndexMarker263"/>process for the <strong class="bold">Predict Size</strong> query in the Power Query <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group:</span></p>
			<ol>
				<li>Highlight the <strong class="bold">Predict Size</strong> table in the <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>The aircraft class code for airplane is <strong class="source-inline">A</strong>, so filter the <strong class="bold">Aircraft Class Code</strong> column <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">A</strong></span><span class="No-Break">.</span></li>
				<li>Filter the <strong class="bold">Incident Date</strong> column to be on or <span class="No-Break">after </span><span class="No-Break"><strong class="source-inline">1/1/2010</strong></span><span class="No-Break">.</span></li>
				<li>Filter down to the top 15 airports you noted during the analysis. For the <strong class="bold">Airport ID</strong> column, select the values <strong class="source-inline">KDEN</strong>, <strong class="source-inline">KMEM</strong>, <strong class="source-inline">KDFW</strong>, <strong class="source-inline">KSMF</strong>, <strong class="source-inline">KCLT</strong>, <strong class="source-inline">KORD</strong>, <strong class="source-inline">KPHL</strong>, <strong class="source-inline">KSDF</strong>, <strong class="source-inline">KMCO</strong>, <strong class="source-inline">KLGA</strong>, <strong class="source-inline">KATL</strong>, <strong class="source-inline">KJFK</strong>, <strong class="source-inline">KIAH</strong>, <strong class="source-inline">KAUS</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">KBNA</strong></span><span class="No-Break">.</span></li>
				<li>On the Power Query ribbon, select <strong class="bold">Home</strong> | <strong class="bold">Manage Columns</strong> | <strong class="bold">Choose Columns</strong> and keep the <strong class="bold">Size</strong>, <strong class="bold">Indicated Damage</strong>, <strong class="bold">Airport ID</strong>, and <strong class="bold">Incident </strong><span class="No-Break"><strong class="bold">Date</strong></span><span class="No-Break"> columns.</span></li>
				<li>Uncheck <strong class="bold">(null)</strong> values <span class="No-Break">for </span><span class="No-Break"><strong class="bold">Size</strong></span><span class="No-Break">.</span></li>
				<li>Add a custom column named <strong class="bold">Month Number</strong> using the following <span class="No-Break">M code:</span><pre class="source-code">
= Date.Month([Incident Date])</pre></li>
				<li>Remove <span class="No-Break"><strong class="bold">Incident Date</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Your <strong class="bold">Predict Size</strong> query should now look <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer073" class="IMG---Figure">
					<img src="image/Figure_4.16_B19500.jpg" alt="Figure 4.17 – Foundation for the Predict Size query to train and test a machine learning model"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.17 – Foundation for the Predict Size query to train and test a machine learning model</p>
			<p>Finally, we’ll <a id="_idIndexMarker264"/>do this for the <strong class="bold">Predict </strong><span class="No-Break"><strong class="bold">Height</strong></span><span class="No-Break"> table.</span></p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor074"/>Modifying the Predict Height table in Power Query</h2>
			<p>The <strong class="bold">Predict Height</strong> table <a id="_idIndexMarker265"/>in Power Query will also follow the same process of whittling down the breadth of columns and volume <span class="No-Break">of rows:</span></p>
			<ol>
				<li>Highlight the <strong class="bold">Predict Height</strong> table in the <strong class="bold">ML </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group.</span></li>
				<li>The aircraft class code for airplane is <strong class="source-inline">A</strong>, so filter the <strong class="bold">Aircraft Class Code</strong> column <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">A</strong></span><span class="No-Break">.</span></li>
				<li>Filter the <strong class="bold">Incident Date</strong> column to be on or <span class="No-Break">after </span><span class="No-Break"><strong class="source-inline">1/1/2010</strong></span><span class="No-Break">.</span></li>
				<li>On the Power Query ribbon, select <strong class="bold">Home</strong> | <strong class="bold">Manage Columns</strong> | <strong class="bold">Choose Columns</strong> and keep the <strong class="bold">Size</strong>, <strong class="bold">Species</strong>, <strong class="bold">Airport ID</strong>, <strong class="bold">Incident Date</strong>, and <span class="No-Break"><strong class="bold">Height</strong></span><span class="No-Break"> columns.</span></li>
				<li>Replace null values with <strong class="source-inline">empty</strong> for the <span class="No-Break"><strong class="bold">Size</strong></span><span class="No-Break"> column.</span></li>
				<li>Filter down <a id="_idIndexMarker266"/>to the top 15 airports you noted during the analysis. For the <strong class="bold">Airport ID</strong> column, select the values <strong class="source-inline">KDEN</strong>, <strong class="source-inline">KMEM</strong>, <strong class="source-inline">KDFW</strong>, <strong class="source-inline">KSMF</strong>, <strong class="source-inline">KCLT</strong>, <strong class="source-inline">KORD</strong>, <strong class="source-inline">KPHL</strong>, <strong class="source-inline">KSDF</strong>, <strong class="source-inline">KMCO</strong>, <strong class="source-inline">KLGA</strong>, <strong class="source-inline">KATL</strong>, <strong class="source-inline">KJFK</strong>, <strong class="source-inline">KIAH</strong>, <strong class="source-inline">KAUS</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">KBNA</strong></span><span class="No-Break">.</span></li>
				<li>Filter <strong class="bold">Height</strong> to remove the <span class="No-Break">null values.</span></li>
				<li>Add a custom column named <strong class="bold">Month Number</strong> using the following <span class="No-Break">M code:</span><pre class="source-code">
= Date.Month([Incident Date])</pre></li>
				<li>Remove <span class="No-Break"><strong class="bold">Incident Date</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>Your <strong class="bold">Predict Height</strong> table should now look <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer074" class="IMG---Figure">
					<img src="image/Figure_4.17_B19500.jpg" alt="Figure 4.18 – Foundation for the Predict Height query to train and test a machine learning model"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.18 – Foundation for the Predict Height query to train and test a machine learning model</p>
			<p>Your ML queries <a id="_idIndexMarker267"/>have now been modified to include new potential features discovered in <span class="No-Break">this chapter.</span></p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor075"/>Summary</h1>
			<p>This chapter began building the foundation of your ML adventure in Power BI. You created a group of queries in Power Query that will be the basis for training and testing your binary, general classification, and regression ML models. You began building out an analytical report while discovering features in the data that might be valuable for predictive analytics in ML. Finally, you added those features to new queries in Power Query. You’re ready to add new features to your queries that will attempt to predict whether damage occurred, the size of the wildlife involved in a strike, and the height of <span class="No-Break">wildlife strikes.</span></p>
			<p>In the next chapter, you will dive deeper into the Power BI dataset to discover new predictive features. You’ll leverage some of the Power BI AI capabilities to uncover new insights and potentially new features for use with ML. Finally, you will add your new findings to the queries that will be used to train and test your ML models in <span class="No-Break">Power BI.</span></p>
		</div>
	

		<div id="_idContainer076" class="Content">
			<h1 id="_idParaDest-72"><a id="_idTextAnchor076"/>Part 2: Artificial Intelligence and Machine Learning Visuals and Publishing to the Power BI Service</h1>
			<p>In the next few chapters, you will be enriching the training dataset with new features discovered through data visuals <span class="No-Break">and exploration.</span></p>
			<p>This part includes the <span class="No-Break">following chapters:</span></p>
			<ul>
				<li><a href="B19500_05.xhtml#_idTextAnchor077"><em class="italic">Chapter 5</em></a>, <em class="italic">Discovering Features Using Analytics and AI Visuals</em></li>
				<li><a href="B19500_06.xhtml#_idTextAnchor089"><em class="italic">Chapter 6</em></a>, <em class="italic">Discovering New Features Using R and Python Visuals</em></li>
				<li><a href="B19500_07.xhtml#_idTextAnchor102"><em class="italic">Chapter 7</em></a>, <em class="italic">Deploying Data Ingestion and Transformation Components to the Power BI Cloud Service</em></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer077" class="Basic-Graphics-Frame">
			</div>
		</div>
		<div>
			<div id="_idContainer078">
			</div>
		</div>
	</body></html>