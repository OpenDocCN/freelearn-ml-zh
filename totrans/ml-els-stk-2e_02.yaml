- en: '*Chapter 1*: Machine Learning for IT'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第一章*：IT领域的机器学习'
- en: A decade ago, the idea of using **machine learning** (**ML**)-based technology
    in IT operations or IT security seemed a little like science fiction. Today, however,
    it is one of the most common buzzwords used by software vendors. Clearly, there
    has been a major shift in both the perception of the need for the technology and
    the capabilities that the state-of-the-art implementations of the technology can
    bring to bear. This evolution is important to fully appreciate how Elastic ML
    came to be and what problems it was designed to solve.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 十年前，使用基于**机器学习**（**ML**）的技术在IT运营或IT安全中似乎有点像科幻小说。然而，如今，它已成为软件供应商最常用的热门词汇之一。显然，对技术需求的认知和技术最先进实现所能带来的能力都发生了重大转变。这种演变对于充分理解Elastic
    ML的出现及其旨在解决的问题至关重要。
- en: 'This chapter is dedicated to reviewing the history and concepts behind how
    Elastic ML works. It also discusses the different kinds of analysis that can be
    done and the kinds of use cases that can be solved. Specifically, we will cover
    the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章致力于回顾Elastic ML背后的历史和概念。它还讨论了可以进行的不同类型的分析和可以解决的问题的类型。具体来说，我们将涵盖以下主题：
- en: Overcoming the historical challenges in IT
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 克服IT历史上的挑战
- en: Dealing with the plethora of data
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应对数据繁多的问题
- en: The advent of automated anomaly detection
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化异常检测的出现
- en: Unsupervised versus supervised ML
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无监督机器学习与监督机器学习
- en: Using unsupervised ML for anomaly detection
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用无监督机器学习进行异常检测
- en: Applying supervised ML to data frame analytics
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将监督机器学习应用于数据框分析
- en: Overcoming the historical challenges in IT
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 克服IT历史上的挑战
- en: IT application support specialists and application architects have a demanding
    job with high expectations. Not only are they tasked with moving new and innovative
    projects into place for the business, but they also have to keep currently deployed
    applications up and running as smoothly as possible. Today's applications are
    significantly more complicated than ever before—they are highly componentized,
    distributed, and possibly virtualized/containerized. They could be developed using
    Agile, or by an outsourced team. Plus, they are most likely constantly changing.
    Some DevOps teams claim they can typically make more than 100 changes per day
    to a live production system. Trying to understand a modern application's health
    and behavior is like a mechanic trying to inspect an automobile while it is moving.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: IT应用支持专家和应用架构师的工作要求很高，期望值也很高。他们不仅要负责将新的创新项目引入业务，还要尽可能平稳地保持当前部署的应用程序运行。今天的应用程序比以往任何时候都要复杂得多——它们高度组件化、分布式，并且可能是虚拟化/容器化的。它们可能使用敏捷方法或外包团队开发。此外，它们很可能不断变化。一些DevOps团队声称他们通常每天可以对实时生产系统进行100多次更改。试图理解现代应用程序的健康和行为就像机械师在汽车行驶时检查汽车一样。
- en: IT security operations analysts have similar struggles in keeping up with day-to-day
    operations, but they obviously have a different focus of keeping the enterprise
    secure and mitigating emerging threats. Hackers, malware, and rogue insiders have
    become so ubiquitous and sophisticated that the prevailing wisdom is that it is
    no longer a question of whether an organization will be compromised—it's more
    of a question of when they will find out about it. Clearly, knowing about a compromise
    as early as possible (before too much damage is done) is preferable to learning
    about it for the first time from law enforcement or the evening news.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: IT安全运营分析师在跟上日常运营方面面临类似的挑战，但他们显然有不同的重点，那就是确保企业安全并减轻新兴威胁。黑客、恶意软件和恶意内部人员已经变得如此普遍和复杂，以至于普遍的观点是，不再是一个组织是否会受到攻击的问题——而是他们何时会发现这个问题。显然，尽早（在造成太多损害之前）了解攻击情况，比从执法机构或晚间新闻首次得知攻击情况要好。
- en: So, how can they be helped? Is the crux of the problem that application experts
    and security analysts lack access to data to help them do their job effectively?
    Actually, in most cases, it is the exact opposite. Many IT organizations are drowning
    in data.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，他们如何得到帮助？问题的关键是应用专家和安全分析师缺乏数据来帮助他们有效地完成工作吗？实际上，在大多数情况下，情况正好相反。许多IT组织正陷入数据海洋。
- en: Dealing with the plethora of data
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应对数据繁多的问题
- en: IT departments have invested in monitoring tools for decades, and it is not
    uncommon to have a dozen or more tools actively collecting and archiving data
    that can be measured in terabytes, or even petabytes, per day. The data can range
    from rudimentary infrastructure- and network-level data to deep diagnostic data
    and/or system and application log files.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: IT部门在监控工具上的投资已有几十年，拥有十几个或更多工具积极收集和存档每天可测量为太字节甚至拍字节的数据并不罕见。这些数据可以从基本的基础设施和网络级数据到深入的诊断数据以及/或系统和应用程序日志文件。
- en: 'Business-level **key performance indicators** (**KPIs**) could also be tracked,
    sometimes including data about the end user''s experience. The sheer depth and
    breadth of data available, in some ways, is the most comprehensive than it has
    ever been. To detect emerging problems or threats hidden in that data, there have
    traditionally been several main approaches to distilling the data into informational
    insights:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以跟踪业务层面的**关键绩效指标**（**KPIs**），有时包括关于最终用户体验的数据。在某些方面，可用的数据深度和广度比以往任何时候都要全面。为了检测隐藏在数据中的新兴问题或威胁，传统上有几种主要方法可以将数据提炼成信息洞察：
- en: '**Filter/search**: Some tools allow the user to define searches to help trim
    down the data into a more manageable set. While extremely useful, this capability
    is most often used in an ad hoc fashion once a problem is suspected. Even then,
    the success of using this approach usually hinges on the ability for the user
    to know what they are looking for and their level of experience—both with prior
    knowledge of living through similar past situations and expertise in the search
    technology itself.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**筛选/搜索**：一些工具允许用户定义搜索条件，以帮助将数据缩减到更易于管理的集合。虽然这一功能非常有用，但通常只在怀疑有问题时以临时方式使用。即便如此，使用这种方法的成功通常取决于用户知道他们在寻找什么以及他们的经验水平——这包括对先前知识的了解、通过类似过去情况的经历以及在对搜索技术本身的专长。'
- en: '**Visualizations**: Dashboards, charts, and widgets are also extremely useful
    to help us understand what data has been doing and where it is trending. However,
    visualizations are passive and require being watched for meaningful deviations
    to be detected. Once the number of metrics being collected and plotted surpasses
    the number of eyeballs available to watch them (or even the screen real estate
    to display them), visual-only analysis becomes less and less useful.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可视化**：仪表板、图表和小部件也非常有用，可以帮助我们了解数据的行为和趋势。然而，可视化是被动的方式，需要有人监视以检测到有意义的偏差。一旦收集和绘制的指标数量超过了可供监视的眼睛数量（甚至屏幕显示它们的空间），仅视觉分析变得越来越没有用。'
- en: '**Thresholds/rules**: To get around the requirement of having data be physically
    watched in order for it to be proactive, many tools allow the user to define rules
    or conditions that get triggered upon known conditions or known dependencies between
    items. However, it is unlikely that you can realistically define all appropriate
    operating ranges or model all of the actual dependencies in today''s complex and
    distributed applications. Plus, the amount and velocity of changes in the application
    or environment could quickly render any static rule set useless. Analysts find
    themselves chasing down many false positive alerts, setting up a *boy who cried
    wolf* paradigm that leads to resentment of the tools generating the alerts and
    skepticism of the value that alerting could provide.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**阈值/规则**：为了绕过需要有人实时监视数据才能使其具有主动性这一要求，许多工具允许用户定义在已知条件或已知项目之间的已知依赖关系触发规则或条件。然而，在当今复杂和分布式的应用程序中，您可能无法现实地定义所有适当的操作范围或模拟所有实际依赖关系。此外，应用程序或环境中的变化数量和速度可能会迅速使任何静态规则集变得无用。分析师发现自己正在追逐许多误报警报，建立了一个“狼来了”的范式，导致对生成警报的工具的怨恨和对警报可能提供的价值的怀疑。'
- en: Ultimately, there needed to be a different approach—one that wasn't necessarily
    a complete repudiation of past techniques, but could bring a level of automation
    and empirical augmentation of the evaluation of data in a meaningful way. Let's
    face it, humans are imperfect—we have hidden biases and limitations of capacity
    for remembering information and we are easily distracted and fatigued. Algorithms,
    if used correctly, can easily make up for these shortcomings.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，需要一种不同的方法——这种方法并不一定完全否定过去的技术，但可以以有意义的方式带来自动化和经验数据的评估。让我们面对现实，人类是不完美的——我们有着隐藏的偏见和记忆信息的能力限制，我们很容易分心和疲劳。如果正确使用，算法可以轻松弥补这些不足。
- en: The advent of automated anomaly detection
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化异常检测的出现
- en: ML, while a very broad topic that encompasses everything from self-driving cars
    to game-winning computer programs, was a natural place to look for a solution.
    If you realize that most of the requirements of effective application monitoring
    or security threat hunting are merely variations on the theme of *find me something
    that is different from normal*, then the discipline of anomaly detection emerges
    as the natural place to begin using ML techniques to solve these problems for
    IT professionals.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习（ML），虽然是一个非常广泛的话题，涵盖了从自动驾驶汽车到赢得比赛的计算机程序的一切，但它是寻找解决方案的自然选择。如果你意识到，有效的应用监控或安全威胁搜索的大多数要求仅仅是“找出与正常情况不同的事物”这一主题的变体，那么异常检测学科就自然成为开始使用机器学习技术解决这些问题的起点，这对于IT专业人员来说。
- en: 'The science of anomaly detection is certainly nothing new, however. Many very
    smart people have researched and employed a variety of algorithms and techniques
    for many years. However, the practical application of anomaly detection for IT
    data poses some interesting constraints that make the otherwise academically worthy
    algorithms inappropriate for the job. These include the following:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 异常检测的科学当然不是什么新鲜事物。许多非常聪明的人已经研究并使用了多年各种算法和技术。然而，对于IT数据的异常检测的实际应用提出了一些有趣的限制条件，使得其他在学术上值得称道的算法不适合这项工作。以下是一些包括：
- en: '**Timeliness**: Notification of an outage, breach, or other significant anomalous
    situation should be known as quickly as possible to mitigate it. The cost of downtime
    or the risk of a continued security compromise is minimized if remedied or contained
    quickly. Algorithms that cannot keep up with the real-time nature of today''s
    IT data have limited value.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**及时性**：对于停电、违规或其他重大异常情况的通知应尽可能快地得知，以便减轻其影响。如果能够迅速修复或控制，停机时间或持续安全妥协的风险就会最小化。无法跟上当今IT数据实时性的算法价值有限。'
- en: '**Scalability**: As mentioned earlier, the volume, velocity, and variation
    of IT data continue to explode in modern IT environments. Algorithms that inspect
    this vast data must be able to scale linearly with the data to be usable in a
    practical sense.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可扩展性**：如前所述，IT环境中的IT数据量、速度和变化继续爆炸式增长。检查这些大量数据的算法必须能够与数据成线性比例扩展，以便在实际意义上可用。'
- en: '**Efficiency**: IT budgets are often highly scrutinized for wasteful spending,
    and many organizations are constantly being asked to do more with less. Tacking
    on an additional fleet of super-computers to run algorithms is not practical.
    Rather, modest commodity hardware with typical specifications must be able to
    be employed as part of the solution.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**效率**：IT预算经常受到高度审查，以防止浪费支出，许多组织不断被要求以更少的资源做更多的事情。添加一整个超级计算机集群来运行算法并不实际。相反，必须能够使用具有典型规格的普通硬件作为解决方案的一部分。'
- en: '**Generalizability**: While highly specialized data science is often the best
    way to solve a specific information problem, the diversity of data in IT environments
    drives a need for something that can be broadly applicable across most use cases.
    Reusability of the same techniques is much more cost-effective in the long run.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通用性**：虽然高度专业化的数据科学通常是解决特定信息问题的最佳方式，但IT环境中的数据多样性推动了对一种可以广泛适用于大多数用例的东西的需求。在长期来看，相同技术的可重用性要更加经济高效。'
- en: '**Adaptability**: Ever-changing IT environments will quickly render a brittle
    algorithm useless in no time. Training and retraining the ML model would only
    introduce yet another time-wasting venture that cannot be afforded.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**适应性**：不断变化的IT环境将很快使脆弱的算法变得无用。训练和重新训练机器学习模型只会引入另一个浪费时间且无法承担的冒险。'
- en: '**Accuracy**: We already know that alert fatigue from legacy threshold and
    rule-based systems is a real problem. Swapping one false alarm generator for another
    will not impress anyone.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**准确性**：我们已经知道，来自传统阈值和基于规则的系统的警报疲劳是一个真正的问题。用一个假警报生成器替换另一个不会给任何人留下印象。'
- en: '**Ease of use**: Even if all of the previously mentioned constraints could
    be satisfied, any solution that requires an army of data scientists to implement
    it would be too costly and would be disqualified immediately.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**易用性**：即使所有之前提到的限制条件都可以满足，任何需要大量数据科学家来实施其解决方案的解决方案都会过于昂贵，并且会立即被淘汰。'
- en: So, now we are getting to the real meat of the challenge—creating a fast, scalable,
    accurate, low-cost anomaly detection solution that everyone will use and love
    because it works flawlessly. No problem!
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们现在正进入挑战的核心——创建一个快速、可扩展、准确、低成本的反常检测解决方案，每个人都将使用并喜爱它，因为它工作得完美无瑕。没问题！
- en: As daunting as that sounds, Prelert founder and CTO Steve Dodson took on that
    challenge back in 2010\. While Dodson certainly brought his academic chops to
    the table, the technology that would eventually become Elastic ML had its genesis
    in the throes of trying to solve real IT application problems—the first being
    a pesky intermittent outage in a trading platform at a major London finance company.
    Dodson, and a handful of engineers who joined the venture, helped the bank's team
    use the anomaly detection technology to automatically surface only the needles
    in the haystacks that allowed the analysts to focus on the small set of relevant
    metrics and log messages that were going awry. The identification of the root
    cause (a failing service whose recovery caused a cascade of subsequent network
    problems that wreaked havoc) ultimately brought stability to the application and
    prevented the need for the bank to spend lots of money on the previous solution,
    which was an unplanned, costly network upgrade.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然听起来很令人畏惧，但Prelert的创始人兼首席技术官Steve Dodson在2010年就接受了这个挑战。虽然Dodson确实带来了他的学术才能，但最终成为Elastic
    ML的技术起源于解决真实IT应用问题的努力——首先是解决一家主要伦敦金融公司交易平台上的一个讨厌的间歇性故障。Dodson和几位加入这个项目的工程师帮助银行的团队使用异常检测技术自动识别出麦田里的针，使分析师能够专注于那些出现问题的少量相关指标和日志消息。识别根本原因（一个故障服务，其恢复导致一系列后续网络问题，造成了混乱）最终使应用程序稳定，并防止银行在之前解决方案上花费大量金钱，那个解决方案是一个未计划的、昂贵的网络升级。
- en: As time passed, however, it became clear that even that initial success was
    only the beginning. A few years and a few thousand real-world use cases later,
    the marriage of Prelert and Elastic was a natural one—a combination of a platform
    making big data easily accessible and technology that helped overcome the limitations
    of human analysis.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，然而，变得明显的是，即使是那个初始的成功也只是个开始。几年和几千个实际应用案例之后，Prelert与Elastic的结合是自然而然的——这是一个使大数据易于访问的平台与帮助克服人类分析局限性的技术的结合。
- en: Fast forward to 2021, a full 5 years after the joining of forces, and Elastic
    ML has come a long way in the maturation and expansion of capabilities of the
    ML platform. This second edition of the book encapsulates the updates made to
    Elastic ML over the years, including the introduction of integrations into several
    of the Elastic solutions around observability and security. This second edition
    also includes the introduction of "data frame analytics," which is discussed extensively
    in the third part of the book. In order to get a grounded, innate understanding
    of how Elastic ML works, we first need to get to grips with some terminology and
    concepts to understand things further.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 快进到2021年，自联合以来已经过去了整整5年，Elastic ML在成熟和扩展ML平台功能方面已经取得了长足的进步。本书的第二版总结了多年来对Elastic
    ML所做的更新，包括将集成引入Elastic在可观察性和安全方面的几个解决方案。第二版还包括了“数据帧分析”的引入，这在书的第三部分有详细的讨论。为了对Elastic
    ML的工作有一个扎实、内在的理解，我们首先需要掌握一些术语和概念，以便进一步了解事物。
- en: Unsupervised versus supervised ML
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 无监督学习与监督学习的比较
- en: While there are many subtypes of ML, two very prominent ones (and the two that
    are relevant to Elastic ML) are unsupervised and supervised.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管机器学习有许多子类型，但其中两个非常突出（并且与Elastic ML相关）的是无监督学习和监督学习。
- en: In unsupervised ML, there is no outside guidance or direction from humans. In
    other words, the algorithms must learn (and model) the patterns of the data purely
    on their own. In general, the biggest challenge here is to have the algorithms
    accurately surface detected deviations of the input data's normal patterns to
    provide meaningful insight for the user. If the algorithm is not able to do this,
    then it is not useful and is unsuitable for use. Therefore, the algorithms must
    be quite robust and able to account for all of the intricacies of the way that
    the input data is likely to behave.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在无监督机器学习中，没有来自人类的外部指导或方向。换句话说，算法必须完全依靠自身学习（并建模）数据的模式。一般来说，这里最大的挑战是让算法能够准确地揭示输入数据正常模式的检测偏差，为用户提供有意义的见解。如果算法无法做到这一点，那么它就无用了，也不适合使用。因此，算法必须非常稳健，能够考虑到输入数据可能表现出的所有复杂性。
- en: In supervised ML, input data (often multivariate data) is used to help model
    the desired outcome. The key difference from unsupervised ML is that the human
    decides, *a priori*, what variables to use as the input and also provides "ground-truth"
    examples of the expected target variable. Algorithms then assess how the input
    variables interact and influence the known output target. To accurately get the
    desired output (prediction, for example), the algorithm must have "the right kind
    of data" not only that indeed expresses the situation, but also so that there
    is enough diversity of the input data in order to effectively learn the relationship
    between the input data and the output target.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在监督机器学习中，输入数据（通常是多元数据）用于帮助建模期望的结果。与无监督机器学习的关键区别在于，人类事先决定使用哪些变量作为输入，并提供预期目标变量的“真实”示例。然后，算法评估输入变量如何相互作用并影响已知的输出目标。为了准确地获得期望的输出（例如预测），算法不仅必须“正确类型的数据”确实表达了情况，而且输入数据必须足够多样化，以便有效地学习输入数据与输出目标之间的关系。
- en: As such, both cases require good input data, good algorithmic approaches, and
    a good mechanism to allow the ML to both learn the behavior of the data and apply
    that learning to assess subsequent observations of that data. Let's dig a little
    deeper into the specifics of how Elastic ML leverages unsupervised and supervised
    learning.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，这两种情况都需要良好的输入数据、良好的算法方法和良好的机制，以允许机器学习既学习数据的模式，又将这种学习应用于评估该数据的后续观察。让我们更深入地探讨Elastic
    ML如何利用无监督和监督学习的具体细节。
- en: Using unsupervised ML for anomaly detection
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用无监督机器学习进行异常检测
- en: 'To get a more intuitive understanding of how Elastic ML''s anomaly detection
    works using unsupervised ML, we will discuss the following:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更直观地理解Elastic ML如何使用无监督机器学习进行异常检测，我们将讨论以下内容：
- en: A rigorous definition of unusual with respect to the technology
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于技术的异常的严格定义
- en: An intuitive example of learning in an unsupervised manner
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无监督学习中的学习直观示例
- en: A description of how the technology models, de-trends, and scores the data
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 技术模型、去趋势和评分数据的描述
- en: Defining unusual
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义异常
- en: 'Anomaly detection is something almost all of us have a basic intuition about.
    Humans are quite good at pattern recognition, so it should be of no surprise that
    if I asked 100 people on the street what''s unusual in the following graph, a
    vast majority (including non-technical people) would identify the spike in the
    green line:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 异常检测是我们大多数人都有基本直觉的东西。人类在模式识别方面非常擅长，所以如果我问100个街头的人以下图表中有什么不寻常之处，绝大多数人（包括非技术人员）都会识别出绿色线上的峰值：
- en: '![Figure 1.1 – A line graph showing an anomaly'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.1 – 一张显示异常的折线图'
- en: '](img/B17040_01_001.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_001.jpg](img/B17040_01_001.jpg)'
- en: Figure 1.1 – A line graph showing an anomaly
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 – 一张显示异常的折线图
- en: 'Similarly, let''s say we ask what''s unusual in the following photo:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，假设我们询问以下照片中有什么不寻常之处：
- en: '![Figure 1.2 – A photograph showing a seal among penguins'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.2 – 一张展示海豹在企鹅中的照片'
- en: '](img/B17040_01_002.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_002.jpg](img/B17040_01_002.jpg)'
- en: Figure 1.2 – A photograph showing a seal among penguins
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2 – 一张展示海豹在企鹅中的照片
- en: We will, again, likely get a majority that rightly claims that the seal is the
    unusual thing. But people may struggle to articulate in salient terms the actual
    heuristics that are used in coming to those conclusions.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能会再次得到大多数正确指出海豹是不寻常事物的结论。但人们可能难以用显著的语言描述得出这些结论所使用的实际启发式方法。
- en: 'There are two different heuristics that we could use to define the different
    kinds of anomalies shown in these images:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用两种不同的启发式方法来定义这些图像中显示的不同类型的异常：
- en: Something is unusual if its behavior has significantly deviated from an established
    pattern or range based upon its past history.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果某个实体的行为与其过去历史中建立的模式或范围有显著偏差，那么这种情况是不寻常的。
- en: Something is unusual if some characteristic of that entity is significantly
    different from the same characteristic of the other members of a set or population.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果某个实体的某个特征与集合或群体中其他成员的相同特征有显著差异，那么这种情况是不寻常的。
- en: These key definitions will be relevant to Elastic ML's anomaly detection, as
    they form the two main fundamental modes of operation of the anomaly detection
    algorithms (temporal versus population analysis, as will be explored in [*Chapter
    3*](B17040_03_Epub_AM.xhtml#_idTextAnchor049), *Anomaly Detection*). As we will
    see, the user will have control over what mode of operation is employed for a
    particular use case.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这些关键定义将对Elastic ML的异常检测相关，因为它们形成了异常检测算法的两个主要基本操作模式（时间分析 versus 群体分析，将在[*第3章*](B17040_03_Epub_AM.xhtml#_idTextAnchor049)，*异常检测*中探讨）。正如我们将看到的，用户将能够控制针对特定用例采用的操作模式。
- en: Learning what's normal
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 学习什么是正常
- en: As we've stated, Elastic ML's anomaly detection uses unsupervised learning in
    that the learning occurs without anything being taught. There is no human assistance
    to shape the decisions of the learning; it simply does so on its own, via inspection
    of the data it is presented with. This is slightly analogous to the learning of
    a language via the process of immersion, as opposed to sitting down with books
    of vocabulary and rules of grammar.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所言，Elastic ML的异常检测使用无监督学习，这意味着学习过程没有进行任何教学。没有人类协助来塑造学习的决策；它只是通过检查呈现给它的数据自行进行。这与通过沉浸式学习语言的过程略为相似，而不是通过词汇书和语法规则书来学习。
- en: To go from a completely naive state where nothing is known about a situation
    to one where predictions could be made with good certainty, a model of the situation
    needs to be constructed. How this model is created is extremely important, as
    the efficacy of all subsequent actions taken based upon this model will be highly
    dependent on the model's accuracy. The model will need to be flexible and continuously
    updated based upon new information, because that is all that it has to go on in
    this unsupervised paradigm.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 要从一个完全无知的状态过渡到一个可以以相当大的确定性做出预测的状态，需要构建一个关于该情况的情况模型。这个模型是如何创建的极其重要，因为基于此模型采取的所有后续行动的有效性将高度依赖于模型的准确性。该模型需要根据新信息灵活调整并持续更新，因为这就是在这个无监督范式下它所依赖的一切。
- en: Probability models
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概率模型
- en: 'Probability distributions can serve this purpose quite well. There are many
    fundamental types of distributions (and Elastic ML uses a variety of distribution
    types, such as Poisson, Gaussian, log-normal, or even mixtures of models), but
    the Poisson distribution is a good one to discuss first, because it is appropriate
    in situations where there are discrete occurrences (the "counts") of things with
    respect to time:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 概率分布可以很好地发挥这种作用。有许多基本的分布类型（Elastic ML使用多种分布类型，例如泊松分布、高斯分布、对数正态分布，甚至是模型混合），但泊松分布是一个很好的起点，因为它适用于存在离散事件（“计数”）与时间相关的场景：
- en: '![Figure 1.3 – A graph demonstrating Poisson distributions (source: https://en.wikipedia.org/wiki/Poisson_distribution#/media/File:Poisson_pmf.svg)'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.3 – 展示泊松分布的图表（来源：https://en.wikipedia.org/wiki/Poisson_distribution#/media/File:Poisson_pmf.svg）]'
- en: '](img/B17040_01_003.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_003.jpg]'
- en: 'Figure 1.3 – A graph demonstrating Poisson distributions (source: https://en.wikipedia.org/wiki/Poisson_distribution#/media/File:Poisson_pmf.svg)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3 – 展示泊松分布的图表（来源：https://en.wikipedia.org/wiki/Poisson_distribution#/media/File:Poisson_pmf.svg）
- en: 'There are three different variants of the distribution shown here, each with
    a different mean (λ) and the highest expected value of *k*. We can make an analogy
    that says that these distributions model the expected amount of postal mail that
    a person gets delivered to their home on a daily basis, represented by *k* on
    the *x* axis:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这里显示了分布的三个不同变体，每个变体都有不同的平均值（λ）和最高的预期值*k*。我们可以做一个类比，说这些分布模拟了一个人每天在家收到的预期邮件量，用*x*轴上的*k*表示：
- en: For λ = 1, there is about a 37% chance that zero pieces or one piece of mail
    are delivered daily. Perhaps this is appropriate for a college student that doesn't
    receive much postal mail.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于λ = 1，每天收到零件或一件邮件的概率大约为37%。这可能适合一个收到的邮政邮件不多的大学学生。
- en: For λ = 4, there is about a 20% chance that three or four pieces are received.
    This might be a good model for a young professional.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于λ = 4，收到三件或四件物品的概率大约为20%。这可能是一个年轻专业人士的良好模型。
- en: For λ = 10, there is about a 13% chance that 10 pieces are received per day—perhaps
    representing a larger family or a household that has somehow found themselves
    on many mailing lists!
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于λ = 10，每天收到10件物品的概率大约为13%——这可能代表一个大家庭或者某个方式下发现自己处于许多邮件列表中的家庭！
- en: The discrete points on each curve also give the likelihood (probability) of
    other values of *k*. As such, the model can be informative and answer questions
    such as "Is getting 15 pieces of mail likely?" As we can see, it is not likely
    for a student (λ = 1) or a young professional (λ = 4), but it is somewhat likely
    for a large family (λ = 10). Obviously, there was a simple declaration made here
    that the models shown were appropriate for the certain people described—but it
    should seem obvious that there needs to be a mechanism to learn that model for
    each individual situation, not just assert it. The process for learning it is
    intuitive.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 每条曲线上的离散点也给出了*k*的其他值的可能性（概率）。因此，该模型可以提供信息并回答诸如“收到15件邮件的可能性大吗？”等问题。正如我们所见，对于学生（λ
    = 1）或年轻专业人士（λ = 4）来说，这不太可能，但对于大家庭（λ = 10）来说，可能性就稍微大一些。显然，这里简单声明了所展示的模型适用于所描述的某些人——但应该很明显，需要有一种机制来学习每个个体情况下的模型，而不仅仅是断言它。学习这个过程是直观的。
- en: Learning the models
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 学习模型
- en: Sticking with the postal mail analogy, it would be instinctive to realize that
    a method of determining what model is the best fit for a particular household
    could be ascertained simply by hanging out by the mailbox every day and recording
    what the postal carrier drops into the mailbox. It should also seem obvious that
    the more observations made, the higher your confidence should be that your model
    is accurate. In other words, only spending 3 days by the mailbox would provide
    less complete information and confidence than spending 30 days, or 300 for that
    matter.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 坚持使用邮政邮件的类比，本能地意识到确定特定家庭最适合的模型的方法可能只是每天在邮箱旁等待并记录邮递员放入邮箱的物品。也应该很明显，观察到的越多，你对模型准确性的信心应该越高。换句话说，只在邮箱旁待3天提供的信息和信心不如待30天，更不用说300天了。
- en: Algorithmically, a similar process could be designed to self-select the appropriate
    model based upon observations. Careful scrutiny of the algorithm's choices of
    the model type itself (that is, Poisson, Gaussian, log-normal, and so on) and
    the specific coefficients of that model type (as in the preceding example of λ)
    would also need to be part of this self-selection process. To do this, constant
    evaluation of the appropriateness of the model is done. Bayesian techniques are
    also employed to assess the model's likely parameter values, given the dataset
    as a whole, but allowing for tempering of those decisions based upon how much
    information has been seen prior to a particular point in time. The ML algorithms
    accomplish this automatically.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 算法上，可以设计一个类似的过程，根据观察来自动选择合适的模型。仔细审查算法对模型类型本身的选择（即泊松、高斯、对数正态等）以及该模型类型的特定系数（如前例中的λ）也必须作为自我选择过程的一部分。为此，需要不断评估模型的适用性。贝叶斯技术也被用来评估整个数据集给出的模型的可能参数值，但允许根据在特定时间点之前看到的信息量来调整这些决策。机器学习算法自动完成这项工作。
- en: Note
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: For those that want a deeper dive into some of the representative mathematics
    going on behind the scenes, please refer to the academic paper at [http://www.ijmlc.org/papers/398-LC018.pdf](http://www.ijmlc.org/papers/398-LC018.pdf).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些想要深入了解幕后一些代表性数学的人，请参阅学术论文[http://www.ijmlc.org/papers/398-LC018.pdf](http://www.ijmlc.org/papers/398-LC018.pdf)。
- en: 'Most importantly, the modeling that is done is continuous, so that new information
    is considered along with the old, with an exponential weighting given to information
    that is fresher. Such a model, after 60 observations, could resemble the following:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的是，所进行的建模是连续的，因此新信息会与旧信息一起考虑，对较新的信息给予指数加权。这样的模型在60次观察后可能如下所示：
- en: '![Figure 1.4 – Sample model after 60 observations'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 1.4 – 60次观察后的样本模型'
- en: '](img/B17040_01_004.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_004.jpg](img/B17040_01_004.jpg)'
- en: Figure 1.4 – Sample model after 60 observations
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4 – 60次观察后的样本模型
- en: 'It will then seem very different after 400 observations, as the data presents
    itself with a slew of new observations with values between `5` and `10`:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在400次观察之后，数据将呈现出非常不同的样子，因为数据呈现出一连串新的观察值，其值在`5`和`10`之间：
- en: '![Figure 1.5 – Sample model after 400 observations'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 1.5 – 400次观察后的样本模型'
- en: '](img/B17040_01_005.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_005.jpg](img/B17040_01_005.jpg)'
- en: Figure 1.5 – Sample model after 400 observations
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5 – 400次观察后的样本模型
- en: Also, notice that there is the potential for the model to have multiple modes
    or areas/clusters of higher probability. The complexity and trueness of the fit
    of the learned model (shown as the blue curve) with the theoretically ideal model
    (in black) matters greatly. The more accurate the model, the better representation
    of the state of normal for that dataset and thus, ultimately, the more accurate
    the prediction of how future values comport with this model.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，请注意，模型可能具有多个模式或高概率区域/簇。所学习模型（以蓝色曲线表示）与理论理想模型（黑色）的复杂性和拟合度非常重要。模型越准确，该数据集的正常状态表示就越准确，从而最终更准确地预测未来值如何与该模型相符。
- en: The continuous nature of the modeling also drives the requirement that this
    model is capable of serialization to long-term storage, so that if model creation/analysis
    is paused, it can be reinstated and resumed at a later time. As we will see, the
    operationalization of this process of model creation, storage, and utilization
    is a complex orchestration, which is fortunately handled automatically by Elastic
    ML.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 模型的连续性也推动了这一要求，即该模型能够序列化到长期存储中，以便如果模型创建/分析被暂停，可以在稍后时间重新启动并继续。正如我们将看到的，模型创建、存储和利用的运营是一个复杂的协调过程，幸运的是，这个过程由弹性机器学习自动处理。
- en: De-trending
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 去趋势
- en: 'Another important aspect of faithfully modeling real-world data is to account
    for prominent overtone trends and patterns that naturally occur. Does the data
    ebb and flow hourly and/or daily with more activity during business hours or business
    days? If so, this needs to be accounted for. Elastic ML automatically hunts for
    prominent trends in the data (linear growth, cyclical harmonics, and so on) and
    factors them out. Let''s observe the following graph:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在忠实模拟现实世界数据方面，另一个重要方面是考虑自然出现的显著泛音趋势和模式。数据是否每小时和/或每天波动，在办公时间和工作日有更多活动？如果是这样，这需要被考虑进去。弹性机器学习自动在数据中寻找显著的趋势（线性增长、周期性谐波等）并将它们排除。让我们观察以下图表：
- en: '![Figure 1.6 – Periodicity detection in action'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 1.6 – 实际中的周期性检测'
- en: '](img/B17040_01_006.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_006.jpg](img/B17040_01_006.jpg)'
- en: Figure 1.6 – Periodicity detection in action
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 – 实际中的周期性检测
- en: Here, the periodic daily cycle is learned, then factored out. The model's prediction
    boundaries (represented in the light-blue envelope around the dark-blue signal)
    dramatically adjust after automatically detecting three successive iterations
    of that cycle.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，周期性的每日周期被学习，然后被排除。模型预测边界（以浅蓝色信封围绕深蓝色信号表示）在自动检测到该周期的三个连续迭代后显著调整。
- en: 'Therefore, as more data is observed over time, the models gain accuracy both
    from the perspective of the probability distribution function getting more mature,
    as well as via the auto-recognizing and de-trending of other routine patterns
    (such as business days, weekends, and so on) that might not emerge for days or
    weeks. In the following example, several trends are discovered over time, including
    daily, weekly, and an overall linear slope:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，随着时间的推移观察到更多的数据，模型在概率分布函数变得更加成熟以及通过自动识别和去趋势其他常规模式（如工作日、周末等）方面都获得了准确性，这些模式可能不会在几天或几周内出现。在以下示例中，随着时间的推移发现了几个趋势，包括每日、每周以及整体线性斜率：
- en: '![Figure 1.7 – Multiple trends being detected'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 1.7 – 检测到多个趋势'
- en: '](img/B17040_01_007.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17040_01_007.jpg](img/B17040_01_007.jpg)'
- en: Figure 1.7 – Multiple trends being detected
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7 – 检测到多个趋势
- en: These model changes are recorded as system annotations. Annotations, as a general
    concept, will be covered in later chapters.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这些模型变化被记录为系统注释。注释作为一个一般概念，将在后面的章节中介绍。
- en: Scoring of unusualness
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 不寻常性评分
- en: 'Once a model has been constructed, the likelihood of any future observed value
    can be found within the probability distribution. Earlier, we had asked the question
    "Is getting 15 pieces of mail likely?" This question can now be empirically answered,
    depending on the model, with a number between 0 (no possibility) and 1 (absolute
    certainty). Elastic ML will use the model to calculate this fractional value out
    to approximately 300 significant figures (which can be helpful when dealing with
    very low probabilities). Let''s observe the following graph:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦构建了模型，就可以在概率分布中找到任何未来观察值的可能性。之前，我们提出了问题“收到15封邮件的可能性大吗？”现在，根据模型，这个问题可以通过一个介于0（不可能）和1（绝对确定）之间的数字来经验性地回答。Elastic
    ML将使用模型来计算这个分数值，精确到大约300位有效数字（这在处理非常低的概率时可能很有帮助）。让我们观察以下图表：
- en: '![Figure 1.8 – Anomaly scoring'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.8 – 异常评分'
- en: '](img/B17040_01_008.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '![图1.8 – 异常评分](img/B17040_01_008.jpg)'
- en: Figure 1.8 – Anomaly scoring
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8 – 异常评分
- en: Here, the probability of the observation of the actual value of 921 is now calculated
    to be 1.444e-9 (or, more commonly, a mere 0.0000001444% chance). This very small
    value is perhaps not that intuitive to most people. As such, ML will take this
    probability calculation, and via the process of quantile normalization, re-cast
    that observation on a severity scale between 0 and 100, where 100 is the highest
    level of unusualness possible for that particular dataset. In the preceding case,
    the probability calculation of 1.444e-9 is normalized to a score of 94\. This
    normalized score will come in handy later as a means by which to assess the severity
    of the anomaly for the purposes of alerting and/or triage.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，实际值为921的观察概率现在计算为1.444e-9（或者更常见的是，仅有0.0000001444%的机会）。这个非常小的值可能对大多数人来说并不直观。因此，ML将进行这个概率计算，并通过分位数归一化的过程，将这个观察结果重新评估在0到100的严重性量表上，其中100是该特定数据集可能出现的最高异常水平。在前一个例子中，1.444e-9的概率计算归一化到94分。这个归一化分数将后来作为评估异常严重性的手段，用于警报和/或分类。
- en: The element of time
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间元素
- en: In Elastic ML, all of the anomaly detection that we will discuss throughout
    the rest of the book will have an intrinsic element of time associated with the
    data and analysis. In other words, for anomaly detection, Elastic ML expects the
    data to be time series data and that data will be analyzed in increments of time.
    This is a key point and also helps discriminate between anomaly detection and
    data frame analytics in addition to the unsupervised/supervised paradigm.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在Elastic ML中，本书后面将要讨论的所有异常检测都将与数据和分析相关的内在时间元素。换句话说，对于异常检测，Elastic ML期望数据是时间序列数据，并且数据将按时间增量进行分析。这是一个关键点，也有助于区分异常检测和数据框分析，以及无监督/监督范式。
- en: You will see that there's a slight nuance with respect to population analysis
    (covered in [*Chapter 3*](B17040_03_Epub_AM.xhtml#_idTextAnchor049), *Anomaly
    Detection*) and outlier detection (covered in [*Chapter 10*](B17040_10_Epub_AM.xhtml#_idTextAnchor177),
    *Outlier Detection* While they effectively both find entities that are distinctly
    different from their peers, population analysis in anomaly detection does so with
    respect to time, whereas outlier detection analysis isn't constrained by time.
    More will become obvious as these topics are covered in depth in later chapters.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到，在人口分析（在第[*第3章*](B17040_03_Epub_AM.xhtml#_idTextAnchor049)，*异常检测*中介绍）和异常值检测（在第[*第10章*](B17040_10_Epub_AM.xhtml#_idTextAnchor177)，*异常值检测*中介绍）方面存在细微差别。虽然它们都有效地找到了与同伴明显不同的实体，但在异常检测中的人口分析是关于时间的，而异常值检测分析不受时间的限制。随着这些主题在后面的章节中深入讨论，更多的内容将变得明显。
- en: Applying supervised ML to data frame analytics
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将监督机器学习应用于数据框分析
- en: 'With the exception of outlier detection (covered in [*Chapter 10*](B17040_10_Epub_AM.xhtml#_idTextAnchor177),
    *Outlier Detection* which actually is an unsupervised approach, the rest of data
    frame analytics uses a supervised approach. Specifically, there are two main types
    of problems that Elastic ML data frame analytics allows you to address:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 除了异常值检测（在第[*第10章*](B17040_10_Epub_AM.xhtml#_idTextAnchor177)，*异常值检测*中介绍，实际上是一种无监督方法）之外，其余的数据框分析都使用监督方法。具体来说，Elastic
    ML数据框分析允许你解决两种主要类型的问题：
- en: '**Regression**: Used to predict a continuous numerical value (a price, a duration,
    a temperature, and so on)'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回归**：用于预测连续数值（如价格、持续时间、温度等）'
- en: '**Classification**: Used to predict whether something is of a certain class
    label (fraudulent transaction versus non-fraudulent, and more)'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分类**：用于预测某物是否属于某个类别标签（欺诈交易与非欺诈交易等）'
- en: In both cases, models are built using training data to map input variables (which
    can be numerical or categorical) to output predictions by training decision trees.
    The particular implementation used by Elastic ML is a custom variant of XGBoost,
    an open source gradient-boosted decision tree framework that has recently gained
    some notoriety among data scientists for its ability to allow them to win Kaggle
    competitions.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，模型都是通过使用训练数据来映射输入变量（可以是数值或分类的）通过训练决策树来预测输出。Elastic ML使用的特定实现是XGBoost的一个自定义变体，这是一个开源的梯度提升决策树框架，最近在数据科学家中因其允许他们赢得Kaggle比赛的能力而声名鹊起。
- en: The process of supervised learning
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监督式学习的过程
- en: 'The overall process of supervised ML is very different from the unsupervised
    approach. In the supervised approach, you distinctly separate the training stage
    from the predicting stage. A very simplified version of the process looks like
    the following:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 监督式机器学习的整体过程与无监督方法非常不同。在监督方法中，你明确地将训练阶段与预测阶段分开。这个过程的一个非常简化的版本如下：
- en: '![Figure 1.9 – Supervised ML process'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.9 – 监督式机器学习过程'
- en: '](img/B17040_01_009.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17040_01_009.jpg)'
- en: Figure 1.9 – Supervised ML process
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9 – 监督式机器学习过程
- en: Here, we can see that in the training phase, features are extracted out of the
    raw training data to create a feature matrix (also called a data frame) to feed
    to the ML algorithm and create the model. The model can be validated against portions
    of the data to see how well it did, and subsequent refinement steps could be made
    to adjust which features are extracted, or to refine the parameters of the ML
    algorithm used to improve the accuracy of the model's predictions.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到在训练阶段，从原始训练数据中提取特征以创建特征矩阵（也称为数据框）来提供给机器学习算法并创建模型。模型可以通过数据的一部分来验证其效果，并且可以采取后续的细化步骤来调整提取哪些特征，或者细化机器学习算法的参数，以提高模型预测的准确性。
- en: Once the user decides that the model is efficacious, that model is "moved" to
    the prediction workflow, where it is used on new data. One at a time, a single
    new feature vector is *inferenced* against the model to form a prediction.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户决定模型有效，该模型就会被“移动”到预测工作流程中，在那里它被用于新数据。一次一个，单个新的特征向量被*推断*与模型相匹配以形成预测。
- en: To get an intuitive sense of how this works, imagine a scenario in which you
    want to sell your house, but don't know what price to list it for. You research
    prior sales in your area and notice the price differentials for homes based on
    different factors (number of bedrooms, number of bathrooms, square footage, proximity
    to schools/shopping, age of home, and so on). Those factors are the "features"
    that are considered altogether (not individually) for every prior sale.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 为了直观地理解这个过程，想象一个场景：你想出售你的房子，但不知道应该标什么价格。你研究了你所在地区的先前销售情况，并注意到基于不同因素（卧室数量、浴室数量、面积、学校/购物场所的邻近性、房屋年龄等）的房价差异。这些因素是“特征”，在考虑每个先前销售时都是整体考虑的（而不是单独考虑）。
- en: This corpus of historical sales is your training data. It is helpful because
    you know for certain how much each property sold for (and that's the thing you'd
    ultimately like to predict for your house). If you study this enough, you might
    get an intuition about how the prices of houses are driven strongly by some features
    (for instance, the number of bedrooms) and that other features (perhaps the age
    of the home) may not affect the pricing much. This is a concept called "feature
    importance" that will be visited again in a later chapter.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这个历史销售语料库是你的训练数据。它很有帮助，因为你确切地知道每处房产的售价（这正是你最终希望对你自己的房子进行预测的事情）。如果你足够研究，你可能会对房价如何强烈地受到某些特征（例如，卧室数量）的影响有所了解，而其他特征（可能是房屋的年龄）可能对定价影响不大。这是一个称为“特征重要性”的概念，将在后面的章节中再次讨论。
- en: Armed with enough training data, you might have a good idea what the value of
    your home should be priced at, given that it is a three-bedroom, two-bath, 1,700-square-foot,
    30-year-old home. In other words, you've constructed a model in your mind based
    on your research of comparable homes that have sold in the last year or so. If
    the past sales are the "training data," your home's specifications (bedrooms,
    bathrooms, and so on) are the feature vectors that will define the expected price,
    given your "model" that you've learned.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 凭借足够的训练数据，你可能会对一套三居室、两卫、1700平方英尺、30岁的房子的价值有一个很好的估计。换句话说，你已经根据过去一年左右售出的类似房屋的研究，在你的脑海中构建了一个模型。如果过去的销售是“训练数据”，那么你的房屋规格（卧室、浴室等）将是定义预期价格的特征向量，基于你学到的“模型”。
- en: Your simple mental model is obviously not as rigorous as one that could be constructed
    with regression analysis using ML using dozens of relevant input features, but
    this simple analogy hopefully cements the idea of the process that is followed
    in learning from prior, known situations, and then applying that knowledge to
    a present, novel situation.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 你的简单心理模型显然不如使用机器学习进行回归分析时构建的模型那么严谨，该分析使用了数十个相关输入特征，但这个简单的类比希望巩固了从先前已知情况中学习，然后将该知识应用于当前新情况的过程。
- en: Summary
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: To summarize what we discussed in this chapter, we covered the genesis story
    of ML in IT—born out of the necessity to automate analysis of the massive, ever-expanding
    growth of collected data within enterprise environments. We also got a more intuitive
    understanding of the different types of ML in Elastic ML, which includes both
    unsupervised anomaly detection and supervised data frame analysis.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 总结本章所讨论的内容，我们涵盖了IT中机器学习的起源故事——它源于在企业环境中对收集的大量、不断增长的数据进行自动分析的需求。我们还对Elastic ML中的不同类型机器学习有了更直观的了解，这包括无监督的异常检测和监督数据框分析。
- en: As we journey through the rest of the chapters, we will often be mapping the
    use cases of the problems we're trying to solve to the different modes of operation
    of Elastic ML.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们浏览剩余的章节时，我们经常会将我们试图解决的问题的用例映射到Elastic ML的不同操作模式。
- en: Remember that if the data is a time series, meaning that it comes into existence
    routinely over time (metric/performance data, log files, transactions, and so
    on), it is quite possible that Elastic ML's anomaly detection is all you'll ever
    need. As you'll see, it is incredibly flexible and easy to use and accomplishes
    many use cases on a broad variety of data. It's kind of a Swiss Army knife! A
    large amount of this book (Chapters 3 through 8) will be devoted to how to leverage
    anomaly detection (and the ancillary capability of forecasting) to get the most
    out of your time series data that is in the Elastic Stack.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，如果数据是时间序列，意味着它在时间上定期出现（指标/性能数据、日志文件、交易等），那么Elastic ML的异常检测可能就是你所需要的全部。正如你将看到的，它非常灵活且易于使用，能够在广泛的数据类型上完成许多用例。它就像瑞士军刀！本书的大部分内容（第3章至第8章）将致力于如何利用异常检测（以及相关的预测能力）来最大限度地发挥Elastic
    Stack中时间序列数据的价值。
- en: If you are more interested in finding unusual entities within a population/cohort
    (User/Entity Behavior), you might have a tricky decision between using population
    analysis in anomaly detection versus outlier detection in data frame analytics.
    The primary factor may be whether or not you need to do this in near real time—in
    which case you might likely choose population analysis. If near real time is not
    necessary and/or if you require the consideration of multiple features simultaneously,
    you would choose outlier detection. See [*Chapter 10*](B17040_10_Epub_AM.xhtml#_idTextAnchor177),
    for more detailed information about the comparison and benefits of each approach.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你更感兴趣于在人群/队列（用户/实体行为）中寻找异常实体，你可能会在异常检测中的群体分析和使用数据框分析中的异常检测之间做出艰难的选择。主要因素可能在于你是否需要在近实时进行这项操作——在这种情况下，你可能会选择群体分析。如果近实时不是必需的，或者你需要同时考虑多个特征，那么你会选择异常检测。参见[*第10章*](B17040_10_Epub_AM.xhtml#_idTextAnchor177)，以获取关于每种方法比较和优点的更详细信息。
- en: That leaves many other use cases that require a multivariate approach to modeling.
    This would not only align with the previous example of real estate pricing but
    also encompass the use cases of language detection, customer churn analysis, malware
    detection, and so on. These will fall squarely in the realm of the supervised
    ML of data frame analytics and be covered in Chapters 11 through 13\.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这留下了许多其他需要多变量建模方法的应用场景。这不仅与之前提到的房地产定价示例相一致，还包括语言检测、客户流失分析、恶意软件检测等用例。这些将完全属于数据框分析的有监督机器学习的范畴，并在第11章至第13章中进行介绍。
- en: In the next chapter, we will get down and dirty with understanding how to enable
    Elastic ML and how it works in an operational sense. Buckle up and enjoy the ride!
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将深入探讨如何启用 Elastic ML 以及它在实际操作中的工作原理。系好安全带，享受这次旅程吧！
