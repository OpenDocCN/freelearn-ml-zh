<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Setting Up an Anaconda Environment</h1>
                </header>
            
            <article>
                
<p class="mce-root">Welcome to <em>Computer Vision Projects with OpenCV and Python 3</em>. This book is one you might want to check out if you're new to OpenCV, and to computer vision in general. </p>
<p class="mce-root"><span>In this chapter, we will be installing all the required tools that we're going to use in the book. We will be dealing with Python 3, OpenCV, and TensorFlow. </span></p>
<p class="mce-root">You might be wondering: why should I be using Python 3, and not Python 2? The answer to your question is on Python's own website:</p>
<div class="mce-root packt_quote">"Python 2 is legacy, Python 3 is the present future of the language."</div>
<p class="mce-root">We are looking to the future here, and if we want to future-proof our code, it's better to use Python 3. If you're using Python 2, some of the code examples here might not run, so we'll install Python 3 and use that for all the projects in the book.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Introducing and installing Python and Anaconda</li>
<li>Installing the additional libraries</li>
<li>Exploring Jupyter Notebook</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Introducing and installing Python and Anaconda</h1>
                </header>
            
            <article>
                
<p>The first thing we need is Python 3. The best way to install this is by downloading Continuum Analytics and the Anaconda distribution.</p>
<p>Anaconda is a fully-featured Python distribution that comes with a lot of packages, including numerical analytics, data science, and computer vision. It's going to make our lives a whole lot easier, because it provides us with libraries that are not present in the base Python distribution.</p>
<p>The best part about Anaconda is that it gives us the <kbd>conda</kbd> package manager, along with <kbd>pip</kbd>, which makes it very easy to install external packages for our Python distribution.</p>
<p>Let's get started.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing Anaconda</h1>
                </header>
            
            <article>
                
<p>We will begin by setting up our Anaconda and Python distribution, using the following steps:</p>
<ol>
<li>Go to the Anaconda website, using the following link <a href="https://www.anaconda.com/download/">www.anaconda.com/download</a>. You should see a landing page that looks similar to the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-483 image-border" src="Images/37e77f75-2fc4-49e4-9ee1-91daaa5dd445.png" style="width:47.42em;height:11.25em;" width="1377" height="329"/></p>
<ol start="2">
<li>Next, select your OS and download the latest version of the Anaconda distribution, which includes Python 3.7. Click the <span class="packt_screen">Download</span> button, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-484 image-border" src="Images/9d792ef5-1ed6-45eb-9326-490aa90d9d02.png" style="width:43.00em;height:16.67em;" width="721" height="281"/></p>
<div class="packt_infobox">The installer for Windows is graphical; however, you might need to use a command-line installer for macOS or Linux.</div>
<p style="padding-left: 60px">Installing the setup file is pretty straightforward, so we won't go through each step here. </p>
<ol start="3">
<li><span>When you have everything properly installed and your path variables defined, go to the Command Prompt and make sure everything is good to go by typing the</span> <kbd>where python</kbd> command. This shows us all the directories in which Python is installed. You should see something similar to the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-485 image-border" src="Images/19a5c556-2731-4d8b-a77c-fc0099616d79.png" style="width:39.58em;height:3.25em;" width="556" height="46"/></p>
<p style="padding-left: 60px">As seen in the preceding screenshot, we see that the first instance of Python is in our Anaconda distribution. This means that we can proceed with our Python programs.</p>
<div class="packt_infobox">In macOS or Linux, the command would be <kbd>which python</kbd> instead of <kbd>where python</kbd>.</div>
<ol start="4">
<li>Now, let's make sure we have our other tools. Our first tool will be IPython, which is <span>essentially a command shell for interactive computing in multiple programming languages. We will check it using the </span><kbd>where ipython</kbd> command, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-486 image-border" src="Images/77be8db4-88dd-49c0-aaf6-dce30274319e.png" style="width:45.00em;height:3.42em;" width="631" height="48"/></p>
<ol start="5">
<li>The next package we will check is the <kbd>pip</kbd> tool, which <span>is the Python installer package. We do this with the <kbd>where pip</kbd> command, as shown in the following screenshot:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-487 image-border" src="Images/1a46c810-55db-4b0e-868b-f470c48ac57f.png" style="width:45.17em;height:4.08em;" width="596" height="54"/></p>
<ol start="6">
<li>The next tool to check is the <kbd>conda</kbd> package, <span>which is Anaconda's built-in package manager.</span> This is done using the <kbd>where conda</kbd> command, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-488 image-border" src="Images/7fae52b9-a14a-47a0-9cee-85dc045622ad.png" style="width:28.83em;height:4.00em;" width="371" height="52"/></p>
<p class="mce-root"><span>We should be good to go with Python now.</span></p>
<div class="packt_tip">If you run <kbd>which python</kbd> on macOS or Linux, and it says something such as <kbd>user/bin/Python</kbd>, that means Python is either not installed or it's not the first thing in our path, so we should modify that as per our system.</div>
<p>In the next section, we're going to cover installing additional libraries such as OpenCV, TensorFlow, dlib, and Tesseract, which will be used for the projects in this book.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing additional libraries</h1>
                </header>
            
            <article>
                
<p>All the packages that we will be installing in this section are vital for our upcoming projects. So, let's get started.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing OpenCV</h1>
                </header>
            
            <article>
                
<p>To get OpenCV, go to the following link: <a href="https://anaconda.org/conda-forge/opencv">anaconda.org/conda-forge/opencv</a>. Technically, we don't need to access the website to install this package. The site just shows the various versions of OpenCV and all the different systems we can install it on.</p>
<p><span>Copy and paste the installation command from the site into Command Prompt and then run it, as shown in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-489 image-border" src="Images/0439ec88-b7e8-43e9-9e37-a1a341bf0d3f.png" style="width:41.75em;height:25.83em;" width="627" height="388"/></p>
<p><span>The preceding command is a simple, <span>platform-independent</span> way to get OpenCV. There are other methods for getting it; however, using this command ensures that we are installing the latest version</span><span>.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing dlib</h1>
                </header>
            
            <article>
                
<p><span>We need to install</span> dlib<span> from the Anaconda distribution, similar to OpenCV. Just as with OpenCV, installing dlib is a straightforward process.</span></p>
<p><span>Run the following command:</span></p>
<pre><strong>conda install -c menpo dlib</strong></pre>
<p><span>You will get the following output:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-490 image-border" src="Images/b6d0f804-9c85-4645-9270-90fbd0fdf2f7.png" style="width:37.50em;height:23.33em;" width="518" height="322"/></p>
<p><span>This will take around 10 to 20 seconds to run. If everything goes well, we should be good to go with</span> dlib<span>.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing Tesseract</h1>
                </header>
            
            <article>
                
<p><span>Tesseract is Google's optical character recognition library, and is not natively a Python package. </span><span>Because of this, there's a Python binding for it that calls the executable, which can then be installed manually. </span></p>
<p><span>Go to the GitHub repository for Tesseract, which is found at the following link: <a href="https://github.com/tesseract-ocr/tesseract">https://github.com/tesseract-ocr/tesseract</a>.</span></p>
<p class="mce-root"/>
<p><span>Scroll down to the</span> <em>Installing Tesseract</em> <span>section in the GitHub readme. Here, we are presented with two options:</span></p>
<ul>
<li>Installing it via a pre-built binary package</li>
<li>Building it from source</li>
</ul>
<p><span>We want to install it via the pre-built binary package, so click on that link. We can also build it from source if we want to, but that doesn't really offer any advantages. The Tesseract Wiki explains the steps to install it on various different operating systems.</span></p>
<p><span>As we're using Windows, and we want to install a pre-built one, click on the</span> Tesseract at UB Mannheim <span>link, where you will find all the latest setup files. Download the latest setup from the site. </span></p>
<p><span>Once downloaded, run the installer or execute the command. However, this is not going to put Tesseract in your path. We need to make sure it is in your path; otherwise, when you call Tesseract from within Python, you're going to get an error message. </span></p>
<p><span>So, we need to figure out where Tesseract is and modify our path variable. To do this, type the <kbd>where tesseract</kbd> command in Command Prompt, as shown in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-491 image-border" src="Images/bb972736-865d-4eb0-b45e-4b1857b8e179.png" style="width:19.58em;height:2.67em;" width="388" height="53"/></p>
<p>Once you have the binary packages, use the <kbd>pip</kbd> command to apply the Python binding to the packages. Use the following commands:</p>
<pre><strong><span>$ pip install tesseract</span></strong><br/><strong><span>$ pip install pytesseract</span></strong></pre>
<p>We should be good to go with Tesseract now.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing TensorFlow</h1>
                </header>
            
            <article>
                
<p><span>Last but not least, we will install TensorFlow, which is a software library for data flow programming across a range of tasks. It is usually used for machine learning applications such as neural networks.</span></p>
<p><span>To install it, go to TensorFlow's website at the following link: <a href="https://www.tensorflow.org/install/">tensorflow.org/install/</a>. The website contains instructions for all the major operating systems.</span></p>
<p><span>As we're using Windows, the installation process is very simple. We just have to run the <kbd>pip install tensorflow</kbd> command in Command Prompt, as seen in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-492 image-border" src="Images/502bc85a-c5e2-4df6-ba74-c12da592da19.png" style="width:79.58em;height:33.92em;" width="955" height="407"/></p>
<p>As seen in the preceding screenshot, TensorFlow is already installed on the system, so it says t<span>hat the requirements are satisfied. We should be good to go with TensorFlow now.</span></p>
<p>Install <kbd>tensorflow-hub</kbd> using the following command:</p>
<pre><strong>pip install tensorflow-hub</strong></pre>
<p>Next, install <kbd>tflearn</kbd> using the following command:</p>
<pre><strong>pip install tflearn</strong></pre>
<p>Finally, Keras is a high-level interface, which can be installed using the following command:</p>
<pre><strong>pip install keras</strong></pre>
<p><span>We have installed OpenCV, TensorFlow,</span> dlib<span>, and Tesseract, so we should be good to go with the tools for our book. Our next step will be exploring Jupyter Notebook, which should be fun!</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Exploring Jupyter Notebook</h1>
                </header>
            
            <article>
                
<p>Now that we have our libraries installed, we're ready to get started with Jupyter Notebook. Jupyter Notebook is a really nice way of creating interactive code and widgets. It lets us create interactive presentations with live code and experiment, as we're doing here. </p>
<p>If everything is set up correctly using Anaconda, we should already have Jupyter installed.<span> Let's go ahead and take a look at </span><span>Jupyter Notebook now.</span></p>
<p><span>Open Command Prompt in the directory where your code files are, and then run</span> the <kbd>jupyter notebook</kbd> command. This will open up a web browser in the directory where the command was executed. This should result in an interface that looks similar to the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-493 image-border" src="Images/e1ea5303-cf0c-46e2-ac9b-82be97f372c8.png" style="width:44.08em;height:18.08em;" width="916" height="376"/></p>
<p>Next, open the <kbd>.ipynb</kbd> file so you can explore the basic functionalities of Jupyter Notebook. Once opened, we should see a page similar to the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-494 image-border" src="Images/7cc692ae-dc2c-4bf9-a517-acd7a7e61291.png" style="width:90.25em;height:73.83em;" width="1083" height="886"/></p>
<p>As shown, there are blocks (called <em>cells</em>) where we can put in Python commands and Python code. We can also enter other commands, also known as <em>magic commands</em>, which are not part of Python per se, but allow us to do nice things within Jupyter or IPython (an interactive shell for Python). <span>The <kbd>%</kbd> at the beginning means that the command is a </span><span>magic command. </span></p>
<p>The biggest advantage here is that we can execute individual lines of code, instead of having to type out the entire code block in one go.</p>
<div class="packt_infobox">If you're new to Jupyter Notebook, go to the following link: <a href="https://www.cheatography.com/weidadeyue/cheat-sheets/jupyter-notebook/">https://www.cheatography.com/weidadeyue/cheat-sheets/jupyter-notebook/</a>. Here, they list Jupyter Notebook keyboard shortcuts, which can be really useful for quick code testing.</div>
<p>Let's go through some of the commands seen in the preceding screenshot, and see what they do, as follows:</p>
<ol>
<li>The <kbd>%pylab notebook</kbd> command, as seen in the first cell, imports a lot of very useful and common libraries, particularly NumPy and PyPlot, without us needing to explicitly call the import commands. It also sets up a Notebook easily.</li>
<li>Also in the first cell, we assign the directory that we will be working from, as follows:</li>
</ol>
<pre style="padding-left: 60px">%cd C:\Users\&lt;user_name&gt;\Documents\&lt;Folder_name&gt;\Section1-Getting_started</pre>
<p style="padding-left: 60px">This results in the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-495 image-border" src="Images/eafeb6bd-eeae-405c-83ef-941a31bbdce0.png" style="width:28.75em;height:4.33em;" width="574" height="87"/></p>
<p style="padding-left: 60px">So far, so good!</p>
<ol start="3">
<li>The following cell shows how to import our libraries. We're going to import OpenCV, TensorFlow, dlib, and Tesseract, just to make sure that everything is working and that there aren't any nasty surprises. This is done using the following code block:</li>
</ol>
<pre style="padding-left: 60px">import cv2<br/>import tensorflow as tf<br/>import dlib<br/>import pytesseract as ptess</pre>
<p style="padding-left: 60px">If you get an error message here, redo the installation of the libraries, following the instructions carefully. Sometimes things do go wrong, depending on our system.</p>
<ol start="4">
<li>The third cell in the screenshot contains the command for importing the graph module in TensorFlow. This can come in handy for getting help on a function from within the Notebook, as follows:</li>
</ol>
<pre style="padding-left: 60px">tf.Graph?</pre>
<p style="padding-left: 60px">We will discuss this function<span> in <a href="ffda7469-1745-4a0a-8375-43426248af4d.xhtml" target="_blank">Chapter 7</a>, <em>Deep Learning Image Classification with TensorFlow</em></span>. </p>
<ol start="5">
<li><span>Another neat thing about Jupyter Notebooks is that we can run shell commands right in the cell. </span>As seen in the fourth cell in the screenshot (repeated here), the <kbd>ls</kbd> command shows us all the files in the directory we are working from:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-496 image-border" src="Images/f64d7093-c15d-49f3-b3a6-023ccd69b4ab.png" style="width:29.33em;height:6.83em;" width="645" height="150"/></p>
<ol start="6">
<li><span>In this book, we'll be working with a lot of images, so we'll want to see the images right in the Notebook. </span>Use the <kbd>imread()</kbd> function to read the image file from your directory. After that, your next step is to create a <kbd>figure()</kbd> widget to display the image. Finally, use the <kbd>imshow()</kbd> function to actually display the image.</li>
</ol>
<p class="mce-root"/>
<p style="padding-left: 60px">This entire process is summarized in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-497 image-border" src="Images/f4406eac-4105-40c7-b757-3c72011cc3e7.png" style="width:34.17em;height:24.58em;" width="770" height="553"/></p>
<p style="padding-left: 60px">This is awesome, because we have widgets that are flexible.</p>
<ol start="7">
<li>By grabbing the bottom-right corner, we can shrink this to a reasonable size to see our color image with pixel axes displayed. We also have the pan option available. By clicking on it, we can pan our image and box zoom it. Hitting the home button resets the original view.</li>
</ol>
<p style="padding-left: 60px">We will want take a look at our images, and processed images and so forth<span>—as seen previously, t</span>his is a very handy and simple way to do it. <span>We can also use PyLab inline, which is useful for certain things, as we'll see. </span></p>
<ol start="8">
<li>As we know, part of computer vision is working with videos. To play videos within the notebook, we need to import some libraries and use IPython's HTML capability, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-499 image-border" src="Images/bcbddf0c-ed6a-47a9-9d89-787ff46bf800.png" style="width:39.00em;height:12.50em;" width="940" height="303"/></p>
<p style="padding-left: 60px">Essentially, we're using our web browser's capability to play back videos. So, it's not really Python that's doing it, but our web browser, which enables interactivity between Jupyter Notebook and our browser.</p>
<p style="padding-left: 60px">Here, we defined the <kbd>playvideo()</kbd> function, which takes the video filename as an input and returns an HTML object with our video.</p>
<ol start="9">
<li>Execute the following command on Jupyter to play the <em>Megamind</em> video. It's just a clip of the movie <em>Megamind</em>, which (for some reason) comes with OpenCV if we download all the source code:</li>
</ol>
<pre style="padding-left: 60px"><strong>playvideo(' ./Megamind.mp4')</strong></pre>
<ol start="10">
<li>You will see a black box, and if you scroll down, you'll find a play button. Hit this and<span> the movie will play, as seen in the following screenshot:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-500 image-border" src="Images/a132f34e-5b85-4160-af2f-559ee77d11fb.png" style="width:36.08em;height:20.17em;" width="842" height="470"/></p>
<p style="padding-left: 60px">This can be used to play our own videos. All you have to do is point the command to the video that you want to play.</p>
<p>Once you have all this running, you should be in good shape to run the projects that we're going to take a look at in the coming chapters.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we learned about the Anaconda distribution and different ways to install Python. We learned how to set up Python using the Anaconda distribution.</p>
<p>Next, we looked at how to install various libraries in Anaconda, to make it easier for us to run various programs. Finally, we learned the basics of Jupyter Notebook and how it works.</p>
<p>In the next chapter, <a href="d5bf725b-9e79-4865-96e9-338481599464.xhtml" target="_blank">Chapter 2</a>, <em>Image Captioning with TensorFlow</em>,<em> </em>we will look at how to carry out image captioning using TensorFlow.</p>


            </article>

            
        </section>
    </div>



  </body></html>