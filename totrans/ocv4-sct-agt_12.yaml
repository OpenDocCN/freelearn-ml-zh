- en: Making WxUtils.py Compatible with Raspberry Pi
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使 WxUtils.py 与 Raspberry Pi 兼容
- en: In [Chapter 2](4ec4e82a-b63d-4fc1-bf3b-47c653c25a79.xhtml)*, Searching for Luxury
    Accommodations Worldwide*, we wrote a file, `WxUtils.py`, that contains a utility
    function, `wxBitmapFromCvImage`, to convert OpenCV images to wxPython bitmaps.
    We used this utility function in our Python projects throughout this book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [第 2 章](4ec4e82a-b63d-4fc1-bf3b-47c653c25a79.xhtml)*全球寻找豪华住宿* 中，我们编写了一个文件，`WxUtils.py`，其中包含一个实用函数
    `wxBitmapFromCvImage`，用于将 OpenCV 图像转换为 wxPython 位图。我们在本书的 Python 项目中使用了这个实用函数。
- en: 'Our implementation of `wxBitmapFromCvImage` relied in part on wxPython''s `wx.BitmapFromBuffer` function.
    On some versions of Raspberry Pi and Raspbian, `wx.BitmapFromBuffer` suffers from
    a platform-specific bug that causes it to fail. As a workaround, we can do a less
    efficient, two-step conversion using the `wx.ImageFromBuffer` and `wx.BitmapFromImage` functions.
    Here is some code to check whether we are running on an early model of Raspbperry
    Pi (based on the CPU model) and to implement our `wxBitmapFromCVImage` function
    appropriately:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对 `wxBitmapFromCvImage` 的实现部分依赖于 wxPython 的 `wx.BitmapFromBuffer` 函数。在某些版本的
    Raspberry Pi 和 Raspbian 上，`wx.BitmapFromBuffer` 由于一个特定于平台的错误而失败。作为解决方案，我们可以使用
    `wx.ImageFromBuffer` 和 `wx.BitmapFromImage` 函数进行一个效率较低的两步转换。以下是一些代码，用于检查我们是否在运行早期的
    Raspberry Pi 模型（基于 CPU 型号），并相应地实现我们的 `wxBitmapFromCVImage` 函数：
- en: '[PRE0]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you replace the contents of `WxUtils.py` with the code shown previously,
    our `wxBitmapFromCvImage` utility function will work on Raspberry Pi, as well
    as other systems.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你用前面显示的代码替换 `WxUtils.py` 的内容，我们的 `wxBitmapFromCvImage` 工具函数将在 Raspberry Pi
    以及其他系统上工作。
