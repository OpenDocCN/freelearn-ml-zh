<html><head></head><body>
<div id="_idContainer315">
<h1 class="chapter-number" id="_idParaDest-96"><a id="_idTextAnchor108"/><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 id="_idParaDest-97"><a id="_idTextAnchor109"/><span class="koboSpan" id="kobo.2.1">Responsible AI</span></h1>
<p><span class="koboSpan" id="kobo.3.1">One of the recent research areas to emerge in </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">artificial intelligence</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">AI</span></strong><span class="koboSpan" id="kobo.7.1">) is making models responsible and accountable, thus producing accurate results, as opposed to biased or incomplete results. </span><span class="koboSpan" id="kobo.7.2">This is a new area of computer science, but it is also something many in the data science field are looking into. </span><span class="koboSpan" id="kobo.7.3">Microsoft is concentrating its efforts on a number of areas, including </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">Fairness</span></strong><span class="koboSpan" id="kobo.9.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">Reliability and Safety</span></strong><span class="koboSpan" id="kobo.11.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">Privacy</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.13.1">and</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.14.1">Security</span></strong><span class="koboSpan" id="kobo.15.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.16.1">Inclusiveness</span></strong><span class="koboSpan" id="kobo.17.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.18.1">Transparency</span></strong><span class="koboSpan" id="kobo.19.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.20.1">Accountability</span></strong><span class="koboSpan" id="kobo.21.1">. </span><span class="koboSpan" id="kobo.21.2">Microsoft has provided a toolbox that can be used and applied to datasets and models to address these topics. </span><span class="koboSpan" id="kobo.21.3">In this chapter, we will be exploring what these terms mean and how Microsoft’s Responsible AI Toolbox can be leveraged to address </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">these concerns.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.25.1">Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">AI principles</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Response AI </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">Toolbox overview</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">AI dashboard</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.31.1">Error analysis</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.32.1">Interpretability dashboard</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.33.1">Fairness dashboard</span></span></li>
</ul>
<h1 id="_idParaDest-98"><a id="_idTextAnchor110"/><span class="koboSpan" id="kobo.34.1">Responsible AI principles</span></h1>
<p><span class="koboSpan" id="kobo.35.1">As mentioned, there are six core principles – Fairness, Reliability and Safety, Privacy and Security, Inclusiveness, Transparency, and Accountability – that Microsoft has incorporated into their Responsible AI Toolbox. </span><span class="koboSpan" id="kobo.35.2">We will briefly explain these </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.37.1">Fairness</span></strong><span class="koboSpan" id="kobo.38.1"> in the context</span><a id="_idIndexMarker503"/><span class="koboSpan" id="kobo.39.1"> of AI systems is a sociotechnical challenge that scientists and developers need to address to ensure that people are treated equally and to reduce unfairness relating to the specific use case we are building the model for. </span><span class="koboSpan" id="kobo.39.2">In a variety of domains and use cases, AI systems can be used to provide resources and opportunities, and through checking fairness we can ensure that we are not reinforcing </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">existing stereotypes.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.41.1">For example, if we are predicting what ethnic groups there are in a certain segment of the population and what their food preferences are, not all customer segments of cities or states have the same ethnic diversity. </span><span class="koboSpan" id="kobo.41.2">So, when we design the model, we have to take into consideration all ethnic groups, giving each equal distribution within the data, building fairness into the model. </span><span class="koboSpan" id="kobo.41.3">Otherwise, the model might be skewed by the ethnic group with the highest population available in the</span><a id="_idIndexMarker504"/><span class="koboSpan" id="kobo.42.1"> test set. </span><span class="koboSpan" id="kobo.42.2">This is also hard because all cities and states have unequal distributions of </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">ethnic groups.</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.44.1">Reliability and Safety</span></strong><span class="koboSpan" id="kobo.45.1">: One</span><a id="_idIndexMarker505"/><span class="koboSpan" id="kobo.46.1"> important thing to keep in mind is to ensure models are safe for others to consume and that the output creates no harm. </span><span class="koboSpan" id="kobo.46.2">When a model makes predictions, make sure those predictions lead to safe and reliable decisions for all consumers. </span><span class="koboSpan" id="kobo.46.3">Understand that a wrong prediction can have an adverse negative effect when applying the model’s outcome. </span><span class="koboSpan" id="kobo.46.4">Spend time making the model’s outcome safe and reliable for the use case that it has been designed and </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">developed for.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.48.1">Privacy and Security</span></strong><span class="koboSpan" id="kobo.49.1">: Use cases that </span><a id="_idIndexMarker506"/><span class="koboSpan" id="kobo.50.1">depend on human-related data, such as predicting patient diagnosis or attrition analysis for companies, use a lot of personal data. </span><span class="koboSpan" id="kobo.50.2">Proper precautions should be in place to protect </span><strong class="bold"><span class="koboSpan" id="kobo.51.1">personally identifiable information</span></strong><span class="koboSpan" id="kobo.52.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.53.1">PII</span></strong><span class="koboSpan" id="kobo.54.1">) and</span><a id="_idIndexMarker507"/><span class="koboSpan" id="kobo.55.1"> privacy. </span><span class="koboSpan" id="kobo.55.2">Depending on where the model is run, try to run the model closer to where data is stored, and do not move it or copy it to ensure privacy. </span><span class="koboSpan" id="kobo.55.3">Also, make sure permission is granted individually to each person who needs access to the data and not everyone. </span><span class="koboSpan" id="kobo.55.4">In some cases, we can either encrypt the data or convert PII into something unidentifiable before building the model, if possible. </span><span class="koboSpan" id="kobo.55.5">There is also talk about synthetic data creation for modeling. </span><span class="koboSpan" id="kobo.55.6">Depending on the use case, the business problem we are attempting to solve must drive the decision on how to protect privacy </span><a id="_idIndexMarker508"/><span class="koboSpan" id="kobo.56.1">and </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">apply security.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.58.1">Inclusiveness</span></strong><span class="koboSpan" id="kobo.59.1"> is a</span><a id="_idIndexMarker509"/><span class="koboSpan" id="kobo.60.1"> core value stating that systems should empower all people, users and customers alike. </span><span class="koboSpan" id="kobo.60.2">The ability of the AI system to work with every human being on the planet regardless of who they are is always the goal. </span><span class="koboSpan" id="kobo.60.3">Inclusiveness is very similar to fairness. </span><span class="koboSpan" id="kobo.60.4">The question to ask is how we can include all of the various groups or include all ethnic minority communities in the model, ensuring no one is left out. </span><span class="koboSpan" id="kobo.60.5">Our dataset should represent all communities so that everyone gets proper representation when building </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">our model.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.62.1">Transparency</span></strong><span class="koboSpan" id="kobo.63.1"> in a</span><a id="_idIndexMarker510"/><span class="koboSpan" id="kobo.64.1"> system is key to ensuring a system can be trusted. </span><span class="koboSpan" id="kobo.64.2">The system should be transparent, allowing users to know what is going on at any given time. </span><span class="koboSpan" id="kobo.64.3">This improves trust in the system. </span><span class="koboSpan" id="kobo.64.4">We can talk about two different categories </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">of transparency:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.66.1">Transparency on how AI systems are built</span></strong><span class="koboSpan" id="kobo.67.1">: We need to be transparent on how the AI systems are built and provide proper documentation on the process and purpose of the model we’ve built. </span><span class="koboSpan" id="kobo.67.2">Anyone using the model should feel comfortable and able to trust </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">the model.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.69.1">Transparency on pitfalls of the models</span></strong><span class="koboSpan" id="kobo.70.1">: Using interpretability to explain how the decision was made and what features were used is also an important way to gain trust in the model to </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">be consumed.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.72.1">Accountability</span></strong><span class="koboSpan" id="kobo.73.1">: Given </span><a id="_idIndexMarker511"/><span class="koboSpan" id="kobo.74.1">that model building is somewhat unpredictable, we must be accountable for what we are building. </span><span class="koboSpan" id="kobo.74.2">Proper processes must be in place in order for us to accept accountability for the model we build. </span><span class="koboSpan" id="kobo.74.3">We should make sure that what we build takes privacy into account and that we accept responsibility for the trustworthiness of the model. </span><span class="koboSpan" id="kobo.74.4">For example, a data scientist who is building a model is responsible for building the model by following all of these principles and will be held accountable for that model. </span><span class="koboSpan" id="kobo.74.5">First and foremost, every organization has to have </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">the following:</span></span><ul><li><span class="koboSpan" id="kobo.76.1">A responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">AI strategy</span></span></li><li><span class="koboSpan" id="kobo.78.1">A methodology to develop AI/</span><strong class="bold"><span class="koboSpan" id="kobo.79.1">machine learning</span></strong><span class="koboSpan" id="kobo.80.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.81.1">ML</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">) responsibly</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.83.1">In order to have a </span><a id="_idIndexMarker512"/><span class="koboSpan" id="kobo.84.1">responsible AI strategy, you need to develop business guidelines relating to how AI/ML can be used to drive business outcomes, establish how teams can apply responsible AI and build better model outcomes, and decide what tools and techniques need to be in place to ensure responsible AI. </span><span class="koboSpan" id="kobo.84.2">This strategy should be the foundation of all AI/ML model development and should be used in any other systems. </span><span class="koboSpan" id="kobo.84.3">You should also create a framework around which to report and monitor risks or leaked </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">AI/ML behavior.</span></span></p>
<p><span class="koboSpan" id="kobo.86.1">In the next section of this chapter, we will discuss how to leverage</span><a id="_idIndexMarker513"/> <strong class="bold"><span class="koboSpan" id="kobo.87.1">raiwidgets</span></strong><span class="koboSpan" id="kobo.88.1"> (or the </span><strong class="bold"><span class="koboSpan" id="kobo.89.1">Responsible AI Toolkit SDK</span></strong><span class="koboSpan" id="kobo.90.1">) and how we can analyze the six core principles. </span><span class="koboSpan" id="kobo.90.2">Not</span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.91.1"> all of these principles are covered by the SDK. </span><span class="koboSpan" id="kobo.91.2">For example, while Fairness and Transparency are covered by the SDK, Privacy and Security, Reliability, and Accountability will be covered by other </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">programming mechanisms.</span></span></p>
<p><span class="koboSpan" id="kobo.93.1">Follow this URL for more </span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.94.1">details and up-to-date </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">information: </span></span><a href="https://www.microsoft.com/en-us/ai/responsible-ai"><span class="No-Break"><span class="koboSpan" id="kobo.96.1">https://www.microsoft.com/en-us/ai/responsible-ai</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.97.1">.</span></span></p>
<h1 id="_idParaDest-99"><a id="_idTextAnchor111"/><span class="koboSpan" id="kobo.98.1">Responsible AI Toolbox overview</span></h1>
<p><span class="koboSpan" id="kobo.99.1">One of the biggest</span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.100.1"> challenges we face in data science is understanding what the model does. </span><span class="koboSpan" id="kobo.100.2">For example, if the algorithms we use are all black boxes, it’s not that easy to know how the decisions are made. </span><span class="koboSpan" id="kobo.100.3">To discern how our algorithms make decisions, we can make use of responsible AI. </span><span class="koboSpan" id="kobo.100.4">This will give us the opportunity to explain the model’s decisions, find the features that contribute to the prediction, do error analysis on the dataset, and also ensure fairness in </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">the dataset.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Microsoft </span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.103.1">recently developed a Responsible AI</span><a id="_idIndexMarker518"/><span class="koboSpan" id="kobo.104.1"> Toolbox that encompasses interpretability, fairness, counterfactual analysis, and causal decision-making</span><a id="_idIndexMarker519"/><span class="koboSpan" id="kobo.105.1"> through three</span><a id="_idIndexMarker520"/><span class="koboSpan" id="kobo.106.1"> dashboards: a </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">fairness dashboard</span></strong><span class="koboSpan" id="kobo.108.1">, an </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">error analysis dashboard</span></strong><span class="koboSpan" id="kobo.110.1">, and an </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.111.1">interpretability dashboard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.113.1">Dashboards </span><a id="_idIndexMarker521"/><span class="koboSpan" id="kobo.114.1">simplify the </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">user interface</span></strong><span class="koboSpan" id="kobo.116.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.117.1">UI</span></strong><span class="koboSpan" id="kobo.118.1">) by bringing all the toolkit output into one UI. </span><span class="koboSpan" id="kobo.118.2">Before the toolbox, it was hard because we needed to download a separate library and build code for each of the dashboards. </span><span class="koboSpan" id="kobo.118.3">Now, it’s very easy, and I will show some code to achieve</span><a id="_idIndexMarker522"/><span class="koboSpan" id="kobo.119.1"> this with the</span><a id="_idIndexMarker523"/><span class="koboSpan" id="kobo.120.1"> Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">AI Toolbox.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.122.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.123.1">The toolbox is in public preview, and there are new developments on the way. </span><span class="koboSpan" id="kobo.123.2">Make sure your libraries are updated often to check which new features are available </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">for you.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.125.1">The Toolbox</span><a id="_idIndexMarker524"/><span class="koboSpan" id="kobo.126.1"> is available </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">here: </span></span><a href="https://github.com/microsoft/responsible-ai-toolbox"><span class="No-Break"><span class="koboSpan" id="kobo.128.1">https://github.com/microsoft/responsible-ai-toolbox</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.129.1">.</span></span></p>
<h1 id="_idParaDest-100"><a id="_idTextAnchor112"/><span class="koboSpan" id="kobo.130.1">Responsible AI dashboard</span></h1>
<p><span class="koboSpan" id="kobo.131.1">To </span><a id="_idIndexMarker525"/><span class="koboSpan" id="kobo.132.1">leverage the Toolbox, we will create a model to apply the Toolbox to. </span><span class="koboSpan" id="kobo.132.2">Let’s look at the process of creating and analyzing </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">responsible AI.</span></span></p>
<p><span class="koboSpan" id="kobo.134.1">Let’s go through the steps to create a model</span><a id="_idIndexMarker526"/><span class="koboSpan" id="kobo.135.1"> in the Azure </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">ML service:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.137.1">Go to the Azure ML </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">Studio UI.</span></span></li>
<li><span class="koboSpan" id="kobo.139.1">Start the </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">compute instance.</span></span></li>
<li><span class="koboSpan" id="kobo.141.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.142.1">Notebook</span></strong><span class="koboSpan" id="kobo.143.1"> in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.144.1">Author</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.145.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.146.1">Create a new notebook with Python 3.8 with Azure ML as </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">the kernel.</span></span></li>
<li><span class="koboSpan" id="kobo.148.1">Name the </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">notebook </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">RAIDashboard.ipynb</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.152.1">Now, we need to install or upgrade libraries. </span><span class="koboSpan" id="kobo.152.2">Only install libraries if they aren’t already on your system. </span><span class="koboSpan" id="kobo.152.3">At the time of writing, Python 3.8 with the Azure ML kernel was used, and it already has </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">raiwidgets</span></strong><span class="koboSpan" id="kobo.154.1"> installed. </span><span class="koboSpan" id="kobo.154.2">If there is an older version, please use the following upgrade command to upgrade to the </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">latest version:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer280">
<span class="koboSpan" id="kobo.156.1"><img alt="Figure 8.1 – Install or upgrade the Responsible AI Toolbox" src="image/B18003_08_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.157.1">Figure 8.1 – Install or upgrade the Responsible AI Toolbox</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.158.1">Now, let’s upgrade </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">the dependencies:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer281">
<span class="koboSpan" id="kobo.160.1"><img alt="Figure 8.2 – Upgrade the pandas libraries to the newest version" src="image/B18003_08_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.161.1">Figure 8.2 – Upgrade the pandas libraries to the newest version</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.162.1">Restart the</span><a id="_idIndexMarker527"/><span class="koboSpan" id="kobo.163.1"> kernel and clear all the outputs. </span><span class="koboSpan" id="kobo.163.2">Once the libraries are installed, it’s always a good practice to restart the kernel to reflect the installed libraries. </span><span class="koboSpan" id="kobo.163.3">Some packages force us to restart the kernel to </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">be effective.</span></span></li>
<li><span class="koboSpan" id="kobo.165.1">We are now </span><a id="_idIndexMarker528"/><span class="koboSpan" id="kobo.166.1">going to load the libraries for us to consume in the notebook. </span><span class="koboSpan" id="kobo.166.2">The Responsible AI dashboard is used to generate a nice UI to interact </span><a id="_idIndexMarker529"/><span class="koboSpan" id="kobo.167.1">with and do </span><strong class="bold"><span class="koboSpan" id="kobo.168.1">what-if analysis</span></strong><span class="koboSpan" id="kobo.169.1">, as </span><a id="_idIndexMarker530"/><span class="koboSpan" id="kobo.170.1">well as other types </span><a id="_idIndexMarker531"/><span class="koboSpan" id="kobo.171.1">of analysis, including </span><strong class="bold"><span class="koboSpan" id="kobo.172.1">error analysis</span></strong><span class="koboSpan" id="kobo.173.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.174.1">feature permutation</span></strong><span class="koboSpan" id="kobo.175.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.176.1">counterfactual analysis</span></strong><span class="koboSpan" id="kobo.177.1">, on the </span><a id="_idIndexMarker532"/><span class="No-Break"><span class="koboSpan" id="kobo.178.1">model created.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.179.1">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">RAIInsights</span></strong><span class="koboSpan" id="kobo.181.1">, this is where we calculate all the calculations to generate the dashboard. </span><span class="koboSpan" id="kobo.181.2">It usually takes time to execute and analyze the model and get insights into what the model is doing. </span><span class="koboSpan" id="kobo.181.3">Whatever is displayed on the Responsible AI dashboard will be calculated by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">RAIInsights</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.183.1"> libraries.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer282">
<span class="koboSpan" id="kobo.184.1"><img alt="Figure 8.3 – Importing the Responsible AI libraries" src="image/B18003_08_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.185.1">Figure 8.3 – Importing the Responsible AI libraries</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.186.1">Next, we create a</span><a id="_idIndexMarker533"/><span class="koboSpan" id="kobo.187.1"> sample regression model to which to apply Responsible AI. </span><span class="koboSpan" id="kobo.187.2">Let’s import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">shap</span></strong><span class="koboSpan" id="kobo.189.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.190.1">sklearn</span></strong><span class="koboSpan" id="kobo.191.1"> libraries for our model. </span><span class="koboSpan" id="kobo.191.2">Here, we are going to load the ML libraries and also the library required to split the data for training and testing. </span><span class="koboSpan" id="kobo.191.3">Later, we will split the dataset into two parts: one for training and one for testing. </span><span class="koboSpan" id="kobo.191.4">Usually, 80% is used for training and 20% is used </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">for testing.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer283">
<span class="koboSpan" id="kobo.193.1"><img alt="Figure 8.4 – Importing the model’s libraries" src="image/B18003_08_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.194.1">Figure 8.4 – Importing the model’s libraries</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.195.1">Now, let’s load</span><a id="_idIndexMarker534"/><span class="koboSpan" id="kobo.196.1"> the sample datasets and split the data for training and testing. </span><span class="koboSpan" id="kobo.196.2">Also, let’s assign the column that is used for the target feature, or label the column to be predicted. </span><span class="koboSpan" id="kobo.196.3">Here, we are loading a sample dataset for diabetes. </span><span class="koboSpan" id="kobo.196.4">Then, we are going to assign the column to predict, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">'y'</span></strong><span class="koboSpan" id="kobo.198.1">. </span><span class="koboSpan" id="kobo.198.2">Sometimes, it’s called </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">target_feature</span></strong><span class="koboSpan" id="kobo.200.1">. </span><span class="koboSpan" id="kobo.200.2">Then, we use the remaining columns as features to train </span><span class="No-Break"><span class="koboSpan" id="kobo.201.1">the model.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer284">
<span class="koboSpan" id="kobo.202.1"><img alt="Figure 8.5 – Loading the sample dataset" src="image/B18003_08_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.203.1">Figure 8.5 – Loading the sample dataset</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.204.1">Split the data and </span><a id="_idIndexMarker535"/><span class="koboSpan" id="kobo.205.1">assign it to different dataframes for modeling. </span><span class="koboSpan" id="kobo.205.2">Usually, when modeling, the training data is split into two datasets, one for training and one for testing. </span><span class="koboSpan" id="kobo.205.3">Next, the predicting column, which is called the label or target, is also split into training and testing. </span><span class="koboSpan" id="kobo.205.4">The following screenshot </span><a id="_idIndexMarker536"/><span class="koboSpan" id="kobo.206.1">shows the features used </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">for modeling.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer285">
<span class="koboSpan" id="kobo.208.1"><img alt="Figure 8.6 – Splitting data for training and testing" src="image/B18003_08_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.209.1">Figure 8.6 – Splitting data for training and testing</span></p>
<p><span class="koboSpan" id="kobo.210.1">Now that we have made our model, we need to run it. </span><span class="koboSpan" id="kobo.210.2">This is necessary before we analyze the model using the Responsible AI Toolbox for fairness, privacy, reliability, and bias. </span><span class="koboSpan" id="kobo.210.3">Bias means we want to have equal records for the categories we use. </span><span class="koboSpan" id="kobo.210.4">For example, if we use a dataset that contains ethnicity or sex features, we have to make sure we have an equal amount of data for each represented group to </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">avoid bias.</span></span></p>
<p><span class="koboSpan" id="kobo.212.1">Let’s now create the responsible AI code</span><a id="_idIndexMarker537"/><span class="koboSpan" id="kobo.213.1"> by following </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.215.1">First, we need to train the model before we pass it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.216.1">RAIInsights</span></strong><span class="koboSpan" id="kobo.217.1"> to calculate the fairness, bias, and other </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">error analyses.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer286">
<span class="koboSpan" id="kobo.219.1"><img alt="Figure 8.7 – Model configuration and training" src="image/B18003_08_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.220.1">Figure 8.7 – Model configuration and training</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.221.1">The model is ready. </span><span class="koboSpan" id="kobo.221.2">The </span><a id="_idIndexMarker538"/><span class="koboSpan" id="kobo.222.1">next step is to apply responsible AI. </span><span class="koboSpan" id="kobo.222.2">Let’s configure the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.223.1">RAIInsights</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.224.1"> details.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.225.1">We need to pass the following parameters: </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">model</span></strong><span class="koboSpan" id="kobo.227.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">train_data</span></strong><span class="koboSpan" id="kobo.229.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">test_data</span></strong><span class="koboSpan" id="kobo.231.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">target_feature</span></strong><span class="koboSpan" id="kobo.233.1">, the model type (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">regression</span></strong><span class="koboSpan" id="kobo.235.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">classification</span></strong><span class="koboSpan" id="kobo.237.1">), </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">categorical_features</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.241.1">With this, </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">RAIInsights</span></strong><span class="koboSpan" id="kobo.243.1"> is going </span><a id="_idIndexMarker539"/><span class="koboSpan" id="kobo.244.1">to produce </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.246.1">An error </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">analysis dashboard</span></span></li>
<li><span class="koboSpan" id="kobo.248.1">An </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">interpretability dashboard</span></span></li>
<li><span class="koboSpan" id="kobo.250.1">A </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">fairness dashboard</span></span></li>
<li><span class="koboSpan" id="kobo.252.1">A Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">AI dashboard</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer287">
<span class="koboSpan" id="kobo.254.1"><img alt="Figure 8.8 – Invoking RAIInsights" src="image/B18003_08_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.255.1">Figure 8.8 – Invoking RAIInsights</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.256.1">The next step is to invoke</span><a id="_idIndexMarker540"/><span class="koboSpan" id="kobo.257.1"> interpretability, error analysis, and fairness and build </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">the dashboard:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.259.1">Interpretability</span></strong><span class="koboSpan" id="kobo.260.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">IntepretML</span></strong><span class="koboSpan" id="kobo.262.1"> is used to understand how the columns affect the prediction</span><a id="_idIndexMarker541"/><span class="koboSpan" id="kobo.263.1"> made by the model. </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">IntepretML</span></strong><span class="koboSpan" id="kobo.265.1"> is an open source package. </span><span class="koboSpan" id="kobo.265.2">Here, we combine all the open source package output, making it seamless, and show it </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">ResponsibleAIDashboard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.269.1">Error analysis</span></strong><span class="koboSpan" id="kobo.270.1">: Error analysis</span><a id="_idIndexMarker542"/><span class="koboSpan" id="kobo.271.1"> allows us to identify high error rates with respect to the benchmarked error rate to find any errors in the model. </span><span class="koboSpan" id="kobo.271.2">It also allows us to conduct root cause analysis in combination with interpretability to see how the model characteristics are performing. </span><span class="koboSpan" id="kobo.271.3">We use the open source </span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">Error Analysis</span></strong><span class="koboSpan" id="kobo.273.1"> package </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">for this.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.275.1">Counterfactuals</span></strong><span class="koboSpan" id="kobo.276.1">: This accepts the total number of counterfactuals</span><a id="_idIndexMarker543"/><span class="koboSpan" id="kobo.277.1"> to generate and the range that their labels should fall within. </span><span class="koboSpan" id="kobo.277.2">Counterfactual analysis allows us to analyze the model’s performance with various outcomes by changing parameters. </span><span class="koboSpan" id="kobo.277.3">We can use this section to do what-if analysis to understand how the model performs. </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">DiCE</span></strong><span class="koboSpan" id="kobo.279.1"> is the open source package that we use to do </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">this analysis.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.281.1">Causal analysis</span></strong><span class="koboSpan" id="kobo.282.1">: This is</span><a id="_idIndexMarker544"/><span class="koboSpan" id="kobo.283.1"> performed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">EconML</span></strong><span class="koboSpan" id="kobo.285.1"> open source package. </span><span class="koboSpan" id="kobo.285.2">This </span><a id="_idIndexMarker545"/><span class="koboSpan" id="kobo.286.1">package allows us to change conditions and see the impact. </span><span class="koboSpan" id="kobo.286.2">For example, what would the impact be if we introduced a new product to a customer segment or if we introduced new strategies into </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">the company?</span></span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer288">
<span class="koboSpan" id="kobo.288.1"><img alt="Figure 8.9 – Adding explainer, error analysis, and counterfactual packages" src="image/B18003_08_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.289.1">Figure 8.9 – Adding explainer, error analysis, and counterfactual packages</span></p>
<p><span class="koboSpan" id="kobo.290.1">Now, let’s</span><a id="_idIndexMarker546"/><span class="koboSpan" id="kobo.291.1"> carry out</span><a id="_idIndexMarker547"/><span class="koboSpan" id="kobo.292.1"> interpretability, error, and </span><span class="No-Break"><span class="koboSpan" id="kobo.293.1">counterfactual </span></span><span class="No-Break"><a id="_idIndexMarker548"/></span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">analysis:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.295.1">Usually, it will take some time </span><a id="_idIndexMarker549"/><span class="koboSpan" id="kobo.296.1">to do all the calculations. </span><span class="koboSpan" id="kobo.296.2">Depending on the model type and the size of the dataset, be prepared to spend a little while here. </span><span class="koboSpan" id="kobo.296.3">Depending on the ML type, causal analysis using </span><strong class="source-inline"><span class="koboSpan" id="kobo.297.1">EconML</span></strong><span class="koboSpan" id="kobo.298.1"> will also be computed for </span><span class="No-Break"><span class="koboSpan" id="kobo.299.1">what-if analysis.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer289">
<span class="koboSpan" id="kobo.300.1"><img alt="Figure 8.10 – Compute responsible AI calculation insights" src="image/B18003_08_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.301.1">Figure 8.10 – Compute responsible AI calculation insights</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.302.1">Next, we need to build the Responsible AI dashboard. </span><span class="koboSpan" id="kobo.302.2">The Toolbox consolidates all the output in a dashboard and provides one place to conduct analysis. </span><span class="koboSpan" id="kobo.302.3">Please remember that not all the principles have been implemented yet, and research and development is still an ongoing process with the SDK. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.303.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.304.1">.11</span></em><span class="koboSpan" id="kobo.305.1"> shows the creation of the Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">AI dashboard.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer290">
<span class="koboSpan" id="kobo.307.1"><img alt="Figure 8.11 – Responsible AI dashboard" src="image/B18003_08_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.308.1">Figure 8.11 – Responsible AI dashboard</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.309.1">Once the dashboard is built, click on the hyperlink to open it. </span><span class="koboSpan" id="kobo.309.2">For each type of analysis, please see the heading in the </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">dashboard link.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.311.1">The link is available here: </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">responsible-ai-toolbox/tour.ipynb at main · </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">microsoft/responsible-ai-toolbox</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.314.1"> (</span></span><a href="https://github.com/microsoft/responsible-ai-toolbox/blob/main/notebooks/responsibleaidashboard/tour.ipynb"><span class="No-Break"><span class="koboSpan" id="kobo.315.1">https://github.com/microsoft/responsible-ai-toolbox/blob/main/notebooks/responsibleaidashboard/tour.ipynb</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.316.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.317.1">The dashboard </span><a id="_idIndexMarker550"/><span class="koboSpan" id="kobo.318.1">created from the preceding code will have a few options to customize and work </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">with cohorts:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.320.1">Dashboard navigation</span></strong><span class="koboSpan" id="kobo.321.1">: Allows us to filter </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">any analysis</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.323.1">Cohort settings</span></strong><span class="koboSpan" id="kobo.324.1">: Allows us to work </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">with cohorts</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.326.1">Switch global cohort</span></strong><span class="koboSpan" id="kobo.327.1">: Allows us to switch between cohorts and also display statistics </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">in popups</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.329.1">Create new cohort</span></strong><span class="koboSpan" id="kobo.330.1">: Allows us to create new cohorts </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">as needed</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.332.1">Next, we are going to deep dive into the error analysis dashboard to understand </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1">feature errors.</span></span></p>
<h1 id="_idParaDest-101"><a id="_idTextAnchor113"/><span class="koboSpan" id="kobo.334.1">Error analysis dashboard</span></h1>
<p><span class="koboSpan" id="kobo.335.1">Error analysis</span><a id="_idIndexMarker551"/><span class="koboSpan" id="kobo.336.1"> allows us to analyze where the model is underperforming and also find errors in the </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">decision-making process.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">Error analysis can be done as either a tree map or a heat map. </span><span class="koboSpan" id="kobo.338.2">Based on the analysis, red represents an error. </span><span class="koboSpan" id="kobo.338.3">If you click one of the insight bubbles, you’ll see the path the </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">model traversed.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">Dashboard analysis will be based on the type of ML modeling we choose. </span><span class="koboSpan" id="kobo.340.2">The two types are classification and regression. </span><span class="koboSpan" id="kobo.340.3">In our example, we chose regression. </span><span class="koboSpan" id="kobo.340.4">The following are two of the accuracy </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">metrics used:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.342.1">Mean </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.343.1">squared error</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.344.1">Mean </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.345.1">absolute error</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.346.1">The following screenshot shows the error analysis dashboard</span><a id="_idIndexMarker552"/><span class="koboSpan" id="kobo.347.1"> UI created by the Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">AI SDK.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer291">
<span class="koboSpan" id="kobo.349.1"><img alt="Figure 8.12 – Error analysis dashboard" src="image/B18003_08_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.350.1">Figure 8.12 – Error analysis dashboard</span></p>
<p><span class="koboSpan" id="kobo.351.1">This dashboard</span><a id="_idIndexMarker553"/><span class="koboSpan" id="kobo.352.1"> provides options to save the error analysis for further analysis or share it with others. </span><span class="koboSpan" id="kobo.352.2">This feature is very helpful if we need to share information with other data scientists or subject matter experts to understand a </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">model’s performance.</span></span></p>
<p><span class="koboSpan" id="kobo.354.1">The following screenshot shows the error analysis screen with </span><strong class="bold"><span class="koboSpan" id="kobo.355.1">Heat </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.356.1">map</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.357.1"> selected:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer292">
<span class="koboSpan" id="kobo.358.1"><img alt="Figure 8.13 – Heat map error analysis" src="image/B18003_08_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.359.1">Figure 8.13 – Heat map error analysis</span></p>
<p><span class="koboSpan" id="kobo.360.1">In this heat map, we</span><a id="_idIndexMarker554"/><span class="koboSpan" id="kobo.361.1"> need to select the features for which we want to do error analysis. </span><span class="koboSpan" id="kobo.361.2">Once we select the features, the system will analyze the </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">error percentage.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">Options are available for </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">Quantile binning</span></strong><span class="koboSpan" id="kobo.365.1"> and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.366.1">Binning threshold</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.368.1">The following screenshot shows us </span><strong class="bold"><span class="koboSpan" id="kobo.369.1">Feature List</span></strong><span class="koboSpan" id="kobo.370.1">. </span><span class="koboSpan" id="kobo.370.2">This section shows which features have been selected and how important each one is to </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">the prediction.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer293">
<span class="koboSpan" id="kobo.372.1"><img alt="Figure 8.14 – Feature List" src="image/B18003_08_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.373.1">Figure 8.14 – Feature List</span></p>
<p><span class="koboSpan" id="kobo.374.1">This feature illustrates the </span><a id="_idIndexMarker555"/><span class="koboSpan" id="kobo.375.1">importance of the columns or features to the predictions. </span><span class="koboSpan" id="kobo.375.2">There are options to change the maximum depth and leaves of the decision tree created by the responsible AI dashboard, as well as how the minimum number of samples in one leaf </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">is analyzed.</span></span></p>
<h1 id="_idParaDest-102"><a id="_idTextAnchor114"/><span class="koboSpan" id="kobo.377.1">Interpretability dashboard</span></h1>
<p><span class="koboSpan" id="kobo.378.1">Now let’s look at the interpretability</span><a id="_idIndexMarker556"/><span class="koboSpan" id="kobo.379.1"> section of the dashboard. </span><span class="koboSpan" id="kobo.379.2">This is where each feature is analyzed and the importance and impact of the features are shown. </span><span class="koboSpan" id="kobo.379.3">The top features are either aggregated or available individually </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">for analysis.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer294">
<span class="koboSpan" id="kobo.381.1"><img alt="Figure 8.15 – Aggregated feature importance" src="image/B18003_08_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.382.1">Figure 8.15 – Aggregated feature importance</span></p>
<p><span class="koboSpan" id="kobo.383.1">In the preceding screenshot, you can see the aggregated </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">feature importance.</span></span></p>
<p><span class="koboSpan" id="kobo.385.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.386.1">Individual feature importance</span></strong><span class="koboSpan" id="kobo.387.1"> to analyze the data row by row. </span><span class="koboSpan" id="kobo.387.2">Then, select the rows to analyze, </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer295">
<span class="koboSpan" id="kobo.389.1"><img alt="Figure 8.16 – Selecting data points for feature importance" src="image/B18003_08_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.390.1">Figure 8.16 – Selecting data points for feature importance</span></p>
<p><span class="koboSpan" id="kobo.391.1">Once the feature data</span><a id="_idIndexMarker557"/><span class="koboSpan" id="kobo.392.1"> points are selected, scroll down to see the charts. </span><span class="koboSpan" id="kobo.392.2">The following chart shows the feature importance and its impact on the row that is selected. </span><span class="koboSpan" id="kobo.392.3">For every row in the dataset, you can analyze the dataset by selecting </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">a row.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer296">
<span class="koboSpan" id="kobo.394.1"><img alt="Figure 8.17 – Individual feature importance plot" src="image/B18003_08_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.395.1">Figure 8.17 – Individual feature importance plot</span></p>
<p><span class="koboSpan" id="kobo.396.1">Now click </span><strong class="bold"><span class="koboSpan" id="kobo.397.1">Individual conditional expectations (ICE) plot</span></strong><span class="koboSpan" id="kobo.398.1"> to change the plot. </span><span class="koboSpan" id="kobo.398.2">The ICE plot will show all the rows with respect to the feature selected and show how much impact each row had on </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">the model.</span></span></p>
<p><span class="koboSpan" id="kobo.400.1">On selecting </span><strong class="bold"><span class="koboSpan" id="kobo.401.1">Individual conditional expectation (ICE) plot</span></strong><span class="koboSpan" id="kobo.402.1">, you should see what is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.403.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.404.1">.17</span></em><span class="koboSpan" id="kobo.405.1">. </span><span class="koboSpan" id="kobo.405.2">The </span><em class="italic"><span class="koboSpan" id="kobo.406.1">x</span></em><span class="koboSpan" id="kobo.407.1"> axis should be the feature selected and the </span><em class="italic"><span class="koboSpan" id="kobo.408.1">y</span></em><span class="koboSpan" id="kobo.409.1"> axis the prediction. </span><span class="koboSpan" id="kobo.409.2">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.410.1">Feature</span></strong><span class="koboSpan" id="kobo.411.1"> dropdown and select the feature to see the impact. </span><span class="koboSpan" id="kobo.411.2">Also, options to set minimum and maximum steps are available. </span><span class="koboSpan" id="kobo.411.3">To get more information, click </span><strong class="bold"><span class="koboSpan" id="kobo.412.1">How to read </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.413.1">this chart</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer297">
<span class="koboSpan" id="kobo.415.1"><img alt="Figure 8.18 – Individual conditional expectation (ICE) plot" src="image/B18003_08_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.416.1">Figure 8.18 – Individual conditional expectation (ICE) plot</span></p>
<p><span class="koboSpan" id="kobo.417.1">Now let’s look at </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">model statistics.</span></span></p>
<p><span class="koboSpan" id="kobo.419.1">Model statistics allow </span><a id="_idIndexMarker558"/><span class="koboSpan" id="kobo.420.1">us to analyze distribution across prediction values, the model’s performance, and model metrics. </span><span class="koboSpan" id="kobo.420.2">Options to switch between a cohort and a dataset are also available. </span><span class="koboSpan" id="kobo.420.3">Select the </span><em class="italic"><span class="koboSpan" id="kobo.421.1">y</span></em><span class="koboSpan" id="kobo.422.1"> value to see the error in the dataset, the predicted Y value (the label for the column that the model predicted), and what the true Y value (label for the column provided in the training dataset) was. </span><span class="koboSpan" id="kobo.422.2">These options allow us to understand the </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">model performance.</span></span></p>
<p><span class="koboSpan" id="kobo.424.1">You can also swap the axes to show errors on the x axis and predictions on the Y axis. </span><span class="koboSpan" id="kobo.424.2">Also, if you click </span><strong class="bold"><span class="koboSpan" id="kobo.425.1">Cohort</span></strong><span class="koboSpan" id="kobo.426.1">, there is the option to select a dataset and the features to plot and see how the </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">model performed.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer298">
<span class="koboSpan" id="kobo.428.1"><img alt="Figure 8.19 – Model statistics" src="image/B18003_08_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.429.1">Figure 8.19 – Model statistics</span></p>
<p><span class="koboSpan" id="kobo.430.1">Next, we are going to look into the </span><strong class="bold"><span class="koboSpan" id="kobo.431.1">Data explorer</span></strong><span class="koboSpan" id="kobo.432.1"> feature on the Responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">AI dashboard.</span></span></p>
<h2 id="_idParaDest-103"><a id="_idTextAnchor115"/><span class="koboSpan" id="kobo.434.1">Data explorer</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.435.1">Data explorer</span></strong><span class="koboSpan" id="kobo.436.1"> is</span><a id="_idIndexMarker559"/><span class="koboSpan" id="kobo.437.1"> another visual tool for analyzing the predicted value, error, and features. </span><span class="koboSpan" id="kobo.437.2">You can use either aggregated or individual features. </span><span class="koboSpan" id="kobo.437.3">It also allows you to select predicted features and training features for </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">what-if analysis.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.439.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.440.1">.20</span></em><span class="koboSpan" id="kobo.441.1"> shows a box plot of how age is grouped or binned into chunks. </span><span class="koboSpan" id="kobo.441.2">The </span><em class="italic"><span class="koboSpan" id="kobo.442.1">x</span></em><span class="koboSpan" id="kobo.443.1"> axis is the index and the </span><em class="italic"><span class="koboSpan" id="kobo.444.1">y</span></em><span class="koboSpan" id="kobo.445.1"> axis is the age groups, which can be age data points or bins of ages. </span><span class="koboSpan" id="kobo.445.2">You have the choice to select either </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">Aggregate plots</span></strong><span class="koboSpan" id="kobo.447.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.448.1">Individual datapoints</span></strong><span class="koboSpan" id="kobo.449.1"> to visualize the difference between aggregated and individual plots. </span><span class="koboSpan" id="kobo.449.2">Box plots provide a clear visualization of where the outliers are and show the range of </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">plotted points.</span></span></p>
<p><span class="koboSpan" id="kobo.451.1">We can change the </span><em class="italic"><span class="koboSpan" id="kobo.452.1">x</span></em><span class="koboSpan" id="kobo.453.1"> axis from the index to the predicted </span><em class="italic"><span class="koboSpan" id="kobo.454.1">y</span></em><span class="koboSpan" id="kobo.455.1"> or true </span><em class="italic"><span class="koboSpan" id="kobo.456.1">y</span></em><span class="koboSpan" id="kobo.457.1"> value to see the patterns. </span><span class="koboSpan" id="kobo.457.2">There is also the option to change the number of bins. </span><span class="koboSpan" id="kobo.457.3">In the following example, we chose five bins. </span><span class="koboSpan" id="kobo.457.4">Also, if you click </span><strong class="bold"><span class="koboSpan" id="kobo.458.1">age</span></strong><span class="koboSpan" id="kobo.459.1">, there is the option to change the feature as well to see how the prediction </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">value changes.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer299">
<span class="koboSpan" id="kobo.461.1"><img alt="Figure 8.20 – Aggregated plots" src="image/B18003_08_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.462.1">Figure 8.20 – Aggregated plots</span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.463.1">Data explorer</span></strong><span class="koboSpan" id="kobo.464.1"> allows us to select the predicted and original values and plot either aggregated or individual scatter plots to see how the values align or intersect. </span><span class="koboSpan" id="kobo.464.2">In the following chart, the </span><em class="italic"><span class="koboSpan" id="kobo.465.1">y</span></em><span class="koboSpan" id="kobo.466.1"> axis is the age and the </span><em class="italic"><span class="koboSpan" id="kobo.467.1">x</span></em><span class="koboSpan" id="kobo.468.1"> axis is the index, and the predicted outcome is a scatter plot. </span><span class="koboSpan" id="kobo.468.2">You can change the cohort to see </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">various values.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer300">
<span class="koboSpan" id="kobo.470.1"><img alt="Figure 8.21 – Scatter plot for individual values" src="image/B18003_08_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.471.1">Figure 8.21 – Scatter plot for individual values</span></p>
<p><span class="koboSpan" id="kobo.472.1">The preceding</span><a id="_idIndexMarker560"/><span class="koboSpan" id="kobo.473.1"> charts provide a way to visualize the predicted and error values of our model. </span><span class="koboSpan" id="kobo.473.2">This enables us to build a better model with more accuracy that is </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">more realistic.</span></span></p>
<h2 id="_idParaDest-104"><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.475.1">What-if counterfactuals</span></h2>
<p><span class="koboSpan" id="kobo.476.1">Now, we can change the datapoints </span><a id="_idIndexMarker561"/><span class="koboSpan" id="kobo.477.1">and click </span><strong class="bold"><span class="koboSpan" id="kobo.478.1">Create what-if counterfactuals</span></strong><span class="koboSpan" id="kobo.479.1">. </span><span class="koboSpan" id="kobo.479.2">What-if analysis allows us to select the predictor and compare with features to see the impact on the outcome. </span><span class="koboSpan" id="kobo.479.3">We can also change the index and age and switch to see predicted </span><em class="italic"><span class="koboSpan" id="kobo.480.1">y</span></em><span class="koboSpan" id="kobo.481.1"> or true </span><em class="italic"><span class="koboSpan" id="kobo.482.1">y</span></em><span class="koboSpan" id="kobo.483.1"> values and the features to see the counterfactuals. </span><span class="koboSpan" id="kobo.483.2">Then, we can select the index value and select one to see how the </span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">charts change.</span></span></p>
<p><span class="koboSpan" id="kobo.485.1">We can see a counterfactual chart in the following screenshot and analyze the chart by </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">changing features.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer301">
<span class="koboSpan" id="kobo.487.1"><img alt="Figure 8.22 – Counterfactuals" src="image/B18003_08_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.488.1">Figure 8.22 – Counterfactuals</span></p>
<p><span class="koboSpan" id="kobo.489.1">Select the </span><a id="_idIndexMarker562"/><span class="koboSpan" id="kobo.490.1">index and then click </span><strong class="bold"><span class="koboSpan" id="kobo.491.1">Create what-if counterfactual</span></strong><span class="koboSpan" id="kobo.492.1"> to see the features percentage in the distribution chart. </span><span class="koboSpan" id="kobo.492.2">You can also save </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">the chart.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer302">
<span class="koboSpan" id="kobo.494.1"><img alt="Figure 8.23 – What-if counterfactuals" src="image/B18003_08_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.495.1">Figure 8.23 – What-if counterfactuals</span></p>
<p><span class="koboSpan" id="kobo.496.1">In the next section, we are going to see how fairness can be analyzed using </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">the SDK.</span></span></p>
<h1 id="_idParaDest-105"><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.498.1">Fairness</span></h1>
<p><span class="koboSpan" id="kobo.499.1">Fairness is a </span><a id="_idIndexMarker563"/><span class="koboSpan" id="kobo.500.1">topic that we need to investigate in use cases where people are involved. </span><span class="koboSpan" id="kobo.500.2">Proper precautions should be taken to figure out whether the dataset is fair or not. </span><span class="koboSpan" id="kobo.500.3">In Azure ML, with the Responsible AI Toolbox, we can create a fairness dashboard. </span><span class="koboSpan" id="kobo.500.4">To do that, first, we need to know which features need to be fair, such as sex and race. </span><span class="koboSpan" id="kobo.500.5">Once we know that, we can create a dashboard, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.501.1">Figure 8</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.502.1">.24</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.504.1">In this section, we are going to create a fairness dashboard</span><a id="_idIndexMarker564"/><span class="koboSpan" id="kobo.505.1"> with a </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">sample dataset:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.507.1">Go to the Azure ML </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">Studio UI.</span></span></li>
<li><span class="koboSpan" id="kobo.509.1">Start the </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">compute instance.</span></span></li>
<li><span class="koboSpan" id="kobo.511.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.512.1">Notebook</span></strong><span class="koboSpan" id="kobo.513.1"> in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.514.1">Author</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.515.1"> section.</span></span></li>
<li><span class="koboSpan" id="kobo.516.1">Create a new notebook with Python 3.8 with Azure ML as </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">the kernel.</span></span></li>
<li><span class="koboSpan" id="kobo.518.1">Create a new notebook </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">FairnessDashboard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.522.1">Import all the </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">required libraries:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer303">
<span class="koboSpan" id="kobo.524.1"><img alt="Figure 8.24 – Fairness imports" src="image/B18003_08_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.525.1">Figure 8.24 – Fairness imports</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.526.1">Next, we are going to load the </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">sample dataset:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer304">
<span class="koboSpan" id="kobo.528.1"><img alt="Figure 8.25 – Getting the sample data" src="image/B18003_08_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.529.1">Figure 8.25 – Getting the sample data</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.530.1">Then, we are going to specify the sensitive features and then use categorical columns and label encoder to convert strings </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">to numbers:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer305">
<span class="koboSpan" id="kobo.532.1"><img alt="Figure 8.26 – Feature engineering" src="image/B18003_08_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.533.1">Figure 8.26 – Feature engineering</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.534.1">Now that we</span><a id="_idIndexMarker565"/><span class="koboSpan" id="kobo.535.1"> have feature engineering taken care of, the next step is to split the dataset for training and testing. </span><span class="koboSpan" id="kobo.535.2">We will split the dataset into 80% for training and 20% </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">for testing:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer306">
<span class="koboSpan" id="kobo.537.1"><img alt="Figure 8.27 – Splitting data for training and testing" src="image/B18003_08_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.538.1">Figure 8.27 – Splitting data for training and testing</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.539.1">Next, configure </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">the training:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer307">
<span class="koboSpan" id="kobo.541.1"><img alt="Figure 8.28 – Training" src="image/B18003_08_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.542.1">Figure 8.28 – Training</span></p>
<p><span class="koboSpan" id="kobo.543.1">Train the model with the dataset. </span><span class="koboSpan" id="kobo.543.2">Here, we are using logistic regression </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">for modeling.</span></span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.545.1">Next, let’s</span><a id="_idIndexMarker566"/><span class="koboSpan" id="kobo.546.1"> create a fairness dashboard. </span><span class="koboSpan" id="kobo.546.2">A fairness dashboard needs these three parameters at </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">a minimum:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.548.1">Sensitive features</span></strong><span class="koboSpan" id="kobo.549.1"> – columns that have sensitive data, such as sex </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">or race</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.551.1">Original </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.552.1">label value</span></strong></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.553.1">Predicted value </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.554.1">to analyze</span></strong></span></li></ul></li>
</ol>
<p><span class="koboSpan" id="kobo.555.1">Click the URL created by the responsible AI SDK. </span><span class="koboSpan" id="kobo.555.2">A new web page will open. </span><span class="koboSpan" id="kobo.555.3">Follow the navigation in the dashboard to select the sensitive column and see how the data is distributed across those features. </span><span class="koboSpan" id="kobo.555.4">The main aim here is to provide insights into how the features are balanced with sensitive information. </span><span class="koboSpan" id="kobo.555.5">For example, if we have data with male and female datapoints, we want to make sure that men and women have the same amount of representation in </span><span class="No-Break"><span class="koboSpan" id="kobo.556.1">the dataset.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer308">
<span class="koboSpan" id="kobo.557.1"><img alt="Figure 8.29 – Creating the fairness dashboard" src="image/B18003_08_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.558.1">Figure 8.29 – Creating the fairness dashboard</span></p>
<p><span class="koboSpan" id="kobo.559.1">Here is the main page of </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">the dashboard:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer309">
<span class="koboSpan" id="kobo.561.1"><img alt="Figure 8.30 – Fairness dashboard – intro page" src="image/B18003_08_030.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.562.1">Figure 8.30 – Fairness dashboard – intro page</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.563.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.564.1">Get started</span></strong><span class="koboSpan" id="kobo.565.1"> to</span><a id="_idIndexMarker567"/><span class="koboSpan" id="kobo.566.1"> view the options to </span><span class="No-Break"><span class="koboSpan" id="kobo.567.1">analyze fairness.</span></span></li>
<li><span class="koboSpan" id="kobo.568.1">The first step of the process is to select the sensitive features. </span><span class="koboSpan" id="kobo.568.2">In the following screenshot, we have two columns, </span><strong class="bold"><span class="koboSpan" id="kobo.569.1">sex</span></strong><span class="koboSpan" id="kobo.570.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">race</span></strong><span class="koboSpan" id="kobo.572.1">. </span><span class="koboSpan" id="kobo.572.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.573.1">sex</span></strong><span class="koboSpan" id="kobo.574.1"> column, we have two categories, </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">male</span></strong><span class="koboSpan" id="kobo.576.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.577.1">female</span></strong><span class="koboSpan" id="kobo.578.1">. </span><span class="koboSpan" id="kobo.578.2">For </span><strong class="bold"><span class="koboSpan" id="kobo.579.1">race</span></strong><span class="koboSpan" id="kobo.580.1">, we have </span><strong class="bold"><span class="koboSpan" id="kobo.581.1">white</span></strong><span class="koboSpan" id="kobo.582.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.583.1">black</span></strong><span class="koboSpan" id="kobo.584.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.585.1">Asian-Pac-Islander</span></strong><span class="koboSpan" id="kobo.586.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.587.1">Other</span></strong><span class="koboSpan" id="kobo.588.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.589.1">Amer-Indian-Eskimo</span></strong><span class="koboSpan" id="kobo.590.1">. </span><span class="koboSpan" id="kobo.590.2">Let’s first select </span><strong class="bold"><span class="koboSpan" id="kobo.591.1">sex</span></strong><span class="koboSpan" id="kobo.592.1"> to examine the sensitive features, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.594.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer310">
<span class="koboSpan" id="kobo.596.1"><img alt="Figure 8.31 – Fairness dashboard – 01 Sensitive features" src="image/B18003_08_031.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.597.1">Figure 8.31 – Fairness dashboard – 01 Sensitive features</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.598.1">Now let’s choose which</span><a id="_idIndexMarker568"/><span class="koboSpan" id="kobo.599.1"> performance metric to use for our analysis. </span><span class="koboSpan" id="kobo.599.2">Options for performance metrics are </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">as follows:</span></span><ul><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.601.1">Accuracy</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.602.1">Balanced accuracy</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.603.1">F1-score</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.604.1">Precision</span></strong></span></li><li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.605.1">Recall</span></strong></span></li></ul></li>
</ol>
<p><span class="koboSpan" id="kobo.606.1">The definitions of these metrics are provided in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.607.1">Figure 8</span></em></span><em class="italic"><span class="koboSpan" id="kobo.608.1">.32</span></em><span class="koboSpan" id="kobo.609.1">. </span><span class="koboSpan" id="kobo.609.2">For our purposes, we are going to choose </span><strong class="bold"><span class="koboSpan" id="kobo.610.1">Accuracy</span></strong><span class="koboSpan" id="kobo.611.1"> as the metric, with </span><strong class="bold"><span class="koboSpan" id="kobo.612.1">Sex</span></strong><span class="koboSpan" id="kobo.613.1"> as the sensitive column for us to analyze. </span><span class="koboSpan" id="kobo.613.2">Click </span><strong class="bold"><span class="koboSpan" id="kobo.614.1">Next</span></strong><span class="koboSpan" id="kobo.615.1"> to go to </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.616.1">Fairness metrics</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer311">
<span class="koboSpan" id="kobo.618.1"><img alt="Figure 8.32 – Fairness dashboard – 02 Performance metrics" src="image/B18003_08_032.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.619.1">Figure 8.32 – Fairness dashboard – 02 Performance metrics</span></p>
<ol>
<li value="15"><span class="koboSpan" id="kobo.620.1">Next is one of the </span><a id="_idIndexMarker569"/><span class="koboSpan" id="kobo.621.1">most important screens. </span><span class="koboSpan" id="kobo.621.2">Select the appropriate fairness metric for our analysis. </span><span class="koboSpan" id="kobo.621.3">In the following screenshot, you can see the choice. </span><span class="koboSpan" id="kobo.621.4">For our example, we are choosing </span><strong class="bold"><span class="koboSpan" id="kobo.622.1">Demographic parity difference</span></strong><span class="koboSpan" id="kobo.623.1">. </span><span class="koboSpan" id="kobo.623.2">Then click </span><strong class="bold"><span class="koboSpan" id="kobo.624.1">Next</span></strong><span class="koboSpan" id="kobo.625.1"> to see the charts </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">to analyze.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer312">
<span class="koboSpan" id="kobo.627.1"><img alt="Figure 8.33 – Fairness dashboard – 03 Fairness metrics" src="image/B18003_08_033.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.628.1">Figure 8.33 – Fairness dashboard – 03 Fairness metrics</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.629.1">On the next screen, we can change these selections, see how the fairness metrics are calculated, and</span><a id="_idIndexMarker570"/><span class="koboSpan" id="kobo.630.1"> examine which sensitive features are selected and how fair </span><span class="No-Break"><span class="koboSpan" id="kobo.631.1">they are.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer313">
<span class="koboSpan" id="kobo.632.1"><img alt="Figure 8.34 – Fairness results" src="image/B18003_08_034.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.633.1">Figure 8.34 – Fairness results</span></p>
<p><span class="koboSpan" id="kobo.634.1">The preceding</span><a id="_idIndexMarker571"/><span class="koboSpan" id="kobo.635.1"> chart shows that women are underrepresented in the model, which also suggests the model might be biased toward men. </span><span class="koboSpan" id="kobo.635.2">So, now we can go back and see whether we can get a more balanced dataset to make our model fairer. </span><span class="koboSpan" id="kobo.635.3">Try to switch the charts to false positive and false negative rates to drill down and see the rates of false positives and negatives. </span><span class="koboSpan" id="kobo.635.4">You can also change </span><strong class="bold"><span class="koboSpan" id="kobo.636.1">Performance metric</span></strong><span class="koboSpan" id="kobo.637.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">Sensitive feature</span></strong><span class="koboSpan" id="kobo.639.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.640.1">Fairness metric</span></strong><span class="koboSpan" id="kobo.641.1"> and analyze the fairness. </span><span class="koboSpan" id="kobo.641.2">As these options change, the charts will reflect the changes. </span><span class="koboSpan" id="kobo.641.3">This tool provides a single place to analyze data for bias </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">and fairness.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer314">
<span class="koboSpan" id="kobo.643.1"><img alt="Figure 8.35 – Fairness results – False positive and false negative rates" src="image/B18003_08_035.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.644.1">Figure 8.35 – Fairness results – False positive and false negative rates</span></p>
<p><span class="koboSpan" id="kobo.645.1">We can now drill</span><a id="_idIndexMarker572"/><span class="koboSpan" id="kobo.646.1"> deeper into black-box models and see how the model made decisions, and also analyze the dataset for any bias or errors and </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">ensure fairness.</span></span></p>
<h1 id="_idParaDest-106"><a id="_idTextAnchor118"/><span class="koboSpan" id="kobo.648.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.649.1">By using the Responsible AI Toolbox SDK, we can analyze data for fairness and errors and look deep into decision trees to understand how the model makes decisions. </span><span class="koboSpan" id="kobo.649.2">Note that there is work to be done in this field. </span><span class="koboSpan" id="kobo.649.3">The SDK is still going through development, and features are being added, so please remember that the functionality will change and new features will be added. </span><span class="koboSpan" id="kobo.649.4">At the time of writing, we tested with the LightGBM, XGBoost, and PyTorch algorithms for fairness. </span><span class="koboSpan" id="kobo.649.5">The Toolbox allows us to open black-box models and see how decisions are made, and also produce output that is fair </span><span class="No-Break"><span class="koboSpan" id="kobo.650.1">and unbiased.</span></span></p>
<p><span class="koboSpan" id="kobo.651.1">In the next chapter, we will learn how to productionalize </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">ML models.</span></span></p>
</div>
</body></html>