<html><head></head><body>
        <section>

            <header>
                <h1 class="header-title">R Fundamentals</h1>
            </header>

            <article>
                
<div class="packt_quote">"One of my most productive days was throwing away 1,000 lines of code."<br/>
                                                                                                           - Ken Thompson</div>
<p>This chapter covers the basic programming syntax functions and capabilities of R. Its intention is to introduce you to R and accelerate your learning. The objectives are as follows:</p>
<ul>
<li>Installing R and RStudio</li>
<li>Creating and exploring vectors</li>
<li>Creating data frames and matrices</li>
<li>Exploring mathematical and statistical functions</li>
<li>Building simple plots</li>
<li>Introducing <kbd>dplyr</kbd> data manipulation</li>
<li>Installing and loading packages</li>
</ul>
<p>All of the examples in this Appendix are covered in one way or another in the preceding chapters. However, if you are completely new to R, this is a great starting point. It may accelerate your understanding of the content in the chapters.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Getting R up-and-running</h1>
            </header>

            <article>
                
<p>We want to accomplish two things here: first, install the latest version of R and second, install RStudio, which is an <strong>Integrated Development Environment</strong> (<strong>IDE</strong>) for R.</p>
<p>Let's start by going to R's homepage at <a href="https://www.r-project.org/"><span class="URLPACKT">https://www.r-project.org/</span></a>. This page will look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img height="373" width="622" class="image-border" src="assets/image_appx_01.png"/></div>
<p>You can see that there is a link, <span class="packt_screen">download R</span>, and in the <span class="packt_screen">News</span> section the latest <span class="packt_screen">R version is 3.3.2 (Sincere Pumpkin Patch)</span>, which was released on <span class="packt_screen">2016-10-31</span>. <span class="packt_screen">Version 3.3.3</span> is scheduled for release in March. Now, click one of the links, either <span class="packt_screen">CRAN</span> under <span class="packt_screen">Download</span> or <span class="packt_screen">download R</span> under <span class="packt_screen">Getting Started</span>, and you will come to the following screen, which has <span class="packt_screen">CRAN Mirrors</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="264" width="640" class="image-border" src="assets/image_appx_02.png"/></div>
<p>These are the links, by country and sorted alphabetically, that will take you to the download page. Being in the USA, I will scroll down and find many links available:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="assets/image_appx_03.png"/></div>
<p>Once you find a similar link that is close to your location, click on it and you will see this as part of the page that will be loaded:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="assets/image_appx_04.png"/></div>
<p>Now, click on your appropriate operating system:</p>
<p>What we want now is to install base R for the first time, so click <span class="packt_screen">install R for the first time</span> and we will come to the following page, which has the link to initiate the download:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" src="assets/image_appx_05.png"/></div>
<p>Now, you can just download and install R as any other program. After the installation, run R and you will see the base <strong>Graphical User Interface</strong> (<strong>GUI</strong>):</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="356" width="425" class="image-border" src="assets/image_appx_06.png"/></div>
<p>This is all you need to run all of the code in this book. However, it is extremely helpful if you utilize R in the context of RStudio's IDE, which is available for free. This link will direct you to the page where you can download the free version:</p>
<p><a href="https://www.rstudio.com/products/RStudio/"><span class="URLPACKT">https://www.rstudio.com/products/RStudio/</span></a></p>
<p>On the page, you will find the download for the free and commercial versions. Needless to say, let's stick with the free version, so download and install it. After this is installed and opened for the first time, you will see something as the following. Keep in mind that your screen will be different from what you see here based on the packages that I have loaded and the operating system:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" src="assets/image_appx_07.png"/></div>
<p>Note that on the left is the same console with the command prompt that you can see in the preceding figure. The IDE improves the experience so that you can manage <span class="packt_screen">Environment</span> and <span class="packt_screen">History</span> (to the upper right) and <span class="packt_screen">Files</span>, <span class="packt_screen">Plots</span>, <span class="packt_screen">Packages</span>, and <span class="packt_screen">Help</span> (to the lower right).</p>
<p>Let's not get distracted here with a full tutorial on what RStudio can do; instead, we'll focus on a couple of important items. One of the great benefits of R is the vast number of high-quality packages for various analyses. Let's look at how the IDE ties it all together by loading a package called <kbd>abc</kbd>, which stands for approximate Bayesian computation. Go to the command prompt and type the following:</p>
<pre>
    <strong>&gt; install.packages("abc")</strong>
</pre>
<p>After this runs, notice that in the lower right panel (ensure that the <span class="packt_screen">Packages</span> tab is clicked on) that the <kbd>abc</kbd> package is now installed as well as the dependent <kbd>abc.data</kbd> package.</p>
<p>Now, go to the upper right and click on the <span class="packt_screen">History</span> tab. You should see the command that you executed in order to load the package:</p>
<div class="CDPAlignCenter CDPAlign"><img height="165" width="376" class="image-border" src="assets/image_appx_08.png"/></div>
<p>Now, if you click on the <span class="packt_screen">To Console</span> button, what will be placed in front of the command prompt. If you click <span class="packt_screen">To Source</span>, a new area will open and will allow you to put your project script together. </p>
<p>The <kbd>install.packages()</kbd> command has now gone from the history to a source file. As you experiment with your code and get it to where it works as you want it, put it into a source file. You can save it, e-mail it, and so on. All the code for each of the chapters in this book is saved as a source file.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Using R</h1>
            </header>

            <article>
                
<p>With all systems ready to launch, let's start our first commands. R will take both the strings in quotes or simple numbers. Here, we will put one command as a string and one command as a number. The output is the same as the input:</p>
<pre>
    <strong>&gt; "Let's Go Sioux!"</strong><br/>    <strong>[1] "Let's Go Sioux!"</strong><br/>    <br/>    <strong>&gt; 15</strong><br/>    <strong>[1] 15</strong>
</pre>
<p>R can also act as a calculator:</p>
<pre>
    <strong>&gt; ((22+5)/9)*2</strong><br/>    <strong>[1] 6</strong>
</pre>
<p>Where R starts to shine is in the creation of vectors. Here, we will put the first 10 numbers of the Fibonacci sequence in a vector using the <kbd>c()</kbd> function, which stands for combining the values to a vector or list (concatenate):</p>
<pre>
    <strong>&gt; c(0, 1, 1, 2, 3, 5, 8, 13, 21, 34) #Fibonacci sequence</strong><br/>    <strong> [1]  0  1  1  2  3  5  8 13 21 34</strong>
</pre>
<p>Note that in this syntax, I included a comment, <kbd>Fibonacci sequence</kbd>. In R, anything after the <kbd>#</kbd> key on the command line is not executed.</p>
<p>Now, let's create an object that contains these numbers of the sequence. You can assign any vector or list to an object. In most R code, you will see the assign symbol as <kbd>&lt;-</kbd>, which is read as gets. Here, we will create an object, <kbd>x</kbd>, of the Fibonacci sequence:</p>
<pre>
    <strong>&gt; x &lt;- c(0, 1, 1, 2, 3, 5, 8, 13, 21, 34)</strong>
</pre>
<p>To see the contents of the <kbd>x</kbd> object, just type it in the command prompt:</p>
<pre>
    <strong>&gt; x</strong><br/>    <strong> [1]  0  1  1  2  3  5  8 13 21 34</strong>
</pre>
<p>You can select subsets of a vector using brackets after an object. This will get you the first three observations of the sequence:</p>
<pre>
    <strong>&gt; x[1:3]</strong><br/>    <strong>[1] 0 1 1</strong>
</pre>
<p>One can use a negative sign in the bracketed numbers in order to exclude the observations:</p>
<pre>
    <strong>&gt; x[-5:-6]</strong><br/>    <strong>[1]  0  1  1  2  8 13 21 34</strong>
</pre>
<p>To visualize this sequence, we will utilize the <kbd>plot()</kbd> function:</p>
<pre>
    <strong>&gt; plot(x)</strong>
</pre>
<p>The output of the preceding command is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="243" width="314" class="image-border" src="assets/image_appx_09.png"/></div>
<p>Adding a title and axis labels to the plot is easy using <kbd>main=...</kbd>, <kbd>xlab=...</kbd>, and <kbd>ylab=...</kbd>:</p>
<pre>
    <strong>&gt; plot(x, main = "Fibonacci Sequence", xlab = "Order", ylab = "Value")</strong>
</pre>
<p>The output of the preceding command is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="248" width="320" class="image-border" src="assets/image_appx_10.png"/></div>
<p>We can transform a vector in R with a plethora of functions. Here, we will create a new object, <kbd>y</kbd>, that is the square root of <kbd>x</kbd>:</p>
<pre>
    <strong>&gt; y &lt;- sqrt(x)</strong><br/>    <br/>    <strong>&gt; y</strong><br/>    <strong>[1] 0.000000 1.000000 1.000000 1.414214 1.732051 2.236068  2.828427</strong><br/>    <strong>[8] 3.605551 4.582576 5.830952</strong>
</pre>
<p>It is important here to point out that, if you are unsure of what syntax can be used in a function, then using <kbd>?</kbd> in front of it will pull up help on the topic. Try this!</p>
<pre>
    <strong>&gt; ?sqrt</strong>
</pre>
<p>This opens up help for a function. With the creation of <kbd>x</kbd> and <kbd>y</kbd>, one can produce a scatter plot:</p>
<pre>
    <strong>&gt; plot(x, y)</strong>
</pre>
<p>The following is the output of the preceding command:</p>
<div class="CDPAlignCenter CDPAlign"><img height="265" width="342" class="image-border" src="assets/image_apx_11.png"/></div>
<p>Let's now look at creating another object that is a constant. Then, we will use this object as a scalar and multiply it by the <kbd>x</kbd> vector, creating a new vector called <kbd>x2</kbd>:</p>
<pre>
    <strong>&gt; z &lt;- 3</strong><br/>    <br/>    <strong>&gt; x2 &lt;- x * z</strong><br/>    <br/>    <strong>&gt; x2</strong><br/>    <strong> [1]   0   3   3   6   9  15  24  39  63 102</strong>
</pre>
<p>R allows you to perform logical tests. For example, let's test whether one value is less than another:</p>
<pre>
    <strong>&gt; 5 &lt; 6</strong><br/>    <strong>[1] TRUE</strong><br/>    <br/>    <strong>&gt; 6 &lt; 5</strong><br/>    <strong>[1] FALSE</strong>
</pre>
<p>In the first instance, R returned <kbd>TRUE</kbd> and in the second, <kbd>FALSE</kbd>. If you wanted to find out if a value is equal to another value, then you would use two equal signs (a test of equality). Remember, the equal symbol assigns a value and does not test for equality. Here is an example where we want to see if any of the values in the Fibonacci sequence that we created are equal to zero:</p>
<pre>
    <strong>&gt; x == 0</strong><br/>    <strong> [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</strong>
</pre>
<p>The output provides a list and we can clearly see that the first value of the <kbd>x</kbd> vector is indeed zero. In short, R's relational operators, &lt;=, &lt;, ==, &gt;, &gt;=, and !=, stand for less than or equal, less than, equal, greater than, greater than or equal, and not equal respectively.</p>
<p>A couple of functions that we should address are <kbd>rep()</kbd> and <kbd>seq()</kbd>, which are useful in creating your own vectors. For example, <kbd>rep(5, 3)</kbd> would replicate the value <kbd>5</kbd> three times. It also works with strings:</p>
<pre>
    <strong>&gt; rep("North Dakota Hockey, 2016 NCAA Division 1 Champions", times=3)<br/>    [1] "North Dakota Hockey, 2016 NCAA Division 1 Champions"<br/>    [2] "North Dakota Hockey, 2016 NCAA Division 1 Champions"<br/>    [3] "North Dakota Hockey, 2016 NCAA Division 1 Champions"</strong>
</pre>
<p>For a demonstration of <kbd>seq()</kbd>, let's say that we want to create a sequence of numbers from <kbd>0</kbd> to <kbd>10</kbd>, <kbd>by = 2</kbd>. Then the code would be as follows:</p>
<pre>
    <strong>&gt; seq(0, 10, by = 2)</strong><br/>    <strong>[1]  0  2  4  6  8 10</strong>
</pre>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Data frames and matrices</h1>
            </header>

            <article>
                
<p>We will now create a data frame, which is a collection of variables (vectors). We will create a vector of <kbd>1</kbd>, <kbd>2</kbd>, and <kbd>3</kbd> and another vector of <kbd>1</kbd>, <kbd>1.5</kbd>, and <kbd>2.0</kbd>. Once this is done, the <kbd>rbind()</kbd> function will allow us to combine the rows:</p>
<pre>
    <strong>&gt; p &lt;- seq(1:3)</strong><br/>    <br/>    <strong>&gt; p</strong><br/>    <strong>[1] 1 2 3</strong><br/>    <br/>    <strong>&gt; q = seq(1, 2, by = 0.5)</strong><br/>    <br/>    <strong>&gt; q</strong><br/>    <strong>[1] 1.0 1.5 2.0</strong><br/>    <br/>    <strong>&gt; r &lt;- rbind(p, q)</strong><br/>    <br/>    <strong>&gt; r</strong><br/>    <strong>  [,1] [,2] [,3]</strong><br/>    <strong>p    1  2.0    3</strong><br/>    <strong>q    1  1.5    2</strong>
</pre>
<p>The result is a list of two rows with three values each. You can always determine the structure of your data using the <kbd>str()</kbd> function, which in this case shows us that we have two lists, one named <kbd>p</kbd> and the other named <kbd>q</kbd>:</p>
<pre>
    <strong>&gt; str(r)</strong><br/>    <strong> num [1:2, 1:3] 1 1 2 1.5 3 2</strong><br/>    <strong> - attr(*, "dimnames")=List of 2</strong><br/>    <strong>  ..$ : chr [1:2] "p" "q"</strong><br/>    <strong>  ..$ : NULL</strong>
</pre>
<p>Now, let's put them together as columns using <kbd>cbind()</kbd>:</p>
<pre>
    <strong>&gt; s &lt;- cbind(p, q)</strong><br/>    <br/>    <strong>&gt; s</strong><br/>    <strong>     p   q</strong><br/>    <strong>[1,] 1 1.0</strong><br/>    <strong>[2,] 2 1.5</strong><br/>    <strong>[3,] 3 2.0</strong>
</pre>
<p>To put this in a data frame, use the <kbd>data.frame()</kbd> function. After that, examine the structure:</p>
<pre>
    <strong>&gt; s &lt;- data.frame(s)</strong><br/>    <br/>    <strong>&gt; str(s)</strong><br/>    <strong>'data.frame':3 obs. of  2 variables:</strong><br/>    <strong> $ p: num  1 2 3</strong><br/>    <strong> $ q: num  1 1.5 2</strong>
</pre>
<p>We now have a data frame, <kbd>(s)</kbd>, that has two variables of three observations each. We can change the names of the variables using <kbd>names()</kbd>:</p>
<pre>
    <strong>&gt; names(s) &lt;- c("column 1", "column 2")</strong><br/>    <br/>    <strong>&gt; s</strong><br/>    <strong>  column 1 column 2</strong><br/>    <strong>1        1      1.0</strong><br/>    <strong>2        2      1.5</strong><br/>    <strong>3        3      2.0</strong>
</pre>
<p>Let's have a go at putting this into a matrix format with <kbd>as.matrix()</kbd>. In some packages, R will require the analysis to be done on a data frame, but in others it will require a matrix. You can switch back and forth between a data frame and matrix as you require:</p>
<pre>
    <strong>&gt; t &lt;- as.matrix(s)</strong><br/>    <br/>    <strong>&gt; t</strong><br/>    <strong>     column 1 column 2</strong><br/>    <strong>[1,]        1      1.0</strong><br/>    <strong>[2,]        2      1.5</strong><br/>    <strong>[3,]        3      2.0</strong>
</pre>
<p>One of the things that you can do is check whether a specific value is in a matrix or data frame. For instance, we want to know the value of the first observation and first variable. In this case, we will need to specify the first row and the first column in brackets as follows:</p>
<pre>
    <strong>&gt; t[1,1]</strong><br/>    <strong>column 1 </strong><br/>    <strong>       1</strong>
</pre>
<p>Let's assume that you want to see all the values in the second variable (column). Then, just leave the row blank but remember to use a comma before the column(s) that you want to see:</p>
<pre>
    <strong>&gt; t[,2]</strong><br/>    <strong>[1] 1.0 1.5 2.0</strong>
</pre>
<p>Conversely, let's say we want to look at the first two rows only. In this case, just use a colon symbol:</p>
<pre>
    <strong>&gt; t[1:2,]</strong><br/>    <strong>     column 1 column 2</strong><br/>    <strong>[1,]        1      1.0</strong><br/>    <strong>[2,]        2      1.5</strong>
</pre>
<p>Assume that you have a data frame or matrix with 100 observations and ten variables and you want to create a subset of the first <kbd>70</kbd> observations and variables <kbd>1</kbd>, <kbd>3</kbd>, <kbd>7</kbd>, <kbd>8</kbd>, <kbd>9</kbd>, and <kbd>10</kbd>. What would this look like?</p>
<p>Well, using the colon, comma, concatenate function, and brackets, you could simply do the following:</p>
<pre>
    <strong>&gt; new &lt;- old[1:70, c(1,3,7:10)]</strong>
</pre>
<p>Notice how you can easily manipulate what observations and variables you want to include. You can also easily exclude variables. Say that we just want to exclude the first variable; then you could do the following using a negative sign for the first variable:</p>
<pre>
    <strong>&gt; new &lt;- old[, -1]</strong>
</pre>
<p>This syntax is very powerful in R for the fundamental manipulation of data. In the main chapters, we will also bring in more advanced data manipulation techniques.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Creating summary statistics</h1>
            </header>

            <article>
                
<p>We will now cover some basic measures of a central tendency, dispersion, and simple plots. The first question that we will address is How does R handle missing values in calculations? To see what happens, create a vector with a missing value (<kbd>NA</kbd> in the R language), then sum the values of the vector with <kbd>sum()</kbd>:</p>
<pre>
    <strong>&gt; a &lt;- c(1, 2, 3, NA)</strong><br/>    <br/>    <strong>&gt; sum(a)</strong><br/>    <strong>[1] NA</strong>
</pre>
<p>Unlike SAS, which would sum the non-missing values, R does not sum the non-missing values, but simply returns <kbd>NA</kbd>, indicating that at least one value is missing. Now, we could create a new vector with the missing value deleted but you can also include the syntax to exclude any missing values with <kbd>na.rm = TRUE</kbd>:</p>
<pre>
    <strong>&gt; sum(a, na.rm = TRUE)</strong><br/>    <strong>[1] 6</strong>
</pre>
<p>Functions exist to identify measures of the central tendency and dispersion of a vector:</p>
<pre>
    <strong>&gt; data &lt;- c(4, 3, 2, 5.5, 7.8, 9, 14, 20)</strong><br/>    <br/>    <strong>&gt; mean(data)</strong><br/>    <strong>[1] 8.1625</strong><br/>    <br/>    <strong>&gt; median(data)</strong><br/>    <strong>[1] 6.65</strong><br/>    <br/>    <strong>&gt; sd(data)</strong><br/>    <strong>[1] 6.142112</strong><br/>    <br/>    <strong>&gt; max(data)</strong><br/>    <strong>[1] 20</strong><br/>    <br/>    <strong>&gt; min(data)</strong><br/>    <strong>[1] 2</strong><br/>    <br/>    <strong>&gt; range(data)</strong><br/>    <strong>[1]  2 20</strong><br/>    <br/>    <strong>&gt; quantile(data)</strong><br/>    <strong>   0%   25%   50%   75%  100% </strong><br/>    <strong> 2.00  3.75  6.65 10.25 20.00 </strong>
</pre>
<p>A <kbd>summary()</kbd> function is available that includes the <kbd>mean</kbd>, <kbd>median</kbd>, and <kbd>quartile</kbd> values:</p>
<pre>
    <strong>&gt; summary(data)</strong><br/>    <strong>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </strong><br/>    <strong>  2.000   3.750   6.650   8.162  10.250  20.000</strong>
</pre>
<p>We can use plots to visualize the data. The base plot here will be <kbd>barplot</kbd>, then we will use <kbd>abline()</kbd> to include the <kbd>mean</kbd> and <kbd>median</kbd>. As the default line is solid, we will create a dotted line for <kbd>median</kbd> with <kbd>lty = 2</kbd> to distinguish it from <kbd>mean</kbd>:</p>
<pre>
    <strong>&gt; barplot(data)</strong><br/>    <br/>    <strong>&gt; abline(h = mean(data))</strong><br/>    <br/>    <strong>&gt; abline(h = median(data), lty = 2)</strong>
</pre>
<p>The output of the preceding command is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="223" width="288" class="image-border" src="assets/image_appx_12.png"/></div>
<p>A number of functions are available to generate different data distributions. Here, we can look at one such function for a normal distribution with a mean of zero and a standard deviation of 1, using <kbd>rnorm()</kbd> to create <kbd>100</kbd> data points. We will then plot the values and also plot a histogram. Additionally, to duplicate the results, ensure that you use the same random seed with <kbd>set.seed()</kbd>:</p>
<pre>
    <strong>&gt; set.seed(1)</strong><br/>    <br/>    <strong>&gt; norm = rnorm(100)</strong>
</pre>
<p>This is the plot of the <kbd>100</kbd> data points:</p>
<pre>
    <strong>&gt; plot(norm)</strong>
</pre>
<p>The output of the preceding command is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="236" width="304" class="image-border" src="assets/image_appx_13.png"/></div>
<p>Finally, produce a histogram with <kbd>hist(norm)</kbd>:</p>
<pre>
    <strong>&gt; hist(norm)</strong>
</pre>
<p>The following is the output of the preceding command:</p>
<div class="CDPAlignCenter CDPAlign"><img height="241" width="311" class="image-border" src="assets/image_appx_14.png"/></div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Installing and loading R packages</h1>
            </header>

            <article>
                
<p>We discussed earlier how to install an R package using the <kbd>install()</kbd> function. To use an installed package, you also need to load it to be able to use it. Let's go through this again, first with the installation in RStudio and then loading the package. Look for and click the <span class="packt_screen">Packages</span> tab. You should see something similar to this:</p>
<div class="CDPAlignCenter CDPAlign"><img height="269" width="382" class="image-border" src="assets/image_appx_15.png"/></div>
<p>Now, let's install the R package, <kbd>xgboost</kbd>. Click on the <span class="packt_screen">Install</span> icon and type the package name in the <span class="packt_screen">Packages</span> section of the popup:</p>
<div class="CDPAlignCenter CDPAlign"><img height="208" width="277" class="image-border" src="assets/image_appx_16.png"/></div>
<p>Click the <span class="packt_screen">Install</span> button. Once the package has been fully installed, the command prompt will return. To load the package in order to be able to use it, only the <kbd>library()</kbd> function is required:</p>
<pre>
    <strong>&gt; library(xgboost)</strong>
</pre>
<p>With this, you are now able to use the functions built into the package.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Data manipulation with dplyr</h1>
            </header>

            <article>
                
<p>Over the past couple of years I have been using <kbd>dplyr</kbd> more and more to manipulate and summarize data. It is faster than using the base functions, allows you to chain functions, and once you are familiar with it has a more user-friendly syntax. In my experience, just a few functions can accomplish the majority of your data manipulation needs. Install the package as described above, then load it into the R environment.</p>
<pre>
<strong>    &gt; library(dplyr)</strong>
</pre>
<p>Let's explore the <kbd>iris</kbd> dataset available in base R. Two of the most useful functions are <kbd>summarize()</kbd> and <kbd>group_by()</kbd>. In the code that follows, we see how to produce a table of the mean of <kbd>Sepal.Length</kbd> grouped by the <kbd>Species</kbd>. The variable we put the mean in will be called <kbd>average</kbd>.</p>
<pre>
<strong>    &gt; summarize(group_by(iris, Species), average = mean(Sepal.Length))</strong><br/><strong>      # A tibble: 3 X 2</strong><br/><strong>         Species average</strong><br/><strong>          &lt;fctr&gt;   &lt;dbl&gt;</strong><br/><strong>    1     setosa   5.006</strong><br/><strong>    2 versicolor   5.936</strong><br/><strong>    3  virginica   6.588</strong>
</pre>
<p>There are a number of summary functions: <kbd>n</kbd> (number), <kbd>n_distinct</kbd> (number of distinct), <kbd>IQR</kbd> (interquantile range), <kbd>min</kbd> (minimum), <kbd>max</kbd> (maximum), <kbd>mean</kbd> (mean), and <kbd>median</kbd> (median).</p>
<p>Another thing that helps you and others read the code is the pipe operator <kbd>%&gt;%</kbd>.  With the pipe operator, you chain your functions together instead of having to wrap them inside each other. You start with the dataframe you want to use, then chain the functions together where the first function values/arguments are passed to the next function and so on. This is how to use the pipe operator to produce the results as we got before.</p>
<pre>
<strong>    &gt; iris %&gt;% group_by(Species) %&gt;% summarize(average = <br/>      mean(Sepal.Length))</strong><br/><strong>      # A tibble: 3 X 2</strong><br/><strong>         Species average</strong><br/><strong>          &lt;fctr&gt;   &lt;dbl&gt;</strong><br/><strong>    1     setosa   5.006</strong><br/><strong>    2 versicolor   5.936</strong><br/><strong>    3  virginica   6.588</strong>
</pre>
<p>The <kbd>distinct()</kbd> function allows us to see what are the unique values in a variable. Let's see what different values are present in <kbd>Species</kbd>.</p>
<pre>
<strong>    &gt; distinct(iris, Species)</strong><br/><strong>         Species</strong><br/><strong>    1     setosa</strong><br/><strong>    2 versicolor</strong><br/><strong>    3  virginica</strong>
</pre>
<p>Using the <kbd>count()</kbd> function will automatically do a count for each level of the variable.</p>
<pre>
<strong>    &gt; count(iris, Species)</strong><br/><strong>      # A tibble: 3 X 2</strong><br/><strong>         Species     n</strong><br/><strong>          &lt;fctr&gt; &lt;int&gt;</strong><br/><strong>    1     setosa    50</strong><br/><strong>    2 versicolor    50</strong><br/><strong>    3  virginica    50</strong>
</pre>
<p>What about selecting certain rows based on a matching condition? For that we have <kbd>filter().</kbd> Let's select all rows where Sepal.Width is greater than 3.5 and put them in a new dataframe:</p>
<pre>
<strong>    &gt; df &lt;- filter(iris, Sepal.Width &gt; 3.5)</strong>
</pre>
<p>Let's look at this dataframe, but first we want to arrange the values by <kbd>Petal.Length</kbd> in descending order:</p>
<pre>
<strong>    &gt; df &lt;- arrange(iris, desc(Petal.Length))</strong><br/><strong><br/>    &gt; head(df)</strong><br/><strong>      Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</strong><br/><strong>    1          7.7         2.6          6.9         2.3 virginica</strong><br/><strong>    2          7.7         3.8          6.7         2.2 virginica</strong><br/><strong>    3          7.7         2.8          6.7         2.0 virginica</strong><br/><strong>    4          7.6         3.0          6.6         2.1 virginica</strong><br/><strong>    5          7.9         3.8          6.4         2.0 virginica</strong><br/><strong>    6          7.3         2.9          6.3         1.8 virginica</strong>
</pre>
<p>OK, we now want to select variables of interest. This is done with the <kbd>select()</kbd> function. Next, we are going to create two dataframes, one with the columns starting with <kbd>Sepal</kbd> and another with the <kbd>Petal</kbd> columns and the <kbd>Species</kbd> column--in other words, column names NOT starting with <kbd>Se</kbd>. This can be done by using those specific names in the function; alternatively, as follows, use the <kbd>starts_with</kbd> syntax:</p>
<pre>
<strong>    &gt; iris2 &lt;- select(iris, starts_with("Se"))<br/><br/>    &gt; iris3 &lt;- select(iris, -starts_with("Se"))<br/></strong>
</pre>
<p>OK, let's bring them back together. Remember <kbd>cbind()</kbd> earlier? With <kbd>dplyr</kbd> you can use the <kbd>bind_cols()</kbd> function, which will put it into a dataframe. Be advised that like <kbd>cbind()</kbd> it will match rows by position. If you have rownames or some other key, such as customer ID and so on, you can join the data using functions such as <kbd>left_join()</kbd> and <kbd>inner_join()</kbd>. Since our rows match, this command will work just fine.</p>
<pre>
<strong>    &gt; theIris &lt;- bind_cols(iris2, iris3)<br/>      head(theIris)<br/>      head(iris)<br/></strong>
</pre>
<p>On your own, use the <kbd>head()</kbd> function to compare the first six rows of the <kbd>iris</kbd> and <kbd>iris</kbd> and you will see they are an exact match. If you want to concatenate your data like we did above with <kbd>rbind()</kbd>, the <kbd>bind_rows()</kbd> function is available.  What if we want to see how many unique Sepal.Width measurements there are? Recall that there are a total of 150 observations in the data set. We've already used <kbd>distinct()</kbd> and <kbd>count()</kbd>. This code will give you just the number of distinct values, which is <kbd>23:</kbd></p>
<pre>
<strong>    &gt; summarize(iris, n_distinct(Sepal.Width))</strong><br/><strong>      n_distinct(Sepal.Width)</strong><br/><strong>    1                     23</strong>
</pre>
<p>It seems in almost any large amount of data there are duplicate observations, or they are created with complex joins. To <kbd>dedupe</kbd> with <kbd>dplyr</kbd> is quite simple. For instance, let's assume we want to create a dataframe of just the unique values of <kbd>Sepal.Width</kbd>, and want to keep all of the columns. This will do the trick:</p>
<pre>
<strong>    &gt; dedupe &lt;- iris %&gt;% distinct(Sepal.Width, .keep_all = T)</strong><br/><strong><br/>    &gt; str(dedupe)</strong><br/><strong>    'data.frame': 23 obs. of 5 variables:</strong><br/><strong>     $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 4.4 5.4 5.8 ...</strong><br/><strong>     $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 2.9 3.7 4 ...</strong><br/><strong>     $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.4 1.5 1.2 ...</strong><br/><strong>     $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.2 ...</strong><br/><strong>     $ Species : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 <br/>     1 1 1 1 1</strong>
</pre>
<p>Notice that I used the pipe operator to chain <kbd>iris</kbd> to the function and within <kbd>distinct()</kbd> I specified <kbd>.keep_all = T</kbd> so that all columns are in the new dataframe; otherwise only <kbd>Sepal.Width</kbd> would have entered.</p>
<p>There you have it. If you want to become more efficient at data-munging in R, give <kbd>dplyr</kbd> a try.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Summary</h1>
            </header>

            <article>
                
<p>The purpose of this appendix was to allow R novices to learn the basics of the programming language and prepare them for the code in the book. This consisted of learning how to install R and RStudio and creating objects, vectors, and matrices. Then, we explored some of the mathematical and statistical functions. We covered how to install and load a package in R using RStudio. Finally, we explored the power of <kbd>dplyr</kbd> to efficiently manipulate and summarize data. Throughout the appendix, the plot syntax for the base and examples are included. While this appendix will not make you an expert in R, it will get you up to speed to follow along with the examples in the book.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </body></html>