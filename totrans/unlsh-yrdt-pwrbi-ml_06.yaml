- en: '6'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '6'
- en: Discovering New Features Using R and Python Visuals
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 R 和 Python 可视化发现新特征
- en: In [*Chapter 5*](B19500_05.xhtml#_idTextAnchor077) of this book, you discovered
    new columns and features for your queries using Power BI Desktop that will be
    migrated to the Power BI cloud service to train and test ML models. During your
    exploration and discovery of the data you also expanded the Power BI report that
    you will deliver to end users for interactive data exploration.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的[*第 5 章*](B19500_05.xhtml#_idTextAnchor077)中，你使用 Power BI Desktop 为你的查询发现了新的列和特征，这些特征将被迁移到
    Power BI 云服务以训练和测试机器学习模型。在探索和发现数据的过程中，你还扩展了将用于向最终用户提供交互式数据探索的 Power BI 报告。
- en: Before migrating your solution to the Power BI cloud service, you will take
    one last pass over the FAA Wildlife Strike data and seek out additional features
    to be added to the ML queries that will be used to build the Power BI ML models.
    In order to add some diverse capabilities to the analytic report, you’ll leverage
    R/Python visuals within Power BI. At the end of this chapter, you will be ready
    to publish your solution to the Power BI cloud service.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在将你的解决方案迁移到 Power BI 云服务之前，你将对 FAA 野生动物撞击数据进行最后一次检查，并寻找要添加到用于构建 Power BI 机器学习模型的机器学习查询中的额外特征。为了向分析报告添加一些多样化的功能，你将在
    Power BI 中利用 R/Python 可视化。在本章结束时，你将准备好将你的解决方案发布到 Power BI 云服务。
- en: Technical requirements
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'For this chapter, you’ll need the following resources:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章，你需要以下资源：
- en: Power BI Desktop April 2023 or later (no licenses required)
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Power BI Desktop 2023 年 4 月或更高版本（无需许可证）
- en: FAA Wildlife Strike data files from either the FAA website or the Packt GitHub
    repo
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 FAA 网站或 Packt GitHub 仓库的 FAA 野生动物撞击数据文件
- en: 'R installed on your local computer: [https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals](https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的本地计算机上安装 R：[https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals](https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals)
- en: 'Python installed on your local computer: [https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals](https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的本地计算机上安装 Python：[https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals](https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals)
- en: Exploring data with R visuals
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 R 可视化探索数据
- en: Power BI has the capability to run R scripts and display R visuals. R is a powerful
    language that is often used by data scientists for statistics and ML. You will
    need to install R on your local machine to use it with Power BI Desktop per the
    instructions at [https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals](https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Power BI 具有运行 R 脚本并显示 R 可视化的功能。R 是一种强大的语言，通常被数据科学家用于统计和机器学习。你将需要按照[https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals](https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals)中的说明在你的本地计算机上安装
    R，以便与 Power BI Desktop 一起使用。
- en: There are numerous R visualizations that can be useful for data analysis and
    finding new features for ML models. The FAA Wildlife Strike data contains several
    True/False flags related to the portions of the aircraft struck, the location
    of damage, the ingestion of animals into the engines, and more. These values should
    fit nicely on an R correlation plot, which will graphically show flags that tend
    to correlate either positively or negatively. Let’s give it a shot!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多 R 可视化可以用于数据分析以及为机器学习模型寻找新的特征。FAA 野生动物撞击数据包含与飞机被击中的部分、损坏位置、动物被吸入发动机等相关的一些真/假标志。这些值应该非常适合
    R 相关性图，它将以图形方式显示倾向于正相关或负相关的标志。让我们试试吧！
- en: 'You will follow three steps to find new features:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 你将遵循三个步骤来寻找新的特征：
- en: Prep are the data for the R correlation plot.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备数据以用于 R 相关性图。
- en: Build the R correlation plot visualization and add it to your report.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建 R 相关性图可视化并将其添加到你的报告中。
- en: Identify new features for your Power BI ML queries.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为你的 Power BI 机器学习查询识别新的特征。
- en: 'Note that if you don’t want to build all of these Power BI report pages as
    part of your journey through this book, the completed PBIT template for [*Chapter
    6*](B19500_06.xhtml#_idTextAnchor089) (including the R and Python components)
    is available at this link: [https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-06](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-06).'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: Preparing the data for the R correlation plot
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Converting the True/False columns to an integer column where `1` represents
    True and `0` represents False is necessary to prepare the data for the R correlation
    plot. Let’s identify the columns that will be used on the **Strike Reports** query
    of the **Curated Reporting** **Queries** group:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: '| Ingested Other | Indicated Damage | Struck Random | Damaged Random |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
- en: '| Struck Windshield | Damaged Windshield | Struck Nose | Damaged Nose |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
- en: '| Struck Engine 1 | Damaged Engine 1 | Ingested Engine 1 | Struck Engine 2
    |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
- en: '| Damaged Engine 2 | Ingested Engine 2 | Struck Engine 3 | Damaged Engine 3
    |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
- en: '| Ingested Engine 3 | Struck Engine 4 | Damaged Engine 4 | Ingested Engine
    4 |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
- en: '| Struck Propeller | Damaged Propeller | Struck Wing or Rotor | Damaged Wing
    or Rotor |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
- en: '| Struck Fuselage | Damaged Fuselage | Struck Landing Gear | Damaged Landing
    Gear |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
- en: '| Struck Tail | Damaged Tail | Struck Lights | Damaged Lights |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
- en: '| Struck Other | Damaged Other |  |  |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
- en: Figure 6.1 – True/False columns related to wildlife strikes
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: 'If you were to change the data type of a column, and the column was being used
    in Power BI, you could potentially break a report or a DAX expression. Generally,
    it is a best practice to avoid changing data types unless absolutely necessary.
    Report users will also generally better understand the options of True or False
    rather than 1 or 0 in a report. Go ahead and create a new version of each column
    that is of an integer data type. Further down the road, you can decide which version
    to include in each dataset or ML query depending on the use case. Perform the
    following steps for the columns in *Figure 6**.1*:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: In the **Curated Reporting Queries** group, duplicate all of these columns.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Rename the new column to have `Int` at the end such that **Indicated Damage
    – Copy** becomes **Indicated** **Damage Int**.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Change the data types of the new columns to `Whole Number`.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Close & Apply** in Power Query to update the Power BI dataset.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: These flags are primarily related to damage and location of impact, but could
    also be useful for predicting the height and size of the animals. For example,
    the landing gear will probably not be struck above a certain height because it
    is only down for takeoffs and landings. If multiple parts of a plane are struck,
    it may correlate with a flock of birds versus a lone animal.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: Now you can return to the Power BI report and build the R correlation plot visual!
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: Building the R correlation plot visualization and adding it to your report
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The integer versions of the True/False columns in the FAA Wildlife Strike data
    should now be available in your Power BI dataset. Also, per the technical requirements
    covered earlier in this chapter, you should have R installed on the local machine
    on which you’re running Power BI Desktop:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Select the R script visual in Power BI Desktop, and add it to the canvas of
    a new page.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the filters on the page to match `Airplane` and `greater than or equal to
    2014`. Add the integer **Indicated Damage Int** column to **Values**.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 6.2 – R script visual in Power BI](img/B19500_06_002.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
- en: Figure 6.2 – R script visual in Power BI
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: 'While the R visual is highlighted, a scripting window will be shown at the
    bottom of the page. Add some R code to activate the R correlation plot:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 6.3 – Add the R code for an R correlation plot](img/B19500_06_003.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
- en: Figure 6.3 – Add the R code for an R correlation plot
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is the code that was added to the visual:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Now add the new integer columns that you created to **Values**, along with
    the original field that was added:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 6.4 – R correlation plot with True/False integer columns](img/B19500_06_004.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
- en: Figure 6.4 – R correlation plot with True/False integer columns
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: The plot is expanded in Figure 6.5.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 6.5 – R correlation plot with True/False integer columns](img/B19500_06_005.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
- en: Figure 6.5 – R correlation plot with True/False integer columns
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: Text for the columns in *Figure 6**.5* are too small to read, but represent
    all of the TRUE/FALSE indicators converted to integer values. The PBIT file for
    [*Chapter 6*](B19500_06.xhtml#_idTextAnchor089) in the GitHub repository allows
    you to view these values.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 6.6 – Code for R correlation plot with True/False integer columns.](img/B19500_06_006.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
- en: Figure 6.6 – Code for R correlation plot with True/False integer columns.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: Now you can dive into the data using an R correlation plot!
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Identifying new features for your Power BI ML queries
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The R correlation plot displays circles that increase in size and color intensity
    to indicate positive and negative correlation levels. Blue indicates a positive
    correlation (where the values go up and down together), white indicates no correlation
    (values go up and down randomly related to each other), and red indicates a negative
    correlation (one value tends to go up when the other goes down).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: 'Looking at the initial rendering of the R correlation plot in *Figure 6**.5*,
    there are not a great deal of blue or red circles besides the self-matches and
    a few light blue circles for different related damage flags. Adding a few filters
    to the page allows you to explore correlations within subsets of the data. The
    R correlation plot will re-calculate every time you select new filters. For example,
    *Figure 6**.7* has the following filters selected on the dataset:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '`greater than or equal` `to 2014`'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Airplane`'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Large`'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`3`, `4` or `5`'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`blank`, `none`, or `other`'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`1` or `2-10`'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can see this in the following screenshot:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 6.7 – When filters are selected, the R correlation plot is re-processed.](img/B19500_06_007.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
- en: Figure 6.7 – When filters are selected, the R correlation plot is re-processed.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: The text in the columns in *Figure 6**.7* is too small to read, but represent
    all of the True/False indicators converted to integer values. The PBIT file for
    [*Chapter 6*](B19500_06.xhtml#_idTextAnchor089) in the GitHub repository allows
    you to view these values.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: 'After filtering down to a subset of data, correlations begin to emerge on the
    R correlation plot. Expand the visualization and focus on the **Indicated Damage
    Int** field correlations. The strongest correlations are for flags that also indicate
    some sort of damage. There are, however, some weaker positive correlations for
    other flags:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 6.8 – A few weak positive correlations shown for Indicated Damage](img/B19500_06_008.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
- en: Figure 6.8 – A few weak positive correlations shown for Indicated Damage
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: 'After exploring additional filter combinations with the R correlation plot,
    the following features will be added to the ML queries:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '| **Feature** | **Predict Damage** | **Predict Size** | **Predict Height**
    |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
- en: '| Ingested Other | Yes | Yes | Yes |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
- en: '| Struck Windshield | Yes | Yes | Yes |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
- en: '| Struck Engine 1 | Yes | Yes | Yes |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
- en: '| Damaged Engine 2 | No | Yes | Yes |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
- en: '| Ingested Engine 3 | Yes | Yes | Yes |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
- en: '| Struck Propeller | Yes | Yes | Yes |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
- en: '| Struck Fuselage | Yes | Yes | Yes |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
- en: '| Struck Tail | Yes | Yes | Yes |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
- en: '| Struck Other | Yes | Yes | Yes |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
- en: '| Damaged Windshield | No | Yes | Yes |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
- en: '| Damaged Engine 1 | No | Yes | Yes |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
- en: '| Ingested Engine 2 | Yes | Yes | Yes |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
- en: '| Struck Engine 4 | Yes | Yes | Yes |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
- en: '| Damaged Propeller | No | Yes | Yes |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
- en: '| Damaged Fuselage | No | Yes | Yes |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
- en: '| Damaged Tail | No | Yes | Yes |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
- en: '| Damaged Other | No | Yes | Yes |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
- en: '| Struck Random | Yes | Yes | Yes |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
- en: '| Struck Nose | Yes | Yes | Yes |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
- en: '| Ingested Engine 1 | Yes | Yes | Yes |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
- en: '| Struck Engine 3 | Yes | Yes | Yes |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
- en: '| Damaged Engine 4 | No | Yes | Yes |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
- en: '| Struck Wing or Rotor | Yes | Yes | Yes |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
- en: '| Struck Landing Gear | Yes | Yes | Yes |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
- en: '| Struck Lights | Yes | Yes | Yes |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
- en: '| Damaged Random | No | Yes | Yes |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
- en: '| Damaged Nose | No | Yes | Yes |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
- en: '| Struck Engine 2 | Yes | Yes | Yes |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
- en: '| Damaged Engine 3 | No | Yes | Yes |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
- en: '| Ingested Engine 4 | Yes | Yes | Yes |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
- en: '| Damaged Wing or Rotor | No | Yes | Yes |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
- en: '| Damaged Landing Gear | No | Yes | Yes |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
- en: '| Damaged Lights | No | Yes | Yes |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
- en: Figure 6.9 – Features will be added to the ML queries
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: You’ve discovered a great number of features for your ML queries, but you’re
    not done yet! You can also use Python visuals to explore data in Power BI, which
    is your next task.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: Exploring data with Python visuals
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In addition to R, Power BI also supports Python queries and visuals. Python
    is a very popular language that is also frequently used by data scientists. Per
    the requirements at the beginning of this chapter, you’ll need to install Python
    on your local machine for Power BI Desktop: [https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals](https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals).'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 除了R语言，Power BI还支持Python查询和可视化。Python是一种非常流行的语言，也是数据科学家经常使用的语言。根据本章开头的需求，你需要在本地机器上安装Python以用于Power
    BI桌面：[https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals](https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals)。
- en: In the FAA Wildlife Strike data, **Height** and **Speed** are both fields that
    can be recorded for reports. Height is a measure in feet from the ground at which
    an incident happened, while speed is a measure of the speed the aircraft was traveling
    when it was struck by wildlife. You will take a look at both of these metrics
    using Python histograms so that you can compare the distribution of those values
    when selecting different filters.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在FAA野生动物撞击数据中，**高度**和**速度**都是可以记录在报告中的字段。高度是事件发生时从地面测量的英尺数，而速度是飞机被野生动物撞击时的速度。你将使用Python直方图查看这两个指标，以便在应用不同过滤器时比较这些值的分布。
- en: 'You will follow these steps:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 你将遵循以下步骤：
- en: Preparing the data for the Python histogram.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备Python直方图的数据。
- en: Building the Python histogram visualization and add it to your report.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建Python直方图可视化并将其添加到报告中。
- en: Identifying new features for your Power BI ML queries.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 识别你的Power BI ML查询的新特征。
- en: Let’s proceed.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续。
- en: Preparing the data for the Python histogram
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备Python直方图的数据
- en: Both **Height** and **Speed** are integer columns that also contain empty values.
    Empty values with numeric columns of data can be tricky because you don’t know
    whether it is zero or unknown. For the report page, you filter out the empty values
    for each visualization. Otherwise, the integer columns are ready to go for your
    Python histogram data visualizations.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '**高度**和**速度**都是包含空值的整数列。对于数值列中的空值，可能会有些棘手，因为你不知道它是零还是未知。对于报告页面，你需要为每个可视化过滤掉空值。否则，整数列就准备好用于你的Python直方图数据可视化了。'
- en: Building the Python histogram visualization and add it to your report
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建Python直方图可视化并将其添加到报告中
- en: 'Next, we need to build the visualization:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要构建可视化：
- en: Select the Python script visual in Power BI Desktop, and add it to the canvas
    of a new page.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Power BI桌面中，选择Python脚本可视化，并将其添加到新页面的画布上。
- en: 'Set the filters on the page to match `Airplane` and `greater than or equal
    to 2014`. Add the integer **Speed** column to **Values**:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在页面上设置过滤器以匹配`Airplane`和`大于或等于2014`。将整数**速度**列添加到**值**：
- en: '![Figure 6.10 – Python visual with Speed under Values](img/B19500_06_010.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![图6.10 – 值下速度的Python可视化](img/B19500_06_010.jpg)'
- en: Figure 6.10 – Python visual with Speed under Values
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.10 – 值下速度的Python可视化
- en: 'While the Python visual is highlighted, a scripting window will be visible
    at the bottom of the page. Add some Python code to activate the Python histogram
    with a title of `Speed for Incidents` `with Damage`:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当Python可视化被突出显示时，页面的底部将出现一个脚本窗口。添加一些Python代码以激活标题为`Speed for Incidents` `with
    Damage`的Python直方图：
- en: '![Figure 6.11– Python code that renders a histogram in Power BI](img/B19500_06_011.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![图6.11– 在Power BI中渲染直方图的Python代码](img/B19500_06_011.jpg)'
- en: Figure 6.11– Python code that renders a histogram in Power BI
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.11– 在Power BI中渲染直方图的Python代码
- en: 'Here’s the code entered into the script editor as shown in *Figure 6**.11*:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是如图*图6.11*所示的脚本编辑器中输入的代码：
- en: '[PRE1]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'For the filters on this visual, set `True` and `is not (Blank)`. Now you can
    render the Python histogram visualization:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于这个可视化的过滤器，设置为`True`和`is not (Blank)`。现在你可以渲染Python直方图可视化：
- en: '![Figure 6.12 – A Python histogram for incidents with damage by speed](img/B19500_06_012.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图6.12 – 以速度为单位的损坏事件Python直方图](img/B19500_06_012.jpg)'
- en: Figure 6.12 – A Python histogram for incidents with damage by speed
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.12 – 以速度为单位的损坏事件Python直方图
- en: Now you can use the Python histogram visual to analyze the distribution of data!
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以使用Python直方图可视化来分析数据的分布了！
- en: Identifying new features for Power BI ML queries
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别Power BI ML查询的新特征
- en: 'Let’s look at the visual:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这个可视化：
- en: 'Copy and paste the visual, and rename the title to `Speed for Incidents without
    Damage`. Here’s the Python code, which can be entered in the same way as in *Figure
    6**.10*:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Change the `False`, and you can compare the two visuals:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 6.13 – Compare the speed of incidents with or without damage](img/B19500_06_013.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
- en: Figure 6.13 – Compare the speed of incidents with or without damage
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: Note that there are incidents without damage that are in the 1200 knots bucket,
    which skews the histogram further to the left.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: Filter the page for `less than 700` to create comparable histograms. Also add
    some filters to the page (anything you’d like to explore) such as **Size**, **Effect
    on Flight**, and **Month Name**.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, copy and paste both charts and replace `Speed` with `Height`. Filter
    the whole page such that `Height` is not blank. Here’s the Python code for the
    histogram of the heights when damage was reported:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'And here is the Python script for a histogram without damage:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'You can now interactively view the distribution of **Height** and **Speed**
    with many different filter settings:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 6.14 – Interactive\uFEFF Python histograms for Height and Speed](img/B19500_06_014.jpg)"
  id: totrans-166
  prefs: []
  type: TYPE_IMG
- en: Figure 6.14 – Interactive Python histograms for Height and Speed
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: Height and speed both appear to change when damage has been reported. As a result
    of your exploration using Python histograms, you will be adding both **Height**
    and **Speed** to the ML queries. Using R and Python visuals, you have verified
    numerous new features that can be used to train and test your ML models in Power
    BI.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: Adding new features to the ML queries
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'So far in this chapter, you have identified numerous new features to be added
    to the **Predict Damage**, **Predict Size**, and **Predict Height** ML queries
    for your Power BI ML models. As you did in section three of [*Chapter 5*](B19500_05.xhtml#_idTextAnchor077),
    *Adding New Features to the ML Queries in Power Query*, you can add these features
    to the ML queries in Power Query:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: Double-click on **Remove Other Columns** under **Applied Steps**.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add each of the features in *Figure 6**.9* (also include **Speed** and **Height**).
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Your screen should look like this while adding the features:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 6.15 – Select the columns to be added to the ML query](img/B19500_06_015.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
- en: Figure 6.15 – Select the columns to be added to the ML query
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: After adding the new features, you may note that `empty`. For example, with
    **Speed**, the impact of a collision at 5 knots versus 500 knots should be expected
    to be very different when hitting a large animal. Empty values could represent
    many different scenarios such as missing data or unknown speed. You will evaluate
    a few different options for handling these missing values when you build and test
    the ML models in Power BI.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: Future iterations of your solution may very well contain additional features
    that you discover. For now, you have numerous features that you have identified
    and added to queries that are architected for ML, and you are ready to journey
    forward into the Power BI cloud services!
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 你解决方案的未来迭代可能非常可能包含你发现的额外功能。目前，你已经识别并添加了许多功能到为机器学习（ML）架构的查询中，你现在准备好进入 Power BI
    云服务之旅了！
- en: Summary
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you added R and Python visuals to your Power BI reports to
    discover new features in the FAA Wildlife Strike data. Using an R correlation
    plot, you were able to interactively slice and dice several incident flag values
    for positive and negative correlations. With Python histograms you took a look
    at the impact of speed and height on the outcomes for your planned Power BI ML
    models. Finally, you added new features to your **Predict Damage**, **Predict
    Size**, and **Predict Height** ML queries that will be used for ML in Power BI.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将 R 和 Python 可视化添加到你的 Power BI 报告中，以发现 FAA 野生动物撞击数据中的新功能。使用 R 相关性图，你能够交互式地切割和剖析几个事件标志值以确定正负相关性。通过
    Python 直方图，你研究了速度和高度对你计划中的 Power BI ML 模型的结果的影响。最后，你向你的**预测损害**、**预测大小**和**预测高度**ML
    查询中添加了新功能，这些功能将在 Power BI 中的 ML 中使用。
- en: In the next chapter, you will begin migrating content to the Power BI cloud
    service. After migrating the Power BI dataset and report, you will then migrate
    the Power Query scripts to dataflows for use with Power BI ML.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将开始将内容迁移到 Power BI 云服务。在迁移 Power BI 数据集和报告之后，你将接着迁移 Power Query 脚本到数据流中，以便与
    Power BI ML 一起使用。
