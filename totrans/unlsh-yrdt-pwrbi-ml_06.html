<html><head></head><body>
		<div id="_idContainer108">
			<h1 id="_idParaDest-85" class="chapter-number"><a id="_idTextAnchor089"/>6</h1>
			<h1 id="_idParaDest-86"><a id="_idTextAnchor090"/>Discovering New Features Using R and Python Visuals</h1>
			<p>In <a href="B19500_05.xhtml#_idTextAnchor077"><span class="No-Break"><em class="italic">Chapter 5</em></span></a> of this book, you discovered new columns and features for your queries using Power BI Desktop that will be migrated to the Power BI cloud service to train and test ML models. During your exploration and discovery of the data you also expanded the Power BI report that you will deliver to end users for interactive <span class="No-Break">data exploration.</span></p>
			<p>Before migrating your solution to the Power BI cloud service, you will take one last pass over the FAA Wildlife Strike data and seek out additional features to be added to the ML queries that will be used to build the Power BI ML models. In order to add some diverse capabilities to the analytic report, you’ll leverage R/Python visuals within Power BI. At the end of this chapter, you will be ready to publish your solution to the Power BI <span class="No-Break">cloud service.</span></p>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor091"/>Technical requirements</h1>
			<p>For this chapter, you’ll need the <span class="No-Break">following resources:</span></p>
			<ul>
				<li>Power BI Desktop April 2023 or later (no <span class="No-Break">licenses required)</span></li>
				<li>FAA Wildlife Strike data files from either the FAA website or the Packt <span class="No-Break">GitHub repo</span></li>
				<li>R installed on your local <span class="No-Break">computer: </span><a href="https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals"><span class="No-Break">https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals</span></a></li>
				<li>Python installed on your local <span class="No-Break">computer: </span><a href="https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals"><span class="No-Break">https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals</span></a></li>
			</ul>
			<h1 id="_idParaDest-88"><a id="_idTextAnchor092"/>Exploring data with R visuals</h1>
			<p>Power BI has the<a id="_idIndexMarker308"/> capability to run R scripts and display R visuals. R is a powerful language that is often used by data scientists for statistics and ML. You will need to install R on your local machine to use it with Power BI Desktop per the instructions <span class="No-Break">at </span><a href="https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals"><span class="No-Break">https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-r-visuals</span></a><span class="No-Break">.</span></p>
			<p>There are numerous R visualizations that <a id="_idIndexMarker309"/>can be useful for data analysis and finding new features for ML models. The FAA Wildlife Strike data contains several True/False flags related to the portions of the aircraft struck, the location of damage, the ingestion of animals into the engines, and more. These values should fit nicely on an R correlation plot, which will graphically show flags that tend to correlate either positively or negatively. Let’s give it <span class="No-Break">a shot!</span></p>
			<p>You will follow three steps to find <span class="No-Break">new features:</span></p>
			<ol>
				<li>Prep are the data for the R <span class="No-Break">correlation plot.</span></li>
				<li>Build the R correlation plot visualization and add it to <span class="No-Break">your report.</span></li>
				<li>Identify new features for your Power BI <span class="No-Break">ML queries.</span></li>
			</ol>
			<p>Note that if you don’t want to build all of these Power BI report pages as part of your journey through this book, the completed PBIT template for <a href="B19500_06.xhtml#_idTextAnchor089"><span class="No-Break"><em class="italic">Chapter 6</em></span></a> (including the R and Python components) is available at this <span class="No-Break">link: </span><a href="https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-06"><span class="No-Break">https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-06</span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-89"><a id="_idTextAnchor093"/>Preparing the data for the R correlation plot</h2>
			<p>Converting the True/False columns to<a id="_idIndexMarker310"/> an integer column where <strong class="source-inline">1</strong> represents True and <strong class="source-inline">0</strong> represents False is necessary to prepare the data for the R correlation plot. Let’s identify the columns that will be used on the <strong class="bold">Strike Reports</strong> query of the <strong class="bold">Curated Reporting </strong><span class="No-Break"><strong class="bold">Queries</strong></span><span class="No-Break"> group:</span></p>
			<table id="table001-6" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Ingested Other</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Indicated Damage</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Random</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Random</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Windshield</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Windshield</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Nose</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Nose</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 2</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 2</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 2</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 3</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 3</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 3</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 4</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 4</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 4</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Propeller</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Propeller</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Struck Wing <span class="No-Break">or Rotor</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Damaged Wing <span class="No-Break">or Rotor</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Fuselage</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Fuselage</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Landing Gear</span></p>
						</td>
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Landing Gear</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Tail</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Tail</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Lights</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Lights</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Other</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Other</span></p>
						</td>
						<td class="No-Table-Style"/>
						<td class="No-Table-Style"/>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.1 – True/False columns related to wildlife strikes</p>
			<p>If you were to change the data type of a column, and the column was being used in Power BI, you could potentially break a report or a DAX expression. Generally, it is a best practice to avoid changing <a id="_idIndexMarker311"/>data types unless absolutely necessary. Report users will also generally better understand the options of True or False rather than 1 or 0 in a report. Go ahead and create a new version of each column that is of an integer data type. Further down the road, you can decide which version to include in each dataset or ML query depending on the use case. Perform the following steps for the columns in <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.1</em></span><span class="No-Break">:</span></p>
			<ol>
				<li>In the <strong class="bold">Curated Reporting Queries</strong> group, duplicate all of <span class="No-Break">these columns.</span></li>
				<li>Rename the new column to have <strong class="source-inline">Int</strong> at the end such that <strong class="bold">Indicated Damage – Copy </strong>becomes <strong class="bold">Indicated </strong><span class="No-Break"><strong class="bold">Damage Int</strong></span><span class="No-Break">.</span></li>
				<li>Change the data types of the new columns to <span class="No-Break"><strong class="source-inline">Whole Number</strong></span><span class="No-Break">.</span></li>
				<li>Click<strong class="bold"> Close &amp; Apply</strong> in Power Query to update the Power <span class="No-Break">BI dataset.</span></li>
			</ol>
			<p>These flags are primarily related to damage and location of impact, but could also be useful for predicting the height and size of the animals. For example, the landing gear will probably not be struck above a certain height because it is only down for takeoffs and landings. If multiple<a id="_idIndexMarker312"/> parts of a plane are struck, it may correlate with a flock of birds versus a <span class="No-Break">lone animal.</span></p>
			<p>Now you can return to the Power BI report and build the R correlation <span class="No-Break">plot visual!</span></p>
			<h2 id="_idParaDest-90"><a id="_idTextAnchor094"/>Building the R correlation plot visualization and adding it to your report</h2>
			<p>The integer versions of the True/False<a id="_idIndexMarker313"/> columns in the FAA Wildlife Strike data should now be available in your Power BI dataset. Also, per<a id="_idIndexMarker314"/> the technical requirements covered earlier in this chapter, you should have R installed on the local machine on which you’re running Power <span class="No-Break">BI Desktop:</span></p>
			<ol>
				<li>Select the R script visual in Power BI Desktop, and add it to the canvas of a <span class="No-Break">new page.</span></li>
				<li>Set the filters on the page to match <strong class="bold">Predict Damage</strong> with<strong class="bold"> Aircraft Type </strong>filtered to <strong class="source-inline">Airplane</strong> and <strong class="bold">Year</strong> filtered to be <strong class="source-inline">greater than or equal to 2014</strong>. Add the integer <strong class="bold">Indicated Damage Int</strong> column <span class="No-Break">to </span><span class="No-Break"><strong class="bold">Values</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="image/B19500_06_002.jpg" alt="Figure 6.2 – R script visual in Power BI"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.2 – R script visual in Power BI</p>
			<ol>
				<li value="3">While the<a id="_idIndexMarker315"/> R visual is highlighted, a scripting<a id="_idIndexMarker316"/> window will be shown at the bottom of the page. Add some R code to activate the R <span class="No-Break">correlation plot:</span></li>
			</ol>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="image/B19500_06_003.jpg" alt="Figure 6.3 – Add the R code for an R correlation plot"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.3 – Add the R code for an R correlation plot</p>
			<p>Here is the code that <a id="_idIndexMarker317"/>was added to <span class="No-Break">the visual:</span></p>
			<pre class="source-code">
require("corrplot")
library(corrplot)
M &lt;- cor(dataset)
corrplot(M, tl.cex=0.6, tl.srt = 45, tl.col = "black")</pre>
			<ol>
				<li value="4">Now add the new<a id="_idIndexMarker318"/> integer columns that you created to <strong class="bold">Values</strong>, along with the original field that <span class="No-Break">was added:</span></li>
			</ol>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/B19500_06_004.jpg" alt="Figure 6.4 – R correlation plot with True/False integer columns"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.4 – R correlation plot with True/False integer columns</p>
			<p>The plot is expanded in <span class="No-Break">Figure 6</span><span class="No-Break">.5.</span></p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="image/B19500_06_005.jpg" alt="Figure 6.5 – R correlation plot with True/False integer columns"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.5 – R correlation plot with True/False integer columns</p>
			<p>Text for the <a id="_idIndexMarker319"/>columns in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.5</em> are too small to read, but represent all of the TRUE/FALSE indicators converted to<a id="_idIndexMarker320"/> integer values. The PBIT file for <a href="B19500_06.xhtml#_idTextAnchor089"><span class="No-Break"><em class="italic">Chapter 6</em></span></a> in the GitHub repository allows you to view <span class="No-Break">these values.</span></p>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="image/B19500_06_006.jpg" alt="Figure 6.6 – Code for R correlation plot with True/False integer columns."/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.6 – Code for R correlation plot with True/False integer columns.</p>
			<p>Now you can dive into the data using an R <span class="No-Break">correlation plot!</span></p>
			<h2 id="_idParaDest-91"><a id="_idTextAnchor095"/>Identifying new features for your Power BI ML queries</h2>
			<p>The R correlation <a id="_idIndexMarker321"/>plot displays circles that increase in size and color intensity to indicate positive and negative correlation levels. Blue indicates a positive correlation (where the values go up and down together), white indicates no correlation (values go up and down randomly related to each other), and red indicates a negative correlation (one value tends to go up when the other <span class="No-Break">goes down).</span></p>
			<p>Looking at the initial rendering of the R correlation plot in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.5</em>, there are not a great deal of blue or red circles besides the self-matches and a few light blue circles for different related damage flags. Adding a few filters to the page allows you to explore correlations within subsets of the data. The R correlation plot will re-calculate every time you select new filters. For example, <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.7</em> has the following filters selected on <span class="No-Break">the dataset:</span></p>
			<ul>
				<li><strong class="bold">Year</strong> is <strong class="source-inline">greater than or equal </strong><span class="No-Break"><strong class="source-inline">to 2014</strong></span></li>
				<li><strong class="bold">Aircraft Type</strong> <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">Airplane</strong></span></li>
				<li><strong class="bold">Size</strong> <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">Large</strong></span></li>
				<li><strong class="bold">Aircraft Mass Code</strong> is <strong class="source-inline">3</strong>, <strong class="source-inline">4</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">5</strong></span></li>
				<li><strong class="bold">Effect on Flight</strong> is not <strong class="source-inline">blank</strong>, <strong class="source-inline">none</strong>, <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">other</strong></span></li>
				<li><strong class="bold">Number Struck</strong> is <strong class="source-inline">1</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">2-10</strong></span></li>
			</ul>
			<p>You can see this in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="image/B19500_06_007.jpg" alt="Figure 6.7 – When filters are selected, the R correlation plot is re-processed."/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.7 – When filters are selected, the R correlation plot is re-processed.</p>
			<p>The text in the columns in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.7</em> is too small to read, but represent all of the True/False indicators converted to integer values. The PBIT file for <a href="B19500_06.xhtml#_idTextAnchor089"><span class="No-Break"><em class="italic">Chapter 6</em></span></a> in the GitHub repository allows you to view <span class="No-Break">these values.</span></p>
			<p>After filtering down to a <a id="_idIndexMarker322"/>subset of data, correlations begin to emerge on the R correlation plot. Expand the visualization and focus on the <strong class="bold">Indicated Damage Int</strong> field correlations. The strongest correlations are for flags that also indicate some sort of damage. There are, however, some weaker positive correlations for <span class="No-Break">other flags:</span></p>
			<div>
				<div id="_idContainer101" class="IMG---Figure">
					<img src="image/B19500_06_008.jpg" alt="Figure 6.8 – A few weak positive correlations shown for Indicated Damage"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.8 – A few weak positive correlations shown for Indicated Damage</p>
			<p>After exploring additional filter combinations with the R correlation plot, the following features will be added to the <span class="No-Break">ML queries:</span></p>
			<table id="table002-3" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Feature</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Predict Damage</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Predict Size</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Predict Height</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Ingested Other</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Windshield</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 2</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 3</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Propeller</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Fuselage</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Tail</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Other</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Windshield</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 2</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 4</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Propeller</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Fuselage</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Tail</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Other</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Random</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Nose</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 1</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 3</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 4</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck Wing <span class="No-Break">or Rotor</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Landing Gear</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Struck Lights</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Random</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Nose</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Struck <span class="No-Break">Engine 2</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Engine 3</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Ingested <span class="No-Break">Engine 4</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged Wing <span class="No-Break">or Rotor</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>Damaged <span class="No-Break">Landing Gear</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Damaged Lights</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">No</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">Yes</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.9 – Features will be added to the ML queries</p>
			<p>You’ve discovered a great<a id="_idIndexMarker323"/> number of features for your ML queries, but you’re not done yet! You can also use Python visuals to explore data in Power BI, which is your <span class="No-Break">next task.</span></p>
			<h1 id="_idParaDest-92"><a id="_idTextAnchor096"/>Exploring data with Python visuals</h1>
			<p>In addition to R, Power<a id="_idIndexMarker324"/> BI also supports Python queries and visuals. Python is a very popular language that is also frequently used by data scientists. Per<a id="_idIndexMarker325"/> the requirements at the beginning of this chapter, you’ll need to install Python on your local machine for Power BI <span class="No-Break">Desktop: </span><a href="https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals"><span class="No-Break">https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-python-visuals</span></a><span class="No-Break">.</span></p>
			<p>In the FAA Wildlife Strike data, <strong class="bold">Height</strong> and <strong class="bold">Speed</strong> are both fields that can be recorded for reports. Height is a <a id="_idIndexMarker326"/>measure in feet from the ground at which an incident happened, while speed is a measure of the speed the aircraft was traveling when it was struck by wildlife. You will take a look at both of these metrics using Python histograms so that you can compare the distribution of those values when selecting <span class="No-Break">different filters.</span></p>
			<p>You will follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Preparing the data for the <span class="No-Break">Python histogram.</span></li>
				<li>Building the Python histogram visualization and add it to <span class="No-Break">your report.</span></li>
				<li>Identifying new features for your Power BI <span class="No-Break">ML queries.</span></li>
			</ol>
			<p><span class="No-Break">Let’s proceed.</span></p>
			<h2 id="_idParaDest-93"><a id="_idTextAnchor097"/>Preparing the data for the Python histogram</h2>
			<p>Both <strong class="bold">Height</strong> and <strong class="bold">Speed</strong> are integer columns that also contain empty values. Empty values with numeric columns of <a id="_idIndexMarker327"/>data can be tricky because you don’t know whether it is zero or unknown. For the report page, you filter out the empty values for each visualization. Otherwise, the integer columns are ready to go for your Python histogram <span class="No-Break">data visualizations.</span></p>
			<h2 id="_idParaDest-94"><a id="_idTextAnchor098"/>Building the Python histogram visualization and add it to your report</h2>
			<p>Next, we need to<a id="_idIndexMarker328"/> build <span class="No-Break">the visualization:</span></p>
			<ol>
				<li>Select the Python script visual in Power BI Desktop, and add it to the canvas of a <span class="No-Break">new page.</span></li>
				<li>Set the filters on the page to match <strong class="bold">Predict Damage</strong> with<strong class="bold"> Aircraft Type </strong>filtered to <strong class="source-inline">Airplane</strong> and <strong class="bold">Year</strong> filtered to be <strong class="source-inline">greater than or equal to 2014</strong>. Add the integer <strong class="bold">Speed</strong> column <span class="No-Break">to </span><span class="No-Break"><strong class="bold">Values</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer102" class="IMG---Figure">
					<img src="image/B19500_06_010.jpg" alt="Figure 6.10 – Python visual with Speed under Values"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.10 – Python visual with Speed under Values</p>
			<ol>
				<li value="3">While the Python<a id="_idIndexMarker329"/> visual is highlighted, a scripting window will be visible at the bottom of the page. Add some Python code to activate the Python histogram with a title of <strong class="source-inline">Speed for Incidents </strong><span class="No-Break"><strong class="source-inline">with Damage</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer103" class="IMG---Figure">
					<img src="image/B19500_06_011.jpg" alt="Figure 6.11– Python code that renders a histogram in Power BI"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.11– Python code that renders a histogram in Power BI</p>
			<p>Here’s the code<a id="_idIndexMarker330"/> entered into the script editor as shown in <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.11</em></span><span class="No-Break">:</span></p>
			<pre class="source-code">
import matplotlib.pyplot as plt
dataset.plot(kind='hist',y='Speed')
plt.xlabel("Speed")
plt.ylabel("Incidents")
plt.title("Speed for Incidents with Damage")
plt.show()</pre>
			<ol>
				<li value="4">For the filters on this visual, set <strong class="bold">Indicated Damage</strong> to <strong class="source-inline">True</strong> and <strong class="bold">Speed</strong> to <strong class="source-inline">is not (Blank)</strong>. Now you can render the Python <span class="No-Break">histogram visualization:</span></li>
			</ol>
			<div>
				<div id="_idContainer104" class="IMG---Figure">
					<img src="image/B19500_06_012.jpg" alt="Figure 6.12 – A Python histogram for incidents with damage by speed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.12 – A Python histogram for incidents with damage by speed</p>
			<p>Now you can <a id="_idIndexMarker331"/>use the Python histogram visual to analyze the distribution <span class="No-Break">of data!</span></p>
			<h2 id="_idParaDest-95"><a id="_idTextAnchor099"/>Identifying new features for Power BI ML queries</h2>
			<p>Let’s look at<a id="_idIndexMarker332"/> <span class="No-Break">the visual:</span></p>
			<ol>
				<li>Copy and paste the visual, and rename the title to <strong class="source-inline">Speed for Incidents without Damage</strong>. Here’s the Python code, which can be entered in the same way as in <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.10</em></span><span class="No-Break">:</span><pre class="source-code">
import matplotlib.pyplot as plt</pre><pre class="source-code">
dataset.plot(kind='hist',y='Speed')</pre><pre class="source-code">
plt.xlabel("Speed")</pre><pre class="source-code">
plt.ylabel("Incidents")</pre><pre class="source-code">
plt.title("Speed for Incidents without Damage")</pre><pre class="source-code">
plt.show()</pre></li>
				<li>Change the <strong class="bold">Indicated Damage</strong> filter on the second Python histogram visual to <strong class="source-inline">False</strong>, and you can compare the <span class="No-Break">two visuals:</span></li>
			</ol>
			<div>
				<div id="_idContainer105" class="IMG---Figure">
					<img src="image/B19500_06_013.jpg" alt="Figure 6.13 – Compare the speed of incidents with or without damage"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.13 – Compare the speed of incidents with or without damage</p>
			<p>Note that there are incidents without damage that are in the 1200 knots bucket, which skews the<a id="_idIndexMarker333"/> histogram further to <span class="No-Break">the left.</span></p>
			<ol>
				<li value="3">Filter the page for <strong class="bold">Speed</strong> at <strong class="source-inline">less than 700</strong> to create comparable histograms. Also add some filters to the page (anything you’d like to explore) such as <strong class="bold">Size</strong>, <strong class="bold">Effect on Flight</strong>, and <span class="No-Break"><strong class="bold">Month Name</strong></span><span class="No-Break">.</span></li>
				<li>Next, copy and paste both charts and replace <strong class="source-inline">Speed</strong> with <strong class="source-inline">Height</strong>. Filter the whole page such that <strong class="source-inline">Height</strong> is not blank. Here’s the Python code for the histogram of the heights when damage <span class="No-Break">was reported:</span><pre class="source-code">
import matplotlib.pyplot as plt</pre><pre class="source-code">
dataset.plot(kind='hist',y='Height',color='black')</pre><pre class="source-code">
plt.xlabel("Height")</pre><pre class="source-code">
plt.ylabel("Incidents")</pre><pre class="source-code">
plt.title("Height for Incidents with Damage")</pre><pre class="source-code">
plt.show()</pre></li>
				<li>And here is the Python script for a histogram <span class="No-Break">without damage:</span><pre class="source-code">
import matplotlib.pyplot as plt</pre><pre class="source-code">
dataset.plot(kind='hist',y='Height',color='black')</pre><pre class="source-code">
plt.xlabel("Height")</pre><pre class="source-code">
plt.ylabel("Incidents")</pre><pre class="source-code">
plt.title("Height for Incidents without Damage")</pre><pre class="source-code">
plt.show()</pre></li>
			</ol>
			<p>You can now <a id="_idIndexMarker334"/>interactively view the distribution of <strong class="bold">Height</strong> and <strong class="bold">Speed</strong> with many different <span class="No-Break">filter settings:</span></p>
			<div>
				<div id="_idContainer106" class="IMG---Figure">
					<img src="image/B19500_06_014.jpg" alt="Figure 6.14 – Interactive﻿ Python histograms for Height and Speed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.14 – Interactive Python histograms for Height and Speed</p>
			<p>Height and speed both appear to change when damage has been reported. As a result of your exploration using Python histograms, you will be adding both <strong class="bold">Height</strong> and <strong class="bold">Speed</strong> to the ML queries. Using R and Python visuals, you have verified numerous new features that can be<a id="_idIndexMarker335"/> used to train and test your ML models in <span class="No-Break">Power BI.</span></p>
			<h1 id="_idParaDest-96"><a id="_idTextAnchor100"/>Adding new features to the ML queries</h1>
			<p>So far in this chapter, <a id="_idIndexMarker336"/>you have identified numerous new features to be added to the <strong class="bold">Predict Damage</strong>, <strong class="bold">Predict Size</strong>, and <strong class="bold">Predict Height</strong> ML queries for your Power BI ML models. As you did in section three of <a href="B19500_05.xhtml#_idTextAnchor077"><span class="No-Break"><em class="italic">Chapter 5</em></span></a>, <em class="italic">Adding New Features to the ML Queries in Power Query</em>, you can add these features to the ML queries in <span class="No-Break">Power Query:</span></p>
			<ol>
				<li>Double-click on <strong class="bold">Remove Other Columns</strong> under <span class="No-Break"><strong class="bold">Applied Steps</strong></span><span class="No-Break">.</span></li>
				<li>Add each of the features in <span class="No-Break"><em class="italic">Figure 6</em></span><em class="italic">.9</em> (also include <strong class="bold">Speed</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="bold">Height</strong></span><span class="No-Break">).</span></li>
			</ol>
			<p>Your screen should look like this while adding <span class="No-Break">the features:</span></p>
			<div>
				<div id="_idContainer107" class="IMG---Figure">
					<img src="image/B19500_06_015.jpg" alt="Figure 6.15 – Select the columns to be added to the ML query"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.15 – Select the columns to be added to the ML query</p>
			<p>After adding the new features, you may note that <strong class="bold">Height</strong> and <strong class="bold">Speed</strong> both contain some empty values. Since these are not categorical fields, there is no simple option for adding a text value such as <strong class="source-inline">empty</strong>. For example, with <strong class="bold">Speed</strong>, the impact of a collision at 5 knots versus 500 knots should be expected to be very different when hitting a large animal. Empty values could represent many different scenarios such as missing data or unknown<a id="_idIndexMarker337"/> speed. You will evaluate a few different options for handling these missing values when you build and test the ML models in <span class="No-Break">Power BI.</span></p>
			<p>Future iterations of your solution may very well contain additional features that you discover. For now, you have numerous features that you have identified and added to queries that are architected for ML, and you are ready to journey forward into the Power BI <span class="No-Break">cloud services!</span></p>
			<h1 id="_idParaDest-97"><a id="_idTextAnchor101"/>Summary</h1>
			<p>In this chapter, you added R and Python visuals to your Power BI reports to discover new features in the FAA Wildlife Strike data. Using an R correlation plot, you were able to interactively slice and dice several incident flag values for positive and negative correlations. With Python histograms you took a look at the impact of speed and height on the outcomes for your planned Power BI ML models. Finally, you added new features to your <strong class="bold">Predict Damage</strong>, <strong class="bold">Predict Size</strong>, and <strong class="bold">Predict Height</strong> ML queries that will be used for ML in <span class="No-Break">Power BI.</span></p>
			<p>In the next chapter, you will begin migrating content to the Power BI cloud service. After migrating the Power BI dataset and report, you will then migrate the Power Query scripts to dataflows for use with Power <span class="No-Break">BI ML.</span></p>
		</div>
	</body></html>