- en: '5'
  prefs: []
  type: TYPE_NORMAL
- en: Using Speech with the Chatbot
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Learning Objectives
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'By the end of this chapter, you will able to:'
  prefs: []
  type: TYPE_NORMAL
- en: Set up Amazon Connect as a personal call center
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Integrate the MarketNanny chatbot with Amazon Connect
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Interact with the chatbot using voice and speech
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Connect the custom bot with Amazon Connect
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This chapter describes Amazon Connect services for interacting with chatbots
    using speech and voice.
  prefs: []
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the previous chapter, you learned how to create the `MarketNanny` chatbot
    using the **Amazon Lex** service. You are able to interact with the chatbot using
    natural language speech via a textbox, and the chatbot is able to query an external
    service API to get the information to send back to you.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you will interact with the `MarketNanny` chatbot using speech,
    rather than text. First, you will set up a call center within Amazon Connect,
    with a local phone number. Then, you will connect `MarketNanny` to Amazon Connect.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, you will test the chatbot by speaking to it; this will be done by calling
    it. By the end of this chapter, you will be able to talk to your `MarketNanny`
    bot via a telephone interface, using the Amazon Connect interface.
  prefs: []
  type: TYPE_NORMAL
- en: Amazon Connect Basics
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Amazon Connect** is a service from AWS that allows for the creation of cloud-based
    contact centers. This means that people can use a telephone number to contact
    the service and have conversations with bots or human representatives. In this
    case, we are primarily interested in automating interaction, using the chatbot
    that we built previously.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Some key features of Amazon Connect are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: It is easy to set up and use Connect with workflows that are defined using a
    graphical editor.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There is no infrastructure to deploy or manage, so contact centers can be scaled
    up and down quickly.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It is a **pay-as-you-go service**, so there is no setup or monthly fees. We
    will be using the free tier, so we should not have to pay anything to use the
    service. For commercial usage, charges are based on per minute rates.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Connect is deployed in 42 availability zones, within 16 geographic regions.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Free Tier Information
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In this book, you will only be using the free tier of the services presented.
    However, it is important to be aware of the limits of free usage and pricing otherwise.
  prefs: []
  type: TYPE_NORMAL
- en: You should check the official web-page https://aws.amazon.com/connect/. A single
    contact center may include a set amount of Amazon Connect service usage and a direct
    dial number including 60 minutes of inbound and outbound calls. This can change
    depending on your regional settings.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'You should not need to go beyond the services provided by the free tier for
    this book. If you go beyond the limits of the free tier, you will get charged
    by Amazon, at the rates published at: https://aws.amazon.com/connect/pricing/.'
  prefs: []
  type: TYPE_NORMAL
- en: Interacting with the Chatbot
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Using Connect to interact with your chatbot by voice, requires that you first
    set up a call center within Connect. The call center receives a free local phone
    number (or a US toll-free number, in the United States). This number can be connected
    to an `MarketNanny`). The chatbot uses the Lambda **serverless service** to get
    data from an external API and relay it back to the user on the phone:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Reference for image*: https://aws.amazon.com/connect/connect-lexchatbot/'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.1: A sample voice-based chatbot application using Amazon Connect,
    Lex, and Lambda'
  prefs: []
  type: TYPE_NORMAL
- en: '](img/image001-01.jpg)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Figure 5.1: A sample voice-based chatbot application using Amazon Connect,
    Lex, and Lambda'
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: Talking to Your Chatbot through a Call Center using Amazon Connect
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Using Amazon Connect, we can create a call center application that will allow
    us to connect to the chatbot which we built in the preceded chapter (`MarketNanny`),
    using voice commands, rather than a textbox;
  prefs: []
  type: TYPE_NORMAL
- en: To create an Amazon Connect call center, you make an Amazon Connect occurrence.
    Each example contains the majority of the assets and settings identified with
    your call focus. You can oversee settings for your scenario from the Amazon Connect
    support. You can oversee settings for your contact focus from inside your contact
    focus.
  prefs: []
  type: TYPE_NORMAL
- en: You can make various occurrences; however, each example capacities just inside
    the AWS area in which you make it. Settings, clients, measurements, and details
    are not shared between Amazon Connect occasions.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: It is mandatory to have an AWS Account. Amazon Lex services can be accessed
    through Console page.
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 18: Creating a Personal Call Center'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this exercise, we will create a personal call center using Amazon Connect,
    and we will connect your `MarketNanny` chatbot to it. We have already discussed
    the Amazon Connect service in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: 'For the first step, navigate to the Amazon Connect service page in the AWS
    Console. You can select the link to navigate to, or go directly to this URL: https://console.aws.amazon.com/connect:![Figure
    5.2: The Amazon Connect welcome screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0022.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.2: The Amazon Connect welcome screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Click on the **Get started** button to create a new **Call Center**. In the
    first screen that follows, keep the default option of Store users within Amazon
    Connect, and enter a name for your application. The name is unique across AWS,
    and duplicates are not allowed, so you may have to experiment a bit or add numbers
    to the name until you get a name, which is unique.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on the **Next step** button when you are done:![Figure 5.3: Step 1 of
    the Amazon Connect resource configuration screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0033.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.3: Step 1 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'In the next step, add the information for a new `admin`, `setting` the `email
    address` to your own email address. Again, click on the **Next step** button when
    you are done:![Figure 5.4: Step 2 of the Amazon Connect resource configuration
    screen](img/image0042.jpg)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 5.4: Step 2 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'In the next step, leave the **Incoming calls** checkbox checked, and uncheck
    the **Outbound calls** checkbox:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: We have no requirement for our bot to initiate a call to anyone, in this case,
    but we do want it to be able to receive calls.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 5.5: Step 3 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/image0053.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.5: Step 3 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Click the **Next step** button when you are done.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next you will be presented with an informational screen, letting you know that
    you are granting the call center application permissions to read and write data
    to or from your S3 bucket, encrypt or decrypt data, and read and write to and
    from `CloudWatch` logs.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'It will also show you the location of the `S3 buckets` where your `data` and
    `Contact flow` logs will be stored:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: Note that there is a **Customize** settings link to further customize these
    locations, but we will not use this.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 5.6: Step 4 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/image0062.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.6: Step 4 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'This will bring you to the final screen, which will provide you with a review
    of all of the settings for your **Contact center** application:![ Figure 5.7:
    Step 5 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0072.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.7: Step 5 of the Amazon Connect resource configuration screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Now, click on the **Create** **Instance** button to create your application.
    You should see a dialog window:![Figure 5.8: Amazon Connect setting up'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0083.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.8: Setting up Amazon Connect'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'In a minute or two, it will complete the setup process and take you to a **Success**
    screen, where you can click on the **Get started** button to go directly to your
    application:![ Figure 5.9: The Success screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0093.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.9: The Success screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: It may take up to 15 minutes for the application to get set up, so if you do
    not succeed in getting to the application page initially, have some patience and
    try again every once in a while until it does succeed.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Typically, it should not take very long, and generally, the application page
    will be accessible right away.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Exercise 19: Obtaining a Free Phone Number for your Call Center'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this exercise, we will acquire a free number for our custom call center.
    The free telephone number can be acquired by the free tier services provided by
    Amazon Connect. The following are the steps for completion for obtaining the free
    number:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The welcome screen for your personal call center should be visible, and, if
    it is not, you can access it easily at the `URL` displayed within the previous
    screen, right before you click on the **Get Started** button:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: In my case, it was https://mymarketnanny.awsapps.com/connect; in yours, it will
    be based on your own application's name.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![Figure 5.10: The Amazon Connect welcome screen'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '](img/image0102.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.10: The Amazon Connect welcome screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'At this point, you can click on the `local` phone number for your call center
    application. On this screen, you can select your country:![Figure 5.11: The Claim
    phone number screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0113.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.11: The Claim phone number screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Leave the **Type** as the **default** (Direct Dial) option, and, from the Phone
    number drop-down menu, select a phone number. This should be, in most cases, a
    number that is local to you. If you choose one that is not, you may be charged,
    based on the cost to dial the number:![ Figure 5.12: Phone number selection'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0122.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.12: Phone number selection'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Click on the **Next** button when you are done. This will allow you to test
    your new phone number by dialing it. You should hear a message that starts with
    **Hello**, thanks for calling. These are some examples of what the Amazon Connect
    virtual contact center can enable you to do
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'This will be followed by a list of options; you can try them for yourself to
    see what they do when you have some time. For now, click on the **Continue** button,
    which will bring you to the **Dashboard** screen:![Figure 5.13: The Amazon Connect
    Dashboard screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0133.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.13: The Amazon Connect Dashboard screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: You now have a working call center application on Amazon Connect.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using Amazon Lex Chatbots with Amazon Connect
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: With Amazon Lex, you can create intelligent chatbots. This can be done by converting
    contact flows into regular conversations. The Amazon Connect service compliments
    the forementioned feature by enabling the creation of a contact center (cloud
    base) along with the generation of dynamic flows. This delivers a personalized
    experience to your callers. Additionally, **Dual-tone multi-frequency** (**DTMF**)
    digits entered by callers during a call can be easily recognized by these chatbots.
  prefs: []
  type: TYPE_NORMAL
- en: With both Amazon Lex and Amazon Connect working in sync, the chatbot can gauge
    the callers’ intent. Furthermore, you can use the AWS Lambda function along with
    your chatbot for processing caller requests, providing information to callers,
    and querying applications. These chatbots are capable of maintaining context by
    intelligently managing dialogue and review replies based on callers’ responses
    on the fly.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we will connect your *MarketNanny* chatbot to the call
    center, so that the user can speak into the phone and have his or her speech automatically
    converted to a text utterance that will get sent to the Lex chatbot.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Contact Flows
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A **contact flow** defines each step of the experience that customers have when
    they interact with your call center. You can create a contact flow by using the
    contact flow templates provided. You can also create your own contact flow from
    scratch, by using the **Create** contact flow editor.
  prefs: []
  type: TYPE_NORMAL
- en: The **Contact** flow designer screen provides a way to visually create contact
    flows in a drag and drop environment. Contact flows are made of nodes that can
    be accessed in the left panel, within the designer area (under the Show additional
    flow information link).
  prefs: []
  type: TYPE_NORMAL
- en: Nodes are categorized under the `Interact`, `Set`, `Branch`, `Integrate`, and
    `Terminate`/`Transfer` categories. Nodes in each category can be hidden or revealed
    by clicking on the drop-down icon next to the section name. You will explore some
    of the nodes that are available by creating the contact flow for your chatbot.
  prefs: []
  type: TYPE_NORMAL
- en: Contact flows are a way for users (typically supervisors) to progressively refresh
    the settings for each call entering the framework and ensure that the users hear
    customized and pertinent choices. While there are a number of predesigned contact
    flows, you will create a new one for your `MarketNanny` chatbot.
  prefs: []
  type: TYPE_NORMAL
- en: Contact Flow Templates
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The following are the templates that are available:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Customer queue flow**: Manages what the customer experiences while in that
    queue, before being joined to an agent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Customer hold flow**: Manages what the customer experiences while the customer
    is on hold.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Customer whisper flow**: Manages what the customer experiences as a part
    of an inbound call,immediately before being joined with an agent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Outbound whisper flow**: Manages what the customer experiences as a part
    of an outbound call, before being connected with an agent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Agent hold flow**: Oversees what the specialist encounters when on hold with
    a client. With this stream, at least one sound prompt can be played to a specialist
    utilizing the Loop prompts square while the client is on hold.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Agent whisper flow**: Manages what the agent experiences as a part of an
    inbound call, immediately before being joined with a customer.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Transfer to agent flow**: Manages what the agent experiences when transferring
    to another agent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Transfer to queue flow**: Manages what the agent experiences when transferring
    to another queue.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the next section, we will set up your call center so that it can accept incoming
    calls, connect your `MarketNanny` chatbot to the call center so that the user
    can speak into the phone, and have the user's speech automatically converted to
    a text utterance that will be sent to the Lex chatbot.
  prefs: []
  type: TYPE_NORMAL
- en: The chatbot then continues with processing the utterance, finding the intent,
    and slots and fulfilling it through the Lambda function you had set up in the
    preceded section.
  prefs: []
  type: TYPE_NORMAL
- en: In order to connect your call center Instance with your chatbot, you will need
    to go back to the main screen (not the Dashboard) briefly. Select the link for
    the `Contact` flows.
  prefs: []
  type: TYPE_NORMAL
- en: 'Exercise 20: Connect the Call Center to Your Lex Chatbot'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this exercise, you will set up your call center so that it can accept incoming
    calls, and so that you can connect your `MarketNanny` chatbot to the call center.
    The following are the steps for completion:'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This is not the previous screen with the Dashboard. You may find a Contact flows
    entry there, as well, but it is not the one we're interested in.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here, you will find a section titled Amazon Lex, with a drop-down under Lex
    bots. Click on the dropdown to find the `MarketNanny` bot as an entry, and select
    it, and then select the **Save** Lex Bots link to save it:![ Figure 5.14: The
    Contact flows screen with the Lex bots selection dropdown'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0142.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.14: The Contact flows screen with the Lex bots selection dropdown'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Now, you can navigate back to the **Dashboard** screen by selecting the **Overview**
    link and clicking on the Login as **administrator** button. The **Dashboard**
    screen will open in a new browser tab:![ Figure 5.15: The Login as administrator
    screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0153.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.15: The Login as administrator screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'On the Dashboard screen, select the **Routing** icon, and when it opens, select
    **Contact flows**:![Figure 5.16: Selecting Routing, Contact flows from the Dashboard'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0162.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.16: Selecting Routing and Contact flows from the Dashboard'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'This will bring you to a **Contact** **flows** screen than the one we were
    just on previously. This screen is the **Contact flow designer**, where you can
    design and create **New** contact flows:![Figure 5.17: Contact flows screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0173.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.17: Contact flows screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Click on the `MarketNannyFlow`:![Figure 5.18: The Contact flow designer screen'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0182.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.18: The Contact flow designer screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: The first node that you will use for your chatbot's contact flow is the **Set
    voice** node. You can find it under the **Set** category and drag it to the graphical
    view to the right of the **Entry point** node, which is already in the view.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Connect the output of the Entry point node with the input of the **Set voice**
    node by clicking on the output circle and dragging with your mouse to the input
    bump on the left of the **Set voice** node:![ Figure 5.19: The Contact flow designer
    screen with Set voice node'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0193.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.19: The Contact flow designer screen with Set voice node'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Next, you can set the properties of the node by clicking on the top of the node.
    This will bring up a panel on the right-hand side of the screen, with the relevant
    properties that you can set.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For this component, it provides **Language** and **Voice** properties, both
    of which can be set by selecting a value from the dropdown under each property
    label. You can set the values appropriate to your scenario, and then click on
    the **Save** button:![Figure 5.20: Properties for Set Voice node'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0202.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.20: Properties for Set Voice node'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'The next node to add is the **Get customer input** node, which you will find
    under the Interact tab. You can connect the input of this node to the output of the
    **Set voice** node, just like when you connected **Set voice** to the Entry point node:![Figure
    5.21: Adding the Get customer input node](img/image0213.jpg)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 5.21: Adding the Get customer input node'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'First, select the `Text` `to` `speech` (ad hoc) option and click on **Enter**
    text under it. In the input textbox, enter a greeting such as the following:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: Feel free to replace this with some other text that may be more interesting
    or appropriate for you.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'This is the text that will be converted to a voice greeting when the **Contact
    center** application first answers the phone:![Figure 5.22: Get customer input
    properties'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0222.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.22: Get customer input properties'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Next, scroll down the setting pane and select the Amazon Lex subsection, and
    not the `DTMF` section. Here, you will be able to configure the node to work with
    your chatbot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: The DTMF section provides a way to specify interactions with the caller via
    button presses on his/her phone, but we will not cover that today. We are much
    more interested in having our chatbot interact with the caller!
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In this section, under Lex bot, you can enter the name and alias for your chatbot.
    Under Name, enter `MarketNanny`, and under `$LATEST`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`$LATEST` is a system-defined alias which specifies that the contact center
    will always access the most recently published version of the `MarketNanny` chatbot:![Figure
    5.23: Amazon Lex properties in the Get customer input properties'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0233.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.23: Amazon Lex properties in the Get customer input properties'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'Finally, specify the `GetQuote` intent under the Intents section. Since that
    is the only intent we are currently working with, click on the **Save** button:![Figure
    5.24: The GetQuote intent in Get customer input node'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0242.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.24: The GetQuote intent in Get customer input node'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'You can now see that the **Get customer input** node has changed to display
    the intent that we specified in its properties pane:![Figure 5.25: Full contact
    center flow'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0253.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.25: Full contact center flow'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: 'You can finish the flow by adding two more nodes:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`Play` prompt from the `Interac`t section. Set the Prompt property to Text
    to speech (ad hoc) in the property pane, and enter text in the textbox under Enter text
    as follows:'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
- en: '`Disconnect`/`hang up` from the `Terminate`/`Transfer` section. Do not set
    any properties.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Connect the nodes, as shown previously.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect the outputs of the Default and Error states in **Get customer input**
    to the input of the **Disconnect**/**Hang up** node.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect the `GetQuote` output to the Play prompt node.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect the output from `Play` prompt to the input of **Set** voice. This ensures
    that you can interact with your chatbot for as long as you keep asking the right questions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, click on the dropdown icon next to the **Save** button in the upper
    right of the screen, and select **Save and Publish** to publish the contact flow:![Figure
    5.26: Save and Publish section'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0261.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.26: Save and Publish section'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: As the final step, you will connect your call center phone number to the new
    contact flow you have just created.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From the menu panel on the left-hand side of the screen, select the **Routing**
    menu, and from that, select the **Phone numbers** item:![Figure 5.27: Selecting
    Routing, Phone numbers from the Dashboard'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '](img/image0274.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Figure 5.27: Selecting Routing and Phone numbers from the Dashboard'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: This will bring up the `MarketNanny`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Selecting the phone number will bring you to the Edit Phone number page:![Figure
    5.28: The Edit Phone number screen](img/image0282.jpg)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 5.28: The Edit Phone number screen'
  prefs:
  - PREF_IND
  - PREF_H6
  type: TYPE_NORMAL
- en: Here, click on the dropdown under `MarketNannyFlow`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Call your contact center phone number to verify that you can interact with your
    `MarketNanny` chatbot by speaking to it!
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Activity 1: Creating a Custom Bot and Connecting the Bot with Amazon Connect'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this activity, we will create an **Amazon Lex** bot for checking the **Account
    Balance**. The bot will check the account balance. An **Amazon Lex** bot is controlled
    via **Automatic Speech Recognition** (**ASR**) and **Natural Language Understanding**
    (**NLU**) capacities, a similar innovation that forces Amazon Alexa. For this,
    we will consider the following example: suppose a user wants to check their account
    balance; a user might use **I want to check my account balance**. You can configure
    the intent to of the Amazon Lex bot to an Amazon Connect Instance. You can create
    a contact flow and add your Amazon Lex bot. To ensure that this happens correctly,
    you will need to navigate to the Amazon Lex services and Amazon Connect services
    for connecting the bot:'
  prefs: []
  type: TYPE_NORMAL
- en: Create an Amazon Lex bot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Configure the bot by creating intents and adding slots.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Configure the bot and configure the bot error handling such as when the caller's
    utterance is not understood.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Build and test the bot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Publish the bot and create an alias.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add the bot to your Amazon Connect.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Create a contact stream and include the bot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Assign the contact flow to a telephone number.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H4
  type: TYPE_NORMAL
- en: To refer to the detailed steps, go to the *Appendix A* at the end of this book
    on Page no. 225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the first part of this chapter, you learned about the basics of Amazon Connect,
    and even looked in the free tier version of Amazon Connect. Later, we explored
    the sample voice-based Chatbot application using Amazon Connect, Lex, and Lambda.
    Next, we created a personal call center.
  prefs: []
  type: TYPE_NORMAL
- en: You have also learned how to obtain a free phone number for a personal call
    center. We have also learned about using Amazon Lex Chatbots with Amazon Connect
    with contact flows and different templates. Finally, you learned how to connect
    the call center to your Lex Chatbot.
  prefs: []
  type: TYPE_NORMAL
- en: In next chapter, you will learn how to analyze images with computer vision,
    using Amazon Rekognition services. Amazon Rekognition services are used to detect
    the objects, scenes, and text in. It also used to match the faces in different
    images and compare them how closely both images are interlinked with each other.
  prefs: []
  type: TYPE_NORMAL
