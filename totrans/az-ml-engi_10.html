<html><head></head><body>
<div id="_idContainer431">
<h1 class="chapter-number" id="_idParaDest-125"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-126"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.2.1">Using Deep Learning in Azure Machine Learning</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">Deep learning</span></strong><span class="koboSpan" id="kobo.4.1"> is a </span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.5.1">subclass of machine learning. </span><span class="koboSpan" id="kobo.5.2">It is based on artificial neural networks, a programming paradigm inspired by the human biological nervous system, and it enables a computer to learn from a very large amount of </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">observational data.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">There are some machine learning problems – such as image recognition, image classification, object detection, speech recognition, and natural language processing – that traditional machine learning techniques do not provide performant solutions for, whereas deep learning techniques do. </span><span class="koboSpan" id="kobo.7.2">This chapter will show you the deep learning capabilities available within AML that you can use to solve some of the previously </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">mentioned problems.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics</span><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.11.1">:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.12.1">Labeling image data for training an object detection model by using the AML Data </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Labeling feature</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Training an object detection model using </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">Azure AutoML</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Deploying an object detection model to an online endpoint using the AML </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">Python SDK</span></span></li>
</ul>
<h1 id="_idParaDest-127"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.18.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.19.1">To access your workspace, recall the steps from the </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">previous chapter:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.21.1">Go </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">to </span></span><a href="https://ml.azure.com"><span class="No-Break"><span class="koboSpan" id="kobo.23.1">https://ml.azure.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.24.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Select your </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">workspace name.</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">On the workspace user interface on the left side, </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.29.1">Compute</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">On the </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">Compute</span></strong><span class="koboSpan" id="kobo.33.1"> screen, select your compute instance and </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.35.1">Start</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer397">
<span class="koboSpan" id="kobo.37.1"><img alt="Figure 10.1 – Start compute" src="image/B18003_10_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.38.1">Figure 10.1 – Start compute</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.39.1">Your compute instance status will change from </span><strong class="bold"><span class="koboSpan" id="kobo.40.1">Stopped</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.41.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.42.1">Starting</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.44.1">In the previous chapter, we cloned the Git repository; if you have not already done so, continue to follow these steps. </span><span class="koboSpan" id="kobo.44.2">If you have already cloned the repository, skip to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.45.1">step 7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.47.1">Open the terminal on your compute instance. </span><span class="koboSpan" id="kobo.47.2">Note the path will include your user in the directory. </span><span class="koboSpan" id="kobo.47.3">Type the following into the terminal to clone the sample notebooks into your </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">working directory:</span></span><pre class="console"><span class="koboSpan" id="kobo.49.1">
git clone </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">https://github.com/PacktPublishing/Azure-Machine-Learning-Engineering.git</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.51.1">Clicking on the refresh icon shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.52.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.53.1">.2</span></em><span class="koboSpan" id="kobo.54.1"> will update and refresh the notebooks displayed on </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">your screen:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer398">
<span class="koboSpan" id="kobo.56.1"><img alt="Figure 10.2 – Refresh icon" src="image/B18003_10_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.57.1">Figure 10.2 – Refresh icon</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.58.1">Review the notebooks in your </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">Azure-Machine-Learning-Engineering</span></strong><span class="koboSpan" id="kobo.60.1"> directory. </span><span class="koboSpan" id="kobo.60.2">This will display the files cloned into your working directory, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.61.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.62.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer399">
<span class="koboSpan" id="kobo.64.1"><img alt="Figure 10.3 – Azure-Machine-Learning-Engineering" src="image/B18003_10_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.65.1">Figure 10.3 – Azure-Machine-Learning-Engineering</span></p>
<h1 id="_idParaDest-128"><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.66.1">Labeling image data using the Data Labeling feature of Azure Machine Learning</span></h1>
<p><span class="koboSpan" id="kobo.67.1">In</span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.68.1"> the field of computer vision, object detection</span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.69.1"> is a challenging task for predicting the location of objects in an image and predicting the object types. </span><span class="koboSpan" id="kobo.69.2">Just like any other supervised machine learning task, in order to train an object detection model, we need to have training data and, in this case, a lot of labeled data, as deep learning works best on a large labeled dataset. </span><span class="koboSpan" id="kobo.69.3">Data scientists who develop computer vision models know how tedious and time-consuming it can be to label images, and even more time-consuming when it comes to labeling images for object detection models. </span><span class="koboSpan" id="kobo.69.4">The </span><strong class="bold"><span class="koboSpan" id="kobo.70.1">Azure Machine Learning</span></strong><span class="koboSpan" id="kobo.71.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.72.1">Azure ML</span></strong><span class="koboSpan" id="kobo.73.1">) service has a powerful feature called </span><strong class="bold"><span class="koboSpan" id="kobo.74.1">Data Labeling</span></strong><span class="koboSpan" id="kobo.75.1">, which significantly enhances the user experience for image labeling, leveraging built-in capabilities such as ML-assisted labeling by automatically training a model to pre-label images for you to review, accelerating the </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">labeling process.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">In this section, you</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.78.1"> will learn how to label your</span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.79.1"> images for training an object detection model by leveraging the Data Labeling feature of Azure ML by following </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.81.1">Go to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">chapter 10</span></strong><span class="koboSpan" id="kobo.83.1"> folder of the cloned repository of this book that you have been using. </span><span class="koboSpan" id="kobo.83.2">You will see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">images</span></strong><span class="koboSpan" id="kobo.85.1"> folder, which has two subfolders: </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">train</span></strong><span class="koboSpan" id="kobo.87.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1">test</span></strong><span class="koboSpan" id="kobo.89.1">. </span><span class="koboSpan" id="kobo.89.2">You will be using the images in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">train</span></strong><span class="koboSpan" id="kobo.91.1"> folder in the next step. </span><span class="koboSpan" id="kobo.91.2">Please note that these images were cloned to our repository from the public repository hosted </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">at </span></span><a href="https://github.com/EdjeElectronics/TensorFlow-Object-Detection-API-Tutorial-Train-Multiple-Objects-Windows-10"><span class="No-Break"><span class="koboSpan" id="kobo.93.1">https://github.com/EdjeElectronics/TensorFlow-Object-Detection-API-Tutorial-Train-Multiple-Objects-Windows-10</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.94.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.95.1">Navigate to the Azure ML workspace and select </span><strong class="bold"><span class="koboSpan" id="kobo.96.1">Data Labeling</span></strong><span class="koboSpan" id="kobo.97.1"> from the left menu bar and then click </span><strong class="bold"><span class="koboSpan" id="kobo.98.1">Add project</span></strong><span class="koboSpan" id="kobo.99.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.100.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.101.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer400">
<span class="koboSpan" id="kobo.103.1"><img alt="Figure 10.4 – Creating a new Data Labeling project" src="image/B18003_10_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.104.1">Figure 10.4 – Creating a new Data Labeling project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.105.1">Go </span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.106.1">ahead and give your project a </span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.107.1">name, then select </span><strong class="bold"><span class="koboSpan" id="kobo.108.1">Image</span></strong><span class="koboSpan" id="kobo.109.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.110.1">Media type</span></strong><span class="koboSpan" id="kobo.111.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.112.1">Object Identification (Bounding Box)</span></strong><span class="koboSpan" id="kobo.113.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.114.1">Labeling task type</span></strong><span class="koboSpan" id="kobo.115.1">, and click </span><strong class="bold"><span class="koboSpan" id="kobo.116.1">Next</span></strong><span class="koboSpan" id="kobo.117.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.118.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.119.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer401">
<span class="koboSpan" id="kobo.121.1"><img alt="Figure 10.5 – Filling out the project details" src="image/B18003_10_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.122.1">Figure 10.5 – Filling out the project details</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.123.1">You can</span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.124.1"> skip the next step and</span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.125.1"> go to </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">Select or create data</span></strong><span class="koboSpan" id="kobo.127.1"> and click </span><strong class="bold"><span class="koboSpan" id="kobo.128.1">Create</span></strong><span class="koboSpan" id="kobo.129.1"> to create your dataset. </span><span class="koboSpan" id="kobo.129.2">Pick a name and type in a description for your image data asset and then click </span><strong class="bold"><span class="koboSpan" id="kobo.130.1">Next</span></strong><span class="koboSpan" id="kobo.131.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.132.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.133.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer402">
<span class="koboSpan" id="kobo.135.1"><img alt="Figure 10.6 – Creating an image data asset" src="image/B18003_10_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.136.1">Figure 10.6 – Creating an image data asset</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.137.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.138.1">From local files</span></strong><span class="koboSpan" id="kobo.139.1">, as </span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.140.1">shown </span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.141.1">in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.142.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.143.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer403">
<span class="koboSpan" id="kobo.145.1"><img alt="Figure 10.7 – Selecting the image data source" src="image/B18003_10_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.146.1">Figure 10.7 – Selecting the image data source</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.147.1">Select</span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.148.1"> a datastore for uploading your</span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.149.1"> images, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.150.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.151.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer404">
<span class="koboSpan" id="kobo.153.1"><img alt="Figure 10.8 – Selecting the storage type and the datastore for your images" src="image/B18003_10_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.154.1">Figure 10.8 – Selecting the storage type and the datastore for your images</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.155.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.156.1">Upload</span></strong><span class="koboSpan" id="kobo.157.1">, navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">train</span></strong><span class="koboSpan" id="kobo.159.1"> folder from </span><em class="italic"><span class="koboSpan" id="kobo.160.1">step 1</span></em><span class="koboSpan" id="kobo.161.1">, select all the images as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.162.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.163.1">.9</span></em><span class="koboSpan" id="kobo.164.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.166.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer405">
<span class="koboSpan" id="kobo.168.1"><img alt="Figure 10.9 – Uploading image files from your local drive" src="image/B18003_10_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.169.1">Figure 10.9 – Uploading image files from your local drive</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.170.1">Review the</span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.171.1"> details for your image </span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.172.1">data asset and </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.174.1">Create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.176.1">In this step, you need to add labels for each object found in the images, which in this case will be </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">Two</span></strong><span class="koboSpan" id="kobo.178.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">Three</span></strong><span class="koboSpan" id="kobo.180.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">Four</span></strong><span class="koboSpan" id="kobo.182.1">, and so on up to </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">Ten</span></strong><span class="koboSpan" id="kobo.184.1">, as well as </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">Soldier</span></strong><span class="koboSpan" id="kobo.186.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">Queen</span></strong><span class="koboSpan" id="kobo.188.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">King</span></strong><span class="koboSpan" id="kobo.190.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.191.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.192.1">.10</span></em><span class="koboSpan" id="kobo.193.1">. </span><span class="koboSpan" id="kobo.193.2">Then </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.195.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer406">
<span class="koboSpan" id="kobo.197.1"><img alt="Figure 10.10 – Adding labels for the objects in all images" src="image/B18003_10_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.198.1">Figure 10.10 – Adding labels for the objects in all images</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.199.1">You</span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.200.1"> can skip </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">Labeling instructions (optional)</span></strong><span class="koboSpan" id="kobo.202.1"> and </span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.203.1">go to </span><strong class="bold"><span class="koboSpan" id="kobo.204.1">ML assisted labeling (optional)</span></strong><span class="koboSpan" id="kobo.205.1">. </span><span class="koboSpan" id="kobo.205.2">Make sure </span><strong class="bold"><span class="koboSpan" id="kobo.206.1">ML assisted labeling (optional)</span></strong><span class="koboSpan" id="kobo.207.1"> is enabled, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.208.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.209.1">.11</span></em><span class="koboSpan" id="kobo.210.1">, and then click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.211.1">Create project</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">:</span></span><div class="IMG---Figure" id="_idContainer407"><span class="koboSpan" id="kobo.213.1"><img alt="Figure 10.11 – Reviewing and creating the data labeling project" src="image/B18003_10_011.jpg"/></span></div></li>
</ol>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1">Figure 10.11 – Reviewing and creating the data labeling project</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.215.1">Click </span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.216.1">on the project you just created</span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.217.1"> from the project list, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.218.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.219.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer408">
<span class="koboSpan" id="kobo.221.1"><img alt="Figure 10.12 – Data labeling project list" src="image/B18003_10_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.222.1">Figure 10.12 – Data labeling project list</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.223.1">You can see the dashboard with the different options that the </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Data Labeling</span></strong><span class="koboSpan" id="kobo.225.1"> feature gives you to assist with the labeling process. </span><span class="koboSpan" id="kobo.225.2">Go ahead and click on </span><strong class="bold"><span class="koboSpan" id="kobo.226.1">Label data</span></strong><span class="koboSpan" id="kobo.227.1"> near the top, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.228.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.229.1">.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer409">
<span class="koboSpan" id="kobo.231.1"><img alt="Figure 10.13 – Data labeling dashboard" src="image/B18003_10_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.232.1">Figure 10.13 – Data labeling dashboard</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.233.1">In this</span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.234.1"> step, you will start labeling the </span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.235.1">images by drawing bounding boxes around objects found in the images and assigning labels associated with them, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.236.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.237.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer410">
<span class="koboSpan" id="kobo.239.1"><img alt="Figure 10.14 – Drawing bounding boxes around the objects and assigning them labels" src="image/B18003_10_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.240.1">Figure 10.14 – Drawing bounding boxes around the objects and assigning them labels</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.241.1">Once enough</span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.242.1"> images have been</span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.243.1"> labeled, ML-assisted labeling will start, and you will see that the next images are pre-labeled for you to quickly review the bounding boxes around the objects and their labels. </span><span class="koboSpan" id="kobo.243.2">After you are done labeling all the images, you will see the summary of your labeled data, such as </span><strong class="bold"><span class="koboSpan" id="kobo.244.1">Label class distribution</span></strong><span class="koboSpan" id="kobo.245.1"> and so on, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.246.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.247.1">.15</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer411">
<span class="koboSpan" id="kobo.249.1"><img alt="Figure 10.15 – Label class distribution" src="image/B18003_10_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.250.1">Figure 10.15 – Label class distribution</span></p>
<ol>
<li value="15"><span class="koboSpan" id="kobo.251.1">Next, click </span><strong class="bold"><span class="koboSpan" id="kobo.252.1">Export</span></strong><span class="koboSpan" id="kobo.253.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.254.1">Labeled</span></strong><span class="koboSpan" id="kobo.255.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.256.1">Asset type</span></strong><span class="koboSpan" id="kobo.257.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.258.1">Azure ML dataset</span></strong><span class="koboSpan" id="kobo.259.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.260.1">Export format</span></strong><span class="koboSpan" id="kobo.261.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.262.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.263.1">.16</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer412">
<span class="koboSpan" id="kobo.265.1"><img alt="Figure 10.16 – Exporting your label image data" src="image/B18003_10_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.266.1">Figure 10.16 – Exporting your label image data</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.267.1">You</span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.268.1"> should see a message </span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.269.1">indicating that your data was exported successfully, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.270.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.271.1">.17</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer413">
<span class="koboSpan" id="kobo.273.1"><img alt="Figure 10.17 – Labeled data exported successfully" src="image/B18003_10_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.274.1">Figure 10.17 – Labeled data exported successfully</span></p>
<p><span class="koboSpan" id="kobo.275.1">In this section, you learned how to leverage Azure ML-assisted labeling to accelerate the labeling of your images for training an object detection model, which we will train in the </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">next section.</span></span></p>
<h1 id="_idParaDest-129"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.277.1">Training an object detection model using Azure AutoML</span></h1>
<p><span class="koboSpan" id="kobo.278.1">In this section, we will </span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.279.1">show you how to use Azure </span><strong class="bold"><span class="koboSpan" id="kobo.280.1">Automated Machine Learning</span></strong><span class="koboSpan" id="kobo.281.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.282.1">AutoML</span></strong><span class="koboSpan" id="kobo.283.1">) to train an object detection model</span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.284.1"> by following </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.286.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.287.1">Automated ML</span></strong><span class="koboSpan" id="kobo.288.1"> from the left navigation bar and then click </span><strong class="bold"><span class="koboSpan" id="kobo.289.1">New Automated </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.290.1">ML job</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer414">
<span class="koboSpan" id="kobo.292.1"><img alt="Figure 10.18 – Creating a new Automated ML job" src="image/B18003_10_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.293.1">Figure 10.18 – Creating a new Automated ML job</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.294.1">Select the image data asset that you created in the last section and </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.296.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.298.1">In this step, you will configure the training job, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.299.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.300.1">.19</span></em><span class="koboSpan" id="kobo.301.1">. </span><span class="koboSpan" id="kobo.301.2">The first thing to notice is that AutoML has automatically set the task type to </span><strong class="bold"><span class="koboSpan" id="kobo.302.1">Object Detection</span></strong><span class="koboSpan" id="kobo.303.1"> based on the selected dataset. </span><span class="koboSpan" id="kobo.303.2">Since you don’t have an existing experiment, select </span><strong class="bold"><span class="koboSpan" id="kobo.304.1">Create new</span></strong><span class="koboSpan" id="kobo.305.1"> to create a new experiment and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">playing_cards_experiment</span></strong><span class="koboSpan" id="kobo.307.1">. </span><span class="koboSpan" id="kobo.307.2">For </span><strong class="bold"><span class="koboSpan" id="kobo.308.1">Target column</span></strong><span class="koboSpan" id="kobo.309.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.310.1">label (List)</span></strong><span class="koboSpan" id="kobo.311.1">, and for the compute type, select </span><strong class="bold"><span class="koboSpan" id="kobo.312.1">Compute cluster</span></strong><span class="koboSpan" id="kobo.313.1">. </span><span class="koboSpan" id="kobo.313.2">Since you do not have a GPU cluster (which is needed for deep learning tasks such as object detection), you will </span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.314.1">need to create one by </span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.315.1">selecting </span><strong class="bold"><span class="koboSpan" id="kobo.316.1">+ New</span></strong><span class="koboSpan" id="kobo.317.1"> and following the steps in the cluster creation wizard. </span><span class="koboSpan" id="kobo.317.2">Once your GPU compute cluster is created, it can be selected, and then you can </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.319.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer415">
<span class="koboSpan" id="kobo.321.1"><img alt="Figure 10.19 – Configuring the object detection job" src="image/B18003_10_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.322.1">Figure 10.19 – Configuring the object detection job</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.323.1">You can leave the default values that are selected for the algorithm details and the hyperparameter tuning settings, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.324.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.325.1">.20</span></em><span class="koboSpan" id="kobo.326.1">, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.328.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer416">
<span class="koboSpan" id="kobo.330.1"><img alt="Figure 10.20 – Selecting the model and configuring the hyperparameter tuning" src="image/B18003_10_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.331.1">Figure 10.20 – Selecting the model and configuring the hyperparameter tuning</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.332.1">In this </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.333.1">final step, you will set your</span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.334.1"> validation type. </span><span class="koboSpan" id="kobo.334.2">We will again keep the default selected value, which is </span><strong class="bold"><span class="koboSpan" id="kobo.335.1">Auto</span></strong><span class="koboSpan" id="kobo.336.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.337.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.338.1">.21</span></em><span class="koboSpan" id="kobo.339.1">. </span><span class="koboSpan" id="kobo.339.2">Then, click </span><strong class="bold"><span class="koboSpan" id="kobo.340.1">Finish</span></strong><span class="koboSpan" id="kobo.341.1"> to start the </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">model training:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer417">
<span class="koboSpan" id="kobo.343.1"><img alt="Figure 10.21 – Selecting the validation type" src="image/B18003_10_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.344.1">Figure 10.21 – Selecting the validation type</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.345.1">Depending </span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.346.1">on the size of your dataset, it </span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.347.1">can take anywhere between 15 minutes to a couple of hours for the model training to complete. </span><span class="koboSpan" id="kobo.347.2">Once the training job is completed, you can see it under </span><strong class="bold"><span class="koboSpan" id="kobo.348.1">Recent Automated ML jobs</span></strong><span class="koboSpan" id="kobo.349.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.350.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.351.1">.22</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer418">
<span class="koboSpan" id="kobo.353.1"><img alt="Figure 10.22 – Automated ML jobs" src="image/B18003_10_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.354.1">Figure 10.22 – Automated ML jobs</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.355.1">Select your</span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.356.1"> latest run to see some </span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.357.1">statistics, such as </span><strong class="bold"><span class="koboSpan" id="kobo.358.1">Best model summary</span></strong><span class="koboSpan" id="kobo.359.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.360.1">Primary metric</span></strong><span class="koboSpan" id="kobo.361.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.362.1">Algorithm name</span></strong><span class="koboSpan" id="kobo.363.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">Duration</span></strong><span class="koboSpan" id="kobo.365.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.366.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.367.1">.23</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer419">
<span class="koboSpan" id="kobo.369.1"><img alt="Figure 10.23 – Completed Automated ML job" src="image/B18003_10_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.370.1">Figure 10.23 – Completed Automated ML job</span></p>
<p><span class="koboSpan" id="kobo.371.1">In this section, you learned how to leverage Azure AutoML to train an object detection model using the image data that you had labeled by leveraging another tool called </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Data Labeling</span></strong><span class="koboSpan" id="kobo.373.1">. </span><span class="koboSpan" id="kobo.373.2">In the next section, you will learn how to deploy the trained model to a managed online endpoint for consumption by </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">client applications.</span></span></p>
<h1 id="_idParaDest-130"><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.375.1">Deploying the object detection model to an online endpoint using the Azure ML Python SDK</span></h1>
<p><span class="koboSpan" id="kobo.376.1">Just like </span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.377.1">any other ML </span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.378.1">model, a deep learning model is not useful unless it is deployed and consumers can send data for inference. </span><span class="koboSpan" id="kobo.378.2">In our case, it would be sending image data and getting results back containing object types and locations within the </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">raw image.</span></span></p>
<p><span class="koboSpan" id="kobo.380.1">In this section, we will show you how to use the Azure ML Python SDK to register your previously trained model and deploy it to an online endpoint for real-time inference by following </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.382.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">chapter 10</span></strong><span class="koboSpan" id="kobo.384.1"> notebook, which is inside the repository that you cloned by following the steps in the </span><em class="italic"><span class="koboSpan" id="kobo.385.1">Technical requirements</span></em><span class="koboSpan" id="kobo.386.1"> section of the chapter. </span><span class="koboSpan" id="kobo.386.2">Please note that our repository for this chapter uses most of the code from the original repository hosted </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">at </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">https://github.com/Azure/azureml-examples</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.390.1">The first</span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.391.1"> couple of cells import the required libraries and connect your notebook to the Azure</span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.392.1"> ML workspace, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.393.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.394.1">.24</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer420">
<span class="koboSpan" id="kobo.396.1"><img alt="Figure 10.24 – Importing the required libraries and connecting to the Azure ML workspace" src="image/B18003_10_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.397.1">Figure 10.24 – Importing the required libraries and connecting to the Azure ML workspace</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.398.1">You are going to use the MLflow library (in particular, the MLflow client) to access the models and other artifacts generated by AutoML. </span><span class="koboSpan" id="kobo.398.2">The next couple of cells show how to install the latest version of the MLflow packages, how to obtain the URI for the MLflow tracking server, and how to initialize the MLflow client, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.399.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.400.1">.25</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer421">
<span class="koboSpan" id="kobo.402.1"><img alt="Figure 10.25 – Setting up the MLflow client to access the AutoML-trained model" src="image/B18003_10_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.403.1">Figure 10.25 – Setting up the MLflow client to access the AutoML-trained model</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.404.1">Go to the</span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.405.1"> Azure ML workspace and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">Automated ML</span></strong><span class="koboSpan" id="kobo.407.1"> tab from the left navigation</span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.408.1"> bar. </span><span class="koboSpan" id="kobo.408.2">Then, click on the latest job to see the job details and make a note of the job name, which is </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">AutoML_ada7f120-62e2-46fd-8ef7-59cae1106262</span></strong><span class="koboSpan" id="kobo.410.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.411.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.412.1">.26</span></em><span class="koboSpan" id="kobo.413.1">. </span><span class="koboSpan" id="kobo.413.2">We will use the job name in the </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">next step:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer422">
<span class="koboSpan" id="kobo.415.1"><img alt="Figure 10.26 – Getting the AutoML job name" src="image/B18003_10_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.416.1">Figure 10.26 – Getting the AutoML job name</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.417.1">Now that </span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.418.1">we have the AutoML job name, we can get the AutoML best model ID, as shown</span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.419.1"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.420.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.421.1">.27</span></em><span class="koboSpan" id="kobo.422.1">. </span><span class="koboSpan" id="kobo.422.2">This will be used in a later step to retrieve the actual </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">trained model:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer423">
<span class="koboSpan" id="kobo.424.1"><img alt="Figure 10.27 – Getting the AutoML best model ID" src="image/B18003_10_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.425.1">Figure 10.27 – Getting the AutoML best model ID</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.426.1">The next cell creates a local folder and downloads the best model and its artifacts into this </span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.427.1">folder, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.428.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.429.1">.28</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer424">
<span class="koboSpan" id="kobo.431.1"><img alt="Figure 10.28 – Downloading the best model in a local folder" src="image/B18003_10_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.432.1">Figure 10.28 – Downloading the best model in a local folder</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.433.1">The next</span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.434.1"> cell creates a managed online endpoint for the model to be invoked from, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.435.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.436.1">.29</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.437.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer425">
<span class="koboSpan" id="kobo.438.1"><img alt="Figure 10.29 – Creating an online endpoint for the model to be invoked from" src="image/B18003_10_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.439.1">Figure 10.29 – Creating an online endpoint for the model to be invoked from</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.440.1">The </span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.441.1">next cell</span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.442.1"> registers the model to the workspace, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.443.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.444.1">.30</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer426">
<span class="koboSpan" id="kobo.446.1"><img alt="Figure 10.30 – Registering the best model to the Azure ML workspace" src="image/B18003_10_030.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.447.1">Figure 10.30 – Registering the best model to the Azure ML workspace</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.448.1">The next cell creates a deployment, which contains settings such as an ID for the model to be deployed, the compute cluster type, the number of cluster nodes, and the name of the endpoint that was created a couple of steps ago, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.449.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.450.1">.31</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer427">
<span class="koboSpan" id="kobo.452.1"><img alt="Figure 10.31 – Registering the best model to the Azure ML workspace" src="image/B18003_10_031.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.453.1">Figure 10.31 – Registering the best model to the Azure ML workspace</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.454.1">The</span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.455.1"> next couple </span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.456.1">of cells show you how to invoke the endpoint and pass a test image to the model for inference, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.457.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.458.1">.32</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer428">
<span class="koboSpan" id="kobo.460.1"><img alt="Figure 10.32 – Sending a test image to the model for inference" src="image/B18003_10_032.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.461.1">Figure 10.32 – Sending a test image to the model for inference</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.462.1">Finally, let’s</span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.463.1"> see how well the model scored the test image (which is how well it was able to find an </span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.464.1">object, identify its type, and find its location within the image). </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.465.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.466.1">.33</span></em><span class="koboSpan" id="kobo.467.1"> shows the Python code to help you to visualize the model output that was returned by </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">the endpoint:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer429">
<span class="koboSpan" id="kobo.469.1"><img alt="Figure 10.33 – Python code to visualize the model output" src="image/B18003_10_033.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.470.1">Figure 10.33 – Python code to visualize the model output</span></p>
<ol>
<li value="12"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.471.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.472.1">.34</span></em><span class="koboSpan" id="kobo.473.1"> shows the</span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.474.1"> model </span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.475.1">output with a bounding box around the </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">identified object:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer430">
<span class="koboSpan" id="kobo.477.1"><img alt="Figure 10.34 – Model output showing the bounding box around the identified object" src="image/B18003_10_034.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.478.1">Figure 10.34 – Model output showing the bounding box around the identified object</span></p>
<p><span class="koboSpan" id="kobo.479.1">Let’s summarize the</span><a id="_idIndexMarker713"/> <span class="No-Break"><span class="koboSpan" id="kobo.480.1">chapter </span></span><span class="No-Break"><a id="_idIndexMarker714"/></span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">next.</span></span></p>
<h1 id="_idParaDest-131"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.482.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.483.1">In this chapter, we covered a quick introduction to deep learning and the importance of having a lot of labeled data for the model to perform well. </span><span class="koboSpan" id="kobo.483.2">We then showed you how to use the Azure ML Data Labeling capability to assist with labeling image data to train an object detection model. </span><span class="koboSpan" id="kobo.483.3">We then showed you how to use AutoML to train an object detection model, and finally, you learned how to deploy your model to an online endpoint and score a test image, all using </span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">Azure ML.</span></span></p>
<p><span class="koboSpan" id="kobo.485.1">In the next chapter, we will show you how to do distributed model training in </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">Azure ML.</span></span></p>
</div>
</body></html>