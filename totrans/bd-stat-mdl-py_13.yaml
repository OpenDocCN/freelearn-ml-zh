- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Time-to-Event Variables – An Introduction
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this short chapter, we will introduce another branch of statistics called
    **survival analysis**, which is related to survival and time-censoring studies.
    Survival analysis is also called **time-to-event variable analysis**, which is
    a particular statistical outcome type that requires other techniques than those
    used in the few last chapters that we have studied. A time-to-event variable analysis
    studies, for example, whether a participant has an event of interest during the
    study timeframe. In other words, we study the *proportion of a sample surviving
    after a specific time point* and the rate at which the survived sample proportion
    will fail or die, or whether there are survival differences in different treatment
    groups. The term *survival* in survival analysis is originally based on the time
    from treatment until death in the medical field. However, survival analysis is
    readily applicable to many fields including engineering (where it is referred
    to as **reliability theory** or **reliability analysis**), sociology (**event
    history analysis**), and economics (**duration analysis**). Survival studies might
    not be ambiguous in medical research when a death occurs, although some events
    such as organ failure can be poorly defined. Ambiguity does occur in other research
    fields, however: for instance, in engineering, a failure or a broken system can
    be partial or not strictly determined by time. We also examine survival data,
    the survival function, hazard, and hazard ratios in this chapter.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we’re going to cover the following main topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Censoring
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Survival data
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The survival function, hazard, and hazard ratios
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What is censoring?
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the field of statistics, **Censoring** refers to a situation where the full
    extent or precise value of a measurement or observation is not entirely known.
    In Survival Analysis, this happens when we have information about sample observations
    and do not know when the given event happened, and is considered a key issue in
    survival analysis, distinguishing time-to-event analysis from the other statistical
    analyses mentioned in the previous chapters. There are several reasons why censoring
    happens; for example, a person withdraws from a study or exits prior to a follow-up,
    or the event in question has already happened before the study starts. The censored
    event is *non-informative*, that is, *censoring causes study failure due to some
    reason other than failure time. In other words, failure caused by censoring is
    not related to the probability of an event occurring.* **Informative censoring**
    happens when an observation is lost to follow-up because of research reasons.
    Three types of informative censoring are **right censoring**, **left censoring**,
    and **interval censoring**. In this book, we focus on **non-informative** **right
    censoring**.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: Left censoring
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When we know the *event has happened before the observation data is collected*,
    then the observation is **left-censored**. An example left-censored scenario is
    where we study the age when a middle-school student begins puberty. There may
    be some students reaching this developmental stage before they enter middle school.
    All of these students are considered left-censored. As another example, consider
    an HIV study for an at-risk group of patients where, by the time the study starts,
    some patients already have HIV.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们知道事件在收集观察数据之前已经发生时，那么观察就是**左截尾**。一个左截尾的例子是我们研究中学生开始青春期的年龄。可能有学生在中学生入学之前就达到了这个发育阶段。所有这些学生都被认为是左截尾。另一个例子是针对一个风险患者组的HIV研究，到研究开始时，一些患者已经感染了HIV。
- en: Right censoring
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 右截尾
- en: When the *event happens after some time point* but we do not know the exact
    time, then it is considered **right-censored**. Applying the previous scenario
    here, imagine there are some students who withdraw from the puberty developmental
    stage study, or we lose them prior to following up (for example, they move to
    another school) or they have a delayed puberty (the developmental stage had still
    not taken place by the time they left middle school to begin high school). Another
    example is a cancer study where a group of patients is recruited for a clinical
    trial to see how a new treatment affects them, but a patient in the group dies
    because of a car accident after 2 years. In that case, we know this patient’s
    survival is at least 2 years during the period of the study, but do not know how
    many years beyond 2 that this patient could have survived with the cancer diagnosis.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 当事件在某个时间点之后发生，但我们不知道确切的时间时，这种情况被认为是**右截尾**。应用之前的场景，想象有一些学生在青春期发育阶段研究中退出，或者在我们跟进之前（例如，他们转学到另一所学校）或者他们有延迟的青春期（在他们从初中毕业进入高中之前，发育阶段还没有发生）。另一个例子是癌症研究，其中一组患者被招募参加临床试验，以观察新的治疗方法对他们的影响，但组内的一个患者在两年后因车祸去世。在这种情况下，我们知道这位患者的生存期至少有2年，但在研究期间，我们不知道这位患者能够存活多少年。
- en: Interval censoring
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 间隔截尾
- en: Left censoring and right censoring are special cases of **interval censoring**.
    A clear example to illustrate interval censoring is a patient that tests negatively
    at time t 1 for HIV but positively at time t 2\. However, we do not know the exact
    time this patient got infected between time interval [t 1, t 2]. This particular
    patient had an annual checkup last year and again this year. The lab results show
    he was HIV-negative last year but HIV-positive this year. Therefore, the infection
    occurred at some time point between last year’s and this year’s checkups, but
    we do not know exactly when.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 左截尾和右截尾是**间隔截尾**的特殊情况。一个清楚地说明间隔截尾的例子是，一位患者在时间t1时进行了HIV检测，结果为阴性，但在时间t2时检测结果为阳性。然而，我们不知道这位患者在时间间隔[t1,
    t2]之间确切感染的时间。这位特定的患者在去年和今年都进行了年度体检。实验室结果显示，他去年是HIV阴性，但今年是HIV阳性。因此，感染发生在去年和今年的体检之间的某个时间点，但我们不知道确切的时间。
- en: Type I and Type II censoring
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 一类和二类截尾
- en: 'There are two types of right censoring: **Type I censoring** and **Type II
    censoring**. In **Type I censoring**, a study is designed to terminate after some
    time point t. Fixed censoring occurs when an object does not have an event after
    time t. This object is considered censored at time t. Random censoring occurs
    when censored objects do not have the same censoring time. In **Type II censoring**,
    a study terminates after some prespecified number of events occur. This type of
    censoring is frequently used in life testing experiments to save time and money.
    For example, we randomly select n objects as a sample to test whether a new innovation
    is really effective, but instead of testing all these n objects, we define that
    the study terminates if r failures occur to save time and costs. In this case,
    the first r objects have events at time t 1, t 2, … , t r but the remaining n
    − r objects do not have an event at time T = max(t 1, t 2, … , t r) and they are
    therefore considered censored.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: Let us visualize a cancer study for a period of 5 years testing a new treatment.
    The start time point is 0 when the study starts, and the end time point is 5 when
    the study ends.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 13.1 – Right censoring in survival analysis for a cancer study](img/B18945_13_01.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
- en: Figure 13.1 – Right censoring in survival analysis for a cancer study
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: The first patient was recruited at the beginning of the study, but he died in
    year 2-and-a-half. The second patient was also recruited at the beginning of the
    study but in year 5, he was still surviving. This patient has survived for more
    than 5 years, but we do not know for how many years he can ultimately survive,
    which means that right censoring occurred with this patient. The third patient
    was recruited in year 1 but she died in year 4\. The fourth patient joined the
    study in year 2 but by year 4, we were unable to follow up with this patient.
    The reason could be that he moved to another city, for instance. Censoring occurs
    for patient 2 and patient 4.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: 'The study seems like a regression problem but in this example, the second patient
    was considered to have survived when the study concluded. This makes survival
    analysis different from regular statistical analyses. We also do not remove the
    data of the second patient from the study data since the information is valuable:
    patients can survive for at least 5 years. In addition, patient follow-ups can
    be prevented because they may move to another place or are very sick but instead
    of removing the data, we record the reason why they dropped out of the study.
    Similarly, gender considerations can be biased because, for example, male patients
    may be more likely to withdraw from the study than female patients when they are
    sick, thus resulting in a potentially incorrect conclusion that females survive
    longer than males.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: Survival data
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Survival data** focuses on whether or not an object in a study experiences
    an event. In addition, the follow-up time is also considered. *Time zero* or *time
    origin* is the time when the study starts. Depending on the purpose of a study,
    time zero or time origin can be different. For instance, in a prostate cancer
    study, researchers recruit 40-year-old and older male participants, but in a study
    of puberty developmental ages, male and female teenagers of 12 and older are recruited.
    If the research takes place over a period of time (which could be several months
    or years) then recording the time origin and follow-up time during the study is
    vitally important.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: 'Lastly, we discuss the *relationship between survival and censoring times*
    and how we *record survival data with censoring*. Suppose that for each object
    in a sample, we know its true event time T and true censoring time C. Then, the
    *survival time of an object is the period of time until an event occurs* and the
    *censoring time of an object is the moment when censoring occurs*, when, for example,
    the study ends or we are unable to follow up on this object. Let δ i denote the
    status indicator for the object i:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: δ i = { 1 if the event was observed ,   0 if censoring was observed.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: In other words, δ i = 1 when the event T i occurs *before* censoring C i and
    δ i = 0 when the event T i occurs *after* censoring C i. The observed outcome
    variable is
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Y i = min(T i, C i)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: and the censored survival data for object i can be captured as (Y i, δ i).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: The following example considers three patients in a cancer study. Time is considered
    here in years and the duration of the study is 5 years.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: '| **Patient** | **T** | **C** | **δ** |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
- en: '| 1 | 3 (the patient died in year 3) | No censoring – patient died in year
    3 | 1 (because the event was observed) |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
- en: '| 2 | 7 (the patient died in year 7 but the study ended in year 5) | 5 (the
    study ends in year 5) | 0 (because the censoring was observed) |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
- en: '| 3 | No information | 4 (the patient dropped out of the study) | 0 (because
    the censoring was observed) |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
- en: Figure 13.2 – Survival analysis for a cancer study
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: The following figure illustrates information about 3 patients in the cancer
    study.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 13.3 – Survival analysis for a cancer study](img/B18945_13_03.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
- en: Figure 13.3 – Survival analysis for a cancer study
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: Survival Function, Hazard and Hazard Ratio
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let us first discuss the survival function. The formula of the function is defined
    as
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: S(t) = P(T > t)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: and represents the probability that the object survives past time t. The survival
    function is a non-increasing function with *t* ranges from 0 to ∞. When t = 0,
    S(t) = 1 and when t = ∞ , S(t) = S(∞) = 0\. It is a smooth function theoretically
    but practically, *events occur on a discrete time scale* (days, weeks, years).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 13.4 – Survival function illustrated](img/B18945_13_04.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
- en: Figure 13.4 – Survival function illustrated
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: In this example, we go back to the cancer study that spanned 5 years. At time
    zero, when the study started, the survival probability was 1 or 100% but at year
    5, the probability of survival was close to 0.2 or 20%.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: Now we consider the *Stanford heart transplant dataset.* The dataset contains
    the information of 103 patients who participated in an experimental heart transplant
    program (see *Figure 13**.5*). The patients were seriously ill and had the potential
    to obtain some benefit from being part of the program, as they could be waiting
    anywhere from a few weeks to several months to receive a new heart from a donor.
    The CSV dataset can be downloaded at [https://www.openintro.org/data/csv/heart_transplant.csv](https://www.openintro.org/data/csv/heart_transplant.csv).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 13.5 – First five rows of Stanford translant data](img/B18945_13_005.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
- en: Figure 13.5 – First five rows of Stanford translant data
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 'We are interested in two features here: `survived` (recording the survival
    status of dead versus alive) and `survtime` (the number of days the patients survived
    after they were determined to be a candidate for a heart transplant until the
    study ended). When we sort the data by `survtime`, among the first 15 observations,
    the patient in row 13 is still alive as shown in *Figure 13**.6*. Therefore, the
    observation at row number 13 is time censored.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 13.6 – Status of first 15 transplant patients](img/B18945_13_006.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
- en: Figure 13.6 – Status of first 15 transplant patients
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: In this example, to calculate the probability of survival beyond `survtime =
    3`, we just need to calculate the **probability of survival** in each interval
    of time [t 0, t 1], (t 1, t 2], (t 2, t 3], which is calculated by
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: P(Survival in (t i−1, t i]) = 1 − P(Dead in (t i−1, t i] | Alive in t i−1)
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: where
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: P(Dead in (t i−1, t i] | Alive in t i−1) =  number of deaths in (t i−1, t i]
       ___________________  number of alives at t i−1 ,
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: then
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: S(t 3) = P(Survival > t 3) = (1 −  0 _ 103 )*(1 −  1 _ 103 )*(1 −  3 _ 102 )
    = 96.12 % .
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: Next, we discuss hazard function or hazard rate. The **hazard function** is
    defined as
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: h(t) = lim 𝛥t→0  Pr(t < T ≤ t + Δt | T > t)  ______________  Δt ,
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '*t**he instantaneous rate at which events occur given survival up to that time*.
    In other words, it is just the probability of *dying* in the next few seconds
    or the next day given being *alive* now. The hazard ratio is a ratio of death
    probabilities. For example, when a hazard ratio is 3, then the given group has
    3 times the chance of dying compared to another group.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we provided an overview of time-to-event variable analysis
    and how it differs from other statistical analyses that we have studied in the
    previous chapters. We covered censoring intuition (left, right, and interval censoring)
    and discussed Type I and Type II censoring. We also discussed non-informative
    and informative events in this chapter. We then discussed survival data and the
    relationship between survival and censoring times and how we record survival data
    with censoring. The survival function, hazard, and hazard ratio were also mentioned
    in the last section of this chapter.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们概述了时间至事件变量分析及其与我们在前几章中研究过的其他统计分析的差异。我们涵盖了截尾直觉（左截尾、右截尾和区间截尾）并讨论了一类和二类截尾。本章还讨论了非信息性事件和信息性事件。然后，我们讨论了生存数据以及生存与截尾时间之间的关系，以及如何记录带有截尾的生存数据。本章的最后部分还提到了生存函数、风险率和风险比。
- en: In the next chapter, we will consider the non-parametric Kaplan-Meier model,
    the parametric exponential model, and also the semiparametric Cox Proportional
    Hazards model. We will perform real data analysis in Python by applying these
    models for survival analysis.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将考虑非参数Kaplan-Meier模型、参数指数模型，以及半参数Cox比例风险模型。我们将通过应用这些模型进行生存分析，在Python中执行实际数据分析。
