<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><div id="_idContainer123">
			<h1 id="_idParaDest-61" class="chapter-number"><a id="_idTextAnchor062"/>4</h1>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor063"/>Reviewing Predictions and Human in the Loop</h1>
			<p>One of the biggest differences between RPA and IA lies in how previously certain automated work outcomes can become uncertain. We’re no longer 100% confident that the Digital Worker has taken the correct course of action due to uncertainty in the ML prediction. The main way to get a sense of how well the ML algorithm is performing, and to reduce the overall risk levels of IA, is to <em class="italic">perform a partial manual review of the ML predictions</em>. This chapter discusses two different ways to design this manual verification through adding <strong class="bold">human in the loop</strong> (<strong class="bold">HITL</strong>) into <a id="_idIndexMarker289"/>the <span class="No-Break">automated process.</span></p>
			<p>In this chapter, we’re going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>Why should we <span class="No-Break">review predictions?</span></li>
				<li>What does HITL mean in the context <span class="No-Break">of IA?</span></li>
				<li>What criteria can be used to trigger <span class="No-Break">human intervention?</span></li>
				<li>How can we share prediction data between prediction reviewers and <span class="No-Break">Blue Prism?</span></li>
			</ul>
			<h1 id="_idParaDest-63"><a id="_idTextAnchor064"/>Technical requirements</h1>
			<p>Download and import the three <strong class="source-inline">.bprelease</strong> files in the <strong class="source-inline">ch4</strong> folder on <span class="No-Break">GitHub: </span><a href="https://github.com/PacktPublishing/Intelligent-Automation-with-Blue-Prism/tree/main/ch4"><span class="No-Break">https://github.com/PacktPublishing/Intelligent-Automation-with-Blue-Prism/tree/main/ch4</span></a><a href="https://github.com/PacktPublishing/Intelligent-Process-Automation-with-Blue-Prism/tree/main/ch4%0D"/></p>
			<p><em class="italic">Example 2</em> of this chapter also requires that the <a href="B18416_03.xhtml#_idTextAnchor048"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>,<em class="italic"> Example 3</em> Release is imported. There is also an Excel file in the GitHub folder, which will be downloaded as part of <span class="No-Break"><em class="italic">Example 2</em></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor065"/>Why should we review predictions?</h1>
			<p>Automation <a id="_idIndexMarker290"/>enthusiasts don’t like the idea of having to review ML predictions. After all, isn’t the purpose of combining ML with RPA to further remove people from being involved in the business process? ML models, outside the context of IA, are like any other software. They can’t be used in perpetuity. They require monitoring and updating as ML models are known to <em class="italic">drift </em>over time, leading to poor accuracy. Drift can happen for many reasons, such as changes in the characteristics of the underlying input data, or exposure to new data that the model wasn’t trained on. Not only can reviewing predictions help detect drift but there are also some IA-specific reasons to <span class="No-Break">review predictions.</span></p>
			<h2 id="_idParaDest-65"><a id="_idTextAnchor066"/>Reduce business risk</h2>
			<p>When moving a Process into production for the first time, it’s common to closely monitor the processing and to only allow a fraction of the total work volume to be worked. These practices are ways to manage the risks inherent to deploying something new <span class="No-Break">into production.</span></p>
			<p>In most cases, introducing ML increases the risk levels of an automated process. Despite this, we continue to pursue IA because we believe that the benefits of using ML outweigh these risks. Reviewing ML predictions and correcting them if necessary is one of the most direct ways of mitigating this increased business risk on an ongoing, operational, <span class="No-Break">case-by-case basis.</span></p>
			<p>There are other ways of minimizing the business risks of IA, for example, by deliberately choosing processes where human review is guaranteed to occur downstream, or by choosing use cases where incorrect outcomes are tolerated. However, these types of risk mitigations tend to determine which IA processes get greenlit. They can’t be used to control risk on an operational level after a Process is put <span class="No-Break">into production.</span></p>
			<h2 id="_idParaDest-66"><a id="_idTextAnchor067"/>Stay ahead of regulatory concerns</h2>
			<p>Automation and AI are front and center in the minds of regulators and lawmakers globally. Countries such as Brazil, China, and the United States are actively developing legislation to govern the use of AI in society. For example, in October 2023, the Biden administration issued an executive order centered on how to manage the risks <span class="No-Break">of AI.</span></p>
			<p>Europe is leading the way in defining legislation with two relevant frameworks: the <strong class="bold">EU AI Act</strong>, which is <a id="_idIndexMarker291"/>currently in development, and the <strong class="bold">General Data Protection Regulation</strong> (<strong class="bold">GDPR</strong>), which<a id="_idIndexMarker292"/> is already in effect. The <strong class="bold">EU AI Act</strong> categorizes AI use cases into four risk categories: minimal, limited, high, and unacceptable. Guidelines exist to define which use cases fall into each category and there’s corresponding legislation to cover each of the levels. For example, under the <em class="italic">unacceptable</em> risk category, the use of AI to find victims of crime is explicitly disallowed. Article 14 of the Act discusses human oversight. Systems that are high-risk must be designed in a way such that they can be <em class="italic">overseen by natural persons during the period in which the AI system is in use.</em> While very few use cases would be classified as high-risk under the EU AI Act, it’s worth incorporating human oversight into our IA solution design as a <span class="No-Break">precautionary measure.</span></p>
			<p>Article 22 of the <strong class="bold">GDPR</strong> states<a id="_idIndexMarker293"/> that EU citizens have the right <em class="italic">not to be subject to a decision based solely on automated processing</em> and the right to <em class="italic">obtain human intervention</em>. While the EU AI Act and GDPR are only applicable to the EU, it’s possible that other countries will adopt similar provisions in their own AI legislation. If we design our Processes such that ML predictions can be manually reviewed (i.e., human oversight), we can mitigate regulatory risks that may arise in <span class="No-Break">the future.</span></p>
			<p>Both the EU AI Act and the GDPR imply that there should be mechanisms designed into our IA Processes to do <span class="No-Break">the following:</span></p>
			<ul>
				<li>Allow for ML prediction to be verified by <span class="No-Break">a human</span></li>
				<li>Disable <a id="_idIndexMarker294"/>ML decision-making either completely or selectively <span class="No-Break">when requested</span></li>
			</ul>
			<p>This chapter focuses on the first point, which is a form of HITL. The second point will be covered in <span class="No-Break">upcoming chapters.</span></p>
			<h1 id="_idParaDest-67"><a id="_idTextAnchor068"/>What does HITL mean in the context of IA?</h1>
			<p>HITL broadly <a id="_idIndexMarker295"/>means that humans should interact with automation in some way. Under traditional RPA, human input might be needed for many reasons. For example, there might be two-factor authentication that needs human input to log in to <span class="No-Break">a website.</span></p>
			<p>As IA means the addition of ML into an automated process, human interaction in this context refers specifically to someone <em class="italic">viewing the results of an ML prediction, correcting it if necessary, and making the reviewed predictions available to BP</em>. Adding HITL to do this greatly affects our process design. It requires determining <span class="No-Break">the following:</span></p>
			<ul>
				<li>What criteria should trigger human intervention in the <span class="No-Break">automated process?</span></li>
				<li>What user interface should be used to display predictions and to receive feedback on whether the prediction is correct? For example, this could be achieved through email, a shared spreadsheet, a website, and <span class="No-Break">so on.</span></li>
				<li>Whether reviewing predictions needs to be done in near real-time to meet service <span class="No-Break">level agreements.</span></li>
			</ul>
			<p>When presented with a prediction to review, the reviewer must decide on <span class="No-Break">the following:</span></p>
			<ul>
				<li>Whether to accept or change the <span class="No-Break">prediction result.</span></li>
				<li>Whether <a id="_idIndexMarker296"/>to continue or suspend automated processing of the <span class="No-Break">work case.</span></li>
			</ul>
			<p>Answers to these questions will be illustrated through the examples of <span class="No-Break">this chapter.</span></p>
			<h1 id="_idParaDest-68"><a id="_idTextAnchor069"/>What criteria can be used to trigger human intervention?</h1>
			<p>Recall that an ML prediction will give you a <em class="italic">predicted value</em>, whether that be a number, a label, an image, or generated text, and a <em class="italic">confidence score</em>. A well-informed decision to intervene will usually take both factors into account, but there are still reasons to intervene solely based on one or <span class="No-Break">the other.</span></p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor070"/>Random sampling</h2>
			<p>The simplest way to<a id="_idIndexMarker297"/> decide which work case should be manually reviewed is through <span class="No-Break"><strong class="bold">random sampling</strong></span><span class="No-Break">:</span></p>
			<ol>
				<li>To use random sampling, choose a <em class="italic">target percentage</em> that you want to route for manual verification, for <span class="No-Break">example, 10%.</span></li>
				<li>Generate a random number between 1 and 100, inclusive, after an ML prediction is made. If the random number is under the chosen target (10 in this case), automated processing will stop, pending human review of <span class="No-Break">the prediction.</span></li>
				<li>During review, the reviewer can correct the prediction and allow the work case to continue, or suspend automated <span class="No-Break">processing altogether.</span></li>
			</ol>
			<p>In one real-life use case, the IA team chose a random sampling target of 25%. The main purpose behind randomly sampling 25% of the cases for manual review was to keep track of prediction accuracy. Although random sampling wasn’t explicitly called out as being used to reduce risk, it can absolutely be used for <span class="No-Break">that purpose.</span></p>
			<p>Random sampling doesn’t use the prediction or the confidence score in any way. This is the <em class="italic">major difference between random sampling and thresholding</em>, a different HITL trigger that is discussed later in this chapter. Notice that if we set the target percentage to 100%, we effectively make it so that every prediction must be reviewed by <span class="No-Break">a person.</span></p>
			<p>Let’s see how random sampling can be implemented through an example. The four high-level steps that we will go through are <span class="No-Break">as follows:</span></p>
			<ol>
				<li>Examine the contents of the example’s <span class="No-Break">Release file.</span></li>
				<li>Understand how to generate random numbers <span class="No-Break">in BP.</span></li>
				<li>Understand how Deferrals, Choices, and Statuses can define the flow of the Process that uses Random Sampling to trigger <span class="No-Break">HITL review.</span></li>
				<li>Run the <a id="_idIndexMarker298"/>example to see the result in the <span class="No-Break">Control Room.</span></li>
			</ol>
			<h3>Example 1 – random sampling</h3>
			<p>The concept of<a id="_idIndexMarker299"/> random sampling is simple. First, generate a random number. Next, check to see whether the random number meets your criteria for human review. Despite this simple logic, the implementation of random sampling in a BP process requires using numerous BP features. In this example, we’ll look at an implementation of random sampling that uses a single Work Queue, Statuses, <span class="No-Break">and Deferrals.</span></p>
			<p>This example has already been developed, based on BP’s Process template. Our goal is to examine and understand the design elements used to implement random sampling for ML predictions for human review. The<a id="_idIndexMarker300"/> first step is to import the <span class="No-Break">Release file.</span></p>
			<h4>Examining the .bprelease contents</h4>
			<p>Let’s<a id="_idIndexMarker301"/> examine <em class="italic">Example 1</em>’s <strong class="source-inline">.bprelease</strong> contents before starting. Verify that one Process, one Work Queue, and one Environment Variable have <span class="No-Break">been imported:</span></p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/B18416_04_1.jpg" alt="Figure 4.1 – Example 1’s .bprelease file contents" width="324" height="204"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 – Example 1’s .bprelease file contents</p>
			<p>The Environment Variable named <strong class="source-inline">Ch4 Example 1 Random Sampling Target</strong> defaults to <strong class="bold">33.33</strong>, meaning that roughly one-third of the ML predictions in this Process will be chosen for <span class="No-Break">manual review.</span></p>
			<p>Next, let’s open the Process and examine the BP Stages related to <span class="No-Break">random sampling.</span></p>
			<h4>Generating random numbers</h4>
			<p>In<a id="_idIndexMarker302"/> this section, we’ll be seeing how the random sampling logic has been implemented. BP doesn’t have a direct method to generate random numbers. There are, broadly, three ways to generate random numbers in BP. The first is to download a release on the DX that has random number functionality (see <a href="https://digitalexchange.blueprism.com/dx/entry/3439/solution/utility---mathnet---random">https://digitalexchange.blueprism.com/dx/entry/3439/solution/utility---mathnet---random</a>). This DX asset requires a separate <strong class="source-inline">.dll</strong> file to be downloaded from NuGet. The second method is to create a new Object and add random number generation code into a <em class="italic">Code</em> Stage. The third way, which is used in this example, is through PowerShell’s <strong class="source-inline">Get-Random</strong> function. Note that I’m only using PowerShell to keep the <strong class="source-inline">.bprelease</strong> content simple. The preferred solution would be to have it in <span class="No-Break">an Object.</span></p>
			<ol>
				<li>Open <strong class="bold">Example 1 – Random Sampling</strong> Process in <em class="italic">Ch4</em> Group in the <span class="No-Break">Process Studio.</span></li>
				<li>Find <a id="_idIndexMarker303"/>the Block named <strong class="bold">Work</strong> on <strong class="source-inline">Main Page</strong>. This is where all of the major steps of the Process should belong. Let’s focus our attention on the <strong class="source-inline">03 Random Sampling</strong> Page, which contains the logic to perform <span class="No-Break">random sampling:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="image/B18416_04_2.jpg" alt="Figure 4.2 – Random sampling in the Work Block on the Main Page" width="910" height="795"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 – Random sampling in the Work Block on the Main Page</p>
			<ol>
				<li value="3">Open the <strong class="source-inline">03 Random Sampling</strong> Page. Double-click the <strong class="bold">Utility - Environment::Start Process Read Stderr and Stdout</strong> Action. See that we’re <a id="_idIndexMarker304"/>invoking PowerShell’s <strong class="source-inline">Get-Random</strong> function and passing in minimum and maximum values of <strong class="source-inline">1.0</strong> and <strong class="source-inline">100.0</strong>. The added decimal <strong class="source-inline">.0</strong> is important because it allows for decimal numbers to be generated. If omitted, <strong class="source-inline">Get-Random</strong> returns integer values. Decimals are needed since our random sampling target is also a decimal <span class="No-Break">number, 33.33.</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="image/B18416_04_3.jpg" alt="Figure 4.3 – Using PowerShell’s Get-Random to generate random numbers" width="607" height="294"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 – Using PowerShell’s Get-Random to generate random numbers</p>
			<ol>
				<li value="4">Double-click on the <em class="italic">Require Manual Review?</em> Decision Stage. Here, we compare the random number generated from PowerShell to the value of the Environment Variable. If the comparison is <strong class="bold">True</strong>, we set a Global Flag Data Item that is <a id="_idIndexMarker305"/>defined on the <span class="No-Break"><strong class="source-inline">Main Page</strong></span><span class="No-Break">:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="image/B18416_04_4.jpg" alt="Figure 4.4 – The criteria to determine whether manual review is needed" width="543" height="224"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 – The criteria to determine whether manual review is needed</p>
			<p>We’ve finished examining the random sampling logic. Next, let’s see how a Work Queue Item can be prevented from working while we wait for the HITL review <span class="No-Break">to complete.</span></p>
			<h4>Deferrals, Choices, and Statuses</h4>
			<p>The <strong class="source-inline">Main Page</strong> contains<a id="_idIndexMarker306"/> three important Stages that make up the logic <a id="_idIndexMarker307"/>needed to prevent Work Queue Items<a id="_idIndexMarker308"/> from proceeding while they’re pending review. We’ll be examining these three Stages – <em class="italic">Check Status</em>, <em class="italic">Manual Review</em>, and <em class="italic">Defer Item for Manual Review</em> – in this section of <span class="No-Break">the example:</span></p>
			<div>
				<div id="_idContainer101" class="IMG---Figure">
					<img src="image/B18416_04_5..jpg" alt="Figure 4.5 – The Stages that prevent Items from proceeding while reviews are pending" width="1562" height="977"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.5 – The Stages that prevent Items from proceeding while reviews are pending</p>
			<ol>
				<li>Return to the <strong class="source-inline">Main Page</strong> and double-click the <em class="italic">Manual Review?</em> Decision Stage. This Stage checks the flag that was set on the <strong class="source-inline">03 Random Sampling</strong> Page. If manual review is required, execution continues to the <strong class="source-inline">Defer Item for Manual </strong><span class="No-Break"><strong class="source-inline">Review</strong></span><span class="No-Break"> Page.</span></li>
				<li>Open the <strong class="source-inline">Defer Item for Manual Review</strong> Page. Only two things happen here. First, the <em class="italic">Status</em> of the current Work Queue Item is set to <strong class="bold">Manual Review Required</strong>. Next, the Work Queue Item is deferred for 10 minutes. The 10-minute deferral time is arbitrary and can be tuned to <span class="No-Break">your liking:</span></li>
			</ol>
			<div>
				<div id="_idContainer102" class="IMG---Figure">
					<img src="image/B18416_04_6..jpg" alt="Figure 4.6 – The Defer Item for Manual Review Page sets the Item Status and defers" width="177" height="342"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 – The Defer Item for Manual Review Page sets the Item Status and defers</p>
			<ol>
				<li value="3">Return to<a id="_idIndexMarker309"/> the <strong class="source-inline">Main Page</strong> and double-click <a id="_idIndexMarker310"/>the <em class="italic">Check Status</em> Choice Stage. In the<a id="_idIndexMarker311"/> context of this example, the Choice Stage is primarily used to continually defer items with the <strong class="bold">Manual Review Required</strong> Status until the Status changes to <strong class="bold">Manual </strong><span class="No-Break"><strong class="bold">Review Complete</strong></span><span class="No-Break">:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer103" class="IMG---Figure">
					<img src="image/B18416_04_7..jpg" alt="Figure 4.7 – Status checks stop deferred Items from progressing if they haven’t been reviewed" width="458" height="260"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 – Status checks stop deferred Items from progressing if they haven’t been reviewed</p>
			<p class="list-inset">Also see that the third Choice always sets the Manual Review Flag to <strong class="bold">True</strong> so that deferred Work Queue Items that haven’t been reviewed are <span class="No-Break">deferred again:</span></p>
			<div>
				<div id="_idContainer104" class="IMG---Figure">
					<img src="image/B18416_04_8..jpg" alt="Figure 4.8 – Deferral continues until the Status changes to Manual Review Complete" width="1594" height="997"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 – Deferral continues until the Status changes to Manual Review Complete</p>
			<p>If the Manual <a id="_idIndexMarker312"/>Review Flag is <strong class="bold">False</strong> (the randomly generated <a id="_idIndexMarker313"/>number was above or equal to 33.33), or if the<a id="_idIndexMarker314"/> Work Queue Item Status is changed to <strong class="bold">Manual Review Complete</strong>, automated processing <span class="No-Break">can continue.</span></p>
			<h4>Run the Process</h4>
			<p>Now, let’s run the<a id="_idIndexMarker315"/> Process once. The Process loads nine items into the Work Queue named <a href="B18416_05.xhtml#_idTextAnchor075"><span class="No-Break"><em class="italic">Chapter 5</em></span></a><em class="italic"> Example 1 Queue</em>. Since our sampling rate is 33.33%, we expect to see roughly three Items deferred for HITL review each time the Process <span class="No-Break">is run:</span></p>
			<ol>
				<li>Run the Process named <strong class="bold">Example 1 – Random Sampling</strong> in the <em class="italic">Ch4</em> Group from the Control Room. You will see the PowerShell window pop up each time that a prediction <span class="No-Break">is made.</span></li>
				<li>Click on <span class="No-Break"><strong class="bold">Chapter 4</strong></span><strong class="bold"> Example 1 Queue</strong> in the <em class="italic">Ch4</em> Group under <strong class="bold">Queue Management</strong>. Hopefully, you’ll see that some of the Work Queue Items are <strong class="bold">Completed</strong> while those randomly selected for manual review have been deferred, with the Status set to <strong class="bold">Manual Review Required</strong>. The Items with a <strong class="bold">Manual Review Required</strong> Status also have a deferral time, which is 10 minutes <span class="No-Break">from now:</span></li>
			</ol>
			<div>
				<div id="_idContainer105" class="IMG---Figure">
					<img src="image/B18416_04_9..jpg" alt="Figure 4.9 – Check that the Items needing manual review have been deferred" width="693" height="278"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 – Check that the Items needing manual review have been deferred</p>
			<p>We’ve completed <em class="italic">Example 1</em>. Here, we saw how <a id="_idIndexMarker316"/>Statuses, Choices, and Deferrals can be used to implement a <em class="italic">random sampling</em> strategy that prevents Items from being worked until they are manually reviewed. We also saw how to generate random numbers <span class="No-Break">through PowerShell.</span></p>
			<p>One point that we didn’t cover in <em class="italic">Example 1</em> was how to actually change the Status of an Item so that it can be picked up for processing again after a deferral. This will be discussed in <em class="italic">Example 3</em> of <span class="No-Break">this chapter.</span></p>
			<p>An alternate strategy to random sampling to choose which cases need human review involves using the predicted values and confidence scores. This is called <strong class="bold">thresholding</strong>, which is discussed in the <span class="No-Break">next section.</span></p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor071"/>Thresholding</h2>
			<p>Thresholding <a id="_idIndexMarker317"/>uses the <em class="italic">confidence score</em> and sometimes the <em class="italic">label</em> to determine which predictions need manual review. The idea is to choose a threshold value for the confidence score. If a prediction’s confidence score is <em class="italic">under </em>the threshold, the case is flagged for manual review, and if it’s <em class="italic">above,</em> automated processing <span class="No-Break">can continue.</span></p>
			<p>There are many examples of thresholding being used in real-life IA. In one case, a company decided to have three ranges of thresholds. The first threshold range of 0% to 90% was chosen to stop automated processing completely in favor of manual processing. Confidence scores between 90% and 99.5% were flagged for human review. Work Items with scores above 99.5% were allowed to continue IA without any review. This is an example of how we can have not just one threshold, <span class="No-Break">but many.</span></p>
			<p>Not only can there be multiple<a id="_idIndexMarker318"/> thresholds, but different labels can have their own thresholds as well. In a different real-life IA use case, there was an ML algorithm that predicted between over 70 classes. Some of these classes were predicted with high accuracy (&gt; 90%) whereas other classes were predicted with lower accuracy (&lt;75%). The IA team decided to set the confidence score threshold to higher values for predictions falling into the low-accuracy classes in order to make human validation more likely. For predictions into the highly accurate labels, the confidence score threshold was set to 0, allowing for fully automated processing as nothing would be flagged <span class="No-Break">for review.</span></p>
			<h3>Choosing threshold values</h3>
			<p>Thresholding<a id="_idIndexMarker319"/> requires the IA team to decide <span class="No-Break">the following:</span></p>
			<ul>
				<li>Which labels (numerical ranges for regression) <span class="No-Break">require thresholding?</span></li>
				<li>How many threshold intervals <span class="No-Break">are required?</span></li>
				<li>What the cutoff points of the thresholds <span class="No-Break">should be?</span></li>
			</ul>
			<p>There are no simple guidelines on how to set the threshold values, as they’re closely tied to how much risk the business can accept. A reasonable way to set this value is to perform experiments to estimate the number of incorrect predictions that result from setting the threshold at certain levels. Then, quantify the impact of getting an <span class="No-Break">incorrect prediction.</span></p>
			<p>Let’s say that we have an NLP model that extracts invoice IDs from invoices. After testing the model on 10 invoices, we have the <span class="No-Break">following results:</span></p>
			<table id="table001-3" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold">#</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Confidence Score</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Invoice </strong><span class="No-Break"><strong class="bold">ID correct?</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">1</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">87</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">2</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">57</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">No</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">3</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">46</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">No</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">4</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">67</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">No</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">5</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">78</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">6</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">93</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">7</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">72</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">8</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">53</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span lang="en-US" xml:lang="en-US">9</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">62</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">Yes</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">10</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">43</span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break" lang="en-US" xml:lang="en-US">No</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 4.1 – The results of trying to extract invoice IDs from 10 invoices</p>
			<p>Overall, the model has correctly extracted the invoice ID 6/10 times (60% of the time) for this small sample set. The IA team has decided to use <em class="italic">thresholding</em> and improve accuracy by manually<a id="_idIndexMarker320"/> reviewing predictions with low confidence scores. Predictions with a confidence score above the threshold will be processed automatically by BP without review. <em class="italic">Which threshold value is appropriate for the </em><span class="No-Break"><em class="italic">confidence score?</em></span></p>
			<p>If manual review <em class="italic">always </em>results in the correct invoice ID being extracted (note that this isn’t always the case), choosing different threshold values gives us <span class="No-Break">the following:</span></p>
			<table id="table002-2" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold">Confidence score </strong><span class="No-Break"><strong class="bold">threshold</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold"># of predictions under the threshold requiring </strong><span class="No-Break"><strong class="bold">manual review</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold"># of predictions above the threshold that are processed </strong><span class="No-Break"><strong class="bold">without review</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Accuracy of cases processed </strong><span class="No-Break"><strong class="bold">without review</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Accuracy of all cases including </strong><span class="No-Break"><strong class="bold">manual review</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">40</span></p>
						</td>
						<td class="No-Table-Style">
							<p>0</p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break">10</span></p>
						</td>
						<td class="No-Table-Style">
							<p>6/10 = <span class="No-Break">60%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>6/10 = <span class="No-Break">60%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">45</span></p>
						</td>
						<td class="No-Table-Style">
							<p>1</p>
						</td>
						<td class="No-Table-Style">
							<p>9</p>
						</td>
						<td class="No-Table-Style">
							<p>6/9 = <span class="No-Break">66.7%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>7/10 = <span class="No-Break">70%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">50</span></p>
						</td>
						<td class="No-Table-Style">
							<p>2</p>
						</td>
						<td class="No-Table-Style">
							<p>8</p>
						</td>
						<td class="No-Table-Style">
							<p>6/8 = <span class="No-Break">75%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>8/10 = <span class="No-Break">80%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">55</span></p>
						</td>
						<td class="No-Table-Style">
							<p>3</p>
						</td>
						<td class="No-Table-Style">
							<p>7</p>
						</td>
						<td class="No-Table-Style">
							<p>5/7 = <span class="No-Break">71%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>8/10 = <span class="No-Break">80%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">60</span></p>
						</td>
						<td class="No-Table-Style">
							<p>4</p>
						</td>
						<td class="No-Table-Style">
							<p>6</p>
						</td>
						<td class="No-Table-Style">
							<p>5/6 = <span class="No-Break">83.3%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>9/10 = <span class="No-Break">90%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">65</span></p>
						</td>
						<td class="No-Table-Style">
							<p>5</p>
						</td>
						<td class="No-Table-Style">
							<p>5</p>
						</td>
						<td class="No-Table-Style">
							<p>4/5 = <span class="No-Break">80%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>9/10 = <span class="No-Break">90%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">70</span></p>
						</td>
						<td class="No-Table-Style">
							<p>6</p>
						</td>
						<td class="No-Table-Style">
							<p>4</p>
						</td>
						<td class="No-Table-Style">
							<p>4/4 = <span class="No-Break">100%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>10/10 = <span class="No-Break">100%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">75</span></p>
						</td>
						<td class="No-Table-Style">
							<p>7</p>
						</td>
						<td class="No-Table-Style">
							<p>3</p>
						</td>
						<td class="No-Table-Style">
							<p>3/3 = <span class="No-Break">100%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>10/10 = <span class="No-Break">100%</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">80</span></p>
						</td>
						<td class="No-Table-Style">
							<p>8</p>
						</td>
						<td class="No-Table-Style">
							<p>2</p>
						</td>
						<td class="No-Table-Style">
							<p>2/2 = <span class="No-Break">100%</span></p>
						</td>
						<td class="No-Table-Style">
							<p>10/10 = <span class="No-Break">100%</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 4.2 – The accuracies of the automated portion and the overall accuracy of different threshold levels for the confidence score</p>
			<p>Having a high <a id="_idIndexMarker321"/>threshold value for the confidence score generally improves accuracy, but also results in more cases being flagged for manual review. Look at the threshold value of <em class="italic">80</em> in the preceding table. We can see that there’s perfect accuracy based on the 10 samples (column 5), but we need to manually review 8/10 of the predictions (<span class="No-Break">column 2).</span></p>
			<p>Setting a low threshold allows for more cases to be processed by BP automatically; however, the number of incorrect predictions that get actioned on also increases. For example, if the threshold is set to <em class="italic">45</em>, only one prediction needs to be reviewed (column 2), but 30% of the cases are processed based on an incorrect prediction (<span class="No-Break">column 5).</span></p>
			<p>Setting the <a id="_idIndexMarker322"/>threshold value is a <em class="italic">balancing act between the desired accuracy, the impact of working a case based on an incorrect prediction, and the number of cases you want to process without manual intervention</em>. We’ve already seen how the overall accuracy is related to the number of automated cases through <em class="italic">Table 4.2</em>. Next, we’ll discuss the impact of allowing automation to work a case based on an <span class="No-Break">incorrect prediction.</span></p>
			<h3>The impact of automating cases with incorrect ML predictions</h3>
			<p>In the example of <a id="_idIndexMarker323"/>extracting invoice IDs, the inherent riskiness of continuing processing depends on <span class="No-Break">many factors:</span></p>
			<ul>
				<li>How likely can an incorrectly extracted invoice match a genuine <span class="No-Break">invoice ID?</span></li>
				<li>Will manual review occur after the automation is complete so that ML prediction mistakes are caught <span class="No-Break">further downstream?</span></li>
				<li>How difficult is it to revise an incorrect invoice ID in the systems where it is persisted? Does it need to be done in many <span class="No-Break">different places?</span></li>
				<li>Will the invoice ID be submitted to <span class="No-Break">third-party systems?</span></li>
			</ul>
			<p>The business and IA teams will need to come up with an assessment of how much manual review is needed based on the criteria listed, <span class="No-Break">and more.</span></p>
			<p>In a multi-label classification case, each label can also have its own degree of riskiness. For example, if the NLP model for invoices also extracts numerical values, incorrectly labeling a number as a <em class="italic">price</em> is likely riskier than incorrectly labeling a number as the <span class="No-Break">invoice </span><span class="No-Break"><em class="italic">year</em></span><span class="No-Break">.</span></p>
			<p>The selected threshold values should be carefully considered by assessing the risks of using an incorrect prediction to continue processing. Different types of incorrect predictions may have different risk profiles, meaning that <em class="italic">accuracy is insufficient to determine the threshold</em> in <span class="No-Break">many cases.</span></p>
			<p>Now we should have an understanding of how thresholding works and how to potentially choose a threshold value for the confidence score. Next, let’s implement thresholding in BP through an example. In the following example, we will perform three <span class="No-Break">high-level steps:</span></p>
			<ol>
				<li>Examine the contents of the example’s Release file and download an Excel file that stores the threshold labels <span class="No-Break">and values.</span></li>
				<li>See how the thresholding logic is implemented <span class="No-Break">in BP.</span></li>
				<li>Run the example to see the result in the <span class="No-Break">Control Room.</span></li>
			</ol>
			<h3>Example 2 – thresholding</h3>
			<p>Suppose that <a id="_idIndexMarker324"/>we’re working for a company that sells products through e-commerce platforms such as Amazon, eBay, and Walmart. Our company uses RPA to collect user reviews that are left on those marketplace websites. As part of an initiative to improve customer relations and product quality, the company wants to determine whether user feedback is positive or not. If the feedback is negative, the comments will be sent to the customer service and product development teams for analysis <span class="No-Break">and follow-up.</span></p>
			<p>Recall that the Object created in <a href="B18416_03.xhtml#_idTextAnchor048"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">Example 3</em> does something similar to this. It uses ML.NET to detect <em class="italic">toxic</em> versus non toxic sentiment for user reviews. A random sampling scheme isn’t a good choice here, since we want to place more emphasis on reviewing negative rather than positive sentiment. We’ll instead use thresholding, to review potentially negative reviews more often than <span class="No-Break">positive ones.</span></p>
			<p>In terms of thresholds, the IA team together with the business users have done some testing to determine the threshold ranges and have chosen <span class="No-Break">the following:</span></p>
			<table id="table003-2" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold">Label</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Threshold </strong><span class="No-Break"><strong class="bold">Interval 1</strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">Threshold </strong><span class="No-Break"><strong class="bold">Interval 2</strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Non Toxic</span></p>
						</td>
						<td class="No-Table-Style">
							<p>0 &lt;= Confidence Score &lt; <span class="No-Break">75</span></p>
							<p><span class="No-Break">Manual review</span></p>
						</td>
						<td class="No-Table-Style">
							<p>75 &lt;= Confidence Score &lt;= <span class="No-Break">100</span></p>
							<p>Allow <span class="No-Break">automated processing</span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><span class="No-Break">Toxic</span></p>
						</td>
						<td class="No-Table-Style">
							<p class="list-inset">Always <span class="No-Break">Manual Review</span></p>
						</td>
						<td class="No-Table-Style"/>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 4.3 – The selected thresholds</p>
			<p>In this example, the BP Process’s high-level layout is more or less identical to the random sampling process in our previous example. The difference lies mostly in how we handle the threshold values so our attention will be <span class="No-Break">placed there.</span></p>
			<h4>Examine the .bprelease contents and download an Excel file</h4>
			<p>Let’s familiarize <a id="_idIndexMarker325"/>ourselves with the contents of the Release. There is one Process, one Work Queue, and one Environment Variable. The Environment Variable named <strong class="source-inline">Ch4 Example 2 Thresholds Excel File Full Path</strong> stores the path to the Excel file that contains the threshold values shown in <em class="italic">Table 4.3</em>. By default, it is set to <strong class="source-inline">C:/Users/Public/Ch4 Example 2 Thresholds.xlsx</strong>. We will need to download this Excel file from GitHub if it hasn’t <span class="No-Break">been already.</span></p>
			<div>
				<div id="_idContainer106" class="IMG---Figure">
					<img src="image/B18416_04_10..jpg" alt="Figure 4.10 – The Release file contents" width="350" height="201"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 – The Release file contents</p>
			<ol>
				<li>Download the <a id="_idIndexMarker326"/>Excel file <span class="No-Break">from </span><a href="https://github.com/PacktPublishing/Intelligent-Automation-with-Blue-Prism/blob/main/ch4/Ch4%20Example%202%20Thresholds.xlsx"><span class="No-Break">https://github.com/PacktPublishing/Intelligent-Automation-with-Blue-Prism/blob/main/ch4/Ch4%20Example%202%20Thresholds.xlsx</span></a><span class="No-Break">.</span></li>
				<li>Copy the <a id="_idIndexMarker327"/>Excel file into the <strong class="source-inline">C:\Users\Public</strong> folder and ensure that the file is named <strong class="source-inline">Ch4 Example </strong><span class="No-Break"><strong class="source-inline">2 Thresholds.xlsx</strong></span><span class="No-Break">.</span></li>
				<li>Open the Excel file. This file stores all of the thresholds for the different labels. According to the thresholds chosen in <em class="italic">Table 4.3</em>, the threshold is set to <em class="italic">75</em> for the <strong class="bold">Non Toxic</strong> label and <em class="italic">100</em> for the <strong class="bold">Toxic</strong> label. <em class="italic">100</em> means that everything will require manual review. While you can use Environment Variables to store threshold values, it can get difficult to manage if there are <span class="No-Break">multiple labels:</span></li>
			</ol>
			<div>
				<div id="_idContainer107" class="IMG---Figure">
					<img src="image/B18416_04_11..jpg" alt="Figure 4.11 – The threshold values stored in the Excel file" width="401" height="215"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 – The threshold values stored in the Excel file</p>
			<p>Next, let’s view the Process in the Process Studio and examine the BP stages related to thresholding. The portions of the Process related to Deferrals and Statuses won’t be covered as they were already discussed in <em class="italic">Example 1</em> of <span class="No-Break">this chapter.</span></p>
			<h4>Thresholding</h4>
			<p>Here, we’ll look at<a id="_idIndexMarker328"/> the areas of the BP Process that are relevant to the thresholding logic. This includes a Page that converts the threshold Excel file into a Collection, a Global Data Item, and a Decision Stage that checks the <span class="No-Break">threshold values.</span></p>
			<ol>
				<li>Open <strong class="bold">Example 2 – Thresholding</strong> Process in the <em class="italic">Ch4</em> Group in the <span class="No-Break">Process Studio.</span></li>
				<li>See that there’s a Page named <strong class="source-inline">Convert Thresholds to Collection</strong>. This Page maps the thresholds saved in the Excel file into a Collection. This <strong class="source-inline">Threshold</strong> Collection is stored on the <strong class="source-inline">Main Page</strong> as a Global <span class="No-Break">Data Item:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer108" class="IMG---Figure">
					<img src="image/B18416_04_12..jpg" alt="Figure 4.12 – The Excel thresholds are converted into a Collection" width="463" height="238"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 – The Excel thresholds are converted into a Collection</p>
			<ol>
				<li value="3">Open the <strong class="source-inline">03 Thresholding</strong> Page. There are two things to notice. First, we’re filtering the <strong class="source-inline">Threshold</strong> Collection by the label that was predicted for this Work Queue Item run. This allows us to set thresholds on a per-label basis. Next, there’s a <em class="italic">Decision</em> Stage right before the End Stage that contains the logic to determine whether this Item needs <span class="No-Break">manual review:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer109" class="IMG---Figure">
					<img src="image/B18416_04_13..jpg" alt="Figure 4.13 – The thresholding logic in the Decision Stage" width="543" height="295"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 – The thresholding logic in the Decision Stage</p>
			<h4>Run the Process</h4>
			<p><em class="italic">Example 2</em> loads 10 static user <a id="_idIndexMarker329"/>reviews into the Work Queue. There is one toxic user review, which is correctly labeled as toxic. There’s another user review that is predicted as non toxic, but at low confidence, necessitating HITL review. In total, 2 of the 10 reviews should be deferred as <span class="No-Break">a result:</span></p>
			<ol>
				<li>Run the Process named <strong class="bold">Example 2 – Thresholding </strong>under the<em class="italic"> Ch4</em> Group in the <em class="italic">Control Room</em>. Wait for the Session <span class="No-Break">to finish.</span></li>
				<li>Click on <span class="No-Break"><strong class="bold">Chapter 4</strong></span><strong class="bold"> Example 2 Queue </strong>under <span class="No-Break"><strong class="bold">Queue Management</strong></span><span class="No-Break">.</span></li>
				<li>See that two of the Items are deferred due to needing <span class="No-Break">manual review:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer110" class="IMG---Figure">
					<img src="image/B18416_04_14..jpg" alt="Figure 4.14 – Check that the Items needing manual review have been deferred" width="335" height="296"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 – Check that the Items needing manual review have been deferred</p>
			<p>We’ve now seen how we can design <em class="italic">random sampling</em> and <em class="italic">thresholding</em> into a BP Process. Both methods use the same overall design structure, which includes using Status and Defer. Choosing between random sampling and thresholding is a business decision rather than a <span class="No-Break">technical one.</span></p>
			<p>Up until now, we’ve conveniently ignored how reviewers can submit reviewed predictions back into BP. This is the topic of the <span class="No-Break">next section.</span></p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor072"/>How can we share prediction data between prediction reviewers and BP?</h1>
			<p>In the two<a id="_idIndexMarker330"/> previous examples, we didn’t show how corrected predictions can be fed back into BP so that the cases can resume. To enable this, we need a place to share data between BP and the reviewer. There are four common ways to <span class="No-Break">achieve this:</span></p>
			<ol>
				<li>By copying the prediction data to a shared <span class="No-Break">folder location</span></li>
				<li>By uploading the prediction data through programmatic or <span class="No-Break">API calls</span></li>
				<li>By storing the prediction data in <span class="No-Break">a database</span></li>
				<li>By sending data through email or other <span class="No-Break">messaging services</span></li>
			</ol>
			<p>The preceding list isn’t exhaustive; for instance, an FTP could be used. However, using a shared folder and API calls are the most common ways to share the data needed to correct predictions between BP and <span class="No-Break">the reviewer.</span></p>
			<p>We also need to consider whether there’s an SLA concern, meaning that reviews must be completed within a certain timeframe to ensure that the rest of the processing can complete on time. If that is the case, we may want to choose a review method with inherent notification, such as email or <span class="No-Break">instant messaging.</span></p>
			<h2 id="_idParaDest-72"><a id="_idTextAnchor073"/>Reviewing predictions through shared folders</h2>
			<p>Sharing data between humans and <a id="_idIndexMarker331"/>digital workers through <em class="italic">shared folders </em>is a common RPA practice. However, when shared folders are used to review ML predictions, the design becomes more complex, as there are more factors to consider. Some examples are <span class="No-Break">as follows:</span></p>
			<ul>
				<li>What <em class="italic">file format</em> (user interface) is most appropriate? Examples include plain text files, Excel files, HTML documents, and so on. This depends on how much and what kind of data needs to be presented to the reviewer. If we’re verifying whether a block of text has been labeled correctly, a text file might be good enough. If we have tabular input data, such as shop ID, product ID, price, and so on, Excel might be more appropriate. If we need to display an image to the reviewer, we can consider using a <span class="No-Break">web-based interface.</span></li>
				<li><em class="italic">How many predictions</em> belong in each file? Is it just one, or can we batch reviews together? This depends on the volume of review cases, the complexity of the review <a id="_idIndexMarker332"/>process, SLAs, and the number of people available to <span class="No-Break">review predictions.</span></li>
				<li>How does BP know whether the review has <span class="No-Break">been </span><span class="No-Break"><em class="italic">completed</em></span><span class="No-Break">?</span></li>
			</ul>
			<p>Let’s explore these design considerations by expanding <strong class="bold">Example 1 – Random Sampling</strong> Process to include shared folders as the interface to transfer prediction data between the reviewers <span class="No-Break">and BP.</span></p>
			<h3>Example 3 – copying data through shared folders</h3>
			<p>In <strong class="bold">Example 1 – Random Sampling</strong> Process, we <a id="_idIndexMarker333"/>predict whether a customer will churn based on their characteristics, such as job category, and the number of points they have in the loyalty plan. Since this is tabular data, we’ll choose to present this data for review <span class="No-Break">through </span><span class="No-Break"><em class="italic">Excel</em></span><span class="No-Break">.</span></p>
			<p>With a random sampling rate of 33.33%, many predictions will need to be reviewed. The business also believes that reviewing a single case is not straightforward. Based on these two factors, the team has decided to <em class="italic">batch predictions into five per Excel file</em> so that the review work can be spread among multiple reviewers, while not overwhelming any one reviewer by having them to do too many reviews <span class="No-Break">at once.</span></p>
			<p>Our goal for this example is to see how we can build a prediction review scheme that involves using shared folders and batching multiple predictions into Excel files. At a high level, we’ll be going through the following <span class="No-Break">six steps:</span></p>
			<ol>
				<li>Examine the contents of the example’s <span class="No-Break">Release file.</span></li>
				<li>See how predictions needing review are first written into an Excel file in a temporary folder, and how the Excel file can be moved to a “ready to review” folder once the batch size <span class="No-Break">is met.</span></li>
				<li>See how reviewers can review predictions in the Excel file, and inform BP that the review is complete by copying the file to a “completed <span class="No-Break">review” folder.</span></li>
				<li>Understand the BP logic to recognize and further work on Items that have completed <span class="No-Break">human review.</span></li>
				<li>See how to copy leftover reviews in the temporary folder if the full batch size isn’t met before the <span class="No-Break">Session ends.</span></li>
				<li>Run the <a id="_idIndexMarker334"/>example to see the result in the <span class="No-Break">Control Room.</span></li>
			</ol>
			<h4>Examine the .bprelease contents</h4>
			<p>This example is <a id="_idIndexMarker335"/>pre-built and equivalent to the Process in <em class="italic">Example 1 – Random Sampling</em> with a number of additions. The important additions will be highlighted as we go through this <span class="No-Break">example together.</span></p>
			<p>Verify that you’ve imported one Process, one Work Queue, and five Environment Variables. One of the Environment Variables, <strong class="bold">Ch4 Example 3 Random Sampling Target</strong>, is the same as in <em class="italic">Example 1</em>. It stores the percentage of predictions (<strong class="bold">33.33</strong>) that we want to review. <strong class="bold">Ch4 Example 3 Review Batch Size</strong> stores the number of predictions we want to write into each Excel file (<strong class="bold">5</strong>). Three of the other Environment Variables are file paths and are used to facilitate the data sharing between BP and <span class="No-Break">the reviewer:</span></p>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer111" class="IMG---Figure">
					<img src="image/B18416_04_15..jpg" alt="Figure 4.15 – The Release file contents" width="402" height="291"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 – The Release file contents</p>
			<h4>Writing Excel files to the shared folder</h4>
			<p>Two of the <a id="_idIndexMarker336"/>five Environment Variables are file paths used to store the Excel files that will be presented to the reviewer. <strong class="bold">Ch4 Example 3 To Review Folder Path</strong> is a file share folder that <em class="italic">should be accessible to the reviewers</em>. The Process will copy Excel files into this folder, indicating that predictions need to be reviewed. Reviewers should regularly check this folder to see whether there are any Excel <span class="No-Break">files within.</span></p>
			<p><strong class="source-inline">Ch4 Example 3 Temporary Review Folder Path</strong> is a folder that’s needed due to the complications introduced by batching multiple reviews into a single Excel file. Reviewers don’t need access to this folder, so it can be any <em class="italic">local folder</em> that BP can write to. The purpose of this temporary folder is to prevent reviewers from opening and locking the Excel files before all five reviews are written to the file. Each prediction will first be written to this temporary path until it reaches the batch size, after which the Excel file will be moved to a folder that is accessible to <span class="No-Break">the reviewer.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">When writing the prediction to the Excel file, we include all of the input data that is fed into the ML algorithm. In addition, we also need to provide the <em class="italic">Item ID</em> so that we can map this prediction back to the Item in the BP Work Queue. Reviewers need to be informed to not modify the <em class="italic">Item ID</em> that appears in <span class="No-Break">the spreadsheet.</span></p>
			<p>Next, let’s look at the <span class="No-Break">Process diagram:</span></p>
			<ol>
				<li>Open <strong class="bold">Example 3 - Random Sampling with Shared Folders</strong> in the <em class="italic">Ch4</em> Group in the <span class="No-Break">Process Studio.</span></li>
				<li>Open the <strong class="source-inline">Defer Item for Manual </strong><span class="No-Break"><strong class="source-inline">Review</strong></span><span class="No-Break"> Page.</span></li>
				<li>Look at the Block named <em class="italic">Do not Reset to Initial Value</em>. Writing into the same Excel file between different Work Queue Items for batching requires two Data Items that do not reset to their Initial Value when the Page is rerun. <strong class="bold">Current Batch Count</strong> keeps track of how many predictions have been written into the current Excel file. <strong class="bold">Excel File Name</strong> stores a unique filename that contains both the name of the Runtime Resource and the timestamp. Including the name of the <a id="_idIndexMarker337"/>Runtime Resource in the Excel filename is an important part of the logic design, as it allows the Digital Worker to know which files it has created in the <span class="No-Break">shared folder.</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer112" class="IMG---Figure">
					<img src="image/B18416_04_16..jpg" alt="Figure 4.16 – Two Data Items that don’t reset their values" width="338" height="207"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.16 – Two Data Items that don’t reset their values</p>
			<ol>
				<li value="4">Examine the Block named <strong class="source-inline">Writing the Temporary Excel file</strong>. The logic inside the Block writes one prediction to a <em class="italic">temporary</em> file. This temporary file should be inaccessible to <span class="No-Break">the reviewer:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer113" class="IMG---Figure">
					<img src="image/B18416_04_17..jpg" alt="Figure 4.17 – Writing one prediction to a temporary file" width="538" height="1030"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.17 – Writing one prediction to a temporary file</p>
			<p class="list-inset">The <em class="italic">Yes</em> path of the <em class="italic">Create New Excel File?</em> Decision Stage is used to create a new Excel file. The <em class="italic">No</em> path is for writing into an existing Excel file for batching reviews together. These are done in the <span class="No-Break"><em class="italic">temporary</em></span><span class="No-Break"> folder.</span></p>
			<ol>
				<li value="5">Look at the<a id="_idIndexMarker338"/> four Stages that immediately follow the <em class="italic">Writing the Temporary Excel File</em> Block. After writing the temporary file to the shared folder, we increment the <strong class="source-inline">Current Batch Count</strong> and check to see whether the desired batch size (stored as an Environment Variable) has been reached. If so, we move the file from <strong class="source-inline">Ch4 Example 3 Temporary Review Folder Path</strong> to <strong class="source-inline">Ch4 Example 3 To Review Folder Path</strong>, which is the shared folder <a id="_idIndexMarker339"/>that is accessible to <span class="No-Break">the reviewer:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer114" class="IMG---Figure">
					<img src="image/B18416_04_18..jpg" alt="Figure 4.18 – Move the file from the temporary local folder to a reviewer-accessible one" width="549" height="602"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.18 – Move the file from the temporary local folder to a reviewer-accessible one</p>
			<h4>Understanding what the reviewer does</h4>
			<p>This section of the <a id="_idIndexMarker340"/>example explains what reviewers are expected to do. We won’t be performing any actions here. Reviewers should regularly monitor <strong class="bold">Ch4 Example 3 To Review Folder Path</strong> for new Excel files. Reviewers should open the file and change the <strong class="bold">label</strong> column (column I in the following figure) to the correct label. They can leave the label the same if they believe that the prediction <span class="No-Break">is accurate:</span></p>
			<div>
				<div id="_idContainer115" class="IMG---Figure">
					<img src="image/B18416_04_19..jpg" alt="Figure 4.19 – Reviewers should open the Excel file and edit the label column" width="836" height="179"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.19 – Reviewers should open the Excel file and edit the label column</p>
			<p>After editing and saving the Excel file, reviewers should cut/paste the file into the path specified by the <strong class="bold">Ch4 Example 3 Completed Review Folder Path</strong> Environment Variable. The BP Process will check this folder, loop through all of the Excel files and their rows, and change each of the Item’s Statuses to allow processing <span class="No-Break">to continue.</span></p>
			<p>If we need to <a id="_idIndexMarker341"/>allow a Work Queue Item to bypass HITL review, we can change its <em class="italic">Status</em> manually in the Control Room and modify its <em class="italic">Deferral</em> time to an <span class="No-Break">earlier </span><span class="No-Break"><strong class="bold">DateTime</strong></span><span class="No-Break">.</span></p>
			<h4>Checking for reviewed predictions and updating Item Statuses</h4>
			<p>Let’s<a id="_idIndexMarker342"/> understand the logic <a id="_idIndexMarker343"/>that checks for <span class="No-Break">completed reviews:</span></p>
			<ol>
				<li>Visit the <strong class="source-inline">Main Page</strong> of the Process. See that there’s a Page named <strong class="source-inline">Check for Reviewed Predictions</strong> that appears before <strong class="bold">Get </strong><span class="No-Break"><strong class="bold">Next Item</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer116" class="IMG---Figure">
					<img src="image/B18416_04_20..jpg" alt="Figure 4.20 – Checking for completed reviews happens before the Work Queue Item processing" width="496" height="603"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.20 – Checking for completed reviews happens before the Work Queue Item processing</p>
			<ol>
				<li value="2">Open the <strong class="source-inline">Check for Reviewed Predictions</strong> Page. This Page loops through all of the Excel files in <strong class="bold">Ch4 Example 3 Completed Review Folder</strong> and reads all of the rows. It then tries to <em class="italic">lock</em> each Item based on the Item ID so that its <em class="italic">Status</em> can be updated. After updating the Status, the Item is unlocked, allowing it to be picked up in the Work <span class="No-Break">Queue again.</span></li>
				<li>Locate <a id="_idIndexMarker344"/>the four <a id="_idIndexMarker345"/>Stages shown in the <span class="No-Break">following figure:</span></li>
			</ol>
			<div>
				<div id="_idContainer117" class="IMG---Figure">
					<img src="image/B18416_04_21..jpg" alt="Figure 4.21 – Lock the Item, update the Status, and unlock it" width="1067" height="738"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.21 – Lock the Item, update the Status, and unlock it</p>
			<p class="list-inset">If we successfully update the <em class="italic">Status</em> of an Item, a <strong class="bold">Rewrite Excel Needed</strong> Flag is set, indicating that the Process will need to remove some rows (reviewed predictions) from the Excel file. Removing a row from the completed Excel file means that the Item can continue the processing <span class="No-Break">steps post-review.</span></p>
			<p class="list-inset">If we’re unable to lock the Item, we set a different Flag, <strong class="source-inline">Failed to Lock</strong>, saying that we encountered a problem with this Excel file. Any Items that we fail to lock are added to a new Collection for tracking purposes. The Items that we fail to update the Status for will not be deleted from the Excel file so that they can be checked again on future <span class="No-Break">Session runs.</span></p>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer118" class="IMG---Figure">
					<img src="image/B18416_04_22..jpg" alt="Figure 4.22 – Store the items that fail to lock into a Collection" width="1067" height="738"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.22 – Store the items that fail to lock into a Collection</p>
			<ol>
				<li value="4">Locate<a id="_idIndexMarker346"/> the two<a id="_idIndexMarker347"/> Stages shown in the following figure. If the <strong class="bold">Failed to Lock</strong> flag indicates that we’ve successfully updated <em class="italic">all</em> of the Item Statuses for this Excel file, delete the Excel file from <span class="No-Break">the folder:</span></li>
			</ol>
			<div>
				<div id="_idContainer119" class="IMG---Figure">
					<img src="image/B18416_04_23..jpg" alt="Figure 4.23 – Delete the file if we successfully update the Statuses of all five predictions" width="805" height="310"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.23 – Delete the file if we successfully update the Statuses of all five predictions</p>
			<ol>
				<li value="5">Locate the six Stages shown in the <span class="No-Break">following figure:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer120" class="IMG---Figure">
					<img src="image/B18416_04_24..jpg" alt="Figure 4.24 – Remove Excel rows where the Status is updated successfully" width="805" height="989"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.24 – Remove Excel rows where the Status is updated successfully</p>
			<p>If the <a id="_idIndexMarker348"/>Process fails to <a id="_idIndexMarker349"/>update the Status for some of the Items, overwrite the Excel file so that it contains only those failed rows (which were separately saved in <span class="No-Break"><em class="italic">Figure 4</em></span><em class="italic">.22</em>). This removes the predictions from the Excel file where the Status was successfully updated. On the next Session run, this <strong class="source-inline">Check for Reviewed Predictions</strong> Page will be executed, and the Process will attempt to update the Status of those <span class="No-Break">Items again.</span></p>
			<h4>Cleaning up files in the temporary folder</h4>
			<p>It’s possible for<a id="_idIndexMarker350"/> Excel files to get stuck in <strong class="bold">Ch4 Example 3 Temporary Review Folder Path</strong>. If there’s an Exception, or a Request Stop before the batch size is met, the file won’t be moved to <strong class="bold">Ch4 Example 3 To Review Folder Path</strong>. In order to prevent these files from being forgotten, we copy all remaining files to the temporary folder right<a id="_idIndexMarker351"/> before Session execution ends, on the <strong class="source-inline">Close </strong><span class="No-Break"><strong class="source-inline">Down</strong></span><span class="No-Break"> page:</span></p>
			<ol>
				<li>Open the <strong class="source-inline">Close Down</strong> Page. See that there’s a <strong class="source-inline">Move Temporary Files</strong> Page right <span class="No-Break">before End.</span></li>
				<li>Open the <strong class="source-inline">Move Temporary Files</strong> Page. This Page loops through all of the files in the temporary folder and moves them only if they were created by this specific Runtime Resource. Files in this folder that are created by other Runtime Resources will not be moved. This is achieved by <em class="italic">checking for the full Runtime Resource name in the Excel </em><span class="No-Break"><em class="italic">files’ filenames</em></span><span class="No-Break">.</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer121" class="IMG---Figure">
					<img src="image/B18416_04_25..jpg" alt="Figure 4.25 – The Move Temporary Files Page" width="698" height="643"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.25 – The Move Temporary Files Page</p>
			<h4>Run the Process</h4>
			<p>We’ve now seen an<a id="_idIndexMarker352"/> implementation of HITL review with BP using Excel and shared folders. Next, we need to test the Process. When run, 30 customers will be randomly generated and the algorithm predicts whether they will churn or not. At a random sampling rate of 33.33%, we expect roughly 10 predictions to need <span class="No-Break">manual review.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">When testing <em class="italic">Example 3</em>, do <em class="italic">not </em>mix between running in the Control Room and the Process Studio. This is because the Process Studio appends <strong class="source-inline">_DEBUG </strong>to the end of the Runtime Resource name. In the <strong class="source-inline">Move Temporary Files</strong> and <strong class="source-inline">Defer Item for Manual Review</strong> Pages, we use the Runtime Resource name in the Excel filename. If we run the Process once in the Process Studio and once in the Control Room, the Runtime Resource names will not match up and the <strong class="source-inline">Move Temporary Files</strong> Page will not move some of the Excel files to the <span class="No-Break">review folder.</span></p>
			<ol>
				<li>Start <strong class="bold">Example 3 – Random Sampling with Shared Folders </strong>Process in the <em class="italic">Ch4</em> Group from the Control Room. Wait for the Session <span class="No-Break">to complete.</span></li>
				<li>Open the <a id="_idIndexMarker353"/>Control Room and click on <span class="No-Break"><strong class="bold">Chapter 4</strong></span><strong class="bold"> Example 3 Queue</strong>. There should be numerous Items that are waiting for manual review. Make a note of the number of Items that need review. In the following figure, there <span class="No-Break">are seven:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer122" class="IMG---Figure">
					<img src="image/B18416_04_26..jpg" alt="Figure 4.26 – Count the Items waiting for manual review" width="347" height="255"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.26 – Count the Items waiting for manual review</p>
			<ol>
				<li value="3">Open the folder corresponding to <strong class="bold">Ch4 Example 3 To Review Folder Path</strong> in Windows. The number of Excel files in this folder should be the <em class="italic">(number of items that need review)/5</em>, rounded up. For example, if you have seven Items that need manual review, we should have two <span class="No-Break">Excel files.</span></li>
				<li>Open each <a id="_idIndexMarker354"/>Excel file and ensure that the cumulative number of rows in each file (excluding the header) equals the number of Items that need review. Based on the screen capture in <em class="italic">step 2</em>, our first file should have five rows and our second file should <span class="No-Break">have two.</span></li>
				<li>Cut and paste all of the Excel files in <strong class="bold">Ch5 Example 3 To Review Folder Path</strong> to <strong class="bold">Ch5 Example 3 Completed Review Folder Path</strong>. This simulates completing all of the ML <span class="No-Break">prediction reviews.</span></li>
				<li>Visit the <strong class="bold">System</strong> area of BP. Change the <strong class="bold">Ch4 Example 3 Random Sampling Target</strong> Environment Variable from 33.33 to 0 and click <strong class="bold">Apply</strong>. This turns off random sampling for the next Session run, meaning that none of the 30 new Items will need to be <span class="No-Break">manually reviewed.</span></li>
				<li>Wait for the Deferral time to pass for all of the deferred Work <span class="No-Break">Queue Items.</span></li>
				<li>Run the Process again from the Control Room. A new batch of 30 customers will be created and predicted against. Wait for the Session <span class="No-Break">to finish.</span></li>
				<li>Open the Control Room and click on <span class="No-Break"><strong class="bold">Chapter 4</strong></span><strong class="bold"> Example 3 Queue</strong>. All 60 Work Queue Items should be marked as Complete, with no items needing <span class="No-Break">manual review.</span></li>
				<li>Open each of the folders that correspond to <strong class="bold">Ch4 Example 3 To Review Folder Path</strong>, <strong class="bold">Ch4 Example 3 Temporary Review Folder Path</strong>, and <strong class="bold">Ch4 Example 3 Completed Review Folder</strong> in Windows. All three folders should <span class="No-Break">be empty.</span></li>
			</ol>
			<p>In this example, we showed how to implement HITL reviews using shared folders in BP. Due to the tabular format of the prediction input data, we chose Excel as the interface to review predictions. Multiple prediction reviews were batched together and saved into a single file. We<a id="_idIndexMarker355"/> also designed a shared folder structure that prevents the Digital Worker and the human reviewer from opening the same Excel <span class="No-Break">files concurrently.</span></p>
			<p>After reviewing, reviewers manually move Excel files into a <em class="italic">completed</em> folder. BP reads the completed Excel files and changes the Status of Work Queue Items so that they can be picked up for processing again. Finally, we also saw how we can set the random sampling Environment Variable to 0, turning off random <span class="No-Break">sampling altogether.</span></p>
			<h1 id="_idParaDest-73"><a id="_idTextAnchor074"/>Summary</h1>
			<p>The key difference between RPA and IA lies in IA’s use of ML algorithms. This shifts our process from having deterministic outcomes to non-deterministic ones. As automated outcomes become less predictable, our business risk increases <span class="No-Break">as well.</span></p>
			<p>This leads to the idea of bringing humans back into the loop to verify and correct a portion (not necessarily all) of the ML predictions. This gives us an ongoing measure of how accurate the ML predictions are – given that accuracy is known to drift over time. It also gives us a way to operationally reduce risk and hedge against future <span class="No-Break">regulatory risk.</span></p>
			<p>There are two primary methods used in real life to determine which predictions need reviewing. The first is random sampling, where a fixed percentage of all predictions is chosen for review. Random sampling doesn’t look at the predicted values in any way. The next is thresholding, which looks at the confidence score and sometimes the predicted label. If a prediction’s confidence score is under the threshold value, it’s marked for review. If the confidence score is above, automated <span class="No-Break">processing continues.</span></p>
			<p>Choosing an appropriate threshold is a complex topic. A single label can have multiple threshold intervals. We can also have different thresholds for different labels. A reasonable way to set the threshold values is through experimentation and discussion with the business users. Threshold values will never be perfect – trade-offs between the desired accuracy, the impact of working a case based on an incorrect prediction, and the number of cases you want to process without manual intervention must <span class="No-Break">be made.</span></p>
			<p>We can design other schemes to determine which cases need human review. For example, we could have a formula that changes the random sampling rate based on the number of pending items in the Work Queue if we have a fixed number of reviewers with SLAs to meet. However, I haven’t encountered anything more complicated than standard random sampling and thresholding being used after examining over 100 real-life IA <span class="No-Break">use cases.</span></p>
			<p>Examples of both random sampling and thresholding were provided, and their design elements were discussed. In our design, we used Statuses, Deferrals, shared folders, and a single Work Queue to achieve an end-to-end HITL solution for reviewing ML predictions. In the next chapter, we will move away from the <em class="italic">single</em>-Work Queue design and discuss how and why we might want to design an IA process with <em class="italic">multiple</em> <span class="No-Break">Work Queues.</span></p>
		</div>
	</div>
</div>
</body></html>