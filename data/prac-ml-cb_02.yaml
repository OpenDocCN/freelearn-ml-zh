- en: Chapter 2. Classification
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章. 分类
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下食谱：
- en: Discriminant function analysis - geological measurements on brines from wells
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 判别函数分析 - 对来自井的卤水进行地质测量
- en: Multinomial logistic regression - understanding program choices made by students
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多项式逻辑回归 - 理解学生做出的课程选择
- en: Tobit regression - measuring students' academic aptitude
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 托比特回归 - 测量学生的学术能力
- en: Poisson regression - understanding species present in Galapagos Islands
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 泊松回归 - 理解加勒比海群岛上的物种
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: '**Discriminant analysis** is used to distinguish distinct sets of observations
    and allocate new observations to previously defined groups. For example, if a
    study was to be carried out in order to investigate the variables that discriminate
    between fruits eaten by (1) primates, (2) birds, or (3) squirrels, the researcher
    could collect data on numerous fruit characteristics of those species eaten by
    each of the animal groups. Most fruits will naturally fall into one of the three
    categories. Discriminant analysis could then be used to determine which variables
    are the best predictors of whether a fruit will be eaten by birds, primates, or
    squirrels. Discriminant analysis is commonly used in biological species classification,
    in medical classification of tumors, in facial recognition technologies, and in
    the credit card and insurance industries for determining risk. The main goals
    of discriminant analysis are discrimination and classification. The assumptions
    regarding discriminant analysis are multivariate normality, equality of variance-covariance
    within group and low multicollinearity of the variables.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**判别分析**用于区分不同的观测集，并将新的观测分配到先前定义的组中。例如，如果一项研究旨在调查区分（1）灵长类动物、（2）鸟类或（3）松鼠所食用的水果的变量，研究人员可以收集关于每个动物群体所食用的水果的众多特征数据。大多数水果自然会落入三个类别之一。然后可以使用判别分析来确定哪些变量是预测水果是否被鸟类、灵长类动物或松鼠食用的最佳预测变量。判别分析常用于生物物种分类、肿瘤的医学分类、面部识别技术以及信用卡和保险行业中的风险评估。判别分析的主要目标是判别和分类。关于判别分析的前提假设包括多元正态性、组内方差协方差相等以及变量的低多重共线性。'
- en: '**Multinomial logistic regression** is used to predict categorical placement
    in or the probability of category membership on a dependent variable, based on
    multiple independent variables. It is used when the dependent variable has more
    than two nominal or unordered categories, in which dummy coding of independent
    variables is quite common. The independent variables can be either dichotomous
    (binary) or continuous (interval or ratio in scale). Multinomial logistic regression
    uses maximum likelihood estimation to evaluate the probability of categorical
    membership. It uses maximum likelihood estimation rather than the least squares
    estimation used in traditional multiple regression. The general form of the distribution
    is assumed. The starting values of the estimated parameters are used and the likelihood
    that the sample came from a population with those parameters is computed. The
    values of the estimated parameters are adjusted iteratively until the maximum
    likelihood value for the estimated parameters is obtained.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**多项式逻辑回归**用于根据多个自变量预测因变量的分类位置或类别成员的概率。当因变量有超过两个名义或无序类别时使用，此时独立变量的虚拟编码相当常见。独立变量可以是二元的（二进制）或连续的（尺度上的区间或比率）。多项式逻辑回归使用最大似然估计来评估类别成员的概率。它使用最大似然估计而不是传统多元回归中使用的最小二乘估计。假设分布的一般形式。使用估计参数的起始值，并计算样本来自具有这些参数的群体的似然性。通过迭代调整估计参数的值，直到获得估计参数的最大似然值。'
- en: '**Tobit regression** is used to describe the relationship between non-negative
    dependent variables and independent variables. It is also known as a censored
    regression model, designed to estimate linear relationships between variables
    when there is either left or right censoring in the dependent variable. Censoring
    takes place when cases with a value at or above some threshold, all take on the
    value of that threshold, so that the true value might be equal to the threshold,
    but it might also be higher. The Tobit model has been used in a large number of
    applications where the dependent variable is observed to be zero for some individuals
    in the sample (automobile expenditures, medical expenditures, hours worked, wages,
    and so on). This model is for metric dependent variables and then it is limited
    in the sense that we observe it only if it is above or below some cut off level.
    For example:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**Tobit回归**用于描述非负因变量与自变量之间的关系。它也被称为截断回归模型，旨在估计变量之间的线性关系，当因变量中存在左截断或右截断时。截断发生在具有某个阈值或以上值的案例中，所有这些案例都采用该阈值的价值，因此真实值可能等于该阈值，但也可能更高。Tobit模型已在大量应用中使用，其中样本中的一些个体的因变量被观察到为零（汽车支出、医疗支出、工作时间、工资等）。此模型适用于度量因变量，并且它在观察到的值仅在它高于或低于某个截断水平时才被观察到的意义上是有限的。例如：'
- en: The wages may be limited from below by the minimum wage
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工资可能因最低工资限制而从下限受限。
- en: The donation amount given to charity
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捐赠给慈善机构的金额
- en: Top coding income
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶码收入
- en: Time used and leisure activity of individuals
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 个人的时间使用和休闲活动
- en: '**Poisson regression** deals with situations in which the dependent variable
    is a count. Poisson regression is similar to regular multiple regression except
    that the dependent (Y) variable is an observed count that follows the Poisson
    distribution. Thus, the possible values of Y are the nonnegative integers: 0,
    1, 2, 3, and so on. It is assumed that large counts are rare. Hence, Poisson regression
    is similar to logistic regression, which also has a discrete response variable.
    However, the response is not limited to specific values as it is in logistic regression.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**泊松回归**处理因变量为计数的情形。泊松回归类似于常规的多重回归，除了因变量（Y）是一个遵循泊松分布的观察计数。因此，Y的可能值是非负整数：0，1，2，3，等等。假设大计数是罕见的。因此，泊松回归类似于逻辑回归，后者也有一个离散的响应变量。然而，响应值并不限于特定值，正如逻辑回归中的那样。'
- en: Discriminant function analysis - geological measurements on brines from wells
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 鉴别函数分析 - 来自井的卤水地质测量
- en: Let us assume that a study of ancient artifacts that have been collected from
    mines needs to be carried out. Rock samples have been collected from the mines.
    On the collected rock samples geochemical measurements have been carried out.
    A similar study has been carried out on the collected artifacts. In order to separate
    the samples into the mine from which they were excavated, DFA can be used as a
    function. The function can then be applied to the artifacts to predict which mine
    was the source of each artifact.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 假设需要对从矿山收集的古文物进行研究。已经从矿山收集了岩石样本。在收集的岩石样本上进行了地球化学测量。对收集到的文物也进行了类似的研究。为了将样本分离到它们挖掘的矿山，可以使用DFA作为函数。然后可以将该函数应用于文物以预测每个文物的来源矿山。
- en: Getting ready
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: In order to perform discriminant function analysis we shall be using a dataset
    collected from mines.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行鉴别函数分析，我们将使用从矿山收集的数据集。
- en: Step 1 - collecting and describing data
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集和描述数据
- en: 'The dataset on data analysis in geology titled `BRINE` shall be used. This
    can be obtained from [http://www.kgs.ku.edu/Mathgeo/Books/Stat/ASCII/BRINE.TXT](http://www.kgs.ku.edu/Mathgeo/Books/Stat/ASCII/BRINE.TXT)
    . The dataset is in a standard form, with rows corresponding to samples and columns
    corresponding to variables. Each sample is assigned to a stratigraphic unit, listed
    in the last column. There are 19 cases and eight variables in the dataset. The
    eight numeric measurements include the following:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 应使用名为`BRINE`的地质数据分析数据集。这可以从[http://www.kgs.ku.edu/Mathgeo/Books/Stat/ASCII/BRINE.TXT](http://www.kgs.ku.edu/Mathgeo/Books/Stat/ASCII/BRINE.TXT)
    获取。数据集采用标准形式，行对应样本，列对应变量。每个样本被分配到一个地层单元，列在最后一列列出。数据集中有19个案例和8个变量。八个数值测量包括以下内容：
- en: '`No`'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`No`'
- en: '`HCO3`'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HCO3`'
- en: '`SO4`'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SO4`'
- en: '`CL`'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CL`'
- en: '`CA`'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CA`'
- en: '`MG`'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MG`'
- en: '`NA`'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NA`'
- en: '`Group`'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Group`'
- en: How to do it...
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Let's get into the details.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解。
- en: Step 2 - exploring data
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'The first step is to load the following package:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是加载以下包：
- en: '[PRE0]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.2.3 (2015-12-10)'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在R版本3.2.3（2015-12-10）中进行了测试
- en: 'Let''s explore the data and understand the relationships among the variables.
    We''ll begin by importing the txt data file named `brine.txt`. We will be saving
    the data to the `brine` data frame, as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索数据并了解变量之间的关系。我们将从导入名为`brine.txt`的txt数据文件开始。我们将把数据保存到`brine`数据框中，如下所示：
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next we shall print the `brine` data frame. The `head()` function returns the
    `brine` data frame. The `brine` data frame is passed as an input parameter. Use
    the following code:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们将打印`brine`数据框。`head()`函数返回`brine`数据框。将`brine`数据框作为输入参数传递。使用以下代码：
- en: '[PRE2]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The results are as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: DFA assumes multivariate normality. The data must be checked to verify the normality
    before performing the analysis.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: DFA假设多元正态性。在进行分析之前，必须检查数据以验证正态性。
- en: 'In order to verify the appropriateness of the transformation, plotting of the
    data is carried out. The `pairs` `()` function is used to plot the data. It produces
    a matrix of scatterplots. The cross-plots should only compare the measurement
    variables in columns 1-6, the last (7th column) is the name of the group. Consider
    the following:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 为了验证转换的适当性，执行数据绘图。使用`pairs` `()`函数绘制数据。它产生一个散点矩阵。交叉图应仅比较第1-6列的测量变量，最后一列（第7列）是组名。考虑以下内容：
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The plot is as shown in the following screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图形如下所示：
- en: '![Step 2 - exploring data](img/image_02_001.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![第2步 - 探索数据](img/image_02_001.jpg)'
- en: Step 3 - transforming data
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 转换数据
- en: 'It is visible that the data has a comet-shaped distribution pattern. This indicates
    that log transformation of the data is required, which is common for geochemical
    data. It is good practice to first make a copy of the entire dataset, and then
    apply the log transformation only to the geochemical measurements. Since the data
    includes zeros as well; `log+1` transformation should be carried out instead of
    `log` transformation on the dataset. The `brine` data frame is copied to the `brine.log`
    data frame. The log transformation on the data frame is carried out. As stated
    earlier, log transformation is carried out. Look at the following code:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 可以明显看出数据具有彗星形状的分布模式。这表明需要对数据进行对数转换，这在地球化学数据中很常见。一个好的做法是首先复制整个数据集，然后只对地球化学测量值应用对数转换。由于数据中包含零；应对数据集执行`log+1`转换而不是`log`转换。将`brine`数据框复制到`brine.log`数据框。对数据框执行对数转换。如前所述，执行对数转换。查看以下代码：
- en: '[PRE5]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'After the data transformation, in order to re-evaluate the normality condition
    using the `pairs()` function data frame, `brine.log` is replotted. The distribution
    appears to be more normal. The skewness has been reduced compared to the earlier
    plot:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 数据转换后，为了使用`pairs()`函数数据框重新评估正态性条件，重新绘制`brine.log`。分布看起来更接近正态。与之前的图形相比，偏度已经降低：
- en: '[PRE6]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The plot is as shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图形如下所示：
- en: '![Step 3 - transforming data](img/image_02_002.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![第3步 - 转换数据](img/image_02_002.jpg)'
- en: Step 4 - training the model
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第4步 - 训练模型
- en: 'The next step is about training the model. This is carried out by discriminant
    function analysis. The `lda()` function is called to perform discriminant function
    analysis as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是训练模型。这是通过判别函数分析来完成的。调用`lda()`函数执行判别函数分析，如下所示：
- en: '[PRE7]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The format of this call is much like a linear regression or ANOVA, in that
    we specify a formula. Here, the `GROUP` variable should be treated as the dependent
    variable, with the geochemical measurements as the independent variables. In this
    case, no interactions between the variables are being modeled, so the variables
    are added with `+` instead of `*`. Because `attach()` was not called, the name
    of the data frame must be supplied to the data parameter. After running the DFA,
    the first step is to view the results, as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这个调用的格式与线性回归或方差分析非常相似，即我们指定一个公式。在这里，`GROUP`变量应被视为因变量，地球化学测量值作为自变量。在这种情况下，没有建模变量之间的交互作用，因此变量通过`+`而不是`*`添加。由于没有调用`attach()`，必须提供数据框的名称作为数据参数。运行DFA后，第一步是查看结果，如下所示：
- en: '[PRE8]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The results are as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE9]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The first part of the output displays the formula that was fitted.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输出的第一部分显示了拟合的公式。
- en: The second section is the prior probabilities of the groups, which reflects
    the proportion of each group within the dataset. In other words, if you had no
    measurements and the number of measured samples represented the actual relative
    abundances of the groups, the prior probabilities would describe the probability
    that any unknown sample would belong to each of the groups.
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二部分是组的先验概率，它反映了每个组在数据集中的比例。换句话说，如果你没有任何测量，并且测量的样本数量代表了组的实际相对丰度，那么先验概率将描述任何未知样本属于每个组的概率。
- en: The third section shows the group means, which is a table of the average value
    of each of the variables for each of your groups. Scanning this table can help
    you to see if the groups are distinctive in terms of one or more of the variables.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三部分显示了组均值，这是一个表格，列出了每个组中每个变量的平均值。扫描这个表格可以帮助你看到组是否在某个或多个变量方面具有独特性。
- en: The fourth section reports the coefficients of the discriminant function (a,
    b, and c). Because there are three groups, there are 3-1 linear discriminants
    (if you had only two groups, you would need only 1 [2-1] linear discriminants).
    For each linear discriminant (`LD1` and `LD2`), there is one coefficient corresponding,
    in order, to each of the variables.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四部分报告了判别函数的系数（a、b 和 c）。因为有三个组，所以有 3-1 个线性判别函数（如果你只有两个组，你只需要 1 个 [2-1] 线性判别函数）。对于每个线性判别函数（`LD1`
    和 `LD2`），有一个系数依次对应于每个变量。
- en: Finally, the fifth section shows the proportion of the trace, which gives the
    variance explained by each discriminant function. Here, first the discriminant
    explains 75% of the variance, with the remainder explained by the second discriminant.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，第五部分显示了迹的比率，它给出了每个判别函数解释的方差。在这里，首先判别函数解释了 75% 的方差，其余的方差由第二个判别函数解释。
- en: Step 5 - classifying the data
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 5 步 - 分类数据
- en: 'The `predict()` function, also part of the `MASS` package, uses the `lda()`
    results to assign the samples to the groups. In other words, since `lda()` derived
    a linear function that should classify the groups, `predict()` allows you to apply
    this function to the same data to see how successful the classification function
    is. Following the statistical convention that x-hat is the prediction of x, (hat
    is added to the object name to make it clear that these are the predictions).
    Consider the following:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '`predict()` 函数，也是 `MASS` 包的一部分，使用 `lda()` 的结果将样本分配到组中。换句话说，由于 `lda()` 推导出一个线性函数，该函数应该用于分类组，因此
    `predict()` 允许您将此函数应用于相同的数据以查看分类函数的成功程度。遵循统计惯例，x-hat 是 x 的预测（在对象名称中添加帽子以使其清晰，这些是预测）。考虑以下内容：'
- en: '[PRE10]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Let us print `brine.log.hat` as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们按照以下方式打印 `brine.log.hat`：
- en: '[PRE11]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The results are as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE12]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The output starts with the assigned classifications of each of our samples.
    Next, it lists the posterior probabilities of each sample to each group, with
    the probabilities in each row (that is, for each sample) summing to 1.0\. These
    posterior probabilities measure the strength of each classification. If one of
    these probabilities for a sample is much greater than all the others, that sample
    is assigned to one group with a high degree of certainty. If two or more of the
    probabilities are nearly equal, the assignment is much less certain. If there
    are many groups, the following command is a quick way to find the maximum probability
    for each sample:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 输出从每个样本的分配分类开始。接下来，它列出了每个样本对每个组的后验概率，其中每行的概率（即，对于每个样本）总和为 1.0。这些后验概率衡量了每个分类的强度。如果一个样本的这些概率中有一个远大于其他所有概率，那么这个样本就非常确定地分配到了一个组。如果有两个或更多概率几乎相等，那么分配就不是很确定。如果有许多组，以下命令是快速找到每个样本最大概率的方法：
- en: '[PRE13]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Since most of the probabilities in the dataset are large (>0.9), this indicates
    that most of the samples in the set have been assigned to one group.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 由于数据集中的大部分概率都很大（>0.9），这表明该集合中的大多数样本已经被分配到了一个组。
- en: 'If most of these probabilities are large, the overall classification is successful.
    The last part of the `predict()` output lists the scores of each sample for each
    discriminant function axis. These scores can be plotted to show graphically how
    the groups are distributed in the discriminant function, just as scores from a
    principal components analysis could be plotted, as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些概率中的大多数都很大，则整体分类成功。`predict()`输出的最后部分列出了每个样本在每个判别函数轴上的得分。这些得分可以绘制成图，以图形方式显示组在判别函数中的分布，就像主成分分析得分可以绘制一样，如下所示：
- en: '[PRE14]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The three groups occupy distinctly different and non-overlapping regions. There
    is just one case of group 1 being close to group 2, so one can clearly state that
    the discrimination has been successful.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 三个组占据明显不同且不重叠的区域。只有一个第1组靠近第2组，因此可以清楚地声明判别是成功的。
- en: 'The plot is as shown in the following figure:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图如下所示：
- en: '![Step 5 - classifying the data](img/image_02_003.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![第5步 - 分类数据](img/image_02_003.jpg)'
- en: 'A second type of plot shows the data plot along a particular discriminant function
    axis as follows:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种类型的图显示了数据沿特定判别函数轴的分布，如下所示：
- en: '[PRE15]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![Step 5 - classifying the data](img/image_02_004.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![第5步 - 分类数据](img/image_02_004.jpg)'
- en: Again, note the good separation of the groups along discriminant function 1,
    and particularly so for group 2.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 再次注意，组在判别函数1上的分离很好，尤其是第2组。
- en: Step 6 - evaluating the model
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第6步 - 评估模型
- en: 'The effectiveness of DFA in classifying the groups must be evaluated, and this
    is done by comparing the assignments made by `predict()` to the actual group assignments.
    The `table()` function is most useful for this. By convention, it is called with
    the actual assignments as the first argument and the fitted assignments as the
    second argument, as follows:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 必须评估DFA在分类组中的有效性，这是通过比较`predict()`所做的分配与实际组分配来完成的。`table()`函数对此非常有用。按照惯例，它使用实际分配作为第一个参数，拟合分配作为第二个参数，如下所示：
- en: '[PRE16]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Printing the value of tab.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 打印制表符的值。
- en: '[PRE17]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The results are as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE18]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The rows in the output correspond to the groups specified in the original data
    and the columns correspond to the classification made by the DFA. In a perfect
    classification, large values would lie along the diagonal, with zeroes off the
    diagonal, which would indicate that all samples that belong to group 1 were discriminated
    by the DFA as belonging to group 1, and so on. The form of this table can give
    you considerable insight into which groups are reliably discriminated. It can
    also show which groups are likely to be confused and which types of misclassification
    are more common than others. The following command will calculate the overall
    predictive accuracy, that is, the proportion of cases that lie along the diagonal:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 输出的行对应于原始数据中指定的组，列对应于DFA所做的分类。在完美的分类中，大值将沿对角线排列，对角线外的值为零，这表明所有属于第1组的样本都被DFA判别为属于第1组，依此类推。这种表格的形式可以让你对哪些组被可靠地区分开来有相当大的洞察力。它还可以显示哪些组可能被混淆，以及哪些类型的误分类比其他类型更常见。以下命令将计算整体预测准确率，即沿对角线排列的案例比例：
- en: '[PRE19]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The result is as follows:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE20]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Here the predictive accuracy is almost 95%, quite a success. This approach measures
    what is called the resubstitution error, how well the samples are classified when
    all the samples are used to develop the discriminant function.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这里预测准确率几乎为95%，相当成功。这种方法衡量的是所谓的重置误差，即当所有样本都用于开发判别函数时，样本被分类得有多好。
- en: 'A second approach for evaluating a DFA is leave-one-out cross-validation (also
    called jackknifed validation), which excludes one observation. This approach of
    evaluating DFA uses the data that has been left out, that is, excluding one observation.
    We are now left with n - 1 observation. This cross-validation technique is done
    automatically for each sample in the dataset. To do this, add `CV=TRUE` (think
    Cross-validation) to the `lda()` call as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 评估DFA的第二种方法是留一法交叉验证（也称为刀切验证），它排除一个观测值。这种评估DFA的方法使用被排除的数据，即排除一个观测值。我们现在剩下n -
    1个观测值。这种交叉验证技术会自动对数据集中的每个样本进行。为此，将`CV=TRUE`（考虑交叉验证）添加到`lda()`调用中，如下所示：
- en: '[PRE21]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The success of the discrimination can be measured similarly, as follows:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 可以用类似的方式衡量判别的成功，如下所示：
- en: '[PRE22]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Print the value of tab as follows:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式打印制表符的值：
- en: '[PRE23]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The result is as follows:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE24]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The result is as follows:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE25]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: In this dataset, the jackknifed validation is considerably less accurate (only
    79% accurate), reflecting that the resubstitution error always overestimates the
    performance of a DFA. Such a discrepancy is particularly common with small datasets
    such as this, and discriminant function analysis is often much more successful
    with large datasets.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个数据集中，Jackknife验证的准确性相当低（只有79%的准确性），反映出重置误差总是高估DFA的性能。这种差异在这个小型数据集中尤其常见，而判别函数分析在大数据集中通常要成功得多。
- en: Multinomial logistic regression - understanding program choices made by students
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多项式逻辑回归 - 理解学生做出的课程选择
- en: Let's assume that high school students are to be enrolled on a program. The
    students are given the opportunity to choose programs of their choice. The choices
    of the students are based on three options. These choices are general program,
    vocational program, and academic program. The choice of each student is based
    on each student's writing score and social economic status.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 假设高中生将被录取到某个课程。学生有机会选择他们喜欢的课程。学生的选择基于三个选项。这些选择是一般课程、职业教育课程和学术课程。每个学生的选择基于每个学生的写作分数和社会经济状况。
- en: Getting ready
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to complete this recipe we shall be using a student's dataset. The
    first step is collecting the data.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这个食谱，我们将使用一个学生数据集。第一步是收集数据。
- en: Step 1 - collecting data
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集数据
- en: 'The student''s dataset titled `hsbdemo` is being utilized. The dataset is available
    at: [http://voia.yolasite.com/resources/hsbdemo.csv](http://voia.yolasite.com/resources/hsbdemo.csv)
    in an MS Excel format. There are 201 data rows and 13 variables in the dataset.
    The eight numeric measurements are as follows:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 正在使用标题为 `hsbdemo` 的学生数据集。数据集以MS Excel格式提供，可在以下网址找到：[http://voia.yolasite.com/resources/hsbdemo.csv](http://voia.yolasite.com/resources/hsbdemo.csv)。数据集中有201个数据行和13个变量。八个数值测量值如下：
- en: '`id`'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`id`'
- en: '`read`'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read`'
- en: '`write`'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`write`'
- en: '`math`'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`math`'
- en: '`science`'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`science`'
- en: '`socst`'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`socst`'
- en: '`awards`'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`awards`'
- en: '`cid`'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cid`'
- en: 'The non-numeric measurements are as follows:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 非数值测量值如下：
- en: '`gender`'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gender`'
- en: '`ses`'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ses`'
- en: '`schtyp`'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`schtyp`'
- en: '`prog`'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prog`'
- en: '`honors`'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`honors`'
- en: How to do it...
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let's get into the details.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring data
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'The first step is loading the packages. The `library ()` returns an error if
    the package does not exist. Use the following commands:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是加载包。如果包不存在，`library()` 函数会返回错误。请使用以下命令：
- en: '[PRE26]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Note
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.2.3 (2015-12-10).'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在R版本3.2.3（2015-12-10）上进行了测试。
- en: 'Exploring the data throws some light on the relationships of the data. The
    CSV file titled `hsbdemo.csv` needs to be imported in the R environment. The imported
    data is saved in the data frame titled `ml` as follows:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 探索数据使数据的关联关系更加清晰。标题为 `hsbdemo.csv` 的CSV文件需要导入到R环境中。导入的数据被保存在标题为 `ml` 的数据框中，如下所示：
- en: '[PRE27]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Exploring the descriptive statistics of the variables that are of interest
    is to be carried out using the `with()` function as follows:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `with()` 函数执行对感兴趣的变量的描述性统计探索，如下所示：
- en: '[PRE28]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The results are as follows:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE29]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Let us obtain the mean and the standard deviation as follows:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们按照以下方式获取平均值和标准差：
- en: '[PRE30]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The results are as follows:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE31]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The mean is the highest for academic and the standard deviation is the highest
    for general.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 平均值最高的是学术课程，标准差最高的是普通课程。
- en: Step 3 - training the model
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 训练模型
- en: In order to estimate multinomial logistic regression, the `multinom()` function
    is used. The `multinom()` function does not require the reshaping of the data.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 为了估计多项式逻辑回归，使用 `multinom()` 函数。`multinom()` 函数不需要对数据进行重塑。
- en: 'It is important to choose a reference group for the outcome. We can choose
    the level of our outcome that we wish to use as our baseline. This is specified
    in the `relevel ()` function. Then, we run our model using the `multinom()` function.
    Since no p-value calculations are carried out for the regression coefficients,
    p-value tests are carried out using Wald tests (z-tests). The formula mentioned
    in the `multinom()` function is of the form response ~ predictors. The data frame
    `ml` is the data frame to interpret the variables occurring in the formula, as
    follows:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 选择结果参考组很重要。我们可以选择我们希望用作基线的结果水平。这由`relevel()`函数指定。然后，我们使用`multinom()`函数运行我们的模型。由于没有对回归系数进行p值计算，因此使用Wald测试（z测试）进行p值测试。`multinom()`函数中提到的公式形式为response
    ~ predictors。数据框`ml`是要解释公式中出现的变量的数据框，如下所示：
- en: '[PRE32]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'The results are as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE33]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '[PRE34]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The results are as follows:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE35]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Next, the test summary of coefficients is divided by the test summary of standard
    errors, as follows:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，将系数的测试总结除以标准误差的测试总结，如下所示：
- en: '[PRE37]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Display the value of `z` as follows:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式显示`z`的值：
- en: '[PRE38]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'The results are as follows:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE39]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Step 4 - testing the results of the model
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第4步 - 测试模型的输出结果
- en: 'A two-tailed z test is carried out as follows:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 进行双尾z测试，如下所示：
- en: '[PRE40]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Display the value of p as follows:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式显示p的值：
- en: '[PRE41]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'The results are as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE42]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: Step 5 - model improvement performance
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第5步 - 提高模型性能
- en: Relative risk is defined as the ratio between choosing one outcome category
    and choosing the baseline category. The relative risk is the exponential of the
    right-hand side of the linear equation. The exponential regression coefficients
    are relative risk ratios for a unit change in the predictor variable.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 相对风险定义为选择一个结果类别与选择基线类别之间的比率。相对风险是线性方程右侧的指数。指数回归系数是预测变量单位变化的相对风险比。
- en: 'Extract the coefficients from the model and perform an exponential on it as
    follows:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 从模型中提取系数，并按如下方式对其进行指数运算：
- en: '[PRE43]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The results are as follows:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE44]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The relative risk ratio for a one-unit increase in the variable write is `.9437`
    for being in a general program versus an academic program. The relative risk ratio
    switching from `ses = 1` to `3` is `.3126` for being in a general program versus
    an academic program. Use the probabilities that have been predicted to get an
    insight into the model. The `fitted()` function is used to calculate predicted
    probabilities for each of our outcome levels as follows:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 变量write增加一个单位时，相对于普通项目与学术项目的相对风险比是`.9437`。从`ses = 1`切换到`3`时，相对于普通项目与学术项目的相对风险比是`.3126`。使用预测的概率来深入了解模型。使用`fitted()`函数按如下方式计算每个结果级别的预测概率：
- en: '[PRE45]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'The results are as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE46]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Examine the changes in probability associated with one of the two variables, `ses`
    and `write`. Create small datasets varying one variable while holding the other
    one constant. First, hold the write variable at its mean and then examine the
    predicted probability for each level of the `ses` variable as follows:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 检查与两个变量之一（`ses`和`write`）相关的概率变化。创建小数据集，改变一个变量而保持另一个变量不变。首先，将write变量保持在平均值，然后按如下方式检查`ses`变量每个级别的预测概率：
- en: '[PRE47]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'The results are as follows:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE48]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Looking at the average predicted probabilities for different values of the
    continuous predictor variable, using predicted probabilities as follows:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查看不同连续预测变量值的平均预测概率，使用如下预测概率：
- en: '[PRE49]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Store the predicted probabilities for each value of `ses` and write as follows:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 将每个`ses`值的预测概率存储下来，并按如下方式写入：
- en: '[PRE50]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Calculate the mean probabilities within each level of `ses` as follows:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式计算`ses`每个级别的平均概率：
- en: '[PRE51]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The results are as follows:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE52]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Sometimes, a couple of plots can convey a good deal of information. Using the
    predictions we generated for the `pp.write` object previously, we can plot the
    predicted probabilities against the writing score by the level of `ses` for different
    levels of the outcome variable. The `melt()` function takes data in wide format
    and stacks a set of columns into a single column of data. The `lpp` data frame
    is used to specify the data frame as follows:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，几个图表可以传达大量信息。使用我们之前为`pp.write`对象生成的预测，我们可以根据`ses`的不同水平绘制预测概率与写作分数的关系图。`melt()`函数将宽格式数据转换为单列数据。`lpp`数据帧用于指定数据帧如下：
- en: '[PRE53]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Print the values for `head` as follows:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下方式打印`head`的值：
- en: '[PRE54]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'The results are as follows:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE55]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Next we plot predicted probabilities across write values for each level of
    `ses` facetted by program type as follows:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们按`ses`的每个水平绘制预测概率与写作值的关系图，按项目类型细分如下：
- en: '[PRE56]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '![Step 5 - model improvement performance](img/image_02_005.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![第5步 - 模型改进性能](img/image_02_005.jpg)'
- en: Tobit regression - measuring the students' academic aptitude
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Tobit回归 - 测量学生的学术能力
- en: 'Let us measure the academic aptitude of a student on a scale of 200-800\. This
    measurement is based on the model using reading and math scores. The nature of
    the program in which the student has been enrolled is also to be taken into consideration.
    There are three types of programs: academic, general, and vocational. The problem
    is that some students may answer all the questions on the academic aptitude test
    correctly and score 800 even though it is likely that these students are not truly
    equal in aptitude. This may be true for all the students who may answer all the
    questions incorrectly and score 200.'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们测量学生在200-800分范围内的学术能力。这种测量基于阅读和数学分数的模型。学生所注册的项目的性质也需考虑。有三种类型的课程：学术、普通和职业。问题是，一些学生可能正确回答学术能力测试的所有问题，得分800分，尽管这些学生可能并不真正在能力上相等。这可能适用于所有可能回答所有问题错误并得分200分的学生。
- en: Getting ready
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to complete this recipe we shall be using a student's dataset. The
    first step is collecting the data.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这个食谱，我们将使用一个学生的数据集。第一步是收集数据。
- en: Step 1 - collecting data
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集数据
- en: 'To develop the Tobit regression model we shall use the student dataset titled
    tobit, which is available at [http://www.ats.ucla.edu/stat/data/tobit.csv](http://www.ats.ucla.edu/stat/data/tobit.csv)
    in an MS Excel format. There are 201 data rows and five variables in the dataset.
    The four numeric measurements are as follows:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 为了开发Tobit回归模型，我们将使用名为tobit的学生数据集，该数据集以MS Excel格式存储在[http://www.ats.ucla.edu/stat/data/tobit.csv](http://www.ats.ucla.edu/stat/data/tobit.csv)。数据集中有201个数据行和五个变量。四个数值测量值如下：
- en: '`id`'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`id`'
- en: '`read`'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read`'
- en: '`math`'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`math`'
- en: '`apt`'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`apt`'
- en: 'The non-numeric measurement is as follows:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 非数值测量值如下：
- en: '`prog`'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prog`'
- en: How to do it...
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Let's get into the details.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring data
  id: totrans-214
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'The first step is to load the following packages. The `require()` function
    is designed for use inside other functions; it returns `FALSE` and gives a warning
    (rather than an error as `library ()` does by default) if the package does not
    exist. Use the following commands:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是加载以下包。`require()`函数是为在其它函数中使用而设计的；如果包不存在，它返回`FALSE`并给出警告（而不是默认的`library()`函数产生的错误）。使用以下命令：
- en: '[PRE57]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: Note
  id: totrans-217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.2.3 (2015-12-10)'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在R版本3.2.3（2015-12-10）上进行了测试
- en: 'Explore the data and understand the relationships among the variables. Begin
    by importing the CSV data file named `gala.txt`. This will save the data to the
    `dat` data frame as follows:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 探索数据并理解变量之间的关系。首先导入名为`gala.txt`的CSV数据文件。这将数据保存到`dat`数据帧中如下：
- en: '[PRE58]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'In this dataset, the lowest value of `apt` is 352\. This indicates that no
    student has received the lowest score of 200\. Even though censoring from below
    was possible, it is not required in this dataset. Use the following command:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个数据集中，`apt`的最小值是352。这表明没有学生得到最低的200分。尽管存在向下截断的可能性，但在这个数据集中并不需要。使用以下命令：
- en: '[PRE59]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'The results are as follows:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE60]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: Step 3 - plotting data
  id: totrans-225
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 绘制数据
- en: 'Write is a function that gives the density of a normal distribution for a given
    mean and standard deviation, which has been scaled on the count metric. In order
    to generate the histogram formulate count as *density * sample size * bin* width
    use the following code:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '`Write` 是一个函数，它给出了给定均值和标准差的正态分布密度，该密度已在计数度量上进行了缩放。为了生成直方图，使用以下代码将计数表示为 *密度
    * 样本大小 * 箱宽：'
- en: '[PRE61]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Now we shall set up the base plot as follows:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将按照以下方式设置基础图表：
- en: '[PRE62]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Now we shall prepare a histogram, colored by proportion in different programs
    with a normal distribution overlaid as follows:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将准备一个按不同项目比例着色的直方图，并叠加正态分布，如下所示：
- en: '[PRE63]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'The histogram plotted is shown in the following figure:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制的直方图如下所示：
- en: '![Step 3 - plotting data](img/image_02_006.jpg)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 绘制数据](img/image_02_006.jpg)'
- en: Looking at the preceding histogram, we can see the censoring in the values of
    `apt`, that is, there are far more cases with scores between 750 to 800 than one
    would expect compared to the rest of the distribution.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 观察前面的直方图，我们可以看到 `apt` 值的截断，也就是说，与分布的其他部分相比，得分在 750 到 800 之间的案例数量远多于预期。
- en: In the following alternative histogram, the excess of cases where `apt`=800
    have been highlighted. In the following histogram, the breaks option produces
    a histogram where each unique value of `apt` has its own bar (by setting breaks
    equal to a vector containing values from the minimum of `apt` to the maximum of
    apt). Because `apt` is continuous, most values of `apt` are unique in the dataset,
    although close to the center of the distribution there are a few values of apt
    that have two or three cases.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下替代直方图中，`apt`=800 的情况过剩已被突出显示。在以下直方图中，breaks 选项产生一个直方图，其中 `apt` 的每个唯一值都有自己的条形（通过将
    breaks 设置为包含 `apt` 最小值和最大值值的向量的向量）。因为 `apt` 是连续的，所以数据集中大多数 `apt` 的值是唯一的，尽管在分布的接近中心处有几个
    `apt` 的值有两个或三个案例。
- en: 'The spike on the far right of the histogram is the bar for cases where `apt`=800,
    the height of this bar, relative to all the others, clearly shows the excess number
    of cases with this value. Use the following command:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图最右侧的峰值是 `apt`=800 的情况的条形，这个条形的高度相对于其他所有条形，清楚地显示了具有此值的案例数量过剩。使用以下命令：
- en: '[PRE64]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '![Step 3 - plotting data](img/image_02_007.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 绘制数据](img/image_02_007.jpg)'
- en: Step 4 - exploring relationships
  id: totrans-239
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 4 - 探索关系
- en: 'The following command enables use to explore the bivariate relationships in
    the dataset:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令使我们能够探索数据集中的双变量关系：
- en: '[PRE65]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The results are as follows:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE66]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Now plot the matrix as follows:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 现在按照以下方式绘制矩阵：
- en: '[PRE67]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '![Step 4 - exploring relationships](img/image_02_008.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 探索关系](img/image_02_008.jpg)'
- en: In the first row of the scatterplot matrix, the scatterplots display a relationship
    between read and apt. The relationship between math and apt is also established.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在散点图矩阵的第一行中，散点图显示了 `read` 和 `apt` 之间的关系。也建立了 `math` 和 `apt` 之间的关系。
- en: Step 5 - training the model
  id: totrans-248
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 5 - 训练模型
- en: 'Run the Tobit model, using the `vglm` function of the VGAM package using this
    command:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 VGAM 包中的 `vglm` 函数运行 Tobit 模型，使用以下命令：
- en: '[PRE68]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'The results are as follows:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE69]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '[PRE70]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '[PRE71]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: The preceding output informs us about the options specified.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的输出告诉我们指定了哪些选项。
- en: The table labeled coefficients gives the coefficients their standard errors
    and the z-statistic. No p-values are included in the summary table.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 标有系数的表格给出了系数、标准误差和 z 统计量。总结表中不包含 p 值。
- en: 'The interpretation of the Tobit regression coefficients is similar to that
    of OLS regression coefficients. The linear coefficients effect is on the uncensored
    latent variable:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: Tobit 回归系数的解释与 OLS 回归系数类似。线性系数影响未截断的潜在变量：
- en: For a one-unit increase in read, there is a `2.6981` point increase in the predicted
    value of `apt`.
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 `read` 增加 1 个单位，`apt` 的预测值增加 `2.6981` 分。
- en: A one-unit increase in `math` is associated with a `5.9146` unit increase in
    the predicted value of `apt`.
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`math` 增加 1 个单位与 `apt` 预测值增加 `5.9146` 个单位相关。'
- en: The terms for `prog` have a slightly different interpretation. The predicted
    value of apt is `-46.1419` points lower for students in a vocational program than
    for students in an academic program.
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prog` 的术语有略微不同的解释。对于职业教育项目中的学生，预测的 `apt` 值比学术项目中的学生低 `46.1419` 分。'
- en: The coefficient labeled `(Intercept):1` is the intercept or constant for the
    model.
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标有 `(Intercept):1` 的系数是模型的截距或常数。
- en: The coefficient labeled `(Intercept):2` is an ancillary statistic. Exponential
    of this value, is analogous to the square root of the residual variance in OLS
    regression. The value of `65.6773` can be compared to the standard deviation of
    academic aptitude, which was `99.21`, a substantial reduction.
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标记为`(Intercept):2`的系数是一个辅助统计量。此值的指数与OLS回归中残差方差的平方根类似。`65.6773`的值可以与学术能力倾向的标准差`99.21`进行比较，这是一个显著的降低。
- en: The final log likelihood, `-1041.0629`, is shown toward the bottom of the output;
    it can be used in comparisons of nested models.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 最终对数似然值为`-1041.0629`，显示在输出结果的底部；它可以用于嵌套模型的比较。
- en: Step 6 - testing the model
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第6步 - 测试模型
- en: 'Calculate the p - values for each of the coefficients in the model. Calculate
    the p - value for each of the coefficients using z - values and then display them
    in a tabular manner. The coefficients for `read`, `math`, and `prog` = 3 (vocational)
    are statistically significant as follows:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 模型中每个系数的p值计算如下。使用z值计算每个系数的p值，然后以表格形式展示。`read`、`math`和`prog` = 3（职业）的系数在统计上具有显著性，如下所示：
- en: '[PRE72]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'The results are as follows:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE73]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'We can test the significance of the program type overall by fitting a model
    without a program in it and using a likelihood ratio test as follows:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过拟合一个没有程序的模型并使用似然比检验来测试程序类型的整体显著性，如下所示：
- en: '[PRE74]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'The results are as follows:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE75]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'The statistical significance of the prog variable is indicated by the p - value
    equal to `0.0032`. We calculate the upper and lower 95% confidence intervals for
    the coefficients as follows:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 变量prog的统计显著性由p值等于`0.0032`表示。我们如下计算系数的上下95%置信区间：
- en: '[PRE76]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The results are as follows:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE77]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: By plotting residuals to one, we can assess the absolute as well as relative
    (Pearson) values and assumptions such as normality and homogeneity of variance.
    This shall help in examining the model and the data fit.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 通过绘制残差图，我们可以评估绝对值以及相对值（皮尔逊值）和假设，如正态性和方差齐性。这将有助于检查模型和数据拟合。
- en: 'We may also wish to examine how well our model fits the data. One way to start
    is with plots of the residuals to assess their absolute as well as relative (Pearson)
    values and assumptions such as normality and homogeneity of variance. Use the
    following commands:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可能希望检查我们的模型与数据拟合得如何。一种方法是绘制残差图来评估它们的绝对值以及相对值（皮尔逊值）和假设，如正态性和方差齐性。使用以下命令：
- en: '[PRE78]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'The plot is as shown in the following screenshot:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 图表如下所示：
- en: '![Step 6 - testing the model](img/image_02_009.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![第6步 - 测试模型](img/image_02_009.jpg)'
- en: 'Establish the correlation as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 建立如下相关性：
- en: '[PRE79]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The results are as follows:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE80]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Variance accounted for is calculated as follows:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 解释方差如下计算：
- en: '[PRE81]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'The results are as follows:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE82]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: The correlation between the predicted and observed values of `apt` is `0.7825`.
    If we square this value, we get the multiple squared correlation, this indicates
    that the predicted values share 61.23% of their variance with `apt`.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 预测值和观察值之间的相关系数为`0.7825`。如果我们平方这个值，我们得到多重平方相关系数，这表明预测值与`apt`共享61.23%的方差。
- en: Poisson regression - understanding species present in Galapagos Islands
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 泊松回归 - 理解加拉帕戈斯群岛中的物种
- en: The Galapagos Islands are situated in the Pacific Ocean about 1000 km from the
    Ecuadorian coast. The archipelago consists of 13 islands, five of which are inhabited.
    The islands are rich in flora and fauna. Scientists are still perplexed by the
    fact that such a diverse set of species can flourish in such a small and remote
    group of islands.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 加拉帕戈斯群岛位于太平洋上，距离厄瓜多尔海岸约1000公里。群岛由13个岛屿组成，其中5个有人居住。岛屿生物多样，动植物资源丰富。科学家们仍然对这样一个物种多样的集合能在如此小且偏远的岛屿群中繁荣感到困惑。
- en: Getting ready
  id: totrans-293
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to complete this recipe we shall be using species dataset. The first
    step is collecting the data.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这个食谱，我们将使用物种数据集。第一步是收集数据。
- en: Step 1 - collecting and describing the data
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集和描述数据
- en: We will utilize the number of species dataset titled `gala` that is available
    at [https://github.com/burakbayramli/kod/blob/master/books/Practical_Regression_Anove_Using_R_Faraway/gala.txt](https://github.com/burakbayramli/kod/blob/master/books/Practical_Regression_Anove_Using_R_Faraway/gala.txt)
    .
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将利用名为`gala`的物种数量数据集，该数据集可在[https://github.com/burakbayramli/kod/blob/master/books/Practical_Regression_Anove_Using_R_Faraway/gala.txt](https://github.com/burakbayramli/kod/blob/master/books/Practical_Regression_Anove_Using_R_Faraway/gala.txt)找到。
- en: 'The dataset includes 30 cases and seven variables in the dataset. The seven
    numeric measurements include the following:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集包括30个案例和七个变量。数据集中的七个数值测量包括以下内容：
- en: '`Species`'
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Species`'
- en: '`Endemics`'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Endemics`'
- en: '`Area`'
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Area`'
- en: '`Elevation`'
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Elevation`'
- en: '`Nearest`'
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Nearest`'
- en: '`Scruz`'
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Scruz`'
- en: '`Adjcacent`'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Adjcacent`'
- en: How to do it...
  id: totrans-305
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Let's get into the details.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring the data
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'Exploring the data will throw some light on the relationships. Begin by importing
    the txt data file named `gala.txt`. We will be saving the data to the gala data
    frame as follows:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 探索数据将有助于了解关系。首先导入名为 `gala.txt` 的 txt 数据文件。我们将如下将数据保存到 gala 数据框中：
- en: '[PRE83]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'The `regpois()` gives the Poisson regression on the variables that are expected
    to be important from an ecological point of view as follows:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '`regpois()` 给出的是从生态学角度预期可能重要的变量的泊松回归，如下所示：'
- en: '[PRE84]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'Next provide the summary of the data as follows:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来提供数据的摘要如下：
- en: '[PRE85]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'The `summary` function will provide deviance residuals, coefficients, `signif`
    codes, null deviance, residual deviance, AIC, and number of Fisher scoring iterations.The
    results are as follows:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: '`summary` 函数将提供偏差残差、系数、`signif` 代码、零偏差、残差偏差、AIC 和 Fisher 分数迭代次数。结果如下：'
- en: '[PRE86]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '[PRE87]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: (Dispersion parameter for Poisson family taken to be 1)
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: （泊松家族的离散参数取为1）
- en: '[PRE89]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: '[PRE90]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'Number of Fisher Scoring iterations:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: Fisher 分数迭代次数：
- en: '[PRE92]'
  id: totrans-323
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'The plot is shown in the following screenshot:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 图表显示在以下截图上：
- en: '![Step 2 - exploring the data](img/image_02_010.jpg)'
  id: totrans-325
  prefs: []
  type: TYPE_IMG
  zh: '![第2步 - 探索数据](img/image_02_010.jpg)'
- en: Step 3 - plotting data and testing empirical data
  id: totrans-326
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 绘制数据和测试经验数据
- en: '`ppois()` is the distribution function of a Poisson where the parameter is
    `lambda=regpois$fit` and it is computed in `gala$Species` as follows:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: '`ppois()` 是参数为 `lambda=regpois$fit` 的泊松分布的分布函数，它在 `gala$Species` 中如下计算：'
- en: '[PRE93]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'The values should be close to uniform in nature. Check the uniformity by plotting
    the values as follows:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 这些值在自然界中应该是接近均匀的。通过以下方式绘制值来检查均匀性：
- en: '[PRE94]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'The plot result is shown in the screenshot:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 图形结果显示在截图上：
- en: '![Step 3 - plotting data and testing empirical data](img/image_02_011.jpg)'
  id: totrans-332
  prefs: []
  type: TYPE_IMG
  zh: '![第3步 - 绘制数据和测试经验数据](img/image_02_011.jpg)'
- en: The plot clearly shows that they are not in uniform.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 图表清楚地显示它们不是均匀的。
- en: Now carry out the Kolmogorov-Smirnov test on whether empirical data fits a given
    distribution.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 现在执行关于经验数据是否符合给定分布的 Kolmogorov-Smirnov 测试。
- en: The Kolmogorov-Smirnov test is a test for goodness of fit and it usually involves
    examining a random sample from some unknown distribution in order to test the
    null hypothesis that the unknown distribution function is in fact a known, specified
    function. We usually use the Kolmogorov-Smirnov test to check the normality assumption
    in the analysis of variance.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: Kolmogorov-Smirnov 测试是拟合优度检验，它通常涉及检查来自某个未知分布的随机样本，以检验零假设，即未知分布函数实际上是一个已知、指定的函数。我们通常使用
    Kolmogorov-Smirnov 测试来检查方差分析中的正态性假设。
- en: The Kolmogorov-Smirnov test is constructed as a statistical hypothesis test.
    We determine a null hypothesis, ![Step 3 - plotting data and testing empirical
    data](img/image_02_012.jpg), that the two samples we are testing come from the
    same distribution. Then we search for evidence that this hypothesis should be
    rejected and express this in terms of a probability. If the likelihood of the
    samples being from different distributions exceeds a confidence level we demand
    that the original hypothesis is rejected in favor of the hypothesis, ![Step 3
    - plotting data and testing empirical data](img/image_02_013.jpg), that the two
    samples are from different distributions.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: Kolmogorov-Smirnov 测试被构建为一个统计假设检验。我们确定一个零假设，即![第3步 - 绘制数据和测试经验数据](img/image_02_012.jpg)，我们正在测试的两个样本来自相同的分布。然后我们寻找证据表明这个假设应该被拒绝，并以概率的形式表达这一点。如果样本来自不同分布的似然性超过我们要求的置信水平，那么原始假设将被拒绝，以支持假设，即![第3步
    - 绘制数据和测试经验数据](img/image_02_013.jpg)，两个样本来自不同的分布。
- en: To do this we devise a single number calculated from the samples, that is, a
    statistic. The trick is to find a statistic that has a range of values that do
    not depend on things we do not know, such as the actual underlying distributions
    in this case.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点，我们设计一个从样本计算出的单一数值，即一个统计量。技巧是找到一个统计量，其值域不依赖于我们不知道的事情，例如在这种情况下实际的潜在分布。
- en: The test statistic in the Kolmogorov-Smirnov test is very easy; it is just the
    maximum vertical distance between the empirical cumulative distribution functions
    of the two samples. The empirical cumulative distribution of a sample is the proportion
    of the sample values that are less than or equal to a given value.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: Kolmogorov-Smirnov测试中的检验统计量非常简单；它只是两个样本的经验累积分布函数之间的最大垂直距离。一个样本的经验累积分布是样本值小于或等于给定值的比例。
- en: 'One sample Kolmogorov-Smirnov test is as follows:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 一个样本Kolmogorov-Smirnov测试如下：
- en: '[PRE95]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'The results are as follows:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE96]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: Therefore, we can safely conclude that the model is not adequate.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以安全地得出结论，该模型不足。
- en: Step 4 - rectifying discretization of the Poisson model
  id: totrans-344
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第4步 - 矫正泊松模型的离散化
- en: 'Now make a correction since Poisson  is discrete. The change is as follows:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 由于泊松是离散的，现在进行更正。变化如下：
- en: '[PRE97]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'A correction of the procedure is carried out, taking into account discrete
    distribution as follows:'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 对程序进行了更正，考虑了离散分布，如下所示：
- en: '[PRE98]'
  id: totrans-348
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'Let us check the uniformity by plotting the values as follows:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式绘制值以检查均匀性：
- en: '[PRE99]'
  id: totrans-350
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'The plot result is shown in the following figure:'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 图形结果如下所示：
- en: '![Step 4 - rectifying discretization of the Poisson model](img/image_02_014.jpg)'
  id: totrans-352
  prefs: []
  type: TYPE_IMG
  zh: '![第4步 - 矫正泊松模型的离散化](img/image_02_014.jpg)'
- en: The correction does not make much of a difference. The plot clearly shows that
    they are not in uniform.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 更正并没有带来太大的变化。图清楚地显示它们并不均匀。
- en: 'Now let us carry out the Kolmogorov-Smirnov test again to verify whether empirical
    data fits a given distribution as follows:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们再次进行Kolmogorov-Smirnov测试，以验证经验数据是否适合给定的分布，如下所示：
- en: '[PRE100]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'The results are as follows:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE101]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: Step 5 - training and evaluating the model using the link function
  id: totrans-358
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第5步 - 使用链接函数训练和评估模型
- en: 'We shall see how generalized linear models fit using the `glm( )` function
    as follows:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将看到如何使用`glm( )`函数来拟合广义线性模型：
- en: '[PRE102]'
  id: totrans-360
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Let us print the results of `regpois2` as follows:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式打印`regpois2`的结果：
- en: '[PRE103]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The results are as follows:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE104]'
  id: totrans-364
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: Step 6 - revaluating using the Poisson model
  id: totrans-365
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第6步 - 使用泊松模型重新评估
- en: 'A correction of the procedure is carried out, taking into account discrete
    distribution as follows:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 对程序进行了更正，考虑了离散分布，如下所示：
- en: '[PRE105]'
  id: totrans-367
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'Check the uniformity by plotting the values as follows:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式绘制值以检查均匀性：
- en: '[PRE106]'
  id: totrans-369
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'The plot result is shown in the following figure:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 图形结果如下所示：
- en: '![Step 6 - revaluating using the Poisson model](img/image_02_015.jpg)'
  id: totrans-371
  prefs: []
  type: TYPE_IMG
  zh: '![第6步 - 使用泊松模型重新评估](img/image_02_015.jpg)'
- en: 'Carry out the Kolmogorov-Smirnov test again to verify whether empirical data
    fits a given distribution as follows:'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 再次进行Kolmogorov-Smirnov测试，以验证经验数据是否适合给定的分布，如下所示：
- en: '[PRE107]'
  id: totrans-373
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'A one sample Kolmogorov-Smirnov test is carried out as follows:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式执行一个样本Kolmogorov-Smirnov测试：
- en: '[PRE108]'
  id: totrans-375
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: The result still does not pass the test.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 结果仍然没有通过测试。
- en: Step 7 - revaluating using the linear model
  id: totrans-377
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第7步 - 使用线性模型重新评估
- en: 'Applying usual the linear model: `lm()` function is used to fit linear models.
    It can be used to carry out regression, single stratum analysis of variance, and
    analysis of covariance (although `[aov](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/aov.html)`
    may provide a more convenient interface for these). The `reg` data frame is used
    to store the results returned from the `lm()` function as follows:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 应用常规线性模型：`lm()`函数用于拟合线性模型。它可以用于执行回归、单层方差分析和协方差分析（尽管`[aov](https://stat.ethz.ch/R-manual/R-devel/library/stats/html/aov.html)`可能为这些操作提供更方便的界面）。`reg`数据框用于存储`lm()`函数返回的结果，如下所示：
- en: '[PRE109]'
  id: totrans-379
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Let us now view the results of the `reg` data frame using the following command:'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们使用以下命令查看`reg`数据框的结果：
- en: '[PRE110]'
  id: totrans-381
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: 'The results are as follows:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE111]'
  id: totrans-383
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'Now let us plot the reg data frame as follows:'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们按如下方式绘制`reg`数据框：
- en: '[PRE112]'
  id: totrans-385
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'The **Residuals vs Fitted** plot is shown in the folllowing figure:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: '**残差与拟合**图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_016.jpg)'
  id: totrans-387
  prefs: []
  type: TYPE_IMG
  zh: '![第7步 - 使用线性模型重新评估](img/image_02_016.jpg)'
- en: 'The Normal Q-Q linear model plot is shown in the following screenshot:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 正态Q-Q线性模型图如下截图所示：
- en: '![Step 7 - revaluating using the linear model](img/image_02_017.jpg)'
  id: totrans-389
  prefs: []
  type: TYPE_IMG
  zh: '![第7步 - 使用线性模型重新评估](img/image_02_017.jpg)'
- en: 'The **Scale-Location** linear model plot is shown in the following figure:'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: '**尺度-位置**线性模型图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_018.jpg)'
  id: totrans-391
  prefs: []
  type: TYPE_IMG
  zh: '![第7步 - 使用线性模型重新评估](img/image_02_018.jpg)'
- en: 'Now let us apply a transformation by using the following square root function.
    The `reg2` data frame is used to store the results returned from the `lm` function:'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们使用以下平方根函数进行转换。`reg2`数据框用于存储`lm`函数返回的结果：
- en: '[PRE113]'
  id: totrans-393
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: 'Let us now view the results of the `reg` data frame as follows:'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们按照以下步骤查看`reg`数据框的结果：
- en: '[PRE114]'
  id: totrans-395
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: 'The results are as follows:'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE115]'
  id: totrans-397
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: 'Now let us plot the `reg2` data frame as follows:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们按照以下步骤绘制`reg2`数据框：
- en: '[PRE116]'
  id: totrans-399
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: 'The **Residual vs Fitted** plot is shown in the following figure:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: '**残差与拟合值**图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_019.jpg)'
  id: totrans-401
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_019.jpg)'
- en: 'The **Normal Q-Q** linear model plot is shown in the following figure:'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: '**正态Q-Q**线性模型图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_020.jpg)'
  id: totrans-403
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_020.jpg)'
- en: 'The Poisson regression  **Scale-Location** linear model plot is shown in the
    following screenshot:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松回归的**尺度-位置**线性模型图如下截图所示：
- en: '![Step 7 - revaluating using the linear model](img/image_02_021.jpg)'
  id: totrans-405
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_021.jpg)'
- en: 'The **Scale-Location** linear model plot is shown in the following figure:'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: '**尺度-位置**线性模型图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_022.jpg)'
  id: totrans-407
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_022.jpg)'
- en: 'Let us carry out the Shapiro  test. Given a sample X1, . . . , Xn of n real-valued
    observations, the Shapiro-Wilk test (Shapiro and Wilk, 1965) is a test of the
    composite hypothesis that the data is **i.i.d**. (**independent and identically
    distributed**) and normal, that is, N(µ, σ2) for some unknown real µ and some
    σ > 0\. Use the following command:'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进行Shapiro测试。给定一个包含n个实值观测值的样本X1, ..., Xn，Shapiro-Wilk测试（Shapiro和Wilk，1965）是对复合假设的检验，即数据是**独立同分布**（**独立且同分布**）且正态分布的，即对于某些未知的实数µ和某些σ
    > 0，N(µ, σ2)。使用以下命令：
- en: '[PRE117]'
  id: totrans-409
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: 'The results are as follows:'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE118]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: Now let us apply a transformation by using the log function as follows.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们使用对数函数进行以下转换。
- en: 'The `reg3` data frame is used to store the results returned from the `lm()`
    function as follows:'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: '`reg3`数据框用于存储`lm()`函数返回的结果如下：'
- en: '[PRE119]'
  id: totrans-414
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'Let us now view the results of the `reg3` data frame as follows:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们按照以下步骤查看`reg3`数据框的结果：
- en: '[PRE120]'
  id: totrans-416
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: 'The results are as follows:'
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE121]'
  id: totrans-418
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: 'Now let us plot the `reg3` data frame as follows:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们按照以下步骤绘制`reg3`数据框：
- en: '[PRE122]'
  id: totrans-420
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: 'The **Residuals vs Fitted** plot is shown in the following figure:'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: '**残差与拟合值**图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_023.jpg)'
  id: totrans-422
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_023.jpg)'
- en: 'The Normal Q-Q linear model plot is shown in the following figure:'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: '**正态Q-Q**线性模型图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_024.jpg)'
  id: totrans-424
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_024.jpg)'
- en: 'The **Scale-Location** linear model plot is shown in the following figure:'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: '**尺度-位置**线性模型图如下所示：'
- en: '![Step 7 - revaluating using the linear model](img/image_02_025.jpg)'
  id: totrans-426
  prefs: []
  type: TYPE_IMG
  zh: '![步骤7 - 使用线性模型重新评估](img/image_02_025.jpg)'
- en: 'Let us carry out a Shapiro test as follows:'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们按照以下步骤进行Shapiro测试：
- en: '[PRE123]'
  id: totrans-428
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: 'The result is:'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE124]'
  id: totrans-430
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
