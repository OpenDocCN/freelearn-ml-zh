- en: '*Chapter 4*: Getting Started with Azure Machine Learning'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第 4 章*：开始使用 Azure 机器学习'
- en: '"As a technologist, I see how AI and the fourth industrial revolution will
    impact every aspect of people''s lives."'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: “作为一名技术专家，我看到人工智能和第四次工业革命将影响人们生活的各个方面。”
- en: – Fei-Fei Li, Professor of Computer Science at Stanford University
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: – 斯坦福大学计算机科学教授李飞飞
- en: In the previous chapter, you were introduced to the major AutoML **Open Source
    Software** (**OSS**) tools and libraries. We did a tour of the major OSS offerings,
    including TPOT, AutoKeras, auto-sklearn, Featuretools, and Microsoft NNI, which
    will have helped you, the reader, understand the differential value propositions
    and approaches used in each of these libraries.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，你被介绍了主要的 AutoML 开源软件（OSS）工具和库。我们游览了主要的 OSS 产品，包括 TPOT、AutoKeras、auto-sklearn、Featuretools
    和 Microsoft NNI，这将有助于你，读者，理解每个库中使用的差异化的价值主张和方法。
- en: In this chapter, we will start exploring the first of many commercial offerings,
    namely Microsoft's Azure capabilities in automated **Machine Learning** (**ML**).
    Azure Machine Learning is part of the Microsoft AI ecosystem, which helps accelerate
    the end-to-end ML life cycle using the power of the Windows Azure platform and
    services. We will start with an enterprise-grade ML service for building and deploying
    models that empowers developers and data scientists to build, train, and deploy
    ML models faster. With examples and walk-throughs, you will learn the fundamentals
    to build and deploy automated ML solutions using Azure.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将开始探索许多商业产品中的第一个，即微软的 Azure 自动化机器学习（ML）能力。Azure 机器学习是微软 AI 生态系统的一部分，它利用
    Windows Azure 平台和服务的力量来加速端到端的机器学习生命周期。我们将从一个企业级的机器学习服务开始，用于构建和部署模型，这使开发人员和数据科学家能够更快地构建、训练和部署机器学习模型。通过示例和演示，你将学习构建和部署使用
    Azure 的自动化机器学习解决方案的基础知识。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Getting started with Azure Machine Learning
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始使用 Azure 机器学习
- en: The Azure Machine Learning stack
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 机器学习堆栈
- en: Getting started with the Azure Machine Learning service
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始使用 Azure 机器学习服务
- en: Modeling with Azure Machine Learning
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Azure 机器学习进行建模
- en: Deploying and testing models with Azure Machine Learning
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Azure 机器学习部署和测试模型
- en: Getting started with Azure Machine Learning
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用 Azure 机器学习
- en: Not so long ago, if you wanted to use ML in a production environment on the
    Azure platform, you needed to bring together a bunch of different services to
    support the full ML life cycle.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 不久前，如果你想在 Azure 平台上使用机器学习在生产环境中，你需要汇集一系列不同的服务来支持完整的机器学习生命周期。
- en: For example, to use the datasets, you would need storage repositories such as
    Azure Blob storage or Azure Data Lake storage. For compute, you would either need
    individual virtual machines, Spark clusters using HDInsight, or Azure Databricks
    to actually run your model code. To protect your data for enterprise readiness,
    you'd need to bring in your virtual networks or configure your compute and data
    inside the same virtual network, along with Azure Key Vault to manage and secure
    your credentials. In order to provide repeatability for your experiments by using
    a consistent set of ML libraries, and the different versions thereof, you'd create
    Docker containers and use Azure Container Registry to store those Docker containers.
    You would need to put that inside your virtual network and then use Azure Kubernetes
    Service. Woah! This all sounds like a whole lot of stuff to piece together to
    get the ML and all the models and everything to work.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，要使用数据集，你需要存储库，例如 Azure Blob 存储或 Azure Data Lake 存储来存储数据。对于计算，你可能需要单独的虚拟机、使用
    HDInsight 的 Spark 集群，或者 Azure Databricks 来实际运行你的模型代码。为了保护你的数据以适应企业级，你需要引入你的虚拟网络或配置你的计算和数据在同一个虚拟网络内，以及使用
    Azure Key Vault 来管理和保护你的凭证。为了通过使用一致的机器学习库及其不同版本来提供实验的可重复性，你会创建 Docker 容器并使用 Azure
    容器注册表来存储这些 Docker 容器。你需要将它们放在你的虚拟网络内，然后使用 Azure Kubernetes 服务。哇！这听起来像是要拼凑很多东西才能让机器学习和所有模型以及一切都能工作。
- en: But things have progressed since, and you are in luck. With the Azure Machine
    Learning service, Microsoft removed that complexity. As a managed service, Azure
    Machine Learning comes with its own compute, hosted notebooks, and capabilities
    for model management, version control, and model reproducibility built right in.
    You can layer that on top of your existing Azure services. For example, you can
    plug in the compute and storage that you already have as well as your other infrastructure
    services. Azure Machine Learning connects and orchestrates them within a single
    environment so that you have one end-to-end modular platform for your entire ML
    life cycle, as you prepare data, build, train, package, and deploy your ML models.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 但自那时以来，情况已经有所进展，你很幸运。通过 Azure 机器学习服务，微软消除了这种复杂性。作为一个托管服务，Azure 机器学习自带自己的计算、托管笔记本以及模型管理、版本控制和模型可重复性的功能。你可以在现有的
    Azure 服务之上构建这些功能。例如，你可以连接并整合你已有的计算和存储，以及其他基础设施服务。Azure 机器学习在单一环境中连接和编排它们，以便你拥有一个端到端模块化平台，用于整个机器学习生命周期，从准备数据、构建、训练、打包到部署你的机器学习模型。
- en: 'Microsoft''s Azure Machine Learning development group offers a great cheat
    sheet ([aka.ms/mlcheatsheet](http://aka.ms/mlcheatsheet)) that helps you choose
    the best ML algorithm for the predictive analytics task at hand. Whether you want
    to predict between categories, discover a structure, or extract information from
    text, in the following flow you can find out the best algorithm based on your
    needs:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 微软的 Azure 机器学习开发团队提供了一份优秀的速查表（[aka.ms/mlcheatsheet](http://aka.ms/mlcheatsheet)），它可以帮助你为手头的预测分析任务选择最佳的机器学习算法。无论你想预测类别之间的差异，发现结构，还是从文本中提取信息，在以下流程中，你可以根据自己的需求找到最佳算法：
- en: '![Figure 4.1 – The Machine Learning Algorithm Cheat Sheet overview'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.1 – 机器学习算法速查表概览'
- en: '](img/Figure_4.1_B16890.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.1_B16890.jpg)'
- en: Figure 4.1 – The Machine Learning Algorithm Cheat Sheet overview
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.1 – 机器学习算法速查表概览
- en: The Azure Machine Learning service makes for an ideal working environment for
    citizen data scientists. They get the services, tools, and virtually everything
    configured for them and the luxury of not having to compile all these individual
    services helps them do what matters most – solve the business problem. These subject
    matter experts also don't need to learn how to use new tools. You can use the
    Jupyter Notebooks, your favorite Python editor – including VS Code and PyCharm,
    and Azure Machine Learning works with any Python ML framework library, such as
    TensorFlow, PyTorch, scikit-learn, and so on. This is amazing in terms of making
    the life cycle a lot shorter, in terms of getting everything up and running. You
    will see some of these examples in the rest of this chapter as we walk through
    building a classification model using the Azure Machine Learning service.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 机器学习服务为公民数据科学家提供了一个理想的工作环境。他们可以获得服务、工具，几乎所有配置都为他们准备好了，而且无需编译所有这些单个服务，这使他们能够专注于最重要的事情——解决业务问题。这些领域专家也不需要学习如何使用新工具。你可以使用
    Jupyter 笔记本、你喜欢的 Python 编辑器——包括 VS Code 和 PyCharm，Azure 机器学习与任何 Python 机器学习框架库兼容，如
    TensorFlow、PyTorch、scikit-learn 等。这在缩短生命周期、快速启动和运行方面非常出色。你将在本章的其余部分中看到一些这些示例，当我们通过使用
    Azure 机器学习服务构建分类模型时。
- en: The Azure Machine Learning stack
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 机器学习堆栈
- en: The Microsoft Azure ecosystem is quite broad; in this chapter, we will focus
    on its AI and ML related cloud offerings, especially the Azure Machine Learning
    service.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 微软的 Azure 生态系统相当广泛；在本章中，我们将重点关注其与 AI 和机器学习相关的云产品，特别是 Azure 机器学习服务。
- en: 'The following figure shows the offerings available for ML in the Azure cloud:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了 Azure 云中可用的机器学习产品：
- en: '![Figure 4.2 – Azure cloud ML offerings'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.2 – Azure 云机器学习产品'
- en: '](img/Figure_4.2_B16890.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.2_B16890.jpg)'
- en: Figure 4.2 – Azure cloud ML offerings
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.2 – Azure 云机器学习产品
- en: 'You can visit the following link for more information about the offerings in
    the preceding table: [https://docs.microsoft.com/en-us/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning.](https://docs.microsoft.com/en-us/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以访问以下链接获取有关前表中产品信息的更多信息：[https://docs.microsoft.com/en-us/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning.](https://docs.microsoft.com/en-us/azure/architecture/data-guide/technology-choices/data-science-and-machine-learning)
- en: )
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: 'It can be confusing to know which Azure Machine Learning offering should be
    chosen among the many described in the preceding table. The following diagram
    helps with choosing the right offering based on the given business and technology
    scenario:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在众多先前列出的 Azure 机器学习产品中，了解应该选择哪个可能会令人困惑。以下图表有助于根据给定的业务和技术场景选择正确的产品：
- en: '![Figure 4.3 – Azure Machine Learning decision flow'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.3 – Azure 机器学习决策流程'
- en: '](img/Figure_4.3_B16890.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.3_B16890.jpg)'
- en: Figure 4.3 – Azure Machine Learning decision flow
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.3 – Azure 机器学习决策流程
- en: Automated ML is a part of the Azure Machine Learning service capabilities. Other
    capabilities include collaborative notebooks, data labeling, ML operations, a
    drag-and-drop designer studio, autoscaling capabilities, and many other tools
    described in the following table.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 自动机器学习是 Azure 机器学习服务功能的一部分。其他功能包括协作笔记本、数据标注、机器学习操作、拖放式设计工作室、自动扩展功能以及以下表格中描述的许多其他工具。
- en: '![Figure 4.4 – Azure Machine Learning key service capabilities'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.4 – Azure 机器学习关键服务功能'
- en: '](img/Figure_4.4_B16890.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.4_B16890.jpg)'
- en: Figure 4.4 – Azure Machine Learning key service capabilities
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.4 – Azure 机器学习关键服务功能
- en: 'The AI and ML capabilities offered in Azure are quite comprehensive and the
    best place to start looking into these in detail is the Azure AI Fundamentals
    Learning Path on Microsoft Learn: [https://aka.ms/AzureLearn_AIFundamentals.](https://aka.ms/AzureLearn_AIFundamentals'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 提供的 AI 和 ML 功能非常全面，详细了解这些功能的最佳起点是 Microsoft Learn 上的 Azure AI 基础学习路径：[https://aka.ms/AzureLearn_AIFundamentals.](https://aka.ms/AzureLearn_AIFundamentals)
- en: )
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: 'The Azure Machine Learning service arguably provides virtually everything a
    data scientist needs. It includes environments, experiments, pipelines, datasets,
    models, endpoints, and workspaces, which helps enabling other Azure resources
    such as the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 机器学习服务几乎提供了数据科学家所需的一切。它包括环境、实验、管道、数据集、模型、端点和工作区，这有助于启用以下 Azure 资源：
- en: '**Azure Container Registry** (**ACR**): This registry stores information about
    the Docker containers used during training and deployment.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 容器注册库**（**ACR**）：此注册库存储了训练和部署期间使用的 Docker 容器信息。'
- en: '**Azure storage account**: The default datastore for the ML workspace; it also
    stores the associated Jupyter notebooks.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 存储帐户**：ML 工作区的默认数据存储；它还存储相关的 Jupyter 笔记本。'
- en: '**Azure Application Insights**: This stores model monitoring information.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 应用洞察**：此服务存储模型监控信息。'
- en: '**Azure Key Vault**: Credentials and other secrets for compute and workspace
    needs.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 密钥保管库**：用于计算和工作空间所需的凭据和其他机密。'
- en: 'To train any ML algorithm, you need processing capabilities, that is, compute
    resources. Azure supports a variety of different compute resources, ranging from
    your local machine to remote VMs. The following table outlines different training
    targets for workloads. As shown in the table, you can use a local computer, a
    compute cluster, a remote virtual machine, and a variety of other training targets
    for automated ML workloads:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要训练任何机器学习算法，您需要处理能力，即计算资源。Azure 支持各种不同的计算资源，从您的本地计算机到远程虚拟机。以下表格概述了不同工作负载的训练目标。如表中所示，您可以使用本地计算机、计算集群、远程虚拟机以及各种其他自动机器学习工作负载的训练目标：
- en: '![Figure 4.5 – Azure Machine Learning training targets'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.5 – Azure 机器学习训练目标'
- en: '](img/Figure_4.5_B16890.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.5_B16890.jpg)'
- en: Figure 4.5 – Azure Machine Learning training targets
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.5 – Azure 机器学习训练目标
- en: In the step-by-step walk-through, you will see how to create and select a compute
    target. Lastly, all ML algorithms need operationalization and deployment. The
    infamous adage *it works on my machine* only goes so far; therefore, you need
    a deployment compute resource to be able to host your model and provide an endpoint.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在逐步说明中，您将了解如何创建和选择计算目标。最后，所有机器学习算法都需要实现化和部署。那句著名的格言“在我的机器上它运行得很好”只能走这么远；因此，您需要一个部署计算资源来托管您的模型并提供端点。
- en: 'This is where your service resides and will be consumed from, also known as
    the compute target used for deployment. The following table shows different types
    of deployment targets:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是您的服务所在之处，也将从这里被消费，也称为用于部署的计算目标。以下表格显示了不同类型的部署目标：
- en: '![Figure 4.6 – Azure machine compute target'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.6 – Azure 机器计算目标'
- en: '](img/Figure_4.6_B16890.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.6_B16890.jpg)'
- en: Figure 4.6 – Azure machine compute target
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.6 – Azure 机器计算目标
- en: With this introduction to Azure Machine Learning capabilities, let's explore,
    step by step, how to build a classification model using the Azure Machine Learning
    service.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在介绍 Azure 机器学习功能的基础上，让我们一步步探索如何使用 Azure 机器学习服务构建分类模型。
- en: Getting started with the Azure Machine Learning service
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用 Azure 机器学习服务
- en: 'In this section, we will explore a step-by-step walk-through of creating a
    classification model using Azure Machine Learning:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将逐步探索使用 Azure 机器学习创建分类模型的过程：
- en: Sign up for a Microsoft account, unless if you already have one, then log into
    the Azure Machine Learning portal at [ml.azure.com](http://ml.azure.com). Here,
    you will see the ML studio as shown in the following figure. An Azure subscription
    is essentially the way you pay for services. You can either use your existing
    subscription if you have one or sign up for a new one. For a brand-new user, the
    nice folks at Azure offer a $200 credit to get you acquainted. Make sure to turn
    off the resources when you are not using them; don't leave the data center lights
    on:![Figure 4.7 – Azure Machine Learning service subscription startup page
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注册一个 Microsoft 账户，除非您已经有了，否则请登录到 Azure 机器学习门户 [ml.azure.com](http://ml.azure.com)。在这里，您将看到以下图所示的
    ML 工作室。Azure 订阅基本上是您支付服务的方式。如果您已经有了现有的订阅，您可以使用它，或者注册一个新的。对于全新的用户，Azure 的好人们提供
    200 美元的信用额度，让您熟悉环境。确保在不使用资源时关闭资源；不要让数据中心灯光一直亮着：![图 4.7 – Azure 机器学习服务订阅启动页面
- en: '](img/Figure_4.7_B16890_.jpg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.7 – Figure_4.7_B16890_.jpg](img/Figure_4.7_B16890_.jpg)'
- en: Figure 4.7 – Azure Machine Learning service subscription startup page
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.7 – Azure 机器学习服务订阅启动页面
- en: In the following figure, you can see we have now been asked to select a subscription.
    In this case, we'll choose **Free Trial** to explore the services. You can also
    choose **Pay-As-You-Go**, in which case, your account will be charged based on
    your compute, storage, and other service usage:![Figure 4.8 – Azure Machine Learning
    service subscription selection page
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在以下图中，您可以看到我们现在被要求选择一个订阅。在这种情况下，我们将选择**免费试用**来探索服务。您也可以选择**按量付费**，在这种情况下，您的账户将根据您的计算、存储和其他服务使用情况进行收费：![图
    4.8 – Azure 机器学习服务订阅选择页面
- en: '](img/Figure_4.8_B16890_.jpg)'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.8 – Figure_4.8_B16890_.jpg](img/Figure_4.8_B16890_.jpg)'
- en: Figure 4.8 – Azure Machine Learning service subscription selection page
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.8 – Azure 机器学习服务订阅选择页面
- en: Now that you have chosen your subscription, you will be taken to the Azure portal,
    where you can do an overwhelming number of things. In this case, click on `Machine`
    `Learning` service, you will see the following screen to create an Azure Machine
    Learning service. This is where you can create one or more ML workspaces. Now
    proceed by clicking on the **Create Azure Machine Learning** button:![Figure 4.10
    – Azure Machine Learning service startup page in the portal
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您已经选择了订阅，您将被带到 Azure 门户，在那里您可以做很多事情。在这种情况下，点击 `Machine` `Learning` 服务，您将看到以下屏幕以创建
    Azure 机器学习服务。这是您可以创建一个或多个 ML 工作区的地方。现在通过点击**创建 Azure 机器学习**按钮继续：![图 4.10 – Azure
    机器学习服务启动页面在门户中
- en: '](img/Figure_4.10_B16890_.jpg)'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.10 – Figure_4.10_B16890_.jpg](img/Figure_4.10_B16890_.jpg)'
- en: Figure 4.10 – Azure Machine Learning service startup page in the portal
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.10 – Azure 机器学习服务启动页面在门户中
- en: Upon clicking **Create Azure Machine Learning**, you will be brought to the
    following page to create an ML workspace. This is where you will select your subscription,
    create a resource group, and select a geographical region:![Figure 4.11 – Azure
    Machine Learning service – creating a workspace
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建 Azure 机器学习**后，您将被带到以下页面以创建一个 ML 工作区。这是您将选择订阅、创建资源组并选择地理位置的地方：![图 4.11
    – Azure 机器学习服务 – 创建工作区
- en: '](img/Figure_4.11_B16890_.jpg)'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.11 – Figure_4.11_B16890_.jpg](img/Figure_4.11_B16890_.jpg)'
- en: Figure 4.11 – Azure Machine Learning service – creating a workspace
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.11 – Azure 机器学习服务 – 创建工作区
- en: The following figure shows the filled-out form for creating an ML workspace
    I called `auto-ml-workspace`. A **resource group** acts as a container for a collection
    of different resources, and hence associated assets (compute, storage, and so
    on):![Figure 4.12 – Azure Machine Learning service page
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下图显示了创建名为 `auto-ml-workspace` 的 ML 工作区的填写好的表单。**资源组**充当一组不同资源的容器，因此相关的资产（计算、存储等）也包含在内：![图
    4.12 – Azure 机器学习服务页面
- en: '](img/Figure_4.12_B16890_.jpg)'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.12 – Figure_4.12_B16890_.jpg](img/Figure_4.12_B16890_.jpg)'
- en: Figure 4.12 – Azure Machine Learning service page
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.12 – Azure 机器学习服务页面
- en: 'A workspace can contain compute instances, experiments, datasets, models, deployment
    endpoints, and so on, and is the top-level resource in Azure Machine Learning.
    You can refer to the breakdown of Azure workspaces shown in the following figure:'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一个工作空间可以包含计算实例、实验、数据集、模型、部署端点等，是 Azure 机器学习中的顶级资源。你可以参考以下图中所示的 Azure 工作空间的分解：
- en: '![Figure 4.13 – What is an Azure Machine Learning workspace?'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.13 – 什么是 Azure 机器学习工作空间？'
- en: '](img/Figure_4.13_B16890_.jpg)'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.13_B16890_.jpg)'
- en: Figure 4.13 – What is an Azure Machine Learning workspace?
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.13 – 什么是 Azure 机器学习工作空间？
- en: 'Upon clicking the **Create** button under **Project details**, your ML service
    will be deployed, and the associated dependencies will be created. It can take
    a few minutes. You will see something like the following figure:'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在**项目详情**下点击**创建**按钮后，你的 ML 服务将被部署，并创建相关的依赖项。这可能需要几分钟。你将看到如下所示的图示：
- en: '![Figure 4.14 – Azure Machine Learning service deployment'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.14 – Azure 机器学习服务部署'
- en: '](img/Figure_4.14_B16890_.jpg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.14_B16890_.jpg)'
- en: Figure 4.14 – Azure Machine Learning service deployment
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.14 – Azure 机器学习服务部署
- en: Once the deployment is complete, you will see the resource group and its associated
    resources, as shown in the following figure. You can now click on the **Go to
    resource** button, which will take you to the ML workspace:![Figure 4.15 – Azure
    Machine Learning deployment completion screen
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦部署完成，你将看到资源组和其关联的资源，如下图所示。现在你可以点击**转到资源**按钮，这将带你进入 ML 工作空间：![图 4.15 – Azure
    机器学习部署完成屏幕
- en: '](img/Figure_4.15_B16890_.jpg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.15_B16890_.jpg)'
- en: Figure 4.15 – Azure Machine Learning deployment completion screen
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.15 – Azure 机器学习部署完成屏幕
- en: This is your ML workspace. Here, you can see your **Resource group**, **Subscription**,
    **Key Vault**, and all the important high-level details, but you are not in the
    ML arena, yet. There is one more click to go. So now, go ahead and click on the
    **Launch studio** button to take you to the ML studio:![Figure 4.16 – Azure Machine
    Learning workspace console to launch studio
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是你的 ML 工作空间。在这里，你可以看到你的**资源组**、**订阅**、**密钥保管库**以及所有重要的高级细节，但你还没有进入 ML 场域。还需要再点击一次。所以现在，请点击**启动工作室**按钮，进入
    ML 工作室：![图 4.16 – Azure 机器学习工作室控制台启动工作室
- en: '](img/Figure_4.16_B16890_.jpg)'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.16_B16890_.jpg)'
- en: Figure 4.16 – Azure Machine Learning workspace console to launch studio
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.16 – Azure 机器学习工作室控制台启动工作室
- en: 'Now, the following is the screen you have been patiently waiting for all this
    time: the ML studio! Go ahead, take the tour by clicking on the **Start the tour**
    button – we will wait:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，以下是你一直耐心等待的屏幕：ML 工作室！请继续，点击**开始游览**按钮 – 我们会等待：
- en: '![Figure 4.17 – Azure Machine Learning studio home page'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.17 – Azure 机器学习工作室主页'
- en: '](img/Figure_4.17_B16890_.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.17_B16890_.jpg)'
- en: Figure 4.17 – Azure Machine Learning studio home page
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.17 – Azure 机器学习工作室主页
- en: 'The following figure shows the Azure Machine Learning studio. There used to
    be a "classic" version of the ML studio but it''s no longer active so we will
    just focus on this new shiny web-based portal, which helps you do all things ML.
    On the left pane, you can see all the different offerings, which are also offered
    via a dropdown:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了 Azure 机器学习工作室。曾经有一个“经典”版本的 ML 工作室，但现在它已经不再活跃，所以我们只关注这个新的闪亮基于网页的门户，它可以帮助你完成所有机器学习任务。在左侧面板中，你可以看到所有不同的服务，这些服务也通过下拉菜单提供：
- en: '![Figure 4.18 – Azure Machine Learning studio home page'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.18 – Azure 机器学习工作室主页'
- en: '](img/Figure_4.18_B16890_.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.18_B16890_.jpg)'
- en: Figure 4.18 – Azure Machine Learning studio home page
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.18 – Azure 机器学习工作室主页
- en: The UI is modern, clean, and efficient. You can start by creating a new **Notebook**,
    an automated ML experiment, or a designer. Each of these offerings has a different
    purpose, yet they have a similar underlying infrastructure. Notebooks are great
    tools for hands-on data scientists, while automated ML experiments are targeted
    at AI democratization. The designer interface provides drag-and-drop capabilities
    to prepare data and deploy models.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 界面现代、简洁、高效。你可以通过创建一个新的**笔记本**、一个自动化的 ML 实验，或者一个设计器来开始。每个服务都有不同的用途，但它们有相似的基础设施。笔记本是面向动手数据科学家的优秀工具，而自动化的
    ML 实验旨在实现 AI 的民主化。设计器界面提供了拖放功能，用于准备数据和部署模型。
- en: Modeling with Azure Machine Learning
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Azure 机器学习进行建模
- en: 'Before we create an automated ML workflow, let''s start with a simple Azure
    notebook:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们创建自动化的 ML 工作流之前，让我们从一个简单的 Azure 笔记本开始：
- en: Azure notebooks are an integrated part of the Azure Machine Learning service,
    and you can either create or use a sample notebook to get started:![Figure 4.19
    – Azure Machine Learning sample notebooks
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 笔记本是 Azure 机器学习服务的一部分，您可以选择创建或使用示例笔记本开始：![图 4.19 – Azure 机器学习示例笔记本
- en: '](img/Figure_4.19_B16890_.jpg)'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.19_B16890_.jpg)'
- en: Figure 4.19 – Azure Machine Learning sample notebooks
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.19 – Azure 机器学习示例笔记本
- en: In the `MNIST` and it will filter to show you the notebooks. Select the `image-classification-part1-training.ipynb`
    file to see the notebook in the right pane, and click on **Clone this notebook**
    to create your own copy:![Figure 4.20 – MNIST image classification notebook
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`MNIST`中，它将过滤以显示笔记本。选择`image-classification-part1-training.ipynb`文件以在右侧窗格中查看笔记本，然后点击**克隆此笔记本**以创建您的副本：![图
    4.20 – MNIST 图像分类笔记本
- en: '](img/Figure_4.20_B16890_.jpg)'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.20_B16890_.jpg)'
- en: Figure 4.20 – MNIST image classification notebook
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.20 – MNIST 图像分类笔记本
- en: Click on the `yml` configuration files to the `user` directory:![Figure 4.21
    – MNIST image classification notebook
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`user`目录下的`yml`配置文件：![图 4.21 – MNIST 图像分类笔记本
- en: '](img/Figure_4.21_B16890_.jpg)'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.21_B16890_.jpg)'
- en: Figure 4.21 – MNIST image classification notebook
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.21 – MNIST 图像分类笔记本
- en: Now that you have cloned the assets, it's time to have a compute target. You
    cannot run a notebook without, well, actually having a machine to run it on. As
    you saw earlier, we were able to run code either on Google Colab or locally. In
    this case, we are running this workload on Azure, which requires us to be more
    explicit about our intent, hence you have to create a compute target to proceed.
    Click on **Create compute**:![Figure 4.22 – MNIST image classification notebook
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您已经克隆了资产，是时候设置计算目标了。没有机器来运行，您是无法运行笔记本的。如您之前所见，我们能够在 Google Colab 或本地运行代码。在这种情况下，我们正在
    Azure 上运行此工作负载，这要求我们更明确地表达我们的意图，因此您必须创建一个计算目标才能继续。点击**创建计算实例**：![图 4.22 – MNIST
    图像分类笔记本
- en: '](img/Figure_4.22_B16890_.jpg)'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.22_B16890_.jpg)'
- en: Figure 4.22 – MNIST image classification notebook
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.22 – MNIST 图像分类笔记本
- en: 'Once you''ve clicked on **Create compute**, you will be shown what kind of
    compute options are on offer, along with their associated cost. It''s no surprise
    that bigger and better hardware will cost you more:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您点击了**创建计算实例**，您将看到提供的计算选项及其相关成本。更大的更好硬件成本更高并不令人惊讶：
- en: Note
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: You can read about different types of VMs and their associated costs at [https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/](https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/).
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在[https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/](https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/)了解不同类型的虚拟机及其相关成本。
- en: '![Figure 4.23 – Create the new compute instance'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.23 – 创建新的计算实例'
- en: '](img/Figure_4.23_B16890_.jpg)'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.23_B16890_.jpg)'
- en: Figure 4.23 – Create the new compute instance
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.23 – 创建新的计算实例
- en: For the purpose of this AutoML notebook, we will select a standard small VM,
    as seen in the following figure, and create the compute instance. You can create
    multiple compute instances and assign them to different experiments as needed:![Figure
    4.24 – Creating a new compute instance
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了本 AutoML 笔记本的目的，我们将选择一个标准小型虚拟机，如下图所示，并创建计算实例。您可以根据需要创建多个计算实例并将它们分配给不同的实验：![图
    4.24 – 创建新的计算实例
- en: '](img/Figure_4.24_B16890_.jpg)'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.24_B16890_.jpg)'
- en: Figure 4.24 – Creating a new compute instance
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.24 – 创建新的计算实例
- en: Click on **Create** to create a new compute instance – as you create a compute
    instance, which can take some time as you stare at the revolving circle of patience,
    you can explore other parts of the Azure Machine Learning portal:![Figure 4.25
    – MNIST automated ML compute instance
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**以创建新的计算实例——当您创建计算实例时，这可能需要一些时间，因为您会看到耐心旋转的圆圈，此时您可以探索 Azure 机器学习门户的其他部分：![图
    4.25 – MNIST 自动化机器学习计算实例
- en: '](img/Figure_4.25_B16890_.jpg)'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.25_B16890_.jpg)'
- en: Figure 4.25 – MNIST automated ML compute instance
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.25 – MNIST 自动化机器学习计算实例
- en: 'Now, the compute is ready to be used, as seen in the following figure. First,
    you get the status **Starting**, seen in the following figure:'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，计算实例已准备好使用，如下图所示。首先，您会看到状态为**启动中**，如下图所示：
- en: '![Figure 4.26 – Compute instance attributes'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.26 – 计算实例属性'
- en: '](img/Figure_4.26_B16890_.jpg)'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.26_B16890_.jpg)'
- en: Figure 4.26 – Compute instance attributes
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.26 – 计算实例属性
- en: 'The compute instance status will change to **Running** when the compute instance
    is ready. You can choose to **Stop**, **Restart**, or **Delete** a compute resource
    as you please. Just remember that it will jeopardize its dependencies (things
    using or planning to use this compute resource):'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当计算实例准备就绪时，计算实例的状态将变为**运行中**。您可以选择**停止**、**重启**或**删除**计算资源，只要您愿意。只需记住，这将危及其依赖项（使用或计划使用此计算资源的事物）：
- en: '![Figure 4.27 – Compute instance running'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图4.27 – 计算实例运行'
- en: '](img/Figure_4.27_B16890_.jpg)'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.27_B16890_.jpg)'
- en: Figure 4.27 – Compute instance running
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.27 – 计算实例运行
- en: Navigate back to the notebook by clicking on the `image-classification-mnist-data`
    notebook open, we can run the code to make sure that it works. And you can see
    the Azure Machine Learning SDK version gets printed in the following figure:![Figure
    4.28 – MNIST image classification notebook
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击打开的`image-classification-mnist-data`笔记本，我们可以运行代码以确保其正常工作。您还可以看到以下图中打印的Azure
    Machine Learning SDK版本：![图4.28 – MNIST图像分类笔记本
- en: '](img/Figure_4.28_B16890_.jpg)'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.28_B16890_.jpg)'
- en: Figure 4.28 – MNIST image classification notebook
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.28 – MNIST图像分类笔记本
- en: One configuration step still remains – you have to authenticate to use the workspace
    to be able to utilize the resources. In order to do that, there is an interactive
    authentication system built in where you click the link (`devicelogin`) shown
    in the following figure and enter the code (also in the following figure) to authenticate.
    I am sure you won't be using the code in the following figure – it won't work,
    but nice try!![Figure 4.29 – MNIST image classification notebook
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 还有一个配置步骤尚未完成——您必须通过工作区进行身份验证才能利用资源。为此，内置了一个交互式身份验证系统，您需要点击以下图中显示的链接（`devicelogin`）并输入代码（也在以下图中）以进行身份验证。我确信您不会使用以下图中的代码——它不会起作用，但很好尝试一下！！[图4.29
    – MNIST图像分类笔记本
- en: '](img/Figure_4.29_B16890_.jpg)'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.29_B16890_.jpg)'
- en: Figure 4.29 – MNIST image classification notebook
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.29 – MNIST图像分类笔记本
- en: Now that we are authenticated and all, let's create a compute target. All the
    `boilerplate` code for configuration is already written for you as part of the
    Jupyter notebook. By running the cell shown in the following figure, you can now
    connect to the `ComputeTarget` programmatically and provision the node:![Figure
    4.30 – MNIST image classification notebook
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 既然我们已经完成了身份验证，让我们创建一个计算目标。所有配置的`样板代码`已经作为Jupyter笔记本的一部分为您编写好了。通过运行以下图中的单元格，您现在可以以编程方式连接到`ComputeTarget`并配置节点：![图4.30
    – MNIST图像分类笔记本
- en: '](img/Figure_4.30_B16890_.jpg)'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.30_B16890_.jpg)'
- en: Figure 4.30 – MNIST image classification notebook
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.30 – MNIST图像分类笔记本
- en: Now it's time to programmatically download the MNIST dataset for training. Yann
    LeCun (Courant Institute, NYU) and Corinna Cortes (Google Labs, New York) hold
    the copyright of the MNIST dataset, which is a derivative work from the original
    MNIST datasets. The MNIST dataset is made available under the terms of the Creative
    Commons Attribution-Share Alike 3.0 license. Once downloaded, you can also visualize
    it as shown in the following notebook screenshot:![Figure 4.31 – MNIST image classification
    notebook
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在是时候以编程方式下载MNIST数据集进行训练了。Yann LeCun（纽约大学Courant研究所）和Corinna Cortes（纽约谷歌实验室）拥有MNIST数据集的版权，该数据集是原始MNIST数据集的派生作品。MNIST数据集在Creative
    Commons Attribution-Share Alike 3.0许可条款下提供。下载后，您还可以像以下笔记本屏幕截图所示那样可视化它：![图4.31
    – MNIST图像分类笔记本
- en: '](img/Figure_4.31_B16890_.jpg)'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.31_B16890_.jpg)'
- en: Figure 4.31 – MNIST image classification notebook
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.31 – MNIST图像分类笔记本
- en: As you probably have remembered from our earlier adventures with MNIST, we will
    create the training and testing split for the dataset as shown in the following
    figure and train a logistic regression model. We'll now also create an estimator,
    which is used to submit the run to the cluster:![Figure 4.32 – MNIST image classification
    notebook
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您可能从我们之前与MNIST的冒险经历中记得，我们将为数据集创建如图所示的训练和测试分割，并训练一个逻辑回归模型。现在我们还将创建一个估算器，用于将运行提交到集群：![图4.32
    – MNIST图像分类笔记本
- en: '](img/Figure_4.32_B16890.jpg)'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/Figure_4.32_B16890.jpg)'
- en: Figure 4.32 – MNIST image classification notebook
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.32 – MNIST图像分类笔记本
- en: When working in Azure Machine Learning, one cardinal rule to remember is that
    all experiments and associated runs are interlinked to maintain the consistency
    of the ecosystem. This helps a lot since, regardless of where you run your experiment
    (in a notebook, JupyterLab, as custom code, and so on), you can pull up the runs
    and see the details. More on this soon.
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在使用 Azure 机器学习工作时，有一条必须记住的规则，那就是所有实验及其关联的运行都是相互关联的，以保持生态系统的连贯性。这非常有帮助，因为无论你在哪里运行实验（在笔记本、JupyterLab、自定义代码等），你都可以调出运行情况并查看详细信息。关于这一点，稍后会有更多介绍。
- en: 'In the following figure, you see the code demonstrating the creation of an
    estimator, and then submitting the job to the cluster by calling the `submit`
    function of the `experiment` object:'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在下面的图中，你可以看到创建估算器的代码，然后通过调用 `experiment` 对象的 `submit` 函数将作业提交到集群：
- en: '![Figure 4.33 – MNIST image classification notebook'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.33 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.33_B16890.jpg)'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.33_B16890.jpg)'
- en: Figure 4.33 – MNIST image classification notebook
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.33 – MNIST 图像分类笔记本
- en: At this point, running the cells in the following figure demonstrates how you
    can visualize the details of `experiment` using the Jupyter widget `wait_for_completion`
    method to see the status of the job. This shows the job running on the remote
    cluster, and the corresponding build log as part of the widget. You can see the
    **Run** details as part of the widget as shown in the following figure:![Figure
    4.34 – MNIST image classification notebook
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一点上，运行以下图中的单元格演示了如何使用 Jupyter 小部件的 `wait_for_completion` 方法可视化 `experiment`
    的详细信息，以查看作业的状态。这显示了在远程集群上运行的作业，以及作为小部件一部分的相应构建日志。你可以看到如下图中作为小部件一部分的 **运行** 详细信息：![图
    4.34 – MNIST 图像分类笔记本
- en: '](img/Figure_4.34_B16890.jpg)'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.34_B16890.jpg)'
- en: Figure 4.34 – MNIST image classification notebook
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.34 – MNIST 图像分类笔记本
- en: 'As the job runs on the remote cluster, and we see the results streaming in,
    you can observe the training unfold in front of your eyes with the corresponding
    percentage indicator:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 当作业在远程集群上运行时，我们看到结果流进来，你可以通过相应的百分比指示器观察到训练在你眼前展开：
- en: '![Figure 4.35 – MNIST image classification notebook'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.35 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.35_B16890.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.35_B16890.jpg)'
- en: Figure 4.35 – MNIST image classification notebook
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.35 – MNIST 图像分类笔记本
- en: 'As the job completes, you will see the time taken and the run ID displayed
    in the widget, as shown in the following screenshot:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 当作业完成时，你将在小部件中看到所花费的时间和运行 ID，如下面的截图所示：
- en: '![Figure 4.36 – MNIST image classification notebook'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.36 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.36_B16890.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.36_B16890.jpg)'
- en: Figure 4.36 – MNIST image classification notebook
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.36 – MNIST 图像分类笔记本
- en: 'You can also see the details of the experiment in the web UI by clicking on
    the details page that follows. You can see detailed documentation about how experiments
    work by looking at the docs page link shown in the following screenshot:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以通过点击后续的详细信息页面来查看实验的详细信息。你可以通过查看以下截图中的文档页面链接来了解有关实验如何工作的详细文档：
- en: '![Figure 4.37 – MNIST image classification notebook'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.37 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.37_B16890.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.37_B16890.jpg)'
- en: Figure 4.37 – MNIST image classification notebook
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.37 – MNIST 图像分类笔记本
- en: 'Once the training is complete, you will see the results metrics logged during
    the run, and can also register the model. This means you get the corresponding
    `.pkl` file for the model:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦训练完成，你将看到运行期间记录的结果指标，并且还可以注册模型。这意味着你将获得模型的相应 `.pkl` 文件：
- en: '![Figure 4.38 – MNIST image classification notebook'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.38 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.38_B16890.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.38_B16890.jpg)'
- en: Figure 4.38 – MNIST image classification notebook
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.38 – MNIST 图像分类笔记本
- en: 'Now you can retrieve all the metrics logged during the run by calling `run.get_metrics()`,
    including the accuracy of the model. In this case, the accuracy is 0.9193:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你可以通过调用 `run.get_metrics()` 获取运行期间记录的所有指标，包括模型的准确度。在这种情况下，准确度为 0.9193：
- en: '![Figure 4.39 – MNIST image classification notebook'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.39 – MNIST 图像分类笔记本'
- en: '](img/Figure_4.39_B16890.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_4.39_B16890.jpg)'
- en: Figure 4.39 – MNIST image classification notebook
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.39 – MNIST 图像分类笔记本
- en: 'At this point, the notebook automatically saves the model file (`.pkl`) as
    the output in the output folder. You can see the files by calling the `run.get_file_names()`
    method. In the next steps, we will use this model file to create a web service
    and invoke it:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，笔记本会自动将模型文件（`.pkl`）保存为输出文件夹中的输出。您可以通过调用`run.get_file_names()`方法来查看文件。在接下来的步骤中，我们将使用此模型文件来创建网络服务并调用它：
- en: '![Figure 4.40 – MNIST image classification notebook'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 4.40 – MNIST image classification notebook'
- en: '](img/Figure_4.40_B16890.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_4.40_B16890.jpg]'
- en: Figure 4.40 – MNIST image classification notebook
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.40 – MNIST图像分类笔记本
- en: Deploying and testing models with Azure Machine Learning
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Azure机器学习部署和测试模型
- en: 'The model is now trained, a .`pkl` file has been created, and the model can
    be deployed for testing. The deployment part is done in the second notebook, `part2-deploy.ipynb`,
    as seen in the following figure. To deploy the model, we open up the `part 2-deploy.ipynb`
    notebook by clicking on the notebook in the left pane. We load the .`pkl` file
    by calling the `joblib.Load` method. You also see the `run` method in the following
    screenshot, which receives the raw JSON data, invokes the model''s `predict` method,
    and returns the result:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 模型现在已经训练完成，创建了一个`.pkl`文件，并且模型可以用于测试。部署部分在第二个笔记本`part2-deploy.ipynb`中完成，如下图中所示。要部署模型，我们通过点击左侧面板中的笔记本来打开`part
    2-deploy.ipynb`笔记本。我们通过调用`joblib.Load`方法来加载`.pkl`文件。您还可以在下面的屏幕截图中看到`run`方法，它接收原始JSON数据，调用模型的`predict`方法，并返回结果：
- en: '![Figure 4.41 – MNIST image classification notebook'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 4.41 – MNIST image classification notebook'
- en: '](img/Figure_4.41_B16890.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_4.41_B16890.jpg]'
- en: Figure 4.41 – MNIST image classification notebook
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.41 – MNIST图像分类笔记本
- en: 'In this step, we create a model object by calling the `Model` constructor as
    shown in the following figure. This model uses the configuration properties from
    the `Environment` object, and the service name to deploy the endpoint. This endpoint
    is deployed using **Azure Container Instances** (**ACI**). The endpoint location
    is available once the deployment is successful:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，我们通过调用如下图所示的`Model`构造函数来创建一个模型对象。此模型使用来自`Environment`对象的配置属性，并使用服务名称部署端点。此端点使用**Azure容器实例**（**ACI**）部署。部署成功后，端点位置即可使用：
- en: '![Figure 4.42 – MNIST image classification notebook'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 4.42 – MNIST image classification notebook'
- en: '](img/Figure_4.42_B16890.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_4.42_B16890.jpg]'
- en: Figure 4.42 – MNIST image classification notebook
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.42 – MNIST图像分类笔记本
- en: You can now retrieve the scoring URI, which can be used to invoke the service
    and get the results from the model:![Figure 4.43 – MNIST image classification
    notebook
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在可以检索评分URI，该URI可用于调用服务并从模型获取结果：![Figure 4.43 – MNIST image classification
    notebook
- en: '](img/Figure_4.43_B16890.jpg)'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/Figure_4.43_B16890.jpg]'
- en: Figure 4.43 – MNIST image classification notebook
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.43 – MNIST图像分类笔记本
- en: 'Now you can invoke the web service to get the results:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您可以调用网络服务以获取结果：
- en: '![Figure 4.44 – MNIST image classification notebook'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 4.44 – MNIST image classification notebook'
- en: '](img/Figure_4.44_B16890.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_4.44_B16890.jpg]'
- en: Figure 4.44 – MNIST image classification notebook
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.44 – MNIST图像分类笔记本
- en: 'You can also see the corresponding confusion matrix by invoking the `confusion_matrix`
    method:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过调用`confusion_matrix`方法查看相应的混淆矩阵：
- en: '![Figure 4.45 – MNIST image classification notebook'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 4.45 – MNIST image classification notebook'
- en: '](img/Figure_4.45_B16890.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_4.45_B16890.jpg]'
- en: Figure 4.45 – MNIST image classification notebook
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.45 – MNIST图像分类笔记本
- en: This completes the whole cycle of building a model, deploying, and testing it
    within Azure Machine Learning. We will continue with automated ML in the next
    chapter.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 这就完成了在Azure机器学习中构建模型、部署和测试的整个周期。我们将在下一章继续介绍自动化机器学习。
- en: Summary
  id: totrans-195
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned how to get started with the Microsoft Azure platform,
    the ML services ecosystem capabilities, and learned about Microsoft's AI and ML
    offerings. You were also briefed on different capabilities within the Azure platform,
    such as collaborative notebooks, drag and drop ML, MLOPS, RStudio integration,
    reinforcement learning, enterprise-grade security, automated ML, data labeling,
    autoscaling compute, integration with other Azure services, responsible ML, and
    cost management. Finally, to test your newly discovered Azure superpowers, you
    configured, built, deployed, and tested a classification web service using an
    Azure Machine Learning notebook.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何开始使用Microsoft Azure平台，了解ML服务生态系统功能，并了解了微软的AI和ML产品。你还简要了解了Azure平台内的不同功能，例如协作笔记本、拖放式ML、MLOPS、RStudio集成、强化学习、企业级安全、自动化ML、数据标注、自动扩展计算、与其他Azure服务的集成、负责任ML和成本管理。最后，为了测试你新发现的Azure超能力，你使用Azure机器学习笔记本配置、构建、部署并测试了一个分类Web服务。
- en: In the next chapter, we will further dive into using the automated ML features
    of the Azure Machine Learning service.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将进一步深入探讨使用Azure机器学习服务的自动化ML功能。
- en: Further reading
  id: totrans-198
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'For more information on the following topics, you can visit the given links:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解更多关于以下主题的信息，您可以访问提供的链接：
- en: 'Python notebooks with ML and deep learning examples with Azure Machine Learning:'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有Azure机器学习示例的ML和深度学习Python笔记本：
- en: '[https://github.com/Azure/MachineLearningNotebooks](https://github.com/Azure/MachineLearningNotebooks'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://github.com/Azure/MachineLearningNotebooks](https://github.com/Azure/MachineLearningNotebooks)'
- en: )
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: What are compute targets in Azure Machine Learning?
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure机器学习中的计算目标是什么？
- en: '[https://docs.microsoft.com/en-us/azure/machine-learning/concept-compute-target](https://docs.microsoft.com/en-us/azure/machine-learning/concept-compute-target'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/machine-learning/concept-compute-target](https://docs.microsoft.com/en-us/azure/machine-learning/concept-compute-target)'
- en: )
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: 'Use automated ML in an Azure Machine Learning pipeline in Python:'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Python的Azure机器学习管道中使用自动化ML：
- en: '[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automlstep-in-pipelines](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automlstep-in-pipelines'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automlstep-in-pipelines](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automlstep-in-pipelines)'
- en: )
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: 'A critical overview of AutoML solutions by Bahador Khaleghi:'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴哈多·卡莱吉对AutoML解决方案的批判性概述：
- en: '[https://medium.com/analytics-vidhya/a-critical-overview-of-automl-solutions-cb37ab0eb59e](https://medium.com/analytics-vidhya/a-critical-overview-of-automl-solutions-cb37ab0eb59e'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://medium.com/analytics-vidhya/a-critical-overview-of-automl-solutions-cb37ab0eb59e](https://medium.com/analytics-vidhya/a-critical-overview-of-automl-solutions-cb37ab0eb59e)'
- en: )
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: )
