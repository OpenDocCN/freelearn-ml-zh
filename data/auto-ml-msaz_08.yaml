- en: '*Chapter 6*: Building an AutoML Forecasting Solution'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第6章*: 构建一个AutoML预测解决方案'
- en: 'Having built an AutoML regression and classification solution, you are now
    ready to tackle a more complicated problem: **forecasting**. Forecasting is inherently
    a much more complex technique than either classification or regression. Those
    two **machine learning** (**ML**) problem types assume that time is irrelevant.
    Regardless of how much time passes, your diabetes model will always be able to
    accurately predict whose condition worsens over time. Your Titanic model will
    always be able to predict who lives and who dies. In contrast, with forecasting
    problems, you are always trying to predict future events based on past events;
    time will always be a factor in your model.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建了AutoML回归和分类解决方案之后，你现在准备好解决一个更复杂的问题：**预测**。预测本质上比分类或回归复杂得多。那两种**机器学习**（**ML**）问题类型假设时间是不相关的。无论时间过去多久，你的糖尿病模型总是能够准确预测谁的病情会随着时间的推移而恶化。你的泰坦尼克号模型总是能够预测谁会生存谁会死亡。相比之下，在预测问题中，你总是试图根据过去的事件来预测未来的事件；时间总是你模型中的一个因素。
- en: You will begin this chapter similarly to how you began [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*, and [*Chapter 5*](B16595_05_ePub.xhtml#_idTextAnchor068),
    *Building an AutoML Classification Solution*. First, you will navigate to your
    Jupyter environment, load in data, train a model, and evaluate the results. You
    will learn two inherently different ways to train forecasting models with AutoML.
    One way uses only the **ARIMA** and **Prophet** algorithms; the other way uses
    all other available algorithms.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你将像开始[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建一个AutoML回归解决方案*和[*第5章*](B16595_05_ePub.xhtml#_idTextAnchor068)，*构建一个AutoML分类解决方案*一样开始这一章。首先，你将导航到你的Jupyter环境，加载数据，训练一个模型，并评估结果。你将学习两种本质上不同的使用AutoML训练预测模型的方法。一种方法仅使用**ARIMA**和**Prophet**算法；另一种方法使用所有其他可用的算法。
- en: At the end of this chapter, you will learn tips and tricks on how to fine-tune
    your forecasting models by adjusting AutoML settings; there are a lot of settings
    specific to forecasting, so you will spend a lot of time covering their various
    use cases.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，你将学习如何通过调整AutoML设置来微调你的预测模型；有许多特定于预测的设置，因此你将花费大量时间来覆盖它们的各种用例。
- en: By the end of his chapter, you will be able to train forecasting models using
    AutoML without making mistakes. Relative to other techniques, forecasting problems
    are much easier to screw up, so this is quite an accomplishment. You will understand
    how to transform and arrange your data for forecasting and how to adjust AutoML
    settings to produce more accurate, more trustworthy models, solidifying your expertise
    in Azure AutoML.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将能够使用AutoML训练预测模型而不会出错。与其他技术相比，预测问题更容易出错，所以这是一个相当大的成就。你将了解如何转换和安排你的数据以进行预测，以及如何调整AutoML设置以产生更准确、更可靠的模型，巩固你在Azure
    AutoML方面的专业知识。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Prepping data for AutoML forecasting
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备AutoML预测数据
- en: Training an AutoML forecasting model
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 训练一个AutoML预测模型
- en: Registering your trained forecasting model
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注册你的训练好的预测模型
- en: Fine-tuning your AutoML forecasting model
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微调你的AutoML预测模型
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'Like [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056), *Building an AutoML
    Regression Solution*, you will be creating and training models with Python code
    in a Jupyter notebook running on an Azure compute instance. As such, you will
    require a working internet connection, an **Azure Machine Learning Service** (**AMLS**)
    **workspace**, and a compute instance. Likewise, you will need to have a working
    compute cluster to train models remotely while you continue to work on your notebook.
    The full list of requirements is as follows:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 与[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建一个AutoML回归解决方案*一样，你将在运行在Azure计算实例上的Jupyter笔记本中用Python代码创建和训练模型。因此，你需要一个有效的互联网连接，一个**Azure机器学习服务**（**AMLS**）**工作区**和一个计算实例。同样，当你继续在笔记本上工作时，你需要一个可工作的计算集群来远程训练模型。完整的要求列表如下：
- en: Access to the internet.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问互联网。
- en: A web browser, preferably Google Chrome or Microsoft Edge Chromium.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个网络浏览器，最好是Google Chrome或Microsoft Edge Chromium。
- en: A Microsoft Azure account.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个Microsoft Azure账户。
- en: You should have created an AMLS workspace.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你应该已经创建了一个AMLS工作区。
- en: You should have created a compute instance.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你应该已经创建了一个计算实例。
- en: You should have created the compute cluster in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023),
    *Getting Started with Azure Machine Learning Service.*
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你应该在 [*第 2 章*](B16595_02_ePub.xhtml#_idTextAnchor023)，*Azure Machine Learning
    服务入门* 中创建了计算集群。
- en: You should understand how to navigate to the Jupyter environment from an Azure
    compute instance as demonstrated in [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution.*
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你应该了解如何从 Azure 计算实例导航到 Jupyter 环境，如 [*第 4 章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建
    AutoML 回归解决方案* 中所示。
- en: 'The code for this chapter is available here: [https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter06](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter06).'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码在此处可用：[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter06](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter06)。
- en: Prepping data for AutoML forecasting
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备 AutoML 预测数据
- en: Forecasting is very different from either classification or regression. ML models
    for regression or classification predict some output based on some input data.
    ML models for forecasting, on the other hand, predict a future state based on
    patterns found in the past. This means that there are key time-related details
    you need to pay attention to while shaping your data.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 预测与分类或回归非常不同。回归或分类的机器学习模型基于一些输入数据预测某些输出。另一方面，预测的机器学习模型基于过去发现的模式预测未来状态。这意味着在塑造数据时，你需要注意一些关键的时间相关细节。
- en: For this exercise, you are going to use the `OJ Sales Simulated Data` Azure
    Open Dataset for forecasting. Similar to the `Diabetes Sample` Azure Open Dataset
    you used for regression, `OJ Sales Simulated Data` is available simply by having
    an Azure account. You will use this data to create a model to predict future orange
    juice sales across different brands and stores.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个练习，你将使用 `OJ Sales Simulated Data` Azure 开放数据集进行预测。与用于回归的 `Diabetes Sample`
    Azure 开放数据集类似，`OJ Sales Simulated Data` 只需拥有 Azure 账户即可获取。你将使用这些数据创建一个模型，预测不同品牌和商店未来橙汁的销售情况。
- en: There is one additional key difference; `OJ Sales Simulated Data` is a **file
    dataset** instead of a **tabular dataset**. While tabular datasets consist of
    one file containing columns and rows, file datasets consist of many files, tabular
    or otherwise.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个额外的关键区别；`OJ Sales Simulated Data` 是一个 **文件数据集**，而不是 **表格数据集**。虽然表格数据集由一个包含列和行的文件组成，但文件数据集由许多文件组成，可以是表格或其他类型。
- en: Like all the other coding work you have performed in your AMLS workspace, you
    will begin by opening up Jupyter from your compute instance and creating a new
    Jupyter notebook. Then, you will load in your data, transform it into a pandas
    dataframe, and register it as a dataset, enabling you to use it to train an ML
    model with AutoML.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 就像你在 AMLS 工作区中执行的所有其他编码工作一样，你将首先从计算实例打开 Jupyter，创建一个新的 Jupyter 笔记本。然后，你将加载数据，将其转换为
    pandas 数据框，并将其注册为数据集，这样你就可以使用它来训练一个 AutoML 机器学习模型。
- en: Navigating to your Jupyter environment
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导航到你的 Jupyter 环境
- en: 'You will begin by creating a new Jupyter notebook with the following steps:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你将按照以下步骤开始创建一个新的 Jupyter 笔记本：
- en: First, open up your **Azure Machine Learning** (**AML**) **studio** by navigating
    to [http://ml.azure.com](http://ml.azure.com).
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，通过导航到 [http://ml.azure.com](http://ml.azure.com) 打开你的 **Azure Machine Learning**
    (**AML**) **工作室**。
- en: Click **Compute** from the left-hand panel.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧面板点击 **Compute**。
- en: Select your compute instance. Click **Start** if it's not running.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你的计算实例。如果它没有运行，请点击 **Start**。
- en: Important tip
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: To save money while working on Azure, turn off your compute instance when you
    are not using it. Compute instances are paid for on an hourly basis.
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 Azure 上工作以节省金钱时，当你不使用计算实例时请关闭它。计算实例按小时计费。
- en: Click **Jupyter** to enter your Jupyter environment.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Jupyter** 进入你的 Jupyter 环境。
- en: Create a new Jupyter notebook by clicking **New** on the right-hand side of
    your screen and select **Python 3.6 – AzureML**. The version of Python may be
    different due to updates.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击屏幕右侧的 **New** 创建一个新的 Jupyter 笔记本，并选择 **Python 3.6 – AzureML**。由于更新，Python
    的版本可能不同。
- en: Rename your Jupyter notebook to `OJ Forecasting_AutoML`. If you need a refresher
    as to how to do so, please review [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的 Jupyter 笔记本重命名为 `OJ Forecasting_AutoML`。如果你需要复习如何这样做，请参阅 [*第 4 章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建
    AutoML 回归解决方案*。
- en: With your notebook created, you are now ready to load in the orange juice sales
    data and transform it with Python.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建好笔记本之后，你现在可以准备加载橙汁销售数据，并用Python进行转换。
- en: Loading and transforming your data
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 加载数据和转换数据
- en: 'Now it''s time to work with your data, following the patterns you used in [*Chapter
    4*](B16595_04_ePub.xhtml#_idTextAnchor056), *Building an AutoML Regression Solution*,
    and [*Chapter 5*](B16595_05_ePub.xhtml#_idTextAnchor068), *Building an AutoML
    Classification Solution*. The purpose of this section is to take a file dataset
    with many files, combine all the files together, and create a new tabular dataset.
    Perform the following steps:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候使用你的数据了，按照你在[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建AutoML回归解决方案*和[*第5章*](B16595_05_ePub.xhtml#_idTextAnchor068)，*构建AutoML分类解决方案*中使用的模式进行操作。本节的目的是从包含许多文件的文件数据集中提取一个子集，将所有文件合并在一起，并创建一个新的表格数据集。执行以下步骤：
- en: 'Load in all of the Azure libraries you will need with the following code:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码加载你需要的所有Azure库：
- en: '[PRE0]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: You should recognize `Workspace`, `Dataset`, `Datastore`, `Experiment`, `ComputeTarget`,
    `AutoMLConfig`, `AutoMLRun`, and `RunDetails` from [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*.
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你应该能识别出从[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建AutoML回归解决方案*中提到的`Workspace`、`Dataset`、`Datastore`、`Experiment`、`ComputeTarget`、`AutoMLConfig`、`AutoMLRun`和`RunDetails`。
- en: '`OjSalesSimulated` lets you directly access the `OJ Sales Simulated Data` Azure
    Open Dataset via the `ForecastingParameters` is necessary for AutoML forecasting
    tasks, as you cannot simply pass in forecasting-specific parameters to an `AutoMLConfig`
    object. You must first assign them to `ForecastingParameters` and then pass those
    parameters into your AutoML configurations.'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`OjSalesSimulated`允许你通过`ForecastingParameters`直接访问`OJ Sales Simulated Data`
    Azure Open Dataset，对于AutoML预测任务来说，这是必要的，因为你不能简单地将预测特定的参数传递给`AutoMLConfig`对象。你必须首先将它们分配给`ForecastingParameters`，然后将这些参数传递到你的AutoML配置中。'
- en: Important note
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'If you are having trouble loading any Azure libraries, update the Azure ML
    SDK by running the `Update` `AzureML` `SDK.ipynb` notebook found here: https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Update-AzureML-SDK.ipynb.'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你加载任何Azure库时遇到问题，请通过运行此处找到的`Update` `AzureML` `SDK.ipynb`笔记本来更新Azure ML SDK：https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Update-AzureML-SDK.ipynb。
- en: 'Load in `pandas`, `numpy`, `os`, and `path` with the following code:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码加载`pandas`、`numpy`、`os`和`path`：
- en: '[PRE1]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: You should recognize `pandas` and `numpy` from [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*. `os` and `Path` will be new to you.
    These packages let you create and manipulate files and folders in your Jupyter
    environment from within a Jupyter notebook. Moreover, they are necessary when
    working with file datasets such as `OjSimulatedSales` to turn them into tabular
    datasets for AutoML training.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你应该能从[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建AutoML回归解决方案*中识别出`pandas`和`numpy`。`os`和`Path`对你来说将是新的。这些包允许你在Jupyter笔记本中创建和操作文件和文件夹。此外，当与`OjSimulatedSales`等文件数据集一起工作时，它们是必要的，可以将它们转换为AutoML训练的表格数据集。
- en: 'Connect your Jupyter notebook to your AMLS workspace:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的Jupyter笔记本连接到你的AMLS工作区：
- en: '[PRE2]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: If you are prompted to log in, do so by following the instructions.
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你被提示登录，请按照指示进行操作。
- en: 'Set your compute cluster:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置你的计算集群：
- en: '[PRE3]'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: You created this compute cluster in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023),
    *Getting Started with Azure Machine Learning Service*.
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你在[*第2章*](B16595_02_ePub.xhtml#_idTextAnchor023)，*Azure机器学习服务入门*中创建了此计算集群。
- en: 'Set your datastore. For this exercise, we will use the default datastore that
    comes with your AMLS workspace:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置你的数据存储。对于这个练习，我们将使用与你的AMLS工作区一起提供的默认数据存储：
- en: '[PRE4]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Pull in a subset of `10` files from `OJ Sales Simulated Data` with this code:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用此代码从`OJ Sales Simulated Data`中拉取`10`个文件：
- en: '[PRE5]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Important tip
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要技巧
- en: There are over 4,000 files in the `OJ Sales Simulated Data` Azure Open Dataset.
    Pulling all of them can result in extended training times.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`OJ Sales Simulated Data` Azure Open Dataset中有超过4,000个文件。拉取所有这些文件可能会导致训练时间延长。'
- en: 'Make a folder to download the files to your Jupyter environment with the following
    code:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码创建一个文件夹，以便将文件下载到你的Jupyter环境中：
- en: '[PRE6]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: In order to use file datasets, you first need to download them to your local
    Jupyter environment. Then, you can read them in as a pandas dataframe by concatenating
    the files.
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了使用文件数据集，你首先需要将它们下载到你的本地Jupyter环境中。然后，你可以通过连接文件来将它们作为pandas dataframe读取。
- en: 'Download the 10 files to your newly created `OJ_Sales` folder with the following
    code:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码将10个文件下载到您新创建的`OJ_Sales`文件夹：
- en: '[PRE7]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: If you navigate to the `OJ Sales` folder on your Jupyter environment, you should
    see the files there after running this code.
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您在Jupyter环境中导航到`OJ Sales`文件夹，您应该在运行此代码后看到那里的文件。
- en: 'Read in the 10 files as a single pandas dataframe with the following code:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码将10个文件作为一个单独的pandas数据框读取：
- en: '[PRE8]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: For this, we will need to use the `Path` package to indicate the folder and
    file extension, as well as `pandas` to concatenate the 10 files into a single
    dataframe. Please note that this code will read everything in your `OJ Sales`
    folder. Do not place additional files in this folder or this will corrupt this
    portion of the code.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了实现这一点，我们需要使用`Path`包来指定文件夹和文件扩展名，以及`pandas`将10个文件合并成一个单一的数据框。请注意，此代码将读取您`OJ
    Sales`文件夹中的所有内容。请不要在此文件夹中放置其他文件，否则将损坏此部分的代码。
- en: 'View the first 10 rows of your data. Make sure that it looks correct:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看您数据的前10行。确保其看起来正确：
- en: '[PRE9]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The orange juice sales data has seven columns: `WeekStarting`, `Store`, `Brand`,
    `Quantity`, `Advert`, `Price`, and `Revenue`. `Advert` indicates whether there
    was an advertising campaign for that brand of orange juice for that week. The
    other columns are self-explanatory. The first 10 rows of data appear as follows:'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 橙汁销售数据有七个列：`WeekStarting`、`Store`、`Brand`、`Quantity`、`Advert`、`Price`和`Revenue`。`Advert`表示该周是否有针对该品牌橙汁的广告活动。其他列是自解释的。数据的前10行如下所示：
- en: '![Figure 6.1 – Viewing your Orange Juice Sales dataset ](img/Figure_6.1_B16595.jpg)'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图6.1 – 查看您的橙汁销售数据集](img/Figure_6.1_B16595.jpg)'
- en: Figure 6.1 – Viewing your Orange Juice Sales dataset
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图6.1 – 查看您的橙汁销售数据集
- en: 'Register your pandas dataframe as a dataset:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您的pandas数据框注册为数据集：
- en: '[PRE10]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: While it may seem strange to register a file dataset as a tabular dataset, tabular
    datasets are inherently easier to work with. File datasets are simply pointers
    to a folder containing a lot of files; lots of data preprocessing work must be
    performed on the files before you can use them. Tabular datasets, on the other
    hand, are formatted and ready for immediate use with AutoML.
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 虽然将文件数据集注册为表格数据集可能看起来很奇怪，但表格数据集本身更容易处理。文件数据集只是指向包含大量文件的文件夹的指针；在使用它们之前，必须在文件上执行大量数据预处理工作。另一方面，表格数据集是格式化的，并准备好与AutoML立即使用。
- en: Here, it's important to note the main differences between `WeekStarting`. The
    time column needs to be on some sort of regular cadence, for example, every day,
    week, month, or year. In this case, it's every week on a Thursday.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，重要的是要注意`WeekStarting`的主要区别。时间列需要某种定期的节奏，例如每天、每周、每月或每年。在这种情况下，是每周四。
- en: Certain algorithms, such as *Prophet* and *ARIMA*, require you to have a time
    column with no gaps. Other AutoML algorithms can work with gaps, but only if you
    do not enable certain features, such as time lags, in your target column.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '某些算法，如*Prophet*和*ARIMA*，要求您拥有一个无间隔的时间列。其他AutoML算法可以处理间隔，但前提是您在目标列中未启用某些功能，例如时间滞后。 '
- en: Important tip
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Gaps in your time column also prevent you from using certain features specific
    to forecasting, specifically lags of your target column and moving averages of
    those lags. These features often improve performance. Carefully study your data
    to remove gaps for best performance in forecasting solutions.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 时间列中的间隔也会阻止您使用某些特定于预测的功能，特别是目标列的滞后和这些滞后的移动平均。这些功能通常可以提高性能。仔细研究您的数据，以消除间隔以在预测解决方案中获得最佳性能。
- en: The other essential element of time series data are your `Store` and `Brand`
    are your grain columns; there are separate time series for each combination of
    store and brand.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列数据的其他基本元素是您的`Store`和`Brand`是您的粒度列；每个商店和品牌的组合都有单独的时间序列。
- en: If AutoML detects multiple time series on a single grain, it will automatically
    fail. In other words, you cannot have duplicate dates for a single grain. For
    this reason, carefully study your data to remove duplicate dates across the same
    grain when using AutoML forecasting.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果AutoML在单个粒度上检测到多个时间序列，它将自动失败。换句话说，您不能为单个粒度有重复的日期。因此，在使用AutoML预测时，仔细研究您的数据，以消除同一粒度上的重复日期。
- en: With these things in mind, you are now ready to train an AutoML forecasting
    model. First, you will train a model without using *ARIMA* and *Prophet*. Then,
    you will train a model using these two algorithms.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这些因素，您现在可以训练一个AutoML预测模型。首先，您将训练一个不使用*ARIMA*和*Prophet*的模型。然后，您将使用这两个算法训练一个模型。
- en: Training an AutoML forecasting model
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 训练AutoML预测模型
- en: Training an AutoML forecasting is most similar to training an AutoML regression
    model. Like regression and unlike classification, you are trying to predict a
    number. Unlike regression, this number is always in the future based on patterns
    found in the past. Also, unlike regression, you can predict a whole series of
    numbers into the future. For example, you can choose to predict one month out
    into the future or you can choose to predict 6, 12, 18, or even 24 months out.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 训练AutoML预测模型与训练AutoML回归模型最为相似。与回归不同，而与分类不同，你试图预测一个数字。与回归不同，这个数字总是基于过去发现的模式在未来。此外，与回归不同，你可以预测一系列数字到未来。例如，你可以选择预测未来一个月，或者你可以选择预测6个月、12个月、18个月甚至24个月。
- en: Important tip
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The further out you try to predict, the less accurate your forecasting model
    will be.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 你尝试预测的时间越远，你的预测模型就越不准确。
- en: Follow the same steps you have seen in [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*, and [*Chapter 5*](B16595_05_ePub.xhtml#_idTextAnchor068),
    *Building an AutoML Classification Solution*. First, begin by setting a name for
    your experiment. Then, set your target column and your AutoML configurations.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 按照你在[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，“构建AutoML回归解决方案”和[*第5章*](B16595_05_ePub.xhtml#_idTextAnchor068)，“构建AutoML分类解决方案”中看到的相同步骤进行。首先，为你的实验设置一个名称。然后，设置你的目标列和AutoML配置。
- en: 'For forecasting, there is an additional step: setting your **forecasting parameters**.
    This is where you will set things such as your time column, grain columns, and
    lag settings. These settings then need to be passed into your AutoML configurations
    as a single forecasting parameters object. Once this is done, only then can you
    use AutoML to train a forecasting model.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 对于预测，还有一个额外的步骤：设置你的**预测参数**。这是你设置时间列、粒度列和滞后设置的地方。然后，这些设置需要作为单个预测参数对象传递到你的AutoML配置中。一旦完成这一步，你才能使用AutoML来训练一个预测模型。
- en: In this section, you will repeat this process twice, first by training a model
    as normal using the standard algorithms available for forecasting in AutoML, and
    second, you will repeat this process using slightly different settings to enable
    ARIMA and Prophet and to compare the performance of the two AutoML models.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将重复这个过程两次，首先是通过使用AutoML中可用的标准预测算法正常训练一个模型，其次，你将使用略微不同的设置来启用ARIMA和Prophet，并比较两个AutoML模型的性能。
- en: Training a forecasting model with standard algorithms
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用标准算法训练预测模型
- en: 'To train your forecasting model using AutoML, follow these steps, continuing
    in the `OJ Forecasting AutoML` Jupyter notebook:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用AutoML训练你的预测模型，请按照以下步骤操作，继续在`OJ 预测 AutoML` Jupyter笔记本中：
- en: 'Set your experiment and give it a name with the following code:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码设置你的实验并给它命名：
- en: '[PRE11]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: One important thing to remember is that an experiment can be a set of multiple
    training runs and not just a single training run. In other words, we can train
    multiple models with different settings under the same experiment name.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有一个重要的事情要记住，一个实验可以是一组多个训练运行，而不仅仅是一个单独的训练运行。换句话说，我们可以在同一个实验名称下使用不同的设置来训练多个模型。
- en: 'Retrieve your `OJ Sales Sample` dataset with the following code:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码检索你的`OJ 销售样本`数据集：
- en: '[PRE12]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Set your target column to `Quantity`:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的目标列设置为`数量`：
- en: '[PRE13]'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Capitalization matters with Python; keep that in mind.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在Python中，大小写很重要；请记住这一点。
- en: 'Create a variable for your AutoML task. `task` is the type of AutoML model
    you are trying to train. To predict future numbers, enter `forecasting`:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为你的AutoML任务创建一个变量。`task`是你试图训练的AutoML模型类型。要预测未来的数字，输入`forecasting`：
- en: '[PRE14]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Important note
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要说明
- en: It is always incorrect to train a forecasting problem as a regression problem.
    Even though they both nominally do the same thing, predicting a number, forecasting
    requires a much more careful approach to not include future values when training
    a model. Standard cross-validation methods that are used for regression do not
    apply to forecasting problems, so be sure to set `task` to `forecasting`.
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将预测问题作为回归问题来训练总是不正确的。尽管它们在名义上都做同样的事情，即预测一个数字，但预测需要更加谨慎的方法，以避免在训练模型时包含未来的值。用于回归的标准交叉验证方法不适用于预测问题，因此请确保将`task`设置为`forecasting`。
- en: 'Create a variable for your primary metric. **The primary metric** is how your
    model will be scored. Use **normalized root mean squared error** (**normalized
    RMSE**). This metric takes the prediction and subtracts it from the actual value
    for each observation, squares it, and averages the score across all observations.
    The lower the score, the better your model. Other options for forecasting include
    **R2 score**, **Spearman correlation**, and **normalized mean absolute error**
    (**normalized MAE**). Note that these are identical to regression metrics:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为你的主要指标创建一个变量。**主要指标**是评估你的模型的方式。使用 **标准化均方根误差**（**normalized RMSE**）。此指标将预测值从每个观察的实际值中减去，然后平方，并平均所有观察值的分数。分数越低，你的模型越好。预测的其他选项包括
    **R2 分数**、**Spearman 相关系数**和 **标准化平均绝对误差**（**normalized MAE**）。请注意，这些与回归指标相同：
- en: '[PRE15]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Create a variable for `featurization`. You can set `featurization` to `auto`
    or `off`. Set it to `auto`:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 `featurization` 创建一个变量。你可以将 `featurization` 设置为 `auto` 或 `off`。设置为 `auto`：
- en: '[PRE16]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: If you set `featurization` to `off`, you will have to drop high cardinality
    features, impute null values, one-hot encode your data, and generate additional
    features yourself. AutoML handles these for you automatically when featurization
    is set to `auto`.
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你将 `featurization` 设置为 `off`，你将不得不删除高基数特征，填充空值，对数据进行独热编码，并自己生成额外的特征。当将 `featurization`
    设置为 `auto` 时，AutoML 会自动为你处理这些。
- en: With forecasting, featurization also creates a variety of date/time features
    from your time column, including year, month, week, day of week, A.M./P.M., and
    hour of day. Always set `featurization` to `auto` unless you are an expert data
    scientist who can do everything yourself.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在预测中，特征化也会从你的时间列创建各种日期/时间特征，包括年份、月份、星期、星期几、上午/下午和一天中的小时。除非你是能够自己完成所有工作的专家数据科学家，否则始终将
    `featurization` 设置为 `auto`。
- en: 'Set your forecasting parameters. There are a lot of these and we will go over
    them one by one as follows:'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 设置你的预测参数。这些参数有很多，我们将逐一介绍如下：
- en: a) `country_or_region_for_holidays` determines which country to use to generate
    columns indicating different national holidays. You can set this parameter to
    either nothing, a single country, or a list of countries. Set it to `US` for United
    States. You will get a separate column for each holiday.
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) `country_or_region_for_holidays` 决定了使用哪个国家来生成表示不同国家假日的列。你可以将此参数设置为无、单个国家或国家列表。设置为
    `US` 以表示美国。你将为每个假日得到一个单独的列。
- en: b) `drop_columns_names` lets you input a list of columns to drop before training
    your forecasting model. Drop the `Revenue` column here, as it's partially derived
    from your target column, `Quantity`.
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) `drop_columns_names` 允许你在训练预测模型之前输入要删除的列的列表。在这里删除 `Revenue` 列，因为它部分来自你的目标列
    `Quantity`。
- en: '[PRE17]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Important note
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要注意事项
- en: 'There are quite a large number of parameters specific to forecasting. Take
    your time to understand these settings in depth by reading the *Azure AutoML ForecastingParameters*
    documentation here: [https://docs.microsoft.com/en-us/python/api/azureml-automl-core/azureml.automl.core.forecasting_parameters.forecastingparameters?view=azure-ml-py](https://docs.microsoft.com/en-us/python/api/azureml-automl-core/azureml.automl.core.forecasting_parameters.forecastingparameters?view=azure-ml-py).'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有相当多的特定于预测的参数。花时间通过阅读以下位置的 *Azure AutoML ForecastingParameters* 文档来深入了解这些设置：[https://docs.microsoft.com/en-us/python/api/azureml-automl-core/azureml.automl.core.forecasting_parameters.forecastingparameters?view=azure-ml-py](https://docs.microsoft.com/en-us/python/api/azureml-automl-core/azureml.automl.core.forecasting_parameters.forecastingparameters?view=azure-ml-py)。
- en: Configure your AutoML run. Here, you will pass in your task, primary metric,
    featurization settings, compute target, dataset, target column, and forecasting
    parameters. All of these you have previously created. You will also pass in how
    long the experiment will run for, whether it will stop early if model performance
    does not improve, the number of cross-validations, and model explainability settings.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置你的AutoML运行。在这里，你需要传入你的任务、主要指标、特征化设置、计算目标、数据集、目标列和预测参数。所有这些你之前都已经创建好了。你还需要传入实验将运行多长时间，如果模型性能没有提高，是否将提前停止，交叉验证的次数，以及模型可解释性设置。
- en: 'Additionally, you will pass in whether or not you want to use `3` splits; unlike
    classification or regression, forecasting runs are more accurate when you set
    cross-validation to a lower number. This is due to the nature of how AutoML splits
    the data into different sets for the purpose of scoring performance:'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，你将决定是否使用`3`个拆分；与分类或回归不同，当将交叉验证设置为较低数值时，预测运行更准确。这是由于AutoML将数据拆分为不同集合以评分性能的本质：
- en: '[PRE18]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Important note
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: '`False`. This is not the case for regression or classification.'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`False`。这与回归或分类不同。'
- en: 'Train your model and watch the results in real time:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 训练你的模型并实时查看结果：
- en: '[PRE19]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'As before, kick off your AutoML run, make yourself some coffee, then come back
    and watch your models get trained in real time. You will see a **data guardrails**
    check, as seen in *Figure 6.2*. Notice how it has changed for forecasting:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，启动你的AutoML运行，为自己泡杯咖啡，然后回来实时观看模型训练。你会看到一个**数据边界**检查，如图*图6.2*所示。注意它如何用于预测：
- en: '![Figure 6.2 – Data guardrails check for forecasting ](img/Figure_6.2_B16595.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图6.2 – 预测的数据边界检查](img/Figure_6.2_B16595.jpg)'
- en: Figure 6.2 – Data guardrails check for forecasting
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2 – 预测的数据边界检查
- en: First, data guardrails will check your time column to make sure that all data
    points are aligned with the correct frequency. For your `OJ Sales Sample` data,
    this means making sure that each data point falls on a Thursday and is separated
    by 1 week.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，数据边界将检查你的时间列，以确保所有数据点都与正确的频率对齐。对于你的`OJ 销售样本`数据，这意味着确保每个数据点都落在星期四，并且每周间隔1周。
- en: Then, data guardrails will impute missing values the same way it did for classification
    and regression. Here, there are no missing values in any of the columns. Lastly,
    it will look for time series that are too short to train with your settings. In
    the case that AutoML detects short series, it will create simpler models to handle
    these cases.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，数据边界将以与分类和回归相同的方式进行缺失值插补。在这里，任何列中都没有缺失值。最后，它将寻找训练设置中时间序列太短的情况。如果AutoML检测到短序列，它将创建更简单的模型来处理这些情况。
- en: 'After completing the data guardrails check, AutoML will start training models
    with different combinations of feature transformations, algorithms, and hyperparameters.
    If there are no features other than the time column, grain columns, and target
    column, it will train ARIMA and Prophet models in addition to its standard suite
    of forecasting models. Your output should resemble *Figure 6.3*:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 完成数据边界检查后，AutoML将开始使用不同的特征转换、算法和超参数组合来训练模型。如果没有除了时间列、粒度列和目标列之外的其他特征，它将除了其标准的预测模型套件外，还会训练ARIMA和Prophet模型。你的输出应该类似于*图6.3*：
- en: '![Figure 6.3 – AutoML results for forecasting ](img/Figure_6.3_B16595.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![图6.3 – 预测的AutoML结果](img/Figure_6.3_B16595.jpg)'
- en: Figure 6.3 – AutoML results for forecasting
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.3 – 预测的AutoML结果
- en: Training a forecasting model with Prophet and ARIMA
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Prophet和ARIMA训练预测模型
- en: One important difference between forecasting and the other two types of AutoML
    problems are the Prophet and ARIMA algorithms. Prophet and ARIMA are inherently
    different from all of the other algorithms in that, in order to train them, all
    you need are the grain columns, the target column, and the time column. That's
    it. Adding any other columns will restrict AutoML from using these algorithms.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 预测与其他两种AutoML问题类型的一个重要区别是Prophet和ARIMA算法。Prophet和ARIMA与所有其他算法本质上不同，因为为了训练它们，你只需要粒度列、目标列和时间列。仅此而已。添加任何其他列都将限制AutoML使用这些算法。
- en: What's different about Prophet and ARIMA is that they only use patterns found
    in the target column to make predictions. Other variables are ignored. Sometimes,
    they will outperform other algorithms; other times, they will not. It's hard to
    know when without trying.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: Prophet与ARIMA的不同之处在于，它们只使用目标列中找到的模式进行预测。其他变量被忽略。有时，它们会优于其他算法；有时则不会。不尝试很难知道。
- en: Because it's hard to know how well ARIMA and Prophet will perform relative to
    other algorithms, it's recommended to always try training them if you can. That
    is, if you have time series data without gaps in your time column, always train
    ARIMA and Prophet models first as your baseline. They take a longer time to train,
    so it's recommended that you increase your experiment timeout, especially with
    larger datasets.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 由于很难知道ARIMA和Prophet相对于其他算法的表现如何，建议如果你有时间，总是尝试训练它们。也就是说，如果你的时间序列数据在时间列中没有缺失，总是首先训练ARIMA和Prophet模型作为你的基线。它们需要更长的时间来训练，所以建议你增加你的实验超时时间，特别是对于更大的数据集。
- en: 'To build an AutoML forecasting solution using ARIMA and Prophet, follow these
    steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ARIMA和Prophet构建AutoML预测解决方案的步骤如下：
- en: Copy *steps 1-6* from the previous section until you get to forecasting parameters.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从上一节复制*步骤1-6*，直到你到达预测参数。
- en: 'Within forecasting parameters, remove all of your feature columns, leaving
    only your time, grain, and target columns. Also, turn off all AutoML generated
    features, such as holidays, feature lags, and targets lags, by setting them to
    `None`, as seen in the following code block:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在预测参数中，移除所有的特征列，只留下你的时间、粒度和目标列。此外，通过将它们设置为`None`来关闭所有AutoML生成的特征，如节假日、特征滞后和目标滞后，如下面的代码块所示：
- en: '[PRE20]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Feature lags and target lags work by creating additional variables. This is
    why they need to be removed from your data in order for AutoML to run Prophet
    and ARIMA.
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 特征滞后和目标滞后通过创建额外的变量来工作。这就是为什么为了使AutoML能够运行Prophet和ARIMA，它们需要从你的数据中移除。
- en: Configure your AutoML run as you did in *Step 8*, passing in your updated forecasting
    parameters.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照你在*步骤8*中做的那样配置你的AutoML运行，传递你的更新后的预测参数。
- en: 'Train your model and watch the results in real time:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 训练你的模型并实时查看结果：
- en: '[PRE21]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Once you rerun AutoML with these settings, your results should resemble *Figure
    6.4*. Notice that, for this problem, ARIMA and Prophet did not return better results,
    and that the voting ensemble outperformed all models as usual:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 重新运行AutoML后，你的结果应该类似于**图6.4**。注意，对于这个问题，ARIMA和Prophet没有返回更好的结果，并且投票集成通常优于所有模型：
- en: '![Figure 6.4 – AutoML forecasting results with ARIMA and Prophet ](img/Figure_6.4_B16595.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![**图6.4 – 使用ARIMA和Prophet的AutoML预测结果**](img/Figure_6.4_B16595.jpg)'
- en: Figure 6.4 – AutoML forecasting results with ARIMA and Prophet
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '**图6.4 – 使用ARIMA和Prophet的AutoML预测结果**'
- en: You have now trained two sets of models with your `OJ Sales Sample` data and
    have achieved a pretty low normalized RMSE. You can now move on to the next section
    to register your model. Registered models are necessary for later use in scoring
    new data through ML pipelines or real-time endpoints.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经使用`OJ Sales Sample`数据训练了两套模型，并实现了相当低的标准化RMSE。你现在可以进入下一节注册你的模型。注册的模型对于以后在ML管道或实时端点中评分新数据是必要的。
- en: Registering your trained forecasting model
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 注册你的训练好的预测模型
- en: 'The code to register forecasting models is identical to the code you used in
    [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056), *Building an AutoML Regression
    Solution*, in order to register your regression model, and in [*Chapter 5*](B16595_05_ePub.xhtml#_idTextAnchor068),
    *Building an AutoML Classification Solution*, in order to register your classification
    models. Always register new models, as you will use them in either real-time scoring
    endpoints or batch execution inference pipelines depending on your business scenario.
    Likewise, always add tags and descriptions for easier tracking:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 注册预测模型的代码与你在[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)中使用的代码相同，*构建一个AutoML回归解决方案*，以注册你的回归模型，以及在[*第5章*](B16595_05_ePub.xhtml#_idTextAnchor068)中使用的代码，*构建一个AutoML分类解决方案*，以注册你的分类模型。始终注册新模型，因为根据你的业务场景，你将在实时评分端点或批量执行推理管道中使用它们。同样，始终添加标签和描述以方便跟踪：
- en: 'First, give your model a name, a description, and some tags. **Tags** let you
    easily search for models, so think carefully as you implement them:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，给你的模型起一个名字，一个描述，以及一些标签。**标签**让你可以轻松地搜索模型，所以在实现时要仔细思考：
- en: '[PRE22]'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Next, register your model to your AMLS workspace, passing in your model name,
    tags, and description. Use the `AutoML_run` model you trained with in the *Training
    an AutoML forecasting model* section:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，将你的模型注册到你的AMLS工作区，传递你的模型名称、标签和描述。使用你在*训练一个AutoML预测模型*部分中训练的`AutoML_run`模型：
- en: '[PRE23]'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Try registering a different model based on R2 score. Give it a slightly different
    name, add an additional tag, and use an identical description:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试根据R2分数注册不同的模型。给它一个稍微不同的名字，添加一个额外的标签，并使用相同的描述：
- en: '[PRE24]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'In some situations, you will perform an AutoML training run, but you will forget
    to register the model. Do not fret. You can retrieve AutoML training runs using
    the experiment name and run ID and register the model from there. Use the following
    code:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，您将执行AutoML训练运行，但您会忘记注册模型。不要担心。您可以使用实验名称和运行ID检索AutoML训练运行，并从那里注册模型。请使用以下代码：
- en: '[PRE25]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: You have now registered your forecasting model and it is ready for use. You
    can use it to predict the demand for orange juice across a variety of stores and
    brands over the next 6 weeks. You can modify it in numerous ways too, such as
    predicting 3 weeks', 12 weeks', or simply next weeks' sales.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已注册了预测模型，并且它已准备好使用。您可以使用它来预测未来6周内各种商店和品牌的橙汁需求。您还可以以多种方式对其进行修改，例如预测3周、12周或仅仅是下周的销售情况。
- en: 'Forecasting is an art, much more so than classification or regression, and
    that makes the next section much more important: tips and tricks for fine-tuning
    AutoML forecasting models.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 预测是一门艺术，比分类或回归更为复杂，这使得下一节的内容尤为重要：微调AutoML预测模型的小技巧和窍门。
- en: Fine-tuning your AutoML forecasting model
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 微调您的AutoML预测模型
- en: In this section, you will first review tips and tricks for improving your AutoML
    forecasting models and then review the algorithms used by AutoML for forecasting.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将首先回顾提升您的AutoML预测模型的小技巧和窍门，然后回顾AutoML用于预测的算法。
- en: Improving AutoML forecasting models
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 提升AutoML预测模型
- en: 'Forecasting is very easy to get wrong. It''s easy to produce a model that seems
    to work in development, but fails to make accurate predictions once deployed to
    production. Many data scientists, even experienced ones, make mistakes. While
    AutoML will help you avoid some of the common mistakes, there are others that
    require you to exercise caution. In order to sidestep these pitfalls and make
    the best models possible, follow these tips and tricks:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 预测很容易出错。一个模型可能在开发阶段看起来似乎有效，但一旦部署到生产环境中，就无法做出准确的预测。许多数据科学家，即使是经验丰富的，也会犯错误。虽然AutoML可以帮助您避免一些常见的错误，但还有一些错误需要您谨慎行事。为了避开这些陷阱并制作出尽可能好的模型，请遵循以下小技巧和窍门：
- en: Any feature column that you train with has to be available in the future when
    you make a prediction. With `OJ Sales Sample`, this means that, if you want to
    predict the quantity of sales 6 weeks out and include price as an input variable,
    you need to know the price of each product 6 weeks out.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您用任何特征列进行训练时，都必须在您进行预测时可用。对于`OJ Sales Sample`，这意味着如果您想预测6周后的销售数量并将价格作为输入变量，您需要知道每个产品6周后的价格。
- en: Please confirm with your business partners and IT staff to see which data you
    will have available to make predictions. If you are not able to know the value
    of a feature column in the time frame over which you are trying to predict, drop
    that column from your training dataset.
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请与您的商业伙伴和IT人员确认，以了解您将有哪些数据可用于进行预测。如果您无法在尝试预测的时间框架内知道特征列的值，请从您的训练数据集中删除该列。
- en: Standard cross-validation techniques do not work with forecasting. AutoML uses
    `task` to `forecasting` if you are trying to make future-state predictions. Setting
    it to regression may give you results, but they will be meaningless since they
    ignore the time component.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准交叉验证技术不适用于预测。如果您试图进行未来状态预测，AutoML使用`task`设置为`forecasting`。将其设置为回归可能会给您一些结果，但由于它们忽略了时间成分，因此这些结果将没有意义。
- en: 'Become familiar with all of the different AutoML configuration options for
    forecasting. You can find them at this link: [https://docs.microsoft.com/en-us/python/api/azureml-train-automl-client/azureml.train.automl.automlconfig.automlconfig?view=azure-ml-py](https://docs.microsoft.com/en-us/python/api/azureml-train-automl-client/azureml.train.automl.automlconfig.automlconfig?view=azure-ml-py).'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉所有不同的AutoML预测配置选项。您可以在以下链接中找到它们：[https://docs.microsoft.com/en-us/python/api/azureml-train-automl-client/azureml.train.automl.automlconfig.automlconfig?view=azure-ml-py](https://docs.microsoft.com/en-us/python/api/azureml-train-automl-client/azureml.train.automl.automlconfig.automlconfig?view=azure-ml-py)。
- en: Always try building a forecasting model using only ARIMA and Prophet first.
    These two models provide a good baseline as they only use your time column and
    target column to build an ML model. If models using additional features do not
    outperform ARIMA and Prophet, you know those additional features aren't relevant
    to your business problem. Drop these features from your dataset.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总是首先尝试仅使用ARIMA和Prophet构建预测模型。这两个模型提供了一个良好的基线，因为它们只使用您的时间列和目标列来构建机器学习模型。如果使用额外特征的模型没有优于ARIMA和Prophet，那么您知道这些额外特征与您的业务问题不相关。从您的数据集中删除这些特征。
- en: Think carefully when deciding your forecast horizon. Usually, forecasting algorithms
    perform better when forecasting short horizons, either the next one or two time
    periods. When forecasting longer horizons, expect less accuracy the further out
    you go. Knowing this, please push back against your business partners when they
    ask you to forecast many time periods out.
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在决定预测范围时，请仔细思考。通常，预测算法在预测短期范围时表现更好，无论是下一个或两个时间段。当预测更长的范围时，您应该预期准确性会随着预测范围的扩大而降低。了解这一点后，当您的业务伙伴要求您预测很多时间段时，请向他们提出反对意见。
- en: Generally speaking, people always want to know the future, and the further out
    you can predict, the happier they will be. Please explain that they should put
    more trust in short-term forecasts than they should in longer-term forecasts.
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一般而言，人们总是想知道未来，而且您能预测得越远，他们就越高兴。请解释他们应该比长期预测更信任短期预测。
- en: Forecasting the future works best when the present situation resembles the past.
    Shock events will often disrupt even well-performing forecast models. When this
    happens, try training a model using only recent data points. This is an iterative
    process, as it's often difficult to tell which training points are still relevant.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当现状与过去相似时，预测未来效果最佳。冲击事件通常会破坏甚至表现良好的预测模型。当这种情况发生时，尝试仅使用最近的数据点来训练模型。这是一个迭代过程，因为通常很难判断哪些训练点仍然相关。
- en: In some cases, the best thing you can do is start training models using data
    only from the onset of the shock event. For example, many stores experienced wildly
    different product demand during the coronavirus pandemic compared to pre-pandemic
    conditions.
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在某些情况下，最好的做法是仅使用冲击事件开始的数据来训练模型。例如，许多商店在冠状病毒大流行期间与疫情前的条件相比，经历了截然不同的产品需求。
- en: When shock events pass and things return to normal, try training forecasting
    models using the weighted column feature in AutoML. Set time periods during the
    shock event to `0`.
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当冲击事件过去，事情恢复正常时，尝试使用AutoML中的加权列特征来训练预测模型。将冲击事件期间的时间段设置为`0`。
- en: Remember that AutoML forecasting models should not be trained with gaps in the
    time column. However, data points that occurred during shock events are not relevant
    to normal situations. By using the weighted column and setting weights to `0`
    and `1`, you can train a forecasting model that effectively ignores shock events
    without violating the no gap rule.
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 记住，不应在时间列存在空缺的情况下训练AutoML预测模型。然而，在冲击事件期间发生的数据点与正常情况不相关。通过使用加权列并将权重设置为`0`和`1`，您可以训练一个有效地忽略冲击事件而不违反无空缺规则的预测模型。
- en: Likewise, use the weight column to weight the recent past more heavily than
    the further past. For many problems, recent data is more relevant than past data.
    Interview your business partners to find key dates when your industry changed.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同样，使用权重列来更重视近期数据而不是更远期的数据。对于许多问题，近期数据比过去数据更相关。采访您的业务伙伴，找到您的行业发生变革的关键日期。
- en: Furthermore, more data only helps forecasting models if the past situation resembles
    the present situation. Forecasting models often produce better results when you
    train models using only recent, relevant data. Do not be afraid to drop data points
    that are too far in the past to help predict the current situation.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，只有当过去的情况与现在的情况相似时，更多的数据才能帮助预测模型。当您仅使用最近的相关数据来训练模型时，预测模型通常会产生更好的结果。不要害怕丢弃那些对预测当前情况帮助太小的过去数据点。
- en: Once again, interview business partners to find key dates when your industry
    underwent massive change. Dropping data that occurred prior to the massive change
    will often produce superior models.
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 再次强调，通过采访业务伙伴来找到您的行业经历重大变革的关键日期。丢弃在重大变革之前发生的数据通常会生成更优的模型。
- en: Forecasting is finicky, much more finicky than regression or classification
    problems. This is because the types of things companies like to forecast are driven
    by market demand and what people want often changes. What's popular in the marketplace
    can change quickly with little warning, and, as a result, forecast models need
    to be retrained all of the time whenever you get the latest data.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测非常挑剔，比回归或分类问题更挑剔。这是因为公司喜欢预测的事物类型是由市场需求和人们的需求驱动的，而人们的需求往往会发生变化。市场上流行的东西可能会在几乎没有预警的情况下迅速变化，因此，预测模型需要不断地重新训练，每次获取最新数据时都要这样做。
- en: When you make predictions using an AutoML-trained forecasting model, it always
    starts by predicting values for the next time period out. Because of this, when
    you score data, your data must begin with that next time period. For example,
    if you trained a daily forecasting model on data that ends on January 5, your
    scoring data must begin on January 6\.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你使用AutoML训练的预测模型进行预测时，它总是从预测下一个时间段的值开始。正因为如此，当你评分数据时，你的数据必须从下一个时间段开始。例如，如果你在一个以1月5日结束的数据上训练了一个日预测模型，你的评分数据必须从1月6日开始。
- en: If your time column is on a monthly cadence that ends with February and you
    are predicting two time periods out, AutoML will make predictions for March and
    April. You cannot use that model to make predictions for May or June. In order
    to do so, you must retrain the model with training data that ends at a later date.
    As a result, you need to keep retraining AutoML forecasting models to make sure
    your predictions are up-to-date.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的时间列以2月结束，并且你正在预测两个时间段的值，AutoML将预测3月和4月。你不能使用该模型来预测5月或6月。为了做到这一点，你必须使用结束日期更晚的训练数据重新训练模型。因此，你需要不断地重新训练AutoML预测模型，以确保你的预测是最新的。
- en: To determine seasonality, plot your target column to look for any recurring
    seasonal patterns before using AutoML. This will let you know if you should use
    seasonality features or not.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了确定季节性，在使用AutoML之前，将目标列绘制出来，寻找任何重复的季节性模式。这将让你知道是否应该使用季节性特征。
- en: When you're trying to make forecasts on a global basis, be sure to include all
    countries when generating holiday features. Holidays tend to be very important
    when forecasting demand and market trends. Think of how Christmas affects sales
    in the United States of America or how the Chinese New Year affects travel patterns
    in China.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你试图在全球范围内进行预测时，确保在生成假日特征时包含所有国家。假日通常在预测需求和市场需求趋势时非常重要。想想圣诞节如何影响美国的销售，或者中国新年如何影响中国的旅行模式。
- en: This ends the list of tips and tricks. It is by no means complete; you should
    only think of it as a start. Forecasting is a rich and interesting field with
    many caveats. Still, keeping these things in mind will enable you to produce accurate,
    reliable forecasts and avoid many of the mistakes made by novice data scientists.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 这就结束了技巧和窍门的列表。这绝对不是完整的；你只需将其视为一个起点。预测是一个丰富且有趣的领域，有很多注意事项。然而，考虑到这些事项将使你能够产生准确、可靠的预测，并避免许多新手数据科学家犯的错误。
- en: More than anything, remember that forecasting is its own art, separate from
    other types of ML problems, and approach it as such. Lastly, you will learn which
    algorithms AutoML uses to forecast.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，请记住预测本身就是一门艺术，与其他类型的机器学习问题不同，要以这种方式来对待它。最后，你将了解AutoML用于预测的算法。
- en: Understanding AutoML forecasting algorithms
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解AutoML预测算法
- en: AutoML forecasting algorithms are nearly identical to AutoML regression algorithms.
    Forecasting uses all the same **tree**, **standard regression**, **gradient boosting**,
    and **nearest neighbor** algorithms as regression, and also uses **stochastic
    gradient descent**. For reference, please refer to [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: AutoML预测算法几乎与AutoML回归算法相同。预测使用与回归相同的所有**树**、**标准回归**、**梯度提升**和**最近邻**算法，并且也使用**随机梯度下降**。有关参考，请参阅[*第4章*](B16595_04_ePub.xhtml#_idTextAnchor056)，*构建AutoML回归解决方案*。
- en: 'In addition to these algorithms, there are three forecasting-specific algorithms:
    Auto-ARIMA, Prophet, and ForecastTCN. You learned about certain key differences
    that make ARIMA and Prophet different from the other algorithms earlier in this
    chapter. ForecastTCN is a **temporal convolutional network**, a type of neural
    network.'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些算法之外，还有三个特定的预测算法：Auto-ARIMA、Prophet和ForecastTCN。你已经在本章前面学习了某些关键差异，这些差异使ARIMA和Prophet与其他算法不同。ForecastTCN是一种**时间卷积网络**，一种神经网络类型。
- en: '**Auto-ARIMA** (**Auto-Regressive Integrated Moving Average**) uses moving
    averages of the target column to make predictions. Unlike standard ARIMA, Auto-ARIMA
    optimizes ARIMA parameters to create the best model possible. It performs extremely
    well with univariate time series where you only have reliable information about
    your target column.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '**Auto-ARIMA**（**自回归积分移动平均**）使用目标列的移动平均进行预测。与标准ARIMA不同，Auto-ARIMA优化ARIMA参数以创建最佳模型。它在只有关于目标列的可靠信息的单变量时间序列中表现极好。'
- en: '**Prophet** is similar to Auto-ARIMA in that it is specialized for univariate
    time series. Moreover, it performs extremely well when your data has strong seasonal
    patterns. Unlike many forecasting algorithms, Prophet is robust to outliers and
    wild swings in your dataset. Like Auto-ARIMA, you should always use Prophet to
    establish a baseline model at the onset of any forecasting project.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '**Prophet**与Auto-ARIMA类似，它专门用于单变量时间序列。此外，当你的数据具有强烈的季节性模式时，它表现得非常好。与许多预测算法不同，Prophet对异常值和你的数据集中的剧烈波动具有鲁棒性。与Auto-ARIMA一样，你应该在预测项目的开始阶段始终使用Prophet来建立基线模型。'
- en: '`enable_dnn` to `True` in your AutoML forecasting parameters. This algorithm
    is great for the most complex forecasting tasks as it can capture extremely complex
    nonlinear trends in your data. Deep learning is a complex topic and would be difficult
    to explain in even a single chapter, and is thus outside the scope of this book.
    ForecastTCN, like other deep learning models, performs best when trained with
    very large amounts of data.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的AutoML预测参数中将`enable_dnn`设置为`True`。这个算法非常适合最复杂的预测任务，因为它可以捕捉到数据中的极其复杂的非线性趋势。深度学习是一个复杂的话题，即使在一个章节中也很难解释清楚，因此它超出了本书的范围。ForecastTCN，像其他深度学习模型一样，在训练时使用大量数据时表现最佳。
- en: 'A summary of these 13 algorithms is provided in *Figure 6.5*:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图6.5*中提供了这13种算法的摘要：
- en: '![Figure 6.5 – AutoML forecasting algorithms](img/Figure_6.5_B16595.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![图6.5 – AutoML预测算法](img/Figure_6.5_B16595.jpg)'
- en: Figure 6.5 – AutoML forecasting algorithms
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.5 – AutoML预测算法
- en: Like regression, AutoML performs **model ensembling** at the end of each AutoML
    training run. **Voting ensembles** take a weighted average of your forecasting
    models and use that to make a prediction. **Stack ensembles**, in contrast, train
    an elastic net model using the output of other models. There is a danger of overfitting
    when using a stack ensemble with forecasting; for that reason, it's recommended
    to turn it off.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 与回归一样，AutoML在每个AutoML训练运行结束时执行**模型集成**。**投票集成**会对你的预测模型进行加权平均，并使用该结果进行预测。相比之下，**堆叠集成**使用其他模型的输出训练弹性网络模型。在使用堆叠集成进行预测时存在过拟合的风险；因此，建议将其关闭。
- en: For more information on these models, please consult the AutoML documentation
    found at [https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-train#configure-your-experiment-settings](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-train#configure-your-experiment-settings).
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 有关这些模型的更多信息，请参阅位于[https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-train#configure-your-experiment-settings](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-auto-train#configure-your-experiment-settings)的AutoML文档。
- en: Summary
  id: totrans-195
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: You have now successfully trained all three types of AutoML models – classification,
    regression, and forecasting. Not only can you train a simple forecasting model,
    but you also know how to improve models with the various forecasting parameters
    and how to build high-performing baseline models with ARIMA and Prophet.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经成功训练了所有三种类型的AutoML模型 – 分类、回归和预测。你不仅可以训练一个简单的预测模型，而且你还知道如何使用各种预测参数改进模型，以及如何使用ARIMA和Prophet构建高性能的基线模型。
- en: Moreover, you've acquired a lot of knowledge regarding how forecasting differs
    from other problems and how to avoid common pitfalls. By utilizing the forecast
    horizon feature wisely, you can forecast days, months or years into the future,
    and now it's time to add a powerful tool to your repertoire.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你已经获得了大量关于预测与其他问题有何不同以及如何避免常见陷阱的知识。通过明智地利用预测范围功能，你可以预测未来几天、几个月或几年，现在是时候向你的工具箱中添加一个强大的工具了。
- en: In [*Chapter 7*](B16595_07_ePub.xhtml#_idTextAnchor094), *Using the Many Models
    Solution Accelerator*, you will be able to build individual models for each time
    series grain. Instead of building one forecasting model, you can build thousands
    of models all at the same time and score them as if they were one model. You will
    find that this approach can vastly enhance your model's performance and it is
    possible only with cloud-native technology.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第七章*](B16595_07_ePub.xhtml#_idTextAnchor094)《使用多模型解决方案加速器》中，您将能够为每个时间序列粒度构建单独的模型。您不必构建一个预测模型，而是一次性构建数千个模型，并像对待一个模型一样对它们进行评分。您会发现这种方法可以极大地提高模型的表现，而这只有云原生技术才能实现。
