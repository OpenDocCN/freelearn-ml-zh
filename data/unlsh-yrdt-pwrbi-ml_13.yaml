- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '13'
- en: Using OpenAI and Azure OpenAI in Power BI Dataflows
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Power BI 数据流中使用 OpenAI 和 Azure OpenAI
- en: '[*Chapter 12*](B19500_12.xhtml#_idTextAnchor165) of this book provided an overview
    of the OpenAI and Azure OpenAI technologies. The chapter also explored methods
    to incorporate these cutting-edge AI technologies into your use case using FAA
    Wildlife Strike data. To enhance the quality of the content in [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165),
    OpenAI ChatGPT was utilized to generate better text. Moving forward, ChatGPT will
    continue to be used on occasion as a tool to improve the writing quality of the
    rest of the book.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书[*第 12 章*](B19500_12.xhtml#_idTextAnchor165)概述了 OpenAI 和 Azure OpenAI 技术。该章节还探讨了使用
    FAA 野生动物撞击数据将这些前沿 AI 技术融入您用例的方法。为了提高[*第 12 章*](B19500_12.xhtml#_idTextAnchor165)的内容质量，使用了
    OpenAI ChatGPT 生成更好的文本。展望未来，ChatGPT 将偶尔作为提高本书其他部分写作质量的工具使用。
- en: Furthermore, there are two use cases for OpenAI and Azure OpenAI technologies
    that are discussed in detail in this chapter. Specifically, you will focus on
    their applications in summarization and descriptive content generation, as discussed
    in [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165). To illustrate these use cases,
    a project is included in this chapter.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，本章详细讨论了 OpenAI 和 Azure OpenAI 技术的两个用例。具体来说，您将关注它们在摘要和描述性内容生成中的应用，如[*第 12
    章*](B19500_12.xhtml#_idTextAnchor165)所述。为了说明这些用例，本章包含了一个项目。
- en: In this chapter, you will see how to integrate OpenAI (or Azure OpenAI) into
    your Power BI solution for FAA Wildlife Strike data. Through this integration,
    you will be able to leverage GPT model APIs by adding new functions to Power BI
    dataflows. These functions will enable the generation of new content for each
    row of data in your solution. You will also use **Cognitive Services** in Power
    BI, which is an AI capability that has existed in Power Query and dataflows for
    a few years.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解如何将 OpenAI（或 Azure OpenAI）集成到您的 Power BI 解决方案中，用于处理 FAA 野生动物撞击数据。通过这种集成，您可以通过向
    Power BI 数据流添加新功能来利用 GPT 模型 API。这些功能将使您能够为解决方案中每行的数据生成新的内容。您还将使用 Power BI 中的 **认知服务**，这是一种在
    Power Query 和数据流中存在了几年的 AI 功能。
- en: By the end of this chapter, you will have gained the knowledge necessary to
    apply GPT REST APIs in either OpenAI or Azure OpenAI to Power BI dataflows. These
    dataflows can then be refreshed on a predefined schedule. This capability will
    provide you with a powerful toolset for generating new content and insights from
    your data with minimal effort. The step-by-step instructions and examples provided
    in this chapter will equip you with the necessary skills to implement this solution
    in your own projects.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，您将获得应用 GPT REST API 到 OpenAI 或 Azure OpenAI 以 Power BI 数据流的知识。这些数据流可以按照预定义的日程进行刷新。这种能力将为您提供一套强大的工具集，以最小的努力从数据中生成新的内容和见解。本章提供的逐步说明和示例将使您具备在您自己的项目中实施此解决方案的必要技能。
- en: Technical requirements
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'For this chapter, you’ll need the following:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章，您需要以下内容：
- en: 'An account with the original open source OpenAI: [https://openai.com/](https://openai.com/).'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 原始开源 OpenAI 的账户：[https://openai.com/](https://openai.com/)。
- en: 'Optional – Azure OpenAI as part of your Azure subscription: [https://azure.microsoft.com/en-us/products/cognitive-services/openai-service](https://azure.microsoft.com/en-us/products/cognitive-services/openai-service).
    The book is written so that this is optional since it is not available to everyone
    at the time of publication.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可选 – 作为您 Azure 订阅的一部分的 Azure OpenAI：[https://azure.microsoft.com/en-us/products/cognitive-services/openai-service](https://azure.microsoft.com/en-us/products/cognitive-services/openai-service)。本书编写时将其设置为可选，因为并非所有人都可以在出版时使用。
- en: FAA Wildlife Strike data files from either the FAA website or the Packt GitHub
    site.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 FAA 网站或 Packt GitHub 网站的 FAA 野生动物撞击数据文件。
- en: A Power BI Pro license.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Power BI Pro 许可证。
- en: 'One of the following Power BI licensing options for access to Power BI dataflows:'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下 Power BI 许可证选项之一用于访问 Power BI 数据流：
- en: Power BI Premium
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Power BI Premium
- en: Power BI Premium Per User
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Power BI Premium Per User
- en: 'One of the following options for getting data into the Power BI cloud service:'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将数据输入 Power BI 云服务的以下选项之一：
- en: Microsoft OneDrive (with connectivity to the Power BI cloud service)
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft OneDrive（与 Power BI 云服务连接）
- en: Microsoft Access + Power BI Gateway
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Access + Power BI 网关
- en: Azure Data Lake (with connectivity to the Power BI cloud service)
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Data Lake（与 Power BI 云服务连接）
- en: Configuring OpenAI and Azure OpenAI for use in your Power BI solution
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 OpenAI 和 Azure OpenAI 以在您的 Power BI 解决方案中使用
- en: Prior to proceeding with the configuration of OpenAI and Azure OpenAI, it is
    important to note that OpenAI is still a nascent technology at the time of writing
    this book. In the future, the integration of OpenAI with Power BI may become less
    technical, as advancements in the technology continue to be made. However, the
    use cases that will be demonstrated in this chapter will remain applicable.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行 OpenAI 和 Azure OpenAI 的配置之前，重要的是要注意，截至本书编写时，OpenAI 仍是一种新兴技术。随着技术的进步，OpenAI
    与 Power BI 的集成可能会变得更加技术化。然而，本章将演示的使用案例将保持适用。
- en: As such, the instructions provided in this chapter will showcase how this integration
    can be used to enhance your data analytics capabilities in the context of Power
    BI.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，本章提供的说明将展示如何利用这种集成来增强你在 Power BI 上下文中的数据分析能力。
- en: Configuring OpenAI
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 OpenAI
- en: 'You can create an account in OpenAI (if you do not have one already) from this
    link: [https://chat.openai.com/auth/login](https://chat.openai.com/auth/login).
    At the time of writing, new accounts are granted trial credits to begin using
    OpenAI. If you run out of trial credits, or if the trial is no longer offered
    after this book has been written, you may need to pay for the use of OpenAI. Pricing
    details can be found at this link: [https://openai.com/pricing](https://openai.com/pricing).'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从此链接创建 OpenAI 账户（如果你还没有的话）：[https://chat.openai.com/auth/login](https://chat.openai.com/auth/login)。截至本书编写时，新账户将获得试用积分以开始使用
    OpenAI。如果你用完了试用积分，或者本书编写后不再提供试用，你可能需要为使用 OpenAI 支付费用。定价详情可以在此链接找到：[https://openai.com/pricing](https://openai.com/pricing)。
- en: 'Once you have an OpenAI account, you will need to create an API key that will
    be used to authenticate your API calls. An API key can be easily created at this
    link: [https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys).
    Clicking on `abc123xyz` as an example key for the sample code. Be sure to use
    the actual **Key** from OpenAI, and not the **Key Name**.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你拥有 OpenAI 账户，你需要创建一个 API 密钥，该密钥将用于验证你的 API 调用。API 密钥可以在此链接轻松创建：[https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys)。例如，点击
    `abc123xyz` 作为示例密钥用于示例代码。请确保使用 OpenAI 的实际**密钥**，而不是**密钥名称**。
- en: Once you have an account and an API key, you are ready to go with OpenAI for
    this book!
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你拥有账户和 API 密钥，你就可以为本书使用 OpenAI 了！
- en: Configuring Microsoft Azure OpenAI
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 Microsoft Azure OpenAI
- en: OpenAI is also available as a service in Microsoft Azure. By using the Microsoft
    Azure OpenAI Service, users can leverage large-scale AI models with the benefits
    of Azure, such as role-based access security, private networks, and comprehensive
    security tools that integrate with other Microsoft tools in Azure. Billing and
    governance can be centralized for large organizations to help ensure the responsible
    use of AI.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: OpenAI 也可作为 Microsoft Azure 的一项服务。通过使用 Microsoft Azure OpenAI 服务，用户可以利用 Azure
    的优势，例如基于角色的访问安全、私有网络和与 Azure 中的其他 Microsoft 工具集成的全面安全工具，来利用大规模 AI 模型。对于大型组织，账单和治理可以集中化，以确保
    AI 的负责任使用。
- en: For the purposes of this book, Azure OpenAI is optional as an alternative to
    the original OpenAI. Azure OpenAI may not be available to everyone since it is
    a new technology with high demand. All of the content for the workshop can be
    done with either OpenAI or Azure OpenAI.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的范围内，Azure OpenAI 作为原始 OpenAI 的替代品是可选的。由于它是一种需求量大的新技术，Azure OpenAI 可能并非对所有人可用。研讨会中的所有内容都可以使用
    OpenAI 或 Azure OpenAI 完成。
- en: 'Instructions for setting up Azure OpenAI can be found at this link: [https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/create-resource/](https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/create-resource/).
    Once you’ve created a resource, you can also deploy a model per the instructions
    at that link. As noted in [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165), you
    will be using the `text-davinci-003` model for the workshop associated with this
    chapter. OpenAI is evolving rapidly, and you may be able to choose different models
    at the time you are reading this book. Take note of the following values when
    walking through these steps; they will be needed later in this chapter:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 设置Azure OpenAI的说明可以在以下链接中找到：[https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/create-resource/](https://learn.microsoft.com/en-us/azure/cognitive-services/openai/how-to/create-resource/)。创建资源后，您也可以根据该链接的说明部署模型。如[*第12章*](B19500_12.xhtml#_idTextAnchor165)中所述，您将使用`text-davinci-003`模型进行本章相关的工作坊。OpenAI正在快速发展，您在阅读本书时可能能够选择不同的模型。在执行以下步骤时请注意以下值；它们将在本章的后续部分中需要：
- en: '`PBI_OpenAI_project` for the examples in this chapter.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章的示例使用`PBI_OpenAI_project`。
- en: '`text-davinci-003` model deployment. This book will use `davinci-PBIML` for
    names of deployments in examples of code.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`text-davinci-003`模型部署。本书将使用`davinci-PBIML`作为代码示例中部署的名称。'
- en: Next, you’ll need to create a key for your Azure OpenAI API calls. From your
    Azure OpenAI resource, named `PBI_OpenAI_project` for this book, go to `abc123xyz`
    as an example key for the sample code.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您需要为您的Azure OpenAI API调用创建一个密钥。以本书为例，从您的Azure OpenAI资源，命名为`PBI_OpenAI_project`，使用`abc123xyz`作为示例密钥。
- en: Once you have either OpenAI or Azure OpenAI set up and ready to go, you can
    add some new generative text capabilities to your project using FAA Wildlife Strike
    data!
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您已经设置并准备好OpenAI或Azure OpenAI，您可以使用FAA野生动物打击数据为您的项目添加一些新的生成文本功能！
- en: Preparing a Power BI dataflow for OpenAI and Azure OpenAI
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备Power BI数据流以用于OpenAI和Azure OpenAI。
- en: 'In [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165), you decided to use OpenAI
    for two use cases with your FAA Wildlife Strike database project:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第12章*](B19500_12.xhtml#_idTextAnchor165)中，您决定使用OpenAI为您与FAA野生动物打击数据库项目相关的两个用例：
- en: Generating descriptions of airplane models and the operator of the aircraft,
    for each incident
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为每个事件生成飞机型号和飞机操作员的描述。
- en: Summarizing the free text remarks provided in the report for each incident
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概括报告中每个事件提供的自由文本备注。
- en: Since OpenAI is still new at the time of writing this book, Power BI does not
    yet have connectors built into the product. But you can still call OpenAI and
    Azure OpenAI APIs from both Power Query and Power BI dataflows using custom M
    scripts. Let’s get started!
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 由于OpenAI在撰写本书时仍处于起步阶段，Power BI尚未在产品中内置连接器。但您仍然可以使用自定义M脚本从Power Query和Power BI数据流中调用OpenAI和Azure
    OpenAI API。让我们开始吧！
- en: 'First, you will create a new dataflow for use with OpenAI and Cognitive Services
    in Power BI:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您将为Power BI中的OpenAI和认知服务创建一个新的数据流：
- en: From your Power BI workspace, on the ribbon, select **New** | **Dataflow**.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从您的Power BI工作区，在功能区选择**新建** | **数据流**。
- en: Select **Define new tables** | **Link tables from** **other dataflows**.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**定义新表** | **从其他数据流链接表**。
- en: Sign in and click **Next**.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录并点击**下一步**。
- en: Expand your workspace.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扩展您的 workspace。
- en: Expand the **Strike Reports** dataflow and check **Strike Reports** **Curated
    New**.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扩展**打击报告**数据流并检查**打击报告****精选新**。
- en: Click **Transform Data**.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**转换数据**。
- en: Create a group named **Sources** and move **Strike Reports Curated New** into
    that group.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为**来源**的组，并将**打击报告精选新**移动到该组。
- en: Right-click **Strike Reports Curated New** and unselect **Enable load**.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击**打击报告精选新**并取消选择**启用加载**。
- en: 'Next, you will create a version of the query that will be used with OpenAI
    and Cognitive Services:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将创建一个用于与OpenAI和认知服务一起使用的查询版本：
- en: Right-click on **Strike Reports Curated New** and select **Reference**.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击**打击报告精选新**并选择**引用**。
- en: Rename the new query `Strike Reports Curated` `New OpenAI`.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新查询重命名为`打击报告精选` `New OpenAI`。
- en: Create a group named **OpenAI** and move **Strike Reports Curated New OpenAI**
    into the group.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为**OpenAI**的组，并将**打击报告精选新 OpenAI**移动到该组。
- en: 'In [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165), you decided to use the
    FAA Wildlife Strike `UNKNOWN`:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第12章*](B19500_12.xhtml#_idTextAnchor165)中，您决定使用FAA野生动物打击`UNKNOWN`：
- en: For the `UNKNOWN`, `UNKNOWN COMMERCIAL`, `BUSINESS`, and `PRIVATELY` `OWNED`
    values.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于`UNKNOWN`、`UNKNOWN COMMERCIAL`、`BUSINESS`和`PRIVATELY` `OWNED`值。
- en: For the `UNKNOWN`.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 `未知`。
- en: For the `Unknown bird`, `Unknown bird – large`, `Unknown bird – medium`, `Unknown
    bird – small`, and `Unknown bird` `or bat`.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 `未知鸟类`、`未知鸟类 - 大型`、`未知鸟类 - 中型`、`未知鸟类 - 小型` 和 `未知鸟类或蝙蝠`。
- en: For the `(blank)`.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 `(空白)`。
- en: Finally – this step is optional – you can filter the number of rows for testing
    purposes. Both OpenAI and Azure OpenAI can run up a bill, so limiting the number
    of calls for this workshop makes sense. For the example in this book, the **Strike
    Reports Curated New OpenAI** table will be filtered to events happening in or
    after December 2022, which can be filtered using the **Incident** **Date** column.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 最后——这是一个可选步骤——您可以根据测试目的过滤行数。OpenAI 和 Azure OpenAI 都可能产生费用，因此限制此研讨会中的调用次数是有意义的。在本书的示例中，**Strike
    Reports Curated New OpenAI** 表将过滤到 2022 年 12 月或之后发生的事件，可以使用 **事件** **日期** 列进行过滤。
- en: Now you are ready to add OpenAI and Cognitive Services content to your data!
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经准备好将 OpenAI 和认知服务内容添加到您的数据中！
- en: Creating OpenAI and Azure OpenAI functions in Power BI dataflows
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Power BI 数据流中创建 OpenAI 和 Azure OpenAI 函数
- en: As noted earlier, integrating OpenAI and Azure OpenAI with Power Query or dataflows
    currently requires custom M code. To facilitate this process, we have provided
    M code for both OpenAI and Azure OpenAI, giving you the flexibility to choose
    which version to use based on your specific needs and requirements.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，将 OpenAI 和 Azure OpenAI 与 Power Query 或数据流集成目前需要自定义 M 代码。为了简化此过程，我们已为 OpenAI
    和 Azure OpenAI 提供了 M 代码，让您可以根据具体需求和需求选择要使用的版本。
- en: By leveraging this provided M code, you can seamlessly integrate OpenAI or Azure
    OpenAI with your existing Power BI solutions. This will allow you to take advantage
    of the unique features and capabilities offered by these powerful AI technologies,
    while also gaining insights and generating new content from your data with ease.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用提供的 M 代码，您可以无缝地将 OpenAI 或 Azure OpenAI 集成到现有的 Power BI 解决方案中。这将使您能够利用这些强大
    AI 技术的独特功能和能力，同时轻松地从数据中获得见解并生成新内容。
- en: OpenAI and Azure OpenAI functions
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: OpenAI 和 Azure OpenAI 函数
- en: 'OpenAI offers a user-friendly API that can be easily accessed and utilized
    from within Power Query or dataflows in Power BI. For further information regarding
    the specifics of the API, we refer you to the official OpenAI documentation, available
    at this link: [https://platform.openai.com/docs/introduction/overview](https://platform.openai.com/docs/introduction/overview).'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: OpenAI 提供了一个用户友好的 API，可以轻松地从 Power Query 或 Power BI 中的数据流中访问和使用。有关 API 的具体信息，我们建议您查阅官方
    OpenAI 文档，该文档可通过以下链接获取：[https://platform.openai.com/docs/introduction/overview](https://platform.openai.com/docs/introduction/overview)。
- en: It is worth noting that optimizing and tuning the OpenAI API will likely be
    a popular topic in the coming year. Various concepts, including **prompt engineering**,
    **optimal token usage**, fine-tuning, embeddings, plugins, and parameters that
    modify response creativity (such as temperature and top *p*), can all be tested
    and fine-tuned for optimal results.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，优化和调整 OpenAI API 很可能在明年成为一个热门话题。包括 **提示工程**、**最佳令牌使用**、微调、嵌入、插件以及修改响应创造性的参数（如温度和
    top *p*）在内的各种概念，都可以进行测试和微调以获得最佳结果。
- en: 'While these topics are complex and may be explored in greater detail in future
    works, this book will focus primarily on establishing connectivity between OpenAI
    and Power BI. Specifically, we will explore prompt engineering and token limits,
    which are key considerations that will be incorporated into the API call to ensure
    optimal performance:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些主题很复杂，可能在未来的作品中进行更详细的探讨，但本书将主要关注在 OpenAI 和 Power BI 之间建立连接。具体来说，我们将探讨提示工程和令牌限制，这些是确保最佳性能的关键考虑因素，并将被纳入
    API 调用中：
- en: '`[Operator]` and `[Airplane]` as values without context, text was added to
    the request in the previous chapter such that the API will receive `Tell me about
    the airplane model [Aircraft] operated by [Operator] in three sentences:`. The
    prompt adds context to the values passed to the OpenAI model.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[操作员]` 和 `[飞机]` 作为没有上下文的值，在前一章中添加到请求中的文本，以便 API 能够接收 `告诉我关于由 [操作员] 运行的飞机型号
    [飞机] 的三个句子:`。这个提示为传递给 OpenAI 模型的值添加了上下文。'
- en: '**Tokens**: Words sent to the OpenAI model get broken into chunks called tokens.
    Per the OpenAI website, a token contains about four English language characters.
    Reviewing the **Remarks** column in the Power BI dataset reveals that most entries
    have up to 2,000 characters. (2000 / 4) = 500, so you will specify 500 as the
    token limit. Is that the right number? You’d need to do extensive testing to answer
    that question, which goes beyond the scope of this book.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**令牌**：发送到 OpenAI 模型的单词被分成称为令牌的块。根据 OpenAI 网站的信息，一个令牌包含大约四个英语字符。查看 Power BI
    数据集中的 **备注** 列可以揭示大多数条目最多有 2,000 个字符。（2000 / 4）= 500，因此您将指定 500 作为令牌限制。这是正确的数字吗？您需要做大量的测试来回答这个问题，但这超出了本书的范围。'
- en: Let’s get started with building your OpenAI and Azure OpenAI API calls for Power
    BI dataflows!
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始构建您的 OpenAI 和 Azure OpenAI API 调用，用于 Power BI 数据流！
- en: Creating OpenAI and Azure OpenAI functions for Power BI dataflows
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为 Power BI 数据流创建 OpenAI 和 Azure OpenAI 函数
- en: 'You will create two functions for OpenAI in your dataflow named **OpenAI**.
    The only difference between the two will be the token limits. The purpose of having
    different token limits is primarily cost savings, since larger token limits could
    potentially run up a bigger bill. Follow these steps to create a new function
    named **OpenAIshort**:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 您将在数据流中为 OpenAI 创建两个函数，命名为 **OpenAI**。这两个函数之间的唯一区别将是令牌限制。设置不同令牌限制的主要目的是为了节省成本，因为更大的令牌限制可能会产生更高的账单。按照以下步骤创建一个名为
    **OpenAIshort** 的新函数：
- en: Select **Get data** | **Blank query**.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **获取数据** | **空白查询**。
- en: Paste in the following M code and select `abc123xyz` with your OpenAI API key.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下 M 代码粘贴进去，并使用您的 OpenAI API 密钥选择 `abc123xyz`。
- en: 'Here is the code for the function. The code can also be found as `01 OpenAIshortFunction.M`
    in the Packt GitHub repository at [https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13):'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是这个函数的代码。该代码也可以在 Packt GitHub 仓库的 [https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13)
    中的 `01 OpenAIshortFunction.M` 文件找到：
- en: '[PRE0]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Now, you can rename the function `OpenAIshort`. Right-click on the function
    in the **Queries** panel and duplicate it. The new function will have a larger
    token limit.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您可以重命名函数 `OpenAIshort`。在 **查询** 面板中右键单击函数并复制它。新函数将具有更大的令牌限制。
- en: Rename this new function `OpenAIlong`.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此新函数重命名为 `OpenAIlong`。
- en: Right-click on **OpenAIlong** and select **Advanced editor**.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击 **OpenAIlong** 并选择 **高级编辑器**。
- en: Change the section of code reading `Text.From(120)` to `Text.From(500)`.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将读取 `Text.From(120)` 的代码部分更改为 `Text.From(500)`。
- en: Click **OK**.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **确定**。
- en: 'Your screen should now look like this:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 您的屏幕现在应该看起来像这样：
- en: '![Figure 13.1 – OpenAI functions added to a Power BI dataflow](img/Figure_13.1_B19500.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.1 – 添加到 Power BI 数据流的 OpenAI 函数](img/Figure_13.1_B19500.jpg)'
- en: Figure 13.1 – OpenAI functions added to a Power BI dataflow
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.1 – 添加到 Power BI 数据流的 OpenAI 函数
- en: 'These two functions can be used to complete the workshop for the remainder
    of this chapter. If you’d prefer to use Azure OpenAI, the M code for `PBI_OpenAI_project`
    with your Azure resource name, `davinci-PBIML` with your deployment name, and
    `abc123xyz` with your API key:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个函数可以用来完成本章剩余部分的研讨会。如果您想使用 Azure OpenAI，请使用带有您的 Azure 资源名称 `PBI_OpenAI_project`、部署名称
    `davinci-PBIML` 和 API 密钥 `abc123xyz` 的 M 代码：
- en: '[PRE1]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'As with the previous example, changing the token limit for `Text.From(120)`
    to `Text.From(500)` is all you need to do to create an Azure OpenAI function for
    500 tokens instead of 120\. The M code to create the dataflows for your OpenAI
    functions can also be found on the Packt GitHub site at this link: [https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13).'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 与前一个示例一样，将 `Text.From(120)` 的令牌限制更改为 `Text.From(500)`，这就是创建一个 500 令牌而不是 120
    令牌的 Azure OpenAI 函数所需做的全部工作。创建您的 OpenAI 函数数据流的 M 代码也可以在 Packt GitHub 网站上的此链接找到：[https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13)。
- en: Now that you have your OpenAI and Azure OpenAI functions ready to go in a Power
    BI dataflow, you can test them out on the FAA Wildlife Strike data!
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经在 Power BI 数据流中准备好了 OpenAI 和 Azure OpenAI 函数，您可以在 FAA 野生动物撞击数据上测试它们！
- en: Using OpenAI and Azure OpenAI functions in Power BI dataflows
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Power BI数据流中使用OpenAI和Azure OpenAI函数
- en: 'Your next step is to prep the FAA Wildlife Strike data for the OpenAI or Azure
    OpenAI functions to do content generation and summarization. As discussed previously,
    you’ll need to build effective prompts to provide context for the OpenAI models
    to process. The completed query for **Reports Curated New OpenAI**, which can
    be copied and pasted into Power BI, is also available from the Packt GitHub repository:
    [https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13).'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 你的下一步是准备FAA野生动物撞击数据，以便OpenAI或Azure OpenAI函数进行内容生成和摘要。如前所述，你需要构建有效的提示，为OpenAI模型提供处理上下文。**“新整理的OpenAI报告”**的完成查询，可以复制并粘贴到Power
    BI中，也可在Packt GitHub仓库中找到：[https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13](https://github.com/PacktPublishing/Unleashing-Your-Data-with-Power-BI-Machine-Learning-and-OpenAI/tree/main/Chapter-13)。
- en: 'Looking back to [*Chapter 12*](B19500_12.xhtml#_idTextAnchor165), you decided
    upon the following combinations of new text with row-level content from the FAA
    Wildlife Strike database:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾[*第12章*](B19500_12.xhtml#_idTextAnchor165)，你决定使用以下组合的新文本与FAA野生动物撞击数据库的行级内容：
- en: 'Generating new information about airplanes and the carriers: `Tell me about
    the airplane model [Aircraft] operated by [Operator] in` `three sentences:`'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成有关飞机和载具的新信息：`告诉我关于由[运营商]在[操作]的飞机型号[Aircraft]的三个句子：`
- en: 'Summarizing the remarks from each report, including the operator, aircraft,
    and species: `Summarize the following: A [Operator] [Aircraft] struck a [Species].
    Remarks on the FAA report` `were: [Remarks]`'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 摘要每个报告中的备注，包括运营商、飞机和物种：`总结以下内容：一架[运营商] [飞机型号]撞击了一只[物种]。FAA报告中的备注是：[备注]`
- en: 'You can now add two new columns to the **Strike Reports Curated New OpenAI**
    query. First, you add a column to prompt text generation:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在可以向**新整理的打击报告**查询中添加两个新列。首先，添加一个用于提示文本生成的列：
- en: Select **Add column** | **Custom Column**.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**添加列**|**自定义列**。
- en: Set `Text` `Generation Prompt`.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置`文本``生成提示`。
- en: 'Paste in the following text: `"Tell me about the airplane model " & [Aircraft]
    &" operated by " & [Operator] & " in three sentences:"`. Then, select **OK**.'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 粘贴以下文本：“告诉我关于由" & [飞机型号] & " " & [运营商] & "操作的飞机型号在三个句子中的情况：”。然后，选择**确定**。
- en: Change the data type to `Text`.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据类型更改为`文本`。
- en: 'Validate that the new column creates text to be used as information with built-in
    prompts that look like this:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证新列创建的文本，这些文本将作为带有内置提示的信息使用，看起来如下：
- en: '![Figure 13.2 – New column to be used with OpenAI](img/Figure_13.2_B19500.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图13.2 – 与OpenAI一起使用的新列](img/Figure_13.2_B19500.jpg)'
- en: Figure 13.2 – New column to be used with OpenAI
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.2 – 与OpenAI一起使用的新列
- en: 'Now create a second column that will be used for text summarization that also
    contains built-in prompts:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在创建一个第二列，该列将用于文本摘要，并且包含内置提示：
- en: Select **Add column** | **Custom Column**.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**添加列**|**自定义列**。
- en: Set `Text` `Summarization Prompt`.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置`文本``摘要提示`。
- en: 'Paste in the following text: `"Summarize the following: A " & [Operator] &
    " " & [Aircraft] & " struck a " & [Species] & ". Remarks on the FAA report were:
    " & [``Remarks]`.'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 粘贴以下文本：“总结以下内容：一架" & [运营商] & " " & [飞机型号] & "撞击了一只" & [物种] & "。FAA报告中的备注是："
    & [备注]。
- en: Change the data type to `Text`.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据类型更改为`文本`。
- en: 'Validate that the new column for summarization, with a built-in prompt, looks
    like this:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证带有内置提示的摘要新列看起来如下：
- en: '![Figure 13.3 – New column for summarizations with built-in prompt](img/Figure_13.3_B19500.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图13.3 – 带内置提示的摘要新列](img/Figure_13.3_B19500.jpg)'
- en: Figure 13.3 – New column for summarizations with built-in prompt
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.3 – 带内置提示的摘要新列
- en: 'Now you’ve created two columns in your Power BI dataflow query that are ready
    for OpenAI functions! Start by calling OpenAI using the `OpenAIshort` function
    for text generation:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经在Power BI数据流查询中创建了两个列，它们已准备好用于OpenAI函数！首先，使用`OpenAIshort`函数调用OpenAI进行文本生成：
- en: Select **Add column** | **Custom Column**.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**添加列**|**自定义列**。
- en: Set `OpenAI` `Aircraft Description`.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置`OpenAI``飞机描述`。
- en: Paste the following text into `OpenAIshort([Text` `Generation Prompt])`.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下文本粘贴到`OpenAIshort([Text` `Generation Prompt])`。
- en: Click **OK**.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**。
- en: 'Validate that OpenAI generated text for the new column. You can hover over
    a field in the new column to read the full text:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证OpenAI为新的列生成了文本。你可以在新列的字段上悬停以阅读全文：
- en: '![Figure 13.4 – OpenAI generated a description of the aircraft for that operator
    with new data from outside the FAA Wildlife Strike database](img/Figure_13.4_B19500.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.4 – OpenAI 使用来自 FAA 野生动物撞击数据库之外的新数据为该运营商生成飞机描述](img/Figure_13.4_B19500.jpg)'
- en: Figure 13.4 – OpenAI generated a description of the aircraft for that operator
    with new data from outside the FAA Wildlife Strike database
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.4 – OpenAI 使用来自 FAA 野生动物撞击数据库之外的新数据为该运营商生成飞机描述
- en: 'Repeating the preceding steps for text summarization of the `OpenAIlong` function:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 重复前面的步骤，对 `OpenAIlong` 函数进行文本摘要：
- en: Select **Add column** | **Custom Column**.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **添加列** | **自定义列**。
- en: Set `OpenAI` `Remarks Summarization`.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置 `OpenAI` `备注摘要`。
- en: Paste the following text into `OpenAIlong([Text` `Summarization Prompt])`.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下文本粘贴到 `OpenAIlong([文本摘要提示])` 中。
- en: Click **OK**.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **确定**。
- en: 'Validate that OpenAI generated text for the new column, and again you can hover
    over a field to view the full summarization:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证 OpenAI 为新列生成了文本，并且你还可以将鼠标悬停在字段上以查看完整的摘要：
- en: '![Figure 13.5 – Text summarization for remarks about aircraft hitting wildlife](img/Figure_13.5_B19500.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.5 – 关于飞机撞击野生动物的备注文本摘要](img/Figure_13.5_B19500.jpg)'
- en: Figure 13.5 – Text summarization for remarks about aircraft hitting wildlife
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.5 – 关于飞机撞击野生动物的备注文本摘要
- en: You’ve done it! OpenAI was successfully used to both generate new information
    about aircraft and summarize the free text remarks about wildlife strike incidents.
    You might want to save your dataflow at this point so that you don’t lose any
    work.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 你成功了！OpenAI 成功用于生成有关飞机的新信息，并总结野生动物撞击事件的自由文本备注。你可能想在此时保存你的数据流，以免丢失任何工作。
- en: Adding a Cognitive Services function to the solution
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将认知服务功能添加到解决方案中
- en: 'Finally, you decide to add more value to the deliverables by showcasing the
    Cognitive Services capabilities in Power BI. In both Power BI Desktop and Power
    BI dataflows, Cognitive Services is built in as part of the SaaS tool. Details
    about using Cognitive Services in Power BI can be found at this link: [https://learn.microsoft.com/en-us/power-bi/connect-data/service-tutorial-use-cognitive-services](https://learn.microsoft.com/en-us/power-bi/connect-data/service-tutorial-use-cognitive-services).'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你决定通过展示 Power BI 中的认知服务功能来为交付成果增加更多价值。在 Power BI Desktop 和 Power BI 数据流中，认知服务作为
    SaaS 工具的一部分内置。有关在 Power BI 中使用认知服务的详细信息，请参阅此链接：[https://learn.microsoft.com/en-us/power-bi/connect-data/service-tutorial-use-cognitive-services](https://learn.microsoft.com/en-us/power-bi/connect-data/service-tutorial-use-cognitive-services)。
- en: 'Cognitive Services refers to Azure services that can be called using APIs to
    score data with standard ML models. These tools can score the sentiment of text,
    identify images, extract key phrases, detect emotion in pictures, and more. The
    following Cognitive Services features are native to Power BI at the time of writing
    this book:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 认知服务是指可以使用 API 调用并使用标准 ML 模型评分数据的 Azure 服务。这些工具可以评分文本的情感，识别图像，提取关键短语，检测图片中的情绪等。以下认知服务功能在撰写本书时是
    Power BI 的原生功能：
- en: '**Detect Language**'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测语言**'
- en: '**Tag Images**'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标记图像**'
- en: '**Score Sentiment**'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评分情感**'
- en: '**Extract** **Key Phrases**'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提取** **关键短语**'
- en: For this final addition to the project, you will use the Score Sentiment function
    on the `0` to `1`, with `0` being negative, `0.5` being neutral, and `1` being
    positive.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个项目的最终补充，你将使用 `0` 到 `1` 的 `Score Sentiment` 函数，其中 `0` 表示负面，`0.5` 表示中性，`1`
    表示正面。
- en: 'Opening back up your **OpenAI** dataflow, navigate to the query for **Strike
    Reports Curated New OpenAI** and follow these steps:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 打开你的 **OpenAI** 数据流，导航到 **Strike Reports Curated New OpenAI** 的查询，并按照以下步骤操作：
- en: Highlight the **Remarks** column.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高亮显示 **备注** 列。
- en: Navigate to **Home** | **Insights** | **AI Insights**.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 **主页** | **洞察** | **AI 洞察**。
- en: Sign in and an **AI Insights** window will pop up.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，将弹出 **AI 洞察** 窗口。
- en: Notice that Cognitive Services is available, along with the Power BI ML models
    that you created! You can also use this capability to reuse your Power BI ML models
    to score multiple columns of data in different dataflows.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意，认知服务可用，以及你创建的 Power BI ML 模型！你还可以使用此功能来在不同数据流中重复使用你的 Power BI ML 模型来评分多个数据列。
- en: '![Figure 13.6 – Cognitive Services and Power BI ML models can be called as
    functions](img/Figure_13.6_B19500.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.6 – 认知服务和 Power BI ML 模型可以作为函数调用](img/Figure_13.6_B19500.jpg)'
- en: Figure 13.6 – Cognitive Services and Power BI ML models can be called as functions
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.6 – 认知服务和 Power BI ML 模型可以作为函数调用
- en: Select **CognitiveServices.ScoreSentiment**.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **CognitiveServices.ScoreSentiment**。
- en: Select the **Remarks** column from the dropdown and hit **Apply**.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择**备注**列，然后点击**应用**。
- en: Change the data type to `decimal number`.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据类型更改为**小数**。
- en: 'Validate that the sentiment was scored and added as a new column:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证情感分数已被评分并添加为新的列：
- en: '![Figure 13.7 – Sentiment scores for the Remarks column](img/Figure_13.7_B19500.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.7 – 备注列的情感分数](img/Figure_13.7_B19500.jpg)'
- en: Figure 13.7 – Sentiment scores for the Remarks column
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.7 – 备注列的情感分数
- en: 'You can now save and refresh your dataflow, and you’re done! When the dataflow
    has refreshed, you can connect from Power BI Desktop and browse the results of
    your work:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在可以保存并刷新你的数据流，任务完成！当数据流刷新后，你可以从 Power BI Desktop 连接并浏览你的工作结果：
- en: '![Figure 13.8 – Results of OpenAI and Cognitive Services viewed in Power BI](img/Figure_13.8_B19500.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.8 – 在 Power BI 中查看的 OpenAI 和认知服务的结果](img/Figure_13.8_B19500.jpg)'
- en: Figure 13.8 – Results of OpenAI and Cognitive Services viewed in Power BI
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.8 – 在 Power BI 中查看的 OpenAI 和认知服务的结果
- en: To make it easier to read, *Figure 13**.8* is split into two images. *Figure
    13**.9* shows the left hand columns.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 为了便于阅读，*图 13.8* 被拆分为两张图片。*图 13.9* 展示了左侧的列。
- en: '![Figure 13.9 – Results of OpenAI and Cognitive Services viewed in Power BI](img/Figure_13.9_B19500.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.9 – 在 Power BI 中查看的 OpenAI 和认知服务的结果](img/Figure_13.9_B19500.jpg)'
- en: Figure 13.9 – Results of OpenAI and Cognitive Services viewed in Power BI
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.9 – 在 Power BI 中查看的 OpenAI 和认知服务的结果
- en: The right-hand column is shown in *Figure 13**.10*.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 右侧的列在 *图 13.10* 中展示。
- en: '![Figure 13.10 – Results of OpenAI and Cognitive Services viewed in Power BI](img/Figure_13.10_B19500.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.10 – 在 Power BI 中查看的 OpenAI 和认知服务的结果](img/Figure_13.10_B19500.jpg)'
- en: Figure 13.10 – Results of OpenAI and Cognitive Services viewed in Power BI
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.10 – 在 Power BI 中查看的 OpenAI 和认知服务的结果
- en: Once you have gained a solid understanding of how to implement various tools
    and services within Power BI, such as Cognitive Services provided by OpenAI or
    Azure OpenAI, you can experiment with different prompt strategies and explore
    a wide range of additional capabilities.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你掌握了如何在 Power BI 中实现各种工具和服务的使用方法，例如 OpenAI 或 Azure OpenAI 提供的认知服务，你就可以尝试不同的提示策略，并探索广泛的附加功能。
- en: By leveraging the knowledge and skills gained from this book, you will be equipped
    to test new ideas, fine-tune your approaches, and optimize the performance of
    your solutions. With these tools at your disposal, the possibilities for enhancing
    your data analytics and content generation capabilities within Power BI are virtually
    limitless. So, don’t be afraid to dive in and explore all that these powerful
    technologies have to offer!
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用本书中获得的知识和技能，你将能够测试新想法，微调你的方法，并优化解决方案的性能。有了这些工具在手，你在 Power BI 中增强数据分析和内容生成能力的可能性几乎是无限的。所以，不要害怕深入探索这些强大技术所能提供的一切！
- en: Summary
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter covered the integration of OpenAI or Azure OpenAI with Power BI,
    along with a use case for Power BI Cognitive Services. By leveraging these advanced
    tools, you were able to generate new descriptions of airplanes using external
    data and GPT models, summarize remarks about wildlife strikes, and even score
    the remarks for sentiment analysis.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了 OpenAI 或 Azure OpenAI 与 Power BI 的集成，以及 Power BI 认知服务的用例。通过利用这些高级工具，你能够使用外部数据和
    GPT 模型生成飞机的新描述，总结关于野生动物撞击的备注，甚至对备注进行情感分析评分。
- en: Moving forward, the next and final chapter will provide an opportunity to review
    and reflect on the work accomplished throughout this book and the accompanying
    workshop. We will also begin to explore new strategies for enhancing and expanding
    upon the existing project, as we recognize that projects are never truly complete
    if there is still potential for additional value to be achieved.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，下一章和最后一章将提供一个机会来回顾和反思本书及配套研讨会中完成的工作。我们还将开始探索增强和扩展现有项目的新策略，因为我们认识到，如果仍有实现额外价值的潜力，项目就永远不会真正完成。
