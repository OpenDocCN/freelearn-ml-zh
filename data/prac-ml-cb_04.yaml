- en: Chapter 4. Model Selection and Regularization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四章 模型选择和正则化
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下内容：
- en: Shrinkage methods - calories burned per day
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收敛方法 - 每日燃烧的卡路里
- en: Dimension reduction methods - Delta's Aircraft Fleet
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 维度缩减方法 - Delta的飞机机队
- en: Principal component analysis - understanding world cuisine
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主成分分析 - 理解世界美食
- en: Introduction
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: '**Subset selection**: The use of labeled examples to induce a model that classifies
    objects into a finite set of known classes is one of the main challenges of supervised
    classification in machine learning. Vectors of numeric or nominal features are
    used to describe the various examples. In the feature subset selection problem,
    a learning algorithm is faced with the problem of selecting some subset of features
    upon which to focus its attention, while ignoring the rest.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**子集选择**：在机器学习中，监督分类的主要挑战之一是使用标记示例来诱导一个将对象分类到有限已知类别的模型。数值或名义特征向量用于描述各种示例。在特征子集选择问题中，学习算法面临的问题是在选择一些特征子集上集中注意力，同时忽略其余部分。'
- en: When fitting a linear regression model, a subset of variables that best describe
    the data are of interest. There are a number of different ways the best subset,
    applying a number of different strategies, can be adopted when searching for a
    variables set. If there are *m* variables and the best regression model consists
    of *p* variables, *p≤m*, then a more general approach to pick the best subset
    might be to try all possible combinations of *p* variables and select the model
    that fits the data the best.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 当拟合线性回归模型时，我们感兴趣的变量子集是最好描述数据的。在寻找变量集时，可以采用多种不同的策略来选择最佳子集。如果有 *m* 个变量，并且最佳回归模型由
    *p* 个变量组成，*p≤m*，那么选择最佳子集的更通用方法可能是尝试所有可能的 *p* 个变量的组合，并选择最适合数据的模型。
- en: However, there are *m! p!(m−p)! *possible combinations, which increases with
    the increase in the value of *m*, for example, *m = 20* and *p = 4* gives 4,845
    possible combinations. In addition, through the usage of fewer features, we may
    reduce the cost of acquiring the data and improve the comprehensibility of the
    classification model.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，存在 *m! p!(m−p)!* 种可能的组合，随着 *m* 值的增加而增加，例如，*m = 20* 和 *p = 4* 会产生 4,845 种可能的组合。此外，通过使用更少的特点，我们可以降低获取数据成本并提高分类模型的易理解性。
- en: '**Shrinkage methods:** Shrinkage regression refers to shrinkage methods of
    estimation or prediction in regression situations; useful when there is multi
    co-linearity among the regressors. In cases where the dataset is small compared
    to the number of co-variables studied, shrinkage techniques may improve predictions.
    The common shrinkage methods are as follows:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**收敛方法**：收敛回归指的是回归情况下的估计或预测的收敛方法；当回归变量之间存在多重共线性时很有用。在数据集相对于研究的协变量数量较小的情况下，收敛技术可以提高预测。常见的收敛方法如下：'
- en: Linear shrinkage factor--shrinks all coefficients with the same factor
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 线性收敛因子--以相同的因子收缩所有系数
- en: Ridge regression--penalized maximum likelihood, penalty factor is added to the
    likelihood function such that coefficients are shrunk individually according to
    the variance of each co-variable
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 岭回归--惩罚最大似然，惩罚因子添加到似然函数中，使得系数根据每个协变量的方差单独收缩
- en: Lasso--shrinks some coefficients to zero by setting a constraint on the sum
    of the absolute values of the coefficients of standardized co-variables
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Lasso--通过在标准化协变量的系数绝对值之和上设置约束，将一些系数收缩到零
- en: Shrinkage methods retain a subset of the predictors, while discarding the rest.
    The subset selection produces a model that is interpretable and produces possibly
    lower prediction-errors than the full model, while not reducing the prediction
    error of the full model. Shrinkage methods more continuous and don't suffer as
    much from high variability. When there are many correlated variables in a linear
    regression model, their coefficients are poorly determined and exhibit high variance.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 收敛方法保留预测变量的一部分，同时丢弃其余部分。子集选择产生一个可解释的模型，并且可能比全模型产生更低的预测误差，而不会降低全模型的预测误差。收敛方法更连续，并且不会像高变异性那样受到很大影响。当线性回归模型中有许多相关变量时，它们的系数难以确定，并且表现出高方差。
- en: '**Dimension reduction methods:** One of the significant challenges across a
    wide variety of information-processing fields, including pattern recognition,
    data compression, machine learning, and database navigation, is manifold learning.
    The measured data vectors are high-dimensional and, in many cases, the data lies
    near a lower-dimensional manifold. The main challenges of high-dimensional data
    are that it is multiple; it indirectly measures the underlying source, which typically
    cannot be directly measured. Dimensionality reduction may also be seen as the
    process of deriving a set of degrees of freedom, which can be used to reproduce
    most of the variability of a dataset.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**降维方法**：在包括模式识别、数据压缩、机器学习和数据库导航在内的广泛信息处理领域中，降维是一个重要的挑战。测量的数据向量是高维的，在许多情况下，数据位于一个低维流形附近。高维数据的主要挑战是它们是多元的；它们间接地测量了底层来源，这通常不能直接测量。降维也可以被视为推导出一组自由度的过程，这些自由度可以用来再现数据集的大部分变异性。'
- en: Shrinkage methods - calories burned per day
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 收缩方法 - 每日燃烧卡路里
- en: In order to compare the metabolic rate of humans, the concept of **basal metabolic
    rate** (**BMR**) is critical, in a clinical context, as a means of determining
    thyroid status in humans. The BMR of mammals varies with body mass, with the same
    allometric exponent as field metabolic rate, and with many physiological and biochemical
    rates. Fitbit, as a device, uses BMR and activities performed during the day to
    estimate calories burned throughout the day.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了比较人类的代谢率，**基础代谢率**（**BMR**）的概念在临床环境中至关重要，作为确定人类甲状腺状态的手段。哺乳动物的基础代谢率与体重成正比，与场代谢率具有相同的异速增长指数，以及许多生理和生化速率。Fitbit作为一种设备，使用基础代谢率和一天中进行的活动来估计一天中燃烧的卡路里。
- en: Getting ready
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: In order to perform shrinkage methods, we shall be using a dataset collected
    from Fitbit and a calories-burned dataset.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行收缩方法，我们将使用从Fitbit收集的数据集和燃烧卡路里数据集。
- en: Step 1 - collecting and describing data
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集和描述数据
- en: 'The dataset titled `fitbit_export_20160806.csv` which is in CSV format shall
    be used. The dataset is in standard format. There are 30 rows of data and 10 variables.
    The numeric variables are as follows:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 应使用标题为`fitbit_export_20160806.csv`的CSV格式数据集。数据集是标准格式。有30行数据，10个变量。数值变量如下：
- en: '`Calories Burned`'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Calories Burned`'
- en: '`Steps`'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Steps`'
- en: '`Distance`'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Distance`'
- en: '`Floors`'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Floors`'
- en: '`Minutes Sedentary`'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Minutes Sedentary`'
- en: '`Minutes Lightly Active`'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Minutes Lightly Active`'
- en: '`Minutes Fairly Active`'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Minutes Fairly Active`'
- en: '`ExAng`'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ExAng`'
- en: '`Minutes Very Active`'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Minutes Very Active`'
- en: '`Activity Calories`'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Activity Calories`'
- en: 'The non-numeric variables are as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 非数值变量如下：
- en: '`Date`'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date`'
- en: How to do it...
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let's get into the details.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解。
- en: Step 2 - exploring data
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'As the first step, the following packages need to be loaded:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 作为第一步，需要加载以下包：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: 'Version info: Code for this page was tested in R version 3.3.0 (2016-05-03)'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在R版本3.3.0（2016-05-03）中进行了测试
- en: 'Let''s explore the data and understand the relationships among the variables.
    We''ll begin by importing the csv data file named `fitbit_export_20160806.csv`.
    We will be saving the data to the `fitbit_details` frame:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索数据并了解变量之间的关系。我们将从导入名为`fitbit_export_20160806.csv`的csv数据文件开始。我们将把数据保存到`fitbit_details`框架中：
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Storing the `fitbit_details` data frame to the `fitbit` data frame:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 将`fitbit_details`数据框存储到`fitbit`数据框中：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Printing data frame `fitbit`. The `head()` function returns the first part
    of the `fitbit` data frame. The `fitbit` data frame is passed as an input parameter:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`fitbit`数据框。`head()`函数返回`fitbit`数据框的第一部分。`fitbit`数据框作为输入参数传递：
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The result is as follows:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_001.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![第2步 - 探索数据](img/image_04_001.jpg)'
- en: 'Setting `Activity.Calories` and `Date` values as NULL:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 将`Activity.Calories`和`Date`值设置为NULL：
- en: '[PRE4]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Scaling coefficients to calories per thousand steps. The result is then set
    to the `fitbit$Steps` data frame:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 将缩放系数设置为每千步卡路里。然后将结果设置为`fitbit$Steps`数据框：
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Printing the `fitbit$Steps` data frame:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`fitbit$Steps`数据框：
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The result is as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_002.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![第2步 - 探索数据](img/image_04_002.jpg)'
- en: 'Exploring all the candidate variables. Function for calculating correlation
    coefficients:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 探索所有候选变量。计算相关系数的函数：
- en: '[PRE8]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Producing a matrix of scatterplots. The `pairs()`function produces the scatter
    plots in matrix form. `fitbit` is the dataset for scatter plots. Distance can
    be calculated almost exactly directly from `Steps`:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 生成散点矩阵。`pairs()`函数以矩阵形式生成散点图。"fitbit"是散点图的数据集。距离可以直接从"Steps"中几乎精确地计算出来：
- en: '[PRE9]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The result is as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_003.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 2 - 探索数据](img/image_04_003.jpg)'
- en: 'Printing `fitbit data frame`:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`fitbit数据框`：
- en: '[PRE10]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The result is as follows:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_004.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 2 - 探索数据](img/image_04_004.jpg)'
- en: Step 3 - building the model
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 3 - 构建模型
- en: 'Building ordinary least squares estimation with Steps as the sole explanatory
    variable and `Calories.Burned` as the response variable. `lm()` as a function
    is used to fit linear models. `Calories.Burned ~ Steps` is the formula, while
    `fitbit` is the data frame. The result is then stored in the moderate data frame:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 使用"Steps"作为唯一解释变量和"Calories.Burned"作为响应变量构建普通最小二乘估计。"lm()"作为一个函数用于拟合线性模型。"Calories.Burned
    ~ Steps"是公式，而"fitbit"是数据框。结果存储在`moderate`数据框中：
- en: '[PRE11]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Printing the `moderate` data frame:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`moderate`数据框：
- en: '[PRE12]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The result is as follows:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - building the model](img/image_04_005.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 构建模型](img/image_04_005.jpg)'
- en: 'Rounding off the values of the `moderate` data frame:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 将`moderate`数据框的值四舍五入：
- en: '[PRE13]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The result is as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - building the model](img/image_04_006.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 构建模型](img/image_04_006.jpg)'
- en: 'Plotting the predicted calories with the residuals from the model used. The `plot()` function
    is a generic function for plotting R objects. The `moderate` data frame is passed
    as a function value. The `bty` parameter determines the type of box drawn about
    plots:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 使用模型中的残差绘制预测卡路里。`plot()`函数是一个通用的绘图R对象的函数。`moderate`数据框作为函数值传递。`bty`参数确定围绕绘图绘制的框的类型：
- en: '[PRE14]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The result is as follows:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - building the model](img/image_04_007.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 构建模型](img/image_04_007.jpg)'
- en: 'Checking the partial autocorrelation function of residuals. `pacf()` is used
    for partial autocorrelations. `resid()` as a function computes the difference
    between the observed data of the dependent variable. `moderate` is passed as a
    data frame to the `resid()` function, to compute the difference between the observed
    data of the dependent variable:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 检查残差的偏自相关函数。"pacf()"用于计算偏自相关。"resid()"作为一个函数计算因变量观测数据之间的差异。"moderate"作为一个数据框传递给"resid()"函数，以计算因变量观测数据之间的差异：
- en: '[PRE15]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The `grid()` function adds the grids to the plotted data:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '`grid()`函数向绘制的数据添加网格：'
- en: '[PRE16]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The result is as follows:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - building the model](img/image_04_008.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 构建模型](img/image_04_008.jpg)'
- en: Step 4 - improving the model
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 4 - 改进模型
- en: Predicting daily calories based on all seven explanatory variables. Fitting
    the model to multiple samples at different values of alpha, using the fit model
    to predict the out of bag points from the original sample that weren't in the
    re-sample. It is about creating the balance between the extremes of ridge regression
    and lasso estimation by choosing an appropriate value of alpha.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 根据所有七个解释变量预测每日卡路里。使用拟合模型在多个不同alpha值下对样本进行拟合，使用拟合模型从原始样本中预测未在重新抽样的样本中的外袋点。这是通过选择适当的alpha值来在岭回归和lasso估计的极端之间创建平衡。
- en: 'Creating the matrix X by standardizing. The `as.matrix()` function turns `fitbit[
    , -1]` that is, apart from date column into matrix:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 通过标准化创建矩阵`X`。`as.matrix()`函数将`fitbit[ , -1]`（即除日期列之外的部分）转换为矩阵：
- en: '[PRE17]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Printing the `X` data frame. The `head()` function returns the first part of
    the `X` data frame. The `X` data frame is passed as an input parameter:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`X`数据框。"head()"函数返回`X`数据框的第一部分。"X"数据框作为输入参数传递：
- en: '[PRE18]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The result is as follows:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_009.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 改进模型](img/image_04_009.jpg)'
- en: 'Creating the vector `Y` by standardizing:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 通过标准化创建向量`Y`：
- en: '[PRE19]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Printing the `Y` data frame:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`Y`数据框：
- en: '[PRE20]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The result is as follows:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_010.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 改进模型](img/image_04_010.jpg)'
- en: '[PRE21]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Generating regular sequences:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 生成常规序列：
- en: '[PRE22]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Creating five repeats of each CV run:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 创建每个CV运行的五次重复：
- en: '[PRE23]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Creating the dataset to be used. The `data.frame()` function is used to create
    data frames based on a tightly coupled set of variables. These variables share
    the properties of matrices:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 创建要使用的数据集。"data.frame()"函数用于根据紧密耦合的变量集创建数据框。这些变量共享矩阵的性质：
- en: '[PRE24]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Printing the `res` data frame:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`res`数据框：
- en: '[PRE25]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The result is as follows:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_011.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_011.jpg)'
- en: 'Creating a vector of `average_rmse`:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 创建`average_rmse`向量：
- en: '[PRE26]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Printing the `res$average_rmse` vector:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`res$average_rmse`向量：
- en: '[PRE27]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The result is as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_012.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_012.jpg)'
- en: 'Arranging the `res$average_rmse` in ascending order. The result is then stored
    in the `res` data frame:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 将`res$average_rmse`按升序排列。结果存储在`res`数据框中：
- en: '[PRE28]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Printing the `res` data frame:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`res`数据框：
- en: '[PRE29]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The result is as follows:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_013.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_013.jpg)'
- en: '[PRE30]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The result is as follows:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_014.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_014.jpg)'
- en: '[PRE31]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Printing the  `bestalpha` data frame:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`bestalpha`数据框：
- en: '[PRE32]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '![Step 4 - improving the model](img/image_04_015.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_015.jpg)'
- en: Comparing ordinary least squares equivalents with the estimated values of the
    eight coefficients (seven explanatory variables plus an intercept) by using elastic
    net.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 使用弹性网络比较普通最小二乘等价物与八个系数（七个解释变量加一个截距）的估计值。
- en: 'Determining lambda at best value of alpha. Computing k-fold cross-validation
    for `glmnet` by calling the `cv.glmnet()` function:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 确定alpha的最佳值处的lambda。通过调用`cv.glmnet()`函数计算`glmnet`的k折交叉验证：
- en: '[PRE33]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Creating the model. `glmnet()` fits a generalized linear model via penalized
    maximum likelihood. The regularization path is computed for the lasso or `elasticnet`
    penalty at a grid of values for the regularization parameter lambda. `X` is the
    input matrix, while `Y` is the response variable. `alpha` is the `elasticnet`
    mixing parameter, with 0 ≤ α ≤ 1:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型。`glmnet()`通过惩罚最大似然估计拟合广义线性模型。正则化路径在正则化参数lambda的值网格上计算，对于lasso或`elasticnet`惩罚。`X`是输入矩阵，而`Y`是响应变量。`alpha`是`elasticnet`混合参数，范围是0
    ≤ α ≤ 1：
- en: '[PRE34]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Building an ordinary least squares estimation, with `fitbit` as the sole explanatory
    variable and `Calories.Burned` as the response variable. `lm()` as a function
    is used to fit linear models. `Calories.Burned ~ Steps` is the formula, while
    `fitbit` is the data frame. The result is then stored in the `OLSmodel` data frame:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 建立普通最小二乘估计，以`fitbit`作为唯一的解释变量，以`Calories.Burned`作为响应变量。使用`lm()`函数拟合线性模型。`Calories.Burned
    ~ Steps`是公式，而`fitbit`是数据框。结果存储在`OLSmodel`数据框中：
- en: '[PRE35]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Printing the `OLSmodel` data frame:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`OLSmodel`数据框：
- en: '[PRE36]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'The result is as follows:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_016.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_016.jpg)'
- en: 'Comparing ordinary least squares equivalents with the estimated values of the
    eight coefficients (seven explanatory variables plus an intercept). The result
    is then stored in the `coeffs` data frame:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 比较普通最小二乘等价物与八个系数（七个解释变量加一个截距）的估计值。结果存储在`coeffs`数据框中：
- en: '[PRE37]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Printing the `coeffs` data frame:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`coeffs`数据框：
- en: '[PRE38]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'The result is as follows:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_017.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_017.jpg)'
- en: 'Rounding off the values of the `moderate` data frame to three significant digits:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 将`moderate`数据框的值四舍五入到三位有效数字：
- en: '[PRE39]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'The result is as follows:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_018.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_018.jpg)'
- en: 'Creating the model. `glmnet()` fits a generalized linear model via a penalized
    maximum likelihood:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型。`glmnet()`通过惩罚最大似然估计拟合广义线性模型：
- en: '[PRE40]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Printing the `moderate2` data frame:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`moderate2`数据框：
- en: '[PRE41]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'The result is as follows:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_019.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_019.jpg)'
- en: 'Rounding off the values to three significant digits:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 将值四舍五入到三位有效数字：
- en: '[PRE42]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'The result is as follows:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_020.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_020.jpg)'
- en: 'Creating the model. `glmnet()`fits a generalized linear model via a penalized
    maximum likelihood after eliminating the distance column:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型。在消除距离列后，`glmnet()`通过惩罚最大似然估计拟合广义线性模型：
- en: '[PRE43]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Printing the `moderate3` data frame:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`moderate3`数据框：
- en: '[PRE44]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The result is as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_021.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 改进模型](img/image_04_021.jpg)'
- en: 'Building ordinary least squares estimation `Y ~ X[ , -2]` is the formula. The
    result is then stored in the `moderate4` data frame:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 建立普通最小二乘估计`Y ~ X[ , -2]`是公式。结果存储在`moderate4`数据框中：
- en: '[PRE45]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Printing the `moderate4` data frame:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`moderate4`数据框：
- en: '[PRE46]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The result is as follows:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_022.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 改进模型](img/image_04_022.jpg)'
- en: 'Rounding off the values to three significant digits:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 将数值四舍五入到三位有效数字：
- en: '[PRE47]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'The result is as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - improving the model](img/image_04_023.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 改进模型](img/image_04_023.jpg)'
- en: Step 5 - comparing the model
  id: totrans-179
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 5 - 比较模型
- en: Comparing the predictive strength of different models by using bootstrapping,
    where the modeling approach is applied to bootstrap re-samples of the data. The
    estimate model is then used to predict the full, original dataset.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用bootstrapping比较不同模型的预测能力，其中建模方法应用于数据的bootstrap重采样。然后使用估计模型来预测完整的原始数据集。
- en: 'Function to feed to boot that does elastic modeling:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 传递给boot以进行弹性建模的函数：
- en: '[PRE48]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Generating an R bootstrap replica of a statistic applied to data. `fitbit`
    is the dataset, `statistic = modellingfucn1` is the function, which, when applied
    to `fitbit`, returns a vector containing the statistics of interest. `R = 99`  indicates
    the number of bootstrap replicates:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 生成应用于数据的统计量的R bootstrap副本。`fitbit`是数据集，`statistic = modellingfucn1`是函数，当应用于`fitbit`时，返回包含感兴趣统计量的向量。`R
    = 99`表示bootstrap副本的数量：
- en: '[PRE49]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Printing the `elastic_boot` data frame:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`elastic_boot`数据框：
- en: '[PRE50]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The result is as follows:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - comparing the model](img/image_04_024.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 比较模型](img/image_04_024.jpg)'
- en: 'Function to feed to boot that does OLS modeling:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 传递给boot以进行OLS建模的函数：
- en: '[PRE51]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Generating an R bootstrap replica of a statistic applied to data. `fitbit`
    is the dataset, `statistic = modellingOLS` is the function, which, when applied
    to `fitbit`, returns a vector containing the statistics of interest. `R = 99`  indicates
    the number of bootstrap replicates:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 生成应用于数据的统计量的R bootstrap副本。`fitbit`是数据集，`statistic = modellingOLS`是函数，当应用于`fitbit`时，返回包含感兴趣统计量的向量。`R
    = 99`表示bootstrap副本的数量：
- en: '[PRE52]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Printing the `lmOLS_boot` data frame:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`lmOLS_boot`数据框：
- en: '[PRE53]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The result is as follows:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - comparing the model](img/image_04_025.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 比较模型](img/image_04_025.jpg)'
- en: 'Generating an R bootstrap replica of a statistic applied to data. `fitbit`
    is the dataset, `statistic = modellingfucn2` is the function, which, when applied
    to `fitbit`, returns a vector containing the statistics of interest. `R = 99`  indicates
    the number of bootstrap replicates:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 生成应用于数据的统计量的R bootstrap副本。`fitbit`是数据集，`statistic = modellingfucn2`是函数，当应用于`fitbit`时，返回包含感兴趣统计量的向量。`R
    = 99`表示bootstrap副本的数量：
- en: '[PRE54]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Printing the `lm_boot` data frame:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`lm_boot`数据框：
- en: '[PRE55]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The result is as follows:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - comparing the model](img/image_04_026.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 比较模型](img/image_04_026.jpg)'
- en: '[PRE56]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'The result is as follows:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - comparing the model](img/image_04_027.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 比较模型](img/image_04_027.jpg)'
- en: Refitting the model with scaled variables.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 使用缩放变量重新拟合模型。
- en: Creating the model. `glmnet()` fits a generalized linear model via a penalized
    maximum likelihood.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型。`glmnet()`通过惩罚最大似然估计拟合广义线性模型。
- en: '[PRE57]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'The result is as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - comparing the model](img/image_04_028.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 比较模型](img/image_04_028.jpg)'
- en: Dimension reduction methods - Delta's Aircraft Fleet
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 维度缩减方法 - Delta的机队
- en: Fleet planning is a part of the strategic planning process for any airline company.
    Fleet is the total number of aircraft that an airline operates, as well as the
    specific aircraft types that comprise the total fleet. Airline selection criteria
    for aircraft acquisition are based on technical/performance characteristics, economic
    and financial impact, environmental regulations and constraints, marketing considerations,
    and political realities. Fleet composition is a critical long-term strategic decision
    for an airline company. Each aircraft type has different technical performance
    characteristics, for example, the capacity to carry the payload over a maximum
    flight distance or range. It affects financial position, operating costs, and
    especially the ability to serve specific routes.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 航空公司战略规划过程中的一个部分是机队规划。机队是指航空公司运营的飞机总数，以及构成总机队的具体飞机类型。飞机采购的航空公司选择标准基于技术/性能特性、经济和财务影响、环境法规和限制、营销考虑以及政治现实。机队构成是航空公司公司的关键长期战略决策。每种飞机类型都有不同的技术性能特性，例如，携带有效载荷在最大飞行距离或范围内的能力。它影响财务状况、运营成本，尤其是服务特定路线的能力。
- en: Getting ready
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: In order to perform dimension reduction we shall be using a dataset collected
    on Delta Airlines Aircraft Fleet.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行降维，我们将使用收集于 Delta 航空公司机队的数据集。
- en: Step 1 - collecting and describing data
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第一步 - 收集和描述数据
- en: The dataset titled `delta.csv` shall be used. The dataset is in standard format.
    There are 44 rows of data and 34 variables.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 应使用标题为 `delta.csv` 的数据集。该数据集采用标准格式。共有 44 行数据，34 个变量。
- en: How to do it...
  id: totrans-217
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Let's get into the details.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring data
  id: totrans-219
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 2 - 探索数据
- en: 'The first step is to load the following packages:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是加载以下包：
- en: '[PRE58]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Note
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.3.2 (2016-10-31)'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在 R 版本 3.3.2（2016-10-31）上进行了测试
- en: 'Let''s explore the data and understand the relationships among the variables.
    We''ll begin by importing the csv data file named `delta.csv`. We will be saving
    the data to the delta frame:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索数据并了解变量之间的关系。我们将首先导入名为 `delta.csv` 的 csv 数据文件。我们将把数据保存到 delta 数据框中：
- en: '[PRE59]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Exploring the internal structure of the `delta` data frame. The `str()` function
    displays the internal structure of the data frame. The details passed as an R
    object to the `str()` function:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `delta` 数据框的内部结构。`str()` 函数显示数据框的内部结构。将作为 R 对象传递给 `str()` 函数的详细信息：
- en: '[PRE60]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'The result is as follows:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_029.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 2 - 探索数据](img/image_04_029.jpg)'
- en: 'Exploring the intermediary quantitative variables related to the aircraft''s
    physical characteristics: Accommodation, Cruising Speed, Range, Engines, Wing
    Span, Tail Height, and `Length.Scatter` plot matrix. The `plot()` function is
    a generic function for plotting Robjects. The `delta[,16:22]` data frame is passed
    as a function value:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 探索与飞机物理特性相关的中间定量变量：住宿、巡航速度、航程、引擎、翼展、尾高和 `Length.Scatter` 折线图矩阵。`plot()` 函数是一个用于绘制
    R 对象的通用函数。将 `delta[,16:22]` 数据框作为函数值传递：
- en: '[PRE61]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The result is as follows:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_04_030.jpg)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 2 - 探索数据](img/image_04_030.jpg)'
- en: There is a positive correlation between all these variables as all of them are
    related to the aircraft's overall size.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些变量之间都存在正相关关系，因为它们都与飞机的整体尺寸有关。
- en: Step 3 - applying principal components analysis
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 3 - 应用主成分分析
- en: 'Visualizing a high-dimensional dataset, such as the number of engines. Applying
    principle components analysis to data. The `princomp()` function performs principal
    components analysis on the `delta` datamatrix. The result is `principal_comp_analysis`,
    which is an object of class `princomp`:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化高维数据集，如引擎数量。对数据进行主成分分析。`princomp()` 函数对 `delta` 数据矩阵执行主成分分析。结果是 `principal_comp_analysis`，它是一个
    `princomp` 类的对象：
- en: '[PRE62]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Printing the `principal_comp_analysis` data frame:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `principal_comp_analysis` 数据框：
- en: '[PRE63]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'The result is as follows:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - applying principal components analysis](img/image_04_031.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 应用主成分分析](img/image_04_031.jpg)'
- en: 'Plotting `principal_comp_analysis` data:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制 `principal_comp_analysis` 数据：
- en: '[PRE64]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'The result is as follows:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - applying principal components analysis](img/image_04_032.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 应用主成分分析](img/image_04_032.jpg)'
- en: It is demonstrable that the first principal component has a standard deviation,
    which accounts for over 99.8% of the variance in the data.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 可以证明，第一个主成分具有标准差，它解释了数据中超过 99.8% 的方差。
- en: 'Printing loadings of principal components analysis. The `loadings()` function
    uses the `principal_comp_analysis` principal components-analysis data object as
    input:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 打印主成分分析加载项。`loadings()` 函数使用 `principal_comp_analysis` 主成分分析数据对象作为输入：
- en: '[PRE65]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The result is as follows:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - applying principal components analysis](img/image_04_033.jpg)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 应用主成分分析](img/image_04_033.jpg)'
- en: Looking at the first column of loadings, it is clear that the first principle
    component is just the range, in miles. The scale of each variable in the dataset
    is different.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 观察加载的第一个列，很明显，第一个主成分仅仅是航程，以英里为单位。数据集中每个变量的尺度都不同。
- en: 'Plotting variance on regular scaling. `barplot()` plots both vertical and horizontal
    bars. `sapply()` is a wrapper function that returns a list of the same length
    as `delta.horiz=T` signifies a logical value that the bars are to be drawn horizontally,
    with the first at the bottom:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 在常规尺度上绘制方差。`barplot()` 绘制垂直和水平条形图。`sapply()` 是一个包装函数，它返回与 `delta.horiz=T` 相同长度的列表，表示条形图将水平绘制，第一个在底部：
- en: '[PRE66]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'The result is as follows:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - applying principal components analysis](img/image_04_034.jpg)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 应用主成分分析](img/image_04_034.jpg)'
- en: 'Plotting variance on a logarithmic scale. `barplot()` plots both vertical and
    horizontal bars:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 在对数尺度上绘制方差。`barplot()` 绘制垂直和水平条形：
- en: '[PRE67]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'The result is as follows:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - applying principal components analysis](img/image_04_035.jpg)'
  id: totrans-259
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 应用主成分分析](img/image_04_035.jpg)'
- en: '[PRE68]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: Step 4 - scaling the data
  id: totrans-261
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 4 步 - 缩放数据
- en: 'The scaling of `delta` data is useful under certain circumstances, since the
    variables span different ranges. `scale()`as a function centers and/or scales
    the columns of the `delta` matrix. The result is then stored in the `delta2` data
    frame:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，缩放 `delta` 数据是有用的，因为变量跨越不同的范围。`scale()` 函数作为函数对 `delta` 矩阵的列进行中心化和/或缩放。结果存储在
    `delta2` 数据框中：
- en: '[PRE69]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'Verifying whether the variance is uniform:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 验证方差是否均匀：
- en: '[PRE70]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'The result is as follows:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - scaling the data](img/image_04_036.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 缩放数据](img/image_04_036.jpg)'
- en: The variance is now constant across variables.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 现在方差在变量间是恒定的。
- en: 'Applying principal components to the scaled data `delta2`. The `princomp()` function
    performs principal components analysis on the `delta2` datamatrix. The result
    is `principal_comp_analysis`, which is an object of class `princomp`:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 将主成分应用于缩放后的数据 `delta2`。`princomp()` 函数对 `delta2` 数据矩阵执行主成分分析。结果是 `principal_comp_analysis`，它是一个
    `princomp` 类的对象：
- en: '[PRE71]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Plotting the `principal_comp_analysis` object:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制 `principal_comp_analysis` 对象：
- en: '[PRE72]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'The result is as follows:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - scaling the data](img/image_04_037.jpg)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 缩放数据](img/image_04_037.jpg)'
- en: '[PRE73]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'The result is as follows:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - scaling the data](img/image_04_038.jpg)'
  id: totrans-277
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 缩放数据](img/image_04_038.jpg)'
- en: 'The `summary()` function is used to produce summaries of the results of various
    model-fitting functions:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `summary()` 函数生成各种模型拟合函数结果的摘要：
- en: '[PRE74]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'The result is as follows:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - scaling the data](img/image_04_039.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 缩放数据](img/image_04_039.jpg)'
- en: 'Applying principal components to the scaled data `delta2`. The `prcomp()` function
    performs principal components analysis on the `delta2` datamatrix. The result
    is `principal_comp_analysis`, which is an object of class `prcomp`:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 将主成分应用于缩放后的数据 `delta2`。`prcomp()` 函数对 `delta2` 数据矩阵执行主成分分析。结果是 `principal_comp_analysis`，它是一个
    `prcomp` 类的对象：
- en: '[PRE75]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Creating a data frame of `principal_comp_vectors`:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 创建 `principal_comp_vectors` 的数据框：
- en: '[PRE76]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'Applying k means with `k = 4`. The `kmeans()`function performs k-means clustering
    on comp. `nstart=25` signifies the number of random sets to be chosen. `iter.max=1000` is
    the maximum number of iterations allowed:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `k = 4` 进行 k 均值聚类。`kmeans()` 函数对 comp 执行 k 均值聚类。`nstart=25` 表示要选择的随机集的数量。`iter.max=1000`
    是允许的最大迭代次数：
- en: '[PRE77]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'Creating a vector of nine contiguous colors:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个包含九种连续颜色的向量：
- en: '[PRE78]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'Plotting comp:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制 comp：
- en: '[PRE79]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The result is as follows:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - scaling the data](img/image_04_040.jpg)'
  id: totrans-293
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 缩放数据](img/image_04_040.jpg)'
- en: Step 5 - visualizing in 3D plot
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 5 步 - 在 3D 图中可视化
- en: 'Plotting in 3D `comp$PC1`, `comp$PC2`, `comp$PC3`:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在 3D 中绘制 `comp$PC1`、`comp$PC2`、`comp$PC3`：
- en: '[PRE80]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'The result is as follows:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_041.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_041.jpg)'
- en: 'Plotting in 3D `comp$PC1`, `comp$PC3`, `comp$PC4`:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 在 3D 中绘制 `comp$PC1`、`comp$PC3`、`comp$PC4`：
- en: '[PRE81]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'The result is as follows:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_042.jpg)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_042.jpg)'
- en: 'Examining the clusters in order of increasing size:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 按照大小顺序检查簇：
- en: '[PRE82]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'The result is as follows:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_043.jpg)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_043.jpg)'
- en: '[PRE83]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'Names as displayed in the first cluster:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 如第一簇中显示的名称：
- en: '[PRE84]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'The result is as follows:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_044.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_044.jpg)'
- en: 'Names as displayed in the second cluster:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 如第二簇中显示的名称：
- en: '[PRE85]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'The result is as follows:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_045.jpg)'
  id: totrans-315
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_045.jpg)'
- en: 'Names as displayed in the third cluster:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 如第三簇中显示的名称：
- en: '[PRE86]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'The result is as follows:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_046.jpg)'
  id: totrans-319
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_046.jpg)'
- en: 'Names as displayed in the fourth cluster:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 如第四簇中显示的名称：
- en: '[PRE87]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: 'The result is as follows:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - visualizing in 3D plot](img/image_04_047.jpg)'
  id: totrans-323
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 在 3D 图中可视化](img/image_04_047.jpg)'
- en: Principal component analysis - understanding world cuisine
  id: totrans-324
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主成分分析 - 理解世界美食
- en: Food is a powerful symbol of who we are. There are many types of food identification,
    such as ethnic, religious, and class identifications. Ethnic food preferences
    become identity markers in the presence of gustatory foreigners, such as when
    one goes abroad, or when those foreigners visit the home shores.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 食物是我们身份的强大象征。有许多类型的食物识别，如民族、宗教和阶级识别。在存在味觉外国人（如出国或在外国人访问家乡时）的情况下，民族食物偏好成为身份标志。
- en: Getting ready
  id: totrans-326
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to perform principal component analysis, we shall be using a dataset
    collected on the Epicurious recipe dataset.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行主成分分析，我们将使用在 Epicurious 菜谱数据集上收集的数据集。
- en: Step 1 - collecting and describing data
  id: totrans-328
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集和描述数据
- en: The dataset titled `epic_recipes.txt` shall be used. The dataset is in standard
    format.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 将使用标题为 `epic_recipes.txt` 的数据集。该数据集为标准格式。
- en: How to do it...
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let's get into the details.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring data
  id: totrans-332
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'The first step is to load the following packages:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是加载以下包：
- en: '[PRE88]'
  id: totrans-334
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: Note
  id: totrans-335
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.3.2 (2016-10-31)'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页代码在 R 版本 3.3.2（2016-10-31）上进行了测试
- en: 'Let''s explore the data and understand the relationships among the variables.
    We''ll begin by importing the TXT data file named `epic_recipes.txt`. We will
    be saving the data to the `datafile` frame:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索数据并了解变量之间的关系。我们将首先导入名为 `epic_recipes.txt` 的 TXT 数据文件。我们将数据保存到 `datafile`
    数据框中：
- en: '[PRE89]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Reading a file in table format and creating a data frame from it. `datafile`
    is the file name, which is passed as an input:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 从表格格式文件中读取文件并创建数据框。`datafile` 是文件名，作为输入传递：
- en: '[PRE90]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: Step 3 - preparing data
  id: totrans-341
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 准备数据
- en: 'Splitting the data into subsets. `aggregate()` splits `recipes_data[,-1]` and
    computes summary statistics. `recipes_data[,-1]`list of grouping elements, each
    as long as the variables in the data frame. The result is then stored in the `agg`
    data frame:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据拆分为子集。`aggregate()` 函数将 `recipes_data[,-1]` 拆分并计算汇总统计信息。`recipes_data[,-1]`
    是一个分组元素列表，每个元素与数据框中的变量长度相同。结果存储在 `agg` 数据框中：
- en: '[PRE91]'
  id: totrans-343
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'Creating a vector, array, or list of values:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个向量、数组或值列表：
- en: '[PRE92]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Replacing all occurrence of patterns. `gsub()` as a function replaces each
    `,NA` with `""` after searching `agg$combined`:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 替换所有模式出现。`gsub()` 函数在搜索 `agg$combined` 后将每个 `,NA` 替换为 `""`：
- en: '[PRE93]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Extracting the names of all cuisines:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 提取所有菜系的名称：
- en: '[PRE94]'
  id: totrans-349
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Printing the cuisines data frame:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 打印菜系数据框：
- en: '[PRE95]'
  id: totrans-351
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'The result is as follows:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing data](img/image_04_048.jpg)'
  id: totrans-353
  prefs: []
  type: TYPE_IMG
  zh: '![第3步 - 准备数据](img/image_04_048.jpg)'
- en: 'Extracting the frequency of ingredients:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 提取成分的频率：
- en: '[PRE96]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'Normalizing the frequency of ingredients:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 标准化成分的频率：
- en: '[PRE97]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'List of 26 elements, one for each cuisine:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 包含26个元素，每个元素对应一种菜系：
- en: '[PRE98]'
  id: totrans-359
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'The `scale()` function centers and/or scales the columns of the `prop_matrix` matrix.
    The result is then stored in the `final_impdata` frame:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: '`scale()` 函数将 `prop_matrix` 矩阵的列进行居中和/或缩放。结果存储在 `final_impdata` 数据框中：'
- en: '[PRE99]'
  id: totrans-361
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'Creating heatmap. `final_imp` is the data frame passed as an input. `trace="none"` signifies
    the character string, indicating whether a solid `"trace"` line should be drawn
    across rows or down columns, `"both"` or `"none"`. The `key=TRUE` value represents
    that a color-key should be shown:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 创建热图。`final_imp` 是作为输入传递的数据框。`trace="none"` 表示字符串，指示是否在行或列上绘制实线 `"trace"`，`"both"`
    或 `"none"`。`key=TRUE` 值表示应显示颜色键：
- en: '[PRE100]'
  id: totrans-363
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'The result is as follows:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing data](img/image_04_049.jpg)'
  id: totrans-365
  prefs: []
  type: TYPE_IMG
  zh: '![第3步 - 准备数据](img/image_04_049.jpg)'
- en: Step 4 - applying principal components analysis
  id: totrans-366
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第4步 - 应用主成分分析
- en: 'Applying principle components analysis to data. `princomp()` performs principal
    components analysis on the `final_imp` datamatrix. The result is `pca_computation`,
    which is an object of class `princomp`:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 对数据进行主成分分析。`princomp()` 函数对 `final_imp` 数据矩阵执行主成分分析。结果是 `pca_computation`，它是一个
    `princomp` 类的对象：
- en: '[PRE101]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'Printing the `pca_computation` data frame:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `pca_computation` 数据框：
- en: '[PRE102]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'The result is as follows:'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - applying principal components analysis](img/image_04_050.jpg)'
  id: totrans-372
  prefs: []
  type: TYPE_IMG
  zh: '![第4步 - 应用主成分分析](img/image_04_050.jpg)'
- en: 'Producing a biplot. `pca_computation` is an object of class `princomp`. `pc.biplot=TRUE` means
    it is a principal component biplot:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 生成双变量图。`pca_computation` 是一个 `princomp` 类的对象。`pc.biplot=TRUE` 表示它是一个主成分双变量图：
- en: '[PRE103]'
  id: totrans-374
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The result is as follows:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - applying principal components analysis](img/image_04_051.jpg)'
  id: totrans-376
  prefs: []
  type: TYPE_IMG
  zh: '![第4步 - 应用主成分分析](img/image_04_051.jpg)'
