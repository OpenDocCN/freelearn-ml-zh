- en: Google Cloud Storage
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Storage
- en: In this chapter, we will explore two data storage services from the Google Cloud
    platform, Google Storage, for files, and Google SQL, for structured data. Google
    Storage is a file-hosting service that allows you to store files in the cloud.
    Quite simple and straightforward, it is very similar to the Amazon S3 service.
    To go beyond basic usage, we will look into some advanced subjects, such as signed-URLs,
    collaboration bucket settings, optimizing upload speeds, and transferring big
    datasets
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨来自Google Cloud平台的两项数据存储服务：用于文件的Google Storage和用于结构化数据的Google SQL。Google
    Storage是一种文件托管服务，允许您在云端存储文件。非常简单直接，它与Amazon S3服务非常相似。为了超越基本使用，我们将探讨一些高级主题，例如签名URL、协作存储桶设置、优化上传速度以及传输大型数据集。
- en: Google SQL is Google's simple SQL database service. Less developed at the moment
    than Amazon SQL services in terms of types of SQLs, it comes with MySQL as the
    main database. A beta version of Postgre is also available. We will look at the
    differences between the two in terms of respective functionalities.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Google SQL是Google的简单SQL数据库服务。在SQL类型方面，目前不如Amazon SQL服务发达。它提供MySQL作为主要数据库。PostgreSQL的beta版本也可用。我们将探讨两者在各自功能方面的差异。
- en: Making services talk to one another, or more precisely, allowing data transfers
    between different data stores and data consumers, is usually where the difficulty
    lies when using cloud-based solutions for data science projects.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用基于云的解决方案进行数据科学项目时，让服务相互通信，或者更确切地说，允许不同数据存储和数据消费者之间的数据传输，通常是困难所在。
- en: Issues such as volume, latency, and throughput can affect the speed of your
    scripts and the efficiency of your work. Setting the right level of permissions
    so that your data can be accessed within your project environment while still
    being protected from outside access is also key.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 诸如容量、延迟和吞吐量等问题可能会影响您脚本的运行速度和您工作的效率。设置适当的权限级别，以便您的数据可以在项目环境中访问，同时仍然受到外部访问的保护，这也是关键。
- en: 'In this chapter, you will learn:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，您将学习：
- en: How to store files on Google Storage with gsutil
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用gsutil在Google存储上存储文件
- en: How to create databases and seed them with data on Google SQL
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何在Google SQL上创建数据库并使用数据填充它们
- en: How to access your Google Storage files and your Google SQL database
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何访问您的Google存储文件和您的Google SQL数据库
- en: At the end of the chapter, you will be able to upload data and manage it using
    the services provided by the Google Cloud platform and understand the potential
    of Google Cloud SQL for the creation of relational database management systems.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，您将能够使用Google Cloud平台提供的服务上传数据并管理它，并了解Google Cloud SQL在创建关系型数据库管理系统方面的潜力。
- en: Google Cloud Storage
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Storage
- en: 'Cloud storage is a model for storing data on computers available on the network,
    where the data is stored on multiple servers, real and/or virtual, generally hosted
    at third-party facilities or on dedicated servers. Through this model, it is possible
    to access personal or business information, whether it be videos, music, photographs,
    databases, or files, without knowing the physical location of the data, from any
    part of the world with any suitable device. The advantages of this methodology
    are numerous: infinite capacity of memory space, payment only of the actual amount
    of memory used, files accessible from anywhere in the world, highly reduced maintenance,
    and greater security, as the files are protected from theft, fire, or damage that
    may occur on local computers.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 云存储是一种在网络上可用的计算机上存储数据的模型，其中数据存储在多个服务器上，真实或虚拟，通常托管在第三方设施或专用服务器上。通过这种模型，无论身在何处，使用任何合适的设备，都可以访问个人或商业信息，无论是视频、音乐、照片、数据库还是文件，而无需知道数据的物理位置。这种方法的优势众多：内存空间无限，只需支付实际使用的内存量，文件可以从世界任何地方访问，维护成本大幅降低，安全性更高，因为文件受到盗窃、火灾或本地计算机可能发生的损坏的保护。
- en: 'Google Cloud Storage is the Google proposal for Cloud storage: it''s a developer
    service provided by Google that allows you to save and manipulate data directly
    on Google''s infrastructure. In more detail, Google Cloud Storage provides a programming
    interface that makes use of simple HTTP requests to perform operations on its
    infrastructure. With Google Cloud Storage you can perform the following operations:
    uploading a file, downloading a file, deleting a file, obtaining a list of files,
    or obtaining the size of a given file. Each of these HTTP requests contains information
    about the method used and the resource to request. It follows that it becomes
    possible to create an application that, using these HTTP requests, provides a
    service in which applications save data remotely, generally via third-party servers.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud Storage是Google提出的云存储方案：它是由Google提供的一项开发者服务，允许您直接在Google的基础设施上保存和操作数据。更详细地说，Google
    Cloud Storage提供了一个编程接口，它使用简单的HTTP请求在其基础设施上执行操作。使用Google Cloud Storage，您可以执行以下操作：上传文件、下载文件、删除文件、获取文件列表或获取给定文件的大小。每个这些HTTP请求都包含有关使用的方法和请求的资源的信息。因此，可以创建一个应用程序，通过这些HTTP请求提供一项服务，在该服务中，应用程序可以远程保存数据，通常通过第三方服务器。
- en: 'The Google Storage platform is an enterprise storage solution that offers three
    levels of storage with different accessibility needs and associated pricing:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Google存储平台是一个企业存储解决方案，提供三种不同访问需求和相关定价的存储级别：
- en: Standard storage is for fast access to large amounts of data. At $0.026/GB,
    it offers a high speed of response to requests.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准存储用于快速访问大量数据。在$0.026/GB的价格下，它提供了对请求的高响应速度。
- en: '**Durable Reduced Availability** (**DRA**) is for long-term data storage and
    infrequent access. It is priced lower, at $0.02/GB.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**持久性降低可用性**（**DRA**）适用于长期数据存储和偶尔访问。它的价格较低，为$0.02/GB。'
- en: Finally, nearline storage is for even-less-frequent access. It is the cheapest
    version of the service, with much longer response time. It is the cheapest option,
    currently priced at $0.01/ GB.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，近线存储适用于更不频繁的访问。它是该服务的最便宜版本，响应时间更长。它是目前价格最低的选项，目前价格为$0.01/GB。
- en: Box–storage versus drive
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 盒式存储与驱动器
- en: Google Drive is used for storing personal files. It is free up to 15 GB across
    all your different personal services (email, photo, and so on). It offers further
    data storage volume for a monthly fee (for instance $9.99/month for 1 TB). But,
    compared to Google Storage, there is no data compression or data encryption. It
    is not offered by Google as an enterprise platform with associated features, support,
    and reliability. There are no advanced management features, such as metadata,
    and no data organization management through buckets. There are also no advanced
    storage tiers (cold versus hot data).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Google Drive用于存储个人文件。在所有不同的个人服务（如电子邮件、照片等）中，它提供高达15 GB的免费存储空间。它还提供每月付费的额外数据存储量（例如，每月9.99美元用于1
    TB）。但是，与Google Storage相比，没有数据压缩或数据加密。它不是由Google作为具有相关功能、支持和可靠性的企业平台提供的。没有高级管理功能，如元数据，也没有通过存储桶进行的数据组织管理。也没有高级存储层（冷数据与热数据）。
- en: 'The main features of the Google Drive service are as follows:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Google Drive服务的特点如下：
- en: There is no data storage based on tiers
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有基于层的数据存储
- en: It is not a commercial solution
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它不是一个商业解决方案
- en: It does not support advanced data management features
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它不支持高级数据管理功能
- en: The storage plan is limited to 30 TB
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储计划限制在30 TB
- en: 'To understand the potential offered by Google Cloud Storage, see the following:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解Google Cloud Storage提供的潜力，请参阅以下内容：
- en: It provides unlimited space
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它提供无限空间
- en: It has more security than Google Drive thanks to the use of OAuth
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于使用了OAuth，它比Google Drive具有更高的安全性
- en: It offers advanced storage levels
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它提供高级存储级别
- en: It provides REST API support for advanced integration of enterprise services
    and applications
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它为高级企业服务和应用程序的集成提供REST API支持
- en: It has the possibility to resume data transfer after an error
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它在出错后有可能恢复数据传输
- en: By analyzing only some of the features offered by Google Cloud Storage, it appears
    evident its superiority justifies the cost.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析Google Cloud Storage提供的一些功能，其优越性显而易见，这证明了其成本是合理的。
- en: Accessing control lists
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问控制列表
- en: The documentation says it best, **Access Control Lists** (**ACLs**) allow you
    to control who can read and write your data, and who can read and write the ACLs
    themselves.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 文档中说得最好，**访问控制列表**（**ACLs**）允许您控制谁可以读取和写入您的数据，以及谁可以读取和写入ACLs本身。
- en: If not specified at the time an object is uploaded (e.g., via the `gsutil cp
    -a` option),
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在对象上传时未指定（例如，通过`gsutil cp -a`选项），
- en: objects will be created with a default object ACL set on the bucket (see `gsutil
    help`
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 对象将使用存储桶上设置的默认对象ACL创建（参见`gsutil help`
- en: '`defacl` [https://cloud.Google.com/storage/docs/gsutil/commands/defacl](https://cloud.Google.com/storage/docs/gsutil/commands/defacl)).
    You can'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`defacl` [https://cloud.Google.com/storage/docs/gsutil/commands/defacl](https://cloud.Google.com/storage/docs/gsutil/commands/defacl)]。你可以'
- en: 'replace the ACL on an object or bucket using the gsutil acl set command, or
    modify the existing ACL using the `gsutil acl ch` command (see `gsutil help acl`:
    [https://](https://cloud.google.com/storage/docs/gsutil/commands/acl)[cloud.Google.com/storage/docs/gsutil/commands/acl](https://cloud.google.com/storage/docs/gsutil/commands/acl)).'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`gsutil acl set`命令替换对象或存储桶的访问控制列表（ACL），或使用`gsutil acl ch`命令修改现有的ACL（参见`gsutil
    help acl`：[https://](https://cloud.google.com/storage/docs/gsutil/commands/acl)[cloud.Google.com/storage/docs/gsutil/commands/acl](https://cloud.google.com/storage/docs/gsutil/commands/acl))）。
- en: ACL are assigned to objects (files) or buckets. By default all files in a bucket
    have the same
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ACL分配给对象（文件）或存储桶。默认情况下，存储桶中的所有文件都具有相同的
- en: ACL as the bucket they're in.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 与它们所在的存储桶相同的ACL。
- en: 'A couple of points to remember are:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 有几点需要注意：
- en: There is no write access for objects; attempting to set an ACL with write
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对象没有写访问权限；尝试设置带有写
- en: permission for an object will result in an error
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 权限将导致错误
- en: The object ACL is what determines read access independently of the bucket ACL
    read settings. (the folder permissions does not override the file access. )
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对象ACL决定了独立于存储桶ACL读取设置的读取访问权限。（文件夹权限不覆盖文件访问。）
- en: 'Several presets are available. The available canned ACLs are:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 可用几个预设。可用的预定义ACL有：
- en: '**Project-private:** Gives permission to the project team based on their roles.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项目私有**：根据其角色给予项目团队权限。'
- en: Anyone who is part of the team has read permission, and project owners and
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 团队中的任何人都拥有读取权限，以及项目所有者和
- en: project editors have owner permission. This is the default ACL for newly created
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 项目编辑者拥有所有者权限。这是新创建
- en: buckets. This is also the default ACL for newly created objects unless the default
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 存储桶。这也是新创建对象的默认ACL，除非默认
- en: object ACL for that bucket has been changed. For more details see gsutil help
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该存储桶的对象ACL已更改。有关更多详细信息，请参阅gsutil帮助
- en: projects.
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 项目。
- en: '**Private:** Gives the requester (and only the requester) owner permission
    for a'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**私有**：给予请求者（以及只有请求者）对对象的拥有者权限'
- en: bucket or object.
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 存储桶或对象。
- en: '**Public-read:** Gives all users (whether logged in or anonymous) read permission.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**公共读取**：给予所有用户（无论是否登录或匿名）读取权限。'
- en: When you apply this to an object, anyone on the internet can read the object
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当你将此应用于对象时，互联网上的任何人都可以读取该对象
- en: without authenticating.
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无需认证即可访问。
- en: '**Public-read-write:** Gives all users read and write permission. This ACL
    applies'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**公共读写**：给予所有用户读写权限。此ACL适用于'
- en: only to buckets. Setting a bucket to public-read-write will allow anyone on
    the
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 仅限于存储桶。将存储桶设置为公共读写将允许互联网上的任何人
- en: internet to upload anything to your bucket. You will be responsible for this
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 互联网上传任何内容到您的存储桶。您将对此负责
- en: content. There are other settings, check the doc.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 内容。还有其他设置，请查看文档。
- en: Access and management through the web console
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过Web控制台进行访问和管理
- en: In the previous sections, we introduced the service provided by the GCP. Now
    it's time to see how to access the service and how to manage it. To do this, Google
    has created a web-based interface for completely online service management and
    gsutil, a command-line tool that allows you to perform all the operations you
    need on the service.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们介绍了GCP提供的服务。现在，让我们看看如何访问该服务以及如何管理它。为此，Google创建了一个基于Web的界面，用于完全在线服务管理，以及gsutil，这是一个命令行工具，允许你在服务上执行所有需要的操作。
- en: gsutil
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: gsutil
- en: gsutil is the command-line tool, a subset of `gcloud` shell scripts, that allows
    you to manage buckets and objects (files) on Google Storage. The operations available
    via gsutil go from simple straightforward commands for creating buckets and moving
    files around, to management commands to manage settings, storage class, and permissions.
    More advanced commands include setting access control via ACLs, defining life
    cycle rules (delete all files after 1 year), logging, creating notifications,
    and troubleshooting with perfdiag.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '`gsutil` 是命令行工具，是 `gcloud` 脚本子集的一部分，允许您管理 Google Storage 上的存储桶和对象（文件）。通过 `gsutil`
    可用的操作从创建存储桶和移动文件等简单直接命令，到管理设置、存储类和权限的管理命令。更高级的命令包括通过 ACL 设置访问控制、定义生命周期规则（1 年后删除所有文件）、日志记录、创建通知和通过
    perfdiag 进行故障排除。'
- en: Let's start with the simple commands. We will create a bucket named `packt-gcp`,
    upload some files, get info on these files, move them around, and change the storage
    class.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从简单的命令开始。我们将创建一个名为 `packt-gcp` 的存储桶，上传一些文件，获取这些文件的信息，移动它们，并更改存储类。
- en: gsutil cheatsheet
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: gsutil 快速参考
- en: 'The following is a list of the most-used commands that we can issue via gsutil:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们可以通过 gsutil 发出的最常用命令列表：
- en: 'Creating a bucket named `packt-gcp`:'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建名为 `packt-gcp` 的存储桶：
- en: '`gsutil mb gs://packt-gcp`'
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil mb gs://packt-gcp`'
- en: 'Uploading a file to the bucket:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将文件上传到存储桶：
- en: '`gsutil cp gs://packt-gcp/`'
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil cp gs://packt-gcp/`'
- en: 'Creating a subfolder in the bucket:'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在存储桶中创建子目录：
- en: '`gsutil cp your-file gs://packt-gcp/`'
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil cp your-file gs://packt-gcp/`'
- en: 'Listing the folder:'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出文件夹：
- en: '`gsutil ls gs://packt-gcp/`'
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil ls gs://packt-gcp/`'
- en: 'Getting help on gsutil commands:'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取 gsutil 命令的帮助：
- en: '`gsutil help`'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil help`'
- en: 'How much storage are we using (the `-h` makes it readable):'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们使用了多少存储空间（`-h` 使其可读）：
- en: '`gsutil du -h gs://packt-gcp/`'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil du -h gs://packt-gcp/`'
- en: 'Copying a whole folder to a bucket:'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将整个文件夹复制到存储桶中：
- en: '`gsutil cp -r gs://packt-gcp/`'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil cp -r gs://packt-gcp/`'
- en: 'For instance, I have a local `./img` directory with some images. I can copy
    the whole directory and create the bucket subdirectory at the same time with the
    following command:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我有一个包含一些图片的本地 `./img` 目录。我可以使用以下命令复制整个目录并同时在存储桶中创建子目录：
- en: '[PRE0]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let''s analyze an option that is particularly useful: I refer to the `-m` flag.
    If you are performing a sequence of `gsutil` operations it may run significantly
    faster if you instead use `gsutil -m -o`, this means to run in parallel. This
    can significantly improve performance if you are performing operations on a large
    number of files over a reasonably fast network connection but may make performance
    worse if you are using a slower network.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们分析一个特别有用的选项：我指的是 `-m` 标志。如果您正在执行一系列 `gsutil` 操作，那么如果您使用 `gsutil -m -o`（这意味着并行运行），它可能会运行得更快。如果您在合理快速的网络连接上对大量文件执行操作，这可以显著提高性能，但如果您使用较慢的网络，可能会降低性能。
- en: 'The `-m` flag is particularly suited to the following commands: `ls`, `mb`,
    `mv`, `rb`, and `du`.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '`-m` 标志特别适合以下命令：`ls`、`mb`、`mv`、`rb` 和 `du`。'
- en: Advanced gsutil
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级 gsutil
- en: 'Previously, we have seen some simple basic commands that we can import using
    `gsutil`. But with this tool we can do something else:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，我们看到了一些简单的基本命令，我们可以使用 `gsutil` 导入。但使用这个工具，我们还可以做其他事情：
- en: '`gsutil` supports wildcards (and ?) and limits a wildcard to files. To include
    folders in the wildcard target double the sign: `gsutil ll gs:///**.txt` will
    list all the text files in subdirectories.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil` 支持通配符（和 ?）并将通配符限制在文件上。要包括文件夹在通配符目标中，请将符号加倍：`gsutil ll gs:///**.txt`
    将列出子目录中的所有文本文件。'
- en: '`gsutil` requires use of UTF-8 character encoding. For Windows: to use Unicode
    characters you need to run this command in the command shell before the first
    time you use `gsutil` in that shell: `chcp 65001`.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gsutil` 需要使用 UTF-8 字符编码。对于 Windows：要使用 Unicode 字符，您需要在第一次在该命令壳中使用 `gsutil`
    之前运行此命令：`chcp 65001`。'
- en: 'The `.boto` file in your local machine user path is the configuration file
    for the gsutil CLI. You can edit it directly or via the `gsutil``config` command.
    Some interesting parameters in the `.boto` file are as follows:'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您本地机器用户路径中的 `.boto` 文件是 gsutil CLI 的配置文件。您可以直接编辑它或通过 `gsutil config` 命令进行编辑。`.boto`
    文件中的一些有趣参数如下：
- en: '`parallel_composite_upload_threshold`: This is used to specify the maximum
    size of a file to be uploaded in a single stream. Files larger than this threshold
    will be uploaded in parallel. The `parallel_composite_upload_threshold` parameter
    is for the moment disabled by default.'
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`parallel_composite_upload_threshold`：此参数用于指定单个流中要上传的文件的最大大小。大于此阈值的文件将并行上传。`parallel_composite_upload_threshold`参数目前默认禁用。'
- en: '`check_hashes`: This is used to enforce integrity checks when downloading data,
    always, never, or conditionally.'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`check_hashes`：此参数用于在下载数据时执行完整性检查，始终、从不或条件性。'
- en: '`prefer_api`: This parameter value is JSON or XML.'
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prefer_api`：此参数值是JSON或XML。'
- en: '`aws_access_key_id`: This is used for interoperability with S3.'
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`aws_access_key_id`：此参数用于与S3的互操作性。'
- en: '`aws_secret_access_key`: This is used for interoperability with S3.'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`aws_secret_access_key`：此参数用于与S3的互操作性。'
- en: Signed URLs
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 签名URL
- en: Signed URLs is a mechanism for query string authentication for buckets and objects.
    Signed URLs provide a way to give time-limited read or write access to anyone
    in possession of the URL, regardless of whether they have a Google account.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 签名URL是用于桶和对象的查询字符串认证机制。签名URL提供了一种方式，无论持有人是否有Google账户，都可以给予时间有限的读取或写入访问权限。
- en: Why use a signed URL? Sometimes, it is necessary to control the access of users
    who do not have a Google account. To grant these users access to Google Cloud
    Storage we can provide them with a signed URL, which allows the user to read,
    write, or delete access to that resource for a limited period of time. Access
    to the resource is allowed to the owner of the URL until the URL expires.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么使用签名URL？有时，需要控制没有Google账户的用户访问权限。为了授予这些用户访问Google Cloud Storage的权限，我们可以向他们提供签名URL，这允许用户在有限的时间内对该资源进行读取、写入或删除访问。在URL过期之前，资源访问权限允许给URL的所有者。
- en: 'There are two ways to create a signed URL:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 创建签名URL有两种方式：
- en: Creating signed URLs with `gsutil`
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`gsutil`创建签名URL
- en: Creating signed URLs with a program.
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用程序创建签名URL。
- en: The easiest way to create a signed URL is to use the `gsutil signurl` command.
    To do this, you first need to generate a private key or use an existing private
    key. To create a private key you first have to create an OAuth client ID for a
    service account.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 创建签名URL最简单的方法是使用`gsutil signurl`命令。为此，您首先需要生成一个私钥或使用现有的私钥。要创建私钥，您首先需要为服务账户创建一个OAuth客户端ID。
- en: 'To create a new private key visit: [https://console.cloud.Google.com/apis/credentials?project=packt-gcp](https://console.cloud.google.com/apis/credentials?project=packt-gcp)'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的私钥，请访问：[https://console.cloud.Google.com/apis/credentials?project=packt-gcp](https://console.cloud.google.com/apis/credentials?project=packt-gcp)
- en: 'Follow the instructions and download the file. Two formats are available:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 按照说明操作并下载文件。有两种格式可供选择：
- en: '**JSON**: Required if you are using application default credentials in a production
    environment outside of Google Cloud platform'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**JSON**：在生产环境中使用应用默认凭证且不在Google Cloud平台之外时，此参数是必需的。'
- en: '**PKCS12**: Supported by many different programming languages and libraries'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PKCS12**：被许多不同的编程语言和库支持。'
- en: 'To restrict the role that can access GCP: Get JSON file downloaded to your
    computer.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 要限制可以访问GCP的角色：将JSON文件下载到您的计算机上。
- en: 'You can now create a signed URL for one of your files with `gsutil` via the
    following command:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以使用以下命令使用`gsutil`为您的文件之一创建签名URL：
- en: '[PRE1]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Remember, signed URLs do not work on directories. If you want to give access
    to multiple files you can use wildcards as follows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，签名URL在目录上不工作。如果您想给多个文件提供访问权限，可以使用通配符，如下所示：
- en: '[PRE2]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: But that will generate one signed URL per `.png` file in the `img/` folder.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 但这将为`img/`文件夹中的每个`.png`文件生成一个签名URL。
- en: Signed URLs can also be used to upload files (`-m PUT` and `POST`) and specify
    the content type with `-c text/plain` or `-c image/jpg`.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 签名URL也可以用于上传文件（`-m PUT` 和 `POST`），并使用 `-c text/plain` 或 `-c image/jpg` 指定内容类型。
- en: Creating a bucket in Google Cloud Storage
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Google Cloud Storage中创建存储桶
- en: As we said previously, a bucket is a container that holds your data. Everything
    saved in Google Storage must be contained within a bucket, corresponding to the
    folders. You can use them to organize and control access to data, but, unlike
    folders, you can not create sub-buckets. In Google Storage, individual data is
    saved in the form of objects. Such objects can be files of any type, extension,
    and size; tables created with BigQuery are also considered objects, as we will
    see in [Chapter 4](862553c5-4bb7-4a5c-b7bd-03f0eb8d413e.xhtml), *Querying Your
    Data with BigQuery*. All objects related to a single job must be contained in
    a bucket.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前所说的，存储桶是一个容器，用于存放您的数据。在Google Storage中保存的所有内容都必须包含在存储桶中，对应于文件夹。您可以使用它们来组织和控制对数据的访问，但与文件夹不同，您不能创建子存储桶。在Google
    Storage中，单个数据以对象的形式保存。这样的对象可以是任何类型、扩展和尺寸的文件；使用BigQuery创建的表也被视为对象，正如我们将在[第4章](862553c5-4bb7-4a5c-b7bd-03f0eb8d413e.xhtml)中看到的，*使用BigQuery查询您的数据*。与单个作业相关的所有对象都必须包含在存储桶中。
- en: Objects are immutable, so an object cannot be edited directly in Google Storage.
    It is important to specify that it is not possible to make any kind of changes
    to the content of an object; if you want to modify an object stored in Google
    Storage it can only be replaced. In case you do not want to delete it and reload
    it, you can do the same thing with just one operation, by overwriting it.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 对象是不可变的，因此不能直接在Google Storage中编辑对象。重要的是要说明，不可能对对象的任何内容进行任何更改；如果您想修改存储在Google
    Storage中的对象，它只能被替换。如果您不想删除它并重新加载它，您可以通过覆盖它来执行相同的操作，只需一个操作即可。
- en: Google Storage namespace
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Storage命名空间
- en: Google Storage uses a hierarchical structure to store buckets and objects. All
    buckets are in this one environment, and all objects are also inside a hierarchy
    within a certain bucket. Based on this hierarchical structure, a bucket name has
    to be unique across all the existing Google Storage buckets. Each bucket name
    must be unique across the entire Cloud storage namespace.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: Google Storage使用分层结构来存储存储桶和对象。所有的存储桶都位于这个单一的环境中，而所有的对象也都在某个存储桶内的层次结构中。基于这种分层结构，存储桶名称在整个现有的Google
    Storage存储桶中必须是唯一的。每个存储桶名称在整个云存储命名空间中都必须是唯一的。
- en: To name a bucket, we cannot use a name that has already been chosen by another
    user. While objects must have a unique name only within a given bucket, we can
    therefore have multiple buckets that always contain an object with the same name.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 给存储桶命名时，我们不能使用已被其他用户选中的名称。虽然对象必须在给定的存储桶内具有唯一名称，但因此我们可以有多个存储桶，这些存储桶始终包含具有相同名称的对象。
- en: Naming a bucket
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储桶命名
- en: 'To name a bucket, we have to follow some rules imposed by the fact; as we anticipated,
    all the buckets reside in the only Google Storage namespace. Bucket names must
    comply with the following rules:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 给存储桶命名时，我们必须遵循由事实强加的一些规则；正如我们预期的，所有的存储桶都位于唯一的Google Storage命名空间中。存储桶名称必须遵守以下规则：
- en: They must be 3 to 63 characters long
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们的长度必须是3到63个字符
- en: They must start and end with a number or a letter
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们必须以数字或字母开头和结尾
- en: They must contain only lowercase letters, numbers, dots, and dashes
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们必须只包含小写字母、数字、点和破折号
- en: They cannot be represented as an IP address in dotted decimal notation
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不能表示为点分十进制格式的IP地址
- en: They cannot start with the prefix GOOG
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不能以GOOG前缀开头
- en: They cannot contain two adjacent points or a dash before or after a point
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不能包含两个相邻的点或点前后的破折号
- en: Finally, it should be noted that once you have created the name of a bucket,
    you cannot change it. To change it, you should create a new bucket with the desired
    name and move the contents from the old bucket to the new bucket.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，应该注意的是，一旦您创建了存储桶的名称，您就不能更改它。要更改它，您应该创建一个新的存储桶，并使用所需的名称，然后将旧存储桶的内容移动到新存储桶中。
- en: Naming an object
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对象命名
- en: 'In Google Storage, individual data is saved in the form of objects. Object
    names must comply with the following rules:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在Google Storage中，单个数据以对象的形式保存。对象名称必须遵守以下规则：
- en: They can contain any sequence of valid Unicode characters, of length 1-1,024
    bytes when UTF-8 encoded
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们可以包含任何有效的Unicode字符序列，当以UTF-8编码时，长度为1-1,024字节
- en: They cannot contain carriage return or line feed characters
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不能包含回车或换行符
- en: They cannot start with well-known/acme-challenge
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不能以知名/acme-challenge开头
- en: To eliminate the limitations given by the flat hierarchy, we can use the slash
    (`/`) character in the object names. For example, if we have to use the same name
    for two different objects we could name an object `/NewYork/Stadium.jpg` and another
    `/Boston/Stadium.jpg`. In this way it is possible to organize the objects as if
    they were inside directories and manage them as such. In fact, Google Storage
    sees objects as independent objects that have no hierarchical relationship.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 为了消除扁平层次结构带来的限制，我们可以在对象名称中使用斜杠（`/`）字符。例如，如果我们必须为两个不同的对象使用相同的名称，我们可以将一个对象命名为
    `/NewYork/Stadium.jpg`，另一个命名为 `/Boston/Stadium.jpg`。这样就可以像在目录内一样组织对象，并按此方式管理它们。实际上，Google
    Storage 将对象视为独立的对象，它们之间没有层次关系。
- en: Creating a bucket
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建存储桶
- en: 'To operate in Google Cloud Storage we can use two tools: console and gsutil.
    The first tool makes use of typical graphic interfaces, while the second uses
    command-line windows.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Google Cloud Storage 中操作，我们可以使用两个工具：控制台和 gsutil。第一个工具使用典型的图形界面，而第二个使用命令行窗口。
- en: Google Cloud Storage console
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Storage 控制台
- en: 'To start with, we will see how to create a bucket using the Google Cloud Storage
    console. First, when we access it, we can get to that console starting from the
    main Google Cloud Platform by clicking on the left in the Resources section on
    the entry Cloud Storage. The following window will be open:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将了解如何使用 Google Cloud Storage 控制台创建存储桶。首先，当我们访问它时，我们可以通过在主 Google Cloud
    Platform 的资源部分左侧点击进入 Cloud Storage，从而进入该控制台。以下窗口将会打开：
- en: '![](img/f6636d32-3b36-4bee-9fe0-fcbd1f337a42.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f6636d32-3b36-4bee-9fe0-fcbd1f337a42.png)'
- en: 'In the window that opens, all the buckets related to the account are present.
    For each of them, there are the following features:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在打开的窗口中，所有与账户相关的存储桶都会列出。对于每一个，都有以下特性：
- en: '**Name**: Bucket name.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：存储桶名称。'
- en: '**Default storage class**: Storage class assigned by default to the objects
    added to a bucket.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**默认存储类**：默认分配给存储桶中添加的对象的存储类。'
- en: '**Location**: Place where data is stored.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**：数据存储的位置。'
- en: '**Lifecycle**: Allows you to set rules for automatically deleting objects or
    downgrading their storage class.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生命周期**：允许您设置自动删除对象或降低其存储类别的规则。'
- en: '**Labels**: Help organize your buckets. Labels are also included in your bill,
    so you can see the distribution of costs across your labels.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签**：帮助组织您的存储桶。标签也会包含在您的账单中，因此您可以看到标签间成本分布。'
- en: '**Requester pays**: If On, requests for the bucket''s data will be billed to
    the requester''s project.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**请求者付费**：如果开启，对存储桶数据的请求将计费到请求者的项目中。'
- en: 'To create a new bucket, simply click on the CREATE BUCKET button at the top
    of the Google Cloud Storage browser. The following page is opened:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个新的存储桶，只需在 Google Cloud Storage 浏览器顶部点击 CREATE BUCKET 按钮。随后会打开以下页面：
- en: '![](img/45b5f24a-6b35-471b-a591-a999a215a242.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/45b5f24a-6b35-471b-a591-a999a215a242.png)'
- en: 'On the page that opens, you need to specify the following information:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在打开的页面上，您需要指定以下信息：
- en: '**Name**: Remember, it must be unique across Cloud Storage'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：记住，它必须在 Cloud Storage 中是唯一的'
- en: '**Default storage class**: Four options are available: Multi-Regional, Regional,
    Nearline, and Coldline'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**默认存储类**：有四种选项可供选择：多区域、区域、近线和冷线'
- en: '**Location**: This drop-down menu allows us to choose the location'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**：此下拉菜单允许我们选择位置'
- en: After making these choices, just click on the CREATE button and a new bucket
    will be added to the Google Cloud Storage browser.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在做出这些选择后，只需点击 CREATE 按钮，就会在 Google Cloud Storage 浏览器中添加一个新的存储桶。
- en: 'Now we have the container, it is time to enrich it with contents. To do this,
    we must first access the simple bucket by clicking on its name. The following
    page is opened:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了容器，是时候用内容来丰富它了。为此，我们首先需要通过点击其名称来访问简单的存储桶。以下页面将会打开：
- en: '![](img/e3cb3512-7378-4241-a2e4-298519b86f70.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e3cb3512-7378-4241-a2e4-298519b86f70.png)'
- en: 'On the page that opens, all the contents of the buckets is listed. For each
    object, a series of information is proposed:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在打开的页面上，所有存储桶的内容都会列出。对于每个对象，都会提供一系列信息：
- en: '**Name**: Object name'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：对象名称'
- en: '**Size**: Object dimension'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大小**：对象尺寸'
- en: '**Type**: Object type'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**：对象类型'
- en: '**Storage class**: Storage class assigned to the objects added to a bucket'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储类**：分配给存储桶中添加的对象的存储类'
- en: '**Last modified**: Date of last modification of the object'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最后修改**：对象的最后修改日期'
- en: 'To add another object to the bucket:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 要将另一个对象添加到存储桶中：
- en: Simply click on the UPLOAD FILES button at the top of the Google Cloud Storage
    browser. A dialog window is opened.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 简单地单击Google Cloud Storage浏览器顶部的“上传文件”按钮。将打开一个对话框窗口。
- en: In the dialog window, select the file or folder you want to upload to your bucket.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对话框窗口中，选择您想要上传到存储桶的文件或文件夹。
- en: Click Open.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击打开。
- en: If we use Chrome as a browser it is possible to perform folder uploads. This
    way, we can load the entire contents of a folder into a bucket. Otherwise, we
    can first create a folder, using the CREATE FOLDER button and then upload all
    the objects individually.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用Chrome作为浏览器，则可以进行文件夹上传。这样，我们可以将整个文件夹的内容加载到存储桶中。否则，我们可以首先使用“创建文件夹”按钮创建一个文件夹，然后单独上传所有对象。
- en: 'To rename, copy, and move objects simply click the more options button (three
    vertical dots) associated with the object. A context menu is opened. In it we
    will be able to carry out the following operations:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 要重命名、复制和移动对象，只需单击与对象关联的更多选项按钮（三个垂直点）。将打开一个上下文菜单。在其中我们可以执行以下操作：
- en: Edit permissions
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑权限
- en: Edit metadata
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑元数据
- en: Copy
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复制
- en: Move
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动
- en: Rename
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重命名
- en: For each option, a relative window will be opened that will guide us in the
    operation.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个选项，都会打开一个相对窗口，它将指导我们进行操作。
- en: Google Cloud Storage gsutil
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud Storage gsutil
- en: We have seen that using the Google Cloud Storage browser is simple and intuitive.
    But in some cases it is necessary to operate through a command window. In such
    cases, as we have seen in previous sections, we can use `gsutil`. Previously,
    we had already seen a series of commands via `gsutil`.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到，使用Google Cloud Storage浏览器简单直观。但在某些情况下，有必要通过命令窗口进行操作。在这种情况下，正如我们在前面的章节中看到的，我们可以使用`gsutil`。之前，我们已经通过`gsutil`看到了一系列命令。
- en: 'To create a bucket using `gsutil`, use the `mb` command. For example, use the
    following command:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用`gsutil`创建存储桶，请使用`mb`命令。例如，使用以下命令：
- en: '[PRE3]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This creates a bucket named `NameBucket1`. It is important to remember that
    bucket names must be unique within the entire Google Storage namespace. If another
    user has already created a bucket with the name we want to use, we must choose
    another name.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 这将创建一个名为`NameBucket1`的存储桶。重要的是要记住，存储桶名称必须在整个Google Storage命名空间内是唯一的。如果其他用户已经创建了一个我们想要使用的名称的存储桶，我们必须选择另一个名称。
- en: 'Once the buckets are created, we can import the objects within them. With the
    `cp` command, we can copy files from our computer to Google Storage:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦创建了存储桶，我们就可以导入其中的对象。使用`cp`命令，我们可以将文件从我们的计算机复制到Google Storage：
- en: '[PRE4]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This copies the image `figure.jpg` from the folder in which we are positioned
    with the shell in the bucket `NameBucket1` renaming the object in `fig.jpg`.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 这将把图像`figure.jpg`从我们在shell中定位的文件夹复制到`NameBucket1`存储桶中，并将对象重命名为`fig.jpg`。
- en: To list our buckets or the objects contained in them you must use the `ls` command.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 要列出我们的存储桶或其中包含的对象，您必须使用`ls`命令。
- en: The `ls` command is used in Unix-like operating systems to display information
    about files and directories. If we open a terminal and type `ls`, we get the list
    of files and directories of the current directory.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '`ls`命令在类Unix操作系统中用于显示有关文件和目录的信息。如果我们打开一个终端并输入`ls`，我们将得到当前目录中文件和目录的列表。'
- en: 'The following command lists all the buckets we have created:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令列出了我们创建的所有存储桶：
- en: '[PRE5]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'While this command lists the objects contained in `NameBucket1`:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 当此命令列出`NameBucket1`中包含的对象时：
- en: '[PRE6]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'You can also use the `-L` option of the `ls` command to get more information
    about objects and buckets. The following command provides information about the
    size of objects, the date of the last modification, the data type, and the **Access
    Control Lists** (**ACL**) of all objects contained in the `NameBucket1` bucket:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用`ls`命令的`-L`选项来获取有关对象和存储桶的更多信息。以下命令提供了关于对象大小、最后修改日期、数据类型以及`NameBucket1`存储桶中包含的所有对象的**访问控制列表（ACL**）的信息：
- en: '[PRE7]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'While the following command provides information on our buckets, such as the
    number of objects contained, the total size, and the ACL of all our buckets:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 而以下命令提供了关于我们的存储桶的信息，例如包含的对象数量、总大小以及所有存储桶的ACL：
- en: '[PRE8]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Finally, to transfer an object from one bucket to another, use the `mv` command,
    this command can also be used to rename an object. For example, the following
    command transfers the image `figure.png` from the `NameBucket1` bucket to the
    `NameBucket2` bucket:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，要将对象从一个存储桶转移到另一个存储桶，请使用`mv`命令，此命令也可以用于重命名对象。例如，以下命令将图像`figure.png`从`NameBucket1`存储桶转移到`NameBucket2`存储桶：
- en: '[PRE9]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'While this command renames the image `figure.png` to `fig.png`:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 当此命令将图像`figure.png`重命名为`fig.png`时：
- en: '[PRE10]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Life cycle management
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生命周期管理
- en: With Google Cloud Storage, the life cycle management of objects becomes simple
    and immediate. The life cycle of an object is the time between the creation of
    an object and its destruction. The rules for the duration of the object vary significantly
    between the programming platforms. In the case of archived objects we refer to
    the time in which the object remains stored in the space assigned to it.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Google Cloud Storage，对象的生命周期管理变得简单直接。对象的生命周期是从对象创建到其被销毁的时间。对象持续时间的规则在编程平台之间差异很大。在归档对象的情况下，我们指的是对象存储在其分配空间中的时间。
- en: The life cycle of a bucket can be managed through its configuration. The configuration
    contains a set of rules that apply to all objects in the bucket. The action specified
    on the object is performed when the object meets the criteria of one of the rules.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 桶的生命周期可以通过其配置进行管理。配置包含一组应用于桶中所有对象的规则。当对象满足某个规则的准则时，就会执行对象上指定的操作。
- en: 'To enable life cycle for a bucket using the Google Cloud Console:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Google Cloud Console为桶启用生命周期：
- en: 'Go to Open the Google Cloud Platform Console and click on the Cloud Storage
    browser; the following window is opened:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往打开Google Cloud Platform控制台，并点击云存储浏览器；以下窗口将打开：
- en: '![](img/5bb12fd1-74a5-4a5a-831b-9ebce5c810ba.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5bb12fd1-74a5-4a5a-831b-9ebce5c810ba.png)'
- en: In this window, examine the **Lifecycle** column, choose the bucket, and click
    on the entry **None**; a new page is opened.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此窗口中，检查**生命周期**列，选择桶，并点击条目**无**；将打开一个新页面。
- en: In this window, click on Add Rule.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此窗口中，点击添加规则。
- en: In the page that opens, we can specify the configuration by selecting the conditions
    and the actions.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的页面中，我们可以通过选择条件和操作来指定配置。
- en: Finally, click on the Save button.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击保存按钮。
- en: A similar procedure can be performed to check the life cycle configuration set
    on a bucket, and to disable life cycle management for a bucket.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 可以执行类似的程序来检查在桶上设置的生命周期配置，以及禁用桶的生命周期管理。
- en: Google Cloud SQL
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud SQL
- en: 'Google Cloud SQL is a database service of the Google Cloud Platform that allows
    the creation, management, and administration of relational databases in the cloud
    for their applications. The service guarantees excellent performance and scalability
    thanks to the Google infrastructure on which the databases will be hosted. Like
    every service on the platform, the simplicity of use is fundamental: there is
    no need to install any software, make updates manually, or take care of backups
    and replications of their databases. The Google platform will take care of all
    of it and ensure an availability of 99.95%. The data is encrypted before being
    saved in the databases and in the backups, to guarantee the security of the infrastructure.'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud SQL是Google Cloud Platform的一个数据库服务，允许在云中为应用程序创建、管理和管理关系数据库。该服务得益于数据库将托管在其上的Google基础设施，保证了卓越的性能和可扩展性。与平台上的每个服务一样，使用的简便性是基础：无需安装任何软件，手动进行更新，或处理数据库的备份和复制。Google平台将负责所有这些，并确保99.95%的可用性。数据在保存到数据库和备份之前被加密，以保证基础设施的安全性。
- en: You can also set up a network firewall for each database instance to directly
    regulate access to the instances. The service can be used with any type of Cloud-based
    application or website that is compatible with MySQL or PostgreSQL, and the instances
    are easily accessible through the app engine, compute engine, and platform workstation.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以为每个数据库实例设置网络防火墙，以直接调节对实例的访问。该服务可以与任何兼容MySQL或PostgreSQL的基于云的应用程序或网站一起使用，实例可以通过应用引擎、计算引擎和平台工作站轻松访问。
- en: The cost of the service does not require any initial payment, but is calculated
    minute by minute for the entire duration of use and only the resources actually
    allocated will be charged. In the case of MySQL databases, the standard price
    range for a Cloud SQL instance is $0.0150 – $4.0240 per hour (up to 208 GB of
    RAM), while for storage space it goes from $ 0.08 per GB/month for backups, $
    0.09 per GB/month for HDD storage, and $ 0.17 GB/month for SSD storage. To these
    must be added the costs for the management of the network through the compute
    engine.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 服务的费用不需要任何初始支付，而是按分钟计算整个使用期间的费用，并且只对实际分配的资源收费。在MySQL数据库的情况下，Cloud SQL实例的标准价格范围是每小时$0.0150
    – $4.0240（最高可达208 GB的RAM），而对于存储空间，备份的价格为每GB/月$0.08，HDD存储的价格为每GB/月$0.09，SSD存储的价格为每GB/月$0.17。此外，还需要加上通过计算引擎管理网络的成本。
- en: Databases supported
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持的数据库
- en: 'With Google Cloud SQL, it is possible to create two types of relational databases:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Google Cloud SQL，可以创建两种类型的数据库：
- en: MySQL
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MySQL
- en: PostgreSQL
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PostgreSQL
- en: MySQL is an open source **relational database management system** (**RDMB**)
    available for free using **Structured Query Language** (**SQL**). SQL is the most
    popular language for adding, accessing, and managing content in a database. It
    is known for its rapid processing, proven reliability, ease, and flexibility of
    use. MySQL is an essential part of almost all open source PHP applications.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL是一个开源的**关系型数据库管理系统**（**RDBMS**），可以通过**结构化查询语言**（**SQL**）免费使用。SQL是用于在数据库中添加、访问和管理内容的最流行语言。它以其快速处理、可靠的可靠性、易用性和使用灵活性而闻名。MySQL几乎是所有开源PHP应用程序的必要组成部分。
- en: PostgreSQL is an advanced database system with a long history behind it. It
    is available for a wide range of platforms and is used in microscopic embedded
    systems as well as in huge multi-terabyte systems. PostgreSQL has earned an excellent
    reputation over the years for its innovative features, data integrity, security,
    and reliability.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: PostgreSQL是一个具有悠久历史的先进数据库系统。它在广泛的平台上可用，既用于微小的嵌入式系统，也用于巨大的多TB系统。多年来，PostgreSQL凭借其创新功能、数据完整性、安全性和可靠性赢得了卓越的声誉。
- en: PostgreSQL support is still in beta, so features such as replication or high
    availability are not available. The instances of the platform they support MySQL
    5.7 or PostgreSQL 9.6 databases in the cloud and allow for up to 208 GB of RAM,
    32 CPUs, and 10 TB of storage. The data, encrypted on Google networks and within
    tables and backups, are accessible from their applications created through the
    app engine (written in Java, Python, PHP, Node.js, Go, or Ruby), through clients
    MySQL/PostgreSQL using standard protocols, or even through external applications,
    with the possibility of using secure connection protocols, such as SSL.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: PostgreSQL支持目前仍处于测试阶段，因此复制或高可用性等特性不可用。它们支持的云平台实例支持MySQL 5.7或PostgreSQL 9.6数据库，并允许最高达到208
    GB的RAM、32个CPU和10 TB的存储。数据在Google网络上以及表和备份中加密，可以通过通过应用引擎（用Java、Python、PHP、Node.js、Go或Ruby编写）创建的应用程序访问，通过MySQL/PostgreSQL客户端使用标准协议，甚至可以通过外部应用程序访问，并可以使用如SSL等安全连接协议。
- en: In general, there are no noticeable differences between the functionality provided
    by the standard MySQL/PostgreSQL instances locally and those provided by the Cloud
    SQL instances. In particular, we remind you that it is impossible to create new
    functions in MySQL using the `CREATE FUNCTION` statement and the lack `SUPER`
    (MySQL) and `SUPERUSER` (PostgreSQL) privileges.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，标准MySQL/PostgreSQL实例在本地提供的功能与Cloud SQL实例提供的功能之间没有明显的差异。特别是，我们提醒您，使用`CREATE
    FUNCTION`语句在MySQL中创建新功能是不可能的，并且缺少`SUPER`（MySQL）和`SUPERUSER`（PostgreSQL）权限。
- en: Google Cloud SQL performance and scalability
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud SQL性能和可扩展性
- en: Cloud SQL offers excellent performance and scalability. As mentioned previously,
    the maximum storage capacity is 10 TB (to be distributed between HDD and SSD),
    while the maximum RAM that can be selected is 208 GB, and the maximum number of
    CPUs is 32\. Google also guarantees a maximum of 25,000 IOPS, that is, input/output
    operations per second. The possibility to choose such resources allows us therefore
    to use Cloud SQL for every type of application, from those with lower workloads
    to applications that require intense performance. There are no limits of **query
    per second** (**QPS**), but there are some limits regarding the connections. In
    fact, up to a maximum of 4,000 concurrent connections are possible in the case
    of second-generation MySQL instances, while for the other cases the limits are
    more stringent.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: Cloud SQL 提供卓越的性能和可扩展性。如前所述，最大存储容量为 10 TB（将在 HDD 和 SSD 之间分配），而可选择的最高 RAM 为 208
    GB，最大 CPU 数量为 32。Google 还保证最大 IOPS（每秒输入/输出操作）为 25,000，即每秒可以进行 25,000 次输入/输出操作。因此，选择这样的资源使我们能够使用
    Cloud SQL 来满足各种类型的应用需求，从负载较低的应用到需要强大性能的应用。**每秒查询数**（QPS）没有限制，但有关连接有一些限制。实际上，在第二代
    MySQL 实例的情况下，最多可以支持 4,000 个并发连接，而其他情况下的限制则更为严格。
- en: For first-generation MySQL databases only, where incoming requests are briefly
    queuing before establishing a connection, there is a limit of 100 queued connections
    at the same time. The databases are also easily scalable both vertically, increasing
    or reducing the available resources (storage space, CPU, and RAM), and horizontally
    increasing the number of servers and instances that work simultaneously. Once
    you have created your instance, you can change the resources allocated for it
    directly from the console. In general, the changes are applied immediately, but
    the restart of the instance will close the existing connections and will need
    a few moments (in the case of first-generation MySQL) or a few minutes (second
    generation) to get back online.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一代 MySQL 数据库，只有在建立连接之前，传入请求会短暂排队，此时同时存在的排队连接数限制为 100。数据库也易于垂直扩展，增加或减少可用资源（存储空间、CPU
    和 RAM），以及水平扩展同时工作的服务器和实例数量。一旦创建了实例，您可以直接从控制台更改为其分配的资源。通常，更改会立即生效，但实例的重启将关闭现有连接，并需要几秒钟（在第一代
    MySQL 的情况下）或几分钟（在第二代的情况下）才能重新上线。
- en: Google Cloud SQL security and architecture
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Cloud SQL 的安全性和架构
- en: 'Regarding security, the data available on Cloud SQL is encrypted within the
    tables, in temporary files, in backup copies, and during the movements within
    the Google infrastructure from one server to another using secure network protocols.
    The platform infrastructure is therefore designed to ensure the security of its
    data at every stage of information management. No action is required by the user:
    the data is automatically encrypted by the platform through the compute engine,
    so all the services provided by it will comply with these requirements.'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 关于安全性，Cloud SQL 上的数据在表中、临时文件中、备份副本中以及在 Google 基础设施内从一台服务器到另一台服务器使用安全网络协议移动时都进行了加密。因此，平台基础设施旨在确保在信息管理的每个阶段都保证其数据的安全性。用户无需采取任何行动：平台通过计算引擎自动加密数据，因此它提供的所有服务都将符合这些要求。
- en: From a design point of view, the security of the infrastructure on a global
    scale is organized according to a layered architecture. This architecture allows
    the safe use of services, data, and communications between services, users, and
    administrators.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 从设计角度来看，全球范围内的基础设施安全性是按照分层架构组织的。这种架构允许安全地使用服务、数据和用户、管理员之间的通信。
- en: 'Starting from the lowest level, that is, hardware, we have data centers that
    Google designs and builds autonomously, accessible only to a small number of employees
    and monitored by equipment such as metal detectors, video cameras, or biometric
    identification technologies. Individual data centers are made up of multiple servers
    connected to a single local network: it is always up to Google to verify that
    the components, designed by themselves, and their suppliers meet the company''s
    security standards. The individual server machines, individually identified to
    be easily traceable, are controlled by digital signatures on each individual low-level
    component and validated at each start-up.'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 从最底层开始，即硬件层面，我们拥有谷歌自主设计和建设的数据中心，仅对少数员工开放，并由金属探测器、摄像头或生物识别技术等设备进行监控。单个数据中心由多个连接到单个本地网络的服务器组成：始终由谷歌负责验证其自行设计和供应商提供的组件是否符合公司的安全标准。单个服务器机器，通过数字签名在各个低级组件上进行单独标识，以便易于追踪，并在每次启动时进行验证。
- en: Moving to the software level, every application written and made to run on the
    platform is run in multiple copies on multiple machines to use the necessary amount
    of resources for each workload. The software architecture is multi-tenant, in
    which a single instance of a software runs on a server and serves more tenants
    (that is, users who share access to the instance). It will be the task of the
    application to provide to each tenant a dedicated part of the instance. The concept
    is diametrically opposed to that of the multi-instance architecture, where there
    are several instances of software each dedicated to the single client.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 转到软件层面，每个编写并用于在平台上运行的应用程序都会在多台机器上以多个副本运行，以使用每个工作负载所需的资源量。软件架构是多租户的，其中软件的单个实例运行在服务器上，并为多个租户（即共享实例访问权限的用户）提供服务。应用程序的任务是为每个租户提供实例的专用部分。这一概念与多实例架构截然相反，在多实例架构中，有多个软件实例，每个实例都专门为单个客户端服务。
- en: Creating Google Cloud SQL instances
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Google Cloud SQL 实例
- en: A Google Cloud SQL instance is a set of memory structures that manage database
    files. The instance manages its associated data and serves the users of the database.
    Every running Google Cloud SQL database is associated with at least one database
    instance.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud SQL 实例是一组管理数据库文件的记忆结构。实例管理其关联的数据并为数据库用户提供服务。每个运行的 Google Cloud
    SQL 数据库都至少关联到一个数据库实例。
- en: Cloud SQL instances are fully managed, relational MySQL and PostgreSQL databases.
    Google handles replication, patch management, and database management to ensure
    availability and performance. When you create an instance, choose a size and billing
    plan to fit your application.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: Cloud SQL 实例是完全管理的，关系型 MySQL 和 PostgreSQL 数据库。谷歌负责复制、补丁管理和数据库管理，以确保可用性和性能。创建实例时，请选择适合您应用程序的大小和计费计划。
- en: 'To create a Google Cloud SQL instance:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建 Google Cloud SQL 实例：
- en: 'Go to the Google Cloud SQL instances page at the following URL: [https://console.cloud.google.com/sql/instances](https://console.cloud.google.com/sql/instances).'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请访问以下网址查看 Google Cloud SQL 实例页面：[https://console.cloud.google.com/sql/instances](https://console.cloud.google.com/sql/instances).
- en: Click on the create instance button at the middle of the page. A guided sequence
    will lead us to create the instance.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击页面中间的创建实例按钮。一个引导序列将引导我们创建实例。
- en: 'Choose the database type; two options are available: MySQL and PostgreSQL (MySQL
    is the default choice). After making your choice, click on the next button.'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择数据库类型；有两个选项可供选择：MySQL 和 PostgreSQL（MySQL 是默认选择）。做出选择后，点击下一步按钮。
- en: 'Choose a MySQL instance type; two options are available: MySQL Second Generation
    (recommended) and MySQL First Generation. MySQL Second Generation offers high
    performance, high storage capacity, and low cost. MySQL First Generation is the
    older version of Cloud SQL, providing basic performance and storage capacity.
    To make your choice, click on the Choose Second/First Generation button.'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 MySQL 实例类型；有两个选项可供选择：MySQL 第二代（推荐）和 MySQL 第一代。MySQL 第二代提供高性能、高存储容量和低成本。MySQL
    第一代是 Cloud SQL 的较旧版本，提供基本性能和存储容量。要做出选择，请点击选择第二/第一代按钮。
- en: 'A new page is opened. In this page, a set of choices must be made, as shown
    in the following screenshot:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 新页面被打开。在这个页面上，必须做出一系列选择，如下面的截图所示：
- en: '![](img/fcdd0720-2204-4dbf-8443-b14e15f57e27.png)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/fcdd0720-2204-4dbf-8443-b14e15f57e27.png)'
- en: The first choice concerns the name of the instance. This is a name visible from
    the outside so it is advisable not to include sensitive or personally identifiable
    information in that name. Furthermore, it is not necessary to include the project
    ID in the instance name; if necessary, it is added automatically.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 首先的选择涉及实例的名称。这是一个从外部可见的名称，因此建议不要在该名称中包含敏感或个人信息。此外，在实例名称中包含项目ID也不是必要的；如果需要，它将自动添加。
- en: Set the password for the `'root'@'%'` user.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置`'root'@'%'`用户的密码。
- en: Set the region.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置区域。
- en: Set configuration options.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置配置选项。
- en: Finally, click on the `Create` button.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击“创建”按钮。
- en: In this way, a new instance will have been created.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，一个新的实例就已经创建好了。
- en: Summary
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we have discovered two additional services offered by Google
    Cloud Platform: Google Cloud Storage, and Google Cloud SQL. Google Cloud Storage
    is a file hosting service that lets you store files in the cloud. We have seen
    how to store videos, music, photographs, databases or files, without knowing the
    physical location of data, from anywhere in the world, with any suitable device.
    We have performed the file uploading operations either using the browser or using
    the command line.'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们发现了Google Cloud Platform提供的两项额外服务：Google Cloud Storage和Google Cloud SQL。Google
    Cloud Storage是一个文件托管服务，允许您在云端存储文件。我们看到了如何存储视频、音乐、照片、数据库或文件，而无需知道数据的物理位置，无论在世界上的任何地方，使用任何合适的设备。我们通过浏览器或命令行执行了文件上传操作。
- en: Afterward, we understood the potential of Google Cloud SQL for the creation
    of a relational database management system. Using Google Cloud SQL you can create,
    manage and administer relational databases. At first we discovered the characteristics
    of the service and later we learned to create a new database instance through
    a practical example.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，我们了解了Google Cloud SQL在创建关系型数据库管理系统方面的潜力。使用Google Cloud SQL，您可以创建、管理和管理关系型数据库。最初我们发现了该服务的特点，后来通过一个实际示例学习了如何创建新的数据库实例。
