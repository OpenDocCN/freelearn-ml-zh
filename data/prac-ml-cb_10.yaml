- en: Chapter 10. Neural Networks
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章 神经网络
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下内容：
- en: Modeling S&P 500
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模拟标准普尔500
- en: Measuring the unemployment rate
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量失业率
- en: Introduction
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: '**Neural networks**: A neural network is a sorted triple ![Introduction](img/image_10_001.jpg)
    where ![Introduction](img/image_10_002.jpg) is the set of a neuron, and ![Introduction](img/image_10_003.jpg)
    is a set ![Introduction](img/image_10_004.jpg) whose elements are called connections
    between neuron ![Introduction](img/image_10_005.jpg) and neuron ![Introduction](img/image_10_006.jpg)The
    function ![Introduction](img/image_10_007.jpg) defines the weights, where ![Introduction](img/image_10_008.jpg)
    is the weight of the connection between neuron ![Introduction](img/image_10_009.jpg)
    and neuron ![Introduction](img/image_10_010.jpg). Data is transferred between
    neurons via connections, with the connecting weight being either excitatory or
    inhibitory.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '**神经网络**：神经网络是一个有序的三元组 ![简介](img/image_10_001.jpg)，其中 ![简介](img/image_10_002.jpg)
    是神经元的集合，![简介](img/image_10_003.jpg) 是一个集合 ![简介](img/image_10_004.jpg)，其元素被称为神经元
    ![简介](img/image_10_005.jpg) 和神经元 ![简介](img/image_10_006.jpg) 之间的连接。函数 ![简介](img/image_10_007.jpg)
    定义了权重，其中 ![简介](img/image_10_008.jpg) 是神经元 ![简介](img/image_10_009.jpg) 和神经元 ![简介](img/image_10_010.jpg)
    之间连接的权重。数据通过连接在神经元之间传输，连接权重可以是兴奋的或抑制的。'
- en: Modelling SP 500
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模拟标准普尔500
- en: The value of the stocks of the 500 largest corporations by market capitalization
    listed on the New York Stock Exchange or Nasdaq Composite is measured by the S&P
    500\. Standard & Poor's provides a quick look at the movement of the stock market
    and economy on the basis of stock prices. The S&P 500 index is the most popular
    measure used by the financial media and professionals. The S&P 500 index is calculated
    by taking the sum of the adjusted market capitalization of all S&P 500 stocks
    and then dividing it with an index divisor developed by Standard & Poor's. The
    divisor is adjusted when there are stock splits, special dividends, or spinoffs
    that could affect the value of the index. The divisor ensures that these non-economic
    factors do not affect the index.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 根据市值，纽约证券交易所或纳斯达克综合指数上市的500家最大公司的股票市值是通过标准普尔500指数来衡量的。标准普尔提供了一种基于股票价格的市场和经济走势的快速观察。标准普尔500指数是金融媒体和专业人士最常用的衡量指标。标准普尔500指数是通过将所有标准普尔500股票的调整市值相加，然后除以标准普尔开发的指数除数来计算的。当出现股票分割、特殊股息或分拆等可能影响指数价值的情况时，除数会进行调整。除数确保这些非经济因素不会影响指数。
- en: Getting ready
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to model the S&P 500 index using neural networks, we shall be using
    a dataset collected from the `GSPC` dataset.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用神经网络来模拟标准普尔500指数，我们将使用从 `GSPC` 数据集收集的数据集。
- en: Step 1 - collecting and describing data
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 - 收集和描述数据
- en: The dataset to be used is the `GSPC` daily closing stock value between January
    1, 2009 and January 1, 2014\. This dataset is freely available on [https://www.yahoo.com/](https://www.yahoo.com/),
    from which we shall be downloading the data.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用的数据集是2009年1月1日至2014年1月1日之间的 `GSPC` 每日收盘股票价值。这个数据集在 [https://www.yahoo.com/](https://www.yahoo.com/)
    上免费提供，我们将从那里下载数据。
- en: How to do it...
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let's get into the details.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解细节。
- en: Step 2 - exploring data
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 探索数据
- en: 'First, the following packages need to be loaded:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，需要加载以下包：
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Let's download the data. We will begin by marking the start and the end dates
    for the desired time period.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们下载数据。我们将首先标记所需时间段的开始和结束日期。
- en: The `as.Date()` function is used to convert the character representation and
    objects of the `Date` class, which represents calendar dates.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '`as.Date()` 函数用于将字符表示和 `Date` 类对象转换为日历日期。'
- en: 'The start date for the dataset is stored in `startDate`, which represents a character
    vector representation of the calendar date. The format for this representation
    is YYYY-MM-DD:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集的开始日期存储在 `startDate` 中，它代表日历日期的字符向量表示。这种表示的格式是 YYYY-MM-DD：
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The end date for the dataset is stored in `endDate`, which represents the character
    vector representation of the calendar date. The format for this representation
    is YYYY-MM-DD:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集的结束日期存储在 `endDate` 中，它代表日历日期的字符向量表示。这种表示的格式是 YYYY-MM-DD：
- en: '[PRE2]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Loading the data using the `getSymbols()` function: The function loads data
    from multiple sources, either local or remote. `GSPC` is the character vector
    that specifies the name of the symbol to be loaded. `src = yahoo` specifies the
    sourcing method:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`getSymbols()`函数加载数据：该函数从多个来源加载数据，无论是本地还是远程。`GSPC`是字符向量，指定要加载的符号名称。`src =
    yahoo`指定了数据来源方法：
- en: '[PRE3]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![Step 2 - exploring data](img/image_10_011.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 2 - 探索数据](img/image_10_011.jpg)'
- en: Step 3 - calculating the indicators
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 3 - 计算指标
- en: 'Calculating the relative strength index: This is a ratio between the recent
    upward price movements and the absolute price movement. The `RSI()` function is
    used to calculate the **Relative Strength Index**. The `GSPC` data frame is used
    as a price series. `n = 3` represents the number of periods for moving averages.
    The result is then stored in the `relativeStrengthIndex3` data frame:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 计算相对强弱指数：这是最近上升价格变动与绝对价格变动的比率。使用`RSI()`函数计算**相对强弱指数**。`GSPC`数据框用作价格序列。`n = 3`代表移动平均的周期数。结果存储在`relativeStrengthIndex3`数据框中：
- en: '[PRE4]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Exploring the summary of the change in prices: The `summary()` function is
    used for this. The function provides a range of descriptive statistics to produce
    result summaries of the `relativeStrengthIndex3` data frame:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 探索价格变化的总结：为此使用`summary()`函数。该函数提供一系列描述性统计，以生成`relativeStrengthIndex3`数据框的结果摘要：
- en: '[PRE5]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The result is as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_012.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_012.jpg)'
- en: 'The `EMA()` function uses the `GSPC` symbol as a price series. `n = 5` represents
    the time period to average over. The result is then stored in the `exponentialMovingAverage5`
    data frame:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '`EMA()`函数使用`GSPC`符号作为价格序列。`n = 5`代表平均的时间周期。结果存储在`exponentialMovingAverage5`数据框中：'
- en: '[PRE6]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Printing the `exponentialMovingAverage5` data frame: The `head()` function
    returns the first part of the `exponentialMovingAverage5` data frame. The `exponentialMovingAverage5`
    data frame is passed as an input parameter:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 打印`exponentialMovingAverage5`数据框：`head()`函数返回`exponentialMovingAverage5`数据框的前部分。`exponentialMovingAverage5`数据框作为输入参数传递：
- en: '[PRE7]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The result is as follows:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_013.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_013.jpg)'
- en: Exploring the summary of the change in prices. For this, the `summary()` function
    is used. This function provides a range of descriptive statistics to produce result
    summaries of the `exponentialMovingAverage5` data frame.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 探索价格变化的总结。为此，使用`summary()`函数。此函数提供一系列描述性统计，以生成`exponentialMovingAverage5`数据框的结果摘要。
- en: '[PRE8]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The result is as follows:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_014.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_014.jpg)'
- en: 'Calculating the difference between the exponential opening price for `GSPC`
    and `exponentialMovingAverage5`:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 计算`GSPC`和`exponentialMovingAverage5`的指数开盘价之间的差异：
- en: '[PRE9]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Now let''s print the `exponentialMovingAverageDiff` data frame. The `head()`
    function returns the first part of the `exponentialMovingAverageDiff` data frame.
    The `exponentialMovingAverageDiff` data frame is passed as an input parameter:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们打印`exponentialMovingAverageDiff`数据框。`head()`函数返回`exponentialMovingAverageDiff`数据框的前部分。`exponentialMovingAverageDiff`数据框作为输入参数传递：
- en: '[PRE10]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The result is as follows:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_015.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_015.jpg)'
- en: 'Exploring the summary of the change in prices: For this, the `summary()` function
    is used. This function provides a range of descriptive statistics to produce result
    summaries of the `exponentialMovingAverageDiff` data frame.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 探索价格变化的总结：为此使用`summary()`函数。此函数提供一系列描述性统计，以生成`exponentialMovingAverageDiff`数据框的结果摘要。
- en: '[PRE11]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The result is as follows:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_016.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_016.jpg)'
- en: 'We will now compare the fast-moving average of a `GSPC` series with a slow-moving
    average for the `GSPC` series. To do this, `GSPC` is passed as the price matrix.
    `fast = 12` represents periods for the fast-moving average, `slow = 26` represents
    periods for the slow-moving average, and `signal = 9` represents the signal for
    the moving average:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将比较`GSPC`系列快速移动平均与`GSPC`系列的慢速移动平均。为此，将`GSPC`作为价格矩阵传递。`fast = 12`代表快速移动平均的周期数，`slow
    = 26`代表慢速移动平均的周期数，`signal = 9`代表移动平均的信号：
- en: '[PRE12]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Printing the `MACD` data frame: The `tail()` function returns the last part
    of the `MACD` data frame. The `MACD` data frame is passed as an input parameter:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `MACD` 数据框：`tail()` 函数返回 `MACD` 数据框的最后部分。`MACD` 数据框作为输入参数传递：
- en: '[PRE13]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The result is as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_017.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_017.jpg)'
- en: 'Exploring the summary of the change in prices with the `summary()` function:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `summary()` 函数探索价格变化摘要：
- en: '[PRE14]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The result is as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_018.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_018.jpg)'
- en: 'Next, we will grab the signal line to use as an indicator. The result is stored
    in the `MACDsignal` data frame:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将抓取信号线作为指标。结果存储在 `MACDsignal` 数据框中：
- en: '[PRE15]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Calculating the **Bollinger Bands**: Theyare range-bound indicators that calculate
    the standard deviation from the moving average. Bollinger Bands operate under
    the logic that a currency pair''s price is most likely to gravitate towards its
    average; thus when it strays too far, say two standard deviations away, it will
    fall back to its moving average. The `BBands()` function is used to calculate
    Bollinger Bands. `GSPC` is passed as an object and `n=20` indicates the number
    of periods for the moving average. `sd=2` indicates two standard deviations:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 计算 **布林带**：它们是范围指标，从移动平均线计算标准差。布林带在以下逻辑下运行：货币对的价格最有可能趋向于其平均值；因此，当它偏离太多，比如说两个标准差之外时，它将回落到其移动平均线。`BBands()`
    函数用于计算布林带。`GSPC` 作为对象传递，`n=20` 表示移动平均期的数量。`sd=2` 表示两个标准差：
- en: '[PRE16]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Now let''s print the `BollingerBands` data frame:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们打印 `BollingerBands` 数据框：
- en: '[PRE17]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The result is as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_019.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_019.jpg)'
- en: 'Exploring the summary of the change in prices:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 探索价格变化的摘要：
- en: '[PRE18]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The result is as follows:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_020.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_020.jpg)'
- en: 'Now let''s grab the signal line from `BollingerBands` to use as an indicator:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们从 `BollingerBands` 抓取信号线作为指标：
- en: '[PRE19]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Printing the `PercentageChngpctB` data frame:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `PercentageChngpctB` 数据框：
- en: '[PRE20]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The result is as follows:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_021.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_021.jpg)'
- en: 'Exploring the summary of this change in `PercentageChngpctB`:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `PercentageChngpctB` 的变化摘要：
- en: '[PRE21]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The result is as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_022.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_022.jpg)'
- en: 'Finding the difference between the closing and opening prices:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 查找收盘价和开盘价之间的差异：
- en: '[PRE22]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Printing the `price` data frame:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `price` 数据框：
- en: '[PRE23]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The result is as follows:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_023.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_023.jpg)'
- en: 'Combining the `relativeStrengthIndex3`, `expMvAvg5Cross`, `MACDsignal`, and
    `PercentageChngpctB`, `Price` data frames: the result is then stored in the `DataSet` data
    frame:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 结合 `relativeStrengthIndex3`、`expMvAvg5Cross`、`MACDsignal`、`PercentageChngpctB`
    和 `Price` 数据框：结果随后存储在 `DataSet` 数据框中：
- en: '[PRE24]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Exploring the internal structure of the `DataSet` data frame: The `str()` function
    displays the internal structure of the data frame. The `DataSet` is passed as
    an R object to the `str()` function:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `DataSet` 数据框的内部结构：`str()` 函数显示数据框的内部结构。`DataSet` 作为 R 对象传递给 `str()` 函数：
- en: '[PRE25]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The result is as follows:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_024.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_024.jpg)'
- en: 'Calculating the indicators, creating the dataset, and removing the points:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 计算指标、创建数据集和移除点：
- en: '[PRE26]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Exploring the dimensions of the `DataSet` data frame: The `dim()` function
    returns the dimension of the `DataSet` frame. The `DataSet` data frame is passed
    as an input parameter. The result clearly states that there are 1,176 rows of
    data and 5 columns:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `DataSet` 数据框的维度：`dim()` 函数返回 `DataSet` 数据框的维度。`DataSet` 数据框作为输入参数传递。结果清楚地表明有
    1,176 行数据和 5 列：
- en: '[PRE27]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The result is as follows:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_025.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_025.jpg)'
- en: 'Naming the columns: The `c()` function is used to combine the arguments into
    vectors:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 命名列：`c()` 函数用于将参数组合成向量：
- en: '[PRE28]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Exploring the dimensions of the `DataSet` data frame:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `DataSet` 数据框的维度：
- en: '[PRE29]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The result is as follows:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - calculating the indicators](img/image_10_026.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 计算指标](img/image_10_026.jpg)'
- en: Step 4 - preparing data for model building
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤 4 - 为模型构建准备数据
- en: 'Normalizing the dataset to be bound between 0 and 1:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据集归一化到 0 到 1 之间：
- en: '[PRE30]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Calling the function to normalize the dataset:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 调用归一化数据集的函数：
- en: '[PRE31]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Printing the `NormalizedData` data frame:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `NormalizedData` 数据框：
- en: '[PRE32]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'The result is as follows:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - preparing data for model building](img/image_10_027.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 为模型构建准备数据](img/image_10_027.jpg)'
- en: 'Building the training dataset: Data elements from `1:816` in the `NormalizedData`
    data frame will be used as the training dataset. The training dataset shall be
    stored in `TrainingSet`:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 构建训练数据集：`NormalizedData` 数据框中的 `1:816` 数据元素将被用作训练数据集。训练数据集应存储在 `TrainingSet`
    中：
- en: '[PRE33]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Exploring the dimension of the `TrainingSet` data frame:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `TrainingSet` 数据框的维度：
- en: '[PRE34]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The result is as follows:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - preparing data for model building](img/image_10_028.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 为模型构建准备数据](img/image_10_028.jpg)'
- en: 'Exploring the summary of the change in `TrainingSet`:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `TrainingSet` 的变化摘要：
- en: '[PRE35]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The result is as follows:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - preparing data for model building](img/image_10_029.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 为模型构建准备数据](img/image_10_029.jpg)'
- en: 'Building the testing dataset: Data elements from `817:1225` in the `NormalizedData`
    data frame will be used as the training dataset. This testing dataset shall be
    stored in `TestSet`:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 构建测试数据集：`NormalizedData` 数据框中的 `817:1225` 数据元素将被用作训练数据集。此测试数据集应存储在 `TestSet`
    中：
- en: '[PRE36]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Exploring the dimension of the `TrainingSet` data frame:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `TrainingSet` 数据框的维度：
- en: '[PRE37]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'The result is as follows:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - preparing data for model building](img/image_10_030.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 为模型构建准备数据](img/image_10_030.jpg)'
- en: 'Exploring the summary of the change in `TestSet`:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 探索 `TestSet` 的变化摘要：
- en: '[PRE38]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'The result is as follows:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - preparing data for model building](img/image_10_031.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 4 - 为模型构建准备数据](img/image_10_031.jpg)'
- en: Step 5 - building the model
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 5 步 - 构建模型
- en: 'Building the neural network: The `neuralnet()` function trains neural networks
    using a back-propagation algorithm without weight backtrackings. `Price~RSI3+EMAcross+MACDsignal+BollingerB`
    is a description of the model to be fitted. `data=TrainingSet` is the data frame
    containing the variables specified in the formula. `hidden=c(3,3)` specifies the
    number of hidden neurons (vertices) in each layer. `learningrate=.001` signifies
    the learning rate used by the back-propagation algorithm. `algorithm="backprop"`
    refers to the back propagation algorithm:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 构建神经网络：`neuralnet()` 函数使用不带权重回溯的反向传播算法训练神经网络。`Price~RSI3+EMAcross+MACDsignal+BollingerB`
    是要拟合的模型的描述。`data=TrainingSet` 是包含公式中指定变量的数据框。`hidden=c(3,3)` 指定了每层的隐藏神经元（顶点）数量。`learningrate=.001`
    表示反向传播算法使用的学习率。`algorithm="backprop"` 指的是反向传播算法：
- en: '[PRE39]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Plotting the neural network:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制神经网络：
- en: '[PRE40]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'The result is as follows:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 5 - building the model](img/image_10_032.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 - 构建模型](img/image_10_032.jpg)'
- en: Measuring the unemployment rate
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测量失业率
- en: The unemployment rate is defined as the percentage of the total labor force
    that is unemployed, but actively seeking employment and willing to work. As defined
    by the **International Labor Organization **(**ILO**), an unemployed person is
    someone who is actively looking for work but does not have a job. The unemployment
    rate is a measure of the number of people who are both jobless *and *looking for
    a job.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 失业率定义为失业的劳动力占总劳动力的百分比，且积极寻找工作并愿意工作。根据**国际劳工组织**（**ILO**）的定义，失业者是指积极寻找工作但没有工作的人。失业率是衡量失业人数同时**失业**和**寻找工作**的指标。
- en: Getting ready
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: In order to perform a measurement of the unemployment rate using neural networks,
    we shall be using a dataset collected on the unemployment rate in Wisconsin.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用神经网络进行失业率测量，我们将使用收集到的威斯康星州失业率数据集。
- en: Step 1 - collecting and describing data
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 1 步 - 收集和描述数据
- en: 'For this, we will be using a CSV dataset titled `FRED-WIUR.csv`. There are
    448 rows of data. There are two numeric variables as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，我们将使用标题为 `FRED-WIUR.csv` 的 CSV 数据集。有 448 行数据。有两个数值变量如下：
- en: '`Date`'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`日期`'
- en: '`Value`'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`值`'
- en: This dataset shows the unemployment rate in Wisconsin between January 1, 1976
    and April 1, 2013.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 此数据集显示了 1976 年 1 月 1 日至 2013 年 4 月 1 日间威斯康星州的失业率。
- en: How to do it...
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Let's get into the details.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解。
- en: Step 2 - exploring data
  id: totrans-156
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 2 步 - 探索数据
- en: 'First, the following packages need to be loaded:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，需要加载以下包：
- en: '[PRE41]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Note
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Version info: Code for this page was tested in R version 3.3.0'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 版本信息：本页面的代码在 R 版本 3.3.0 中进行了测试
- en: 'Let''s explore the data and understand the relationships among the variables.
    We''ll begin by importing the CSV data file named `FRED-WIUR.csv`. We will be
    saving the data to the `ud` data frame:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索数据并了解变量之间的关系。我们将首先导入名为 `FRED-WIUR.csv` 的 CSV 数据文件。我们将数据保存到 `ud` 数据框中：
- en: '[PRE42]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Printing the `ud` data frame: The `tail()` function returns the last part of
    the `ud` data frame. The `ud` data frame is passed as an input parameter:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `ud` 数据框：`tail()` 函数返回 `ud` 数据框的最后部分。将 `ud` 数据框作为输入参数传递：
- en: '[PRE43]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The result is as follows:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_033.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_033.jpg)'
- en: 'Naming the columns: The `c()` function is used to combine the arguments into
    vectors:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 命名列：使用 `c()` 函数将参数组合成向量：
- en: '[PRE44]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The `as.Date()` function is used to convert the character representation and
    objects of the `Date` class, which represents calendar dates:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `as.Date()` 函数将字符表示和 `Date` 类的对象转换为日期：
- en: '[PRE45]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Exploring the summary of unemployment data: For this, the `summary()` function
    is used. The function provides a range of descriptive statistics to produce result
    summaries of the `ud` data frame:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 探索失业数据的摘要：为此，使用 `summary()` 函数。该函数提供一系列描述性统计，以生成 `ud` 数据框的结果摘要：
- en: '[PRE46]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The result is as follows:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_034.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_034.jpg)'
- en: 'Now let''s create base data from rows 1 to 436:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们从第 1 行到第 436 行创建基础数据：
- en: '[PRE47]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Exploring the summary of the base unemployment data. For this, the `summary()`
    function is used. The function provides a range of descriptive statistics to produce
    result summaries of the `ud.b` data frame:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 探索基础失业数据的摘要。为此，使用 `summary()` 函数。该函数提供一系列描述性统计，以生成 `ud.b` 数据框的结果摘要：
- en: '[PRE48]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'The result is as follows:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_035.jpg)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_035.jpg)'
- en: 'Now let''s create the test data from rows 437 to 448:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们从第 437 行到第 448 行创建测试数据：
- en: '[PRE49]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Exploring the summary of the test unemployment data:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 探索测试失业数据的摘要：
- en: '[PRE50]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The result is as follows:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_036.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_036.jpg)'
- en: 'Creating the base time series data from 1976: `ts()` as a function creates
    time series objects. `ud.b$rate` represents the vector of observed time series
    values:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 从 1976 年创建基础时间序列数据：`ts()` 函数作为创建时间序列对象的函数。`ud.b$rate` 代表观察到的时序值向量：
- en: '[PRE51]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Printing the value of the `ud.ts` data frame:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `ud.ts` 数据框的值：
- en: '[PRE52]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The result is as follows:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_037.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_037.jpg)'
- en: 'Creating the test time series data: The `ts()` function creates time series
    objects. `ud.b$rate` represents the vector of observed time series values:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 创建测试时间序列数据：`ts()` 函数创建时间序列对象。`ud.b$rate` 代表观察到的时序值向量：
- en: '[PRE53]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Printing the value of the `ud.ts` data frame:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 打印 `ud.ts` 数据框的值：
- en: '[PRE54]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'The result is as follows:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_038.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_038.jpg)'
- en: 'Plotting the base time series data:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制基础时间序列数据：
- en: '[PRE55]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The result is as follows:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_039.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_039.jpg)'
- en: 'Plotting the test time series data:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制测试时间序列数据：
- en: '[PRE56]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'The result is as follows:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 2 - exploring data](img/image_10_040.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![第二步 - 探索数据](img/image_10_040.jpg)'
- en: Step 3 - preparing and verifying the models
  id: totrans-207
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第三步 - 准备和验证模型
- en: 'Calculating the mean of the base time series dataset. The `meanf()` function
    returns forecasts and prediction intervals for an **i.i.d** model applied on the
    `ud.ts` dataset. `12` indicates the period for forecasting:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 计算基础时间序列数据集的平均值。`meanf()` 函数返回对 `ud.ts` 数据集应用 **i.i.d** 模型后的预测和预测区间。`12` 表示预测的周期：
- en: '[PRE57]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Forecasting and predicting the intervals for a random walk with a drift base
    time series. The `rwf()` function forecasts and returns for a random walk performed
    on the time series `ud.ts`. The parameter `12` indicates the period for forecasting:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 对具有漂移的基础时间序列进行预测和预测区间。`rwf()` 函数对时间序列 `ud.ts` 进行随机游走预测并返回。参数 `12` 表示预测的周期：
- en: '[PRE58]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Forecasting and predicting intervals for a random walk from an ARIMA(0,0,0)(0,1,0)m
    base time series: The `snaive()` function forecasts and returns results for an
    ARIMA(0,0,0)(0,1,0)m performed on the time series `ud.ts`. The parameter `12`
    indicates the period for forecasting:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 从ARIMA(0,0,0)(0,1,0)m基础时间序列对随机游走进行预测和预测区间：`snaive()`函数对时间序列`ud.ts`执行ARIMA(0,0,0)(0,1,0)m，并返回预测结果。参数`12`表示预测的周期：
- en: '[PRE59]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Forecasting and predicting the drift for the base time series. The `rwf()`
    function forecasts and returns for a random walk performed on the time series
    `ud.ts`. The parameter `12` indicates the period for forecasting. `drift=T` is
    a logical flag that fits a random walk with the drift model:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 预测基础时间序列的漂移。`rwf()`函数对时间序列`ud.ts`上的随机游走进行预测并返回结果。参数`12`表示预测的周期。`drift=T`是一个逻辑标志，用于拟合带有漂移模型的随机游走：
- en: '[PRE60]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Next, we will prepare linear fit models for the base time series data for trend.
    The `tslm()` function fits linear models to the `ud.ts` time series. `ud.ts~trend`
    is the formula that indicates that the trend components have to be taken into
    consideration:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将为趋势基础时间序列数据准备线性拟合模型。`tslm()`函数将线性模型拟合到`ud.ts`时间序列。`ud.ts~trend`公式表示必须考虑趋势成分：
- en: '[PRE61]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Preparing the linear fit models for the base time series data for trend and
    seasonality: The `tslm()` function fits linear models to `ud.ts` time series.
    `ud.ts~trend+season` is the formula that indicates that the trend and seasonality
    components have to be taken into consideration:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 为基础时间序列数据准备趋势和季节性的线性拟合模型：`tslm()`函数将线性模型拟合到`ud.ts`时间序列。`ud.ts~trend+season`公式表示趋势和季节性成分必须被考虑：
- en: '[PRE62]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '`residuals()` is a generic function that extracts model residuals from object
    `m1` after returned after fitting models for the base time series data for trend.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '`residuals()`是一个通用函数，在为趋势基础时间序列数据拟合模型后，从对象`m1`中提取模型残差。'
- en: '[PRE63]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Plotting the residual model:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制残差模型：
- en: '[PRE64]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'The result is as follows:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_041.jpg)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_041.jpg)'
- en: 'Now let''s look at how to estimate the `autocovariance` function. `residual_1`
    is the univariate numeric time series object:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看如何估计`自协方差`函数。`residual_1`是单变量数值时间序列对象：
- en: '[PRE65]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The result is as follows:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_042.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_042.jpg)'
- en: '`residuals()` is a generic function that extracts model residuals from object
    `m2` after returned after fitting models for base time series data for trend.'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '`residuals()`是一个通用函数，在为趋势基础时间序列数据拟合模型后，从对象`m2`中提取模型残差。'
- en: '[PRE66]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Ploting the residual model:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制残差模型：
- en: '[PRE67]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'The result is as follows:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_043.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_043.jpg)'
- en: '[PRE68]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'The result is as follows:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_044.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_044.jpg)'
- en: 'The Durbin-Watson test is performed to find out if the residuals from a linear
    regression or multiple regressions are independent. The hypotheses usually considered
    in the Durbin-Watson test are as follows:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 杜宾-沃森检验用于确定线性回归或多元回归的残差是否独立。在杜宾-沃森检验中通常考虑的假设如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_045.jpg)![Step
    3 - preparing and verifying the models](img/image_10_046.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_045.jpg)![步骤 3 - 准备和验证模型](img/image_10_046.jpg)'
- en: 'The test statistics are given as follows:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 测试统计量如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_047.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 3 - 准备和验证模型](img/image_10_047.jpg)'
- en: In this equation, ![Step 3 - preparing and verifying the models](img/image_10_048.jpg), ![Step
    3 - preparing and verifying the models](img/image_10_049.jpg)is the observed value
    of for individual ![Step 3 - preparing and verifying the models](img/image_10_050.jpg),
    and ![Step 3 - preparing and verifying the models](img/image_10_051.jpg) is the
    predicted value of for individual ![Step 3 - preparing and verifying the models](img/image_10_052.jpg).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方程中，![步骤 3 - 准备和验证模型](img/image_10_048.jpg)，![步骤 3 - 准备和验证模型](img/image_10_049.jpg)是单个![步骤
    3 - 准备和验证模型](img/image_10_050.jpg)的观测值，而![步骤 3 - 准备和验证模型](img/image_10_051.jpg)是单个![步骤
    3 - 准备和验证模型](img/image_10_052.jpg)的预测值。
- en: 'The value of ![Step 3 - preparing and verifying the models](img/image_10_053.jpg)
    decreases as the serial correlations increase. The upper and lower critical values,
    ![Step 3 - preparing and verifying the models](img/image_10_054.jpg) and ![Step
    3 - preparing and verifying the models](img/image_10_055.jpg), have been tabulated
    for different values of ![Step 3 - preparing and verifying the models](img/image_10_056.jpg)--the
    number of explanatory variables and ![Step 3 - preparing and verifying the models](img/image_10_057.jpg):'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 随着序列相关性的增加，![步骤3 - 准备和验证模型](img/image_10_053.jpg)的值降低。对于![步骤3 - 准备和验证模型](img/image_10_056.jpg)的不同值（解释变量的数量）和![步骤3
    - 准备和验证模型](img/image_10_057.jpg)，已经为上、下临界值![步骤3 - 准备和验证模型](img/image_10_054.jpg)和![步骤3
    - 准备和验证模型](img/image_10_055.jpg)编制了表格：
- en: If ![Step 3 - preparing and verifying the models](img/image_10_058.jpg) reject
    ![Step 3 - preparing and verifying the models](img/image_10_059.jpg)
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 如果![步骤3 - 准备和验证模型](img/image_10_058.jpg)拒绝![步骤3 - 准备和验证模型](img/image_10_059.jpg)
- en: If ![Step 3 - preparing and verifying the models](img/image_10_060.jpg) do not
    reject ![Step 3 - preparing and verifying the models](img/image_10_061.jpg)
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 如果![步骤3 - 准备和验证模型](img/image_10_060.jpg)不拒绝![步骤3 - 准备和验证模型](img/image_10_061.jpg)
- en: If ![Step 3 - preparing and verifying the models](img/image_10_062.jpg) the
    test is inconclusive.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 如果![步骤3 - 准备和验证模型](img/image_10_062.jpg)的测试结果不确定。
- en: 'Performing the Durbin-Watson test on linear fit models for the base time series
    data for trend:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 对基础时间序列数据的趋势进行线性拟合模型的Durbin-Watson测试：
- en: '[PRE69]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'The result is as follows:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_063.jpg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_063.jpg)'
- en: 'Performing the Durbin-Watson test on linear fit models for the base time series
    data for trend and seasonality:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 对基础时间序列数据的趋势和季节性进行线性拟合模型的Durbin-Watson测试：
- en: '[PRE70]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'The result is as follows:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_064.jpg)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_064.jpg)'
- en: 'Decomposing the base data time series into period, seasonal, trend, and irregular
    components using LOESS:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 使用LOESS将基础数据时间序列分解为周期、季节、趋势和不规则成分：
- en: '[PRE71]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Plotting the decomposed base data time series:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制分解后的基础数据时间序列图：
- en: '[PRE72]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'The result is as follows:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_065.jpg)'
  id: totrans-261
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_065.jpg)'
- en: 'Performing the exponential smoothing state space model for the base data time
    series. The `ets()` function returns the `ets` model on the `ud.ts` time series.
    `ZZZ - "Z"` signifies an automatic selection. The first letter denotes the error
    type, the second letter denotes the trend type, and the third letter denotes the
    season type:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 对基础数据时间序列执行指数平滑状态空间模型。`ets()`函数返回`ud.ts`时间序列上的`ets`模型。`ZZZ - "Z"`表示自动选择。第一个字母表示误差类型，第二个字母表示趋势类型，第三个字母表示季节类型：
- en: '[PRE73]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Plotting the exponential smoothing state space model for the base data time
    series:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制基础数据时间序列的指数平滑状态空间模型图：
- en: '[PRE74]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'The result is as follows:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_066.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_066.jpg)'
- en: 'Returning the order of a univariate ARIMA for the base data time series:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 返回基础数据时间序列单变量ARIMA的阶数：
- en: '[PRE75]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Ploting the univariate ARIMA for the base data time series:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制基础数据时间序列的单变量ARIMA图：
- en: '[PRE76]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The result is as follows:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_067.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_067.jpg)'
- en: 'Building the feed-forward neural network model: The `nnetar()` function builds
    the feed-forward neural network with a single hidden layer and lagged inputs for
    forecasting the base data univariate time series:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 构建前馈神经网络模型：`nnetar()`函数使用单个隐藏层和滞后输入构建前馈神经网络，用于预测基础数据的单变量时间序列：
- en: '[PRE77]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'Printing the values of the feed-forward neural network model:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 打印前馈神经网络模型的值：
- en: '[PRE78]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'The result is as follows:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_068.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_068.jpg)'
- en: 'Plotting the feed-forward neural network model:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制前馈神经网络模型图：
- en: '[PRE79]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The result is as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 3 - preparing and verifying the models](img/image_10_069.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![步骤3 - 准备和验证模型](img/image_10_069.jpg)'
- en: Step 4 - forecasting and testing the accuracy of the models built
  id: totrans-284
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 步骤4 - 预测和测试构建的模型的准确性
- en: 'Testing the accuracy of the mean value of the base data time series with the
    test data time series. The `accuracy()` function returns the range of summary
    measures of the forecast accuracy. `ud.p.ts` is the test data time series:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 使用测试数据时间序列测试基础数据时间序列平均值的准确性。`accuracy()`函数返回预测准确性的汇总度量范围。`ud.p.ts`是测试数据时间序列：
- en: '[PRE80]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Testing the accuracy of the forecasted and predicted base data time series
    with a drift:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 使用漂移测试预测和预测的基础数据时间序列的准确性：
- en: '[PRE81]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Testing the accuracy of the forecasted and predicted base data time series
    with an ARIMA(0,0,0)(0,1,0)m:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ARIMA(0,0,0)(0,1,0)m测试预测和预测的基础数据时间序列的准确性：
- en: '[PRE82]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Testing the accuracy of the drift of the base data time series:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 测试基础数据时间序列漂移的准确性：
- en: '[PRE83]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'Combining the results in a table:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 将结果组合到表格中：
- en: '[PRE84]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'Printing the result:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 打印结果：
- en: '[PRE85]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'The result is as follows:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - forecasting and testing the accuracy of the models built](img/image_10_070.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 预测和测试构建的模型的准确性](img/image_10_070.jpg)'
- en: 'Forecasting the linear fit models for the base time series data for trend.
    `h=12` indicates the period of forecasting:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 预测趋势的基础时间序列数据的线性拟合模型。`h=12`表示预测的周期：
- en: '[PRE86]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'Forecasting the linear fit models for the base time series data for trend and
    seasonality:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 预测趋势和季节性的基础时间序列数据的线性拟合模型：
- en: '[PRE87]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: 'Forecasting the decomposed base data time series into period, seasonal, trend,
    and irregular components using LOESS:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 使用LOESS将分解的基础数据时间序列预测为周期、季节、趋势和不规则成分：
- en: '[PRE88]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'Forecasting the exponential smoothing state space model for the base data time
    series:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 预测基础数据时间序列的指数平滑状态空间模型：
- en: '[PRE89]'
  id: totrans-306
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Forecasting the ordered univariate ARIMA for the base data time series:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 预测基础数据时间序列的有序单变量ARIMA：
- en: '[PRE90]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Forecasting the feed-forward neural network model with a single hidden layer:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 预测具有单个隐藏层的前馈神经网络模型：
- en: '[PRE91]'
  id: totrans-310
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'Testing the accuracy of the forecasted linear fit models for the base time
    series data for trend:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 测试预测的趋势的基础时间序列数据的线性拟合模型的准确性：
- en: '[PRE92]'
  id: totrans-312
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Testing the accuracy of the forecasted linear fit models for the base time
    series data for trend and seasonality:'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 测试预测的趋势和季节性的基础时间序列数据的线性拟合模型的准确性：
- en: '[PRE93]'
  id: totrans-314
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Testing the accuracy of the forecasted decomposed base data time series into
    period, seasonal, trend, and irregular components using LOESS:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 使用LOESS测试预测分解的基础数据时间序列（周期、季节、趋势和不规则成分）的准确性：
- en: '[PRE94]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Testing the accuracy of the forecasted exponential smoothing state space model
    for the base data time series:'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 测试基础数据时间序列预测的指数平滑状态空间模型的准确性：
- en: '[PRE95]'
  id: totrans-318
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'Testing the accuracy of the forecasted ordered univariate ARIMA for the base
    data time series:'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 测试基础数据时间序列预测的有序单变量ARIMA的准确性：
- en: '[PRE96]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'Testing the accuracy of the forecasted feed-forward neural network model with
    a single hidden layer:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 测试预测的前馈神经网络模型（具有单个隐藏层）的准确性：
- en: '[PRE97]'
  id: totrans-322
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Combining the results in a table:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 将结果组合到表格中：
- en: '[PRE98]'
  id: totrans-324
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'Printing the result:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 打印结果：
- en: '[PRE99]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'The result is as follows:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Step 4 - forecasting and testing the accuracy of the models built](img/image_10_071.jpg)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![步骤4 - 预测和测试构建的模型的准确性](img/image_10_071.jpg)'
