- en: '*Chapter 7*: Model Understanding and Explainability'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第七章*: 模型理解和可解释性'
- en: In the last chapter, we learned how to build models, and we will now learn how
    to use output generated by DataRobot to understand the models and also use this
    information to explain why a model provides a particular prediction. As we have
    discussed before, this aspect is critically important to ensure that we are using
    the results correctly. DataRobot automates much of the task of creating charts
    and plots to help someone understand a model, but you still need to know how to
    interpret what it is showing in the context of the problem you are trying to solve.
    This is another reason why we will need people involved in the process, even if
    much of a task has been automated. As you can imagine, the task of interpreting
    the results will therefore become more and more valuable as the degree of automation
    increases.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们学习了如何构建模型，现在我们将学习如何使用DataRobot生成的输出理解模型，并利用这些信息解释为什么模型会做出特定的预测。正如我们之前讨论的，这一点对于确保我们正确使用结果至关重要。DataRobot自动化了创建图表和绘图的大部分任务，以帮助人们理解模型，但你仍然需要知道如何在你试图解决的问题的背景下解释它所显示的内容。这也是为什么即使许多任务已经自动化，我们仍然需要参与这个过程的人的原因。正如你可以想象的，随着自动化程度的提高，解释结果的任务将变得越来越有价值。
- en: 'In this chapter, we''re going to cover the following main topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主要内容：
- en: Reviewing and understanding model details
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查和理解模型细节
- en: Assessing model performance and metrics
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估模型性能和指标
- en: Generating model explanations
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成模型解释
- en: Understanding model learning curves and trade-offs
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解模型学习曲线和权衡
- en: Reviewing and understanding model details
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查和理解模型细节
- en: 'In the last chapter, we created several models for different projects. DataRobot
    creates 10 to 20 models in a project, and it would be very onerous to look at
    and analyze the details of all of these models. You do not have to review each
    of these models, and it is common to review only the top few models before making
    a final selection. We will now look at the leaderboard for models in the `Automobile
    Example 2` project and select the top model, as illustrated in the following screenshot:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们为不同的项目创建了几个模型。DataRobot在一个项目中创建10到20个模型，查看和分析所有这些模型的细节将非常繁琐。你不必逐一审查这些模型，在做出最终选择之前，通常只审查前几个模型。现在，我们将查看`Automobile
    Example 2`项目中的模型排行榜，并选择最顶尖的模型，如下面的截图所示：
- en: '![Figure 7.1 – Model information'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.1 – 模型信息'
- en: '](img/Figure_7.1_B17159.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.1_B17159.jpg)'
- en: Figure 7.1 – Model information
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.1 – 模型信息
- en: 'In the preceding screenshot, we selected the **Model Info** tab within the
    **Describe** tab to get a view of how large the model is and the expected time
    it takes to create predictions. This information is useful in real-time applications
    that are time-sensitive and need to score thousands of transactions quickly. Let''s
    now go to the **Feature Impact** tab within the **Understand** tab, as shown in
    the following screenshot:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的截图中，我们在**描述**选项卡内选择了**模型信息**选项卡，以查看模型的大小以及创建预测所需预期时间。这些信息对于需要快速评分数千笔交易且对时间敏感的实时应用非常有用。现在，让我们转到**理解**选项卡内的**特征影响**选项卡，如下面的截图所示：
- en: '![Figure 7.2 – Feature impacts'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.2 – 特征影响'
- en: '](img/Figure_7.2_B17159.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.2_B17159.jpg)'
- en: Figure 7.2 – Feature impacts
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.2 – 特征影响
- en: This is one of the most important charts for the model as it shows how much
    a feature contributes to this XGBoost model. We can see that the top contributors
    are `curb_weight`, `engine_size`, `horsepower`, `highway_mpg`, and `cylinder_count`.
    On the other hand, `cylinder_size` and `engine_type` contribute very little. While
    it is true that `cylinder_size` is not very predictive, we must not forget that
    prediction is not always the end objective. We know that `cylinder_size` has an
    effect on `engine_size`, an important feature. The objective might be to use this
    information to figure out ways to reduce costs. For that, we might want to reduce
    `engine_size`, but you cannot reduce `engine_size` directly. For that, you need
    to reduce the size or count of cylinders, which will lead to a reduction in `engine_size`.
    Having a causal diagram of this problem to guide you becomes very helpful in determining
    the best actions to take to achieve our objectives.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图对于模型来说非常重要，因为它展示了特征对XGBoost模型贡献的大小。我们可以看到，最大的贡献者是`curb_weight`、`engine_size`、`horsepower`、`highway_mpg`和`cylinder_count`。另一方面，`cylinder_size`和`engine_type`的贡献很小。虽然`cylinder_size`的预测能力不是很强，但我们不能忘记预测并不总是最终目标。我们知道`cylinder_size`对`engine_size`有影响，这是一个重要的特征。目标可能是利用这些信息找出降低成本的方法。为此，我们可能希望减小`engine_size`，但你不能直接减小`engine_size`。为此，你需要减小气缸的大小或数量，这将导致`engine_size`的减小。拥有一个因果图来指导你，在确定实现目标的最佳行动时变得非常有帮助。
- en: 'Before we take action, let''s inspect what the results look like for a **Generalized
    Additive Model** (**GAM**), as shown in the following screenshot:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们采取行动之前，让我们检查一下**广义加性模型**（**GAM**）的结果，如图下所示截图：
- en: '![Figure 7.3 – Feature impacts for a GAM'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.3 – GAM的特征影响]'
- en: '](img/Figure_7.3_B17159.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 7.3](img/Figure_7.3_B17159.jpg)'
- en: Figure 7.3 – Feature impacts for a GAM
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.3 – GAM的特征影响
- en: '*Figure 7.3* shows the important features of the GAM. While many of the features
    look similar, we notice that `engine_type` is fairly high in importance for this
    model, whereas `engine_type` was very low in importance for the previous model.
    This is not an error—it points to the fact that many of the features are interrelated
    and different models can pick up signals from different features, and that predictive
    power is not necessarily the same as the root cause. To take action, we need to
    understand the root feature that leads to a change in the target feature. To put
    this another way, the feature that best predicts something is not always the feature
    that can be changed to create the desired change in the target.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7.3* 展示了GAM的重要特征。虽然许多特征看起来很相似，但我们注意到`engine_type`在这个模型中的重要性相当高，而在之前的模型中`engine_type`的重要性非常低。这并不是错误——它指向了这样一个事实，即许多特征是相互关联的，不同的模型可以从不同的特征中捕捉到信号，并且预测能力并不一定等同于根本原因。为了采取行动，我们需要了解导致目标特征变化的根本特征。换句话说，最能预测某事的特征，并不总是可以改变以在目标中产生期望变化的特征。'
- en: 'To further understand how a feature affects the target, let''s select the **Feature
    Effects** tab within the **Understand** tab of the model, as shown in the following
    screenshot:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步了解特征如何影响目标，让我们在模型的“理解”选项卡中选择“**特征效应**”选项卡，如图下所示截图：
- en: '![Figure 7.4 – Feature effects'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.4 – 特征效应]'
- en: '](img/Figure_7.4_B17159.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 7.4](img/Figure_7.4_B17159.jpg)'
- en: Figure 7.4 – Feature effects
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.4 – 特征效应
- en: The preceding screenshot shows partial dependence plots for various features.
    The selected plot is for `curb_weight`. The plot shows a fairly linear relationship
    between `curb_weight` and price. We do see some unusual dips in price in a few
    spots—for example, around a `curb_weight` value of `2700`. Before we take that
    too seriously, we notice that the amount of data around that is very limited.
    This tells us that this particular observation is likely due to a lack of data.
    This does raise the issue that our model is likely to predict a lower price in
    that small region, which in turn could result in lower revenue.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图显示了各种特征的局部依赖性图。选定的图是关于`curb_weight`的。该图显示了`curb_weight`和价格之间相当线性的关系。我们确实在几个地方看到了价格的一些异常下降——例如，在`curb_weight`值为`2700`左右。在我们对此过于认真之前，我们注意到围绕这个值的数据量非常有限。这告诉我们，这个特定的观察结果很可能是由于数据不足。这确实提出了一个问题，即我们的模型很可能会在那个小区域内预测一个较低的价格，这反过来又可能导致收入降低。
- en: 'Let''s look at another feature in the following screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在以下截图中查看另一个特征：
- en: '![Figure 7.5 – Partial dependence for engine_size'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.5 – engine_size 的部分依赖性]'
- en: '](img/Figure_7.5_B17159.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 7.5](img/Figure_7.5_B17159.jpg)'
- en: Figure 7.5 – Partial dependence for engine_size
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.5 – engine_size 的部分依赖图
- en: The preceding screenshot shows a highly non-linear relationship between `engine_size`
    and price. We see a very dramatic rise in price around the `engine_size` value
    of `180`. It is hard to know how real this effect is without discussing it with
    domain experts. We can notice that the amount of data available for sizes greater
    than `130` is very small, hence the effects we see could be simply due to a lack
    of data. Taken as is, it indicates that prices stagnate beyond a size of `200`,
    and this could be an important insight for the business.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的截图显示了 `engine_size` 和价格之间高度非线性关系。我们在 `engine_size` 值为 `180` 附近看到了价格的一个非常戏剧性的上升。如果不与领域专家讨论，很难知道这个效果有多真实。我们可以注意到，对于大于
    `130` 的尺寸，可用的数据量非常小，因此我们看到的效应可能仅仅是数据不足造成的。就目前来看，它表明价格在 `200` 以上的尺寸上停滞不前，这对业务可能是一个重要的见解。
- en: 'Let''s take a look at another partial dependence plot for `highway_mpg` in
    the following screenshot:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下以下截图中的 `highway_mpg` 的另一个部分依赖图：
- en: '![Figure 7.6 – Partial dependence plot for highway_mpg'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.6 – highway_mpg 的部分依赖图'
- en: '](img/Figure_7.6_B17159.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.6_B17159.jpg)'
- en: Figure 7.6 – Partial dependence plot for highway_mpg
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.6 – highway_mpg 的部分依赖图
- en: '*Figure 7.6* shows another highly non-linear relationship, with a key transition
    point happening around a `highway_mpg` value of `28`. This clearly shows a big
    price drop around `28`, hence this is a critical point. This could be due to regulations,
    where going below `28` places you in a different type of vehicle or engine. We
    also notice that once you get above that threshold, any further change is not
    very meaningful from a price impact (however, it could still be very impactful
    from other perspectives). If you do not know why this is, it is important for
    you to discuss this with your **subject-matter experts** (**SMEs**).'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7.6* 显示了另一个高度非线性关系，一个关键的转折点发生在 `highway_mpg` 值约为 `28` 附近。这清楚地表明在 `28` 附近有一个大的价格下降，因此这是一个关键点。这可能是由于法规，低于
    `28` 将您置于不同类型的车辆或发动机。我们还注意到，一旦超过这个阈值，任何进一步的变化对价格的影响都不是很大（然而，从其他角度来看，它仍然可能非常有影响）。如果您不知道为什么是这样，与您的**主题专家**（**SMEs**）讨论这一点很重要。'
- en: My main objective for showing and discussing these plots is to show you how
    important it is to spend your time analyzing and reviewing these plots rather
    than spending all of your time coding up these plots. Since DataRobot automatically
    creates these for you, you can now spend your time doing the more value-added
    work of analyzing these results to help improve your business.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我展示和讨论这些图表的主要目的是向您展示分析这些图表而不是花费所有时间编写这些图表的重要性。由于 DataRobot 会自动为您创建这些图表，您现在可以花时间进行更有价值的分析工作，以帮助改进您的业务。
- en: 'Let''s revisit the `engine_size` plot, but this time for the GAM, as shown
    in the following screenshot:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下 `engine_size` 的图表，但这次是针对 GAM，如下截图所示：
- en: '![Figure 7.7 – Partial dependence plot for the GAM'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.7 – GAM 的部分依赖图'
- en: '](img/Figure_7.7_B17159.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.7_B17159.jpg)'
- en: Figure 7.7 – Partial dependence plot for the GAM
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.7 – GAM 的部分依赖图
- en: '*Figure 7.7* shows the partial dependence for the GAM. Comparing this with
    *Figure 7.5*, we see that *Figure 7.7* shows clearer thresholds around values
    `95` and `180`. Discussing this with domain experts could help you determine which
    model is a better representation of reality and which model helps you to better
    set pricing. One of the benefits of GAMs is that you can easily smooth out these
    curves and shape them for deployment. Remember—accurate prediction is not always
    the same as better intervention or action.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 7.7* 显示了 GAM 的部分依赖图。与 *图 7.5* 进行比较，我们看到 *图 7.7* 在 `95` 和 `180` 的值周围显示了更清晰的阈值。与领域专家讨论这个问题可以帮助您确定哪个模型更好地代表现实，哪个模型有助于您更好地设定定价。GAMs
    的一个好处是您可以轻松地平滑这些曲线并调整它们的形状以部署。记住——准确的预测并不总是等同于更好的干预或行动。'
- en: 'GAMs are a lot easier to understand and explain. Let''s look at another chart
    here that helps in that understanding:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: GAMs 更容易理解和解释。让我们再看另一个图表，它有助于理解这一点：
- en: '![ Figure 7.8 – Feature coefficients'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.8 – 特征系数'
- en: '](img/Figure_7.8_B17159.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.8_B17159.jpg)'
- en: Figure 7.8 – Feature coefficients
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.8 – 特征系数
- en: '*Figure 7.8* shows the coefficients for different features in the GAM. You
    will notice that DataRobot has created some derived features. You can click on
    them to see more details. This provides a high-level view of the coefficients,
    but there is another view that provides a better view for understanding the model.
    For that, let''s click on the **Rating Table** tab within the **Describe** tab
    for the GAM, as shown in the following screenshot:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.8* 展示了GAM中不同特征的系数。你会注意到DataRobot创建了一些派生特征。你可以点击它们以查看更多详细信息。这提供了一个系数的高级视图，但还有一个更好的视图，可以更好地理解模型。为此，让我们点击GAM的“描述”选项卡内的“**评级表**”选项卡，如下面的截图所示：'
- en: '![Figure 7.9 – Rating table for a GAM'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.9 – GAM的评级表'
- en: '](img/Figure_7.9_B17159.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.9_B17159.jpg)'
- en: Figure 7.9 – Rating table for a GAM
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.9 – GAM的评级表
- en: 'This view lets you download the rating table built by DataRobot; you can also
    modify this table and upload it back to use the modified table. This mechanism
    thus allows you to manually fine-tune your model based on your understanding of
    the problem. This feature is therefore very powerful as it allows you a lot of
    flexibility, but at the same time, you must use this carefully. Let''s click on
    the **Download table** button and download the **comma-separated values** (**CSV**)
    file. Once downloaded, we can open the file using **Excel**, as shown in the following
    screenshot:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这个视图允许你下载DataRobot构建的评级表；你也可以修改这个表并将其上传回来以使用修改后的表。这种机制因此允许你根据对问题的理解手动微调你的模型。因此，这个功能非常强大，因为它为你提供了很多灵活性，但与此同时，你必须谨慎使用。让我们点击“**下载表格**”按钮并下载**逗号分隔值**（**CSV**）文件。下载后，我们可以使用**Excel**打开文件，如下面的截图所示：
- en: '![Figure 7.10 – Rating table for a GAM'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.10 – GAM的评级表'
- en: '](img/Figure_7.10_B17159.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.10_B17159.jpg)'
- en: Figure 7.10 – Rating table for a GAM
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.10 – GAM的评级表
- en: 'You can now see what the rating table looks like. Here, you see that DataRobot
    has created bins for various features. For each bin, it has assigned the coefficient
    and relativity as to how changes in a feature impact the target variable. To understand
    this a bit better, we can create plots for individual features in Excel, as shown
    in the following screenshot:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以看到评级表的样子。在这里，你可以看到DataRobot为各种特征创建了区间。对于每个区间，它都分配了系数和相对性，以说明特征变化如何影响目标变量。为了更好地理解这一点，我们可以在Excel中为单个特征创建图表，如下面的截图所示：
- en: '![Figure 7.11 – Feature relativities'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.11 – 特征相对性'
- en: '](img/Figure_7.11_B17159.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.11_B17159.jpg)'
- en: Figure 7.11 – Feature relativities
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.11 – 特征相对性
- en: In *Figure 7.11*, you can see how a given feature such as `body_style` contributes
    to the price. The GAM model is essentially a sum of all the contributions from
    the selected features. Given the rating table, anyone can easily calculate the
    price, and this can also be implemented in a very simple manner. Given that the
    individual feature effects are non-linear (and still very understandable), this
    allows these models to perform very well while still being very easy to understand.
    It is no wonder that GAMs are becoming very popular.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *图7.11* 中，你可以看到给定特征（如 `body_style`）如何影响价格。GAM模型本质上是从所选特征中得到的所有贡献的总和。给定评级表，任何人都可以轻松计算价格，这也可以以非常简单的方式实现。鉴于单个特征效应是非线性的（但仍非常易于理解），这使得这些模型在易于理解的同时表现出色。GAMs变得非常受欢迎也就不足为奇了。
- en: 'There is one more chart that we want to look at that is frequently helpful
    in understanding the contributions of features. For this, we will click on the
    **Insights** menu item at the top of the page, which brings up the chart shown
    here:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还想查看一个图表，这个图表经常有助于理解特征的贡献。为此，我们将点击页面顶部的“**洞察**”菜单项，这将显示下面的图表：
- en: '![Figure 7.12 – Model insights'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.12 – 模型洞察'
- en: '](img/Figure_7.12_B17159.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.12_B17159.jpg)'
- en: Figure 7.12 – Model insights
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.12 – 模型洞察
- en: '*Figure 7.12* shows the variable effects using a DataRobot selected model that
    is built using constant splines (in this case, the `one` if the value falls within
    a specific interval; otherwise, it is `zero`. You can review this chart with reference
    to the feature effects for the models you have selected to see if there are any
    inconsistencies between these charts.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.12* 使用DataRobot选定的模型（在这种情况下，如果值落在特定区间内则为`one`，否则为`zero`）展示了变量效应。你可以参考所选模型的特征效应来查看这些图表之间是否存在任何不一致。'
- en: Now that we understand the model from the perspective of which features are
    important and how they contribute toward the target value, we can focus on how
    well the model is doing.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经从哪些特征重要以及它们如何有助于目标值的视角理解了模型，我们可以关注模型的表现如何。
- en: Assessing model performance and metrics
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估模型性能和指标
- en: 'In this section, we will focus on how well a model is doing in trying to predict
    the target values. Let''s start by looking at the overall performance comparison
    across different models, as shown in the following screenshot:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将关注模型在尝试预测目标值方面的表现如何。让我们首先查看不同模型之间的整体性能比较，如下面的截图所示：
- en: '![Figure 7.13 – Performance across models'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.13 – 模型间的性能'
- en: '](img/Figure_7.13_B17159.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.13_B17159.jpg)'
- en: Figure 7.13 – Performance across models
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.13 – 模型间的性能
- en: 'The preceding screenshot shows the overall leaderboard, which we have seen
    before. Here, we can see the overall performance of different models based on
    the **Gamma Deviance** metric. We can also review the performance based on other
    metrics by clicking on the drop-down arrow near the metric, which shows us a list
    of metrics we can choose from, as illustrated in the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 前一个截图显示了之前见过的整体排行榜。在这里，我们可以看到基于**Gamma偏差**指标的不同模型的总体性能。我们还可以通过点击指标附近的下拉箭头来查看基于其他指标的性能，如下面的截图所示：
- en: '![Figure 7.14 – Performance metrics'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.14 – 性能指标'
- en: '](img/Figure_7.14_B17159.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.14_B17159.jpg)'
- en: Figure 7.14 – Performance metrics
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.14 – 性能指标
- en: '*Figure 7.14* shows the various metrics we can select from. You will typically
    see a similar trend across different metrics in terms of which models surface
    to the top spots. In general, the metric that DataRobot selects is a very good
    choice, if not the best choice. Let''s now inspect the performance details of
    specific models by clicking on the model and selecting the **Lift Chart** tab
    within the **Evaluate** tab, as shown in the following screenshot:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.14* 展示了我们可以选择的各项指标。你通常会看到在不同指标中，哪些模型会出现在顶部位置上呈现出相似的趋势。一般来说，DataRobot选择的指标是一个非常不错的选择，如果不是最佳选择。现在，让我们通过点击模型并在**评估**选项卡中选择**升力图**选项卡来检查特定模型的性能细节，如下面的截图所示：'
- en: '![Figure 7.15 – Lift chart'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.15 – 升力图'
- en: '](img/Figure_7.15_B17159.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.15_B17159.jpg)'
- en: Figure 7.15 – Lift chart
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.15 – 升力图
- en: 'The lift chart illustrated in the preceding screenshot shows how the predictions
    stack up against the actual values. You can select the number of bins to aggregate
    the results. The maximum value is `60`, and that is normally a good starting point.
    This means that the predictions are first sorted in ascending order and then grouped
    into `60` bins. The results you see are the average values within that bin. The
    reason for binning is that if you look at the entire dataset, there will be so
    much data that you will not be able to make any sense out of it. You can see that
    the model does very well over the entire range of values, with some small pockets
    where the differences seem higher than the rest. We typically want to see lift
    charts for multiple models, to see if there are areas where one model does better
    than another model. Let''s now look at the lift chart for the GAM, as shown in
    the following screenshot:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 前一个截图中的升力图显示了预测值与实际值之间的对比。你可以选择分组结果的桶数。最大值为`60`，这通常是一个好的起点。这意味着预测值首先按升序排序，然后分组到`60`个桶中。你看到的结果是那个桶内的平均值。分桶的原因是，如果你查看整个数据集，会有如此多的数据，你将无法从中得出任何有意义的结论。你可以看到，模型在整个值域上表现非常好，有一些小区域，其中差异似乎比其他区域更高。我们通常希望看到多个模型的升力图，以查看是否有某个模型比另一个模型表现更好的区域。现在，让我们查看GAM的升力图，如下面的截图所示：
- en: '![Figure 7.16 – Lift chart for the GAM'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.16 – GAM的升力图'
- en: '](img/Figure_7.16_B17159.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.16_B17159.jpg)'
- en: Figure 7.16 – Lift chart for the GAM
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.16 – GAM的升力图
- en: 'The results in *Figure 7.16* look very similar to the results from *Figure
    7.15*, but we can see that the GAM did not do as well for higher values. We now
    know where specifically the GAM is weaker as compared to the XGBoost model. Let''s
    look further by clicking on the **Residuals** tab within the **Evaluate** tab,
    as shown in the following screenshot:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '*图7.16* 的结果看起来与*图7.15* 的结果非常相似，但我们可以看到，对于更高的值，GAM的表现不如XGBoost模型。现在我们知道GAM相对于XGBoost模型在哪些具体区域较弱。让我们进一步查看，通过点击**评估**选项卡中的**残差**选项卡，如下面的截图所示：'
- en: '![Figure 7.17 – Model residuals'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.17 – 模型残差'
- en: '](img/Figure_7.17_B17159.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.17_B17159.jpg)'
- en: Figure 7.17 – Model residuals
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.17 – 模型残差
- en: 'The residuals seem to be well distributed around the mean but with a small
    skew toward -ve values. Let''s also check how the residuals are distributed for
    the GAM. We can see the output in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 残差似乎在平均值周围分布良好，但略偏向负值。让我们也检查一下 GAM 的残差分布。我们可以在下面的屏幕截图中看到输出：
- en: '![Figure 7.18 – Residuals for the GAM'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.18 – GAM 的残差'
- en: '](img/Figure_7.18_B17159.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.18_B17159.jpg)'
- en: Figure 7.18 – Residuals for the GAM
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.18 – GAM 的残差
- en: The residuals for the GAM are also well distributed but with a slightly larger
    skew compared to the XGBoost model. Overall, the performance of the models looks
    very good. We can now look into understanding individual predictions and their
    explanations.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: GAM 的残差也分布良好，但与 XGBoost 模型相比，略偏斜。总体而言，模型的表现看起来非常好。我们现在可以深入了解个别预测及其解释。
- en: Generating model explanations
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生成模型解释
- en: 'Another key capability of DataRobot is that it automatically generates instance-level
    explanations for each prediction. This is important in understanding why a particular
    prediction turned out the way it did. This is not only important for understanding
    the model; many times, this is needed for compliance purposes as well. I am sure
    you have seen explanations generated or offered if you are denied credit. The
    ability to generate these explanations is not straightforward and can be very
    time-consuming. Let''s first look at the explanations generated for the XGBoost
    model, as shown in the following screenshot:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: DataRobot 的另一个关键功能是它自动为每个预测生成实例级解释。这对于理解为什么特定的预测结果是这样非常重要。这不仅对于理解模型很重要；很多时候，这也需要用于合规目的。我相信如果你被拒绝信用，你一定见过生成的解释。生成这些解释的能力并不简单，可能非常耗时。让我们首先看看
    XGBoost 模型生成的解释，如下面的屏幕截图所示：
- en: '![Figure 7.19 – Model explanations'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.19 – 模型解释'
- en: '](img/Figure_7.19_B17159.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.19_B17159.jpg)'
- en: Figure 7.19 – Model explanations
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.19 – 模型解释
- en: 'Since we selected the `0` to `10000`. You can select some specific points and
    see the components that make up that prediction. In *Figure 7.19*, we have selected
    the prediction point of `27788.86`. We can see the top contributing elements on
    the right, where `engine_size` is contributing the most, and in this case, the
    value of `engine_size` is `183`. Notice that the relative contribution of features
    can vary on a case-by-case basis, and the ordering of features here will not exactly
    match the feature-impacts order we saw in the preceding section. Let''s compare
    this with explanations generated by the GAM, as shown in the following screenshot:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们选择了 `0` 到 `10000`。您可以选择一些特定的点，并查看构成该预测的组成部分。在 *图 7.19* 中，我们选择了预测点 `27788.86`。我们可以看到右侧的主要贡献元素，其中
    `engine_size` 贡献最大，在这种情况下，`engine_size` 的值为 `183`。请注意，特征的相对贡献可能会根据具体情况而变化，这里特征的排序将不会与前面章节中看到的特征影响顺序完全匹配。让我们将此与
    GAM 生成的解释进行比较，如下面的屏幕截图所示：
- en: '![Figure 7.20 – Model explanations for GAM'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 7.20 – GAM 模型的模型解释'
- en: '](img/Figure_7.20_B17159.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/Figure_7.20_B17159.jpg)'
- en: Figure 7.20 – Model explanations for GAM
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7.20 – GAM 模型的模型解释
- en: In the preceding screenshot, the point selected is for a prediction of `31465.18`.
    For this point, we can see the features that are the main contributors toward
    that price, and we also note that there was a reduction or -ve contribution due
    to the `engine_size` of `183` is much larger for the GAM.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的屏幕截图中，选择的点是预测 `31465.18`。对于这个点，我们可以看到对价格有主要贡献的特征，我们还注意到由于 `engine_size`
    的 `183` 导致的减少或负贡献在 GAM 中要大得多。
- en: The explanations for the entire dataset can be downloaded and analyzed for additional
    insights. You can also upload an entirely new dataset to score it and generate
    these explanations very easily, by clicking on the **Upload new dataset** button.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 整个数据集的解释可以下载并进行分析，以获得更多见解。您还可以通过点击**上传新数据集**按钮，轻松上传全新的数据集进行评分并生成这些解释。
- en: As you have seen in this chapter, different models have different performance,
    use the features a little bit differently, and have different levels of understandability.
    There are a few other dimensions that should be looked at before making a final
    selection of the model you want to use. Let's now look at model learning curves
    and some of the model trade-offs.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在本章中看到的，不同的模型有不同的性能，使用特征的方式略有不同，可理解性水平也不同。在最终选择你想要使用的模型之前，应该考虑几个其他维度。现在让我们看看模型学习曲线和一些模型权衡。
- en: Understanding model learning curves and trade-offs
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解模型学习曲线和权衡
- en: In **machine learning** (**ML**) problems, we are always trying to find more
    data to improve our models, but as you can imagine, there comes a time when we
    reach a point of diminishing returns. It is very hard to know when you have reached
    that point, but you can get indications by looking at the learning curves. Fortunately,
    DataRobot makes that task easy by automatically building these learning curves.
    When DataRobot starts building models, it first tries a broad range of algorithms
    on small samples of data. Promising models are then built with bigger sample sizes,
    and so on.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在**机器学习**（**ML**）问题中，我们总是试图找到更多数据来改进我们的模型，但正如你可以想象的那样，总会有一个点，收益递减。很难知道何时达到那个点，但你可以通过查看学习曲线来获得一些指示。幸运的是，DataRobot通过自动构建这些学习曲线使这项任务变得简单。当DataRobot开始构建模型时，它首先尝试在数据的小样本上使用广泛范围的算法。然后使用更大的样本大小构建有希望的模型，依此类推。
- en: 'In this process, we discover how much performance improvement happens as more
    data is added. To look at the learning curves, you can click on the **Learning
    Curves** menu item at the top of the screen, as seen in the following screenshot:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个过程中，我们发现随着更多数据的添加，性能改进了多少。要查看学习曲线，你可以点击屏幕顶部的**学习曲线**菜单项，如下面的截图所示：
- en: '![Figure 7.21 – Model learning curves'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.21 – 模型学习曲线'
- en: '](img/Figure_7.21_B17159.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.21_B17159.jpg)'
- en: Figure 7.21 – Model learning curves
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.21 – 模型学习曲线
- en: 'You can see the different model types on the right-hand side of the page. Here,
    you can click on the models you want to inspect and compare. After selecting the
    models, you click on the **+ Compute Learning Curves** button. This brings up
    a dialog box showing the selected models and corresponding sample sizes, as shown
    in the following screenshot:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在页面右侧看到不同的模型类型。在这里，你可以点击你想要检查和比较的模型。选择模型后，你点击**+ 计算学习曲线**按钮。这将弹出一个对话框，显示所选模型和相应的样本大小，如下面的截图所示：
- en: '![Figure 7.22 – Models selected for comparison'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.22 – 用于比较的模型'
- en: '](img/Figure_7.22_B17159.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.22_B17159.jpg)'
- en: Figure 7.22 – Models selected for comparison
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.22 – 用于比较的模型
- en: 'If the selections in *Figure 7.22* look correct, you can click the **Compute**
    button. You will now see the learning curves for the selected models, as shown
    in the following screenshot:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果*图7.22*中的选择看起来正确，你可以点击**计算**按钮。现在你会看到所选模型的曲线，如下面的截图所示：
- en: '![Figure 7.23 – Comparison of learning curves'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.23 – 学习曲线比较'
- en: '](img/Figure_7.23_B17159.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.23_B17159.jpg)'
- en: Figure 7.23 – Comparison of learning curves
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.23 – 学习曲线比较
- en: You can now see the improvement in performance as the sample size increases.
    We can see that the GAM learns very rapidly, but as the sample size increases,
    the XGBoost model takes over. We can see that both models will benefit from additional
    data. We can also see that if we only had half of the data we currently have,
    then the GAM would have been the clear winner.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 随着样本量的增加，你现在可以看到性能的改进。我们可以看到GAM学习非常快，但随着样本量的增加，XGBoost模型开始占据主导地位。我们可以看到，这两个模型都将从额外的数据中受益。我们还可以看到，如果我们只有目前数据的一半，那么GAM将是明显的赢家。
- en: 'We can now look at another trade-off for models—namely, the trade-off between
    speed and accuracy. If you click on the **Speed vs Accuracy** menu item at the
    top of the page, you will see a chart, as shown in the following screenshot:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以看看模型的一个另一个权衡——即速度与准确率的权衡。如果你点击页面顶部的**速度与准确率**菜单项，你会看到一个图表，如下面的截图所示：
- en: '![Figure 7.24 – Speed versus accuracy trade-off'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.24 – 速度与准确率权衡'
- en: '](img/Figure_7.24_B17159.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_7.24_B17159.jpg)'
- en: Figure 7.24 – Speed versus accuracy trade-off
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.24 – 速度与准确率权衡
- en: You will notice the DataRobot has built an AVG Blender model that seems to be
    the top model, but not by much. Blended models can sometimes produce substantial
    lift over individual models, so it is worthwhile exploring this option. We can
    select this model and click on the **Blueprint** tab within the **Describe** menu
    item.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到 DataRobot 构建了一个 AVG Blender 模型，这似乎是顶级模型，但提升并不大。混合模型有时可以比单个模型产生更大的提升，因此探索这个选项是值得的。我们可以选择这个模型，并在“描述”菜单项中的“蓝图”选项卡上点击。
- en: Summary
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we covered how to build and compare models by leveraging DataRobot's
    capabilities. As you saw, DataRobot makes it very easy to build many models quickly
    and helps us compare them. As you experienced, we tried many things and built
    dozens of models. This is DataRobot's key capability, and its importance to a
    data science team cannot be overstated. If you were to build these models on your
    own in Python, it would have taken a lot more time and effort. Instead, we used
    that time and thinking to experiment with different ideas and put more energy
    toward understanding the problem. We also learned about blueprints that encode
    best practices. These blueprints can be useful learning tools for new and experienced
    data scientists alike. We also learned how DataRobot can build ensemble or blended
    models for us.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了如何利用 DataRobot 的功能构建和比较模型。正如你所见，DataRobot 使得快速构建多个模型变得非常简单，并帮助我们进行比较。正如你所体验的，我们尝试了许多事情，构建了数十个模型。这是
    DataRobot 的关键功能，其对数据科学团队的重要性不容小觑。如果你要自己用 Python 构建这些模型，将会花费更多的时间和精力。相反，我们利用了这些时间和思考来实验不同的想法，并将更多的精力投入到理解问题上。我们还了解到了编码最佳实践的蓝图。这些蓝图对于新晋和经验丰富的数据科学家都是非常有用的学习工具。我们还学习了
    DataRobot 如何为我们构建集成或混合模型。
- en: It might be tempting to jump ahead and start deploying one of these models,
    but it is important to not directly jump to that without doing some analysis.
    In the next chapter, we will dig deeper into the models to understand them and
    see if we can gain more insights from them.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 可能会很有诱惑力直接跳过并开始部署这些模型之一，但重要的是在进行一些分析之前不要直接跳到那一步。在下一章中，我们将更深入地研究模型，以了解它们，并看看我们是否能从中获得更多见解。
