- en: '*Chapter 10*: Creating End-to-End AutoML Solutions'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第 10 章*：创建端到端 AutoML 解决方案'
- en: Now that you have created **machine learning** (**ML**) pipelines, you can learn
    how to use them in other Azure products outside of the **Azure Machine Learning**
    **Service** (**AMLS**). Perhaps the most useful is Azure Data Factory.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了机器学习（ML）管道，你可以学习如何在 Azure 的其他产品中使用它们，而不仅仅是 **Azure Machine Learning
    Service**（AMLS）。最有用的是 Azure Data Factory。
- en: '**Azure Data Factory** (**ADF**) is Azure''s premier code-free data orchestration
    tool. You can use ADF to pull data from on-premise sources into the Azure cloud,
    to run ML pipelines, and push data out of Azure by creating an **Azure Data Factory
    pipeline** (**ADF pipeline**). ADF pipelines are an integral part of creating
    end-to-end ML solutions and are the end goal of any non-real-time AutoML project.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '**Azure Data Factory**（ADF）是 Azure 首选的无代码数据编排工具。你可以使用 ADF 从本地源提取数据到 Azure 云中，运行机器学习管道，并通过创建
    **Azure Data Factory pipeline**（ADF 管道）将数据推离 Azure。ADF 管道是创建端到端机器学习解决方案的必要组成部分，也是任何非实时
    AutoML 项目的最终目标。'
- en: You will begin this chapter by learning how to connect AMLS to ADF. Once you
    have accomplished this task, you will learn how to schedule an ML pipeline using
    the parallel pipeline you created in [*Chapter 9*](B16595_09_ePub.xhtml#_idTextAnchor129),
    *Implementing a Batch Scoring Solution*.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 你将从这个章节开始学习如何将 AMLS 连接到 ADF。一旦你完成了这个任务，你将学习如何使用你在 [*第 9 章*](B16595_09_ePub.xhtml#_idTextAnchor129)
    中创建的并行管道来安排一个机器学习管道，该章节名为 *实现批量评分解决方案*。
- en: Next, you will learn how to pull data from your local machine and load it into
    the Azure cloud using ADF. Finally, you will pull everything you have together
    to create an end-to-end AutoML solution, creating an ADF pipeline for scoring
    incoming data, and another ADF pipeline for retraining AutoML models.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你将学习如何使用 ADF 从你的本地机器中提取数据并将其加载到 Azure 云中。最后，你将把所有东西整合起来，创建一个端到端的 AutoML
    解决方案，创建一个用于评分传入数据的 ADF 管道，以及另一个用于重新训练 AutoML 模型的 ADF 管道。
- en: By the end of this chapter, you will be able to integrate AMLS with ADF to create
    ADF pipelines and be able to fashion complete end-to-end AutoML solutions, from
    ingesting and scoring data, to retraining ML models. This is an invaluable, in-demand
    skillset that will set you apart from your peers.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将能够将 AMLS 与 ADF 集成以创建 ADF 管道，并能够设计完整的端到端 AutoML 解决方案，从数据摄取和评分到机器学习模型的重新训练。这是一套无价且需求旺盛的技能，将使你与你的同行区别开来。
- en: If you're already a trained data scientist, you will acquire software engineering
    skills that are rare in your field. If you're a trained engineer, you will learn
    how to incorporate ML into a familiar field you already understand.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经是一名训练有素的数据科学家，你将获得你领域内罕见的软件工程技能。如果你是一名训练有素的工程师，你将学习如何将机器学习融入你已熟悉的领域。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Connecting AMLS to ADF
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 AMLS 连接到 ADF
- en: Scheduling a machine learning pipeline in ADF
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 ADF 中安排机器学习管道
- en: Transferring data using ADF
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 ADF 转移数据
- en: Automating an end-to-end scoring solution
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化端到端评分解决方案
- en: Automating an end-to-end training solution
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化端到端训练解决方案
- en: Technical requirements
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: In this chapter, you will create an ADF resource and use the ML pipeline objects
    you created in [*Chapter 9*](B16595_09_ePub.xhtml#_idTextAnchor129), *Implementing
    a Batch Scoring Solution*. As such, you will need a working internet connection,
    an Azure account, and access to your AMLS workspace.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将创建一个 ADF 资源，并使用你在 [*第 9 章*](B16595_09_ePub.xhtml#_idTextAnchor129) 中创建的机器学习管道对象，该章节名为
    *实现批量评分解决方案*。因此，你需要一个有效的互联网连接、一个 Azure 账户以及访问你的 AMLS 工作空间。
- en: With your Azure account, you will also need permissions to create a service
    principal in Azure Active Directory. If you're using a personal Azure account,
    you should have this access. If you're using a work account, speak with your Azure
    administrator for this level of permission.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 使用你的 Azure 账户，你还需要在 Azure Active Directory 中创建服务主体的权限。如果你使用的是个人 Azure 账户，你应该有这种访问权限。如果你使用的是工作账户，你应该与你的
    Azure 管理员联系以获得这种级别的权限。
- en: 'The following are the prerequisites for the chapter:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的先决条件如下：
- en: Have access to the internet
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有互联网访问权限
- en: Have a web browser, preferably Google Chrome or Microsoft Edge Chromium
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有一个网络浏览器，最好是 Google Chrome 或 Microsoft Edge Chromium
- en: Have a Microsoft Azure account
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有 Microsoft Azure 账户
- en: Have created an AMLS workspace
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已创建 AMLS 工作空间
- en: Have created the `compute-cluster` compute cluster in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023),
    *Getting Started with Azure Machine Learning Service*
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已在[*第 2 章*](B16595_02_ePub.xhtml#_idTextAnchor023)“Azure 机器学习服务入门”中创建了`compute-cluster`计算集群。
- en: Understand how to navigate to the Jupyter environment from an Azure compute
    instance as demonstrated in [*Chapter 4*](B16595_04_ePub.xhtml#_idTextAnchor056),
    *Building an AutoML Regression Solution*
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解如何从 Azure 计算实例导航到 Jupyter 环境，如[*第 4 章*](B16595_04_ePub.xhtml#_idTextAnchor056)“构建
    AutoML 回归解决方案”中所示。
- en: Have trained and registered the `Iris-Multi-Classification-AutoML` ML model
    in [*Chapter 5*](B16595_05_ePub.xhtml#_idTextAnchor068), *Building an AutoML Classification
    Solution*
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已在[*第 5 章*](B16595_05_ePub.xhtml#_idTextAnchor068)“构建 AutoML 分类解决方案”中训练并注册了`Iris-Multi-Classification-AutoML`机器学习模型。
- en: Have created all three of the ML pipelines in [*Chapter 9*](B16595_09_ePub.xhtml#_idTextAnchor129),
    *Implementing a Batch Scoring Solution*. The three ML pipelines are *Iris-Scoring-Pipeline*,
    *Iris-Parallel-Scoring-Pipeline*, and *Iris-AutoML-Training-Pipeline*.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已在[*第 9 章*](B16595_09_ePub.xhtml#_idTextAnchor129)“实现批量评分解决方案”中创建了所有三个机器学习管道。这三个机器学习管道是*Iris-Scoring-Pipeline*、*Iris-Parallel-Scoring-Pipeline*和*Iris-AutoML-Training-Pipeline*。
- en: Have necessary permissions to create service principals in Azure Active Directory.
    If you're using a personal account, you will have these permissions.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Azure Active Directory 中拥有创建服务主体的必要权限。如果你使用的是个人账户，你将拥有这些权限。
- en: 'The code for this chapter is available here: [https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter10](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter10).'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码在此处可用：[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter10](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/tree/master/Chapter10)。
- en: Connecting AMLS to ADF
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将 AMLS 连接到 ADF
- en: ADF is a code-free data orchestration and transformation tool. With it, you
    can create ADF pipelines that can copy data into Azure, transform data, run ML
    pipelines, and push data back onto certain on-premise databases and file shares.
    It's incredibly easy to make and schedule ADF pipelines using ADF's code-free
    pipeline editing tool. As you create an ADF pipeline with the drag and drop interface,
    you're actually writing JSON code, which ADF uses to execute jobs.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ADF 是一个无需编写代码的数据编排和转换工具。使用它，你可以创建可以将数据复制到 Azure、转换数据、运行机器学习管道并将数据推回到某些本地数据库和文件共享的
    ADF 管道。使用 ADF 的无需编写代码的管道编辑工具创建和安排 ADF 管道非常简单。当你使用拖放界面创建 ADF 管道时，你实际上是在编写 JSON
    代码，这是 ADF 用于执行作业的代码。
- en: Tip
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Azure Synapse Analytics**, Microsoft Azure''s premier data warehousing and
    integrated analytics service, also has a feature nearly identical to ADF pipelines:
    **Azure Synapse pipelines**. Anything that you do in this chapter with ADF pipelines
    you can also achieve with Azure Synapse pipelines using a very similar interface.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**Azure Synapse Analytics**，微软 Azure 的顶级数据仓库和集成分析服务，也具有与 ADF 管道几乎相同的特性：**Azure
    Synapse 管道**。本章中用 ADF 管道所做的任何事情，都可以使用非常相似的界面通过 Azure Synapse 管道实现。'
- en: In this section, you will create an ADF resource and connect it to AMLS. You
    will do this using a **linked service**, an object similar to a connection string
    that ADF requires to connect to other Azure and non-Azure services and data stores.
    Linked services require authentication, and AMLS requires service principal authentication.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将创建一个 ADF 资源并将其连接到 AMLS。你将使用**链接服务**来完成此操作，这是一个类似于 ADF 连接到其他 Azure 和非
    Azure 服务和数据存储所需的连接字符串的对象。链接服务需要身份验证，而 AMLS 需要服务主体身份验证。
- en: A **service principal** is a security identity that Azure uses to grant permissions
    across Azure resources. Once you grant your service principal access to both ADF
    and AMLS, it's easy to connect them together and start running ML pipelines.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**服务主体**是 Azure 用于在 Azure 资源之间授予权限的安全标识符。一旦你授予你的服务主体对 ADF 和 AMLS 的访问权限，连接它们并开始运行机器学习管道就变得很容易了。'
- en: Creating an ADF
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 ADF
- en: An ADF can be created by using the GUI or using Azure PowerShell through the
    Azure **Command Line Interface** (**CLI**) that you used in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023),
    *Getting Started with Azure Machine Learning Service*. **PowerShell** is a series
    of cmdlets for managing Azure resources through the CLI. Here, you will first
    learn how to create an ADF resource using the Azure portal GUI. Then, you will
    learn how to create an ADF resource through PowerShell.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ADF 可以通过 GUI 或使用你在 [*第 2 章*](B16595_02_ePub.xhtml#_idTextAnchor023)，*Azure 机器学习服务入门*
    中使用的 Azure **命令行界面**（**CLI**）通过 PowerShell 创建。**PowerShell** 是一系列用于通过 CLI 管理 Azure
    资源的 cmdlet。在这里，你将首先学习如何使用 Azure 门户 GUI 创建 ADF 资源。然后，你将学习如何通过 PowerShell 创建 ADF
    资源。
- en: 'To create an ADF resource using the GUI, do the following:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 GUI 创建 ADF 资源，请执行以下操作：
- en: Navigate to the Azure portal at [https://portal.azure.com](https://portal.azure.com).
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Azure 门户 [https://portal.azure.com](https://portal.azure.com)。
- en: Click on **Create a resource** in the top-left corner.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左上角的 **创建资源**。
- en: In the search box, type in `Data Factory` and click **Data Factory** from the
    drop-down box.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入 `数据工厂` 并从下拉框中选择 **数据工厂**。
- en: Click on **Create**, the blue box in the top-left corner under **Data Factory**.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建**，位于 **数据工厂** 顶部左角的蓝色框。
- en: Now fill out the **Data Factory creation** form. Begin by selecting the same
    **Resource group** that holds your AMLS workspace. If you used the suggested **Resource
    group** in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023), *Getting Started
    with Azure Machine Learning Service*, this will be **auto-ml-example-resource-group**.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在填写 **数据工厂创建** 表单。首先选择包含你的 AMLS 工作区的相同 **资源组**。如果你在 [*第 2 章*](B16595_02_ePub.xhtml#_idTextAnchor023)，*Azure
    机器学习服务入门* 中使用了建议的 **资源组**，这将是指 **auto-ml-example-resource-group**。
- en: Select the same Azure **Region** that holds your AMLS workspace. If you used
    the suggested Azure **Region** in [*Chapter 2*](B16595_02_ePub.xhtml#_idTextAnchor023),
    *Getting Started with Azure Machine Learning Service*, this will be **North Central
    US**.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择包含你的 AMLS 工作区的相同 Azure **区域**。如果你在 [*第 2 章*](B16595_02_ePub.xhtml#_idTextAnchor023)，*Azure
    机器学习服务入门* 中使用了建议的 Azure **区域**，这将是指 **北中 US**。
- en: Give your ADF a name in the `automl-adf` followed by a number string. The following
    screenshot shows what your completed settings should look like. Leave **Version**
    as **V2**:![Figure 10.1 – Data factory settings](img/Figure_10.1_B16595.jpg)
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `automl-adf` 中给你的 ADF 起一个名字，后面跟着一个数字字符串。以下截图显示了你的完成设置应该看起来像什么。将 **版本** 保持为
    **V2**：![图 10.1 – 数据工厂设置](img/Figure_10.1_B16595.jpg)
- en: Figure 10.1 – Data factory settings
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.1 – 数据工厂设置
- en: Click the **Git configuration** tab and check the **Configure Git later** box.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Git 配置** 选项卡并勾选 **稍后配置 Git** 复选框。
- en: Click **Review + create** and hit **Create**. Your data factory is now created.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **审阅 + 创建** 并点击 **创建**。你的数据工厂现在已创建。
- en: 'Another way to create an ADF resource is through PowerShell. Follow these steps:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 创建 ADF 资源的另一种方式是通过 PowerShell。按照以下步骤操作：
- en: Navigate to the Azure portal at [https://portal.azure.com](https://portal.azure.com).
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Azure 门户 [https://portal.azure.com](https://portal.azure.com)。
- en: Click the computer screen icon at the top right of your screen as shown in the
    following screenshot. When you hover over the icon, the words **Cloud Shell**
    will appear:![Figure 10.2 – Navigating to PowerShell ](img/Figure_10.2_B16595.jpg)
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕右上角的计算机屏幕图标，如图所示。当你悬停在图标上时，会出现 **Cloud Shell** 的文字：![图 10.2 – 导航到 PowerShell](img/Figure_10.2_B16595.jpg)
- en: Figure 10.2 – Navigating to PowerShell
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.2 – 导航到 PowerShell
- en: Select **PowerShell** from the drop-down box.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉框中选择 **PowerShell**。
- en: 'Type in the following code:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下代码：
- en: '[PRE0]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '`ResourceGroupName` sets your resource group. `Set-AzDataFactoryV2` sets your
    version, while `location` sets your Azure region. `Name` gives your ADF a name.
    Your data factory has now been created.'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`ResourceGroupName` 设置你的资源组。`Set-AzDataFactoryV2` 设置你的版本，而 `location` 设置你的
    Azure 区域。`Name` 给你的 ADF 起一个名字。你的数据工厂现在已创建。'
- en: Now that you have created an ADF, the next step is to create a service principal
    and give it access to both your ADF and AMLS workspace. This will grant ADF access
    to use ML pipelines.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了一个 ADF，下一步是创建一个服务主体，并给它访问你的 ADF 和 AMLS 工作区的权限。这将授予 ADF 使用 ML 管道的权限。
- en: Creating a service principal and granting access
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建服务主体并授权访问
- en: 'Service principals are security identities that Azure uses to grant Azure resources
    access to other Azure resources. You can use service principal authentication
    across many areas of Azure, including AMLS. In order to connect AMLS to ADF, however,
    a service principal is required. To create one using the Azure portal, you must
    first navigate to **Azure Active Directory**, Azure''s premier identity and authentication
    service, by following these steps:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 服务主体是Azure用来授予Azure资源访问其他Azure资源的安全标识符。你可以在Azure的许多区域使用服务主体身份验证，包括AMLS。然而，为了将AMLS连接到ADF，需要一个服务主体。要使用Azure门户创建一个，你必须首先按照以下步骤导航到**Azure
    Active Directory**，Azure的顶级身份和认证服务：
- en: Navigate to the Azure portal at [https://portal.azure.com](https://portal.azure.com).
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到Azure门户，网址为[https://portal.azure.com](https://portal.azure.com)。
- en: Search for `Azure Active Directory` in the top search bar and click **Azure
    Active Directory** under the **Services** heading.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在顶部搜索栏中搜索`Azure Active Directory`，然后在**服务**标题下点击**Azure Active Directory**。
- en: Click **App registrations** on the left-hand side of the screen.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕左侧的**应用程序注册**。
- en: Click **New registration** at the top left of the screen.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕左上角的**新建注册**。
- en: Give the service principal a name, `adf-service-principal`, and click **Register**.
    Leave all other settings as is.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给服务主体起一个名字，`adf-service-principal`，然后点击**注册**。保留所有其他设置不变。
- en: You will now be taken to a page with all of the information about your service
    principal. Copy **Application (client) ID** and paste it in Notepad or a similar
    text editor. You will need this ID later.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在将被带到包含你的服务主体所有信息的页面。复制**应用程序（客户端）ID**，并将其粘贴到记事本或类似的文本编辑器中。你稍后需要这个ID。
- en: Click **Certificates & secrets** on the left-hand side of the screen. This will
    let you create a password for your service principal.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕左侧的**证书和秘密**。这将允许你为你的服务主体创建一个密码。
- en: Click **New client secret**. *Secret* is another word for a password in Azure.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**新建客户端秘密**。"秘密"在Azure中是密码的另一种说法。
- en: Give the secret a name, `ADF-Secret`, and set it so that it never expires as
    shown in *Figure 10.3*. Click **Add**:![Figure 10.3 – Naming your service principal
    secret ](img/Figure_10.3_B16595.jpg)
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给秘密起一个名字，`ADF-Secret`，并设置它永远不会过期，如*图10.3*所示。点击**添加**：![图10.3 – 命名你的服务主体秘密](img/Figure_10.3_B16595.jpg)
- en: Figure 10.3 – Naming your service principal secret
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.3 – 命名你的服务主体秘密
- en: Copy the **Value** field of your secret. This is your password and you will
    only be able to see it for a short time before it disappears. Once it vanishes,
    you will never be able to see it again. Paste it into Notepad or a similar text
    editor, as you will need it later when creating your ADF linked service.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制你的秘密的**值**字段。这是你的密码，你只能在它消失之前短暂地看到它。一旦它消失，你就再也无法看到它了。将它粘贴到记事本或类似的文本编辑器中，因为你稍后创建你的ADF链接服务时需要它。
- en: With your service principal created, you must now grant it access to both AMLS
    and ADF. Navigate to the front page of the Azure portal at [https://portal.azure.com](https://portal.azure.com).
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的服务主体创建后，你必须现在授予它对AMLS和ADF的访问权限。导航到Azure门户的前页，网址为[https://portal.azure.com](https://portal.azure.com)。
- en: Open your AMLS resource by clicking the **Machine Learning** icon near the top
    of your screen under **Azure Services**. You should see it if you have recently
    used AMLS, as shown in *Figure 10.4*:![Figure 10.4 – Azure services panel ](img/Figure_10.4_B16595.jpg)
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击屏幕上**Azure服务**部分靠近顶部的**机器学习**图标来打开你的AMLS资源。如果你最近使用过AMLS，你应该能看到它，如*图10.4*所示：![图10.4
    – Azure服务面板](img/Figure_10.4_B16595.jpg)
- en: Figure 10.4 – Azure services panel
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.4 – Azure服务面板
- en: Click the name of your AMLS workspace to access the resource.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你的AMLS工作区的名称以访问资源。
- en: Click **Access Control (IAM)** on the left-hand panel.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧面板上的**访问控制（IAM）**。
- en: Click **Add role assignments**.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加角色分配**。
- en: Select `adf-service-principal` and click it as shown in *Figure 10.5*. Then,
    click **Save**:![Figure 10.5 – Granting permission to your service principal ](img/Figure_10.5_B16595.jpg)
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`adf-service-principal`，如*图10.5*所示点击它。然后，点击**保存**：![图10.5 – 授予你的服务主体权限](img/Figure_10.5_B16595.jpg)
- en: Figure 10.5 – Granting permission to your service principal
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.5 – 授予你的服务主体权限
- en: You have now granted your service principal access to AMLS. Now, you must do
    the same thing for ADF. Begin by navigating to the front page of the Azure portal
    by clicking **Home** in the top-left corner of your screen.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在已经授予你的服务主体对AMLS的访问权限。现在，你必须为ADF做同样的事情。首先，通过点击屏幕左上角的**主页**，导航到Azure门户的前页。
- en: Click the **Data factories** icon at the top of your screen under **Azure Services**.
    If you have used ADF lately, you will see this icon.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕顶部的**Azure 服务**下点击**数据工厂**图标。如果您最近使用过 ADF，您将看到此图标。
- en: Click the name of the data factory you made to open up the resource.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击您创建的数据工厂的名称以打开资源。
- en: Repeat *steps 14-16* for ADF. These steps are identical to AMLS. You have now
    granted your service principal access to both ADF and AMLS.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对 ADF 重复*步骤 14-16*。这些步骤与 AMLS 相同。现在您已授予服务主体对 ADF 和 AMLS 的访问权限。
- en: Creating an ADF resource through the Azure CLI
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通过 Azure CLI 创建 ADF 资源
- en: 'You can also create a service principal and grant it access to ADF and AMLS
    through the Azure CLI with the following steps:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过以下步骤在 Azure CLI 中创建服务主体并授予其对 ADF 和 AMLS 的访问权限：
- en: Open up the Azure CLI by clicking the computer screen icon at the top right
    of your screen and select **Bash** from the drop-down menu.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击屏幕右上角的计算机屏幕图标打开 Azure CLI，然后从下拉菜单中选择**Bash**。
- en: 'Type in the following code to create your service principal, assigning it a
    name:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下代码以创建您的服务主体，并为其分配一个名称：
- en: '[PRE1]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Copy both the `appid` and `password` fields. You will never see the value for
    your password again, so make sure to copy it. This maps to **Application (client)
    ID** and the secret.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制`appid`和`password`字段。您将再也看不到密码的值，所以请确保复制它。这对应于**应用程序（客户端）ID**和密钥。
- en: 'Use the following code to grant your service principal access to all resources
    in the resource group containing both AMLS and ADF. Change to match your resource
    group if necessary. Use `assignee` to pass in your service principal application
    ID. Use `role` to pass in the correct level of access, in this case, `resource-group`
    to assign access to the correct **Resource group**:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码授予您的服务主体对包含 AMLS 和 ADF 的资源组中所有资源的访问权限。如有必要，请将其更改为匹配您的资源组。使用`assignee`传入您的服务主体应用程序
    ID。使用`role`传入正确的访问级别，在这种情况下，使用`resource-group`将访问权限分配给正确的**资源组**：
- en: '[PRE2]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: With your service principal created and granted access to the appropriate resources,
    your next step is to open ADF and create the linked service. Make sure you have
    Notepad open as you will need both the service principal ID as well as the secret
    you created. Having these readily available will make the next set of steps easy.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建服务主体并授予适当的资源访问权限后，您的下一步是打开 ADF 并创建链接服务。请确保您打开了记事本，因为您将需要服务主体 ID 以及您创建的密钥。这些信息随时可用将使下一步变得容易。
- en: Creating a linked service to connect ADF with AMLS
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建一个链接服务以连接 ADF 和 AMLS
- en: 'Moving forward, now you''ll get a chance to open up ADF and get used to its
    interface. ADF is designed largely as a code-free platform, but everything you
    create is also written as JSON files under the hood. To link ADF with AMLS, follow
    these steps:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 从现在开始，您将有机会打开 ADF 并熟悉其界面。ADF 主要设计为一个无代码平台，但您创建的每一项内容都在底层以 JSON 文件的形式编写。要连接 ADF
    和 AMLS，请按照以下步骤操作：
- en: Navigate to the Azure portal at [https://portal.azure.com](https://portal.azure.com).
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Azure 门户 [https://portal.azure.com](https://portal.azure.com)。
- en: Click the **Data factories** icon at the top of your screen under **Azure Services**.
    If you have used ADF lately, you will see this icon. If not, use the search bar
    at the top of your screen.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕顶部的**Azure 服务**下点击**数据工厂**图标。如果您最近使用过 ADF，您将看到此图标。如果没有，请使用屏幕顶部的搜索栏。
- en: Click the name of the data factory you made that starts with the name `autol-adf`.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击以`autol-adf`开头的您创建的数据工厂的名称。
- en: Click **Author & Monitor** in the middle of the screen. You should now see the
    ADF user interface, shown in *Figure 10.6*:![Figure 10.6 – ADF UI ](img/Figure_10.6_B16595.jpg)
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕中间点击**作者和监控**。现在您应该看到 ADF 用户界面，如图 10.6 所示：![图 10.6 – ADF UI](img/Figure_10.6_B16595.jpg)
- en: Figure 10.6 – ADF UI
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.6 – ADF UI
- en: Click the toolbox icon on the left-hand side. When you hover over the icon for
    a few seconds, the word **Manage** will appear to indicate the section you're
    navigating to.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧点击工具箱图标。当您将鼠标悬停在图标上几秒钟时，会出现单词**管理**，表示您正在导航到的部分。
- en: Click **Linked Services** under **Connections** in the top-left corner.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕左上角的**连接**下点击**链接服务**。
- en: Click **Create linked service**.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建链接服务**。
- en: Click **Compute** and select **Azure Machine Learning** as shown in *Figure
    10.7*:![Figure 10.7 – Create an Azure ML linked service ](img/Figure_10.7_B16595.jpg)
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**计算**并选择如图 10.7 所示的**Azure 机器学习**：![图 10.7 – 创建 Azure ML 链接服务](img/Figure_10.7_B16595.jpg)
- en: Figure 10.7 – Create an Azure ML linked service
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.7 – 创建 Azure ML 链接服务
- en: Click **Continue**.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**。
- en: Now it's time to fill out the linked service creation form. Begin by giving
    your linked service a name such as `AMLS Linked Service`.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在是填写链接服务创建表单的时候了。首先，给您的链接服务起一个名称，例如`AMLS 链接服务`。
- en: Select **AutoResolveIntegrationRuntime** from the dropdown under **Connect via
    integration runtime**. An **integration runtime** is simply the compute that ADF
    uses under the hood to move data and run your jobs. The **Azure integration runtime**
    (**Azure IR**) is a serverless, elastic compute fully managed by ADF.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**通过集成运行时连接**下的下拉菜单中选择**AutoResolveIntegrationRuntime**。**集成运行时**是 ADF 在底层用于移动数据和运行作业的计算。**Azure
    集成运行时**（**Azure IR**）是一种由 ADF 完全管理的无服务器、弹性计算。
- en: Select your Azure subscription from the drop-down box under **Azure subscription**.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**Azure 订阅**下的下拉框中选择您的 Azure 订阅。
- en: Select your AMLS workspace from the drop-down box under **Azure Machine Learning
    workspace name**.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**Azure 机器学习工作区名称**下的下拉框中选择您的 AMLS 工作区。
- en: Paste your service principal application (client) ID into the **Service principal
    ID** textbox. You copied this ID into a text editor earlier.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您的服务主体应用程序（客户端）ID粘贴到**服务主体 ID**文本框中。您之前已将此 ID 复制到文本编辑器中。
- en: Paste your service principal secret into the **Service principal key** textbox.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您的服务主体密钥粘贴到**服务主体密钥**文本框中。
- en: Click **Test connection**.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**测试连接**。
- en: If the result of the test is **Connection successful**, click **Create**.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果测试结果为**连接成功**，则点击**创建**。
- en: Your linked service has been created. Hover over your new linked service and
    click the **{ }** icon to view the underlying JSON code.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的链接服务已创建。将鼠标悬停在您的新链接服务上并点击**{ }**图标以查看底层的 JSON 代码。
- en: You have successfully connected your ADF to AMLS. In this short section, you
    have learned a lot. Not only have you learned how to create an ADF, but you have
    also learned how to create service principals, grant access, and create linked
    services. With this infrastructure created, you can now learn how to easily run
    and schedule ML pipelines inside of an ADF pipeline.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 您已成功将 ADF 连接到 AMLS。在本节中，您学到了很多。您不仅学会了如何创建 ADF，还学会了如何创建服务主体、授权访问和创建链接服务。有了这个基础设施，您现在可以学习如何在
    ADF 管道中轻松运行和安排 ML 管道。
- en: Scheduling a machine learning pipeline in ADF
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 ADF 中安排机器学习管道
- en: Perhaps ADF's best feature is its ease of use. By clicking and dragging objects
    across a screen, you can easily orchestrate a flow of seamless data ingestion,
    transformation, and ML through an ADF pipeline. Moreover, with a few more clicks,
    you can schedule that ADF pipeline to run whenever you want. Gaining this skill
    will enable you to create code-free data orchestration runs quickly and easily.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 也许 ADF 的最佳特性是其易用性。通过在屏幕上点击并拖动对象，您可以通过 ADF 管道轻松编排无缝的数据摄取、转换和机器学习流程。此外，通过几点击，您还可以安排
    ADF 管道在您想要的时间运行。掌握这项技能将使您能够快速轻松地创建无代码的数据编排运行。
- en: 'First, you will schedule and run the simplest ML pipeline you created in [*Chapter
    9*](B16595_09_ePub.xhtml#_idTextAnchor129), *Implementing a Batch Scoring Solution*,
    the `Iris-Scoring-Pipeline`. To do so, follow these steps:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您将安排并运行您在[*第 9 章*](B16595_09_ePub.xhtml#_idTextAnchor129)，“实现批量评分解决方案”中创建的最简单的
    ML 管道，即 `Iris-Scoring-Pipeline`。为此，请按照以下步骤操作：
- en: Navigate to your ADF resource and click **Author & Monitor**.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到您的 ADF 资源并点击**作者与监控**。
- en: Click the pen icon on the left-hand side. When you hover over this icon, the
    word **Author** will appear to indicate which section you're navigating to.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧点击笔形图标。当您将鼠标悬停在此图标上时，将显示文字**作者**，指示您正在导航到的部分。
- en: Click the blue cross icon next to the search box under **Factory Resources**
    in the top-left corner. When you hover over this icon, the words **Add new resource**
    will appear.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕左上角的**工厂资源**下方的搜索框旁边的蓝色十字图标处点击。当您将鼠标悬停在此图标上时，将显示文字**添加新资源**。
- en: Click **Pipeline** from the resulting dropdown as shown in *Figure 10.8*:![Figure
    10.8 – Creating your first ADF pipeline ](img/Figure_10.8_B16595.jpg)
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如*图 10.8*所示，从结果下拉菜单中点击**管道**：![图 10.8 – 创建您的第一个 ADF 管道](img/Figure_10.8_B16595.jpg)
- en: Figure 10.8 – Creating your first ADF pipeline
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.8 – 创建您的第一个 ADF 管道
- en: Click **Machine Learning** under **Activities** in the center-left of the screen.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕中心左方的**活动**下点击**机器学习**。
- en: Click and drag the blue flask icon onto the canvas as shown in *Figure 10.9*.
    This is the **Machine Learning Executive Pipeline** activity:![Figure 10.9 – Machine
    Learning Execute Pipeline activity ](img/Figure_10.9_B16595.jpg)
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照图10.9所示，将蓝色烧瓶图标拖放到画布上。这是**机器学习执行管道**活动：![图10.9 – 机器学习执行管道活动](img/Figure_10.9_B16595.jpg)
- en: Figure 10.9 – Machine Learning Execute Pipeline activity
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.9 – 机器学习执行管道活动
- en: Click `Execute Iris Scoring Pipeline`.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`执行 Iris Scoring Pipeline`。
- en: Click **Settings** underneath the canvas.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在画布下方点击**设置**。
- en: Select **AMLS Linked Service** from the first drop-down box to connect your
    linked service.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从第一个下拉菜单中选择**AMLS Linked Service**以连接您的链接服务。
- en: Select **Iris-Scoring-Pipeline** from the **Machine Learning pipeline name**
    drop-down box.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**机器学习管道名称**下拉菜单中选择**Iris-Scoring-Pipeline**。
- en: Select a pipeline ID from the **Machine Learning pipeline ID** drop-down box.
    There should only be one pipeline ID unless you published multiple ML pipelines
    with the same name.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**机器学习管道ID**下拉菜单中选择一个管道ID。除非您发布了多个具有相同名称的ML管道，否则应该只有一个管道ID。
- en: Click the abacus icon in the top right-hand corner to open the `pipeline1` to
    `Iris Scoring Pipeline`. Spaces are allowed.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击右上角的算盘图标以打开从`pipeline1`到`Iris Scoring Pipeline`的`pipeline`。允许使用空格。
- en: Click **Publish All** near the top left of your screen. Then, click **Publish**
    in the bottom right-hand corner to create your ADF pipeline.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕右上角附近点击**全部发布**。然后，点击屏幕右下角的**发布**以创建您的ADF管道。
- en: Important tip
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: In order to save your work in ADF, you need to publish your changes. Make sure
    you publish multiple times as you're developing new ADF pipelines.
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了在ADF中保存您的作品，您需要发布您的更改。确保在开发新的ADF管道时多次发布。
- en: To schedule your newly created ADF pipeline, click **Add trigger** near the
    top of your screen.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要安排您新创建的ADF管道，请点击屏幕顶部的**添加触发器**。
- en: Click **New/Edit** from the resulting dropdown.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击结果下拉菜单中的**新建/编辑**。
- en: Click the **Choose Trigger** dropdown and select **+ New**.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择触发器**下拉菜单并选择**新建**。
- en: Like the AML Python SDK, there are multiple types of triggers within ADF. Execute
    **schedule-based triggers** on a timetable. Execute **event-based triggers** when
    a file is created or deleted in an Azure blob container.
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与AML Python SDK一样，ADF中有多种类型的触发器。在时间表上执行**基于调度的触发器**。当在Azure blob容器中创建或删除文件时执行**基于事件的触发器**。
- en: '**Tumbling window triggers** are similar to schedule-based triggers, but they
    are more advanced and have options such as retrying failed runs and backfilling
    past time periods. For this exercise, create a simple schedule-based trigger.'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**滚动窗口触发器**类似于基于调度的触发器，但它们更高级，具有诸如重试失败的运行和回填过去时间段等选项。对于这个练习，创建一个简单的基于调度的触发器。'
- en: Give your trigger a name such as `Once Monthly`.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给您的触发器起一个名字，例如`每月一次`。
- en: Select **Schedule** under **Type**.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**类型**下选择**调度**。
- en: Pick a start date and the appropriate time zone from the respective drop-down
    boxes.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从相应的下拉菜单中选择一个开始日期和适当的时间区域。
- en: Under `1` and select **Month** from the drop-down box.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`1`下选择从下拉菜单中的**月份**。
- en: Click **OK** twice.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击两次**确定**。
- en: 'Click **Publish All** near the top left of your screen, followed by **Publish**
    in the bottom right-hand corner. You are now finished. Your completed ADF pipeline
    should look something like *Figure 10.10*. To see the JSON code, click the **{
    }** icon at the top right-hand side of your screen:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕右上角附近点击**全部发布**，然后点击屏幕右下角的**发布**。现在您已经完成。您的完成ADF管道应该看起来像图10.10。要查看JSON代码，请点击屏幕右上角的**{
    }**图标：
- en: '![Figure 10.10 – Your first completed ADF pipeline ](img/Figure_10.10_B16595.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图10.10 – 您的第一个完成的ADF管道](img/Figure_10.10_B16595.jpg)'
- en: Figure 10.10 – Your first completed ADF pipeline
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.10 – 您的第一个完成的ADF管道
- en: While you have created and scheduled your first ADF pipeline, it does not mean
    much. After all, while this ADF pipeline will trigger your ML pipeline on a monthly
    basis, you still need to automate the ingestion of new data. Thankfully, data
    ingestion is where ADF excels. You will see just how easy transferring data is
    using ADF in the next section. No matter where the data lies, ADF can pull it
    in.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然您已创建并安排了第一个ADF管道，但这并不意味着什么。毕竟，尽管这个ADF管道将每月触发您的ML管道，但您仍然需要自动化新数据的摄入。幸运的是，ADF在数据摄入方面表现出色。您将在下一节中看到使用ADF转移数据是多么简单。无论数据在哪里，ADF都可以将其拉入。
- en: Transferring data using ADF
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用ADF转移数据
- en: Moving data from on-premise to the cloud and from the cloud to on-premise is
    a key skill for any data engineer or data scientist. ADF accomplishes this task
    with the **Copy data** activity. This is ADF's most basic and most powerful function.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 从本地到云以及从云到本地的数据迁移是任何数据工程师或数据科学家的一项关键技能。ADF通过**复制数据**活动完成这项任务。这是ADF最基本也是最有力的功能。
- en: In this section, first, you will download a **self-hosted integration runtime**
    (**SHIR**) to your local machine, allowing your computer to serve as a compute
    resource to load data into Azure. Then, you will create a linked service for your
    **Azure storage account** and your local PC.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，首先，您将下载一个**自托管集成运行时**（**SHIR**）到您的本地机器，使您的计算机能够作为计算资源将数据加载到Azure。然后，您将为您的**Azure存储帐户**和您的本地PC创建一个链接服务。
- en: Next, you will download a file from the GitHub repository and save it to your
    PC. Finally, you will create a **Copy data** activity in ADF that will take data
    from your PC and put it into the same Azure blob container that's connected to
    your AML datastore.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将从GitHub仓库下载一个文件并将其保存到您的PC上。最后，您将在ADF中创建一个**复制数据**活动，该活动将从您的PC中提取数据并将其放入与AML数据存储连接的同一Azure
    blob容器中。
- en: Going through these exercises will give you the data engineering skills that
    will allow you to create an end-to-end solution in the next section.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些练习将为你提供数据工程技能，这将使你能够在下一节创建端到端解决方案。
- en: Installing a self-hosted integration runtime
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装自托管集成运行时
- en: 'Before you can copy data into Azure, you first need to install a SHIR on your
    local machine. Begin with the following steps:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在您可以将数据复制到Azure之前，您首先需要在您的本地机器上安装一个SHIR。以下步骤开始：
- en: Navigate to your ADF resource and click **Author & Monitor**.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到您的ADF资源并点击**作者和监控**。
- en: Click the toolbox icon on the left-hand side. When you hover over this icon,
    the word **Manage** will appear to indicate which section you're navigating to.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧的工具箱图标。当您将鼠标悬停在此图标上时，将出现单词**管理**，以指示您正在导航到的部分。
- en: Click **Integration runtimes** under **Connections**.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**连接**下点击**集成运行时**。
- en: Click **+New** at the top center of your screen.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕顶部中心点击**新建**。
- en: Select **Azure, Self-Hosted** and click **Continue** as shown in *Figure 10.11*:![Figure
    10.11 – Selecting the right integration runtime to install a SHIR ](img/Figure_10.11_B16595.jpg)
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Azure, Self-Hosted**并点击**继续**，如图10.11所示：![图10.11 – 选择正确的集成运行时安装SHIR](img/Figure_10.11_B16595.jpg)
- en: Figure 10.11 – Selecting the right integration runtime to install a SHIR
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.11 – 选择正确的集成运行时安装SHIR
- en: Select **Self-Hosted** and click **Continue**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**自托管**并点击**继续**。
- en: Give your new SHIR a name, `IntegrationRuntime`, and click **Create**.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给您的新SHIR起个名字，`IntegrationRuntime`，并点击**创建**。
- en: 'On the next screen, you will see two options to install the SHIR. Choose **Option
    1: Express setup** by clicking **Click here to launch the express setup for this
    computer**.'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一屏幕上，您将看到两个安装SHIR的选项。通过点击**点击此处启动此计算机的快速设置**选择**选项1：快速设置**。
- en: Important note
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: If you are using your work machine, ask your IT security organization for permission
    before installing the SHIR. It does open up a connection between your machine
    and the public-facing Azure cloud.
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您正在使用工作机器，在安装SHIR之前请向您的IT安全组织请求许可。它确实会在您的机器和面向公众的Azure云之间建立连接。
- en: This will download the SHIR installation file to your compute. Open the file
    and click **Yes**. Installation should take between 5 and 10 minutes.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将下载SHIR安装文件到您的计算设备。打开文件并点击**是**。安装应需时5到10分钟。
- en: 'Once the installation is finished, click **Close**. Your SHIR should now appear
    as shown in *Figure 10.12*:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，点击**关闭**。您的SHIR现在应如图10.12所示：
- en: '![Figure 10.12 – Self-hosted integration runtime ](img/Figure_10.12_B16595.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![图10.12 – 自托管集成运行时](img/Figure_10.12_B16595.jpg)'
- en: Figure 10.12 – Self-hosted integration runtime
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.12 – 自托管集成运行时
- en: With an SHIR installed on your local machine, you're now able to move data from
    your PC directly into Azure using ADF. Just as you created a linked service for
    AMLS, next you will create a linked service for Azure Blob storage.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的本地机器上安装了SHIR后，您现在可以使用ADF直接将数据从您的PC移动到Azure。就像您为AMLS创建了链接服务一样，接下来您将为Azure
    Blob存储创建一个链接服务。
- en: Creating an Azure Blob storage linked service
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建Azure Blob存储链接服务
- en: 'To create a linked service connecting ADF to **Azure Blob storage**, follow
    these steps:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个连接ADF到**Azure Blob存储**的链接服务，请按照以下步骤操作：
- en: Click **Linked services** under **Connections** in the top-left corner of your
    screen.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕左上角的 **连接** 下的 **链接服务** 上点击。
- en: Click **+New** at the top center of your screen.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕顶部中央点击 **+新建**。
- en: Select **Azure Blob Storage** and click **Continue** to see the linked service
    creation form.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **Azure Blob Storage** 并点击 **继续** 以查看链接服务创建表单。
- en: Give your linked service a name such as `AMLSDatastoreLink`.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给你的链接服务起一个像 `AMLSDatastoreLink` 这样的名字。
- en: Select **AutoResolveIntegrationRuntime**.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **AutoResolveIntegrationRuntime**。
- en: Select your Azure subscription from the drop-down box under **Azure subscription**.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 **Azure 订阅** 下的下拉框中选择你的 Azure 订阅。
- en: Select your storage account from the drop-down box under `automlexamplew` followed
    by a string of numbers.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `automlexamplew` 后跟一串数字的下拉框中选择你的存储账户。
- en: Click **Test connection**.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **测试连接**。
- en: If your test was successful, click **Create**.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你的测试成功，点击 **创建**。
- en: 'Download `Iris_Scoring_Data_for_ADF.csv` from the GitHub repository:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 GitHub 仓库下载 `Iris_Scoring_Data_for_ADF.csv`：
- en: '[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Scoring_Data_for_ADF.csv](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Scoring_Data_for_ADF.csv)'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Scoring_Data_for_ADF.csv](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Scoring_Data_for_ADF.csv)'
- en: Create a folder on your PC called `Iris`. Move `Iris_Scoring_Data_for_ADF.csv`
    there.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的 PC 上创建一个名为 `Iris` 的文件夹。将 `Iris_Scoring_Data_for_ADF.csv` 移动到那里。
- en: Creating a linked service to your PC
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建一个连接到你的 PC 的链接服务
- en: 'Next, it''s time to create a linked service to your PC. This linked service
    will make use of your SHIR. Use the following steps:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，是时候创建一个连接到你的 PC 的链接服务了。这个链接服务将使用你的 SHIR。按照以下步骤操作：
- en: Click **Linked Services** and **+New** as you did to create the other linked
    services.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **链接服务** 和 **+新建**，就像创建其他链接服务一样。
- en: Click **File**, select **File System**, and click **Continue** to see the linked
    service creation form.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **文件**，选择 **文件系统**，并点击 **继续** 以查看链接服务创建表单。
- en: Give your linked service a name such as `LocalPCLink`.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给你的链接服务起一个像 `LocalPCLink` 这样的名字。
- en: Select your SHIR from the drop-down box under **Connect via integration runtime**.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 **通过集成运行时连接** 下的下拉框中选择你的 SHIR。
- en: Under `Iris` folder.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `Iris` 文件夹下。
- en: Fill in the username and password that you use to log into your PC. To find
    your username, search for **System Information** in your PC's search bar and click
    it; your user name can be found under **System Summary**.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写用于登录你的 PC 的用户名和密码。要找到你的用户名，在你的 PC 的搜索栏中搜索 **系统信息** 并点击它；你的用户名可以在 **系统摘要**
    下找到。
- en: Click **Test connection**.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **测试连接**。
- en: If your test was successful, click **Create**.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果测试成功，点击 **创建**。
- en: Creating an ADF pipeline to copy data
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建一个用于复制数据的 ADF 管道
- en: 'With an SHIR, Azure Blob storage linked service, and a linked service connecting
    to your local PC, you are now ready to build an ADF pipeline using the **Copy
    data** activity with the following steps:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 SHIR、Azure Blob 存储链接服务和连接到本地 PC 的链接服务，你现在可以使用以下步骤使用 **复制数据** 活动构建 ADF 管道：
- en: Click the pen icon on the left-hand side of your ADF.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 ADF 的左侧点击笔形图标。
- en: Click the blue cross icon next to the search box under **Factory Resources**
    in the top-left corner. When you hover over this icon, the words **Add new resource**
    will appear.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕左上角的 **工厂资源** 旁边的搜索框旁边点击蓝色十字图标。当鼠标悬停在此图标上时，会显示文字 **添加新资源**。
- en: Click **Copy Data tool** from the resulting dropdown as shown in *Figure 10.13*:![Figure
    10.13 – Copy Data tool ](img/Figure_10.13_B16595.jpg)
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如 *图 10.13* 所示，从结果下拉菜单中点击 **复制数据工具**：![图 10.13 – 复制数据工具](img/Figure_10.13_B16595.jpg)
- en: Figure 10.13 – Copy Data tool
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 10.13 – 复制数据工具
- en: Under `Copy Iris Data to Azure` and click **Next**.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `Copy Iris Data to Azure` 下点击 **下一步**。
- en: You now have to select your source datastore. Select the linked service to your
    PC, **LocalPCLink**, and click **Next**.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在必须选择你的源数据存储。选择连接到你的 PC 的链接服务，**LocalPCLink**，并点击 **下一步**。
- en: Choose the data you wish to transfer into Azure by clicking `Iris_Scoring_Data_for_ADF.csv`,
    and clicking **Choose**.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击 `Iris_Scoring_Data_for_ADF.csv` 并点击 **选择** 来选择你希望传输到 Azure 的数据。
- en: Click **Next**.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **下一步**。
- en: Under **File format settings**, check the box for **First row as header** and
    click **Next**.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **文件格式设置** 下，勾选 **第一行作为标题** 并点击 **下一步**。
- en: You now have to select your destination datastore. Select the linked service
    to your Azure storage account, **AMLSDatastoreLink**.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在必须选择您的目标数据存储库。选择连接到Azure存储账户的链接服务，**AMLSDatastoreLink**。
- en: Under `Input_Folder/Iris_Scoring_Data.csv` and click `Iris_Scoring_Data.csv`
    in a folder called `Input_Folder`. The folder will be created if it does not exist.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Input_Folder/Iris_Scoring_Data.csv`下，点击文件夹`Input_Folder`中的`Iris_Scoring_Data.csv`。如果不存在，文件夹将被创建。
- en: Under **File format settings**, check the box for **Add header to file** and
    click **Next**.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**文件格式设置**下，勾选**添加标题到文件**并点击**下一步**。
- en: Click **Next** under **Settings** without changing any of the defaults.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**设置**下点击**下一步**，不要更改任何默认设置。
- en: Click **Next** under **Summary**. Your ADF pipeline will now be created and
    run.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**摘要**下点击**下一步**。您的ADF管道现在将被创建并运行。
- en: Click **Finish**. You will now be transported to the main ADF pipeline authoring
    tool.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**。您现在将被带到ADF管道的主要创作工具。
- en: Click `Copy Iris Data to Azure` under **Pipelines**. You will notice that your
    **Copy data** activity will be poorly named.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**管道**下点击`将Iris数据复制到Azure`。您会注意到您的**复制数据**活动命名不佳。
- en: Click your activity and rename it `Copy Iris Data from PC` as shown in *Figure
    10.14*:![Figure 10.14 – Finished ADF pipeline with the Copy data activity ](img/Figure_10.14_B16595.jpg)
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击您的活动并将其重命名为`从PC复制Iris数据`，如图*图10.14*所示：![图10.14 – 包含复制数据活动的完成ADF管道](img/Figure_10.14_B16595.jpg)
- en: Figure 10.14 – Finished ADF pipeline with the Copy data activity
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.14 – 包含复制数据活动的完成ADF管道
- en: Save your change to the pipeline by clicking **Publish All** and then **Publish**.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击**全部发布**然后**发布**来保存对管道的更改。
- en: You have now successfully transferred data from your PC into Azure using ADF.
    This is a foundational skill for data engineering and allows you to transfer all
    sorts of data into the cloud. Like the ADF pipeline you created in the previous
    section for executing ML pipelines, you can schedule this to run on any time schedule
    you wish.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已成功使用ADF将数据从您的PC传输到Azure。这是数据工程的基础技能，允许您将各种数据传输到云端。就像您在上一节中创建的ADF管道来执行ML管道一样，您可以安排它在任何您希望的时间表上运行。
- en: We are now going to bring together all of the skills you have learned in this
    chapter to write a truly productionalizable ADF pipeline. This pipeline will ingest
    data from your computer, score it, and then write results back to your local machine.
    Even though it's not a trivial task by any means, you will be able to churn out
    pipeline after pipeline by the end of this chapter.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '我们现在将结合本章中学到的所有技能，编写一个真正可生产的ADF管道。此管道将从您的计算机中摄取数据，评分数据，然后将结果写回到您的本地机器。尽管这不是一项微不足道的任务，但您将在本章结束时能够连续生成管道。 '
- en: Automating an end-to-end scoring solution
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化端到端评分解决方案
- en: Ultimately, the end goal of any AutoML project is to create an automated scoring
    solution. Data gets pulled in from a source, scored automatically using the model
    you trained, and the results get stored in a location of your choice. By combining
    everything you've learned in the previous three sections, you can accomplish this
    task easily.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 任何AutoML项目的最终目标都是创建一个自动评分解决方案。数据从源中提取，使用您训练的模型自动评分，并将结果存储在您选择的位置。通过结合您在前三个部分中学到的所有内容，您可以轻松完成这项任务。
- en: You will begin this section by opening up AMLS, creating a new dataset, and
    slightly altering your existing `Iris-Scoring-Pipeline`. Then, after republishing
    your pipeline with a new name, you will combine it with the **Copy data** activity
    you created to load data into Azure.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 您将开始本节，通过打开AMLS，创建一个新的数据集，并稍微修改您现有的`Iris-Scoring-Pipeline`。然后，在以新名称重新发布您的管道后，您将将其与您创建的**复制数据**活动结合起来，以便将数据加载到Azure中。
- en: Next, you will create another Copy Data activity to transfer your results from
    Azure to your PC and schedule the job to run once a week on Mondays. This is a
    very common pattern in ML, and it's one you can accomplish without any code at
    all using ADF.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将创建另一个复制数据活动，将您的结果从Azure传输到您的PC，并安排作业每周一运行一次。这在ML中是一个非常常见的模式，您可以使用ADF完全不写任何代码就能完成这项任务。
- en: Editing an ML pipeline to score new data
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 编辑ML管道以评分新数据
- en: 'First, you need to create a new ML pipeline by editing `Iris-Scoring-Pipeline`
    you created in [*Chapter 9*](B16595_09_ePub.xhtml#_idTextAnchor129), *Implementing
    a Batch Scoring Solution*, with the following steps:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要通过编辑[*第9章*](B16595_09_ePub.xhtml#_idTextAnchor129)中创建的`Iris-Scoring-Pipeline`来创建一个新的ML管道，步骤如下：
- en: Access your AML studio at [https://ml.azure.com](https://ml.azure.com).
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://ml.azure.com](https://ml.azure.com)访问你的AML工作室。
- en: Use the GUI to create a new dataset as you did in [*Chapter 3*](B16595_03_ePub.xhtml#_idTextAnchor044),
    *Training Your First AutoML Model*. Begin by clicking **Datasets** under **Assets**
    on the left-hand panel.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用GUI创建一个新的数据集，就像你在[*第3章*](B16595_03_ePub.xhtml#_idTextAnchor044)中做的那样，*训练你的第一个AutoML模型*。首先，在左侧面板下点击**资产**下的**数据集**。
- en: After clicking `Iris Local Scoring Data`.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`Iris Local Scoring Data`后。
- en: Select `Iris_Data.csv` in `Input_Folder`. This is the data you copied over from
    your PC.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Input_Folder`中选择`Iris_Data.csv`。这是你从你的PC上复制过来的数据。
- en: Finish creating the dataset, making sure to set the option under the **Column
    headers** dropdown to **Use headers from the first file** in order to pull in
    column names.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成创建数据集，确保在**列标题**下拉菜单下设置选项为**使用第一个文件的标题**，以便拉入列名。
- en: With your dataset created, navigate to your `machine-learning-pipeline` Python
    notebook in Jupyter.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建你的数据集后，导航到你的Jupyter中的`machine-learning-pipeline` Python笔记本。
- en: Click **File** at the top left and select **Make a Copy** from the drop-down
    box.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左上角的**文件**，并从下拉框中选择**创建副本**。
- en: Rename your copied notebook to `machine-learning-pipeline-local-scoring`.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的副本笔记本重命名为`machine-learning-pipeline-local-scoring`。
- en: Delete the cells that make `Iris` data and register it as a dataset.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除创建`Iris`数据的单元格，并将其注册为数据集。
- en: 'Rename your Python script from `Iris_Scoring.py` to `Iris_Scoring_Local.py`
    in the first line of your script that writes the file as follows:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的脚本的第一行中将Python脚本从`Iris_Scoring.py`重命名为`Iris_Scoring_Local.py`，如下所示：
- en: '[PRE3]'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'In `Iris_Scoring_Local.py`, retrieve your `Iris Local Scoring Data` dataset
    instead of the `Iris Scoring` dataset as shown in the following line of code:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Iris_Scoring_Local.py`中，检索你的`Iris Local Scoring Data`数据集，而不是如以下代码行所示的`Iris
    Scoring`数据集：
- en: '[PRE4]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'When configuring your ML pipeline step, replace `Iris_Scoring.py` with `Iris_Scoring_Local.py`
    as shown in the following code:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当配置你的ML管道步骤时，将`Iris_Scoring.py`替换为`Iris_Scoring_Local.py`，如下所示：
- en: '[PRE5]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In `Iris_Scoring_Local.py`, retrieve your `Iris Local Scoring Data` dataset
    instead of the `Iris Scoring` dataset in the following line of code:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Iris_Scoring_Local.py`中，在以下代码行中检索你的`Iris Local Scoring Data`数据集，而不是`Iris Scoring`数据集：
- en: '[PRE6]'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Rename your published pipeline from `Iris-Scoring-Pipeline` to `Iris-Local-Scoring-Pipeline`
    in the following lines of code:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在以下代码行中，将你的已发布管道从`Iris-Scoring-Pipeline`重命名为`Iris-Local-Scoring-Pipeline`：
- en: '[PRE7]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Run all cells in your notebook to create your new ML pipeline, `Iris-Local-Scoring-Pipeline`.
    This will take a few minutes. You have now created an ML pipeline that scores
    data loaded into Azure from your PC.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行笔记本中的所有单元格以创建你的新ML管道`Iris-Local-Scoring-Pipeline`。这需要几分钟。你现在已经创建了一个从你的PC加载到Azure的评分数据集的ML管道。
- en: Creating an ADF pipeline to run your ML pipeline
  id: totrans-242
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建ADF管道以运行你的ML管道
- en: 'With a new ML pipeline created, you are now ready to create a new ADF pipeline
    that automates the end-to-end scoring process using these steps:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的ML管道后，你现在可以创建一个新的ADF管道，使用以下步骤自动化端到端评分过程：
- en: Open up ADF and click the pen icon on the left-hand side to open the ADF pipeline
    authoring tool.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开ADF，点击左侧的笔形图标以打开ADF管道设计工具。
- en: Click `Copy Iris Data to Azure` and select **Clone** from the drop-down box.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`Copy Iris Data to Azure`，并从下拉框中选择**Clone**。
- en: Rename your new pipeline to `End-to-End Iris Scoring`.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的新管道重命名为`End-to-End Iris Scoring`。
- en: Click `Copy Iris Data from PC` activity by clicking the green square, holding
    your mouse button so an arrow appears, and connecting the arrow to your **Machine
    Learning Execute Pipeline** activity as shown in *Figure 10.15*:![Figure 10.15
    – Connecting activities in an ADF pipeline](img/Figure_10.15_B16595.jpg)
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击绿色方块，按住鼠标按钮直到出现箭头，并将箭头连接到你的**机器学习执行管道**活动，如*图10.15*所示：![图10.15 – 在ADF管道中连接活动](img/Figure_10.15_B16595.jpg)
- en: Figure 10.15 – Connecting activities in an ADF pipeline
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.15 – 在ADF管道中连接活动
- en: Configure your `Score Iris Data` by selecting the activity and opening the `Iris-Scoring-Local-Pipeline`
    and select the only **Machine Learning pipeline ID** that appears in the drop-down
    box.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择活动并打开`Iris-Scoring-Local-Pipeline`，配置你的`Score Iris Data`，并在下拉框中选择唯一的**机器学习管道ID**。
- en: Click **Publish All** and **Publish** to save your work.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**全部发布**和**发布**以保存你的工作。
- en: Click **Move & transform** under **Activities** and drag a new Copy Data activity
    onto your canvas. Connect it to the end of your ADF pipeline.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**活动**下点击**移动和转换**，并将一个新的Copy Data活动拖到你的画布上。将其连接到ADF管道的末尾。
- en: After selecting the new activity, click `Copy Results to PC`.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择新的活动后，点击`将结果复制到PC`。
- en: Click **Source** and click **+New** to begin the creation of a new input data
    file.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**源**并点击**新建**以开始创建新的输入数据文件。
- en: Select **Azure Blob Storage** as your source destination and **DelimitedText**
    as your file format. Click **Continue**.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Azure Blob Storage**作为你的源目的地，并选择**DelimitedText**作为文件格式。点击**继续**。
- en: Fill out the ADF dataset creation form. Name this object `ScoringResults`. Select
    `Iris_Predictions.csv` in `Output_Folder` on your AML datastore. When finished,
    the form should match *Figure 10.16*. Click **OK**:![Figure 10.16 – ADF dataset
    creation form ](img/Figure_10.16_B16595.jpg)
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写ADF数据集创建表单。将此对象命名为`ScoringResults`。在AML数据存储的`输出文件夹`中选择`Iris_Predictions.csv`。完成后，表单应与*图10.16*相匹配。点击**确定**：![图10.16
    – ADF数据集创建表单](img/Figure_10.16_B16595.jpg)
- en: Figure 10.16 – ADF dataset creation form
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图10.16 – ADF数据集创建表单
- en: Click **Sink** and click **+New** to begin the creation of a new output data
    file.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**目标**并点击**新建**以开始创建新的输出数据文件。
- en: Select **Azure Blob Storage** as your source destination and **DelimitedText**
    as your file format. Click **Continue**.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Azure Blob Storage**作为你的源目的地，并选择**DelimitedText**作为文件格式。点击**继续**。
- en: Click **File,** select **File system**, and click **Continue**.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**文件**，选择**文件系统**，然后点击**继续**。
- en: Select **DelimitedText** as your file format. Click **Continue**.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**DelimitedText**作为你的文件格式。点击**继续**。
- en: Fill out the ADF dataset creation form. Name this object `ScoringLocalOutput`.
    Select **LocalPCLink** as your linked service. Check the box for **First row as
    header**. Click **OK**. This will save your file in the same folder on your PC
    as your input data.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写ADF数据集创建表单。将此对象命名为`ScoringLocalOutput`。选择**LocalPCLink**作为你的链接服务。勾选**第一行作为标题**的复选框。点击**确定**。这将把你的文件保存在与你的输入数据相同的PC文件夹中。
- en: Click **Sink** and click **Open**. This will open a new tab where you can edit
    the destination data.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**目标**并点击**打开**。这将打开一个新标签页，你可以在其中编辑目标数据。
- en: Edit `Iris_Scoring_Results.csv` as the filename.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`Iris_Scoring_Results.csv`作为文件名进行编辑。
- en: Click **Publish All** and **Publish** to save your work.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**全部发布**和**发布**以保存你的工作。
- en: Adding a trigger to your ADF pipeline
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 向ADF管道添加触发器
- en: 'The last step in creating an ADF pipeline is adding a trigger to automate pipeline
    runs:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 创建ADF管道的最后一步是添加一个触发器来自动化管道运行：
- en: Next, add a trigger as you did earlier in the chapter. Click **Add trigger**
    and select **New/Edit**.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，就像本章前面所做的那样添加一个触发器。点击**添加触发器**并选择**新建/编辑**。
- en: Click **Choose trigger** and select **+New**.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择触发器**并选择**新建**。
- en: Name your trigger `Monday Trigger` and set it to run once a week on Mondays
    at 11:00 A.M. Make sure you set your time zone to your local time zone. Click
    **OK** twice.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的触发器命名为`Monday Trigger`，并设置为每周一上午11:00运行一次。确保你将时区设置为你的本地时区。点击**确定**两次。
- en: 'Click **Publish All** and **Publish** to save your work. Test your new ADF
    pipeline by clicking **Trigger (1)** and **Trigger Now**. Your pipeline should
    run successfully as shown in *Figure 10.17*:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**全部发布**和**发布**以保存你的工作。通过点击**触发器（1**）和**立即触发**来测试你的新ADF管道。你的管道应该像*图10.17*中所示那样成功运行：
- en: '![Figure 10.17 – Successful end-to-end scoring pipeline ](img/Figure_10.17_B16595.jpg)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![图10.17 – 成功的端到端评分流程](img/Figure_10.17_B16595.jpg)'
- en: Figure 10.17 – Successful end-to-end scoring pipeline
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.17 – 成功的端到端评分流程
- en: You have now created a fully automated AutoML scoring solution that will pull
    in data from your local PC every Monday at 11:00 A.M. and produce a scoring file.
    In a real situation, this solution would pull data from a database that gets updated
    on a routine basis.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经创建了一个完全自动化的AutoML评分解决方案，该解决方案将在每周一上午11:00从你的本地PC中拉取数据并生成评分文件。在实际情况下，此解决方案将从定期更新的数据库中拉取数据。
- en: This technique is applicable to any ML project; you can use custom trained models,
    vision models, AutoML models, or any other type of ML model. This pattern is reusable
    for any batch scoring scenario, and it is the most common deployment scenario
    across all industries. Practice it.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术适用于任何机器学习项目；你可以使用自定义训练的模型、视觉模型、AutoML模型或任何其他类型的机器学习模型。这种模式适用于任何批处理评分场景，并且是所有行业中最常见的部署场景。练习它。
- en: With an automated scoring solution in your toolkit, your final task is to craft
    an automated training solution. ML models, for many reasons, often need to be
    retrained and should be retrained when new data becomes available. By using the
    same techniques and patterns you used in this section, this will be an easy task.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的工具包中有一个自动评分解决方案后，您的最终任务是构建一个自动训练解决方案。由于许多原因，ML模型通常需要重新训练，并且当有新数据可用时应该重新训练。通过使用本节中使用的相同技术和模式，这将是一个简单的任务。
- en: Automating an end-to-end training solution
  id: totrans-276
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化端到端训练解决方案
- en: 'Like any other ML model, once an AutoML model is deployed and runs for a few
    months, it can benefit from being retrained. There are many reasons for this,
    in order of importance:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 就像任何其他ML模型一样，一旦AutoML模型部署并运行了几个月，它将受益于重新训练。这有很多原因，按重要性排序如下：
- en: ML models break if the pattern between your input data and target column changes.
    This often happens due to extraneous factors such as changes in consumer behavior.
    When the pattern breaks, you need to retrain your model to retain performance.
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您输入数据和目标列之间的模式发生变化，ML模型会崩溃。这种情况通常是由于消费者行为等外部因素的变化而发生的。当模式崩溃时，您需要重新训练模型以保持性能。
- en: ML models perform better the more relevant data you feed them. Therefore, as
    your data grows, you should periodically retrain models.
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ML模型接收到的相关数据越多，表现越好。因此，随着您的数据增长，您应该定期重新训练模型。
- en: Retraining models on a consistent basis means that they're less likely to break
    if patterns change slowly over time. Consequently, it's best practice to retrain
    as data is acquired.
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期重新训练模型意味着如果模式随时间缓慢变化，它们不太可能崩溃。因此，在获取数据时重新训练是最佳实践。
- en: In this section, you are going to put your skills to the test. You will be given
    a set of instructions similar to when you created an end-to-end scoring solution.
    However, this time, there will be significantly less guidance. If you find yourself
    lost, carefully reread the instructions throughout this chapter.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将测试您的技能。您将获得一组类似于创建端到端评分解决方案时的指令。然而，这次将有显著较少的指导。如果您发现自己迷失方向，请仔细重读本章中的所有指令。
- en: Creating a pipeline to copy data into Azure
  id: totrans-282
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建一个管道将数据复制到Azure
- en: 'First, you need to create an ADF pipeline to copy data from your PC into Azure:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要创建一个ADF管道，将数据从您的PC复制到Azure：
- en: 'Download `Iris_Training_Data_for_ADF.csv` from the GitHub repository and put
    it in your `Iris` folder on your PC:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从GitHub存储库下载`Iris_Training_Data_for_ADF.csv`并将其放在您的PC上的`Iris`文件夹中：
- en: '[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Training_Data_for_ADF.csv](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Training_Data_for_ADF.csv)'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Training_Data_for_ADF.csv](https://github.com/PacktPublishing/Automated-Machine-Learning-with-Microsoft-Azure/blob/master/Chapter10/Iris_Training_Data_for_ADF.csv)'
- en: Create a new ADF pipeline called `End-to-End Iris Training`.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`End-to-End Iris Training`的新ADF管道。
- en: Within the pipeline, create a `Copy Iris Training Data from PC` where you copy
    `Iris_Training_Data_for_ADF.csv` into `Input_Folder` on your Azure storage account.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在管道中创建一个`Copy Iris Training Data from PC`，将`Iris_Training_Data_for_ADF.csv`复制到您的Azure存储账户的`Input_Folder`。
- en: Refer to the `Copy Iris Data from PC` activity you created in the *Automating
    an end-to-end scoring solution* section.
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 参考您在*自动化端到端评分解决方案*部分创建的`Copy Iris Data from PC`活动。
- en: Run this pipeline once to move data into Azure.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行此管道一次，将数据移动到Azure。
- en: Editing an ML pipeline to train with new data
  id: totrans-290
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 编辑ML管道以使用新数据进行训练
- en: 'Next, copy and edit the `automl-training-pipeline` you created in [*Chapter
    9*](B16595_09_ePub.xhtml#_idTextAnchor129), *Implementing a Batch Scoring Solution*:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，复制并编辑您在[*第9章*](B16595_09_ePub.xhtml#_idTextAnchor129)的*实现批评分解决方案*部分创建的`automl-training-pipeline`：
- en: Open AMLS and create a new dataset called `Iris Local Training Data`.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开AMLS并创建一个名为`Iris Local Training Data`的新数据集。
- en: Open your Jupyter notebook called `automl-training-pipeline`. Make a copy and
    rename it `automl-local-training-pipeline`.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您名为`automl-training-pipeline`的Jupyter笔记本。创建一个副本并将其重命名为`automl-local-training-pipeline`。
- en: Replace the `Iris Training` dataset with the `Iris Local Training Data` dataset
    within the ML pipeline. Run and publish the ML pipeline with the name `Iris-AutoML-Training-Local-Pipeline`.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ML管道中将`Iris Training`数据集替换为`Iris Local Training Data`数据集。使用名称`Iris-AutoML-Training-Local-Pipeline`运行和发布ML管道。
- en: Adding a Machine Learning Execute Pipeline activity to your ADF pipeline
  id: totrans-295
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将机器学习执行管道活动添加到您的ADF管道中
- en: 'Finally, you''ll add an activity to your ADF pipeline to execute the ML pipeline
    you just created as follows:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您将在ADF管道中添加一个活动来执行您刚刚创建的ML管道，如下所示：
- en: In ADF, add a `Retrain Iris Model`.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ADF中，添加一个名为`Retrain Iris Model`的活动。
- en: Add a trigger called `Tuesday Trigger` to your **End-to-End Iris Training**
    pipeline. Schedule this trigger to run every Tuesday at 6:00 A.M. local time.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向您的**端到端Iris训练**管道添加一个名为`Tuesday Trigger`的触发器。将此触发器安排在当地时间每周二早上6:00运行。
- en: 'Publish your changes to save your work. Your finished pipeline should be a
    two-step process resembling *Figure 10.18*:'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布您的更改以保存您的作品。您的完成后的管道应该是一个两步过程，类似于*图10.18*：
- en: '![Figure 10.18 – Completed retraining pipeline ](img/Figure_10.18_B16595.jpg)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
  zh: '![图10.18 – 完成的重新训练管道](img/Figure_10.18_B16595.jpg)'
- en: Figure 10.18 – Completed retraining pipeline
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.18 – 完成的重新训练管道
- en: That's it! You've created a solution that will automatically retrain models
    on a weekly basis with new data. In the real world, this would be pulling from
    a database that is routinely updated instead of from your local PC.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 就这样！您已经创建了一个解决方案，该解决方案将自动每周使用新数据重新训练模型。在现实世界中，这将是从定期更新的数据库中提取数据，而不是从您的本地PC中提取。
- en: Remember that your ML pipeline for training automatically registers models,
    and your ML pipeline for scoring automatically reuses the latest version of your
    ML model. As such, there's no need to manually update either of the pipelines
    from this point on.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，您的训练ML管道会自动注册模型，而您的评分ML管道会自动重用您ML模型的最新版本。因此，从现在起无需手动更新这两个管道。
- en: Summary
  id: totrans-304
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: Automating ML solutions in an end-to-end fashion is no easy task and if you've
    made it this far, feel proud. Most modern data science organizations can easily
    train models. Very few can implement reliable, automated, end-to-end solutions
    as you have done in this chapter.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 以端到端的方式自动化ML解决方案并非易事，如果您已经走到这一步，请感到自豪。大多数现代数据科学组织可以轻松地训练模型。但很少有人能够像本章中所做的那样实施可靠、自动化、端到端解决方案。
- en: You should now feel confident in your ability to design end-to-end AutoML solutions.
    You can train models with AutoML and create ML pipelines to score data and retrain
    models. You can easily ingest data into Azure and transfer it out of Azure with
    ADF. Furthermore, you can tie everything together and create ADF pipelines that
    seamlessly ingest data, score data, train data, and push results to wherever you'd
    like. You can now create end-to-end ML solutions.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在应该对自己的能力充满信心，能够设计端到端的AutoML解决方案。您可以使用AutoML训练模型，创建ML管道来评分数据和重新训练模型。您可以使用ADF轻松地将数据导入Azure并将数据从Azure导出。此外，您可以将所有这些整合在一起，创建ADF管道，无缝地导入数据、评分数据、训练数据和将结果推送到您想要的地方。您现在可以创建端到端的ML解决方案。
- en: '[*Chapter 11*](B16595_11_ePub.xhtml#_idTextAnchor172), *Implementing a Real-Time
    Scoring Solution*, will cement your ML knowledge by teaching you how to score
    data in real time using Azure Kubernetes Service within AMLS. Adding real-time
    scoring to your batch-scoring skillset will make you a more complete applied ML
    expert, able to tackle a wide variety of problems.'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*](B16595_11_ePub.xhtml#_idTextAnchor172)，*实现实时评分解决方案*，将通过教授您如何在AMLS中使用Azure
    Kubernetes Service实时评分数据来巩固您的ML知识。将实时评分添加到您的批处理评分技能集中将使您成为一个更全面的实际ML专家，能够解决各种各样的问题。'
