- en: '*Chapter 6*: Model Building with DataRobot'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第6章*：使用DataRobot进行模型构建'
- en: In this chapter, we will see how DataRobot is used to build models. Much of
    the model-building process has been automated, and DataRobot offers many capabilities
    to explore a wide range of algorithms automatically, as well as allowing data
    scientists to fine-tune what they want to build. This results in significant time
    savings for data science teams and leads to the exploration of many more models
    than would otherwise be possible. It also leads to better adherence to best practices
    and hence fewer chances of making mistakes.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将了解如何使用DataRobot构建模型。模型构建的大部分过程已经自动化，DataRobot提供了许多功能来自动探索广泛的算法，同时允许数据科学家微调他们想要构建的内容。这为数据科学团队节省了大量的时间，并导致探索比其他情况下更多的模型。这也导致更好地遵循最佳实践，从而减少了犯错误的机会。
- en: 'By the end of this chapter, you will have learned how to utilize DataRobot
    to build a wide range of models. In this chapter, we''re going to cover the following
    main topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，您将学会如何利用DataRobot构建各种模型。在本章中，我们将涵盖以下主要内容：
- en: Configuring a modeling project
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置建模项目
- en: Building models and the model leaderboard
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建模型和模型排行榜
- en: Understanding model blueprints
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解模型蓝图
- en: Building ensemble models
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建集成模型
- en: Configuring a modeling project
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置建模项目
- en: In the previous chapter, we created a project and performed data analysis. We
    also saw that DataRobot automatically built several models for us. To build these
    models, we used default project settings.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们创建了一个项目并进行了数据分析。我们还看到DataRobot自动为我们构建了几个模型。为了构建这些模型，我们使用了默认的项目设置。
- en: In this section, we will cover what DataRobot did for us by default and look
    at how we can fine-tune that behavior. If you remember, once we click the **Start**
    button on the project page (see *Figure 5.1* in [*Chapter 5*](B17159_05_Final_NM_ePub.xhtml#_idTextAnchor097),
    *Exploratory Data Analysis with DataRobot*), we cannot make any changes to the
    project options. We will therefore create a new project to review and select the
    options we want.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍DataRobot默认为我们做了什么，并查看我们如何可以微调这种行为。如果您还记得，一旦我们在项目页面上点击**开始**按钮（见[*第5章*](B17159_05_Final_NM_ePub.xhtml#_idTextAnchor097)，*使用DataRobot进行探索性数据分析*），我们就无法对项目选项进行任何更改。因此，我们将创建一个新的项目来审查并选择我们想要的选项。
- en: 'For this, let''s go into DataRobot and select the `Automobile Example 2`, as
    illustrated in the following screenshot:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了这个，让我们进入DataRobot并选择`Automobile Example 2`，如下面的截图所示：
- en: '![Figure 6.1 – Uploading the dataset for a new project'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.1 – 上传新项目的数据集'
- en: '](img/Figure_6.1_B17159.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.1_B17159.jpg)'
- en: Figure 6.1 – Uploading the dataset for a new project
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1 – 上传新项目的数据集
- en: 'You can select the same target feature (price) as we did previously. Now, instead
    of clicking the **Start** button, please click on **Show advanced options** at
    the bottom of the screen. You will now see the **Advanced Options** screen, as
    illustrated in the following screenshot:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择与我们之前相同的目标特征（价格）。现在，请点击屏幕底部的**显示高级选项**，而不是点击**开始**按钮。您现在将看到**高级选项**屏幕，如下面的截图所示：
- en: '![Figure 6.2 – Advanced Options'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.2 – 高级选项'
- en: '](img/Figure_6.2_B17159.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.2_B17159.jpg)'
- en: Figure 6.2 – Advanced Options
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2 – 高级选项
- en: 'Here, you can see the partitioning options. You can see the default settings
    and can change them as needed. Since the amount of data we have is very limited,
    I have reduced the number of cross-validation folds to `3` and the holdout percentage
    to 15%. You can easily change these values and run with a different setup as needed.
    Next, we click on the **Smart Downsampling** tab, as illustrated in the following
    screenshot:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以查看分区选项。您可以看到默认设置，并且可以根据需要更改它们。由于我们拥有的数据量非常有限，我已经将交叉验证折数减少到`3`，将保留百分比减少到15%。您可以轻松更改这些值，并根据需要使用不同的设置运行。接下来，我们点击**智能降采样**选项卡，如下面的截图所示：
- en: '![Figure 6.3 – Smart Downsampling'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.3 – 智能降采样'
- en: '](img/Figure_6.3_B17159.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.3_B17159.jpg)'
- en: Figure 6.3 – Smart Downsampling
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.3 – 智能降采样
- en: 'Given that this is not a classification problem, we need not worry about downsampling
    here. If you have an imbalanced dataset for a classification problem, you can
    use this option to downsample. Let''s now look at the **Feature Constraints**
    tab, as illustrated in the following screenshot:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这不是一个分类问题，我们在这里不需要担心降采样。如果您有一个不平衡的分类数据集，您可以使用此选项进行降采样。现在让我们看看**特征约束**选项卡，如下面的截图所示：
- en: '![Figure 6.4 – Feature Constraints'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.4 – 特征约束'
- en: '](img/Figure_6.4_B17159.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.4_B17159.jpg](img/Figure_6.4_B17159.jpg)'
- en: Figure 6.4 – Feature Constraints
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.4 – 特征约束
- en: 'Here, you can set up constraints on features such as monotonicity—that is,
    whether the target values move in the same direction as the value of a feature
    increases. At this point, we do not foresee a need to set such constraints. Such
    constraints could be part of regulatory requirements in certain use cases. If
    they are, they can be specified here. Most use cases do not require such a constraint.
    Let''s now click on the **Additional** tab, as illustrated in the following screenshot:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以设置对特征（如单调性）的约束，即目标值是否与特征值增加的方向相同。目前，我们预见不到需要设置此类约束。在某些用例中，此类约束可能是监管要求的一部分。如果是这样，它们可以在这里指定。大多数用例不需要此类约束。现在，让我们点击**其他**选项卡，如下面的截图所示：
- en: '![Figure 6.5 – Additional options'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.5 – 其他选项'
- en: '](img/Figure_6.5_B17159.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.5_B17159.jpg](img/Figure_6.5_B17159.jpg)'
- en: Figure 6.5 – Additional options
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.5 – 其他选项
- en: 'Here, we see an option to change the **optimization metric** to be used for
    modeling. I have found DataRobot''s recommendations to be very good and you should
    use this option unless you have a compelling business reason to select a different
    metric. Given that we are in the early stages of modeling and we are interested
    in understanding our data, we will select the **Search for interactions** option,
    unselect the **Create blenders from top models** option, and select the **Include
    only models with SHAP value support** option. As discussed in [*Chapter 2*](B17159_02_Final_NM_ePub.xhtml#_idTextAnchor039),
    *Machine Learning Basics*, **SHapley Additive exPlanations** (**SHAP**) values
    are helpful for understanding the models and will provide additional insights
    into our problem. This might come at the cost of model accuracy, but we will worry
    about improving accuracy later. If you scroll down further on this page, you will
    see even more options, as illustrated in the following screenshot:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们看到一个选项可以更改用于建模的**优化指标**。我发现DataRobot的建议非常好，除非您有充分的商业理由选择不同的指标，否则您应该使用此选项。鉴于我们处于建模的早期阶段，并且我们希望了解我们的数据，我们将选择**搜索交互**选项，取消选择**从顶级模型创建混合器**选项，并选择**仅包括具有SHAP值支持的模型**选项。如[*第2章*](B17159_02_Final_NM_ePub.xhtml#_idTextAnchor039)中所述，*机器学习基础*，**SHapley
    Additive exPlanations** (**SHAP**)值有助于理解模型，并将为我们的问题提供额外的见解。这可能以模型精度为代价，但我们将在稍后担心提高精度。如果您继续向下滚动此页面，您将看到更多选项，如下面的截图所示：
- en: '![Figure 6.6 – More options'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.6 – 更多选项'
- en: '](img/Figure_6.6_B17159.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.6_B17159.jpg](img/Figure_6.6_B17159.jpg)'
- en: Figure 6.6 – More options
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.6 – 更多选项
- en: Here, you can set options to place an upper bound on running time, cap the value
    of target variable predictions, set a random seed, or add a weighting for a specific
    feature. For now, we do not see a need to change any of these defaults.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以设置选项以限制运行时间，限制目标变量预测的值，设置随机种子，或为特定特征添加权重。目前，我们看不出有必要更改这些默认设置。
- en: This completes the configuration process, and we are now ready to build the
    models.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了配置过程，我们现在可以构建模型。
- en: Building models and the model leaderboard
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建模型和模型排行榜
- en: 'Once we are done making any changes to the configuration settings, we can scroll
    up and click the **Start** button. DataRobot will now start automatically building
    the models, as illustrated in the following screenshot:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们对配置设置进行了任何更改，我们可以向上滚动并点击**开始**按钮。DataRobot现在将自动构建模型，如下面的截图所示：
- en: '![Figure 6.7 – Automated building of models'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.7 – 模型自动构建'
- en: '](img/Figure_6.7_B17159.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.7_B17159.jpg](img/Figure_6.7_B17159.jpg)'
- en: Figure 6.7 – Automated building of models
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.7 – 模型自动构建
- en: 'You can see which models DataRobot is building and how much training data is
    being used. You will notice that DataRobot will first build quick models with
    smaller datasets, learn which one performs better, and then selectively build
    models with more data. In the present case, you might not see this because there
    is very little data to begin with. Once DataRobot is done building the models,
    it will show the model leaderboard, as illustrated in the following screenshot:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到DataRobot正在构建哪些模型以及使用了多少训练数据。您会注意到DataRobot将首先使用较小的数据集构建快速模型，学习哪个表现更好，然后有选择地使用更多数据构建模型。在当前情况下，您可能看不到这一点，因为一开始数据非常少。一旦DataRobot完成模型构建，它将显示模型排行榜，如下面的截图所示：
- en: '![Figure 6.8 – Model leaderboard'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.8 – 模型排行榜'
- en: '](img/Figure_6.8_B17159.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.8_B17159.jpg](img/Figure_6.8_B17159.jpg)'
- en: Figure 6.8 – Model leaderboard
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.8 – 模型排行榜
- en: 'In the preceding screenshot, you will see which models rise to the top based
    on the metric you have selected for cross-validations. You can also choose different
    metrics from the dropdown to see how the models compare for different metrics.
    You can clearly see which models rose to the top. It is not uncommon to see gradient
    boosted models in the top tier. You will also notice that the model rankings change
    a bit based on the metric selected. You will see that once DataRobot has selected
    a model for deployment, it has unlocked the holdout results and trained the model
    with 100% data to prepare for deployment. For now, we will ignore that as we are
    not yet ready to discuss deployment. Another thing to notice is the feature list
    used for the top models. You will see that a new **Informative Features +** feature
    list has been used. This is a feature list that DataRobot created for these models.
    Let''s take a look at what this list contains, as follows:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的屏幕截图中，您将看到哪些模型根据您为交叉验证选择的指标上升到了顶部。您还可以从下拉菜单中选择不同的指标，以查看模型在不同指标上的比较。您可以清楚地看到哪些模型上升到了顶部。在顶级看到梯度提升模型并不罕见。您还会注意到，根据所选的指标，模型排名会有所变化。您会看到一旦
    DataRobot 为部署选择了一个模型，它就解锁了保留结果，并使用 100% 的数据进行训练，为部署做准备。现在，我们将忽略这一点，因为我们还没有准备好讨论部署。另一件需要注意的事情是用于顶级模型的特征列表。您会看到已经使用了新的**信息特征+**特征列表。这是
    DataRobot 为这些模型创建的特征列表。让我们看看这个列表包含什么，如下所示：
- en: '![Figure 6.9 – New feature list'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.9 – 新特征列表'
- en: '](img/Figure_6.9_B17159.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.9_B17159.jpg](img/Figure_6.9_B17159.jpg)'
- en: Figure 6.9 – New feature list
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.9 – 新特征列表
- en: 'As you can see, this list contains a subset of the features, and it also contains
    a new feature that DataRobot created automatically: `(bore) DIVIDED BY (length)`.
    This ratio might have significance for an engine, and you should discuss its role
    with **subject-matter experts** (**SMEs**). If not previously known, this could
    represent a new insight for your business team. It turns out that this is called
    **stroke ratio** and is considered an important parameter for engines. The next
    step in the modeling process is to see if there is a need to further refine this
    feature list. Let''s go back to the model leaderboard, select the top-performing
    model **eXtreme Gradient Boosted Trees Regressor (Gamma Loss)**, go to the **Understand**
    tab and select the **Feature Impact** sub-tab, as illustrated in the following
    screenshot:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，此列表包含特征的一个子集，并且还包含 DataRobot 自动创建的新特征：“（孔径）除以（长度）”。这个比率可能对发动机有重要意义，您应该与**领域专家**（SMEs）讨论其作用。如果之前未知，这可能会为您的业务团队带来新的见解。实际上，这被称为**冲程比**，被认为是发动机的一个重要参数。建模过程的下一步是看看是否需要进一步细化这个特征列表。让我们回到模型排行榜，选择表现最佳的模型**eXtreme
    Gradient Boosted Trees Regressor (Gamma Loss)**，转到**理解**选项卡并选择**特征影响**子选项卡，如图所示：
- en: '![Figure 6.10 – Understand and Feature Impact tabs'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.10 – 理解和特征影响选项卡'
- en: '](img/Figure_6.10_B17159.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.10_B17159.jpg](img/Figure_6.10_B17159.jpg)'
- en: Figure 6.10 – Understand and Feature Impact tabs
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.10 – 理解和特征影响选项卡
- en: 'You will see that feature impacts are not computed for every model, so go ahead
    and click on the **Enable Feature Impact** button to let DataRobot compute it.
    Once clicked, DataRobot will start computing the impacts and show you the results,
    as illustrated in the following screenshot:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您会看到并非每个模型都会计算特征影响，所以请点击**启用特征影响**按钮，让 DataRobot 进行计算。一旦点击，DataRobot 将开始计算影响并显示结果，如图所示：
- en: '![Figure 6.11 – Feature impacts'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.11 – 特征影响'
- en: '](img/Figure_6.11_B17159.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.11_B17159.jpg](img/Figure_6.11_B17159.jpg)'
- en: Figure 6.11 – Feature impacts
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.11 – 特征影响
- en: 'You will notice that the feature impacts are computed using SHAP values, which
    we discussed previously. By default, it shows the top 25 features. We will discuss
    the details of the features and the model later on. For now, we want to look at
    the entire feature set. For this, we will click on the **Export** button in the
    bottom-right corner. We will now see the **Export** option, as illustrated in
    the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到特征影响是使用 SHAP 值计算的，我们之前已经讨论过。默认情况下，它显示前 25 个特征。我们将在稍后讨论特征和模型的详细信息。现在，我们想查看整个特征集。为此，我们将点击右下角的**导出**按钮。现在我们将看到**导出**选项，如图所示：
- en: '![Figure 6.12 – Exporting feature impacts'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.12 – 导出特征影响'
- en: '](img/Figure_6.12_B17159.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.12_B17159.jpg](img/Figure_6.12_B17159.jpg)'
- en: Figure 6.12 – Exporting feature impacts
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.12 – 导出特征影响
- en: 'You can download this information as a `.csv` file to explore it in more detail.
    Let''s use Excel to open the `.csv` file to review the feature impacts, as illustrated
    in the following screenshot:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将此信息下载为`.csv`文件以更详细地探索它。让我们使用Excel打开`.csv`文件来查看特征影响，如下面的截图所示：
- en: '![Figure 6.13 – Feature impacts of the entire set'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.13 – 整个集合的特征影响'
- en: '](img/Figure_6.13_B17159.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.13_B17159.jpg)'
- en: Figure 6.13 – Feature impacts of the entire set
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.13 – 整个集合的特征影响
- en: 'As you can see, the last seven features don''t add much, and we can try removing
    them and see the impact. One of the benefits of a tool such as DataRobot is that
    running these experiments is very quick and easy. Now that we know what we want
    to do, let''s go back to the **Feature Impact** screen. Notice the **+ Create
    feature list** button on the bottom left. Clicking on that button brings up a
    dialog box for creating a new feature list, as illustrated in the following screenshot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，最后七个特征贡献不大，我们可以尝试移除它们并查看影响。像DataRobot这样的工具的一个好处是运行这些实验非常快速且简单。现在我们知道我们想要做什么，让我们回到**特征影响**屏幕。注意左下角的**+
    创建特征列表**按钮。点击该按钮将弹出一个创建新特征列表的对话框，如下面的截图所示：
- en: '![Figure 6.14 – Creating a new feature list'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.14 – 创建新的特征列表'
- en: '](img/Figure_6.14_B17159.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.14_B17159.jpg)'
- en: Figure 6.14 – Creating a new feature list
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.14 – 创建新的特征列表
- en: 'Here, we can give the feature list a new name, `FL1 top23`, and specify that
    we want the 23 best features. Now, we can click the **Create feature list** button
    to save this new feature list. Now that a new feature list has been created, we
    can now click on **Configure Modeling Settings** in the column on the right side
    of the page. This will bring up the configuration dialog box, as illustrated in
    the following screenshot:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以给特征列表起一个新的名字，`FL1 top23`，并指定我们想要前23个最佳特征。现在，我们可以点击**创建特征列表**按钮来保存这个新的特征列表。现在，一个新的特征列表已经创建，我们可以在页面右侧的列中点击**配置建模设置**。这将弹出一个配置对话框，如下面的截图所示：
- en: '![Figure 6.15 – Configure Modeling Settings'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.15 – 配置建模设置'
- en: '](img/Figure_6.15_B17159.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.15_B17159.jpg)'
- en: Figure 6.15 – Configure Modeling Settings
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.15 – 配置建模设置
- en: 'We can now select the new feature list, `FL1 top23`, from the dropdown. We
    can modify the other settings if we need and click the **Run** button. DataRobot
    will now start building models with the new feature list and when the process
    completes, you can see the new models in the leaderboard, as illustrated in the
    following screenshot:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以从下拉菜单中选择新的特征列表，`FL1 top23`。如果我们需要，可以修改其他设置并点击**运行**按钮。DataRobot现在将开始使用新的特征列表构建模型，当过程完成后，您可以在排行榜中看到新的模型，如下面的截图所示：
- en: '![Figure 6.16 – Leaderboard with new models'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.16 – 带有新模型的排行榜'
- en: '](img/Figure_6.16_B17159.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.16_B17159.jpg)'
- en: Figure 6.16 – Leaderboard with new models
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.16 – 带有新模型的排行榜
- en: As you can see, the model built with the new feature list did better and is
    now at the top of the leaderboard (ignore the deployment-ready model, as it uses
    the entire dataset). As we can see, removing features that did not contribute
    much actually helped the model (even if just a little). Given that this model
    uses a smaller set of features, it is a more desirable model. We can continue
    this process as needed. At this point, we also start looking more deeply at the
    model's details and the results it is producing. We will come back to that topic
    in the next chapter. For now, we want to look at the model blueprints or the steps
    DataRobot takes to build a model.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，使用新特征列表构建的模型表现更好，现在位于排行榜的顶部（忽略已部署的模型，因为它使用了整个数据集）。正如我们所见，移除贡献不大的特征实际上有助于模型（即使只是略微）。鉴于这个模型使用的是更小的特征集，它是一个更理想的模型。我们可以根据需要继续这个过程。在此阶段，我们也开始更深入地查看模型的细节和它产生的结果。我们将在下一章回到这个话题。现在，我们想看看模型蓝图或DataRobot构建模型所采取的步骤。
- en: Understanding model blueprints
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解模型蓝图
- en: 'DataRobot performs a lot of data transformations and hyperparameter tuning
    while building a model. It leverages a lot of best practices to build a specific
    type of model, and these best practices are codified in the form of blueprints.
    You can inspect these blueprints to gain insights into these best practices and
    also to better understand which steps were taken to build a model. To inspect
    the blueprint for a model, you can click on a model, go to the **Describe** tab,
    and then select the **Blueprint** tab, as illustrated in the following screenshot:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: DataRobot在构建模型时执行了许多数据转换和超参数调整。它利用了许多最佳实践来构建特定类型的模型，这些最佳实践以蓝图的形式编码。您可以检查这些蓝图，以了解这些最佳实践，并更好地理解构建模型所采取的步骤。要检查模型的蓝图，您可以点击一个模型，转到**描述**标签页，然后选择**蓝图**标签页，如图下所示：
- en: '![Figure 6.17 – Model blueprint'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.17_B17159.jpg]'
- en: '](img/Figure_6.17_B17159.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.17_B17159.jpg]'
- en: Figure 6.17 – Model blueprint
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 6.17 – 模型蓝图
- en: 'Here, you can see the workflow steps. As you can see, this blueprint is fairly
    simple. This is because gradient boost methods are very flexible and do not require
    a lot of preprocessing. Let''s look at another model that did pretty well, the
    **Generalized Additive2 Model (Gamma Loss)** blueprint, as illustrated in the
    following screenshot:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以查看工作流程步骤。如您所见，这个蓝图相当简单。这是因为梯度提升方法非常灵活，不需要太多的预处理。让我们看看另一个表现相当不错的模型，即**广义加性模型2（Gamma损失）**的蓝图，如图下所示：
- en: '![Figure 6.18 – Model blueprint for Generalized Additive2 Model (Gamma Loss)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.18 – 广义加性2模型（Gamma损失）的模型蓝图'
- en: '](img/Figure_6.18_B17159.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.18_B17159.jpg]'
- en: Figure 6.18 – Model blueprint for Generalized Additive2 Model (Gamma Loss)
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 6.18 – 广义加性2模型（Gamma损失）的模型蓝图
- en: 'Here, you can see that preprocessing was required for categorical variables
    and also for missing values. Let''s now look at another blueprint for a **deep
    learning** (**DL**) model. Select the **Keras Slim Residual Neural Network Regressor
    using Training Schedule** model and select the **Blueprint** tab, as illustrated
    in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以看到需要对分类变量和缺失值进行预处理。现在让我们看看另一个**深度学习**（**DL**）模型的蓝图。选择**使用训练计划的Keras精简残差神经网络回归器**模型，并选择**蓝图**标签页，如图下所示：
- en: '![Figure 6.19 – Model blueprint for Keras'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.19 – Keras的模型蓝图'
- en: '](img/Figure_6.19_B17159.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.19_B17159.jpg]'
- en: Figure 6.19 – Model blueprint for Keras
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 6.19 – Keras的模型蓝图
- en: 'You can see that for Keras, we need to perform data cleansing, scaling, and
    one-hot encoding for categorical variables. You can inspect the details of each
    of these steps by clicking on the model box, as illustrated in the following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到，对于Keras，我们需要进行数据清洗、缩放和分类变量的one-hot编码。您可以通过点击模型框来检查这些步骤的详细信息，如图下所示：
- en: '![Figure 6.20 – Process step details'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.20 – 处理步骤详情'
- en: '](img/Figure_6.20_B17159.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.20_B17159.jpg]'
- en: Figure 6.20 – Process step details
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 6.20 – 处理步骤详情
- en: 'You can now see an explanation of which tasks were performed and which hyperparameter
    settings were used for building the model. There is also a link to additional
    details about the method used. After inspecting the blueprints, you might see
    that one of your favorite algorithms was not used by DataRobot, and you might
    wonder what the performance of that algorithm or model might look like. To do
    this, you can click on the **Repository** tab at the top left of the page, as
    illustrated in the following screenshot:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以查看用于构建模型的任务执行情况和使用的超参数设置的解释。同时，还有一个链接可以查看关于所用方法的更多详细信息。在检查蓝图后，您可能会发现您最喜欢的算法没有被DataRobot使用，并且您可能会想知道该算法或模型的性能可能是什么样的。为此，您可以在页面左上角的**仓库**标签页上点击，如图下所示：
- en: '![Figure 6.21 – Repository of blueprints'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.21 – 蓝图仓库'
- en: '](img/Figure_6.21_B17159.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/Figure_6.21_B17159.jpg]'
- en: Figure 6.21 – Repository of blueprints
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 6.21 – 蓝图仓库
- en: Here, you will see all the blueprints DataRobot has to offer that are relevant
    to this project. As you can see, this is a pretty comprehensive list. Please note
    that this list will vary for projects of different types (for example, a time-series
    project). You can select any one of these blueprints and build a model. The new
    model will be shown on the leaderboard, where you can assess its relative performance.
    For now, we are not interested in doing that for this particular project.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您将看到DataRobot提供的所有与此项目相关的蓝图。如您所见，这是一个相当全面的列表。请注意，此列表将因项目类型的不同而有所变化（例如，时间序列项目）。您可以选择这些蓝图中的任何一个来构建一个模型。新模型将显示在排行榜上，您可以在那里评估其相对性能。目前，我们对此特定项目不感兴趣。
- en: 'We are interested at this point in comparing some of the models to see how
    well they compare at a more detailed level. For this, let''s click on the rightmost
    tab at the top, called **Model Comparison**. This brings up a page where you can
    select any two models to see how they match up, as illustrated in the following
    screenshot:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，我们感兴趣的是比较一些模型，以查看它们在更详细水平上的比较效果。为此，让我们点击顶部的最右侧标签，称为**模型比较**。这将打开一个页面，您可以选择任何两个模型来查看它们的匹配情况，如下面的截图所示：
- en: '![Figure 6.22 – Model Comparison'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.22 – 模型比较'
- en: '](img/Figure_6.22_B17159.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.22 – 模型比较](img/Figure_6.22_B17159.jpg)'
- en: Figure 6.22 – Model Comparison
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.22 – 模型比较
- en: 'Here, we have selected the XGBoost model and the **generalized additive model**
    (**GAM**) model for comparison across multiple metrics. We can see that the two
    models are not too far apart, and you can select either one depending on other
    factors. As we discussed previously, GAMs have the advantage of being easy to
    explain to business users and can be presented as a factor **lookup table** (**LUT**),
    sometimes called a rating table. There might also be regulatory reasons to select
    a GAM model. Let''s explore a bit further by clicking on the **Compute dual lift
    data** button, to take us to the following screen:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们选择了XGBoost模型和**广义加性模型**（**GAM**）模型，在多个指标上进行比较。我们可以看到这两个模型之间并不太远，您可以根据其他因素选择任何一个。正如我们之前讨论的，GAMs的优势在于易于向商业用户解释，可以呈现为**查找表**（**LUT**），有时也称为评级表。选择GAM模型可能还有监管原因。让我们通过点击**计算双重提升数据**按钮进一步探索，带我们到以下屏幕：
- en: '![Figure 6.23 – Dual lift chart'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.23 – 双重提升图'
- en: '](img/Figure_6.23_B17159.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.23 – 双重提升图](img/Figure_6.23_B17159.jpg)'
- en: Figure 6.23 – Dual lift chart
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.23 – 双重提升图
- en: '**Dual lift charts** are used to compare the results of two models. For a dual
    lift chart, the results are sorted by the difference between the two models as
    opposed to the target value. The values are then binned to display the results
    for each bin. The shaded area depicts the difference between the two models. Here,
    again, we see that the two models are very similar in their performance.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '**双重提升图**用于比较两个模型的结果。对于双重提升图，结果是根据两个模型之间的差异进行排序，而不是根据目标值。然后，这些值被分箱以显示每个分箱的结果。阴影区域描述了两个模型之间的差异。在这里，我们再次看到这两个模型在性能上非常相似。'
- en: If two models have overall good scores but show large deviations in values in
    this chart, then these models will be good candidates for creating an ensemble
    model.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如果两个模型在整体上得分良好，但在此图表中的数值偏差较大，那么这些模型将是创建集成模型的良好候选者。
- en: Building ensemble models
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建集成模型
- en: 'It is well known that ensembles of models tend to perform better and also tend
    to be more robust. DataRobot provides the capability to automatically build ensemble
    models; however, this does require some trade-offs. For example, ensemble models
    take more time and computational resources to build and deploy, and they also
    tend to be more opaque. This is the reason we did not start off by building ensemble
    models. Once you have built several models and you are interested in ways of improving
    your model accuracy, you can decide to build ensembles. As we saw in the previous
    sections, we have to explicitly select the option to build ensembles, and that
    also means that we cannot compute SHAP values. Let''s look at how this is done.
    Let''s first go to the project list page, which shows all of your current projects,
    as illustrated in the following screenshot:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 众所周知，模型集合往往表现更好，并且也更稳健。DataRobot 提供了自动构建集合模型的功能；然而，这确实需要一些权衡。例如，集合模型需要更多的时间和计算资源来构建和部署，并且它们通常也更不透明。这就是我们最初没有从构建集合模型开始的原因。一旦您构建了几个模型，并且对提高模型准确率感兴趣，您可以选择构建集合。正如我们在前面的章节中看到的，我们必须明确选择构建集合的选项，这也意味着我们无法计算
    SHAP 值。让我们看看这是如何操作的。首先，让我们转到项目列表页面，它显示了您当前的所有项目，如下面的截图所示：
- en: '![Figure 6.24 – Project list'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.24 – 项目列表'
- en: '](img/Figure_6.24_B17159.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.24_B17159.jpg)'
- en: Figure 6.24 – Project list
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.24 – 项目列表
- en: 'Here, we will select the `Automobile Example 2`. From the menu, we will select
    the **Duplicate** option. You will now see the **Duplicate** dialog box, as illustrated
    in the following screenshot:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将选择 `Automobile Example 2`。从菜单中，我们将选择 **Duplicate** 选项。现在您将看到 **Duplicate**
    对话框，如下面的截图所示：
- en: '![Figure 6.25 – Duplicating a project'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.25 – 复制项目'
- en: '](img/Figure_6.25_B17159.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.25_B17159.jpg)'
- en: Figure 6.25 – Duplicating a project
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.25 – 复制项目
- en: 'We can give it a new name, `Automobile Example 3`, and we will select **Copy
    dataset only**. This way, we can apply new project settings. Let''s click **Confirm**.
    This will create a new project. We can select the target as price, and now we
    click on the **Advanced Options** tab, as illustrated in the following screenshot:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以给它一个新的名称，`Automobile Example 3`，并且我们将选择 **Copy dataset only**。这样，我们可以应用新的项目设置。让我们点击
    **Confirm**。这将创建一个新的项目。我们可以选择目标为价格，现在我们点击 **Advanced Options** 选项卡，如下面的截图所示：
- en: '![Figure 6.26 – Advanced options for ensembles (blenders)'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.26 – 集合（混合器）的高级选项'
- en: '](img/Figure_6.26_B17159.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.26_B17159.jpg)'
- en: Figure 6.26 – Advanced options for ensembles (blenders)
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.26 – 集合（混合器）的高级选项
- en: 'This time, we will select the **Create blenders from top models** option and
    uncheck the **Include only models with SHAP value support** option. Now, we can
    click the **Start** button to let DataRobot build the models. Once DataRobot has
    finished building the models, we can inspect the leaderboard, as illustrated in
    the following screenshot:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这次，我们将选择 **Create blenders from top models** 选项，并取消选择 **Include only models
    with SHAP value support** 选项。现在，我们可以点击 **Start** 按钮让 DataRobot 构建模型。一旦 DataRobot
    完成构建模型，我们可以检查排行榜，如下面的截图所示：
- en: '![Figure 6.27 – Leaderboard with ensemble models'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.27 – 包含集合模型的排行榜'
- en: '](img/Figure_6.27_B17159.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.27_B17159.jpg)'
- en: Figure 6.27 – Leaderboard with ensemble models
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.27 – 包含集合模型的排行榜
- en: 'You will notice the DataRobot has built an **AVG Blender** model that seems
    to be the top model, but not by much. Blended models can sometimes produce substantial
    lift over individual models, so it is worthwhile exploring this option. We can
    select this model and click on the **Describe** tab and then the **Blueprint**
    tab, as illustrated in the following screenshot:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到 DataRobot 已经构建了一个 **AVG Blender** 模型，这似乎是顶级模型，但提升并不大。混合模型有时可以比单个模型产生更大的提升，因此探索这个选项是值得的。我们可以选择这个模型，然后点击
    **Describe** 选项卡，再点击 **Blueprint** 选项卡，如下面的截图所示：
- en: '![Figure 6.28 – Blueprint for AVG Blender'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.28 – AVG Blender 的蓝图'
- en: '](img/Figure_6.28_B17159.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_6.28_B17159.jpg)'
- en: Figure 6.28 – Blueprint for AVG Blender
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.28 – AVG Blender 的蓝图
- en: We can now see that the blender has selected two XGBoost models, and hence it
    is not surprising that the lift is not much better. In this case, we will not
    select the blended model, and we go back to the previous project.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以看到，混合器选择了两个 XGBoost 模型，因此提升并不令人惊讶。在这种情况下，我们不会选择混合模型，而是返回到上一个项目。
- en: Summary
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned how to build and compare models by leveraging DataRobot's
    capabilities. As you saw, DataRobot makes it very easy to build many models quickly
    and helps us compare those models. As you experienced, we tried many things and
    built dozens of models. This rapid model exploration is DataRobot's key capability,
    and its importance to a data science team cannot be overstated. If you were to
    build these models on your own in Python, it would have taken a lot more time
    and effort. Instead, we used that time and thinking to experiment with different
    ideas and put more energy toward understanding the problem. We also learned about
    blueprints that encode best practices. These blueprints can be useful learning
    tools for new and experienced data scientists alike. We also learned how DataRobot
    can build ensemble or blended models for us.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了如何利用 DataRobot 的功能构建和比较模型。正如你所见，DataRobot 使得快速构建多个模型变得非常简单，并帮助我们比较这些模型。正如你所体验的，我们尝试了许多事情，构建了数十个模型。这种快速模型探索是
    DataRobot 的关键功能，其对数据科学团队的重要性不容小觑。如果你要自己用 Python 构建这些模型，将会花费更多的时间和精力。相反，我们利用了这些时间和思考来实验不同的想法，并将更多的精力投入到理解问题上。我们还了解到了编码最佳实践的蓝图。这些蓝图对于新晋和经验丰富的数据科学家都是有用的学习工具。我们还学习了
    DataRobot 如何为我们构建集成或混合模型。
- en: It might be tempting to jump ahead and start deploying one of these models,
    but it is important to not directly jump into that without doing some analysis.
    We are now ready to dig deeper into the models, understand them, and see if we
    can gain more insights from them.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 可能会有一种冲动想要跳过分析阶段，直接开始部署这些模型，但重要的是在进行一些分析之前不要直接跳入这一步。我们现在已经准备好深入挖掘模型，理解它们，并看看我们能否从中获得更多见解。
