- en: '14'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '14'
- en: Synthetic-to-Real Domain Adaptation
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合成到真实领域自适应
- en: This chapter introduces you to a well-known issue that usually limits the usability
    of synthetic data, called the domain gap problem. In this chapter, you will learn
    various approaches to bridge this gap, which will help you to better leverage
    synthetic data. At the same time, the chapter discusses current state-of-the-art
    research on synthetic-to-real domain adaptation. Thus, you will learn which methods
    you may use for your own problems. Then, it represents the challenges and issues
    in this context to better comprehend the problem.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章向您介绍了一个常见的问题，通常限制了合成数据的使用性，称为领域差距问题。在本章中，您将学习到各种弥合这一差距的方法，这将帮助您更好地利用合成数据。同时，本章讨论了合成到真实领域的自适应的最新研究。因此，您将了解您可能用于自己问题的方法。然后，它代表了在此背景下的问题和挑战，以便更好地理解这个问题。
- en: 'In this chapter, we’re going to cover the following main topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主要主题：
- en: The domain gap problem in ML
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器学习中的领域差距问题
- en: Approaches for synthetic-to-real domain adaptation
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成到真实领域自适应的方法
- en: Synthetic-to-real domain adaptation – issues and challenges
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成到真实领域自适应——问题和挑战
- en: The domain gap problem in ML
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 机器学习中的领域差距问题
- en: 'In this section, we will understand what the domain gap is and why it is a
    problem in ML. The domain gap is one of the main issues that limit the usability
    of synthetic data in practice. It usually refers to the dissimilarity between
    the distributions and properties of data in two or more domains. It is not just
    associated with synthetic data. However, it is a common problem in ML. It is very
    common to notice a degradation in the performance of ML models when tested on
    similar but slightly different datasets. For more information, please refer to
    *Who is closer: A computational method for domain gap* *evaluation* ([https://doi.org/10.1016/j.patcog.2021.108293](https://doi.org/10.1016/j.patcog.2021.108293)).'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '在本节中，我们将了解领域差距是什么以及为什么它在机器学习中是一个问题。领域差距是限制合成数据在实际中可用性的主要问题之一。它通常指的是两个或更多领域中的数据分布和属性的不相似性。它不仅与合成数据相关。然而，它是机器学习中一个常见的问题。在测试类似但略有不同的数据集时，通常会发现机器学习模型性能的下降。更多信息，请参阅
    *Who is closer: A computational method for domain gap evaluation* ([https://doi.org/10.1016/j.patcog.2021.108293](https://doi.org/10.1016/j.patcog.2021.108293))。'
- en: 'The main reasons for the domain gap between datasets can be linked to the following:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集之间领域差距的主要原因可以与以下因素相关联：
- en: Sensitivity to sensors’ variations
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对传感器变化的敏感性
- en: Discrepancy in class and feature distributions
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类别和特征分布的差异
- en: Concept drift
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概念漂移
- en: Let’s discuss each of these points in more detail.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地讨论这些观点。
- en: Sensitivity to sensors’ variations
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对传感器变化的敏感性
- en: 'In computer vision, your ML model may perform well on images captured using
    certain cameras, setups, and parameters but drastically fail under similar inputs
    captured with different cameras or using different parameters. For instance, your
    computer vision model may work well on videos captured from a first-person view
    but drastically fail on videos captured from a third-person view. Therefore, we
    can see that even the same task, such as action recognition, is usually studied
    with an emphasis on the person’s viewpoint, as in *First-person Activity Recognition
    by Modelling Subject-Action Relevance* ([https://doi.org/10.1109/IJCNN55064.2022.9892547](https://doi.org/10.1109/IJCNN55064.2022.9892547)).
    Another example is the camera’s **Field of View** (**FoV**). Some computer vision
    tasks, such as semantic segmentation, are also studied under certain camera FoVs.
    A semantic segmentation method trained on the Cityscapes and Synscapes datasets,
    which are captured under a standard FoV, will fail at segmenting fisheye images
    captured by a super-wide fisheye lens. For an example, please refer to *FPDM:
    Fisheye Panoptic segmentation dataset for Door* *Monitoring* ([https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=9959151](https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=9959151)).'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在计算机视觉中，你的机器学习模型可能在某些相机、设置和参数捕获的图像上表现良好，但在使用不同相机或不同参数捕获的相似输入下会彻底失败。例如，你的计算机视觉模型可能在从第一人称视角捕获的视频上表现良好，但在从第三人称视角捕获的视频上会彻底失败。因此，我们可以看到，即使是同一任务，如动作识别，通常也会侧重于研究人的视角，如在*通过建模主体-动作相关性进行第一人称活动识别*（[https://doi.org/10.1109/IJCNN55064.2022.9892547](https://doi.org/10.1109/IJCNN55064.2022.9892547)）。另一个例子是相机的**视野**（**FoV**）。一些计算机视觉任务，如语义分割，也是在特定的相机视野下进行的。在标准视野下捕获的Cityscapes和Synscapes数据集上训练的语义分割方法，在由超广角鱼眼镜头捕获的鱼眼图像上进行分割时会失败。例如，请参阅*FPDM：用于门*
    *监控*的鱼眼全景分割数据集（[https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=9959151](https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=9959151)）。
- en: Discrepancy in class and feature distributions
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 类别和特征分布的差异
- en: Discrepancy or inconsistency in the distribution of attributes, classes, and
    features is one of the main reasons for the domain gap between synthetic and real
    domains or even in the same real domain when you train and test on different datasets.
    This can be clearly observed when working on time series-based problems. Many
    times, the training data becomes outdated and does not come from the same distribution
    as the test or evaluation data. For example, an ML model trained to predict inflation
    rates based on data collected one year ago may not perform well once applied to
    current data because of the domain gap problem. This is because the source and
    target data distributions and characteristics are now different from expected.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 属性、类别和特征分布的差异或不一致性是合成域和真实域之间或甚至在同一真实域中训练和测试在不同数据集上时出现领域差距的主要原因之一。当处理基于时间序列的问题时，这一点可以清楚地观察到。很多时候，训练数据变得过时，并不来自测试或评估数据的同一分布。例如，一个基于一年前收集的数据来预测通货膨胀率的机器学习模型，一旦应用于当前数据，可能由于领域差距问题而表现不佳。这是因为源数据和目标数据分布以及特征现在与预期不同。
- en: Concept drift
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概念漂移
- en: Concept drift refers to the change in the relation between the input (features)
    and output (target). Let’s take an illustrative example. Assume we have designed
    an object classifier and the “printer” is one of our objects of interest. As you
    can see in *Figure 14**.1*, the shape, color, appearance, and other features of
    the “printer” concept have drastically changed over time, from early typewriters,
    to inkjet printers, to laser printers. Thus, if your training data contained only
    old printers (typewriters), it would simply struggle to accurately classify modern
    printers because of the domain gap problem.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 概念漂移指的是输入（特征）和输出（目标）之间关系的变化。让我们举一个说明性的例子。假设我们设计了一个对象分类器，“打印机”是我们感兴趣的对象之一。正如你在*图14*.*1*中可以看到的，“打印机”概念在时间上发生了剧烈变化，从早期的打字机到喷墨打印机，再到激光打印机。因此，如果你的训练数据只包含旧打印机（打字机），它将因为领域差距问题而难以准确分类现代打印机。
- en: '![Figure 14.1 – An example of concept drift (source: Pixabay)](img/B18494_14_01.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图14.1 – 概念漂移的示例（来源：Pixabay）](img/B18494_14_01.jpg)'
- en: 'Figure 14.1 – An example of concept drift (source: Pixabay)'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图14.1 – 概念漂移的示例（来源：Pixabay）
- en: Next, let’s explore the main solutions to mitigate the domain gap problem specifically
    between synthetic and real domains.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们探讨缓解合成域和真实域之间领域差距问题的主要解决方案。
- en: Approaches for synthetic-to-real domain adaptation
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从合成到现实域自适应的方法
- en: 'In this section, you will learn the key approaches for synthetic-to-real domain
    adaptation. We will discuss the following methods:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将学习从合成到现实域自适应的关键方法。我们将讨论以下方法：
- en: Domain randomization
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域随机化
- en: Adversarial domain adaptation
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对抗域自适应
- en: Feature-based domain adaptation
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于特征的域自适应
- en: Let’s start with one of the most commonly used approaches for domain adaptation.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从域自适应中最常用的方法之一开始。
- en: Domain randomization
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 域随机化
- en: '**Domain randomization** is a mechanism or procedure usually used to mitigate
    the domain gap problem and improve the performance of ML models on the target
    domain. This approach aims at randomizing the main properties and attributes of
    the training data or environment, such as simulators to increase the diversity
    of the scenarios the ML model is exposed to in the training stage. Thus, we can
    increase the robustness of the ML model for scenarios that it may encounter in
    the future. For more information, please refer to *Domain Randomization for Transferring
    Deep Neural Networks from Simulation to the Real* *World* ([https://arxiv.org/pdf/1703.06907.pdf](https://arxiv.org/pdf/1703.06907.pdf)).'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**域随机化**是一种通常用于缓解域差距问题并提高目标域上机器学习模型性能的机制或程序。这种方法旨在随机化训练数据或环境的主要属性和属性，例如模拟器，以增加机器学习模型在训练阶段所接触到的场景的多样性。因此，我们可以增加机器学习模型对未来可能遇到的场景的鲁棒性。有关更多信息，请参阅*从模拟到现实世界的域随机化，用于迁移深度神经网络*
    ([https://arxiv.org/pdf/1703.06907.pdf](https://arxiv.org/pdf/1703.06907.pdf))。'
- en: 'Let’s examine the main elements that are usually randomized in two interesting
    fields: computer vision and NLP.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考察在两个有趣的领域中通常随机化的主要元素：计算机视觉和自然语言处理。
- en: Computer vision
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 计算机视觉
- en: 'In almost any computer vision problem, task, or system, we have the following
    four main elements, as shown in *Figure 14**.2*:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在几乎任何计算机视觉问题、任务或系统中，我们都有以下四个主要元素，如图*图14.2*所示。2：
- en: '![Figure 14.2 – Main elements to randomize in computer vision](img/B18494_14_02.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![图14.2 – 计算机视觉中要随机化的主要元素](img/B18494_14_02.jpg)'
- en: Figure 14.2 – Main elements to randomize in computer vision
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图14.2 – 计算机视觉中要随机化的主要元素
- en: Next, let’s discuss each of these elements in more detail.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们更详细地讨论这些元素。
- en: '**Objects**: They are usually the primary focus of computer vision. They populate
    the scene and interact with each other, the lighting, and the environment. Many
    major tasks in computer vision, such as object detection, recognition, segmentation,
    and tracking, are fundamentally related to the appearance of these images in the
    3D world and how the world is projected by camera as 2D images.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**物体**：它们通常是计算机视觉的主要焦点。它们充满场景并与彼此、光照和环境相互作用。计算机视觉中的许多主要任务，如物体检测、识别、分割和跟踪，从根本上与这些图像在三维世界中的外观以及世界如何被相机投影为二维图像有关。'
- en: 'Utilizing domain randomization to mitigate the domain gap, we can, for instance,
    randomize the following elements to diversify the object’s appearance:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 利用域随机化来缓解域差距，例如，我们可以随机化以下元素以多样化物体的外观：
- en: Textures and materials
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 纹理和材料
- en: Colors
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 颜色
- en: Shapes
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 形状
- en: Dimensions
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 维度
- en: Deformation and animation
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 变形和动画
- en: As you can see, deciding which factors are more relevant depends on the task
    and the problem.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所见，决定哪些因素更相关取决于任务和问题。
- en: '**Lighting**: Although lighting is necessary to make the objects visible to
    the observer, it creates a daunting problem for almost all computer vision tasks.
    A slight variation in lighting conditions drastically changes the appearance of
    objects, thus changing the pixels’ intensity, which makes these objects rather
    hard for ML-based computer vision models to recognize, detect, or track.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**光照**：尽管光照对于使物体对观察者可见是必要的，但它几乎为几乎所有计算机视觉任务都带来了一个令人畏惧的问题。光照条件的一点点变化会极大地改变物体的外观，从而改变像素的强度，这使得这些物体对于基于机器学习的计算机视觉模型来说难以识别、检测或跟踪。'
- en: 'Thus, to make our ML model robust under various lighting conditions, we may
    need to diversify the following elements:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，为了使我们的机器学习模型在各种光照条件下保持鲁棒性，我们可能需要多样化以下元素：
- en: Lighting intensity
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光照强度
- en: Lighting color and temperature
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光照颜色和温度
- en: Light sources
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光源
- en: 'Lighting anomalies: flares, glares, and flickering'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光照异常：耀斑、眩光和闪烁
- en: '**Camera and sensor characteristics**: A camera captures visual data from the
    scene, which is the most generic and conventional input for computer vision models.
    Thus, to ensure that our ML model generalizes well even under new camera setups,
    we need to diversify, for instance, the camera setups in the training stage. This
    can be done by varying the following:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**相机和传感器特性**：相机从场景中捕获视觉数据，这是计算机视觉模型最通用和传统的输入。因此，为了确保我们的机器学习模型即使在新的相机设置下也能很好地泛化，我们需要在训练阶段多样化，例如，多样化的相机设置。这可以通过以下方式实现：'
- en: Camera position
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相机位置
- en: Orientation
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 方向
- en: Altitude
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 海拔
- en: Viewpoints
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视角
- en: Aperture, exposure, and focus
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光圈、曝光和焦点
- en: 'Additionally, a change in camera parameters such as focal length may also drastically
    change how the world is captured and perceived. Thus, it will directly affect
    how the computer vision system recognizes the world, too. Therefore, we may need
    to consider the following sensor characteristic variations in our training data:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，相机参数（如焦距）的变化也可能极大地改变世界被捕捉和感知的方式。因此，它将直接影响计算机视觉系统识别世界的方式。因此，我们可能需要在我们的训练数据中考虑以下传感器特性变化：
- en: Lens distortion
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 镜头畸变
- en: Vignetting
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蒙影
- en: Chromatic aberration
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 色差
- en: Scratches
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 划痕
- en: Haze
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 雾
- en: Light leakage
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 光泄漏
- en: '**Environmental factors**: Even when the scene, lighting, and camera parameters
    are the same, environmental factors can substantially change how the scene may
    look. For example, a weather condition such as fog works as a low-pass filter
    that removes details of objects that are far from the camera. Thus, it makes extracting
    robust features for these scenarios harder. Consequently, many ML models may fail
    or struggle in similar cases.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**环境因素**：即使场景、光照和相机参数相同，环境因素也会在很大程度上改变场景可能的外观。例如，像雾这样的天气条件充当低通滤波器，移除远离相机的物体细节。因此，这使得在这些场景中提取稳健特征变得更加困难。因此，许多机器学习模型可能在类似情况下失败或挣扎。'
- en: 'In many situations, we cannot clearly identify the environmental factors our
    computer vision system will work under, therefore we may need to randomize the
    following factors:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，我们无法清楚地识别我们的计算机视觉系统将工作的环境因素，因此我们可能需要随机化以下因素：
- en: Weather conditions
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 天气状况
- en: Time of day
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 白天时间
- en: Indoor and outdoor environment
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 室内和室外环境
- en: Pollution level
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 污染程度
- en: Wind effects
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 风的影响
- en: Terrain and landscapes
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地形和景观
- en: Road conditions
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 路面状况
- en: Crowd density
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人群密度
- en: Background clutter
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 背景杂乱
- en: Geographical locations
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地理位置信息
- en: Therefore, and based on what we have learned in this section, to mitigate the
    domain gap between source (training) and target (evaluation) domains, we need
    to diversify and randomize the scenarios that our ML model will learn during training.
    Next, let’s delve into utilizing domain randomization for NLP problems.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，基于我们在本节中学到的知识，为了缓解源（训练）和目标（评估）域之间的领域差距，我们需要在训练过程中使我们的机器学习模型学习的场景多样化并随机化。接下来，让我们深入了解如何利用领域随机化来解决NLP问题。
- en: NLP
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自然语言处理（NLP）
- en: 'Similar to what we discussed in computer vision, domain randomization can also
    be utilized for NLP problems. Usually, it can be deployed to make the NLP models
    more robust and accurate. For more information, please refer to *Scaling Up and
    Distilling Down: Language-Guided Robot Skill* *Acquisition* ([https://arxiv.org/abs/2307.14535](https://arxiv.org/abs/2307.14535)).'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 与我们在计算机视觉中讨论的类似，领域随机化也可以用于NLP问题。通常，它可以部署来使NLP模型更加鲁棒和准确。更多信息，请参阅 *《扩大规模与提炼：语言引导的机器人技能获取》*
    ([https://arxiv.org/abs/2307.14535](https://arxiv.org/abs/2307.14535))。
- en: 'As you can see in *Figure 14**.3*, there are four key elements that can be
    randomized to improve the generalizability of NLP models in practice:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在 *图14.3* 中所见，有四个关键元素可以随机化，以在实际中提高NLP模型的泛化能力：
- en: '![Figure 14.3 – Main elements to randomize in NLP](img/B18494_14_03.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图14.3 – NLP中需要随机化的主要元素](img/B18494_14_03.jpg)'
- en: Figure 14.3 – Main elements to randomize in NLP
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图14.3 – NLP中需要随机化的主要元素
- en: 'Let’s discuss these elements in detail as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细讨论以下这些元素：
- en: '**Textual variations**: To improve the NLP model’s generalizability and robustness
    to real-world problems, many textual variations are introduced to augment and
    complement the training data. This is usually done by varying the following elements:'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本变化**：为了提高NLP模型对现实世界问题的泛化能力和鲁棒性，引入了许多文本变化来增强和补充训练数据。这通常通过以下元素的变化来完成：'
- en: Vocabulary
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 词汇表
- en: Sentence structure
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 句子结构
- en: Sentence length
  id: totrans-86
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 句子长度
- en: '**Context**: NLP models can be utilized in different contexts and for various
    applications. For example, ChatGPT can be used to answer questions about various
    topics, such as healthcare, math, finance, and history. It can be utilized to
    propose travel plans or even to summarize text. Thus, it is crucial to diversify
    these elements in the training data:'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**上下文**：NLP模型可以在不同的上下文中以及各种应用中使用。例如，ChatGPT可以用来回答关于各种主题的问题，如医疗保健、数学、金融和历史。它可以用来提出旅行计划，甚至总结文本。因此，在训练数据中多样化这些元素至关重要：'
- en: Topic
  id: totrans-88
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主题
- en: Domain
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 领域
- en: Textual genres, such as social media, research papers, and novels
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本体裁，如社交媒体、研究论文和小说
- en: '**Linguistic factors**: An ideal NLP model should be able to handle and respond
    to queries with different formats and styles. Additionally, it should be capable
    of understanding sentiments in various applications. Thus, the following factors
    should be randomized during the training stage to ensure better performance in
    practice:'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言因素**：一个理想的NLP模型应该能够处理和回应不同格式和风格的查询。此外，它应该能够理解各种应用中的情感。因此，以下因素应在训练阶段随机化，以确保在实际应用中表现更佳：'
- en: Style, such as formal, informal, technical, or colloquial
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 风格，如正式、非正式、技术或口语
- en: Sentiment, such as positive, negative, or neutral expressions
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 情感，如积极、消极或中性表达
- en: '**Noise and perturbations**: Introducing perturbations in the training data
    and guiding the NLP model on how to perform these scenarios will ensure that your
    ML model learns how to respond correctly to these issues. The real world is noisy
    and thus it is crucial to pay attention to the following factors in the training
    stage to cover these well-known imperfections usually observed in textual data:'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**噪声和扰动**：在训练数据中引入扰动，并指导NLP模型如何处理这些场景，将确保您的ML模型学会如何正确应对这些问题。现实世界是嘈杂的，因此在训练阶段关注以下因素至关重要，以覆盖通常在文本数据中观察到的这些已知不完美之处：'
- en: Spelling errors
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拼写错误
- en: Grammar errors
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 语法错误
- en: Punctuation errors
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标点符号错误
- en: Next, let’s explore another interesting domain adaptation method.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们探索另一种有趣的域适应方法。
- en: Adversarial domain adaptation
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对抗域适应
- en: '**Adversarial domain adaptation** is another powerful technique used to bridge
    the gap between synthetic and real domains based on GANs. In this domain adaptation
    method, the generator tries to extract domain-independent features while the discriminator
    tries to identify the source of the data: synthetic or real. Once the model is
    trained and the discriminator can no longer identify the source of the data domain,
    the generator can then generate domain-invariant features. For more information,
    please refer to *Adversarial Discriminative Domain* *Adaptation* ([https://arxiv.org/pdf/1702.05464.pdf](https://arxiv.org/pdf/1702.05464.pdf)).'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '**对抗域适应**是基于GANs在合成域和真实域之间架起桥梁的另一种强大技术。在这种域适应方法中，生成器试图提取域无关的特征，而判别器试图识别数据的来源：合成还是真实。一旦模型训练完成，判别器无法再识别数据域的来源，生成器就可以生成域不变的特征。更多信息，请参阅*对抗判别域*
    *适应* ([https://arxiv.org/pdf/1702.05464.pdf](https://arxiv.org/pdf/1702.05464.pdf))。'
- en: 'Let’s briefly discuss one example from computer vision that illustrates how
    this synthetic-to-real domain adaptation method can be utilized. For example,
    let’s consider the vehicle re-identification problem. It was shown that utilizing
    synthetic and real data for training using adversarial domain adaptation improved
    the performance on two evaluation real datasets, *CityFlow-ReID* ([https://paperswithcode.com/dataset/cityflow](https://paperswithcode.com/dataset/cityflow))
    and *VeRi* ([https://github.com/VehicleReId/VeRi](https://github.com/VehicleReId/VeRi)),
    with a good margin compared to other solutions. The approach was trained on a
    mixture of synthetic and real vehicle re-identification datasets. The ML model
    was guided to learn discriminative features, especially from the real training
    images. At the same time, it was directed to learn the features that are common
    between synthetic and real domains. For more details, please refer to *StRDAN:
    Synthetic-to-Real Domain Adaptation Network for Vehicle Re-Identification* ([https://arxiv.org/abs/2004.12032](https://arxiv.org/abs/2004.12032)).
    Next, let’s look at another approach used for domain adaptation.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们简要讨论一个来自计算机视觉的例子，说明这种合成到真实域的自适应方法如何被利用。例如，让我们考虑车辆重识别问题。研究表明，使用对抗性领域自适应训练合成和真实数据提高了两个评估真实数据集*CityFlow-ReID*
    ([https://paperswithcode.com/dataset/cityflow](https://paperswithcode.com/dataset/cityflow))和*VeRi*
    ([https://github.com/VehicleReId/VeRi](https://github.com/VehicleReId/VeRi))的性能，与其他解决方案相比有很好的差距。该方法在合成和真实车辆重识别数据集的混合上训练。机器学习模型被引导学习判别性特征，特别是从真实训练图像中学习。同时，它还被引导学习合成域和真实域之间的共同特征。更多细节请参阅*StRDAN：用于车辆重识别的合成到真实域自适应网络*
    ([https://arxiv.org/abs/2004.12032](https://arxiv.org/abs/2004.12032))。接下来，让我们看看另一种用于领域自适应的方法。
- en: Feature-based domain adaptation
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于特征的领域自适应
- en: Unlike the previous approach, **feature-based domain adaptation** aims at learning
    a transformation that extracts domain-independent features across synthetic and
    real domains. This approach transfers the features of both domains into a new
    representation and then minimizes the discrepancy between the synthetic and real
    domains. In other words, this method tries to align the feature distributions
    in both domains with each other. Thus, the approach urges the ML model to learn
    essential features while discarding domain-specific details and variations. For
    instance, if the ML model is learning semantic segmentation by being trained on
    the *Synscapes* ([https://synscapes.on.liu.se](https://synscapes.on.liu.se)) and
    *Cityscapes* ([https://www.cityscapes-dataset.com](https://www.cityscapes-dataset.com))
    datasets, we want the model to learn how to segment humans, cars, traffic lights,
    and other objects by somehow learning the meaning of these objects. For instance,
    humans usually walk on pedestrian areas or sidewalks and they usually have a capsule-like
    shape. These are the sorts of high-level and domain-invariant features that we
    want the model to learn.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 与先前的方法不同，**基于特征的领域自适应**旨在学习一种变换，该变换可以从合成域和真实域中提取域无关的特征。这种方法将两个域的特征转换成新的表示，然后最小化合成域和真实域之间的差异。换句话说，这种方法试图使两个域的特征分布相互对齐。因此，这种方法促使机器学习模型学习基本特征，同时丢弃特定于领域的细节和变化。例如，如果机器学习模型通过在*Synscapes*
    ([https://synscapes.on.liu.se](https://synscapes.on.liu.se))和*Cityscapes* ([https://www.cityscapes-dataset.com](https://www.cityscapes-dataset.com))数据集上训练来学习语义分割，我们希望模型能够通过某种方式学习这些对象的意义。例如，人类通常在人行道或人行道上行走，他们通常具有胶囊状形状。这些都是我们希望模型学习的高级和域不变特征。
- en: Finally, for a detailed overview of domain adaption methods, please refer to
    *A Brief Review of Domain Adaptation* ([https://arxiv.org/pdf/2010.03978v1.pdf](https://arxiv.org/pdf/2010.03978v1.pdf)).
    Now, we have learned about some of the key approaches usually utilized for synthetic-to-real
    domain adaptation. Next, let’s delve into their common limitations and how to
    overcome them in practice.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了详细了解领域自适应方法，请参阅*领域自适应简评* ([https://arxiv.org/pdf/2010.03978v1.pdf](https://arxiv.org/pdf/2010.03978v1.pdf))。现在，我们已经了解了通常用于合成到真实域自适应的一些关键方法。接下来，让我们深入了解它们的共同局限性以及如何在实践中克服它们。
- en: Synthetic-to-real domain adaptation – issues and challenges
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合成到真实域的自适应——问题和挑战
- en: 'In this section, you will explore the main issues and challenges of synthetic-to-real
    domain adaptation. This will help you to understand the limitations of this approach.
    Additionally, it will give you a better insight into how to overcome these issues
    in your own problem. Therefore, we will focus on the following issues:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将探索从合成到真实领域自适应的主要问题和挑战。这将帮助你了解这种方法的优势。此外，它还将为你提供更深入的了解，了解如何在你的问题中克服这些问题。因此，我们将重点关注以下问题：
- en: Unseen domain
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 未知的领域
- en: Limited real data
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有限的真实数据
- en: Computational complexity
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算复杂性
- en: Synthetic data limitations
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成数据局限性
- en: Multimodal data complexity
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多模态数据复杂性
- en: Let’s discuss them in detail in the following subsections.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在以下小节中详细讨论它们。
- en: Unseen domain
  id: totrans-113
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 未知的领域
- en: In many cases, the aim is to make sure that your ML model will generalize well
    to new domains. If we know the domain, domain adaptation methods may work. However,
    sometimes it is not possible to predict the properties of this new domain. For
    example, assume you have a computer vision model that works well in Europe but
    you also want this algorithm to work well in China, Africa, the Middle East, or
    even on Mars! It is not always possible to have advanced knowledge of the environment
    or the domain where the ML model will be deployed to make appropriate adaptations.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，目标是确保你的机器学习模型能够很好地泛化到新的领域。如果我们知道领域，领域自适应方法可能有效。然而，有时预测这个新领域的属性是不可能的。例如，假设你有一个在欧洲表现良好的计算机视觉模型，但你还想让这个算法在中国、非洲、中东甚至火星上也能工作！我们并不总是能够拥有关于机器学习模型将要部署的环境或领域的先进知识，以便进行适当的适应。
- en: Limited real data
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 有限的真实数据
- en: As we know, real data is scarce and expensive. Thus, supervised domain adaptation
    methods cannot be easily applied to all ML problems. Additionally, the limited
    availability of paired data between synthetic and real domains makes the problem
    even harder. Thus, it is indeed complex and cumbersome to learn the mapping from
    a synthetic to a real domain.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所知，真实数据稀缺且昂贵。因此，监督式领域自适应方法不能轻易应用于所有机器学习问题。此外，合成领域和真实领域之间配对数据的有限可用性使得问题更加困难。因此，从合成领域到真实领域的映射学习确实复杂且繁琐。
- en: Computational complexity
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 计算复杂性
- en: Domain adaptation methods are computationally expensive and may require resources,
    time, experience, substantial budget, and domain experts. Thus, it is not easy,
    and it is sometimes challenging to train these models, especially adversarial
    domain adaptation ones.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 领域自适应方法计算成本高，可能需要资源、时间、经验、大量预算和领域专家。因此，训练这些模型，尤其是对抗性领域自适应模型，并不容易，有时甚至具有挑战性。
- en: Synthetic data limitations
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 合成数据局限性
- en: Synthetic data has some limitations, especially if the data is not generated
    appropriately. Synthetic data may lack the diversity and realism of real data.
    Thus, it makes it even harder for adaptation methods to bridge the gap. Please
    refer to [*Chapter 13*](B18494_13.xhtml#_idTextAnchor216).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 合成数据有一些局限性，特别是如果数据生成不当。合成数据可能缺乏真实数据的多样性和现实性。因此，这使得适应方法弥合差距变得更加困难。请参阅[*第13章*](B18494_13.xhtml#_idTextAnchor216)。
- en: Multimodal data complexity
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多模态数据复杂性
- en: Recent state-of-the-art computer vision systems such *Tesla Vision Autopilot*
    utilize data captured from different sources, such as cameras, LiDAR sensors,
    radar sensors, accelerometers, and gyroscopes. However, generating and annotating
    the real data and matching it with synthetic data is not a straightforward process.
    For example, it is possible to generate semantic segmentation, optical flow, or
    other relevant ground truths, but it is very difficult to simulate the behavior
    of accelerometers and gyroscopes in virtual worlds. Additionally, it is very complex
    to develop a simulator that provides all these ground truths together. In parallel
    to that, it is rather hard for domain adaptation to learn how to appropriately
    adapt the data from one domain to another.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 最近最先进的计算机视觉系统，如 *Tesla Vision Autopilot*，利用来自不同来源的数据，例如摄像头、激光雷达传感器、雷达传感器、加速度计和陀螺仪。然而，生成和标注真实数据以及将其与合成数据匹配并不是一个简单的过程。例如，可以生成语义分割、光流或其他相关地面真实情况，但模拟虚拟世界中加速度计和陀螺仪的行为非常困难。此外，开发一个提供所有这些地面真实情况的模拟器非常复杂。与此并行，领域自适应学习如何适当地将一个领域的数据适应到另一个领域也相当困难。
- en: Summary
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned the essence of the domain gap problem in ML. Additionally,
    you explored the main solutions to mitigate this problem. We focused on domain
    randomization in computer vision and NLP. Then, you learned about the main issues
    and limitations of synthetic-to-real domain adaptation. In the next chapter, we
    will explore and highlight diversity issues in synthetic data to better comprehend
    the pros and cons of synthetic data in ML.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了机器学习领域中域差距问题的本质。此外，你还探讨了缓解该问题的主要解决方案。我们重点讨论了计算机视觉和自然语言处理中的域随机化。然后，你了解了从合成域到真实域适应的主要问题和局限性。在下一章中，我们将探讨并强调合成数据中的多样性问题，以便更好地理解合成数据在机器学习中的优缺点。
