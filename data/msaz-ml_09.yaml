- en: Chapter 9. A Recommender System
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第9章。推荐系统
- en: Recommender systems are common these days. You may not have noticed, but you
    might already be a user or receiver of such a system somewhere. Most of the well-performing
    e-commerce platforms use recommendation systems to recommend items to their users.
    When you see on the Amazon website that a book is recommended to you based on
    your earlier preferences, purchases, and browse history, Amazon is actually using
    such a recommendation system. Similarly, Netflix uses its recommendation system
    to suggest movies for you.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统如今很常见。您可能没有注意到，但您可能已经在某个地方成为这样的系统的一个用户或接收者。大多数表现良好的电子商务平台都使用推荐系统向用户推荐商品。当您在亚马逊网站上看到根据您之前的偏好、购买和浏览历史推荐给您一本书时，亚马逊实际上正在使用这样的推荐系统。同样，Netflix使用其推荐系统为您推荐电影。
- en: A recommender or recommendation system is used to recommend a product or information
    often based on user characteristics, preferences, history, and so on. So, a recommendation
    is always personalized.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐器或推荐系统通常基于用户特征、偏好、历史等信息推荐产品或信息。因此，推荐总是个性化的。
- en: Until recently, it was not so easy or straightforward to build a recommender,
    but Azure ML makes it really easy to build one as long as you have your data ready.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 直到最近，构建推荐系统并不容易或直接，但只要您准备好了数据，Azure ML就能让您轻松构建一个推荐系统。
- en: This chapter introduces you to the concept of recommendation systems and also
    the model available in ML Studio for you to build your own recommender system.
    It then walks you through the process of building a recommendation system with
    a simple example.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章向您介绍了推荐系统的概念，以及ML Studio中可用的模型，供您构建自己的推荐系统。然后，它通过一个简单的示例引导您了解构建推荐系统的过程。
- en: The Matchbox recommender
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Matchbox推荐器
- en: Microsoft has developed a large-scale recommender system based on a probabilistic
    model (Bayesian) called **Matchbox**. This model can learn about a user's preferences
    through observations made on how they rate items, such as movies, content, or
    other products. Based on those observations, it recommends new items to the users
    when requested.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 微软开发了一个基于概率模型（贝叶斯）的大规模推荐系统，称为**Matchbox**。该模型可以通过观察用户如何对物品（如电影、内容或其他产品）进行评分来了解用户的偏好。基于这些观察，当请求时，它会向用户推荐新的物品。
- en: Matchbox uses the available data for each user in the most efficient way possible.
    The learning algorithm it uses is designed specifically for big data. However,
    its main feature is that Matchbox takes advantage of metadata available for both
    users and items. This means that the things it learns about one user or item can
    be transferred across to other users or items.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Matchbox以最有效的方式使用每个用户可用的数据。它使用的学习算法专门为大数据设计。然而，其主要特点是Matchbox利用了用户和物品都可用到的元数据。这意味着它关于一个用户或物品所学习到的信息可以转移到其他用户或物品。
- en: You can find more information about the Matchbox model at the Microsoft Research
    project link.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在微软研究项目的链接中找到更多关于Matchbox模型的信息。
- en: Types of recommendations
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 推荐类型
- en: 'The Matchbox recommender supports the building of four kinds of recommenders,
    which will include most of the scenarios. Let''s take a look at the following
    list:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Matchbox推荐器支持构建四种类型的推荐器，这几乎涵盖了所有场景。让我们看看以下列表：
- en: '**Rating Prediction**: This predicts ratings for a given user and item, for
    example, if a new movie is released, the system will predict what will be your
    rating for that movie out of 1-5.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评分预测**：这会预测给定用户和物品的评分，例如，如果一部新电影上映，系统将预测您对该电影的评分（1-5分）。'
- en: '**Item Recommendation**: This recommends items to a given user, for example,
    Amazon suggests you books or YouTube suggests you videos to watch on its home
    page (especially when you are logged in).'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**物品推荐**：这会向给定用户推荐物品，例如，亚马逊建议您阅读书籍，或者YouTube建议您在主页上观看视频（尤其是当您登录时）。'
- en: '**Related Users**: This finds users that are related to a given user, for example,
    LinkedIn suggests people that you can get connected to or Facebook suggests friends
    to you.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**相关用户**：这会找到与指定用户相关联的用户，例如，LinkedIn建议您可以与之建立联系的人，或者Facebook建议您添加的朋友。'
- en: '**Related Items**: This finds the items related to a given item, for example,
    a blog site suggests you related posts when you are reading a blog post.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**相关物品**：这会找到与指定物品相关的物品，例如，当您阅读博客文章时，博客网站会建议您阅读相关帖子。'
- en: Understanding the recommender modules
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解推荐模块
- en: The Matchbox recommender comes with three components; as you might have guessed,
    a module each to train, score, and evaluate the data. The modules are described
    as follows.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Matchbox推荐器包含三个组件；正如你可能猜到的，每个组件分别用于训练、评分和评估数据。模块描述如下。
- en: The Train Matchbox recommender
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 训练Matchbox推荐器
- en: 'This module contains the algorithm and generates the trained algorithm, as
    shown in the following screenshot:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 此模块包含算法并生成训练好的算法，如下面的截图所示：
- en: '![The Train Matchbox recommender](img/0792EN_09_9.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![The Train Matchbox recommender](img/0792EN_09_9.jpg)'
- en: This module takes the values for the following two parameters.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 此模块接受以下两个参数的值。
- en: The number of traits
  id: totrans-21
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 特质数量
- en: This value decides how many implicit features (traits) the algorithm will learn
    about that are related to every user and item. The higher this value, the precise
    it would be as it would lead to better prediction. Typically, it takes a value
    in the range of 2 to 20.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 此值决定了算法将学习多少与每个用户和项目相关的隐式特征（特质）。此值越高，预测将越精确，因为它会导致更好的预测。通常，它取值范围为2到20。
- en: The number of recommendation algorithm iterations
  id: totrans-23
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 推荐算法迭代次数
- en: It is the number of times the algorithm iterates over the data. The higher this
    value, the better would the predictions be. Typically, it takes a value in the
    range of 1 to 10.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这是算法遍历数据的次数。此值越高，预测将越好。通常，它取值范围为1到10。
- en: The Score Matchbox recommender
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 评分Matchbox推荐器
- en: 'This module lets you specify the kind of recommendation and corresponding parameters
    you want:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 此模块允许您指定所需的推荐类型及其对应参数：
- en: Rating Prediction
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评分预测
- en: Item Prediction
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 项目预测
- en: Related Users
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关用户
- en: Related Items
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关项目
- en: 'Let''s take a look at the following screenshot:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下下面的截图：
- en: '![The Score Matchbox recommender](img/0792EN_09_10.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![The Score Matchbox recommender](img/0792EN_09_10.jpg)'
- en: The ML Studio help page for the module provides details of all the corresponding
    parameters.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 模块的ML Studio帮助页面提供了所有对应参数的详细信息。
- en: The evaluate recommender
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 评估推荐器
- en: 'This module takes a test and a scored dataset and generates evaluation metrics,
    as shown in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 此模块接受测试和评分数据集，并生成评估指标，如下面的截图所示：
- en: '![The evaluate recommender](img/0792EN_09_11.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![The evaluate recommender](img/0792EN_09_11.jpg)'
- en: It also lets you specify the kind of recommendation, such as the score module
    and corresponding parameters.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 它还允许您指定推荐类型，例如评分模块及其对应参数。
- en: Building a recommendation system
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建推荐系统
- en: Now, it would be worthwhile that you learn to build one by yourself. We will
    build a simple recommender system to recommend restaurants to a given user.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，学习自己构建一个将是有益的。我们将构建一个简单的推荐系统，为特定用户推荐餐厅。
- en: 'ML Studio includes three sample datasets, described as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ML Studio包括三个样本数据集，如下所述：
- en: '**Restaurant customer data**: This is a set of metadata about customers, including
    demographics and preferences, for example, **latitude**, **longitude**, **interest**,
    and **personality**.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**餐厅客户数据**：这是一组关于客户的元数据，包括人口统计信息和偏好，例如，**纬度**、**经度**、**兴趣**和**个性**。'
- en: '**Restaurant feature data**: This is a set of metadata about restaurants and
    their features, such as food type, dining style, and location, for example, **placeID**,
    **latitude**, **longitude**, **price**.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**餐厅特征数据**：这是一组关于餐厅及其特征的元数据，例如食物类型、用餐风格和位置，例如，**地点ID**、**纬度**、**经度**、**价格**。'
- en: '**Restaurant ratings**: This contains the ratings given by users to restaurants
    on a scale of 0 to 2\. It contains the columns: **userID**, **placeID**, and **rating**.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**餐厅评分**：这包含了用户对餐厅在0到2的评分范围内的评分。它包含以下列：**用户ID**、**地点ID**和**评分**。'
- en: 'Now, we will build a recommender that will recommend a given number of restaurants
    to a user (**userID**). To build a recommender perform the following steps:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将构建一个推荐器，为用户推荐一定数量的餐厅（**用户ID**）。要构建推荐器，请执行以下步骤：
- en: Create a new experiment. In the Search box in the modules palette, type `Restaurant`.
    The preceding three datasets get listed. Drag them all to the canvas one after
    another.![Building a recommendation system](img/0792EN_09_1.jpg)
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的实验。在模块调色板中的搜索框中输入“餐厅”。前三个数据集将被列出。依次将它们全部拖到画布上。![构建推荐系统](img/0792EN_09_1.jpg)
- en: Drag a **Split** module and connect it to the output port of the **Restaurant
    ratings** module. On the properties section to the right, choose **Splitting mode**
    as **Recommender Split**. Leave the other parameters at their default values.![Building
    a recommendation system](img/0792EN_09_2.jpg)
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Split**模块拖动并连接到**Restaurant ratings**模块的输出端口。在右侧的属性部分，选择**Splitting mode**为**Recommender
    Split**。其他参数保持默认值。![构建推荐系统](img/0792EN_09_2.jpg)
- en: 'Drag a **Project Columns** module to the canvas and select the columns: **userID**,
    **latitude**, **longitude**, **interest**, and **personality**.![Building a recommendation
    system](img/0792EN_09_3.jpg)'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Project Columns**模块拖动到画布上，并选择以下列：**userID**、**latitude**、**longitude**、**interest**和**personality**。![构建推荐系统](img/0792EN_09_3.jpg)
- en: 'Similarly, drag another **Project Columns** module and connect it to the **Restaurant
    feature data** module and select the columns: **placeID**, **latitude**, **longitude**,
    **price**, **the_geom_meter**, and **address**, **zip**.'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类似地，拖动另一个**Project Columns**模块并将其连接到**Restaurant feature data**模块，并选择以下列：**placeID**、**latitude**、**longitude**、**price**、**the_geom_meter**、**address**和**zip**。
- en: Drag a **Train** **Matchbox Recommender** module to the canvas and make connections
    to the three input ports, as shown in the following screenshot:![Building a recommendation
    system](img/0792EN_09_4.jpg)
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Train Matchbox Recommender**模块拖动到画布上，并按照以下截图所示连接到三个输入端口：![构建推荐系统](img/0792EN_09_4.jpg)
- en: Drag a **Score Matchbox Recommender** module to the canvas and make connections
    to the three input ports and set the property's values, as shown in the following
    screenshot:![Building a recommendation system](img/0792EN_09_5.jpg)
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Score Matchbox Recommender**模块拖动到画布上，并按照以下截图所示连接到三个输入端口并设置属性值：![构建推荐系统](img/0792EN_09_5.jpg)
- en: Run the experiment and when it gets completed, right-click on the output of
    the **Score** **Matchbox Recommender** module and click on **Visualize** to explore
    the scored data.![Building a recommendation system](img/0792EN_09_6.jpg)
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行实验，完成后，右键单击**Score Matchbox Recommender**模块的输出，然后单击**Visualize**以探索评分数据。![构建推荐系统](img/0792EN_09_6.jpg)
- en: You can note the different restaurants (IDs) recommended as items for a user
    from the test dataset. The next step is to evaluate the scored prediction. Drag
    the **Evaluate Recommender** module to the canvas and connect the second output
    of the **Split** module to its first input port and connect the output of the
    **Score Matchbox Recommender** module to its second input. Leave the module at
    its default properties.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从测试数据集中查看为用户推荐的不同的餐厅（ID）。下一步是评估评分预测。将**Evaluate Recommender**模块拖动到画布上，并将**Split**模块的第二个输出连接到其第一个输入端口，并将**Score
    Matchbox Recommender**模块的输出连接到其第二个输入端口。保持模块的默认属性。
- en: '![Building a recommendation system](img/0792EN_09_7.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![构建推荐系统](img/0792EN_09_7.jpg)'
- en: Run the experiment again and when finished, right-click on the output port of
    the **Evaluate Recommender** module and click on **Visualize** to find the evaluation
    metric.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 再次运行实验，完成后，右键单击**Evaluate Recommender**模块的输出端口，然后单击**Visualize**以找到评估指标。
- en: The evaluation metric **Normalized Discounted Cumulative Gain** (**NDCG**) is
    estimated from the ground truth ratings given in the test set. Its value ranges
    from *0.0* to *1.0*, where *1.0* represents the most ideal ranking of the entities.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 评估指标**归一化折现累积增益**（**NDCG**）是从测试集中给出的真实评分估计得出的。其值范围从*0.0*到*1.0*，其中*1.0*代表实体最理想的排序。
- en: Summary
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: You started with gaining the basic knowledge about a recommender system. You
    then understood the Matchbox recommender that comes with ML Studio along with
    its components. You also explored different kinds of recommendations that you
    can make with it. Finally, you ended up building a simple recommendation system
    to recommend restaurants to a given user.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 您从获取关于推荐系统的基本知识开始。然后您了解了ML Studio附带的Matchbox推荐器及其组件。您还探索了您可以使用它做出的不同类型的推荐。最后，您构建了一个简单的推荐系统，为特定用户推荐餐厅。
- en: In the following chapter, you will explore how to extend your experiments beyond
    the capability of ML Studio by writing code in either R or Python.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，您将探索如何通过在R或Python中编写代码来扩展您的实验，使其超越ML Studio的能力。
