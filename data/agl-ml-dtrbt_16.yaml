- en: '*Chapter 13*: Model Governance and MLOps'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第13章*：模型治理和MLOps'
- en: In the previous chapters, we learned how to build, understand, and deploy models.
    We will now learn how to govern these models and how to responsibly use these
    models in operations. In earlier chapters, we discussed the methods for understanding
    the business problem, the system in which the model will operate, and the potential
    consequences of using a model's predictions. **MLOps** is a word made up of **machine
    learning and DevOps**. It is made of processes and practices to efficiently, reliably,
    and effectively operationalize the production of **machine learning** (**ML**)
    models within an enterprise. MLOps aims to ensure commercial value and regulatory
    requirements are met continuously by ensuring production models' outcomes are
    of good quality and automation is in place. It provides a centralized system to
    manage the entire life cycle of all ML models in production.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们学习了如何构建、理解和部署模型。现在我们将学习如何治理这些模型，以及如何在运营中负责任地使用这些模型。在早期章节中，我们讨论了理解业务问题、模型将运行的系统以及使用模型预测的潜在后果的方法。**MLOps**是由**机器学习**和**DevOps**组成的词汇。它由一系列流程和实践组成，旨在高效、可靠和有效地在企业内部实现**机器学习**（**ML**）模型的运营。MLOps旨在通过确保生产模型的输出质量良好并实现自动化，来持续满足商业价值和监管要求。它提供了一个集中式系统来管理所有生产中ML模型的整个生命周期。
- en: Activities within MLOps cover all aspects of model deployment, provide real-time
    tracking accuracy of models in production, offer a champion challenger process
    that continuously learns and evaluates models using real-time data, track model
    bias and fairness, and provide a **model governance** framework to ensure that
    models continue to deliver business impact while meeting the regulatory requirements.
    In [*Chapter 8*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116), *Model Scoring
    and Deployment*, we covered model deployment on the DataRobot platform.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: MLOps中的活动涵盖模型部署的所有方面，提供生产中模型的实时跟踪准确性，提供冠军挑战者流程，该流程使用实时数据持续学习和评估模型，跟踪模型偏差和公平性，并提供一个**模型治理**框架，以确保模型在满足监管要求的同时继续产生业务影响。在第[*8章*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116)，“模型评分和部署”中，我们介绍了在DataRobot平台上的模型部署。
- en: 'Furthermore, in [*Chapter 8*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116),
    *Model Scoring and Deployment*, we extensively covered aspects of monitoring models
    in production. Given the crucial role model governance plays within the MLOps
    process, in this chapter, we will introduce the model governance framework. One
    key aspect of model monitoring is to ensure that models are not biased and are
    fair towards all people impacted by the model, which we will explore in this chapter.
    After that, we will take a deeper look at how to enable other aspects of MLOps,
    including how to maintain and monitor models. Thus, we''re going to cover the
    following main topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在第[*8章*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116)，“模型评分和部署”中，我们广泛地讨论了生产中监控模型方面的内容。鉴于模型治理在MLOps过程中的关键作用，在本章中，我们将介绍模型治理框架。模型监控的一个关键方面是确保模型没有偏差，并且对所有受模型影响的人公平，这一点我们将在本章中探讨。之后，我们将更深入地研究如何启用MLOps的其他方面，包括如何维护和监控模型。因此，我们将涵盖以下主要主题：
- en: Governing models
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 治理模型
- en: Addressing model bias and fairness
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决模型偏差和公平性问题
- en: Implementing MLOps
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施MLOps
- en: Notifications and changing models in production
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生产中通知和更改模型
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: Most parts of this chapter require access to the DataRobot software. The example
    utilizes a relatively small dataset, **Book-Crossing**, consisting of three tables,
    whose manipulation was described earlier in [*Chapter 10*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139),
    *Recommender Systems*. As will be covered in the data description, we will create
    new fields in addition to those used in [*Chapter 10*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139),
    *Recommender Systems*.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的大部分内容需要访问DataRobot软件。示例使用了一个相对较小的数据集，**Book-Crossing**，由三个表格组成，其操作在第[*10章*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139)，“推荐系统”中已有描述。在数据描述中，我们将创建除了在第[*10章*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139)，“推荐系统”中使用之外的新字段。
- en: Book-Crossing dataset
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Book-Crossing数据集
- en: The example used to illustrate the aspects of model governance is the same as
    the one used for building recommendation systems in [*Chapter 10*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139),
    *Recommender Systems*. The dataset is based on the Book-Crossing dataset by Cai-Nicolas
    Ziegler and colleagues ([http://www2.informatik.uni-freiburg.de/~cziegler/BX/](http://www2.informatik.uni-freiburg.de/~cziegler/BX/)).
    The data was collected during a 4-week crawl from the Book-Crossing community
    between August and September 2004\.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 用于说明模型治理方面的示例与用于构建推荐系统在第[*第10章*](B17159_10_Final_NM_ePub.xhtml#_idTextAnchor139)，“推荐系统”中使用的示例相同。数据集基于Cai-Nicolas
    Ziegler及其同事的Book-Crossing数据集([http://www2.informatik.uni-freiburg.de/~cziegler/BX/](http://www2.informatik.uni-freiburg.de/~cziegler/BX/))。数据是在2004年8月至9月间对Book-Crossing社区进行的为期4周的爬取中收集的。
- en: Important Note
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'Before using this dataset, the authors of this book have informed the owner
    of the dataset about its usage in this book:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用此数据集之前，本书的作者已通知数据集的所有者关于其在本书中的使用情况：
- en: '*Cai-Nicolas Ziegler, Sean M. McNee, Joseph A. Konstan, Georg Lausen (2005).
    Improving Recommendation Lists Through Topic Diversification. Proceedings of the
    14th International World Wide Web Conference (WWW 2005). May 2010–2014, 2005,
    Chiba, Japan*'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '*Cai-Nicolas Ziegler, Sean M. McNee, Joseph A. Konstan, Georg Lausen (2005).
    通过主题多样化改进推荐列表。第14届国际万维网会议（WWW 2005）论文集。2010年5月至2014年，2005年，日本千叶*'
- en: The subsequent three tables, provided in `.csv` format, make up this dataset.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的三个表格，以`.csv`格式提供，构成了这个数据集。
- en: 'Users: This table presents the profile of the users, with anonymized `User-ID`
    and presented as integers. Also provided are the user `Location` and `Age`.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户：此表展示了用户的个人资料，使用匿名`User-ID`并以整数形式呈现。还包括用户的`Location`和`Age`。
- en: 'Books: This table contains the characteristics of the books. Its features include
    `ISBM`, `Book-Title`, `Book-Author`, `Year-Of-Publication`, and `Publisher`.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 书籍：此表包含了书籍的特征。其特征包括`ISBM`、`Book-Title`、`Book-Author`、`Year-Of-Publication`和`Publisher`。
- en: 'Ratings: This table shows the ratings. Each row provides a user''s rating for
    a book. The `Book-Rating` is either implicit as `0` or explicit between `1` and
    `10` (the higher, the more appreciated). However, within the context of this project,
    we will focus solely on ratings that are explicit for the model development. The
    table also includes the `User-ID` and `ISBN` fields.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评分：此表显示了评分。每一行提供了一个用户对一本书的评分。`Book-Rating`要么是隐式的`0`，要么是显式的`1`到`10`之间（数值越高，越受好评）。然而，在本项目背景下，我们将仅关注用于模型开发的显式评分。该表还包括`User-ID`和`ISBN`字段。
- en: In addition, using Excel, we created two extra fields using age and a rating
    column. We created the `RatingClass` field, which considers a rating over `7`
    as a `High` rating or else it is `Low`. Similarly, we created the `AgeGroup` field;
    this classes ages over 40 as `Over Forty` and those under 25 as `Under 25`, or
    else they are considered simply `Between 25 and 40`. Finally, we dropped out data
    rows with a missing age column.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们使用Excel创建了两个额外的字段，使用年龄和评分列。我们创建了`RatingClass`字段，该字段将评分超过`7`视为`高`评分，否则为`低`。同样，我们创建了`AgeGroup`字段；将40岁以上的年龄归类为`四十岁以上`，将25岁以下的年龄归类为`二十五岁以下`，否则它们被视为`25至40岁之间`。最后，我们删除了缺失年龄列的数据行。
- en: Governing models
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 治理模型
- en: Organizations using ML governance define a framework of rules and controls for
    managing the ML workflows pertaining to model development, production, and post-production
    monitoring. The commercial importance of ML is well established. Still, only a
    fraction of companies investing in ML are realizing the benefits. Some establishments
    have struggled to ensure that the outcomes of ML projects are well aligned with
    their strategic direction. Importantly, many organizations are subject to regulations,
    such as the recently implemented General Data Protection Regulation within the
    European Union and European Economic Area, which affect the use of these models
    and their outputs. Businesses, in general, need to steer their ML use to ensure
    regulatory requirements are satisfied and strategic goals and values are continually
    realized.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 使用机器学习治理的组织定义了一套规则和控制框架，用于管理与模型开发、生产和后期监控相关的机器学习工作流程。机器学习的商业重要性已经确立。然而，只有一小部分投资于机器学习的公司在实现其好处。一些机构在确保机器学习项目的成果与其战略方向良好一致方面遇到了困难。重要的是，许多组织受到法规的约束，例如欧盟和欧洲经济区最近实施的通用数据保护条例，这些法规影响了这些模型及其输出的使用。总的来说，企业需要引导其机器学习使用，以确保满足监管要求，并持续实现战略目标和价值观。
- en: Having an established governance framework in place ensures that data scientists
    can focus on the innovative part of their role, which is solving new problems.
    With governance, data scientists spend less time assessing the commercial value
    their models are delivering to the business, evaluating models' performance of
    production, and examining whether there has been data drift. Model governance
    simplifies the model versioning and change tracking process for all production
    models. This is always a key aspect of ML audit trailing. In addition, notifications
    could be set up to alert stakeholders when a model in production encounters anomalies
    and changes in performance. When there is a significant decline in performance,
    models in production could be swapped with better-performing challenger models
    in a seamless fashion. Although this process might require reviews and authorization
    from other stakeholders, it is much more simple and straightforward than a typical
    data science workflow.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 建立一个治理框架可以确保数据科学家能够专注于他们角色的创新部分，即解决新问题。有了治理，数据科学家花在评估他们的模型为业务带来的商业价值、评估生产模型的性能以及检查是否存在数据漂移的时间会更少。模型治理简化了所有生产模型的版本控制和变更跟踪过程。这是机器学习审计跟踪的关键方面之一。此外，可以设置通知，当生产中的模型遇到异常和性能变化时，提醒利益相关者。当性能出现显著下降时，可以通过无缝的方式将生产中的模型与表现更好的挑战者模型进行交换。尽管这个过程可能需要其他利益相关者的审查和授权，但它比典型的数据科学工作流程要简单得多。
- en: It is clear that governing models throughout the entire process is a complex
    and time-consuming undertaking. Without tool support, it is easy for the data
    science teams to miss key steps. Tools such as DataRobot make this task easier,
    ensuring that many required tasks are performed automatically. This ease of use
    can also sometimes make the teams use these tools without thinking. This can be
    dangerous too. Thus, a judicious mix of using the tools such as DataRobot and
    setting up process controls and reviews is needed to ensure proper governance.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，在整个过程中治理模型是一项复杂且耗时的任务。没有工具支持，数据科学团队很容易错过关键步骤。DataRobot等工具使这项任务变得更容易，确保许多必需的任务自动完成。这种易用性有时也可能导致团队在未思考的情况下使用这些工具。这同样也是危险的。因此，需要谨慎地结合使用DataRobot等工具和建立流程控制和审查，以确保适当的治理。
- en: DataRobot's MLOps provides organizations with an ML model governance framework
    that helps in the management of risks. Using the model governance tool, a business
    executive can track important business metrics and ensure that regulatory requirements
    are met on a continuous basis. They can easily assess the model performance in
    production to ensure that models are fit for purpose. Furthermore, with governance
    in place, the commercial criticality of models is defined before deployment. This
    ensures that when models are critical to the business, certain changes to the
    model need to be reviewed and authorized by stakeholders before such changes are
    fully implemented. In line with ethics, the use of ML models is expected to enable
    a fair process. So, models' outputs should be purged of any form of biases. In
    subsequent sections in this chapter, in addition to other aspects of MLOps, we
    will examine how bias could be mitigated in the ML model in development as well
    as in production.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: DataRobot的MLOps为组织提供了一个机器学习模型治理框架，有助于风险管理。使用模型治理工具，业务主管可以跟踪重要的业务指标，并确保持续满足监管要求。他们可以轻松评估生产中的模型性能，以确保模型适合用途。此外，在部署之前，模型的商业关键性已经通过治理得到定义。这确保了当模型对业务至关重要时，对模型的任何更改都需要在全面实施之前由利益相关者进行审查和授权。符合伦理的要求，期望使用机器学习模型能够实现公平的过程。因此，模型的输出应该消除任何形式的偏见。在本章的后续部分，除了MLOps的其他方面，我们还将探讨如何在开发阶段和在生产阶段减轻机器学习模型的偏差。
- en: Addressing model bias and fairness
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 解决模型偏差和公平性问题
- en: A key characteristic of ML lies in its learning from the past to predict the
    future. This implies that future predictions would be influenced by the past.
    Some training datasets are structured in ways that could introduce bias into ML
    models. These biases are based on unspoken unfairness evident in human systems.
    Bias is known to maintain prejudice and unfairness that preexisted the models
    and could lead to unintended consequences. An AI system that is unable to understand
    human bias mirrors, if not exacerbates, the bias present in the training dataset.
    It is easy to see why women are more likely to receive lower salary predictions
    by ML models than their male counterparts. In a similar example, credit card companies
    using historic data-driven ML models could be steered into offering higher rates
    to individuals from minority backgrounds. Such **unwarranted associated** are
    caused by human bias that is inherent in the training dataset. It is unfair to
    include bias-laden features with unbiased ones in model development. A fair process
    considers an individual's payment history in making predictions about their credit,
    but unfair outcomes are possible when predictions are made based on the payment
    history of their family.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习的一个关键特征在于它从过去学习以预测未来。这意味着未来的预测会受到过去的影响。一些训练数据集的结构可能会在机器学习模型中引入偏见。这些偏见基于人类系统中明显的不言而喻的不公平。众所周知，偏见会维持模型存在之前的偏见和不公平，可能导致意外的后果。一个无法理解人类偏见的
    AI 系统，如果不是加剧，也会反映出训练数据集中的偏见。很容易理解为什么与男性相比，女性更有可能通过机器学习模型获得较低的薪资预测。在类似的例子中，使用历史数据驱动的机器学习模型的信用卡公司可能会被引导向来自少数族裔背景的个人提供更高的利率。这种**未经授权的关联**是由训练数据集中固有的人类偏见引起的。在模型开发中包含带有偏见特征的无偏见特征是不公平的。一个公平的过程在预测个人的信用时考虑了个人的支付历史，但基于家庭成员的支付历史进行预测时，可能会出现不公平的结果。
- en: Supervised learning models can be particularly unfair, as certain data has circular
    dependency. For instance, to obtain a credit card, people need a credit history,
    and to have credit histories, credit cards are required. Since models are critical
    to credit assessment, it becomes nearly impossible for some people to get a credit
    card. Also, limited data about certain subgroups makes them more vulnerable to
    bias. This is because a minimal outcome distribution change in training data for
    such groups could skew the prediction outcomes for members of the group. These
    all point toward the extent to which ML models should manage bias and support
    a fair process.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 监督学习模型可能特别不公平，因为某些数据存在循环依赖。例如，为了获得信用卡，人们需要信用记录，而要拥有信用记录，则需要信用卡。由于模型对信用评估至关重要，因此某些人几乎不可能获得信用卡。此外，关于某些子群体的数据有限，使他们更容易受到偏见的影响。这是因为这类群体训练数据中的最小结果分布变化可能会扭曲该群体成员的预测结果。所有这些都指向了机器学习模型应该管理偏见并支持公平过程的程度。
- en: Many industries – for instance, health care, insurance, and banking – take specific
    measures to guard against any form of bias and unfairness as a regulatory expectation.
    While it is inherently challenging to address bias in humans, it is somewhat easier
    to address ML bias. So, as part of ML governance, addressing ML bias could be
    pivotal in ensuring that their products don't amplify the skepticism about the
    ethical aspects of ML systems.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 许多行业——例如，医疗保健、保险和银行——为了满足监管要求，采取具体措施来防范任何形式的偏见和不公平。虽然解决人类偏见本身具有内在的挑战性，但解决机器学习偏见相对容易一些。因此，作为机器学习治理的一部分，解决机器学习偏见可能是确保他们的产品不会放大对机器学习系统伦理方面的怀疑的关键。
- en: 'In addressing potential unwarranted outcomes, DataRobot has introduced a bias
    and fairness monitoring and control capability. This capability is selected and
    configured during model development. Let''s step back and demonstrate how bias
    could be addressed in DataRobot. As with the typical platform, we upload the data
    as described in the preceding chapters. In the project configuration window (as
    within *Figure 13.1*), we open **Advanced Options** and the **Bias and Fairness**
    tab:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在解决潜在的未经授权的结果时，DataRobot 引入了偏见和公平性监控和控制功能。此功能在模型开发期间进行选择和配置。让我们回顾一下，在 DataRobot
    中如何解决偏见。与典型平台一样，我们上传数据，如前几章所述。在项目配置窗口（如图 13.1 所示），我们打开**高级选项**和**偏见和公平性**选项卡：
- en: It is within this tab that we define protected features, how fairness is established
    and measured, as well as the target variable. We specify the fields in the prediction
    dataset that need to be protected. These are entered in the `AgeGroup` field is
    selected as to be protected (see *Figure 13.1*). In some industry datasets, attributes
    such as sex, ethnicity, age, and religion must be selected. In this way, DataRobot
    manages and presents metrics to measure any potential model bias within each of
    the protected fields:![Figure 13.1 – Configuring bias and fairness during the
    model development
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此选项卡中，我们定义受保护特征，如何建立和衡量公平性，以及目标变量。我们指定预测数据集中需要保护的字段。这些字段在`AgeGroup`字段中被选中作为受保护（参见*图13.1*）。在一些行业数据集中，必须选择诸如性别、种族、年龄和宗教等属性。这样，DataRobot管理和呈现度量标准来衡量每个受保护字段中可能存在的模型偏差：![图13.1
    – 在模型开发过程中配置偏差和公平性
- en: '](img/B17159_13_01.jpg)'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B17159_13_01.jpg)'
- en: Figure 13.1 – Configuring bias and fairness during the model development
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图13.1 – 在模型开发过程中配置偏差和公平性
- en: Next, the `RatingClass` level of `High`. This enables the measurement of bias
    on this level of the target variable.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，`RatingClass`级别的`High`。这使我们可以测量目标变量这一级别的偏差。
- en: The `Proportional Parity`, `Equal Parity`, `Prediction Balance`, `True Favorable
    Rate & True Unfavorable Rate Parity`, and `Favorable Predictive & Unfavorable
    Predictive Value Parity`.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**比例平衡**、**相等平衡**、**预测平衡**、**真实有利率与真实不利率平衡**、**有利预测值与不利预测值平衡**。'
- en: If a user is unsure of the metric to choose, they can click on **Help Me Choose**,
    which presents a further set of questions. Answering these questions presents
    a recommendation of a **Fairness Metric** value, as shown in *Figure 13.2*:![Figure
    13.2 – Fairness Metric recommendation
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果用户不确定选择哪个度量标准，他们可以点击**帮助我选择**，这将呈现进一步的问题集。回答这些问题将提供**公平性度量标准**值的建议，如图*图13.2*所示：![图13.2
    – 公平性度量标准推荐
- en: '](img/B17159_13_02.jpg)'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B17159_13_02.jpg)'
- en: Figure 13.2 – Fairness Metric recommendation
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图13.2 – 公平性度量标准推荐
- en: In choosing our metric, because we are keenly interested in our model having
    similar prediction accuracy across age group membership, the **Equal Error** option
    is selected in response to how we want to measure model fairness. Since our outcome
    distribution is somewhat balanced between high and low, we choose **No** to the
    **Does the favorable target outcome occur for a very small percentage of the population?**
    question. Following this, DataRobot suggests **True Favorable Rate & True Unfavorable
    Rate Parity**. All throughout the process, the platform offers a description of
    the options and presents an explanation of the recommended metric, as well as
    those for other metrics.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在选择我们的度量标准时，因为我们非常关注我们的模型在各个年龄组成员之间具有相似的预测准确性，因此我们选择**Equal Error**选项来响应我们如何衡量模型公平性的需求。由于我们的结果分布在高和低之间相对平衡，我们选择**否**回答**是否对极少数人口有利的目标结果发生？**这个问题。在此之后，DataRobot建议**True
    Favorable Rate & True Unfavorable Rate Parity**。在整个过程中，平台提供了选项的描述，并解释了推荐的度量标准，以及其他度量标准。
- en: 'A click on `AgeGroup` `Light Gradient Boosting on Elastic Predictions` model
    presented in *Figure 13.3* is below the default threshold:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*图13.3*中展示的`AgeGroup` `Light Gradient Boosting on Elastic Predictions`模型点击低于默认阈值：
- en: '![Figure 13.3 – Per-Class Bias exploration'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '![图13.3 – 每类偏差探索'
- en: '](img/B17159_13_03.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_03.jpg)'
- en: Figure 13.3 – Per-Class Bias exploration
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.3 – 每类偏差探索
- en: 'According to this outcome, the accuracy of the model in predicting the true
    unfavorable outcome (of a `Low` rating) for individuals within the `Between 25
    and 40` class is lower than the other two classes. The score for this class falls
    below the default 80% threshold. The default threshold of 80% was applied for
    `Between 25 and 40` class. *Figure 13.4* demonstrates how **Cross-Class Accuracy**,
    a set of more holistic accuracy metrics, could be used to assess accuracy across
    the protected classes:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这个结果，模型在预测`Between 25 and 40`类中个体的真实不利结果（低评级）的准确性低于其他两个类别。这个类别的得分低于默认的80%阈值。`Between
    25 and 40`类应用了默认的80%阈值。*图13.4*展示了**交叉类精度**，一组更全面的准确性指标，如何用于评估受保护类别的准确性：
- en: '![Figure 13.4 – Cross-Class Accuracy examination'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![图13.4 – 交叉类精度检验'
- en: '](img/B17159_13_04.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_04.jpg)'
- en: Figure 13.4 – Cross-Class Accuracy examination
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图13.4 – 交叉类精度检验
- en: '`AgeGroup` class. As the outcome in *Figure 13.4* suggests, the accuracy of
    the model seems to be lower for the `Between 25 and 40` class across all accuracy
    measures. Because, as earlier alluded to, the performance of the model is similar
    across classes when it is the favorable class, only the lower true rate for the
    unfavorable outcome for the `Between 25 and 40` class seems to affect the fairness
    of the model. Because models learn from past data, exploring the features that
    might be responsible for this bias might be crucial in taking further actions.
    *Figure 13.5* shows the **Cross-Class Data Disparity** capability, which presents
    deep dives into why bias exists in ML models:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '`AgeGroup`类别。正如 *图 13.4* 所示，模型的准确性似乎在所有准确性指标上对`25 至 40 岁`类别较低。因为，正如之前提到的，当模型处于有利类别时，其性能在各个类别之间相似，只有`25
    至 40 岁`类别的负面结果的真实率较低似乎影响了模型的公平性。因为模型从历史数据中学习，探索可能导致这种偏差的特征可能对采取进一步行动至关重要。*图 13.5*
    展示了**交叉类别数据差异**功能，它深入探讨了为什么机器学习模型中存在偏差：'
- en: '![Figure 13.5 – A Cross-Class Data Disparity comparison between two age classes'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.5 – 两个年龄组之间的交叉类别数据差异比较'
- en: '](img/B17159_13_05.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17159_13_05.jpg](img/B17159_13_05.jpg)'
- en: Figure 13.5 – A Cross-Class Data Disparity comparison between two age classes
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.5 – 两个年龄组之间的交叉类别数据差异比较
- en: To explore the rationale behind the model bias, the `Age-Group` feature seems
    to affect the model's accuracy. This is because `Age-Group`, being the predicted
    variable, will have the largest disparity in comparison to other variables, as
    it is identical to the predicted variable. The `year` book had a lower data disparity
    but had greater importance than the `Age-Group` feature. Further examination of
    the distribution of the year in the right-hand chart (*Figure 13.6*) shows that
    older books and books with a missing year seem to have been rated more by the
    `Over Forty` group in comparison with the `Between 25 and 40` group. On the contrary,
    the `Between 25 and 40` cohorts seem to be rated more of the newer books than
    their older counterparts.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 为了探索模型偏差背后的原因，`年龄组`特征似乎影响了模型的准确性。这是因为`年龄组`作为预测变量，与其他变量相比将具有最大的差异，因为它与预测变量相同。`年份`特征的数据差异较低，但比`年龄组`特征更重要。进一步考察右手图表（*图
    13.6*）中年份的分布显示，与`25 至 40 岁`组相比，较老的书和缺失年份的书似乎更多地被`四十岁以上`组评价。相反，`25 至 40 岁`群体似乎对较新书评价更多，而对其较老的同龄人评价较少。
- en: 'When model bias exceeds an enterprise-established threshold, steps need to
    be taken to manage this unfairness. Options to address this unfairness include
    dropping features that might be responsible for the bias and retraining the model,
    or changing the model for a more ethical model. Most of the time, these changes
    ultimately affect the overall accuracy of the model. However, in our example case,
    `Light Gradient Boosting on Elastic Predictions` wasn''t our best-performing model.
    DataRobot has within its bias and fairness toolkit the **Bias vs Accuracy** leaderboard
    comparison capability (see *Figure 13.6*):'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 当模型偏差超过企业设定的阈值时，需要采取措施来管理这种不公平性。解决这种不公平性的选项包括删除可能导致偏差的特征、重新训练模型，或者改变模型以使其更符合道德标准。大多数情况下，这些更改最终会影响模型的总体准确性。然而，在我们的示例案例中，`基于弹性预测的轻梯度提升`并不是我们表现最好的模型。DataRobot在其偏差和公平性工具包中具有**偏差与准确性**排行榜比较功能（见
    *图 13.6*）：
- en: '![Figure 13.6 – Bias vs Accuracy leaderboard'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.6 – 偏差与准确性排行榜'
- en: '](img/B17159_13_06.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17159_13_06.jpg](img/B17159_13_06.jpg)'
- en: Figure 13.6 – Bias vs Accuracy leaderboard
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.6 – 偏差与准确性排行榜
- en: The `Keras Residual AutoInt Classifier using Training Schedule` was the most
    accurate model and met the ethic threshold. In this case, this model could be
    deployed into production. It is important to note that neural network-based models
    are generally not accepted by many regulators today, but this could change in
    the future.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 使用训练计划的`Keras 剩余自注意力分类器`是最准确的模型，并符合道德标准。在这种情况下，这个模型可以被部署到生产环境中。需要注意的是，基于神经网络的模型目前通常不被许多监管机构接受，但这种情况可能会在未来改变。
- en: Processes concerning the assessment of ML model bias and fairness are expected
    to be integrated into the data science workflow to ensure model outcomes support
    a fair process. This becomes more important as conversations pertaining to ethical
    AI are becoming more ubiquitous across industries. Having looked at ways to ensure
    models are fair, we now progress into deploying the fair model, monitoring model
    performance in production, and other aspects of implementing MLOps in the next
    section.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 预计将有关评估ML模型偏差和公平性的流程集成到数据科学工作流程中，以确保模型结果支持公平的过程。随着关于伦理AI的对话在各个行业变得越来越普遍，这一点变得更加重要。在探讨了确保模型公平的方法之后，我们现在将进入下一节，讨论部署公平模型、监控生产中的模型性能以及实施MLOps的其他方面。
- en: Implementing MLOps
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施MLOps
- en: DataRobot, through its MLOps suite, provides capabilities to enable users to
    not only deploy models in production, but govern, monitor, and manage the models
    in production. In previous chapters, we have looked at how models are deployed
    on the platform and using the Python API client. MLOps provides an automated model
    monitoring capability, which tracks the service health, accuracy, and data drift
    of models in production. The automated real-time monitoring of production models
    ensures that models have high-quality outputs. Also, when there is a performance
    degeneration, stakeholders are notified, so action can be taken.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: DataRobot通过其MLOps套件，为用户提供能力，不仅能够在生产环境中部署模型，还能治理、监控和管理生产环境中的模型。在之前的章节中，我们探讨了如何在平台上部署模型以及如何使用Python
    API客户端。MLOps提供了一种自动化的模型监控能力，它可以跟踪生产环境中模型的健康状态、准确性和数据漂移。对生产模型的实时自动化监控确保了模型输出高质量的结果。此外，当模型性能下降时，相关利益相关者会收到通知，以便采取行动。
- en: In this section, we will focus on aspects of model monitoring that we didn't
    cover in [*Chapter 8*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116), *Model
    Scoring and Deployment*, of this book. We looked at how to examine the quality
    of deployment services, as well as changes in the underline feature distribution
    between the training and prediction data across time through the service health
    and data drift capabilities. As time passes, more recent data with target variables
    is introduced to the deployment. DataRobot can then examine models' initial predictions
    and establish models' actual accuracy in production. DataRobot also provides the
    capability to switch between alternative models in production. This section focuses
    on the evaluation of production model accuracy, setting up notifications, as well
    as switching models in production.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将重点关注本书第8章“模型评分和部署”中未涉及到的模型监控方面。我们探讨了如何通过服务健康和数据漂移功能检查部署服务的质量，以及随着时间的推移，训练数据和预测数据之间底层特征分布的变化。随着时间的推移，引入了包含目标变量的最新数据到部署中。DataRobot可以检查模型的初始预测并确定生产环境中模型的实际准确性。DataRobot还提供了在生产环境中切换不同模型的能力。本节重点介绍生产模型准确性的评估、设置通知以及在生产环境中切换模型。
- en: 'As you can guess by now, the job of the data science team does not end once
    a model is deployed. We now must monitor our models in production. After models
    have been deployed, before engaging in conversations pertaining to the monitoring
    of models, we need to control what individuals can do with those deployments.
    Stakeholder roles and responsibilities are important aspects of MLOps governance.
    Successful implementation of ML solutions depends on a clear definition of roles
    and what the actual duties of stakeholders are throughout ML models'' production
    life cycles. As *Figure 13.7* highlights, when deployments are shared with other
    stakeholders, each stakeholder is given a role that defines their access level
    to that deployment:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如您现在所猜测的，数据科学团队的工作在模型部署后并未结束。我们现在必须监控生产环境中的模型。在涉及模型监控的对话开始之前，我们需要控制个人对那些部署的权限。利益相关者的角色和责任是MLOps治理的重要方面。成功实施ML解决方案取决于对角色和利益相关者在ML模型生产生命周期中实际职责的明确定义。正如*图
    13.7* 所强调的，当部署与其他利益相关者共享时，每个利益相关者都会被赋予一个角色，该角色定义了他们对该部署的访问级别：
- en: '![Figure 13.7 – Sharing deployments'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.7 – 部署共享'
- en: '](img/B17159_13_07.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_07.jpg)'
- en: Figure 13.7 – Sharing deployments
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.7 – 部署共享
- en: To open the deployment sharing window (as shown in *Figure 13.7*), after the
    model was deployed, the deployment action button (the triple dash icon) on the
    top right-hand side was selected. Then, **Share** was chosen. Here, this **RatingClass
    Predictions** deployment was shared with a stakeholder, [ben@aaaa.com](mailto:ben@aaaa.com).
    Importantly, this individual was given the role of **User**. With the **User**
    role, this stakeholder can write and read. In an actual sense, they can view the
    deployment, consume predictions, view deployment inventory, use the API to get
    data, and add other users to the deployment. The **Owner** level has additional
    administration rights and can perform business-critical operations, such as deleting
    the deployment, replacing the model, and editing the deployment metadata. The
    lowest user role is **Consumer**, which only allows stakeholders the right to
    consume predictions via the API route.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要打开部署共享窗口（如图 *图 13.7* 所示），在模型部署后，选中右上角的部署操作按钮（三横线图标）。然后，选择**共享**。在这里，这个**RatingClass
    Predictions**部署与一个利益相关者共享，[ben@aaaa.com](mailto:ben@aaaa.com)。重要的是，这个人被赋予了**用户**的角色。拥有**用户**角色，这个利益相关者可以读写。实际上，他们可以查看部署，消费预测，查看部署清单，使用
    API 获取数据，并将其他用户添加到部署中。**所有者**级别有额外的管理权限，可以执行业务关键操作，例如删除部署，替换模型，以及编辑部署元数据。最低的用户角色是**消费者**，它只允许利益相关者通过
    API 路由消费预测。
- en: Production model monitoring ensures that models continue to deliver high-quality
    business impact as expected during development. A decline in this quality is a
    result of an alteration in the production data distribution or changes in the
    extent to which features affect the endogenous variable. For instance, changes
    in usage affect customer attrition, a variable of importance to a business. During
    a holiday period, the predictions for attrition would be higher. Such fluctuations
    in attrition prediction cause worry to the business if they are not expecting
    this change in distribution or data drift. In the same way, the extent to which
    predictor variables could influence a business outcome could also change. A point
    in case could be the effect of price on the propensity to buy. During the peak
    of a pandemic, individuals are far more conservative in their purchase of non-essentials.
    Now, imagine the chances of the accuracy of an in-production buying propensity
    model built for a non-essential product built before the pandemic. It is easy
    to see that the accuracy of the model will decay in production quite rapidly,
    thus having a significant impact on the business performance. Such situations
    raise the need to monitor the performance of models post-deployment.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 生产模型监控确保模型在开发期间按预期继续提供高质量的商业影响。这种质量的下降是生产数据分布变化或特征影响内生变量的程度变化的结果。例如，使用量的变化会影响客户流失，这是企业的一个重要变量。在假日期间，流失的预测将会更高。如果他们没有预料到这种分布或数据漂移的变化，这种流失预测的波动会给企业带来担忧。同样，预测变量影响业务结果的程度也可能发生变化。一个例子是价格对购买倾向的影响。在大流行高峰期，个人在非必需品的购买上要保守得多。现在，想象一下在大流行之前为非必需品构建的、正在生产的购买倾向模型的准确性。很容易看出，模型的准确性在生产中会迅速下降，从而对业务绩效产生重大影响。这种情况下，需要监控模型部署后的性能。
- en: 'In [*Chapter 8*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116), *Model Scoring
    and Deployment*, we covered data drift, which examines changes in distribution
    between the training and production datasets, while accounting for their feature
    importance. Here, our focus will shift to monitoring the effect of variables on
    outcomes while in production. Changes in this effect could be established through
    the monitoring of production models'' accuracy, a capability DataRobot offers.
    As part of the **Deployments Settings** window, as shown in *Figure 13.8*, there
    is an **Accuracy** tab:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [*第 8 章*](B17159_08_Final_NM_ePub.xhtml#_idTextAnchor116) *模型评分和部署* 中，我们讨论了数据漂移，它检查训练集和生成集之间的分布变化，同时考虑到其特征重要性。在这里，我们的重点将转移到监控生产中变量对结果的影响。这种影响的变化可以通过监控生产模型的准确性来确定，这是
    DataRobot 提供的功能。作为 **部署设置** 窗口的一部分，如图 *图 13.8* 所示，有一个 **准确性** 选项卡：
- en: '![Figure 13.8 – Deployment window for accuracy setup'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.8 – 准确性设置部署窗口'
- en: '](img/B17159_13_08.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.8 – 准确性设置部署窗口](img/B17159_13_08.jpg)'
- en: Figure 13.8 – Deployment window for accuracy setup
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.8 – 准确性设置部署窗口
- en: 'The **Accuracy** tab offers insight into the accuracy of production models.
    This capability allows users the ability to examine the performance of their production
    models over time. To compute the accuracy of a production model, actual outcomes
    need to be provided. After actuals have been uploaded, to generate accuracies,
    a set of fields needs to be completed. These include the **Actual Response** and
    **Association ID** fields, as well as those that are optional, **Was acted on**
    and **Timestamp** (see *Figure 13.9*):'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**精度**选项卡提供了对生产模型精度的洞察。此功能允许用户检查其生产模型随时间的变化性能。为了计算生产模型的精度，需要提供实际结果。在上传实际结果后，为了生成精度，需要完成一系列字段。这些包括**实际响应**和**关联
    ID**字段，以及可选的**已采取行动**和**时间戳**（参见*图 13.9*）：'
- en: '![Figure 13.9 – Accuracy setup features'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.9 – 精度设置特征'
- en: '](img/B17159_13_09.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_09.jpg)'
- en: Figure 13.9 – Accuracy setup features
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.9 – 精度设置特征
- en: 'The `RatingClass`. To link this to the earlier prediction dataset, `rowid`
    in this example, is requested to enable this connection. It is important to note
    that sometimes as a result of the models'' predictions, action is taken by the
    business that could ultimately influence the outcome. To account for this possibility
    in calculating accuracy, the **Was acted on** and **Timestamp** variables are
    optionally requested (see *Figure 13.10* for the selection of these features):'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '`RatingClass`。为了将此与先前的预测数据集链接，本例中的`rowid`被请求以启用此连接。需要注意的是，有时由于模型的预测结果，业务可能会采取行动，这最终可能会影响结果。为了在计算精度时考虑这种可能性，可选地请求**已采取行动**和**时间戳**变量（参见*图
    13.10* 中这些特征的选取）：'
- en: '![Figure 13.10 – Production accuracy identification feature selection'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.10 – 生产精度识别特征选择'
- en: '](img/B17159_13_10.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_10.jpg)'
- en: Figure 13.10 – Production accuracy identification feature selection
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.10 – 生产精度识别特征选择
- en: 'After the mandatory variables are selected, the **Save** button is clicked.
    This sets the computation off, thereafter opening the **Accuracy** window, displaying
    the production accuracy of the model. The performance of the production model
    is presented as tiles and as a graphical time series. *Figure 13.11* presents
    the **Deployment Accuracy** window. The **LogLoss**, **AUC**, **Accuracy**, **Kolmogorov-Smirmov**,
    and **Gini Norm** metrics tiles are selected. **Start** shows the model''s performance
    against the holdout dataset during the development process. It appears that this
    model is better in production than during the training. Through the customize
    tiles, other metrics and their order could be chosen. The **Accuracy over Time**
    graph shows how the accuracy of the model has changed over time. The leftmost
    green spot on the graph indicates the model accuracy against the holdout dataset
    during development:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择强制变量后，点击**保存**按钮。这将启动计算，随后打开**精度**窗口，显示模型的 生产精度。生产模型的性能以瓷砖和图形时间序列的形式呈现。*图
    13.11* 展示了**部署精度**窗口。选定了**LogLoss**、**AUC**、**精度**、**Kolmogorov-Smirmov**和**Gini
    Norm**指标瓷砖。**开始**显示了在开发过程中，模型对保留数据集的性能。看起来这个模型在生产中的表现比在训练中更好。通过自定义瓷砖，可以选择其他指标及其顺序。**随时间精度**图显示了模型精度随时间的变化。图上最左边的绿色点表示在开发过程中，模型对保留数据集的精度：
- en: '![Figure 13.11 – production model performance assessment over time'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 13.11 – 随时间评估的生产模型性能'
- en: '](img/B17159_13_11.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17159_13_11.jpg)'
- en: Figure 13.11 – production model performance assessment over time
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.11 – 随时间评估的生产模型性能
- en: The `Low`. There is an option to change the class being explored. It is important
    to note that with these, the accuracy of the model on the differing levels of
    the `AgeClass` protected variable could be monitored. This could be done by selecting
    `AgeClass` in the **Segment Attribute** option and then choosing either of the
    levels in the **Segment Value** field. While in the present scenario production
    accuracy mirrors those of data drift, it is possible to configure notifications
    so that stakeholders are notified when metrics depart in a manner that adversely
    affects the business. In the next section, we will cover these notifications,
    as well as how to change models in deployment.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '`低`。有一个选项可以更改正在探索的类别。重要的是要注意，使用这些选项，可以监控模型在`AgeClass`保护变量不同级别上的准确性。这可以通过在**段属性**选项中选择`AgeClass`，然后在**段值**字段中选择任一级别来实现。虽然在当前场景中，生产准确性反映了数据漂移，但可以配置通知，以便当指标以对业务产生不利影响的方式偏离时，利益相关者会收到通知。在下一节中，我们将介绍这些通知，以及如何在部署中更改模型。'
- en: Notifications and changing models in production
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生产中的通知和更改模型
- en: 'In this chapter, we have established why the commercial impact of models can
    decay and ways to track this impact in the DataRobot platform. In cases where
    the end-to-end prediction process is fully automated and human intervention is
    limited, it becomes crucial that systems that notify stakeholders of any significant
    changes in the performance of production models are available. DataRobot can send
    notifications for significant changes in service health, data drift, and accuracy.
    These notifications can be set up and configured within the **Deployment** window:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们确定了模型商业影响可能衰减的原因以及如何在DataRobot平台上跟踪这种影响。在端到端预测过程完全自动化且人类干预有限的情况下，确保有系统通知利益相关者生产模型性能的任何重大变化变得至关重要。DataRobot可以发送关于服务健康、数据漂移和准确性的重大变化的通知。这些通知可以在**部署**窗口中设置和配置：
- en: 'From the **Settings** tab, select **Notifications**. As shown in *Figure 13.12*,
    three options are presented: notifications being sent for all events, notifications
    for critical events, and no notifications being sent. Notifications for all events
    are sent by email; all changes to the deployments are emailed to the owner:![Figure
    13.12 – Deployment Notifications setup'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**设置**选项卡中选择**通知**。如图13.12所示，提供了三个选项：发送所有事件的通知、发送关键事件的通知和不发送任何通知。所有事件的通知通过电子邮件发送；所有部署更改都会发送给所有者：![图13.12
    – 部署通知设置
- en: '](img/B17159_13_12.jpg)'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B17159_13_12.jpg)'
- en: Figure 13.12 – Deployment Notifications setup
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图13.12 – 部署通知设置
- en: In *Figure 13.12*, notifications are set to notify me about only critical deployment
    activities. This setting implies that the stakeholders are notified when there
    are critical activities occurring on the deployment.
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在图13.12中，通知被设置为仅通知我关于关键部署活动。此设置意味着当部署上有关键活动发生时，利益相关者会收到通知。
- en: The `1:00`. There are options to set notifications to occur anywhere between
    an hourly and quarterly monitoring cadence. When the box is unchecked, the notification
    is disabled:![Figure 13.13 – Monitoring notification setup
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`1:00`。有选项可以设置在每小时到每季度监控周期之间的任何时间发送通知。当复选框未选中时，通知被禁用：![图13.13 – 监控通知设置'
- en: '](img/B17159_13_13.jpg)'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B17159_13_13.jpg)'
- en: Figure 13.13 – Monitoring notification setup
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图13.13 – 监控通知设置
- en: Notification for `Last 7 days`, meaning that the data distribution for the preceding
    seven days is compared with that of the training data.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`过去7天`的通知，意味着将前七天的数据分布与训练数据进行比较。'
- en: Being a feature drift metric, the `0.2`. Some features can be excluded from
    drift tracking using the `0.45` is entered as the `0.45` are deemed as `0.45`)
    drifts beyond a `0.2`
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为特征漂移指标，`0.2`。一些特征可以通过使用`0.45`作为`0.45`的阈值来排除在漂移跟踪之外，当`0.45`的漂移超过`0.2`
- en: b. Failing notifications to be sent when five or more low-importance features
    have significant drift
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b. 当五个或更多低重要性特征有显著漂移时，将发送失败通知。
- en: c. Failing notifications to be sent when one or more high-importance features
    have a drift whose `0.45`
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c. 当一个或多个高重要性特征有漂移，其`0.45`
- en: Notifications pertaining to the `AUC`, `Accuracy`, `Balance Accuracy`, `LogLoss`,
    and `FVE Binomial`, among others. In this case, `Logloss` is chosen.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与`AUC`、`Accuracy`、`Balance Accuracy`、`LogLoss`和`FVE Binomial`等其他指标相关的通知。在这种情况下，选择`Logloss`。
- en: b. The `percent` change is selected.
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b. 选择`百分比`变化。
- en: c. Rules are then set for `Every day` at `1:00`. These could be configured to
    any cadence between daily and quarterly.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c. 然后将规则设置为**每天**的**1:00**。这些可以配置为每天到每季度的任何频率。
- en: After this setup, clicking the **Save new setting** button activates the notification
    routine. However, it is noteworthy that any stakeholder who has access to the
    deployment can configure the notifications they want to receive. When models'
    changes become significant, it might become necessary to replace the model in
    the deployment.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此设置完成后，点击**保存新设置**按钮激活通知程序。然而，值得注意的是，任何有权访问部署的利益相关者都可以配置他们想要接收的通知。当模型的变更变得重要时，可能需要替换部署中的模型。
- en: 'The performance of production models tends to decay with time. This raises
    the need for models to replace those in a deployment. Within the MLOps offerings,
    DataRobot offers the model replacement functionality. To change the model in a
    deployment, you navigate to the **Deployment Overview** window. The **Replace
    model** option is selected from the **Action** button on the right-hand side of
    the **Deployment Overview** window (see *Figure 13.14*):'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 生产模型的性能往往会随着时间的推移而下降。这引发了替换部署中模型的必要性。在MLOps提供的产品中，DataRobot提供了模型替换功能。要更改部署中的模型，您需要导航到**部署概述**窗口。从**部署概述**窗口右侧的**操作**按钮中选择**替换模型**选项（见*图13.14*）：
- en: Clicking the **Replace model** option presents a **Paste DataRobot model URL**
    request. This URL is for the location at which the new model can be found when
    opened from the leaderboard:![Figure 13.14 – Production model replacement
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**替换模型**选项会显示一个**粘贴DataRobot模型URL**请求。此URL是新模型可以找到的位置，当从排行榜打开时：![Figure 13.14
    – 生产模型替换
- en: '](img/B17159_13_14.jpg)'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![img/B17159_13_14.jpg]'
- en: Figure 13.14 – Production model replacement
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Figure 13.14 – 生产模型替换
- en: When `Accuracy`, `Data Drift`, `Errors`, `Scheduled Refresh`, and `Scoring Speed`.
    As shown in *Figure 13.15*, `Data Drift` is selected in this case.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当选择`Accuracy`（准确度）、`Data Drift`（数据漂移）、`Errors`（错误）、`Scheduled Refresh`（计划刷新）和`Scoring
    Speed`（评分速度）时。如图*图13.15*所示，在此情况下选择了`Data Drift`。
- en: 'Finally, **Accept and replace** is clicked:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击**接受并替换**：
- en: '![Figure 13.15 – Selecting the rationale for model replacement'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 13.15 – 选择模型替换的理由'
- en: '](img/B17159_13_15.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B17159_13_15.jpg]'
- en: Figure 13.15 – Selecting the rationale for model replacement
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: Figure 13.15 – 选择模型替换的理由
- en: Having replaced the model in the deployment, future predictions from this deployment
    will use the updated model. It is important to highlight that model replacement
    can only be carried out by the deployment owner. There are situations when the
    commercial impact of models is significant. In such situations, it is advisable
    to test the new or challenger model in a synthetic or simulated environment before
    switching models. In the typical data science workflow, the champion/challenger
    model scenario is well established. Here, challenger models compute predictions
    and their performance is compared with the one in production, the champion. With
    the testing and impact analyses complete, we are now ready to deploy our model.
    DataRobot provides data scientists the ability to test multiple challenger models
    while the champion is in production. This simplifies the model selection process
    when a model is to be replaced.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在部署中替换了模型后，未来从这个部署中得出的预测将使用更新后的模型。重要的是要强调，模型替换只能由部署所有者执行。在某些情况下，模型的商业影响是显著的。在这种情况下，在切换模型之前，建议在合成或模拟环境中测试新模型或挑战者模型。在典型的数据科学工作流程中，冠军/挑战者模型场景已经建立。在这里，挑战者模型计算预测，并将它们的性能与生产中的冠军模型进行比较。在完成测试和影响分析后，我们现在可以部署我们的模型。DataRobot为数据科学家提供了在冠军模型仍在生产中时测试多个挑战者模型的能力。这简化了当需要替换模型时的模型选择过程。
- en: MLOps also offers the capability for changes in the model to be reviewed by
    different stakeholders. For this to happen, models are assigned importance levels
    as part of their deployments. These importance levels depend on the strategic
    commercial impact the model outcomes have on the business, the volume of predictions,
    and regulatory expectations. The importance levels thereafter drive who needs
    to review changes of the deployments before they are implemented.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: MLOps还提供了让不同利益相关者审查模型变更的能力。为了实现这一点，模型作为其部署的一部分被分配重要性级别。这些重要性级别取决于模型结果对业务战略商业影响的程度、预测量以及监管期望。这些重要性级别随后驱动谁需要在实施之前审查部署的变更。
- en: Summary
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we highlighted the value of establishing a framework guiding
    the use of ML models in businesses. ML governance capability supports users in
    ensuring that ML models continue to deliver commercial value while meeting regulatory
    expectations. Also, we set controls for what different levels of stakeholders
    can do with ML deployments. In some industries, there is a need to seriously consider
    the impact of bias in any decision process. Because ML models are based on data
    that might have been affected by human bias, it is possible that these models
    will compound such bias. As such, we explored ways to mitigate ML bias during
    and after model development.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们强调了建立指导企业中ML模型使用的框架的价值。ML治理能力支持用户确保ML模型在满足监管期望的同时继续创造商业价值。此外，我们还为不同级别的利益相关者设置了与ML部署相关的控制措施。在某些行业中，有必要认真考虑任何决策过程中偏差的影响。由于ML模型基于可能受到人类偏差影响的数据，这些模型可能会放大这种偏差。因此，我们探讨了在模型开发和之后如何减轻ML偏差的方法。
- en: We also examined the effects features have on the outcome variable. Such changes
    could have a critical bearing on business outcomes, hence the need to monitor
    the performance of model outcomes in production. During this chapter, we explored
    ways the performance of models could be assessed over time. Importantly, we learned
    how to configure notifications when there are significant changes in data drift
    or/and model accuracy. Additionally, we examined how a model in production could
    be switched to a challenger as needed.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还考察了特征对结果变量的影响。这些变化可能对商业结果产生关键影响，因此需要监控模型结果在生产中的性能。在本章中，我们探讨了如何评估模型性能随时间的变化。重要的是，我们学习了如何在数据漂移或/和模型准确性发生显著变化时配置通知。此外，我们还考察了在生产中如何根据需要将模型切换到挑战者模型。
- en: We also highlighted some other MLOps features that were not covered in depth
    as part of this chapter. In the next chapter, we are going to look at what we
    think the future holds for DataRobot and automated ML in general. Also, given
    that this book is not all-encompassing with regards to DataRobot and the platform
    keeps expanding its capabilities, in the next chapter, we will point out some
    places where additional information for further development could be accessed.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还强调了本章未深入探讨的一些其他MLOps功能。在下一章中，我们将探讨我们认为DataRobot和自动化机器学习未来的前景。鉴于这本书并非全面涵盖DataRobot，且该平台持续扩展其功能，在下一章中，我们将指出一些可以获取更多开发信息的地方。
