- en: '12'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '12'
- en: Time-Series Forecasting in Your Data Warehouse
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据仓库中的时序预测
- en: In previous chapters, we discussed how you can use Amazon Redshift **Machine
    Learning** (**ML**) to easily create, train, and apply ML models using familiar
    SQL commands. We talked about how we can use supervised learning algorithms for
    classification or regression problems to predict a certain outcome. In this chapter,
    we will talk about how you can use your data in Amazon Redshift to forecast a
    certain future event using Amazon Forecast.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们讨论了如何使用 Amazon Redshift **机器学习** (**ML**) 通过熟悉的 SQL 命令轻松创建、训练和应用 ML
    模型。我们讨论了如何使用监督学习算法来解决分类或回归问题，以预测某种结果。在本章中，我们将讨论如何使用 Amazon Redshift 中的数据，通过 Amazon
    Forecast 预测某种未来的事件。
- en: 'This chapter will introduce you to time-series forecasting on Amazon Redshift
    using Amazon Forecast ([https://aws.amazon.com/forecast/](https://aws.amazon.com/forecast/)),
    a fully managed time-series forecasting service, using SQL, and without moving
    your data or learning new skills. We will guide you through the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍如何使用 Amazon Forecast ([https://aws.amazon.com/forecast/](https://aws.amazon.com/forecast/))
    进行 Amazon Redshift 上的时序预测，这是一个完全托管的时间序列预测服务，使用 SQL，无需移动数据或学习新技能。我们将引导你了解以下主题：
- en: Forecasting and time-series data
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测和时序数据
- en: What is Amazon Forecast?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是 Amazon Forecast？
- en: Configuration and security
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置和安全
- en: Creating forecasting models using Redshift ML
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Redshift ML 创建预测模型
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'This chapter requires a web browser and access to the following:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章需要网络浏览器和以下访问权限：
- en: An AWS account
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AWS 账户
- en: Amazon Redshift
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Amazon Redshift
- en: Amazon Redshift query editor v2
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Amazon Redshift 查询编辑器 v2
- en: 'You can find the code used in this chapter here: [https://github.com/PacktPublishing/Serverless-Machine-Learning-with-Amazon-Redshift/blob/main/CodeFiles/chapter12/chapter-12.sql](https://github.com/PacktPublishing/Serverless-Machine-Learning-with-Amazon-Redshift/blob/main/CodeFiles/chapter12/chapter-12.sql).'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里找到本章使用的代码：[https://github.com/PacktPublishing/Serverless-Machine-Learning-with-Amazon-Redshift/blob/main/CodeFiles/chapter12/chapter-12.sql](https://github.com/PacktPublishing/Serverless-Machine-Learning-with-Amazon-Redshift/blob/main/CodeFiles/chapter12/chapter-12.sql).
- en: Forecasting and time-series data
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预测和时序数据
- en: Forecasting is a way of estimating future events, which involves analyzing historical
    data and past patterns to derive a possible outcome in the future. For example,
    based on historical data, a business can predict their sales revenue or identify
    what will happen in the next time period.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 预测是一种估计未来事件的方法，它涉及分析历史数据和过去模式，以推导出未来的可能结果。例如，基于历史数据，企业可以预测其销售收入或确定下一个时间段将发生什么。
- en: Forecasting plays a valuable role in guiding businesses to make informed decisions
    about their operations and priorities. Many organizations rely on data warehouses
    such as Amazon Redshift to perform deep analytics on vast amounts of historical
    and current data, enabling them to drive their business goals and gauge future
    success. Acting as a planning tool, forecasting helps enterprises prepare for
    future uncertainties by leveraging past patterns, with the underlying principle
    that what happened in the past will likely recur in the future. These predictions
    are based on analyzing observations over time within the given timeframe.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 预测在指导企业做出关于其运营和优先事项的明智决策中发挥着重要作用。许多组织依赖如 Amazon Redshift 这样的数据仓库，对大量历史和当前数据进行深度分析，从而推动他们的业务目标并衡量未来的成功。作为规划工具，预测通过利用过去的模式帮助企业为未来的不确定性做准备，其基本原理是过去发生的事情很可能会在未来再次发生。这些预测基于在给定时间段内对观察结果的分析。
- en: 'Here are some examples of how organizations use forecasting:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一些组织如何使用预测的例子：
- en: Financial planning
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 财务规划
- en: Supply and demand planning
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 供需计划
- en: Timing the launch of new products or services
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定时推出新产品或服务
- en: Resource planning
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资源规划
- en: Predicting future events, such as sales and revenue earnings
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测未来事件，如销售和收入收益
- en: Reviewing management decisions
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 审查管理决策
- en: Looking at a trend graph helps us predict the trend, but a time-series forecast
    gives us a better estimate of how it may continue. We can also model data that
    doesn’t show any clear pattern or trend over time. When there is a pattern, we
    can look at the entire history of the data to see how it happened before. If there
    is no pattern, we can rely more on recent data for forecasting.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 通过观察趋势图可以帮助我们预测趋势，但时间序列预测可以给我们一个更好的估计，了解它可能如何继续。我们还可以对那些在时间上没有明显模式或趋势的数据进行建模。当存在模式时，我们可以查看数据的整个历史来了解它之前是如何发生的。如果没有模式，我们可以更多地依赖最近的数据进行预测。
- en: Types of forecasting methods
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 预测方法的类型
- en: 'There are two types of forecasting methods: qualitative and quantitative.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 预测方法有两种：定性和定量。
- en: 'Let’s take a look at what qualitative and quantitative methods are, as defined
    at [https://aws.amazon.com/what-is/forecast/](https://aws.amazon.com/what-is/forecast/):'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看定性和定量方法是什么，如[https://aws.amazon.com/what-is/forecast/](https://aws.amazon.com/what-is/forecast/)中定义的：
- en: '**Qualitative forecasting** is subjective and relies on marketing experts’
    opinions to make predictions. You can use these methods when there is not enough
    historical data. Some examples of qualitative forecasting methods are market research
    such as polls and surveys, and the Delphi method to collect informed opinions
    and predict trends.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定性预测**是主观的，依赖于市场营销专家的意见来做出预测。当没有足够的历史数据时，可以使用这些方法。定性预测方法的例子包括市场研究，如民意调查和调查，以及德尔菲法来收集有见地的意见并预测趋势。'
- en: '**Quantitative forecasting** is objective in nature and is used to predict
    long-term future trends. It uses historical and current data to forecast future
    trends. Some examples of quantitative forecasting methods are *time-series forecasting*,
    *econometric modeling*, and the *indicator approach*.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定量预测**在本质上具有客观性，用于预测长期未来趋势。它使用历史和当前数据来预测未来趋势。定量预测方法的例子包括*时间序列预测*、*计量经济学建模*和*指标方法*。'
- en: In this chapter, we will focus on quantitative forecasting using time series
    for data, also known as time-series forecasting. Now, let’s look into what time-series
    forecasting is.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将专注于使用时间序列进行定量预测，也称为时间序列预测。现在，让我们来看看时间序列预测是什么。
- en: What is time-series forecasting?
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是时间序列预测？
- en: '**Time-series forecasting** is a data science technique that uses ML to study
    historical data and predict future trends or behavior in time-series data. Time-series
    data is used in many situations, such as weather forecasting, financial studies,
    statistics, resource planning, and econometrics. In the previous chapter, we looked
    into regression models to predict values using cross-sectional data, where your
    input variables are used to determine the relationship between the variables so
    that you can predict the unknown target on sets of data without the target variables.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**时间序列预测**是一种数据科学技术，它使用机器学习来研究历史数据并预测时间序列数据中的未来趋势或行为。时间序列数据在许多情况下都得到应用，如天气预报、金融研究、统计学、资源规划和计量经济学。在前一章中，我们探讨了回归模型，使用横截面数据来预测值，其中输入变量用于确定变量之间的关系，以便您可以在没有目标变量的数据集上预测未知的目标。'
- en: This data is unique because it arranges data points by time. Time-series data
    can be plotted on a graph and these graphs are valuable tools for visualizing
    and analyzing the data. In many organizations, data scientists or data analysts
    use these graphs to identify forecasting data features or attributes. Let us look
    into some examples of time-series data characteristics.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这种数据是独特的，因为它按时间顺序排列数据点。时间序列数据可以绘制在图上，这些图是可视化和分析数据的宝贵工具。在许多组织中，数据科学家或数据分析师使用这些图来识别预测数据特征或属性。让我们来看看时间序列数据特性的例子。
- en: Time trending data
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间趋势数据
- en: 'In trending data, the observations are captured at equal time intervals. In
    time-series graphs, the *y* axis is always a unit of time, such as quarter, year,
    month, day, hour, minute, or second. In *Figure 12**.1*, we have an example of
    the trend of total subscribers by year:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在趋势数据中，观测值是在相等的时间间隔内捕获的。在时间序列图中，*y*轴始终是时间单位，如季度、年、月、日、小时、分钟或秒。在*图12.1*中，我们有按年计算的总订户趋势的例子：
- en: '![Figure 12.1 – Trend of total subscribers per year](img/B19071_12_01.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图12.1 – 每年总订户的趋势](img/B19071_12_01.jpg)'
- en: Figure 12.1 – Trend of total subscribers per year
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1 – 每年总订户的趋势
- en: Seasonality
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 季节性
- en: 'In seasonality observations, we can see periodic fluctuations over time, and
    these fluctuations are predictable because we understand the behavior and the
    cause based on historical patterns. For example, retailers know that sales will
    increase during certain holiday periods. In *Figure 12**.2*, we see an upward
    spike in sales for November and December, which is expected because of the holiday
    season:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在季节性观察中，我们可以看到随时间变化的周期性波动，这些波动是可预测的，因为我们根据历史模式理解了行为和原因。例如，零售商知道在特定的假日期间销售额会增加。在**图12.2**中，我们看到11月和12月的销售额出现上升趋势，这是由于假日季节的预期：
- en: '![Figure 12.2 – Upward spike due to holiday season](img/B19071_12_02.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图12.2 – 由于假日季节导致的向上峰值](img/B19071_12_02.jpg)'
- en: Figure 12.2 – Upward spike due to holiday season
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2 – 由于假日季节导致的向上峰值
- en: Structural breaks
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结构中断
- en: In structural breaks, we have fluctuations that are less predictable and can
    occur at any point in time. For example, during a recession or geo-political disturbances,
    the economic situation of a country might show structural breaks. In *Figure 12**.3*,
    we can see a visualization of economic growth over time. The dips indicate an
    event that occurred at certain data points; for example, the one in 2009 correlates
    to the mortgage crisis in the US.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在结构中断中，我们有一些不太可预测的波动，这些波动可能在任何时间点发生。例如，在经济衰退或地缘政治动荡期间，一个国家的经济状况可能会出现结构中断。在**图12.3**中，我们可以看到随时间推移的经济增长可视化。下降表示在特定数据点发生的事件；例如，2009年的那个与美国的抵押贷款危机相关。
- en: '![Figure 12.3 – Economic growth over time](img/B19071_12_03.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图12.3 – 随时间推移的经济增长](img/B19071_12_03.jpg)'
- en: Figure 12.3 – Economic growth over time
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3 – 随时间推移的经济增长
- en: Let’s take a look into how Amazon Redshift ML uses Amazon Forecast to generate
    models using time-series datasets.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看Amazon Redshift ML是如何使用Amazon Forecast来生成时间序列数据集的模型的。
- en: What is Amazon Forecast?
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 亚马逊预测是什么？
- en: '**Amazon Forecast**, like Amazon Redshift ML, requires no ML experience to
    use. Time-series forecasts are generated using various ML and statistical algorithms
    based on historical data. As a user, you simply send data to Amazon Forecast and
    it will examine the data and automatically identify what is meaningful and produces
    a forecasting model.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**亚马逊预测**，就像Amazon Redshift ML一样，使用它不需要机器学习经验。时间序列预测是通过基于历史数据的各种机器学习和统计算法生成的。作为用户，你只需将数据发送到Amazon
    Forecast，它将检查数据并自动识别什么是有意义的，并生成预测模型。'
- en: With Amazon Redshift ML, you can leverage Amazon Forecast to create and train
    forecasting models from your time-series data and use these models to generate
    forecasts. For forecasting, we require a target time-series dataset. In target
    time-series forecasting, we predict the future value of a variable using the past
    data or previous values, which is often called univariate time series because
    the data is sequential over equal time increments. Currently, Redshift ML supports
    target time-series datasets with a custom domain. The dataset in your data warehouse
    must contain the frequency or interval at which you capture your data. For example,
    you might record and aggregate the average temperature every hour.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Amazon Redshift ML，你可以利用Amazon Forecast从你的时间序列数据创建和训练预测模型，并使用这些模型生成预测。对于预测，我们需要一个目标时间序列数据集。在目标时间序列预测中，我们使用过去的数据或先前值来预测变量的未来值，这通常被称为单变量时间序列，因为数据在相等的时间增量上是顺序的。目前，Redshift
    ML支持具有自定义域的目标时间序列数据集。你的数据仓库中的数据集必须包含你捕获数据的频率或间隔。例如，你可能每小时记录和汇总平均温度。
- en: 'Amazon Forecast automatically trains your model based on an algorithm using
    Auto ML and provides six built-in algorithms (to learn more about the built-in
    algorithms, please check out this resource: [https://docs.aws.amazon.com/forecast/latest/dg/aws-forecast-choosing-recipes.html#forecast-algos](https://docs.aws.amazon.com/forecast/latest/dg/aws-forecast-choosing-recipes.html#forecast-algos)).
    These forecasting models, known as predictors, are created using an optimal combination
    of these algorithms from your time-series data in Amazon Redshift.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 亚马逊预测会根据算法自动训练你的模型，该算法使用Auto ML，并提供六个内置算法（要了解更多关于内置算法的信息，请参阅此资源：[https://docs.aws.amazon.com/forecast/latest/dg/aws-forecast-choosing-recipes.html#forecast-algos](https://docs.aws.amazon.com/forecast/latest/dg/aws-forecast-choosing-recipes.html#forecast-algos))。这些预测模型，称为预测器，是通过从Amazon
    Redshift中的时间序列数据中最佳组合这些算法创建的。
- en: Configuration and security
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置和安全
- en: As Amazon Forecast is a separate fully managed service, you will need to create
    or modify your IAM role to include access permissions for your serverless endpoint
    or Redshift cluster. Additionally, you should configure a trust relationship for
    Amazon Forecast ([forecast.amazonaws.com](http://forecast.amazonaws.com)) in the
    IAM role to enable the necessary permissions.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Amazon Forecast是一个独立的完全托管服务，您需要创建或修改您的IAM角色，以包括对您的无服务器端点或Redshift集群的访问权限。此外，您应该在IAM角色中配置Amazon
    Forecast（[forecast.amazonaws.com](http://forecast.amazonaws.com)）的信任关系，以启用必要的权限。
- en: 'You can use the **AmazonForecastFullAccess** managed policy, which grants full
    access to Amazon Forecast and all of the supported operations. You can attach
    this policy to your default role but, in your production environments, you must
    follow the principle of least-privilege permissions. You may use more restrictive
    permissions, such as the following:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用**AmazonForecastFullAccess**托管策略，该策略授予对Amazon Forecast及其所有支持的操作的完全访问权限。您可以将此策略附加到默认角色，但在您的生产环境中，您必须遵循最小权限原则。您可以使用更严格的权限，例如以下内容：
- en: '[PRE0]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Creating forecasting models using Redshift ML
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Redshift ML创建预测模型
- en: Currently, if you have to perform forecasting in your data warehouse, you need
    to export the dataset into external systems and then apply forecasting algorithms
    to create output datasets and then import them back into the data warehouse for
    your presentation layer or further analysis. With Redshift ML’s integration with
    Amazon Forecast, you don’t have to perform all these steps. You can now create
    the forecasting models right on your dataset within your data warehouse.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，如果您需要在您的数据仓库中执行预测，您需要将数据集导出到外部系统，然后应用预测算法来创建输出数据集，然后再将它们导入数据仓库以供您的表示层或进一步分析。通过Redshift
    ML与Amazon Forecast的集成，您无需执行所有这些步骤。现在，您可以直接在数据仓库中的数据集上创建预测模型。
- en: 'In [*Chapter 5*](B19071_05.xhtml#_idTextAnchor068), we talked about the basic
    `CREATE MODEL` syntax and its constructs. Let’s take a look at the `CREATE MODEL`
    syntax for forecasting:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第五章*](B19071_05.xhtml#_idTextAnchor068)中，我们讨论了基本的`CREATE MODEL`语法及其结构。让我们看看预测的`CREATE
    MODEL`语法：
- en: '[PRE1]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: There are a few things to notice with the `CREATE MODEL` statement for forecasting.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建预测模型的`CREATE MODEL`语句中，有几个需要注意的事项。
- en: First, forecast models do not create inference functions. The reason for this
    is that when we train a predictor on Amazon Forecast, we specify in the training
    request the number (`HORIZON`) and frequency of predictions (`FREQUENCY`) we want
    to make in the future. Because of this, a trained model has a fixed forecast,
    so there isn’t a physical model to compile and execute. A custom CTAS command
    (which will be discussed later) is used to extract a forecast from the training
    output location in S3 into a table locally in Redshift.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，预测模型不会创建推理函数。这样做的原因是，当我们使用Amazon Forecast训练预测器时，我们在训练请求中指定了未来想要进行的预测的数量（`HORIZON`）和频率（`FREQUENCY`）。正因为如此，一个训练好的模型有一个固定的预测，所以没有物理模型可以编译和执行。一个自定义的CTAS命令（稍后将讨论）用于从S3中的训练输出位置提取预测，并将其导入到Redshift中的本地表中。
- en: 'Next, we can specify the *optional* objective or optimization metric, which
    is used to optimize the predictor for under-forecasting and over-forecasting.
    Amazon Forecast provides different model accuracy metrics for you to assess the
    strength of your forecasting models, which are listed here:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们可以指定*可选*的目标或优化指标，该指标用于优化预测模型的欠预测和过预测。Amazon Forecast提供了不同的模型准确度指标，供您评估您的预测模型强度，这些指标在此列出：
- en: '`AverageWeightedQuantileLoss` – measures the accuracy of a model at a specified
    quantile'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AverageWeightedQuantileLoss` – 在指定的分位数上衡量模型的准确性'
- en: '`WAPE` (weighted absolute percentage error) – measures the overall deviation
    of forecasted values from the observed value'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`WAPE`（加权绝对百分比误差）- 衡量预测值与观测值之间的总体偏差'
- en: '`RMSE` (root mean square error) – the square root of the average of squared
    errors'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RMSE`（均方根误差）- 平方误差平均值的平方根'
- en: '`MASE` (mean absolute scaled error) – calculated by dividing the average error
    by a scaling factor'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MASE`（平均绝对缩放误差）- 通过将平均误差除以缩放因子来计算'
- en: '`MAPE` (mean absolute percentage error) – takes the absolute value of the percentage
    error between observed and predicted values for each unit of time, then averages
    those values'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MAPE`（平均绝对百分比误差）- 对每个时间单位观测值与预测值之间的百分比误差取绝对值，然后平均这些值'
- en: 'Lastly, it is important to note that `FORECAST` does not support any hyperparameters.
    Instead, any `FORECAST`-specific settings for training will be specified using
    the `SETTINGS` clause. Currently, the supported settings are as follows:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，重要的是要注意，`FORECAST`不支持任何超参数。相反，任何`FORECAST`特定的训练设置将使用`SETTINGS`子句指定。目前支持的设置如下：
- en: '`FREQUENCY`: Granularity of predictions in a forecast. Valid values are `Y`
    (year), `M` (month), `W` (week), `D` (day), `H` (hour), and `min` (minute), for
    example, `H` for hourly forecasts or `1min` for forecasts every minute).'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FREQUENCY`：预测中的预测粒度。有效值是`Y`（年）、`M`（月）、`W`（周）、`D`（日）、`H`（小时）和`min`（分钟），例如，`H`表示每小时预测或`1min`表示每分钟预测）。'
- en: '`HORIZON`: The number of time steps in the future to forecast (e.g., `24`).'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HORIZON`：预测未来时间步数的数量（例如，`24`）。'
- en: Note
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: '`FREQUENCY` `H` and `HORIZON` `24` mean you want hourly forecasts for the next
    day.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '`FREQUENCY` `H`和`HORIZON` `24`表示您希望对下一天进行每小时预测。'
- en: '`PERCENTILES` (optional): The forecast types are used to train a predictor.
    Up to five forecast types or percentiles can be specified. These types can be
    quantiles `[0.01 to 0.99]` or `mean`. A forecast at the `0.50` quantile will estimate
    a lower value 50% of the time.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PERCENTILES`（可选）：预测类型用于训练预测器。最多可以指定五种预测类型或百分位数。这些类型可以是分位数 `[0.01 to 0.99]`
    或 `mean`。在`0.50`分位数处的预测将估计50%的时间值较低。'
- en: Now, let’s take a look at one use case where we can use the target time-series
    dataset for predicting the target forecast value.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看一个用例，我们可以使用目标时间序列数据集来预测目标预测值。
- en: Business problem
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 业务问题
- en: 'For this use case, let’s take the example of an online retail store to forecast
    the future demand for certain products in the store. This dataset is taken from
    the UCI ML repository and is available here: [https://archive.ics.uci.edu/dataset/352/online+retail](https://archive.ics.uci.edu/dataset/352/online+retail).
    For this exercise, we have modified the data to resemble more of a target time-series
    dataset, containing `item_id`, `date`, and `target_value` fields. The data spans
    a two-year time period starting from December 2018 to November 2020\. The modified
    data contains the item name, date products were sold, and total number of products
    sold.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个用例，让我们以一个在线零售商店为例，预测商店中某些产品的未来需求。这个数据集来自UCI ML存储库，可在以下链接找到：[https://archive.ics.uci.edu/dataset/352/online+retail](https://archive.ics.uci.edu/dataset/352/online+retail)。为了这个练习，我们对数据进行修改，使其更接近目标时间序列数据集，包含`item_id`、`date`和`target_value`字段。数据跨度为两年，从2018年12月到2020年11月。修改后的数据包含商品名称、销售日期和销售产品总数。
- en: Dataset citation
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集引用
- en: Online Retail. (2015). UCI Machine Learning Repository. [https://doi.org/10.24432/C5BW33](https://doi.org/10.24432/C5BW33).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Online Retail. (2015). UCI Machine Learning Repository. [https://doi.org/10.24432/C5BW33](https://doi.org/10.24432/C5BW33)。
- en: Uploading and analyzing the data
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传和分析数据
- en: 'After successfully connecting to Redshift as an admin or database developer,
    load data into Amazon Redshift and follow the steps outlined here:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 成功连接到Redshift作为管理员或数据库开发者后，将数据加载到Amazon Redshift，并遵循此处概述的步骤：
- en: 'Navigate to query editor v2, connect to **Serverless** endpoint, and connect
    to the **dev** database:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到查询编辑器v2，连接到**无服务器**端点，并连接到**开发**数据库：
- en: '![Figure 12.4 – Connecting to the dev database](img/B19071_12_04.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图12.4 – 连接到开发数据库](img/B19071_12_04.jpg)'
- en: Figure 12.4 – Connecting to the dev database
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4 – 连接到开发数据库
- en: 'Execute the following steps to create the schema and the trade details table
    and load the data:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下步骤以创建模式和贸易详情表并加载数据：
- en: '[PRE2]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Run the following query to examine some sample data:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下查询以检查一些样本数据：
- en: '[PRE13]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The result will be similar to this:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 结果将类似于以下内容：
- en: '![Figure 12.5 – Query results](img/B19071_12_05.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图12.5 – 查询结果](img/B19071_12_05.jpg)'
- en: Figure 12.5 – Query results
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5 – 查询结果
- en: 'As you can see in the preceding figure, we have the following:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在前面的图中所见，我们有以下内容：
- en: '`invoice_date` (date when the item was sold)'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`invoice_date`（销售商品时的日期）'
- en: '`item_id` (name of the product sold)'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`item_id`（销售产品的名称）'
- en: '`quantity` (number of items sold for that product for each day)'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`quantity`（每天该产品销售的数量）'
- en: Using this dataset, we will create a model in Amazon Forecast and predict the
    demand for the future for the given products. The goal is to analyze what a particular
    product’s demand is going to look like in the coming five days. For accuracy and
    validation, we will create the model using the data until October 2020\. Once
    we have the predictor ready, we will then compare the output values with the actual
    values in November 2020 to determine the accuracy of our model. We will also take
    a look at different accuracy metrics, such as the average **weighted quantile
    loss** (**wQL**), WAPE, MAPE, MASE, and RMSE.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此数据集，我们将在Amazon Forecast中创建一个模型，并预测给定产品的未来需求。目标是分析特定产品在接下来五天的需求将如何。为了准确性和验证，我们将使用截至2020年10月的数据创建模型。一旦我们有预测器准备就绪，我们将将其输出值与2020年11月实际值进行比较，以确定我们模型的准确性。我们还将查看不同的准确度指标，如平均**加权分位数损失**（**wQL**）、WAPE、MAPE、MASE和RMSE。
- en: Let’s create the model using the `CREATE MODEL` statement we discussed at the
    beginning of the *Creating forecasting models using Redshift* *ML* section.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用我们在“使用Redshift *ML* 创建预测模型”部分开头讨论的`CREATE MODEL`语句来创建模型。
- en: '`Objective` is set to `AverageWeightedQuantileLoss` (mean of wQL), which is
    the accuracy metric for `optimization_metric`. `Frequency` is set to `D` (Days),
    `Horizon` is set to `5`, and `Percentiles` is set to `0.25`, `0.50`, `0.75`, `0.90`,
    and `mean`.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '`Objective`设置为`AverageWeightedQuantileLoss`（wQL的平均值），这是`optimization_metric`的准确度指标。`Frequency`设置为`D`（天数），`Horizon`设置为`5`，`Percentiles`设置为`0.25`、`0.50`、`0.75`、`0.90`和`mean`。'
- en: If you do not specify the percentiles settings, then Forecast generates the
    predictions on `p10`, `p50`, and `p90` (0.10, 0.50, and 0.90).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有指定百分位数设置，那么Forecast将在`p10`、`p50`和`p90`（0.10、0.50和0.90）上生成预测。
- en: Run the following command in query editor v2 to create the model. Note this
    will take approximately 90 minutes.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在查询编辑器v2中运行以下命令以创建模型。请注意，这大约需要90分钟。
- en: '[PRE14]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Run the `SHOW MODEL` command to see whether model training is complete:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 运行`SHOW MODEL`命令以查看模型训练是否完成：
- en: '[PRE15]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The result is as follows:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 12.6 – Result of model training](img/B19071_12_06.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图12.6 – 模型训练结果](img/B19071_12_06.jpg)'
- en: Figure 12.6 – Result of model training
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.6 – 模型训练结果
- en: You can also view the status of the predictor using the value of `Amazon Forecast`.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用`Amazon Forecast`的值查看预测器的状态。
- en: Click on **View dataset groups** and find the dataset group name by pasting
    **redshiftml_****20221224001451333090**.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**查看数据集组**，并通过粘贴**redshiftml_20221224001451333090**来查找数据集组名称。
- en: Click on this dataset group name and verify whether **Target time series data**
    is **Active**, as shown in *Figure 12**.7*.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 点击此数据集组名称，验证**目标时间序列数据**是否为**激活**状态，如图*12.7*所示。
- en: You can also view the details about your time-series data by clicking **View**
    and seeing the schema, frequency of data registered in your data file, dataset
    import details, and so on.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过点击**查看**来查看有关您的时间序列数据的详细信息，包括数据文件中注册的数据频率、数据集导入详情等。
- en: '![Figure 12.7 – Verify the status of target time-series data](img/B19071_12_07.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图12.7 – 验证目标时间序列数据的状态](img/B19071_12_07.jpg)'
- en: Figure 12.7 – Verify the status of target time-series data
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.7 – 验证目标时间序列数据的状态
- en: 'Once active, you can view the predictor by clicking **View predictors**. The
    **Predictors** dialog box will show the training status, as follows:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦激活，您可以通过点击**查看预测器**来查看预测器。**预测器**对话框将显示训练状态，如下所示：
- en: '![Figure 12.8 – Training status in View predictors](img/B19071_12_08.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图12.8 – 视觉预测器的训练状态](img/B19071_12_08.jpg)'
- en: Figure 12.8 – Training status in View predictors
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.8 – 视觉预测器的训练状态
- en: 'Run the `SHOW MODEL` command again to see if model training is complete:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 再次运行`SHOW MODEL`命令以查看模型训练是否完成：
- en: '[PRE16]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The result is as follows:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 12.9 – Status of model training completion](img/B19071_12_09.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图12.9 – 模型训练完成状态](img/B19071_12_09.jpg)'
- en: Figure 12.9 – Status of model training completion
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.9 – 模型训练完成状态
- en: 'Once the model training is finished and ready, you can then view the outputs
    by creating a table on your forecast:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦模型训练完成并准备就绪，您可以通过在您的预测上创建一个表来查看输出：
- en: For a retail store, the company needs to ensure that they do not over-forecast
    or under-forecast the predicted quantity required in order to effectively manage
    inventory and enhance profits. As mentioned earlier, Redshift ML with Amazon Forecast
    provides different optimization metrics that can be used in order to measure the
    accuracy of a model specified at different quantiles. For this use case, we have
    created the model for `0.25`, `0.50`, `0.75`, `0.90`, and `mean`. If the emphasis
    is on over-forecasting, then for a retailer, choosing a higher quantile (`0.90`)
    captures the spike in demand in a much better way for a high-demand item or product.
    This suggests that there is a 90% probability of success for the product to meet
    the forecasted demand. Now, let’s see how to get our forecasted results.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一家零售店，公司需要确保他们不会过度预测或低估预测所需数量，以便有效地管理库存并提高利润。如前所述，Amazon Forecast与Redshift
    ML提供不同的优化指标，可以用来衡量在不同分位数上指定的模型的准确性。对于此用例，我们为`0.25`、`0.50`、`0.75`、`0.90`和`mean`创建了模型。如果重点是过度预测，那么对于零售商来说，选择更高的分位数（`0.90`）可以更好地捕捉高需求商品或产品的需求高峰。这表明产品满足预测需求有90%的成功概率。现在，让我们看看如何获取我们的预测结果。
- en: Creating a table with output results
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建包含输出结果的表格
- en: 'After the model has finished training and is ready, we now create a table in
    our schema to hold all the forecast results using a simple CTAS command, as shown:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在模型完成训练并准备就绪后，我们现在使用简单的CTAS命令在我们的模式中创建一个表格来存储所有预测结果，如下所示：
- en: '[PRE17]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: In this command, `forecast()` is a pseudo table function that takes the name
    of your model as an input parameter. The data is then pulled from the S3 bucket
    location where your model results are stored.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在此命令中，`forecast()`是一个伪表函数，它接受你的模型名称作为输入参数。然后，数据从你的模型结果存储在S3存储桶位置中提取。
- en: 'Let’s take a look at the output from the preceding table by running the following
    SQL command:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 通过运行以下SQL命令查看前一个表格的输出：
- en: '[PRE18]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Looking at *Figure 12**.10*, you can see that for each day, Forecast has generated
    the output predictions for each distribution point or quantile that we provided
    and the mean:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 查看图12.10。你可以看到，对于每一天，预测为每个我们提供的分布点或分位数以及平均值生成了输出预测：
- en: '![Figure 12.10 – Output of the table](img/B19071_12_10.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![图12.10 – 表格输出](img/B19071_12_10.jpg)'
- en: Figure 12.10 – Output of the table
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.10 – 表格输出
- en: For products in high demand, the retailer can choose a higher quantile, such
    as `0.90` (`p90`), which better captures spikes in demand, rather than forecasting
    at the mean or `0.50` quantile.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 对于需求量高的产品，零售商可以选择更高的分位数，例如`0.90`（`p90`），这能更好地捕捉需求高峰，而不是在平均值或`0.50`分位数进行预测。
- en: 'Now, let’s take a look at the data of a popular product: **JUMBO BAG** **RED
    RETROSPOT**.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看一款热门产品的数据：**JUMBO BAG** **RED RETROSPOT**。
- en: 'Run the following SQL query:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下SQL查询：
- en: '[PRE19]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Here’s the result:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果：
- en: '![Figure 12.11 – Forecast data](img/B19071_12_11.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图12.11 – 预测数据](img/B19071_12_11.jpg)'
- en: Figure 12.11 – Forecast data
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.11 – 预测数据
- en: 'To visualize the data, select `invoice_date` attribute, and for the *y* axis,
    choose `p90_forecast`:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 为了可视化数据，选择`invoice_date`属性，并在*Y*轴上选择`p90_forecast`：
- en: '![Figure 12.12 – Forecast chart](img/B19071_12_12.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图12.12 – 预测图表](img/B19071_12_12.jpg)'
- en: Figure 12.12 – Forecast chart
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.12 – 预测图表
- en: If we closely examine the preceding data in *Figure 12**.11*, we can observe
    that Line 1 was under-forecasted, while Lines 2 and 3 were very close to the actual
    values, and Line 4 was just slightly over-forecasted. In order to test the forecasting,
    you can further perform tests with different sets of data or even on different
    quantiles. Additionally, a retailer can use this data for different products,
    such as products with low demand, and make use of other quantiles, such as `p50`
    or `mean`.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们仔细查看图12.11中的前述数据，我们可以观察到第1行被低估了，而第2行和第3行非常接近实际值，第4行只是略微高估了。为了测试预测，你可以进一步使用不同的数据集或甚至在不同分位数上进行测试。此外，零售商可以使用这些数据为不同产品，如低需求产品，并使用其他分位数，如`p50`或`mean`。
- en: The wQL is used to calculate the `AverageWeightedQuantileLoss` metric. The wQL
    can be used to manage the costs of over- and under-forecasting. These metrics
    will be available to you in the Amazon Forecast console for your predictor. Generally,
    to calculate the wQL at `0.90`, sum the values of the positive values in above
    `p90` error field and multiply them by a smaller weight of `0.10`, and sum the
    absolute values of the negative values in `p90` error and multiply them by `0.90`.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: wQL用于计算`AverageWeightedQuantileLoss`指标。wQL可用于管理过度预测和不足预测的成本。这些指标将在Amazon Forecast控制台中对您的预测器可用。通常，要计算`0.90`的wQL，将`p90`误差字段中正值的总和乘以较小的权重`0.10`，并将`p90`误差中负值的绝对值相加，乘以`0.90`。
- en: To align with your business outcomes, you can create the forecasting models
    at different quantiles (**Percentiles**) in your Amazon Redshift data warehouse.
    This gives you the flexibility to measure your business goals and keep the impacts
    on cost on the lower side.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 为了与您的业务成果保持一致，您可以在Amazon Redshift数据仓库中创建不同分位数（**百分位数**）的预测模型。这为您提供了灵活性，以衡量您的业务目标，并保持成本影响在较低水平。
- en: Summary
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we discussed how you can use Redshift ML to generate forecasting
    models using Amazon Forecast by creating the model for Forecast `Model_Type`.
    You learned about what forecasting is and how time-series data is used to generate
    different models for different quantiles. We also looked at different quantiles
    and talked briefly about different optimization metrics.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了如何使用Redshift ML通过创建用于预测的`Model_Type`模型来生成Amazon Forecast的预测模型。您了解了预测是什么以及如何使用时间序列数据生成不同分位数的不同模型。我们还探讨了不同的分位数，并简要介绍了不同的优化指标。
- en: We showed how forecast models can be used to predict the future quantity sale
    for a retailer use case and how they can be used to balance the effect of over-forecasting
    and under-forecasting.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们展示了如何使用预测模型来预测零售用例的未来销售数量，以及如何使用它们来平衡过度预测和不足预测的影响。
- en: In the next chapter, we will look at operational and optimization considerations.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨操作和优化方面的考虑。
