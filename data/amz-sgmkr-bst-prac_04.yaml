- en: 'Chapter 3: Data Labeling with Amazon SageMaker Ground Truth'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章：使用Amazon SageMaker Ground Truth进行数据标注
- en: One of the biggest barriers to ML projects in most companies is access to labeled
    training data. At one company we worked with, we were trying to identify consumer-impacting
    outages. The customer had a lot of data from each layer of their application stack,
    but they couldn't agree on how to define an outage. Is an outage when a load balancer
    is down? Probably not – we have redundancy in the infrastructure layer. Is an
    outage when a customer can't access the service for over 10 minutes? That's probably
    too granular; a single customer might have problems due to local network connectivity
    issues. So, what exactly do we mean by an outage? How can we automatically label
    our training data as *outage* or *not an outage*?
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数公司中，最大的机器学习项目障碍之一是获取标注的训练数据。在我们合作的一家公司中，我们试图确定对消费者有影响的故障。客户从其应用程序堆栈的每一层都有大量数据，但他们无法就如何定义故障达成一致。故障是不是当负载均衡器宕机时？可能不是——我们在基础设施层有冗余。故障是不是当客户无法访问服务超过10分钟时？这可能太细粒度了；单个客户可能由于本地网络连接问题而出现问题。那么，我们究竟指的是什么故障？我们如何自动将我们的训练数据标注为*故障*或*非故障*？
- en: In this chapter, we'll review labeling data using SageMaker Ground Truth. We'll
    cover common challenges associated with large datasets and potentially biased
    data.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将回顾使用SageMaker Ground Truth进行数据标注。我们将涵盖与大数据集和潜在有偏见数据相关的一些常见挑战。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Challenges with labeling data at scale
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在大规模数据标注中遇到的挑战
- en: Addressing unique labeling requirements with custom labeling workflows
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用自定义标注工作流程解决独特的标注需求
- en: Using active learning to reduce labeling time
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用主动学习来减少标注时间
- en: Security and permissions
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全性和权限
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: You will need an AWS account to run the examples included in this chapter. If
    you have not set up the data science environment yet, please refer to [*Chapter
    2*](B17249_02_Final_JM_ePub.xhtml#_idTextAnchor039)*, Data Science Environments*,
    which provides a walk-through of the setup process.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要AWS账户来运行本章包含的示例。如果您尚未设置数据科学环境，请参阅[*第2章*](B17249_02_Final_JM_ePub.xhtml#_idTextAnchor039)*，数据科学环境*，其中提供了设置过程的概述。
- en: Code examples included in the book are available on GitHub at [https://github.com/PacktPublishing/Amazon-SageMaker-Best-Practices/tree/main/Chapter03](https://github.com/PacktPublishing/Amazon-SageMaker-Best-Practices/tree/main/Chapter03).
    You will need to install a Git client to access them ([https://git-scm.com/](https://git-scm.com/)).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 书中包含的代码示例可在GitHub上找到，网址为[https://github.com/PacktPublishing/Amazon-SageMaker-Best-Practices/tree/main/Chapter03](https://github.com/PacktPublishing/Amazon-SageMaker-Best-Practices/tree/main/Chapter03)。您需要安装Git客户端才能访问它们（[https://git-scm.com/](https://git-scm.com/))。
- en: The code for this chapter is in the `CH03` folder of the GitHub repository.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码位于GitHub仓库的`CH03`文件夹中。
- en: Challenges with labeling data at scale
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在大规模数据标注中遇到的挑战
- en: 'Besides the conceptual challenges with agreeing on how to label data, we need
    to consider the logistics. **SageMaker Ground Truth** lets you assign data labeling
    jobs to a human workforce. But you may face additional challenges such as the
    following:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 除了在如何标注数据上达成共识的概念性挑战外，我们还需要考虑物流。**SageMaker Ground Truth**允许您将数据标注工作分配给人工劳动力。但您可能会面临以下额外挑战：
- en: '**Unique labeling logic**: If our labeling case requires a custom workflow,
    we need to model that in Ground Truth.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**独特的标注逻辑**：如果我们的标注案例需要自定义工作流程，我们需要在地面真实情况中对其进行建模。'
- en: '**Annotation quality**: The labels applied by workers may be subject to implicit
    bias that affects the results.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标注质量**：工人应用标签可能存在隐含偏见，这会影响结果。'
- en: '**Cost and time**: Labeling data requires people for a period of time. If you
    have a very large dataset, you''ll consume a lot of person-hours.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**成本和时间**：标注数据需要一段时间的人力。如果您有一个非常大的数据集，您将消耗大量的人时。'
- en: '**Security**: Given that your data may be sensitive, you need to make sure
    that access to the data is restricted to an authorized workforce.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性**：鉴于您的数据可能敏感，您需要确保数据访问仅限于授权的工作人员。'
- en: Additional information
  id: totrans-18
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 其他信息
- en: If you need an introduction to Ground Truth, please review [*Chapter 2*](B17249_02_Final_JM_ePub.xhtml#_idTextAnchor039)
    of *Learn Amazon SageMaker,* written by Julien Simon.
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您需要了解地面真实情况的介绍，请参阅由Julien Simon撰写的《Learn Amazon SageMaker》的[*第2章*](B17249_02_Final_JM_ePub.xhtml#_idTextAnchor039)。
- en: To put these concerns into focus, let's consider our weather data introduced
    in the previous chapter. Ground Truth doesn't have a built-in workflow that lets
    us prompt workers to label weather data according to our logic for describing
    air as *good* or *bad*. The dataset for the entire time span is approximately
    499 GB; labeling each entry by hand as *good* or *bad* weather quality will take
    some time. Finally, our workers may have their own implicit or unconscious bias.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将这些关注点聚焦起来，让我们考虑一下我们在上一章中介绍的天气数据。Ground Truth 没有内置的工作流程允许我们提示工作人员根据我们描述空气为
    *好* 或 *坏* 的逻辑来标注天气数据。整个时间段的整个数据集大约为 499 GB；手动将每条记录标注为 *好* 或 *坏* 天气质量将花费一些时间。最后，我们的工作人员可能会有他们自己的隐含或无意识的偏见。
- en: A worker who grew up in a city with severe smog may have a much different perception
    of air quality than someone who grew up in a rural area with very clean air. In
    the following sections, we'll discuss how to address these challenges.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个严重雾霾的城市长大的工作人员可能对空气质量的感知与在一个非常干净的乡村地区长大的工作人员大不相同。在接下来的章节中，我们将讨论如何解决这些挑战。
- en: Addressing unique labeling requirements with custom labeling workflows
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用自定义标注工作流程解决独特的标注需求
- en: Let's get started with a labeling job for our weather data. We want to label
    each weather report as *good* or *bad*. In order to help our workers do that,
    we'll make a nice frontend that shows the location of the weather station on a
    map and displays the reading from the weather station. We need a custom workflow
    because this scenario doesn't fall neatly into any of the existing Ground Truth
    templates.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从为我们的天气数据创建一个标注任务开始。我们希望将每个天气报告标注为 *好* 或 *坏*。为了帮助我们的工作人员完成这项工作，我们将制作一个精美的前端，在地图上显示气象站的位置并显示气象站的读数。我们需要一个自定义的工作流程，因为这种场景并没有完美地符合现有的
    Ground Truth 模板。
- en: 'We will have to set up the following:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要设置以下内容：
- en: A private workforce backed by a Cognito user pool
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由 Cognito 用户池支持的私有工作团队
- en: A manifest file that lists the items we want to label
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个列出我们想要标注的项目清单的清单文件
- en: A custom Ground Truth labeling workflow, consisting of two Lambda functions
    and a UI template
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个自定义的 Ground Truth 标注工作流程，由两个 Lambda 函数和一个 UI 模板组成
- en: The notebook `LabelData.ipynb` in the `CH02` folder of our repository walks
    through these steps.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们存储库 `CH02` 文件夹中的笔记本 `LabelData.ipynb` 演示了这些步骤。
- en: A private labeling workforce
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 一个私有的标注工作团队
- en: Although you can use a public workforce, most companies will want to use a private
    workforce to label their own data. Setting up a private workforce starts by defining
    a Cognito user pool, which, for real use cases, could link to another identity
    provider such as Active Directory.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以使用公共工作团队，但大多数公司都会希望使用私有工作团队来标注自己的数据。设置私有工作团队的第一步是定义一个 Cognito 用户池，在实际用例中，它可能链接到另一个身份提供者，如
    Active Directory。
- en: We'll create a user group in Cognito; you could use groups to create teams for
    different types of labeling jobs. Finally, we'll define a SageMaker work team
    linked to the Cognito user group. Note that SageMaker creates a labeling domain
    that we have to set as the callback URL in the Cognito user pool client.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在 Cognito 中创建一个用户组；你可以使用组来创建不同类型标注工作的团队。最后，我们将定义一个与 Cognito 用户组链接的 SageMaker
    工作团队。请注意，SageMaker 创建了一个标注域，我们必须将其设置为 Cognito 用户池客户端的回调 URL。
- en: Once the work team is set up, the notebook will add an example worker.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦工作团队设置完成，笔记本将添加一个示例工作人员。
- en: 'The **Create a private workforce** part of the notebook executes all of these
    steps for you:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 笔记本中的 **创建一个私有工作团队** 部分为您执行了所有这些步骤：
- en: Creating a Cognito user pool
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个 Cognito 用户池
- en: Creating a Cognito client for the user pool
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户池创建一个 Cognito 客户端
- en: Creating an identity pool for the client
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为客户端创建一个身份池
- en: Creating a user group
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个用户组
- en: Assigning a domain to the user pool
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将一个域分配给用户池
- en: Creating a SageMaker work team that uses the Cognito user pool and group
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个使用 Cognito 用户池和组的 SageMaker 工作团队
- en: Adding a sample user
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个示例用户
- en: 'Once you execute the **Create a private workforce** part of the notebook, you
    should see a private workforce defined, along with the login URL that the workers
    would use. If you scroll further down this part of the console, you''ll also see
    information about the work team and any workers assigned to the team, as shown
    in *Figure 3.1*:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你执行了笔记本中的 **创建一个私有工作团队** 部分，你应该会看到一个定义好的私有工作团队，以及工作人员将使用的登录 URL。如果你继续向下滚动控制台的这一部分，你还会看到关于工作团队和分配给该团队的工作人员的信息，如图
    *图 3.1* 所示：
- en: '![Figure 3.1 – Labeling workforce shown in the SageMaker console'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.1 – 在 SageMaker 控制台中显示的标注工作团队'
- en: '](img/B17249_03_01.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17249_03_01.jpg)'
- en: Figure 3.1 – Labeling workforce shown in the SageMaker console
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.1 – 在 SageMaker 控制台中显示的标记劳动力
- en: Listing the data to label
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 列出需要标记的数据
- en: We need to create a manifest file that tells Ground Truth how to find the data
    we want to label. In the manifest, we can list references to files in S3 or we
    can provide text data directly.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要创建一个清单文件，告诉 Ground Truth 如何找到我们想要标记的数据。在清单中，我们可以列出 S3 中的文件引用，或者直接提供文本数据。
- en: 'Recall that our source data is in JSON format. Each source file contains multiple
    entries that look like this:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下，我们的源数据是 JSON 格式。每个源文件包含多个条目，看起来像这样：
- en: '[PRE0]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We cannot pass in links to individual files, as each file contains multiple
    records to label. Rather, we will summarize each record directly in the manifest
    file. Each line in the manifest will contain the air quality metric and location:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不能传递单个文件的链接，因为每个文件都包含多个需要标记的记录。相反，我们将在清单文件中直接总结每条记录。清单中的每一行将包含空气质量指标和位置：
- en: '[PRE1]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `Create a manifest file` notebook section will write out a manifest for
    a set of records. Since you are the only worker you have, we limit the number
    of records to 20 by default (more on this in the next section).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '`创建清单文件` 笔记本部分将为记录集生成一个清单。由于您是唯一的工人，我们默认将记录数限制为 20（更多内容将在下一节中介绍）。'
- en: Creating the workflow
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建工作流程
- en: 'In order to create a custom workflow, we need the following:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建自定义工作流程，我们需要以下内容：
- en: A *Lambda function that can take one entry from the manifest and inject variables
    into the UI*. In this case, we will simply map the items in the manifest text
    entries into a metric label to display along with a geolocation.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个可以接受清单中的一个条目并将变量注入 UI 的 *Lambda 函数*。在这种情况下，我们将简单地映射清单文本条目到一个度量标签，并与其地理位置一起显示。
- en: A *UI template that displays the data sensibly for a worker*. In this case,
    we have a simple UI template that presents the metric along with a map showing
    the location where the metric was collected.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 *UI 模板，可以合理地显示给工人的数据*。在这种情况下，我们有一个简单的 UI 模板，它展示了指标以及收集指标的地理位置地图。
- en: Note
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: For the purposes of this book, we are using map tiles from OpenStreetMap. Do
    not use these tiles for production use cases. Instead, use a commercial provider
    such as Google Maps or Here.
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于本书的目的，我们正在使用来自 OpenStreetMap 的地图瓦片。不要在生产用例中使用这些瓦片。相反，使用商业提供商，如 Google Maps
    或 Here。
- en: A *Lambda function that consolidates annotations from multiple workers*. We
    simply do a pass-through here since we only have one worker in our sample workforce.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 *Lambda 函数，用于合并多个工人的注释*。由于我们的样本劳动力中只有一个工人，我们在这里简单地进行了透传。
- en: 'The notebook section `Create a custom workflow` walks you through these steps:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 笔记本部分 `创建自定义工作流程` 会引导你完成以下步骤：
- en: Defining IAM roles for the workflow and the Lambda function
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义工作流程和 Lambda 函数的 IAM 角色
- en: Uploading the user interface template and the Lambda processing code to S3
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将用户界面模板和 Lambda 处理代码上传到 S3
- en: Creating the pre- and post-processing Lambda functions
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建预处理和后处理 Lambda 函数
- en: Defining the labeling job
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义标记工作
- en: 'Once the labeling job is created, you can log in to the labeling portal URL
    (see *Figure 1.1*), using the username and password you specified in the notebook.
    Once you open the job, you''ll see a UI like *Figure 3.2*:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦创建标记工作，您可以通过标记门户 URL（见 *图 1.1*）登录，使用笔记本中指定的用户名和密码。一旦打开工作，您将看到一个类似于 *图 3.2*
    的 UI：
- en: '![Figure 3.2 – Labeling UI showing the location of a weather station. The locations
    are shown in the local language](img/B17249_03_02.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.2 – 显示气象站位置的标记 UI。位置以当地语言显示](img/B17249_03_02.jpg)'
- en: Figure 3.2 – Labeling UI showing the location of a weather station. The locations
    are shown in the local language
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.2 – 显示气象站位置的标记 UI。位置以当地语言显示
- en: 'You''ll see a map showing the location of the measurement and the actual measurement.
    You can pick *good* or *bad* to specify whether you think the measurement represents
    a good or bad air quality day. After you have labeled all of the metrics, your
    job will show as complete, and you''ll see the label for each data point, as shown
    in *Figure 3.3*:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个显示测量位置和实际测量的地图。您可以选择 *好* 或 *坏* 来指定您认为测量是否代表空气质量好或坏的一天。在您标记完所有指标后，您的作业将显示为完成，您将看到每个数据点的标签，如图
    *图 3.3* 所示：
- en: '![Figure 3.3 – Completed labeling job'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.3 – 完成的标记工作'
- en: '](img/B17249_03_03.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B17249_03_03.jpg)'
- en: Figure 3.3 – Completed labeling job
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.3 – 完成的标记工作
- en: We'll describe how to use the labeling output in the next chapter. You'll see
    examples of the labeling output in the notebook that goes with this chapter.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一章中描述如何使用标注输出。您将在与本章节相关的笔记本中看到标注输出的示例。
- en: Improving labeling quality using multiple workers
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用多个工作者提高标注质量
- en: Relying on a single opinion for a subjective evaluation is risky. In some cases,
    labeling seems straightforward; telling a car from an airplane when labeling transportation
    pictures is pretty simple. But let's go back to our weather data. If we're labeling
    air quality as good or bad based on a measurement that's not intuitive, such as
    the level of particulate matter (PM25), we may find that a worker's opinion depends
    greatly on the advice we give them and their preconceptions. If a worker believes
    that a certain city or country has *dirty air*, they are likely to favor a *bad*
    label in ambiguous cases. And these biases have real consequences – some governments
    are very sensitive to the idea that their air quality is bad!
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 依赖于单一意见进行主观评估是危险的。在某些情况下，标注看起来很简单；在标注交通图片时区分汽车和飞机相当简单。但让我们回到我们的天气数据。如果我们根据一个不直观的测量值（如颗粒物水平
    PM25）来标注空气质量为好或坏，我们可能会发现工作者的意见在很大程度上取决于我们给予他们的建议和他们的先入之见。如果一个工作者认为某个城市或国家有 *脏空气*，他们在模糊情况下可能会倾向于选择
    *坏* 标签。而这些偏见有实际后果——一些政府对他们的空气质量差这一想法非常敏感！
- en: One way to combat this problem is to use multiple workers to label each item
    and somehow combine the scores. In the notebook section called `Add another worker`,
    we'll add a second worker to our private workforce. Then in the `Launch labeling
    job for multiple workers` section, we'll create a new labeling job. Once the new
    job is ready, log in as both workers and label the small set of data we've selected.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 解决这个问题的方法之一是使用多个工作者来标注每个项目，并 somehow 结合分数。在名为 `Add another worker` 的笔记本部分，我们将向我们的私人工作团队中添加第二个工作者。然后在
    `Launch labeling job for multiple workers` 部分中，我们将创建一个新的标注任务。一旦新任务准备就绪，以两个工作者的身份登录并标注我们已选定的少量数据。
- en: What happens now? We'll need to adjust our post-processing Lambda to consolidate
    the annotations. We could use a variety of strategies for the consolidation. For
    example, we could use a majority voting scheme, with ties being assigned to a
    *mixed* category. In this chapter, we'll simply use the latest annotation as the
    winner since we only have two workers.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在会发生什么？我们需要调整我们的后处理 Lambda 来巩固标注。我们可以使用各种策略来进行巩固。例如，我们可以使用多数投票方案，在平局的情况下将其分配给一个
    *混合* 类别。在本章中，我们将简单地使用最新的标注作为胜者，因为我们只有两个工作者。
- en: Using active learning to reduce labeling time
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用主动学习减少标注时间
- en: 'Now that we''ve set up a labeling workflow, we need to think about scale. If
    our dataset has more than 5,000 records, it''s likely that Ground Truth can learn
    how to label for us. (You need at least 1,250 labeled records for automatic labeling,
    but at least 5,000 is a good rule of thumb.) This happens in an iterative process,
    as shown in the following diagram:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经建立了一个标注工作流程，我们需要考虑规模。如果我们的数据集有超过 5,000 条记录，那么 Ground Truth 很可能能够学会如何为我们进行标注。（您至少需要
    1,250 个标注记录来进行自动标注，但至少 5,000 是一个很好的经验法则。）这将在以下图中以迭代过程的形式发生：
- en: '![Figure 3.4 – Auto-labeling workflow'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.4 – 自动标注工作流程'
- en: ytt
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ytt
- en: '](img/B17249_03_04.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17249_03_04.jpg)'
- en: Figure 3.4 – Auto-labeling workflow
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4 – 自动标注工作流程
- en: When you create a labeling job using automatic labeling, Ground Truth will select
    a random sample of input data for manual labeling. If at least 90% of these items
    are labeled without error, Ground Truth will split the labeled data into a training
    and validation set. It will train a model and compute a confidence score, then
    attempt to label the remaining data. If the automatically generated labels are
    beneath the confidence threshold, it will refer them to workers for human review.
    This process repeats until the entire dataset is labeled. While this process is
    difficult to simulate, it provides an iterative method to improve automatic labeling
    with human input.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 当您使用自动标注创建标注任务时，Ground Truth 将选择输入数据的一个随机样本进行人工标注。如果至少 90% 的这些项目在无错误的情况下被标注，Ground
    Truth 将将标注数据分成训练集和验证集。它将训练一个模型并计算一个置信度分数，然后尝试标注剩余的数据。如果自动生成的标签低于置信度阈值，它将把它们转交给工作者进行人工审查。这个过程会重复进行，直到整个数据集都被标注。虽然这个过程很难模拟，但它提供了一个迭代方法，通过人工输入来改进自动标注。
- en: As a concluding note to this section, you may wonder what the difference is
    between a model that can automatically label data and a more general-purpose ML
    model. There's a fine line here. Keep in mind that the data we use for Ground
    Truth may not be completely representative of the data we see in production. Our
    goal for a generic ML model is a model that can produce accurate inferences without
    any human input.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 作为本节的结束语，你可能想知道一个能够自动标注数据的模型与一个更通用的机器学习模型之间的区别。这里有一条很细的界限。请记住，我们用于地面真相（Ground
    Truth）的数据可能并不完全代表我们在生产中看到的数据。我们对于一个通用机器学习模型的目标是创建一个无需任何人工输入就能产生准确推断的模型。
- en: Security and permissions
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全和权限
- en: While some data is not sensitive, most companies would not want to expose their
    data to the public during the labeling process. In this section, we'll cover data
    access control, encryption, and workforce management for data labeling.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然有些数据并不敏感，但大多数公司都不希望在标注过程中将数据暴露给公众。在本节中，我们将介绍数据访问控制、加密和数据标注工作的人力资源管理。
- en: You should follow the principle of least-privileged access when using Ground
    Truth (or any other cloud service). Restrict the users who are allowed to create
    labeling jobs, and restrict users allowed to create labeling jobs using non-private
    workforces. In a custom labeling job, explicitly provide invoke permissions to
    your Lambda functions. Restrict labeling job access to only the appropriate S3
    buckets and prefixes.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用地面真相（或任何其他云服务）时，你应该遵循最小权限访问原则。限制允许创建标注作业的用户，并限制允许使用非私有工作队伍创建标注作业的用户。在自定义标注作业中，明确提供Lambda函数的调用权限。限制标注作业的访问权限，仅限于适当的S3存储桶和前缀。
- en: When you run a labeling job, Ground Truth will always encrypt the output in
    S3\. You can use the S3-managed key or provide your own KMS key. For non-sensitive
    data, the default S3 managed key is adequate. If you have sensitive data, consider
    using separate KMS keys for different datasets, as that provides another layer
    of security. You can also use a KMS key to encrypt the storage volumes on instances
    used for automatic labeling.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 当你运行标注作业时，地面真相将始终在S3中加密输出。你可以使用S3管理的密钥或提供自己的KMS密钥。对于非敏感数据，默认的S3管理密钥就足够了。如果你有敏感数据，考虑为不同的数据集使用不同的KMS密钥，因为这提供了另一层安全性。你也可以使用KMS密钥来加密用于自动标注的实例上的存储卷。
- en: When managing your workforce, you should restrict access to a known-good IP
    address range (CIDR block). You should also use the worker tracking features to
    log which workers are accessing data. When using Cognito for authentication, make
    use of strong password policies and multi-factor authentication. In most cases,
    large companies will prefer to use their own identity provider for workforce management.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在管理你的工作队伍时，你应该限制对已知良好IP地址范围（CIDR块）的访问。你还应该使用工人跟踪功能来记录哪些工人正在访问数据。当使用Cognito进行身份验证时，利用强大的密码策略和多因素身份验证。在大多数情况下，大型公司更愿意使用他们自己的身份提供者进行工作队伍管理。
- en: Finally, note that you'll need to add **CORS** (**cross-origin resource sharing**)
    configuration to your S3 buckets involved in labeling jobs, as described in the
    documentation ([https://docs.aws.amazon.com/sagemaker/latest/dg/sms-cors-update.html](https://docs.aws.amazon.com/sagemaker/latest/dg/sms-cors-update.html)).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，请注意，你需要在涉及标注工作的S3存储桶中添加**CORS（跨源资源共享）**配置，如文档中所述（[https://docs.aws.amazon.com/sagemaker/latest/dg/sms-cors-update.html](https://docs.aws.amazon.com/sagemaker/latest/dg/sms-cors-update.html)）。
- en: 'Before we head toward the summary, do have a look at the following table as
    it summarizes some of the best practices for data labeling:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们进入总结之前，请看一下以下表格，它总结了数据标注的一些最佳实践：
- en: '![Figure 3.5 – Summary of data labeling best practices'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.5 – 数据标注最佳实践的总结'
- en: '](img/B17249_03_Table_1.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17249_03_Table_1.jpg)'
- en: Figure 3.5 – Summary of data labeling best practices
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.5 – 数据标注最佳实践的总结
- en: With this, we now come to the end of the chapter.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样，我们现在来到了本章的结尾。
- en: Summary
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we started digging into our weather dataset, focusing on the
    problem of data labeling. We learned how to use SageMaker Ground Truth to label
    large datasets using a combination of human review and automation, how to use
    custom workflows to aid the labeling process, and how to fight labeling bias by
    using multiple opinions. We ended with some advice on making sure that the labeling
    process is secure.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们开始深入挖掘我们的天气数据集，重点关注数据标注的问题。我们学习了如何使用SageMaker Ground Truth结合人工审核和自动化来标注大量数据集，如何使用自定义工作流程来辅助标注过程，以及如何通过使用多种意见来对抗标注偏差。我们以确保标注过程安全的一些建议作为结束。
- en: In the next chapter, we'll explore data preparation. We'll run a feature engineering
    processing job on the full dataset.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨数据准备。我们将在整个数据集上运行特征工程处理作业。
