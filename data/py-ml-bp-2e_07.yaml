- en: Use Machine Learning to Forecast the Stock Market
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用机器学习预测股市
- en: Just recently, I was reading an article that described the tremendous success
    of a particular treatment in combating the **Methicillin-resistant Staphylococcus
    aureus** (**MRSA**) superbug. If you haven't heard of MRSA directly, it is likely
    you've heard something about current concerns that we are headed toward a time
    when our antibiotics will no longer be effective. This is largely an inevitable
    phenomenon that occurs because some bugs in the population are genetically more
    resistant to the relevant drug. When bugs that are susceptible to the drug are
    wiped out during treatment, the remaining drug-resistant bugs then reproduce and
    become the dominant variant in the population. To combat this, scientists are
    constantly pushing the boundaries of science to find new ways to combat these
    bugs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，我正在阅读一篇文章，描述了一种特定治疗方法在抗击**耐甲氧西林金黄色葡萄球菌**（**MRSA**）超级细菌方面取得的巨大成功。如果你没有直接听说过MRSA，你很可能听说过我们即将面临一个时代——我们的抗生素将不再有效的担忧。这在很大程度上是一个不可避免的现象，因为某些细菌群体在基因上对相关药物具有更强的抵抗力。当易感药物的细菌在治疗过程中被消灭时，剩下的耐药性细菌就会繁殖并成为群体中占主导地位的变种。为了应对这种情况，科学家们不断推动科学的边界，寻找新的方法来抗击这些细菌。
- en: 'In biology, this situation is called a **Red Queen''s race**: the term comes
    from a quote in Lewis Carol''s *Through the Looking Glass:*'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在生物学中，这种情况被称为**红皇后竞赛**：这个术语来源于路易斯·卡罗尔的*《镜中奇遇记》*中的一句话：
- en: '"Now, here, you see, it takes all the running you can do, to keep in the same
    place."'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: “现在，看看，这里，你看，得跑得越快，才能保持在原地。”
- en: This effectively describes the situation we're in with antibiotics, but perhaps
    the answer is not to be found in moving on to new, ever-more advanced drugs. Perhaps
    the answer might be found in understanding the larger cycle at play and using
    it to our advantage.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 这有效地描述了我们在抗生素领域所面临的状况，但或许答案不在于转向新的、更先进的药物。或许答案在于理解正在起作用的更大周期，并利用它为我们所用。
- en: That new treatment for MRSA I was discussing earlier? That was actually from
    a 10^(th) century book of medical potions called **Bald's Leechbook**. Among the
    listed ingredients were garlic, wine, and onions. This combination was found to
    have surpassed the results for our current treatment-of-last-resort, **vancomycin**.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我之前讨论的那个针对MRSA的新治疗方法？实际上来自一本10^(th)世纪的医学药方书，名为**巴尔德的引血书**。书中列举的成分包括大蒜、酒和洋葱。这种组合的效果超越了我们当前的最后治疗手段——**万古霉素**。
- en: But what does any of this have to do with forecasting the stock market? I would
    like to suggest that the very same phenomenon is at play in both scenarios. For
    example, every so often, a paper is published that alerts the financial world
    to the existence of a phenomenon that is a profitable anomaly. Most likely, this
    phenomenon is the downstream effect of some externally imposed, real-world constraint.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 但这一切和预测股市有什么关系呢？我想建议的是，这两种情况中正好存在着同样的现象。例如，时不时会有一篇论文发布，警告金融界某种现象的存在，而这种现象是一种有利可图的异常现象。很可能，这种现象是某些外部强加的、现实世界的约束所带来的下游效应。
- en: Take, for example, year-end tax loss sales. Because of the nature of tax laws,
    it makes sense for traders to sell their losses at the end of the year. This imposes
    downward price pressure on losing stocks toward year end. The falling prices then
    mean the stocks can be discounted beyond their fair value. This also means that,
    in January, the downward pressure is gone, replaced by upward pressure as new
    money is put to work in these undervalued assets. But once that phenomenon has
    been broadcast, it only makes sense for traders to attempt to get ahead of it
    and begin buying those stocks in late December and selling to those other traders
    who are expected to be buyers in January. These new traders, by entering the market,
    have now diluted the effect. They are relieving the year-end selling pressure
    and decreasing the January buying pressure. The effect is essentially arbitraged
    away right along with the profitability. What once worked no longer works and
    traders will begin to abandon the strategy and move on to the next new thing.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 以年底税务亏损销售为例。由于税法的性质，交易者在年底卖出亏损的股票是有意义的。这会对亏损股票在年底施加下行压力。然后，股价的下跌意味着这些股票可能被低于其公允价值的价格折扣出售。这也意味着，到了1月，原本的下行压力消失，取而代之的是上涨的压力，因为新资金开始投资于这些被低估的资产。但一旦这一现象被广泛传播，交易者就会试图走在前面，在12月末开始买入这些股票，并卖给那些预计会在1月成为买家的其他交易者。新的交易者进入市场后，实际上稀释了这一效应。他们减轻了年底的卖压，并降低了1月的买压。这个效应本质上被套利掉了，连同盈利一同消失。曾经有效的策略不再有效，交易者将开始放弃这种策略，转向下一个新的机会。
- en: By now, I hope you are beginning to see the parallels. It is likely that the
    garlic, wine, and onions combination was once a very effective cure for bacterial
    infections that gradually lost its effectiveness as the bacteria adapted. Having
    been abandoned long ago as a cure, the bacteria had no reason to avoid the original
    genes that made them susceptible to this treatment. There are real-world constraints
    that make it nearly inevitable that these types of cycles will occur—both in living
    organisms and in markets. The key is to use this to our advantage.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，我希望你已经开始看到这些相似之处。大蒜、葡萄酒和洋葱的组合可能曾是一个非常有效的抗菌疗法，但随着细菌的适应，它逐渐失去了效力。由于很久以前这种治疗方法已被废弃，细菌也没有理由避免那些使它们对这种治疗敏感的原始基因。现实世界中的一些限制使得这些类型的循环几乎不可避免——无论是在生物体中还是在市场中。关键是如何利用这一点来为我们所用。
- en: In this chapter, we'll spend some time discussing how to build and test a trading
    strategy. We'll spend even more time, however, on how *not* to do it. There are
    countless pitfalls to avoid when trying to devise you own system, and it is nearly
    an impossible task, but it can be a lot of fun, and sometimes it can even be profitable.
    With that said, don't do dumb things such as risking money you can't afford to
    lose.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将花一些时间讨论如何建立和测试交易策略。然而，我们将花更多的时间讨论如何*不*这样做。在尝试设计你自己的系统时，有无数的陷阱需要避免，而这几乎是一项不可能完成的任务，但它可以非常有趣，有时甚至能带来盈利。话虽如此，千万不要做出那些你无法承受的亏损的愚蠢决定。
- en: If you do decide to use anything you learned here to trade, you're on your own.
    This shouldn't be deemed investment advice of any kind, and I accept no responsibility
    for your actions.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你决定用这里学到的任何知识进行交易，你得自己承担风险。这不应被视为任何形式的投资建议，我对你的行为不承担任何责任。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Types of market analysis
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 市场分析的类型
- en: What does research tell us about the stock market?
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 研究告诉我们关于股市的什么信息？
- en: How to develop a trading system
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何开发交易系统
- en: Types of market analysis
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 市场分析的类型
- en: Let's begin with a discussion of some key terms and methods of analysis when
    dealing with financial markets. Though there are countless financial instruments,
    including stocks, bonds, ETFs, currencies, and swaps, we'll limit our discussion
    to stocks and the stock market. A stock is simply a fractional share of ownership
    in a public company. The price of a stock is expected to increase when future
    prospects for the company rise, and decrease as these prospects decline.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从讨论一些金融市场分析时的关键术语和分析方法开始。虽然金融工具种类繁多，包括股票、债券、ETF、货币和掉期，但我们将把讨论限定在股票和股市上。股票只是公众公司所有权的一个部分份额。当公司未来前景上升时，股票价格预计会增加，而当这些前景下滑时，股票价格则会下降。
- en: There are generally two camps that investors fall into. The first are the fundamental
    analysts. These analysts pore through company financials looking for information
    that indicates that, somehow, the market is undervaluing the shares of the company.
    These investors look at various factors, such as revenue, earnings, and cash flow,
    and various ratios of the values. This frequently involves looking at how one
    company's financials compare to another's.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 投资者通常会分为两大阵营。第一类是基本面分析师。这些分析师仔细研究公司的财务数据，寻找表明市场在某种程度上低估公司股票的信息。这些投资者会关注各种因素，如收入、盈利、现金流以及这些值的各种比率。这通常涉及将一家公司财务与另一家公司进行对比。
- en: The second camp of investors is the technical analysts. Technical analysts believe
    that share prices already reflect all publicly available information and that
    looking through the fundamentals is largely a waste of time. They believe that
    by looking at historical prices—stock charts—you can see areas where prices are
    likely to rise, fall, or stagnate. Generally, they feel that these charts reveal
    clues to investor psychology.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 第二类投资者是技术分析师。技术分析师认为，股票价格已经反映了所有公开的可得信息，而研究基本面分析基本上是浪费时间。他们认为，通过观察历史价格—股票图表—可以看出价格上涨、下跌或停滞的区域。一般来说，他们认为这些图表揭示了投资者心理的线索。
- en: What both groups have in common is an underlying belief that the right analysis
    can lead to profits. But is that true?
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 两种类型的投资者有一个共同点，那就是他们都相信正确的分析能够带来利润。但这是正确的吗？
- en: What does research tell us about the stock market?
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 研究告诉我们关于股市的什么信息？
- en: 'Perhaps the most influential theory of the stock market over the last 50 years
    is that of the efficient market hypothesis. This theory, developed by Eugene Fama,
    stipulates that markets are rational and that all the available information is
    appropriately reflected in stock prices. As such, it is impossible for an investor
    to consistently *beat the market* on a risk-adjusted basis. The efficient market
    hypothesis is often discussed as having three forms: a weak form, a semi-strong
    form, and a strong form:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 过去50年中，或许最有影响力的股市理论就是有效市场假说。这个理论由尤金·法马（Eugene Fama）提出，规定市场是理性的，所有可得的信息都已恰当反映在股价中。因此，投资者不可能在风险调整后的基础上持续*战胜市场*。有效市场假说通常被讨论为有三种形式：弱型形式、半强型形式和强型形式：
- en: In the weak form, the market is efficient in the sense that you cannot use past
    information from prices to predict future prices. Information is reflected in
    stocks relatively quickly, and while technical analysis would be ineffective,
    in some scenarios, fundamental analysis could be effective.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弱型形式下，市场是有效的，因为你无法利用价格的过去信息来预测未来的价格。信息会相对较快地反映在股票中，虽然技术分析无效，但在某些情况下，基本面分析可能是有效的。
- en: In the semi-strong form, prices immediately reflect all relevant new public
    information in an unbiased manner. Here, neither technical nor fundamental analysis
    would be effective.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在半强型形式下，价格会立即以公正的方式反映所有相关的公共新信息。在这种情况下，技术分析和基本面分析都不会有效。
- en: And finally, in the strong form, stock prices reflect all public and private
    information.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最终，在强型形式下，股票价格反映所有的公共和私人信息。
- en: Based on these theories, there isn't much hope of making money by exploiting
    patterns in the market. But fortunately, while the market operates in a largely
    efficient manner on the whole, distinct pockets of inefficiency have been uncovered.
    Most of these tend to be ephemeral, but some have been documented as persisting.
    One of the most noteworthy—even according to Fama—is the outperformance of momentum
    strategies.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这些理论，通过利用市场中的模式来赚钱并没有太大希望。但幸运的是，尽管整体市场运作效率较高，但仍然有一些效率低下的独立领域被发现。这些低效领域大多数都是短暂的，但也有一些被证明是持续存在的。即便按照法马的说法，其中最值得注意的一点就是动量策略的超常表现。
- en: So, what exactly is a momentum strategy?
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 那么，动量策略究竟是什么呢？
- en: There are a number of variations on the theme, but the basic idea is that stocks
    are ranked from the highest to lowest according to their return over a prior period.
    The top-ranked performers are bought and held for a period of time, and then the
    process is repeated after a fixed holding period. A typical long-only momentum
    strategy might involve buying the top 25 performing stocks in the S&P 500 over
    the past year, holding them for a year, selling them, and then repeating the process.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这个主题有许多变化，但基本的思路是根据股票在一段时间内的回报将其从高到低排序。排名靠前的股票被购买并持有一段时间，之后在固定的持有期过后，重复这一过程。一个典型的只做多的动量策略可能包括购买过去一年在标准普尔500指数中表现最好的25只股票，持有一年后卖出，然后再重复这一过程。
- en: This may sound like an absurdly simple strategy, and it is, but it has consistently
    returned results that defy expectation. But why? As you can imagine, a lot of
    research has examined this effect, and the hypothesis is that there is something
    inherently systemically biased about how humans deal with new information. The
    research suggests they underreact to news in the short term and then overreact
    to news in the long term. This means that, when stocks begin to rise on exceptionally
    good news, investors don't fully elevate the share price to the level that would
    fully reflect this news; it takes time for them to come around to incorporating
    this rosy outlook.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 这听起来可能是一个过于简单的策略，确实如此，但它始终如一地产生了出人意料的结果。那么，为什么呢？正如你可以想象的那样，许多研究已经探讨了这一现象，假设是人类在处理新信息时存在某种固有的系统性偏差。研究表明，人们在短期内对新闻反应不足，而在长期内则反应过度。这意味着，当股票因极好的新闻开始上涨时，投资者并没有完全将股价提升到能够完全反映这些新闻的水平；他们需要一些时间才能适应并将这种乐观情绪纳入考量。
- en: This tendency of investors to fail to adequately reprice shares in the face
    of exceedingly good news may be the result of a well-documented bias called the
    **anchoring effect**. Essentially, when presented with a number, even a random
    number, and then asked to estimate a real-world value, such as the number of countries
    in Africa, for instance, our answer will be mentally tethered to that number we
    were primed with. Remarkably, this happens even if we know the number is randomly
    generated and unrelated to the question.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 投资者未能在面对极好新闻时充分重新定价股票的倾向，可能是由一种广为记录的偏差——**锚定效应**——所导致的。实际上，当呈现给我们一个数字，即使是一个随机数字，然后要求我们估计一个现实世界的值（比如非洲的国家数量），我们的答案会在心理上被固定在我们最初接收到的那个数字上。值得注意的是，即使我们知道这个数字是随机生成的，并与问题无关，这种情况依然发生。
- en: So, will momentum strategies be arbitraged away as more traders learn of it
    and pile in? There has been some evidence of this in recent years, but it remains
    unclear. Regardless, the effect was demonstrably real and persisted far longer
    than can currently be accounted for by the efficient market hypothesis. So, there
    at least appears to be some hope for market prediction. With that in mind, let's
    now move on to exploring how we might go about unearthing our own market anomalies.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，随着越来越多的交易者了解这一策略并纷纷加入，动量策略是否会被套利消除呢？近年来确实有一些证据表明这一点，但仍然不清楚。无论如何，这一效应确实存在，并且持续的时间远远超出了目前有效市场假说能够解释的范围。因此，至少似乎存在一些市场预测的希望。考虑到这一点，让我们接下来探讨如何挖掘我们自己的市场异常。
- en: How to develop a trading strategy
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何开发一个交易策略
- en: We'll begin our strategy development by focusing on the technical aspects. Let's
    take a look at the S&P 500 over the last few  years. We'll use `pandas` to import
    our data. This will give us access to several sources of stock data, including
    Yahoo! And Google.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从技术层面开始策略开发。让我们来看看过去几年的标准普尔500指数。我们将使用`pandas`导入我们的数据。这将让我们访问多个股票数据源，包括Yahoo！和Google。
- en: 'First, you''ll need to install the data reader:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，你需要安装数据读取器：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, go ahead and incorporate your imports:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，继续加入你的导入语句：
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now, we''ll get our data for the `SPY` ETF, which represents the stocks of
    the S&P 500\. We''ll pull data from the start of 2010 through December 2018:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将获取`SPY` ETF的数据，该ETF代表标准普尔500指数中的股票。我们将提取2010年初至2018年12月的数据：
- en: '[PRE2]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This code generates the following output:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码生成以下输出：
- en: '![](img/b39cf97d-19e3-4d93-be27-7a5b19574069.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b39cf97d-19e3-4d93-be27-7a5b19574069.png)'
- en: 'We can now plot our data. We''ll select only the closing price:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以绘制我们的数据了。我们将只选择收盘价：
- en: '[PRE3]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'This generates the following output:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/76555344-12fd-4691-b889-c67fdfd4552d.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/76555344-12fd-4691-b889-c67fdfd4552d.png)'
- en: In the preceding diagram, we see the price chart of the daily closing price
    of the S&P 500 for the period we selected.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图表中，我们看到的是我们选择的期间内，标准普尔500指数每日收盘价的价格图。
- en: Analysis of the data
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据分析
- en: 'Let''s run some analysis to see what the returns over this period might have
    been had we invested in this ETF:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进行一些分析，看看如果我们投资了这个ETF，这段时间的回报会是什么样：
- en: 'We''ll pull data for the `first_open` first:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将首先提取`first_open`的数据：
- en: '[PRE4]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This generates the following output:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/1277486c-c70d-42a2-a87d-2b30b3bd9951.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1277486c-c70d-42a2-a87d-2b30b3bd9951.png)'
- en: 'Next, let''s get the closing price on the final day of the period:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们获取该期间最后一天的收盘价：
- en: '[PRE5]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This generates the following output:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/9aaea445-e5d0-4e72-be77-f3a6bef10c31.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9aaea445-e5d0-4e72-be77-f3a6bef10c31.png)'
- en: 'And finally, let''s see the change over the full period:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们来看一下整个时期内的变化：
- en: '[PRE6]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'This generates the following output:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/1204d125-c15f-4c58-874d-6289f01b0788.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1204d125-c15f-4c58-874d-6289f01b0788.png)'
- en: So, it appears that a purchase of 100 shares at the start of the period would
    have cost us approximately $11,237 and, at the end of the period, those same 100
    shares would have been valued at roughly $27,564\. This transaction would have
    given us a gain of just a bit over 145% over the period. Not too bad at all.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，看起来在该期间开始时购买100股将花费大约11,237美元，而在该期间结束时，这100股的价值大约为27,564美元。这个交易将使我们在该期间内获得约145%的收益。还不错。
- en: 'Let''s now take a look at the return over the same period for just the intraday
    gains. This assumes we buy the stock at the opening of each day and sell it at
    the close of that same day:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看一下同一时期内仅考虑日内涨幅的回报。这假设我们每天在开盘时买入股票，并在当天收盘时卖出：
- en: '[PRE7]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'That will give us the change from the open to the close each day. Let''s take
    a look at that:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这将给我们每天从开盘到收盘的变化。让我们来看一下：
- en: '[PRE8]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'This generates the following output:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/116b452a-c510-476b-b667-ef75bd3ce10c.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/116b452a-c510-476b-b667-ef75bd3ce10c.png)'
- en: 'Let''s now total those changes over the period:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们总计一下这段期间的变化：
- en: '[PRE9]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This generates the following output:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/1229a31b-75bc-4423-bf64-8205cb5f9717.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1229a31b-75bc-4423-bf64-8205cb5f9717.png)'
- en: So, as you can see, we have gone from a gain of over 163 points to one of just
    over 53 points. Ouch! More than half the market's gains came from holding overnight
    during the period.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，我们从超过163点的收益下降到了略高于53点的收益。哎呀！市场的收益中超过一半来自于期间的隔夜持有。
- en: Volatility of the returns
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回报的波动性
- en: The overnight returns were better than the intraday returns, but how about the
    volatility? Returns are always judged on a risk-adjusted basis, so let's see how
    the overnight trades compared to the intraday trades on the basis of their standard
    deviation.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 隔夜回报优于日内回报，但波动性如何呢？回报总是以风险调整后的方式来评判的，因此我们来看看隔夜交易和日内交易在标准差上的对比。
- en: 'We can use NumPy to calculate this for us as follows:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用NumPy来计算这个，方法如下：
- en: '[PRE10]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This generates the following output:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/7d3e5a44-e468-4842-8627-f88be8b32948.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d3e5a44-e468-4842-8627-f88be8b32948.png)'
- en: '[PRE11]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'This generates the following output:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/86c5b999-7f02-4c8f-b68d-f8570bafe99e.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/86c5b999-7f02-4c8f-b68d-f8570bafe99e.png)'
- en: 'So our overnight trading not only had higher gains, but lower volatility as
    well, compared to the intraday trading. But not all volatility is created equal.
    Let''s compare the mean change on downside days versus upside days for both strategies:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，与日内交易相比，我们的隔夜交易不仅收益更高，而且波动性更低。但并非所有的波动性都是相同的。我们来比较一下两种策略下，跌日与涨日的平均变化：
- en: '[PRE12]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'This code generates the following output:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码生成了以下输出：
- en: '![](img/60138527-ec0f-442c-8324-6ee83becb90c.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/60138527-ec0f-442c-8324-6ee83becb90c.png)'
- en: 'Run this code for upside days:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 运行这个代码以分析涨日：
- en: '[PRE13]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We get the output as follows:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到的输出如下：
- en: '![](img/5b756271-fdf5-4539-a02c-1031411b122e.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5b756271-fdf5-4539-a02c-1031411b122e.png)'
- en: Again, we see that the average downside volatility is far less for our overnight
    trading strategy than our intraday trading strategy.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 再次看到，平均的下行波动性对于我们的隔夜交易策略要远低于日内交易策略。
- en: Daily returns
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 每日回报
- en: 'So far, we have looked at everything in terms of points, but let''s now look
    at daily returns. This will help put our gains and losses into a more realistic
    context. Let''s create a pandas series for each scenario: daily returns (close
    to close change), intraday returns, and overnight returns:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直是从点数的角度来看的，但现在让我们来看一下日常回报。这将帮助我们将收益和亏损放入一个更现实的背景中。让我们为每种情况创建一个 pandas
    系列：日常回报（收盘到收盘的变化）、日内回报和过夜回报：
- en: '[PRE14]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'What we''ve done is use the pandas `.shift()` method to subtract each series
    from the prior day''s series. For example, for the preceding first series, we
    are subtracting the close from the close one day before for each day. This will
    result in one less data point. If you print out the new series, you can see this
    as follows:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们所做的就是使用 pandas 的 `.shift()` 方法，从前一天的系列中减去每个系列。例如，对于前面第一个系列，我们将每天的收盘价与前一天的收盘价相减。这将导致少一个数据点。如果你打印出新的系列，你可以看到如下内容：
- en: '[PRE15]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This generates the following output:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/a77a8d8c-ee34-42c9-b747-b6c9734d1b2e.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a77a8d8c-ee34-42c9-b747-b6c9734d1b2e.png)'
- en: Statistics for the strategies
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 各策略的统计数据
- en: 'Let''s now take a look at the statistics for all three strategies. We''ll create
    a function that can take in each series of returns, and will print out the summary
    results. We''re going to get statistics for each of our winning, losing, and break-even
    trades, and something called the **Sharpe ratio**. I said earlier that returns
    are judged on a risk-adjusted basis; this is exactly what the Sharpe ratio provides
    us with; it is a method of comparing returns by accounting for the volatility
    of those returns. Here, we use the Sharpe ratio with an adjustment to annualize
    the ratio:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们来看一下这三种策略的统计数据。我们将创建一个函数，可以接收每一组回报数据，并打印出总结结果。我们将获取每个盈利、亏损和持平交易的统计数据，还有一个叫做**夏普比率**的东西。我之前说过，回报是基于风险调整来评估的；这正是夏普比率所提供的；它是一种通过考虑回报波动性来比较回报的方法。在这里，我们使用经过调整的夏普比率来年化比率：
- en: '[PRE16]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Let''s now run each strategy to see the stats. We''ll start with the buy-and-hold
    strategy (daily returns) and then move onto the other two, as follows:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们运行每个策略，看看统计数据。我们将从买入并持有策略（每日回报）开始，然后依次处理其他两个策略，如下所示：
- en: '[PRE17]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This generates the following output:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/59e1a71f-db90-4408-a1e7-7e2ca4c92eae.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](img/59e1a71f-db90-4408-a1e7-7e2ca4c92eae.png)'
- en: 'Run the following code for intraday returns:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下代码来计算日内回报：
- en: '[PRE18]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'This generates the following output:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/3ba22f6f-3a6c-42ba-8c18-ccf0be85d6f1.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3ba22f6f-3a6c-42ba-8c18-ccf0be85d6f1.png)'
- en: 'Run the following code for overnight returns:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下代码来计算过夜回报：
- en: '[PRE19]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'This generates the following output:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/a0460c44-deb4-4ac1-a148-e9b3bb4199f3.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a0460c44-deb4-4ac1-a148-e9b3bb4199f3.png)'
- en: As you can see, the buy-and-hold strategy has the highest mean return, as well
    as the highest standard deviation, of the three. It also has the largest daily
    drawdown (loss). You will also notice that, even though the overnight-only strategy
    has a higher mean return than the intraday strategy, it also has substantially
    less volatility. This, in turn, gives it a Sharpe ratio that is higher than the
    intraday strategy.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，买入并持有策略具有三种策略中最高的平均回报和最高的标准差。它还拥有最大的日内最大回撤（亏损）。你还会注意到，尽管仅限过夜策略的平均回报高于日内策略，但它的波动性要小得多。这反过来使得它的夏普比率高于日内策略。
- en: At this point, we have a solid baseline for comparing our future strategies.
    Now, I am going to tell you about a strategy that blows all three of these strategies
    out of the water.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经有了一个坚实的基准来比较我们未来的策略。现在，我将告诉你一个能够轻松击败这三种策略的策略。
- en: The mystery strategy
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 神秘策略
- en: 'Let''s take a look at the statistics for this new mystery strategy:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们来看一下这个新神秘策略的统计数据：
- en: '![](img/38ea8574-ea3e-4a32-9c5d-098b404b7137.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/38ea8574-ea3e-4a32-9c5d-098b404b7137.png)'
- en: With this strategy, I have essentially doubled the Sharpe ratio over buy-and-hold,
    lowered the volatility substantially, increased the max win, and reduced the max
    loss by a significant level.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这个策略，我基本上将夏普比率从买入并持有策略的水平提高了一倍，大幅降低了波动性，增加了最大盈利，并显著降低了最大亏损。
- en: And how is it that I devised this market-trouncing strategy? Wait for it...
    I did it by generating 5,000 random overnight signals and picked the best one.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我是如何设计出这个超越市场的策略的呢？等等... 我是通过生成5000个随机的过夜信号，并挑选出最好的一个来做到的。
- en: This is obviously not the way to beat the market. So why then did I do it? To
    demonstrate that, if you test enough strategies, just by random chance you will
    come across a number that appears to be amazing. This is the called the **data
    mining fallacy**, and it is a real risk in trading strategy development. That
    is why it is so important to find a strategy that is anchored to real-world investor
    biases and behaviors. If you want an edge in trading, you don't trade the markets;
    you the trade people who trade markets*.*
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这不是击败市场的方法。那么，我为什么这么做呢？是为了演示，如果你测试足够多的策略，仅凭随机机会，你会碰到一个看似非常优秀的数字。这就是所谓的**数据挖掘谬误**，它是交易策略开发中的一个实际风险。这也是为什么找到一个与现实世界投资者偏见和行为相匹配的策略是如此重要。如果你想在交易中占有优势，你不是在交易市场，你是在交易那些交易市场的人。*。
- en: An edge then comes from thoughtfully understanding how people might react incorrectly
    to certain situations.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，优势来自于深思熟虑地理解人们在某些情况下可能做出的错误反应。
- en: 'Let''s now extend our analysis. First, we''ll pull data for the index beginning
    with the year 2000:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们扩展分析。首先，我们将提取从2000年开始的指数数据：
- en: '[PRE20]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Let''s now take a look at our chart:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看我们的图表：
- en: '[PRE21]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This generates the following output:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/bb069f0f-193a-4920-8620-937b8f1cc537.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bb069f0f-193a-4920-8620-937b8f1cc537.png)'
- en: Here, we see the price action for the `SPY` from the start of 2000 until December
    1, 2018\. There has certainly been a lot of movement during that period as the
    market has experienced both highly positive and highly negative regimes.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，我们看到从2000年初到2018年12月1日`SPY`的价格走势。在此期间，市场经历了高度正面和高度负面的市场周期，波动非常大。
- en: Let's get our baseline for our new expanded period for our three base strategies.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为三种基本策略的新扩展期设置基准。
- en: 'First, let''s set up our variables for each:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们为每个设置变量：
- en: '[PRE22]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Now, let''s see what the point totals are for each:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看每个的得分总计：
- en: '[PRE23]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'This generates the following output:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/129ee241-4113-4bc8-8b58-87ea6ccf0b28.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/129ee241-4113-4bc8-8b58-87ea6ccf0b28.png)'
- en: 'Now, let''s see what the point totals are for open to close:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看从开盘到收盘的得分总计：
- en: '[PRE24]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'This generates the following output:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/2438ea4d-8fec-4a91-9b05-0f2346bc764a.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2438ea4d-8fec-4a91-9b05-0f2346bc764a.png)'
- en: 'Now, let''s see what the point totals are for close to open:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看从收盘到开盘的得分总计：
- en: '[PRE25]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'This generates the following output:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/d811fd81-8908-48a0-a292-f6431690e395.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d811fd81-8908-48a0-a292-f6431690e395.png)'
- en: 'And now let''s look at the statistics for each:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看每个的统计数据：
- en: '[PRE26]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'This generates the following output:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/84fd8395-a52a-4816-8440-eed87a9ab176.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](img/84fd8395-a52a-4816-8440-eed87a9ab176.png)'
- en: 'Now, let''s look at the statistics for intraday returns:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看盘中回报的统计数据：
- en: '[PRE27]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'This generates the following output:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/91666e3b-4eb1-4853-ae95-02e00536b7ef.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](img/91666e3b-4eb1-4853-ae95-02e00536b7ef.png)'
- en: 'Now, let''s look at the statistics for overnight returns:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看隔夜回报的统计数据：
- en: '[PRE28]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This generates the following output:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/df97c14f-abb1-43c8-a337-08bb4064adba.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/df97c14f-abb1-43c8-a337-08bb4064adba.png)'
- en: We can see that the differences between the three are even more pronounced over
    the longer period. Had you only held during the day over the past 18 years, you
    would have lost money in this S&P ETF. Had you held only overnight, you would
    have improved your total point returns by over 18%! Obviously, this presumes no
    trading costs and no taxes along with perfect fills but, regardless, this is a
    remarkable finding.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，在较长的时间段内，三者之间的差异更加显著。如果你在过去18年只在白天持有这个S&P ETF，你将会亏钱。如果你只在隔夜持有，你的总点数回报将提高超过18%！显然，这假设没有交易成本和税费，并且有完美的成交，但无论如何，这都是一个显著的发现。
- en: Building the regression model
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建回归模型
- en: 'Now that we have a baseline to compare with, let''s build our first regression
    model. We''re going to start with a very basic model using only the stock''s prior
    closing values to predict the next day''s close, and we''re going to build it
    using a support vector regression. With that, let''s set up our model:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了对比的基准，接下来我们将构建我们的第一个回归模型。我们将使用一个非常基础的模型，只利用股票的前一个收盘值来预测第二天的收盘，并使用支持向量回归来构建它。那么，让我们开始设置模型：
- en: 'The first step is to set up a DataFrame that contains a price history for each
    day. We''re going to include the past 20 closes in our model:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是设置一个包含每日价格历史的DataFrame。我们将在模型中包括过去20个收盘数据：
- en: '[PRE29]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'This code gives us each day''s closing price, along with the previous 20, all
    on the same line. The result of our code is seen in the following output:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这段代码给出了每一天的收盘价，以及之前的20天数据，所有数据都在同一行。我们的代码结果如下所示：
- en: '![](img/e6d615df-bb9c-44ef-85dd-a55d2b53c7a1.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6d615df-bb9c-44ef-85dd-a55d2b53c7a1.png)'
- en: This will form the basis of the *X* array we will feed our model. But before
    we're ready for that, there are a few additional steps.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将形成我们将输入到模型中的*X*数组。但在我们准备好之前，还需要一些额外的步骤。
- en: 'First, we''ll reverse our columns so that time runs from left to right:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将反转我们的列，使时间从左到右排列：
- en: '[PRE30]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'This generates the following output:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/dfea1f30-2143-401b-b300-e614f46889b5.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dfea1f30-2143-401b-b300-e614f46889b5.png)'
- en: 'Now, let''s import our support vector machine and set our our training and
    test matrices and vectors:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们导入支持向量机并设置我们的训练和测试矩阵及向量：
- en: '[PRE31]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'We had just 5,000 data points to work with, so I chose to use the last 2,000
    for testing. Let''s now fit our model and use it to check out-of-sample data:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们只有5,000个数据点可供使用，所以我选择了最后2,000个数据点作为测试集。现在让我们拟合我们的模型，并使用它来检查样本外数据：
- en: '[PRE32]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Now that we have our predictions, let''s compare them to our actual data:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们有了预测结果，让我们将它们与实际数据进行比较：
- en: '[PRE33]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The preceding code generates the following output:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 上面的代码生成了以下输出：
- en: '![](img/ba8c2a4d-b07e-4a05-923e-24aed37b002f.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ba8c2a4d-b07e-4a05-923e-24aed37b002f.png)'
- en: Performance of the model
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型的表现
- en: 'Let''s now look at the performance of our model. We''re going to buy the next
    day''s open if the close is predicted to be higher than the open. We''ll then
    sell at the close that same day. We''ll need to add a few extra data points to
    our DataFrame to calculate our results, as follows:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看我们模型的表现。如果预测的收盘价高于开盘价，我们将买入次日的开盘价。然后，我们将在当天的收盘时卖出。为了计算我们的结果，我们需要向数据框中添加一些额外的数据点，具体如下：
- en: '[PRE34]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'This generates the following output:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/727e9625-5aec-43c9-b321-15f1735c90f5.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/727e9625-5aec-43c9-b321-15f1735c90f5.png)'
- en: 'Here we''ll add the following code to get our signal and our profit and loss
    for the signal:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们将添加以下代码，以获取我们的信号和该信号的盈亏：
- en: '[PRE35]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'This generates the following output:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/a78fa97e-2bad-40c5-ae25-393a9c2a1750.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a78fa97e-2bad-40c5-ae25-393a9c2a1750.png)'
- en: 'Let''s now see whether, using just the price history, we were able to successfully
    predict the next day''s price. We''ll start by calculating the points gained:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看，仅凭价格历史，我们是否能够成功预测次日的价格。我们将从计算收益点数开始：
- en: '[PRE36]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'This generates the following output:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/702d59f5-f189-42a5-ba32-ff24dce34385.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![](img/702d59f5-f189-42a5-ba32-ff24dce34385.png)'
- en: 'Ouch! This looks bad. But what about the period we tested? We never evaluated
    it in isolation. How many points would our basic intraday strategy have generated
    during the last 2,000 days:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 哎呀！看起来很糟糕。但是我们测试的那一段时间呢？我们从未单独评估过它。我们的基本日内策略在过去2,000天内生成了多少点数：
- en: '[PRE37]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'This generates the following output:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/35a29a4d-e1f5-4982-bfcb-a4f60c72d301.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35a29a4d-e1f5-4982-bfcb-a4f60c72d301.png)'
- en: So it looks as if our strategy is abysmal. Let's compare the two.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来我们的策略非常糟糕。让我们比较一下两者。
- en: 'First, the basic intraday strategy for the period:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 首先是该时期的基本日内策略：
- en: '[PRE38]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'This generates the following output:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/083afef5-1f88-4d56-ba45-eeb098380cb6.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![](img/083afef5-1f88-4d56-ba45-eeb098380cb6.png)'
- en: 'And now the results for our model:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是我们模型的结果：
- en: '[PRE39]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'This generates the following output:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/42649d66-83a0-4f34-a788-fa06e81ac148.png)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42649d66-83a0-4f34-a788-fa06e81ac148.png)'
- en: 'It''s clear our strategy is not one we would want to implement. How might we
    improve what we have here? What if we modified our trading strategy? What if we
    only took trades that, instead of just being any amount greater than the open,
    were expected to be greater by a point or more. Would that help? Let''s try it.
    We''ll re-run our strategy with a modified signal, as demonstrated in the following
    code block:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 很明显，我们的策略并不是我们想要实现的策略。我们如何改进现有的策略呢？如果我们修改我们的交易策略会怎样？如果我们只选择那些预期上涨1点或以上的交易，而不仅仅是任何大于开盘价的交易呢？这会有帮助吗？让我们试试。我们将使用修改后的信号重新运行策略，如下所示的代码块：
- en: '[PRE40]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'This generates the following output:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/55e4a7ef-13b6-4629-94be-90c3774c9fad.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/55e4a7ef-13b6-4629-94be-90c3774c9fad.png)'
- en: 'And now the stats:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是统计数据：
- en: '[PRE41]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'This generates the following output:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这生成了以下输出：
- en: '![](img/59060bd5-2563-4c21-9c50-466a05f2eced.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](img/59060bd5-2563-4c21-9c50-466a05f2eced.png)'
- en: 'We have gone from bad to worse. It appears that, if past price history suggests
    good things to come, you can expect precisely the opposite. We seem to have developed
    a contrarian indicator with our model. What if we explore that? Let''s see what
    our gains would look like if we flipped our model so that, when we predict strong
    gains, we don''t trade, but otherwise we do:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的情况变得越来越糟。看起来，如果过去的价格历史暗示未来会有好结果，你实际上可以预期恰恰相反。我们似乎开发了一个反向指标。那如果我们探索一下这个呢？让我们看看如果我们将模型反转，当我们预测强劲的涨幅时，我们不交易，而其他情况下我们进行交易，结果会如何：
- en: '[PRE42]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'This generates the following output:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/eb79b57d-2e6c-4cfe-ad90-11e23c8aec11.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb79b57d-2e6c-4cfe-ad90-11e23c8aec11.png)'
- en: 'Let''s get our stats:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们获取我们的统计数据：
- en: '[PRE43]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'This generates the following output:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![](img/7d8ec085-d251-4432-9ca5-5c8371dc6ad3.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d8ec085-d251-4432-9ca5-5c8371dc6ad3.png)'
- en: It looks like we do have a contrarian indicator here. When our model predicts
    strong next-day gains, the market significantly underperforms, at least during
    our test period. Would this hold in most scenarios? Unlikely. Markets tend to
    flip from regimes of mean reversion to regimes of trend persistence.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来我们确实有一个反向指标。当我们的模型预测第二天强劲的涨幅时，市场表现明显不佳，至少在我们的测试期间是这样。这个结论在大多数情况下成立吗？不太可能。市场往往会从均值回归的状态转变为趋势持续的状态。
- en: At this point, there are a number of extensions we could make to this model.
    We haven't even touched on using technical indicators or fundamental data in our
    model, and we have limited our trades to one day. All of this could be tweaked
    and extended upon, but there is one important point we have not addressed that
    must be mentioned.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 到此为止，我们可以对这个模型做出一些扩展。我们甚至没有涉及使用技术指标或基本面数据，也将我们的交易限制为一天内完成。所有这些都可以调整和扩展，但有一个我们还没有涉及的重要点，必须提及。
- en: The data we are working with is of a special type called **time series data**.
    Time series data requires special treatment to properly model it, as it typically
    violates the assumptions required for statistical modeling, such as a constant
    mean and variance.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 我们正在处理的数据是一种特殊类型，称为**时间序列数据**。时间序列数据需要特殊处理以正确建模，因为它通常违反了统计建模所需的假设，如恒定的均值和方差。
- en: One consequence of improperly handling time series data is that error metrics
    give wildly inaccurate measures. Because of significant autocorrelation, in other
    words, the data in the next period is highly correlated with data in the current
    period, it appears that we have achieved much better predictions than we actually
    have.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 错误地处理时间序列数据的一个后果是，误差度量会给出极其不准确的结果。由于存在显著的自相关，换句话说，下一个周期的数据与当前周期的数据高度相关，因此看起来我们的预测比实际情况要好得多。
- en: To address these issues, time series data is often **differenced** (in the case
    of stock data, this would mean we look at the daily change, not the absolute level
    of the index) to render it as what we call **stationary**; that is, it has a constant
    mean and variance and lacks significant autocorrelation.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这些问题，时间序列数据通常会被**差分**（在股市数据中，这意味着我们查看的是每日变化，而不是指数的绝对值），以使其变为我们所谓的**平稳**数据；也就是说，数据具有恒定的均值和方差，并且没有显著的自相关。
- en: If you intend to pursue working with time series data, I implore you to research
    these concepts in more detail.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打算继续处理时间序列数据，我强烈建议你更详细地研究这些概念。
- en: Dynamic time warping
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 动态时间规整
- en: 'Next, however, I want to introduce another model, which uses a completely different
    algorithm. This algorithm is called **dynamic time warping**. What it does is
    give you a metric that represents the similarity between two time series:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我想介绍另一个使用完全不同算法的模型。这个算法叫做**动态时间规整**。它的作用是给出一个度量，表示两个时间序列之间的相似性：
- en: 'To get started, we''ll need to `pip install` the `fastdtw` library:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了开始，我们需要通过`pip install`安装`fastdtw`库：
- en: '[PRE44]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Once that is installed, we''ll import the additional libraries we''ll need:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，我们将导入需要的其他库：
- en: '[PRE45]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Next, we''ll create the function that will take in two series and return the
    distance between them:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将创建一个函数，接受两个序列并返回它们之间的距离：
- en: '[PRE46]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Now, we''ll split our 18 years'' worth of time series data into distinct five-day
    periods. We''ll pair together each period with one additional point. This will
    serve to create our *x* and *y* data, as follows:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将把18年的时间序列数据分成不同的五天周期。我们将每个周期与一个额外的点配对。这将用于创建我们的*x*和*y*数据，具体如下：
- en: '[PRE47]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'We can take a look at our first series to get an idea of what the data looks
    like:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以查看我们的第一个序列，了解数据的样子：
- en: '[PRE48]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'This generates the following output:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/60f02d5a-6428-4761-8f83-d88401d360e5.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![](img/60f02d5a-6428-4761-8f83-d88401d360e5.png)'
- en: 'Now that we have each series, we can run them all through our algorithm to
    get the distance metric for each series against every other series:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们有了每个系列，我们可以通过我们的算法将它们与其他所有系列进行比对，计算每个系列与其他系列的距离度量：
- en: '[PRE49]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Once we have that, we can place it into a `DataFrame`. We''ll drop series that
    have `0` distance, as they represent the same series. We''ll also sort according
    to the date of the series and look only at those where the first series is before
    the second, chronologically speaking:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们得到这些，我们可以将其放入一个`DataFrame`。我们将删除距离为`0`的系列，因为它们代表相同的系列。我们还将按系列的日期进行排序，并只查看那些第一个系列出现在第二个系列之前的情况，按照时间顺序：
- en: '[PRE50]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'And finally, we''ll limit our trades where the distance is less than `1` and
    the first series has a positive return:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将限制交易距离小于`1`并且第一个系列有正回报的情况：
- en: '[PRE51]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'This generates the following output:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/adb82c6f-6a3a-44f6-b76b-559fb4fc0f63.png)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![](img/adb82c6f-6a3a-44f6-b76b-559fb4fc0f63.png)'
- en: 'Let''s see what one of our top patterns (A:6 and B:598) looks like when plotted:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看我们最顶尖的一个模式（A:6 和 B:598）绘制出来是什么样子的：
- en: '[PRE52]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The preceding code generates the following output:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码生成了以下输出：
- en: '![](img/5e0fe1c2-0cd7-4bb7-b3e6-2dc607a7542a.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5e0fe1c2-0cd7-4bb7-b3e6-2dc607a7542a.png)'
- en: 'Now, we''ll plot the second one:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们来绘制第二个：
- en: '[PRE53]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The preceding code generates the following output:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码生成了以下输出：
- en: '![](img/3d57a1f6-daa1-4a21-8049-accc007be82e.png)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3d57a1f6-daa1-4a21-8049-accc007be82e.png)'
- en: As you can see, the curves are nearly identical, which is exactly what we want.
    We're going to try to find all curves that have positive next-day gains and then,
    once we have a curve that is highly similar to one of these profitable curves,
    we'll buy it in anticipation of another gain.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，这些曲线几乎完全相同，这正是我们所期望的。我们将尝试找到所有有正向次日收益的曲线，然后，一旦我们找到一条与这些盈利曲线高度相似的曲线，我们就会购买它，期待再次获得收益。
- en: Evaluating our trades
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估我们的交易
- en: 'Let''s now construct a function to evaluate our trades. We''ll buy similar
    curves unless they fail to return a positive result. If that happens, we''ll eliminate
    them, as follows:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们构建一个函数来评估我们的交易。我们将购买相似的曲线，除非它们未能产生正向回报。如果发生这种情况，我们将把它们剔除，代码如下：
- en: '[PRE54]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Now that we have all the returns from our trades stored in `return_list`, let''s
    evaluate the results:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经将所有交易的回报存储在`return_list`中，接下来让我们评估一下结果：
- en: '[PRE55]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'This generates the following output:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成以下输出：
- en: '![](img/c30f2649-f010-49bf-8967-c431a1f1b4ee.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c30f2649-f010-49bf-8967-c431a1f1b4ee.png)'
- en: These results are by far the best we've seen. The win/loss ratio and the mean
    are far above our other models. It appears we may be on to something with this
    new model, especially compared to the others we've seen.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 这些结果是我们迄今为止看到的最好的。盈亏比和均值都远高于其他模型。看起来我们在这个新模型上可能有所突破，尤其是与我们之前看到的其他模型相比。
- en: At this point, to vet our model further, we should explore its robustness by
    examining other time periods for our matches. Does extending beyond the four days
    improve the model? Should we always exclude the patterns that generate a loss?
    There are an enormous number of questions to explore at this point, but I'll leave
    this as an exercise for the reader.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，为了进一步验证我们的模型，我们应通过检视其他时间段来考察其稳健性。延长四天的时间跨度是否能改进模型？我们是否应该总是排除那些产生亏损的模式？此时有大量问题需要探讨，但我将把这些作为留给读者的练习。
- en: Summary
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we've looked at the inner workings of the stock market and
    explored a number of ways to approach utilizing machine learning in a trading
    strategy. There is no doubt the material in this chapter could fill a book itself.
    We even failed to cover some of the most important aspects of trading, such as
    portfolio construction, risk mitigation, and money management. These are critical
    components to any strategy, perhaps even more important than trade signals.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，我们探讨了股市的内部运作，并探索了多种在交易策略中应用机器学习的方法。毫无疑问，本章的内容本身就足以填满一本书。我们甚至没有涵盖一些最重要的交易方面，比如投资组合构建、风险缓解和资金管理。这些都是任何策略中至关重要的组成部分，甚至可能比交易信号更为重要。
- en: Hopefully, this will serve as a jumping-off point for your own explorations,
    but again, I caution you that *beating the market* is a nearly impossible game—one
    in which you are competing against the brightest minds in the world. If you do
    decide to try, I wish you the best of luck. Just remember that I warned you if
    it doesn't turn out like you hoped!
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 希望这能成为你自己探索的起点，但再次提醒你，*战胜市场*几乎是一个不可能的游戏——你将与世界上最聪明的头脑竞争。如果你决定尝试，祝你好运。只要记住，如果结果不如你所愿，我已经提醒过你！
